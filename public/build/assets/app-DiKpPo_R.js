var B9=Object.defineProperty;var T9=(n,r,e)=>r in n?B9(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var is=(n,r,e)=>T9(n,typeof r!="symbol"?r+"":r,e);var So=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function CF(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var r=n.default;if(typeof r=="function"){var e=function i(){return this instanceof i?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),e}var Rx={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var I9=Rx.exports,z6;function IC(){return z6||(z6=1,function(n){(function(r,e){n.exports=r.document?e(r,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return e(i)}})(typeof window<"u"?window:I9,function(r,e){var i=[],o=Object.getPrototypeOf,a=i.slice,l=i.flat?function(ae){return i.flat.call(ae)}:function(ae){return i.concat.apply([],ae)},t=i.push,h=i.indexOf,f={},p=f.toString,_=f.hasOwnProperty,g=_.toString,m=g.call(Object),b={},x=function(we){return typeof we=="function"&&typeof we.nodeType!="number"&&typeof we.item!="function"},v=function(we){return we!=null&&we===we.window},S=r.document,B={type:!0,src:!0,nonce:!0,noModule:!0};function F(ae,we,Le){Le=Le||S;var $e,ct,ft=Le.createElement("script");if(ft.text=ae,we)for($e in B)ct=we[$e]||we.getAttribute&&we.getAttribute($e),ct&&ft.setAttribute($e,ct);Le.head.appendChild(ft).parentNode.removeChild(ft)}function O(ae){return ae==null?ae+"":typeof ae=="object"||typeof ae=="function"?f[p.call(ae)]||"object":typeof ae}var V="3.7.1",X=/HTML$/i,Q=function(ae,we){return new Q.fn.init(ae,we)};Q.fn=Q.prototype={jquery:V,constructor:Q,length:0,toArray:function(){return a.call(this)},get:function(ae){return ae==null?a.call(this):ae<0?this[ae+this.length]:this[ae]},pushStack:function(ae){var we=Q.merge(this.constructor(),ae);return we.prevObject=this,we},each:function(ae){return Q.each(this,ae)},map:function(ae){return this.pushStack(Q.map(this,function(we,Le){return ae.call(we,Le,we)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Q.grep(this,function(ae,we){return(we+1)%2}))},odd:function(){return this.pushStack(Q.grep(this,function(ae,we){return we%2}))},eq:function(ae){var we=this.length,Le=+ae+(ae<0?we:0);return this.pushStack(Le>=0&&Le<we?[this[Le]]:[])},end:function(){return this.prevObject||this.constructor()},push:t,sort:i.sort,splice:i.splice},Q.extend=Q.fn.extend=function(){var ae,we,Le,$e,ct,ft,at=arguments[0]||{},Er=1,hr=arguments.length,Wr=!1;for(typeof at=="boolean"&&(Wr=at,at=arguments[Er]||{},Er++),typeof at!="object"&&!x(at)&&(at={}),Er===hr&&(at=this,Er--);Er<hr;Er++)if((ae=arguments[Er])!=null)for(we in ae)$e=ae[we],!(we==="__proto__"||at===$e)&&(Wr&&$e&&(Q.isPlainObject($e)||(ct=Array.isArray($e)))?(Le=at[we],ct&&!Array.isArray(Le)?ft=[]:!ct&&!Q.isPlainObject(Le)?ft={}:ft=Le,ct=!1,at[we]=Q.extend(Wr,ft,$e)):$e!==void 0&&(at[we]=$e));return at},Q.extend({expando:"jQuery"+(V+Math.random()).replace(/\D/g,""),isReady:!0,error:function(ae){throw new Error(ae)},noop:function(){},isPlainObject:function(ae){var we,Le;return!ae||p.call(ae)!=="[object Object]"?!1:(we=o(ae),we?(Le=_.call(we,"constructor")&&we.constructor,typeof Le=="function"&&g.call(Le)===m):!0)},isEmptyObject:function(ae){var we;for(we in ae)return!1;return!0},globalEval:function(ae,we,Le){F(ae,{nonce:we&&we.nonce},Le)},each:function(ae,we){var Le,$e=0;if(ee(ae))for(Le=ae.length;$e<Le&&we.call(ae[$e],$e,ae[$e])!==!1;$e++);else for($e in ae)if(we.call(ae[$e],$e,ae[$e])===!1)break;return ae},text:function(ae){var we,Le="",$e=0,ct=ae.nodeType;if(!ct)for(;we=ae[$e++];)Le+=Q.text(we);return ct===1||ct===11?ae.textContent:ct===9?ae.documentElement.textContent:ct===3||ct===4?ae.nodeValue:Le},makeArray:function(ae,we){var Le=we||[];return ae!=null&&(ee(Object(ae))?Q.merge(Le,typeof ae=="string"?[ae]:ae):t.call(Le,ae)),Le},inArray:function(ae,we,Le){return we==null?-1:h.call(we,ae,Le)},isXMLDoc:function(ae){var we=ae&&ae.namespaceURI,Le=ae&&(ae.ownerDocument||ae).documentElement;return!X.test(we||Le&&Le.nodeName||"HTML")},merge:function(ae,we){for(var Le=+we.length,$e=0,ct=ae.length;$e<Le;$e++)ae[ct++]=we[$e];return ae.length=ct,ae},grep:function(ae,we,Le){for(var $e,ct=[],ft=0,at=ae.length,Er=!Le;ft<at;ft++)$e=!we(ae[ft],ft),$e!==Er&&ct.push(ae[ft]);return ct},map:function(ae,we,Le){var $e,ct,ft=0,at=[];if(ee(ae))for($e=ae.length;ft<$e;ft++)ct=we(ae[ft],ft,Le),ct!=null&&at.push(ct);else for(ft in ae)ct=we(ae[ft],ft,Le),ct!=null&&at.push(ct);return l(at)},guid:1,support:b}),typeof Symbol=="function"&&(Q.fn[Symbol.iterator]=i[Symbol.iterator]),Q.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(ae,we){f["[object "+we+"]"]=we.toLowerCase()});function ee(ae){var we=!!ae&&"length"in ae&&ae.length,Le=O(ae);return x(ae)||v(ae)?!1:Le==="array"||we===0||typeof we=="number"&&we>0&&we-1 in ae}function ne(ae,we){return ae.nodeName&&ae.nodeName.toLowerCase()===we.toLowerCase()}var Ae=i.pop,fe=i.sort,ce=i.splice,G="[\\x20\\t\\r\\n\\f]",Z=new RegExp("^"+G+"+|((?:^|[^\\\\])(?:\\\\.)*)"+G+"+$","g");Q.contains=function(ae,we){var Le=we&&we.parentNode;return ae===Le||!!(Le&&Le.nodeType===1&&(ae.contains?ae.contains(Le):ae.compareDocumentPosition&&ae.compareDocumentPosition(Le)&16))};var z=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function k(ae,we){return we?ae==="\0"?"ï¿½":ae.slice(0,-1)+"\\"+ae.charCodeAt(ae.length-1).toString(16)+" ":"\\"+ae}Q.escapeSelector=function(ae){return(ae+"").replace(z,k)};var R=S,N=t;(function(){var ae,we,Le,$e,ct,ft=N,at,Er,hr,Wr,bn,Hn=Q.expando,cn=0,Hr=0,ei=sa(),Ti=sa(),vs=sa(),ma=sa(),Fe=function(ir,Lr){return ir===Lr&&(ct=!0),0},pt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",lr="(?:\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",gr="\\["+G+"*("+lr+")(?:"+G+"*([*^$|!~]?=)"+G+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+lr+"))|)"+G+"*\\]",Kr=":("+lr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+gr+")*)|.*)\\)|)",Zr=new RegExp(G+"+","g"),Gn=new RegExp("^"+G+"*,"+G+"*"),Hi=new RegExp("^"+G+"*([>+~]|"+G+")"+G+"*"),ps=new RegExp(G+"|>"),ws=new RegExp(Kr),Ns=new RegExp("^"+lr+"$"),Ws={ID:new RegExp("^#("+lr+")"),CLASS:new RegExp("^\\.("+lr+")"),TAG:new RegExp("^("+lr+"|[*])"),ATTR:new RegExp("^"+gr),PSEUDO:new RegExp("^"+Kr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+G+"*(even|odd|(([+-]|)(\\d*)n|)"+G+"*(?:([+-]|)"+G+"*(\\d+)|))"+G+"*\\)|)","i"),bool:new RegExp("^(?:"+pt+")$","i"),needsContext:new RegExp("^"+G+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+G+"*((?:-\\d)?\\d*)"+G+"*\\)|)(?=[^-]|$)","i")},vo=/^(?:input|select|textarea|button)$/i,qs=/^h\d$/i,as=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Qo=/[+~]/,Vo=new RegExp("\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\([^\\r\\n\\f])","g"),Li=function(ir,Lr){var rn="0x"+ir.slice(1)-65536;return Lr||(rn<0?String.fromCharCode(rn+65536):String.fromCharCode(rn>>10|55296,rn&1023|56320))},Sn=function(){jl()},ia=Ca(function(ir){return ir.disabled===!0&&ne(ir,"fieldset")},{dir:"parentNode",next:"legend"});function Ii(){try{return at.activeElement}catch{}}try{ft.apply(i=a.call(R.childNodes),R.childNodes),i[R.childNodes.length].nodeType}catch{ft={apply:function(Lr,rn){N.apply(Lr,a.call(rn))},call:function(Lr){N.apply(Lr,a.call(arguments,1))}}}function As(ir,Lr,rn,fn){var Kt,Pr,Cr,Nn,Qn,ki,es,Oi=Lr&&Lr.ownerDocument,Zs=Lr?Lr.nodeType:9;if(rn=rn||[],typeof ir!="string"||!ir||Zs!==1&&Zs!==9&&Zs!==11)return rn;if(!fn&&(jl(Lr),Lr=Lr||at,hr)){if(Zs!==11&&(Qn=as.exec(ir)))if(Kt=Qn[1]){if(Zs===9)if(Cr=Lr.getElementById(Kt)){if(Cr.id===Kt)return ft.call(rn,Cr),rn}else return rn;else if(Oi&&(Cr=Oi.getElementById(Kt))&&As.contains(Lr,Cr)&&Cr.id===Kt)return ft.call(rn,Cr),rn}else{if(Qn[2])return ft.apply(rn,Lr.getElementsByTagName(ir)),rn;if((Kt=Qn[3])&&Lr.getElementsByClassName)return ft.apply(rn,Lr.getElementsByClassName(Kt)),rn}if(!ma[ir+" "]&&(!Wr||!Wr.test(ir))){if(es=ir,Oi=Lr,Zs===1&&(ps.test(ir)||Hi.test(ir))){for(Oi=Qo.test(ir)&&Xa(Lr.parentNode)||Lr,(Oi!=Lr||!b.scope)&&((Nn=Lr.getAttribute("id"))?Nn=Q.escapeSelector(Nn):Lr.setAttribute("id",Nn=Hn)),ki=Al(ir),Pr=ki.length;Pr--;)ki[Pr]=(Nn?"#"+Nn:":scope")+" "+Va(ki[Pr]);es=ki.join(",")}try{return ft.apply(rn,Oi.querySelectorAll(es)),rn}catch{ma(ir,!0)}finally{Nn===Hn&&Lr.removeAttribute("id")}}}return Wl(ir.replace(Z,"$1"),Lr,rn,fn)}function sa(){var ir=[];function Lr(rn,fn){return ir.push(rn+" ")>we.cacheLength&&delete Lr[ir.shift()],Lr[rn+" "]=fn}return Lr}function Ai(ir){return ir[Hn]=!0,ir}function aa(ir){var Lr=at.createElement("fieldset");try{return!!ir(Lr)}catch{return!1}finally{Lr.parentNode&&Lr.parentNode.removeChild(Lr),Lr=null}}function ru(ir){return function(Lr){return ne(Lr,"input")&&Lr.type===ir}}function Tl(ir){return function(Lr){return(ne(Lr,"input")||ne(Lr,"button"))&&Lr.type===ir}}function al(ir){return function(Lr){return"form"in Lr?Lr.parentNode&&Lr.disabled===!1?"label"in Lr?"label"in Lr.parentNode?Lr.parentNode.disabled===ir:Lr.disabled===ir:Lr.isDisabled===ir||Lr.isDisabled!==!ir&&ia(Lr)===ir:Lr.disabled===ir:"label"in Lr?Lr.disabled===ir:!1}}function Us(ir){return Ai(function(Lr){return Lr=+Lr,Ai(function(rn,fn){for(var Kt,Pr=ir([],rn.length,Lr),Cr=Pr.length;Cr--;)rn[Kt=Pr[Cr]]&&(rn[Kt]=!(fn[Kt]=rn[Kt]))})})}function Xa(ir){return ir&&typeof ir.getElementsByTagName<"u"&&ir}function jl(ir){var Lr,rn=ir?ir.ownerDocument||ir:R;return rn==at||rn.nodeType!==9||!rn.documentElement||(at=rn,Er=at.documentElement,hr=!Q.isXMLDoc(at),bn=Er.matches||Er.webkitMatchesSelector||Er.msMatchesSelector,Er.msMatchesSelector&&R!=at&&(Lr=at.defaultView)&&Lr.top!==Lr&&Lr.addEventListener("unload",Sn),b.getById=aa(function(fn){return Er.appendChild(fn).id=Q.expando,!at.getElementsByName||!at.getElementsByName(Q.expando).length}),b.disconnectedMatch=aa(function(fn){return bn.call(fn,"*")}),b.scope=aa(function(){return at.querySelectorAll(":scope")}),b.cssHas=aa(function(){try{return at.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),b.getById?(we.filter.ID=function(fn){var Kt=fn.replace(Vo,Li);return function(Pr){return Pr.getAttribute("id")===Kt}},we.find.ID=function(fn,Kt){if(typeof Kt.getElementById<"u"&&hr){var Pr=Kt.getElementById(fn);return Pr?[Pr]:[]}}):(we.filter.ID=function(fn){var Kt=fn.replace(Vo,Li);return function(Pr){var Cr=typeof Pr.getAttributeNode<"u"&&Pr.getAttributeNode("id");return Cr&&Cr.value===Kt}},we.find.ID=function(fn,Kt){if(typeof Kt.getElementById<"u"&&hr){var Pr,Cr,Nn,Qn=Kt.getElementById(fn);if(Qn){if(Pr=Qn.getAttributeNode("id"),Pr&&Pr.value===fn)return[Qn];for(Nn=Kt.getElementsByName(fn),Cr=0;Qn=Nn[Cr++];)if(Pr=Qn.getAttributeNode("id"),Pr&&Pr.value===fn)return[Qn]}return[]}}),we.find.TAG=function(fn,Kt){return typeof Kt.getElementsByTagName<"u"?Kt.getElementsByTagName(fn):Kt.querySelectorAll(fn)},we.find.CLASS=function(fn,Kt){if(typeof Kt.getElementsByClassName<"u"&&hr)return Kt.getElementsByClassName(fn)},Wr=[],aa(function(fn){var Kt;Er.appendChild(fn).innerHTML="<a id='"+Hn+"' href='' disabled='disabled'></a><select id='"+Hn+"-\r\\' disabled='disabled'><option selected=''></option></select>",fn.querySelectorAll("[selected]").length||Wr.push("\\["+G+"*(?:value|"+pt+")"),fn.querySelectorAll("[id~="+Hn+"-]").length||Wr.push("~="),fn.querySelectorAll("a#"+Hn+"+*").length||Wr.push(".#.+[+~]"),fn.querySelectorAll(":checked").length||Wr.push(":checked"),Kt=at.createElement("input"),Kt.setAttribute("type","hidden"),fn.appendChild(Kt).setAttribute("name","D"),Er.appendChild(fn).disabled=!0,fn.querySelectorAll(":disabled").length!==2&&Wr.push(":enabled",":disabled"),Kt=at.createElement("input"),Kt.setAttribute("name",""),fn.appendChild(Kt),fn.querySelectorAll("[name='']").length||Wr.push("\\["+G+"*name"+G+"*="+G+`*(?:''|"")`)}),b.cssHas||Wr.push(":has"),Wr=Wr.length&&new RegExp(Wr.join("|")),Fe=function(fn,Kt){if(fn===Kt)return ct=!0,0;var Pr=!fn.compareDocumentPosition-!Kt.compareDocumentPosition;return Pr||(Pr=(fn.ownerDocument||fn)==(Kt.ownerDocument||Kt)?fn.compareDocumentPosition(Kt):1,Pr&1||!b.sortDetached&&Kt.compareDocumentPosition(fn)===Pr?fn===at||fn.ownerDocument==R&&As.contains(R,fn)?-1:Kt===at||Kt.ownerDocument==R&&As.contains(R,Kt)?1:$e?h.call($e,fn)-h.call($e,Kt):0:Pr&4?-1:1)}),at}As.matches=function(ir,Lr){return As(ir,null,null,Lr)},As.matchesSelector=function(ir,Lr){if(jl(ir),hr&&!ma[Lr+" "]&&(!Wr||!Wr.test(Lr)))try{var rn=bn.call(ir,Lr);if(rn||b.disconnectedMatch||ir.document&&ir.document.nodeType!==11)return rn}catch{ma(Lr,!0)}return As(Lr,at,null,[ir]).length>0},As.contains=function(ir,Lr){return(ir.ownerDocument||ir)!=at&&jl(ir),Q.contains(ir,Lr)},As.attr=function(ir,Lr){(ir.ownerDocument||ir)!=at&&jl(ir);var rn=we.attrHandle[Lr.toLowerCase()],fn=rn&&_.call(we.attrHandle,Lr.toLowerCase())?rn(ir,Lr,!hr):void 0;return fn!==void 0?fn:ir.getAttribute(Lr)},As.error=function(ir){throw new Error("Syntax error, unrecognized expression: "+ir)},Q.uniqueSort=function(ir){var Lr,rn=[],fn=0,Kt=0;if(ct=!b.sortStable,$e=!b.sortStable&&a.call(ir,0),fe.call(ir,Fe),ct){for(;Lr=ir[Kt++];)Lr===ir[Kt]&&(fn=rn.push(Kt));for(;fn--;)ce.call(ir,rn[fn],1)}return $e=null,ir},Q.fn.uniqueSort=function(){return this.pushStack(Q.uniqueSort(a.apply(this)))},we=Q.expr={cacheLength:50,createPseudo:Ai,match:Ws,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ir){return ir[1]=ir[1].replace(Vo,Li),ir[3]=(ir[3]||ir[4]||ir[5]||"").replace(Vo,Li),ir[2]==="~="&&(ir[3]=" "+ir[3]+" "),ir.slice(0,4)},CHILD:function(ir){return ir[1]=ir[1].toLowerCase(),ir[1].slice(0,3)==="nth"?(ir[3]||As.error(ir[0]),ir[4]=+(ir[4]?ir[5]+(ir[6]||1):2*(ir[3]==="even"||ir[3]==="odd")),ir[5]=+(ir[7]+ir[8]||ir[3]==="odd")):ir[3]&&As.error(ir[0]),ir},PSEUDO:function(ir){var Lr,rn=!ir[6]&&ir[2];return Ws.CHILD.test(ir[0])?null:(ir[3]?ir[2]=ir[4]||ir[5]||"":rn&&ws.test(rn)&&(Lr=Al(rn,!0))&&(Lr=rn.indexOf(")",rn.length-Lr)-rn.length)&&(ir[0]=ir[0].slice(0,Lr),ir[2]=rn.slice(0,Lr)),ir.slice(0,3))}},filter:{TAG:function(ir){var Lr=ir.replace(Vo,Li).toLowerCase();return ir==="*"?function(){return!0}:function(rn){return ne(rn,Lr)}},CLASS:function(ir){var Lr=ei[ir+" "];return Lr||(Lr=new RegExp("(^|"+G+")"+ir+"("+G+"|$)"))&&ei(ir,function(rn){return Lr.test(typeof rn.className=="string"&&rn.className||typeof rn.getAttribute<"u"&&rn.getAttribute("class")||"")})},ATTR:function(ir,Lr,rn){return function(fn){var Kt=As.attr(fn,ir);return Kt==null?Lr==="!=":Lr?(Kt+="",Lr==="="?Kt===rn:Lr==="!="?Kt!==rn:Lr==="^="?rn&&Kt.indexOf(rn)===0:Lr==="*="?rn&&Kt.indexOf(rn)>-1:Lr==="$="?rn&&Kt.slice(-rn.length)===rn:Lr==="~="?(" "+Kt.replace(Zr," ")+" ").indexOf(rn)>-1:Lr==="|="?Kt===rn||Kt.slice(0,rn.length+1)===rn+"-":!1):!0}},CHILD:function(ir,Lr,rn,fn,Kt){var Pr=ir.slice(0,3)!=="nth",Cr=ir.slice(-4)!=="last",Nn=Lr==="of-type";return fn===1&&Kt===0?function(Qn){return!!Qn.parentNode}:function(Qn,ki,es){var Oi,Zs,ms,Js,xo,Za=Pr!==Cr?"nextSibling":"previousSibling",Ea=Qn.parentNode,Wa=Nn&&Qn.nodeName.toLowerCase(),Ll=!es&&!Nn,Vs=!1;if(Ea){if(Pr){for(;Za;){for(ms=Qn;ms=ms[Za];)if(Nn?ne(ms,Wa):ms.nodeType===1)return!1;xo=Za=ir==="only"&&!xo&&"nextSibling"}return!0}if(xo=[Cr?Ea.firstChild:Ea.lastChild],Cr&&Ll){for(Zs=Ea[Hn]||(Ea[Hn]={}),Oi=Zs[ir]||[],Js=Oi[0]===cn&&Oi[1],Vs=Js&&Oi[2],ms=Js&&Ea.childNodes[Js];ms=++Js&&ms&&ms[Za]||(Vs=Js=0)||xo.pop();)if(ms.nodeType===1&&++Vs&&ms===Qn){Zs[ir]=[cn,Js,Vs];break}}else if(Ll&&(Zs=Qn[Hn]||(Qn[Hn]={}),Oi=Zs[ir]||[],Js=Oi[0]===cn&&Oi[1],Vs=Js),Vs===!1)for(;(ms=++Js&&ms&&ms[Za]||(Vs=Js=0)||xo.pop())&&!((Nn?ne(ms,Wa):ms.nodeType===1)&&++Vs&&(Ll&&(Zs=ms[Hn]||(ms[Hn]={}),Zs[ir]=[cn,Vs]),ms===Qn)););return Vs-=Kt,Vs===fn||Vs%fn===0&&Vs/fn>=0}}},PSEUDO:function(ir,Lr){var rn,fn=we.pseudos[ir]||we.setFilters[ir.toLowerCase()]||As.error("unsupported pseudo: "+ir);return fn[Hn]?fn(Lr):fn.length>1?(rn=[ir,ir,"",Lr],we.setFilters.hasOwnProperty(ir.toLowerCase())?Ai(function(Kt,Pr){for(var Cr,Nn=fn(Kt,Lr),Qn=Nn.length;Qn--;)Cr=h.call(Kt,Nn[Qn]),Kt[Cr]=!(Pr[Cr]=Nn[Qn])}):function(Kt){return fn(Kt,0,rn)}):fn}},pseudos:{not:Ai(function(ir){var Lr=[],rn=[],fn=dc(ir.replace(Z,"$1"));return fn[Hn]?Ai(function(Kt,Pr,Cr,Nn){for(var Qn,ki=fn(Kt,null,Nn,[]),es=Kt.length;es--;)(Qn=ki[es])&&(Kt[es]=!(Pr[es]=Qn))}):function(Kt,Pr,Cr){return Lr[0]=Kt,fn(Lr,null,Cr,rn),Lr[0]=null,!rn.pop()}}),has:Ai(function(ir){return function(Lr){return As(ir,Lr).length>0}}),contains:Ai(function(ir){return ir=ir.replace(Vo,Li),function(Lr){return(Lr.textContent||Q.text(Lr)).indexOf(ir)>-1}}),lang:Ai(function(ir){return Ns.test(ir||"")||As.error("unsupported lang: "+ir),ir=ir.replace(Vo,Li).toLowerCase(),function(Lr){var rn;do if(rn=hr?Lr.lang:Lr.getAttribute("xml:lang")||Lr.getAttribute("lang"))return rn=rn.toLowerCase(),rn===ir||rn.indexOf(ir+"-")===0;while((Lr=Lr.parentNode)&&Lr.nodeType===1);return!1}}),target:function(ir){var Lr=r.location&&r.location.hash;return Lr&&Lr.slice(1)===ir.id},root:function(ir){return ir===Er},focus:function(ir){return ir===Ii()&&at.hasFocus()&&!!(ir.type||ir.href||~ir.tabIndex)},enabled:al(!1),disabled:al(!0),checked:function(ir){return ne(ir,"input")&&!!ir.checked||ne(ir,"option")&&!!ir.selected},selected:function(ir){return ir.parentNode&&ir.parentNode.selectedIndex,ir.selected===!0},empty:function(ir){for(ir=ir.firstChild;ir;ir=ir.nextSibling)if(ir.nodeType<6)return!1;return!0},parent:function(ir){return!we.pseudos.empty(ir)},header:function(ir){return qs.test(ir.nodeName)},input:function(ir){return vo.test(ir.nodeName)},button:function(ir){return ne(ir,"input")&&ir.type==="button"||ne(ir,"button")},text:function(ir){var Lr;return ne(ir,"input")&&ir.type==="text"&&((Lr=ir.getAttribute("type"))==null||Lr.toLowerCase()==="text")},first:Us(function(){return[0]}),last:Us(function(ir,Lr){return[Lr-1]}),eq:Us(function(ir,Lr,rn){return[rn<0?rn+Lr:rn]}),even:Us(function(ir,Lr){for(var rn=0;rn<Lr;rn+=2)ir.push(rn);return ir}),odd:Us(function(ir,Lr){for(var rn=1;rn<Lr;rn+=2)ir.push(rn);return ir}),lt:Us(function(ir,Lr,rn){var fn;for(rn<0?fn=rn+Lr:rn>Lr?fn=Lr:fn=rn;--fn>=0;)ir.push(fn);return ir}),gt:Us(function(ir,Lr,rn){for(var fn=rn<0?rn+Lr:rn;++fn<Lr;)ir.push(fn);return ir})}},we.pseudos.nth=we.pseudos.eq;for(ae in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})we.pseudos[ae]=ru(ae);for(ae in{submit:!0,reset:!0})we.pseudos[ae]=Tl(ae);function Sa(){}Sa.prototype=we.filters=we.pseudos,we.setFilters=new Sa;function Al(ir,Lr){var rn,fn,Kt,Pr,Cr,Nn,Qn,ki=Ti[ir+" "];if(ki)return Lr?0:ki.slice(0);for(Cr=ir,Nn=[],Qn=we.preFilter;Cr;){(!rn||(fn=Gn.exec(Cr)))&&(fn&&(Cr=Cr.slice(fn[0].length)||Cr),Nn.push(Kt=[])),rn=!1,(fn=Hi.exec(Cr))&&(rn=fn.shift(),Kt.push({value:rn,type:fn[0].replace(Z," ")}),Cr=Cr.slice(rn.length));for(Pr in we.filter)(fn=Ws[Pr].exec(Cr))&&(!Qn[Pr]||(fn=Qn[Pr](fn)))&&(rn=fn.shift(),Kt.push({value:rn,type:Pr,matches:fn}),Cr=Cr.slice(rn.length));if(!rn)break}return Lr?Cr.length:Cr?As.error(ir):Ti(ir,Nn).slice(0)}function Va(ir){for(var Lr=0,rn=ir.length,fn="";Lr<rn;Lr++)fn+=ir[Lr].value;return fn}function Ca(ir,Lr,rn){var fn=Lr.dir,Kt=Lr.next,Pr=Kt||fn,Cr=rn&&Pr==="parentNode",Nn=Hr++;return Lr.first?function(Qn,ki,es){for(;Qn=Qn[fn];)if(Qn.nodeType===1||Cr)return ir(Qn,ki,es);return!1}:function(Qn,ki,es){var Oi,Zs,ms=[cn,Nn];if(es){for(;Qn=Qn[fn];)if((Qn.nodeType===1||Cr)&&ir(Qn,ki,es))return!0}else for(;Qn=Qn[fn];)if(Qn.nodeType===1||Cr)if(Zs=Qn[Hn]||(Qn[Hn]={}),Kt&&ne(Qn,Kt))Qn=Qn[fn]||Qn;else{if((Oi=Zs[Pr])&&Oi[0]===cn&&Oi[1]===Nn)return ms[2]=Oi[2];if(Zs[Pr]=ms,ms[2]=ir(Qn,ki,es))return!0}return!1}}function yu(ir){return ir.length>1?function(Lr,rn,fn){for(var Kt=ir.length;Kt--;)if(!ir[Kt](Lr,rn,fn))return!1;return!0}:ir[0]}function ll(ir,Lr,rn){for(var fn=0,Kt=Lr.length;fn<Kt;fn++)As(ir,Lr[fn],rn);return rn}function ec(ir,Lr,rn,fn,Kt){for(var Pr,Cr=[],Nn=0,Qn=ir.length,ki=Lr!=null;Nn<Qn;Nn++)(Pr=ir[Nn])&&(!rn||rn(Pr,fn,Kt))&&(Cr.push(Pr),ki&&Lr.push(Nn));return Cr}function Ga(ir,Lr,rn,fn,Kt,Pr){return fn&&!fn[Hn]&&(fn=Ga(fn)),Kt&&!Kt[Hn]&&(Kt=Ga(Kt,Pr)),Ai(function(Cr,Nn,Qn,ki){var es,Oi,Zs,ms,Js=[],xo=[],Za=Nn.length,Ea=Cr||ll(Lr||"*",Qn.nodeType?[Qn]:Qn,[]),Wa=ir&&(Cr||!Lr)?ec(Ea,Js,ir,Qn,ki):Ea;if(rn?(ms=Kt||(Cr?ir:Za||fn)?[]:Nn,rn(Wa,ms,Qn,ki)):ms=Wa,fn)for(es=ec(ms,xo),fn(es,[],Qn,ki),Oi=es.length;Oi--;)(Zs=es[Oi])&&(ms[xo[Oi]]=!(Wa[xo[Oi]]=Zs));if(Cr){if(Kt||ir){if(Kt){for(es=[],Oi=ms.length;Oi--;)(Zs=ms[Oi])&&es.push(Wa[Oi]=Zs);Kt(null,ms=[],es,ki)}for(Oi=ms.length;Oi--;)(Zs=ms[Oi])&&(es=Kt?h.call(Cr,Zs):Js[Oi])>-1&&(Cr[es]=!(Nn[es]=Zs))}}else ms=ec(ms===Nn?ms.splice(Za,ms.length):ms),Kt?Kt(null,Nn,ms,ki):ft.apply(Nn,ms)})}function bo(ir){for(var Lr,rn,fn,Kt=ir.length,Pr=we.relative[ir[0].type],Cr=Pr||we.relative[" "],Nn=Pr?1:0,Qn=Ca(function(Oi){return Oi===Lr},Cr,!0),ki=Ca(function(Oi){return h.call(Lr,Oi)>-1},Cr,!0),es=[function(Oi,Zs,ms){var Js=!Pr&&(ms||Zs!=Le)||((Lr=Zs).nodeType?Qn(Oi,Zs,ms):ki(Oi,Zs,ms));return Lr=null,Js}];Nn<Kt;Nn++)if(rn=we.relative[ir[Nn].type])es=[Ca(yu(es),rn)];else{if(rn=we.filter[ir[Nn].type].apply(null,ir[Nn].matches),rn[Hn]){for(fn=++Nn;fn<Kt&&!we.relative[ir[fn].type];fn++);return Ga(Nn>1&&yu(es),Nn>1&&Va(ir.slice(0,Nn-1).concat({value:ir[Nn-2].type===" "?"*":""})).replace(Z,"$1"),rn,Nn<fn&&bo(ir.slice(Nn,fn)),fn<Kt&&bo(ir=ir.slice(fn)),fn<Kt&&Va(ir))}es.push(rn)}return yu(es)}function ml(ir,Lr){var rn=Lr.length>0,fn=ir.length>0,Kt=function(Pr,Cr,Nn,Qn,ki){var es,Oi,Zs,ms=0,Js="0",xo=Pr&&[],Za=[],Ea=Le,Wa=Pr||fn&&we.find.TAG("*",ki),Ll=cn+=Ea==null?1:Math.random()||.1,Vs=Wa.length;for(ki&&(Le=Cr==at||Cr||ki);Js!==Vs&&(es=Wa[Js])!=null;Js++){if(fn&&es){for(Oi=0,!Cr&&es.ownerDocument!=at&&(jl(es),Nn=!hr);Zs=ir[Oi++];)if(Zs(es,Cr||at,Nn)){ft.call(Qn,es);break}ki&&(cn=Ll)}rn&&((es=!Zs&&es)&&ms--,Pr&&xo.push(es))}if(ms+=Js,rn&&Js!==ms){for(Oi=0;Zs=Lr[Oi++];)Zs(xo,Za,Cr,Nn);if(Pr){if(ms>0)for(;Js--;)xo[Js]||Za[Js]||(Za[Js]=Ae.call(Qn));Za=ec(Za)}ft.apply(Qn,Za),ki&&!Pr&&Za.length>0&&ms+Lr.length>1&&Q.uniqueSort(Qn)}return ki&&(cn=Ll,Le=Ea),xo};return rn?Ai(Kt):Kt}function dc(ir,Lr){var rn,fn=[],Kt=[],Pr=vs[ir+" "];if(!Pr){for(Lr||(Lr=Al(ir)),rn=Lr.length;rn--;)Pr=bo(Lr[rn]),Pr[Hn]?fn.push(Pr):Kt.push(Pr);Pr=vs(ir,ml(Kt,fn)),Pr.selector=ir}return Pr}function Wl(ir,Lr,rn,fn){var Kt,Pr,Cr,Nn,Qn,ki=typeof ir=="function"&&ir,es=!fn&&Al(ir=ki.selector||ir);if(rn=rn||[],es.length===1){if(Pr=es[0]=es[0].slice(0),Pr.length>2&&(Cr=Pr[0]).type==="ID"&&Lr.nodeType===9&&hr&&we.relative[Pr[1].type]){if(Lr=(we.find.ID(Cr.matches[0].replace(Vo,Li),Lr)||[])[0],Lr)ki&&(Lr=Lr.parentNode);else return rn;ir=ir.slice(Pr.shift().value.length)}for(Kt=Ws.needsContext.test(ir)?0:Pr.length;Kt--&&(Cr=Pr[Kt],!we.relative[Nn=Cr.type]);)if((Qn=we.find[Nn])&&(fn=Qn(Cr.matches[0].replace(Vo,Li),Qo.test(Pr[0].type)&&Xa(Lr.parentNode)||Lr))){if(Pr.splice(Kt,1),ir=fn.length&&Va(Pr),!ir)return ft.apply(rn,fn),rn;break}}return(ki||dc(ir,es))(fn,Lr,!hr,rn,!Lr||Qo.test(ir)&&Xa(Lr.parentNode)||Lr),rn}b.sortStable=Hn.split("").sort(Fe).join("")===Hn,jl(),b.sortDetached=aa(function(ir){return ir.compareDocumentPosition(at.createElement("fieldset"))&1}),Q.find=As,Q.expr[":"]=Q.expr.pseudos,Q.unique=Q.uniqueSort,As.compile=dc,As.select=Wl,As.setDocument=jl,As.tokenize=Al,As.escape=Q.escapeSelector,As.getText=Q.text,As.isXML=Q.isXMLDoc,As.selectors=Q.expr,As.support=Q.support,As.uniqueSort=Q.uniqueSort})();var U=function(ae,we,Le){for(var $e=[],ct=Le!==void 0;(ae=ae[we])&&ae.nodeType!==9;)if(ae.nodeType===1){if(ct&&Q(ae).is(Le))break;$e.push(ae)}return $e},Y=function(ae,we){for(var Le=[];ae;ae=ae.nextSibling)ae.nodeType===1&&ae!==we&&Le.push(ae);return Le},de=Q.expr.match.needsContext,J=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function xe(ae,we,Le){return x(we)?Q.grep(ae,function($e,ct){return!!we.call($e,ct,$e)!==Le}):we.nodeType?Q.grep(ae,function($e){return $e===we!==Le}):typeof we!="string"?Q.grep(ae,function($e){return h.call(we,$e)>-1!==Le}):Q.filter(we,ae,Le)}Q.filter=function(ae,we,Le){var $e=we[0];return Le&&(ae=":not("+ae+")"),we.length===1&&$e.nodeType===1?Q.find.matchesSelector($e,ae)?[$e]:[]:Q.find.matches(ae,Q.grep(we,function(ct){return ct.nodeType===1}))},Q.fn.extend({find:function(ae){var we,Le,$e=this.length,ct=this;if(typeof ae!="string")return this.pushStack(Q(ae).filter(function(){for(we=0;we<$e;we++)if(Q.contains(ct[we],this))return!0}));for(Le=this.pushStack([]),we=0;we<$e;we++)Q.find(ae,ct[we],Le);return $e>1?Q.uniqueSort(Le):Le},filter:function(ae){return this.pushStack(xe(this,ae||[],!1))},not:function(ae){return this.pushStack(xe(this,ae||[],!0))},is:function(ae){return!!xe(this,typeof ae=="string"&&de.test(ae)?Q(ae):ae||[],!1).length}});var Te,Ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,pe=Q.fn.init=function(ae,we,Le){var $e,ct;if(!ae)return this;if(Le=Le||Te,typeof ae=="string")if(ae[0]==="<"&&ae[ae.length-1]===">"&&ae.length>=3?$e=[null,ae,null]:$e=Ue.exec(ae),$e&&($e[1]||!we))if($e[1]){if(we=we instanceof Q?we[0]:we,Q.merge(this,Q.parseHTML($e[1],we&&we.nodeType?we.ownerDocument||we:S,!0)),J.test($e[1])&&Q.isPlainObject(we))for($e in we)x(this[$e])?this[$e](we[$e]):this.attr($e,we[$e]);return this}else return ct=S.getElementById($e[2]),ct&&(this[0]=ct,this.length=1),this;else return!we||we.jquery?(we||Le).find(ae):this.constructor(we).find(ae);else{if(ae.nodeType)return this[0]=ae,this.length=1,this;if(x(ae))return Le.ready!==void 0?Le.ready(ae):ae(Q)}return Q.makeArray(ae,this)};pe.prototype=Q.fn,Te=Q(S);var Oe=/^(?:parents|prev(?:Until|All))/,re={children:!0,contents:!0,next:!0,prev:!0};Q.fn.extend({has:function(ae){var we=Q(ae,this),Le=we.length;return this.filter(function(){for(var $e=0;$e<Le;$e++)if(Q.contains(this,we[$e]))return!0})},closest:function(ae,we){var Le,$e=0,ct=this.length,ft=[],at=typeof ae!="string"&&Q(ae);if(!de.test(ae)){for(;$e<ct;$e++)for(Le=this[$e];Le&&Le!==we;Le=Le.parentNode)if(Le.nodeType<11&&(at?at.index(Le)>-1:Le.nodeType===1&&Q.find.matchesSelector(Le,ae))){ft.push(Le);break}}return this.pushStack(ft.length>1?Q.uniqueSort(ft):ft)},index:function(ae){return ae?typeof ae=="string"?h.call(Q(ae),this[0]):h.call(this,ae.jquery?ae[0]:ae):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(ae,we){return this.pushStack(Q.uniqueSort(Q.merge(this.get(),Q(ae,we))))},addBack:function(ae){return this.add(ae==null?this.prevObject:this.prevObject.filter(ae))}});function ie(ae,we){for(;(ae=ae[we])&&ae.nodeType!==1;);return ae}Q.each({parent:function(ae){var we=ae.parentNode;return we&&we.nodeType!==11?we:null},parents:function(ae){return U(ae,"parentNode")},parentsUntil:function(ae,we,Le){return U(ae,"parentNode",Le)},next:function(ae){return ie(ae,"nextSibling")},prev:function(ae){return ie(ae,"previousSibling")},nextAll:function(ae){return U(ae,"nextSibling")},prevAll:function(ae){return U(ae,"previousSibling")},nextUntil:function(ae,we,Le){return U(ae,"nextSibling",Le)},prevUntil:function(ae,we,Le){return U(ae,"previousSibling",Le)},siblings:function(ae){return Y((ae.parentNode||{}).firstChild,ae)},children:function(ae){return Y(ae.firstChild)},contents:function(ae){return ae.contentDocument!=null&&o(ae.contentDocument)?ae.contentDocument:(ne(ae,"template")&&(ae=ae.content||ae),Q.merge([],ae.childNodes))}},function(ae,we){Q.fn[ae]=function(Le,$e){var ct=Q.map(this,we,Le);return ae.slice(-5)!=="Until"&&($e=Le),$e&&typeof $e=="string"&&(ct=Q.filter($e,ct)),this.length>1&&(re[ae]||Q.uniqueSort(ct),Oe.test(ae)&&ct.reverse()),this.pushStack(ct)}});var Be=/[^\x20\t\r\n\f]+/g;function He(ae){var we={};return Q.each(ae.match(Be)||[],function(Le,$e){we[$e]=!0}),we}Q.Callbacks=function(ae){ae=typeof ae=="string"?He(ae):Q.extend({},ae);var we,Le,$e,ct,ft=[],at=[],Er=-1,hr=function(){for(ct=ct||ae.once,$e=we=!0;at.length;Er=-1)for(Le=at.shift();++Er<ft.length;)ft[Er].apply(Le[0],Le[1])===!1&&ae.stopOnFalse&&(Er=ft.length,Le=!1);ae.memory||(Le=!1),we=!1,ct&&(Le?ft=[]:ft="")},Wr={add:function(){return ft&&(Le&&!we&&(Er=ft.length-1,at.push(Le)),function bn(Hn){Q.each(Hn,function(cn,Hr){x(Hr)?(!ae.unique||!Wr.has(Hr))&&ft.push(Hr):Hr&&Hr.length&&O(Hr)!=="string"&&bn(Hr)})}(arguments),Le&&!we&&hr()),this},remove:function(){return Q.each(arguments,function(bn,Hn){for(var cn;(cn=Q.inArray(Hn,ft,cn))>-1;)ft.splice(cn,1),cn<=Er&&Er--}),this},has:function(bn){return bn?Q.inArray(bn,ft)>-1:ft.length>0},empty:function(){return ft&&(ft=[]),this},disable:function(){return ct=at=[],ft=Le="",this},disabled:function(){return!ft},lock:function(){return ct=at=[],!Le&&!we&&(ft=Le=""),this},locked:function(){return!!ct},fireWith:function(bn,Hn){return ct||(Hn=Hn||[],Hn=[bn,Hn.slice?Hn.slice():Hn],at.push(Hn),we||hr()),this},fire:function(){return Wr.fireWith(this,arguments),this},fired:function(){return!!$e}};return Wr};function Ge(ae){return ae}function Ne(ae){throw ae}function st(ae,we,Le,$e){var ct;try{ae&&x(ct=ae.promise)?ct.call(ae).done(we).fail(Le):ae&&x(ct=ae.then)?ct.call(ae,we,Le):we.apply(void 0,[ae].slice($e))}catch(ft){Le.apply(void 0,[ft])}}Q.extend({Deferred:function(ae){var we=[["notify","progress",Q.Callbacks("memory"),Q.Callbacks("memory"),2],["resolve","done",Q.Callbacks("once memory"),Q.Callbacks("once memory"),0,"resolved"],["reject","fail",Q.Callbacks("once memory"),Q.Callbacks("once memory"),1,"rejected"]],Le="pending",$e={state:function(){return Le},always:function(){return ct.done(arguments).fail(arguments),this},catch:function(ft){return $e.then(null,ft)},pipe:function(){var ft=arguments;return Q.Deferred(function(at){Q.each(we,function(Er,hr){var Wr=x(ft[hr[4]])&&ft[hr[4]];ct[hr[1]](function(){var bn=Wr&&Wr.apply(this,arguments);bn&&x(bn.promise)?bn.promise().progress(at.notify).done(at.resolve).fail(at.reject):at[hr[0]+"With"](this,Wr?[bn]:arguments)})}),ft=null}).promise()},then:function(ft,at,Er){var hr=0;function Wr(bn,Hn,cn,Hr){return function(){var ei=this,Ti=arguments,vs=function(){var Fe,pt;if(!(bn<hr)){if(Fe=cn.apply(ei,Ti),Fe===Hn.promise())throw new TypeError("Thenable self-resolution");pt=Fe&&(typeof Fe=="object"||typeof Fe=="function")&&Fe.then,x(pt)?Hr?pt.call(Fe,Wr(hr,Hn,Ge,Hr),Wr(hr,Hn,Ne,Hr)):(hr++,pt.call(Fe,Wr(hr,Hn,Ge,Hr),Wr(hr,Hn,Ne,Hr),Wr(hr,Hn,Ge,Hn.notifyWith))):(cn!==Ge&&(ei=void 0,Ti=[Fe]),(Hr||Hn.resolveWith)(ei,Ti))}},ma=Hr?vs:function(){try{vs()}catch(Fe){Q.Deferred.exceptionHook&&Q.Deferred.exceptionHook(Fe,ma.error),bn+1>=hr&&(cn!==Ne&&(ei=void 0,Ti=[Fe]),Hn.rejectWith(ei,Ti))}};bn?ma():(Q.Deferred.getErrorHook?ma.error=Q.Deferred.getErrorHook():Q.Deferred.getStackHook&&(ma.error=Q.Deferred.getStackHook()),r.setTimeout(ma))}}return Q.Deferred(function(bn){we[0][3].add(Wr(0,bn,x(Er)?Er:Ge,bn.notifyWith)),we[1][3].add(Wr(0,bn,x(ft)?ft:Ge)),we[2][3].add(Wr(0,bn,x(at)?at:Ne))}).promise()},promise:function(ft){return ft!=null?Q.extend(ft,$e):$e}},ct={};return Q.each(we,function(ft,at){var Er=at[2],hr=at[5];$e[at[1]]=Er.add,hr&&Er.add(function(){Le=hr},we[3-ft][2].disable,we[3-ft][3].disable,we[0][2].lock,we[0][3].lock),Er.add(at[3].fire),ct[at[0]]=function(){return ct[at[0]+"With"](this===ct?void 0:this,arguments),this},ct[at[0]+"With"]=Er.fireWith}),$e.promise(ct),ae&&ae.call(ct,ct),ct},when:function(ae){var we=arguments.length,Le=we,$e=Array(Le),ct=a.call(arguments),ft=Q.Deferred(),at=function(Er){return function(hr){$e[Er]=this,ct[Er]=arguments.length>1?a.call(arguments):hr,--we||ft.resolveWith($e,ct)}};if(we<=1&&(st(ae,ft.done(at(Le)).resolve,ft.reject,!we),ft.state()==="pending"||x(ct[Le]&&ct[Le].then)))return ft.then();for(;Le--;)st(ct[Le],at(Le),ft.reject);return ft.promise()}});var ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Q.Deferred.exceptionHook=function(ae,we){r.console&&r.console.warn&&ae&&ot.test(ae.name)&&r.console.warn("jQuery.Deferred exception: "+ae.message,ae.stack,we)},Q.readyException=function(ae){r.setTimeout(function(){throw ae})};var Je=Q.Deferred();Q.fn.ready=function(ae){return Je.then(ae).catch(function(we){Q.readyException(we)}),this},Q.extend({isReady:!1,readyWait:1,ready:function(ae){(ae===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,!(ae!==!0&&--Q.readyWait>0)&&Je.resolveWith(S,[Q]))}}),Q.ready.then=Je.then;function Ze(){S.removeEventListener("DOMContentLoaded",Ze),r.removeEventListener("load",Ze),Q.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?r.setTimeout(Q.ready):(S.addEventListener("DOMContentLoaded",Ze),r.addEventListener("load",Ze));var bt=function(ae,we,Le,$e,ct,ft,at){var Er=0,hr=ae.length,Wr=Le==null;if(O(Le)==="object"){ct=!0;for(Er in Le)bt(ae,we,Er,Le[Er],!0,ft,at)}else if($e!==void 0&&(ct=!0,x($e)||(at=!0),Wr&&(at?(we.call(ae,$e),we=null):(Wr=we,we=function(bn,Hn,cn){return Wr.call(Q(bn),cn)})),we))for(;Er<hr;Er++)we(ae[Er],Le,at?$e:$e.call(ae[Er],Er,we(ae[Er],Le)));return ct?ae:Wr?we.call(ae):hr?we(ae[0],Le):ft},yt=/^-ms-/,Nt=/-([a-z])/g;function kt(ae,we){return we.toUpperCase()}function Gt(ae){return ae.replace(yt,"ms-").replace(Nt,kt)}var fr=function(ae){return ae.nodeType===1||ae.nodeType===9||!+ae.nodeType};function Tr(){this.expando=Q.expando+Tr.uid++}Tr.uid=1,Tr.prototype={cache:function(ae){var we=ae[this.expando];return we||(we={},fr(ae)&&(ae.nodeType?ae[this.expando]=we:Object.defineProperty(ae,this.expando,{value:we,configurable:!0}))),we},set:function(ae,we,Le){var $e,ct=this.cache(ae);if(typeof we=="string")ct[Gt(we)]=Le;else for($e in we)ct[Gt($e)]=we[$e];return ct},get:function(ae,we){return we===void 0?this.cache(ae):ae[this.expando]&&ae[this.expando][Gt(we)]},access:function(ae,we,Le){return we===void 0||we&&typeof we=="string"&&Le===void 0?this.get(ae,we):(this.set(ae,we,Le),Le!==void 0?Le:we)},remove:function(ae,we){var Le,$e=ae[this.expando];if($e!==void 0){if(we!==void 0)for(Array.isArray(we)?we=we.map(Gt):(we=Gt(we),we=we in $e?[we]:we.match(Be)||[]),Le=we.length;Le--;)delete $e[we[Le]];(we===void 0||Q.isEmptyObject($e))&&(ae.nodeType?ae[this.expando]=void 0:delete ae[this.expando])}},hasData:function(ae){var we=ae[this.expando];return we!==void 0&&!Q.isEmptyObject(we)}};var yr=new Tr,Dr=new Tr,jt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Jt=/[A-Z]/g;function pr(ae){return ae==="true"?!0:ae==="false"?!1:ae==="null"?null:ae===+ae+""?+ae:jt.test(ae)?JSON.parse(ae):ae}function Ft(ae,we,Le){var $e;if(Le===void 0&&ae.nodeType===1)if($e="data-"+we.replace(Jt,"-$&").toLowerCase(),Le=ae.getAttribute($e),typeof Le=="string"){try{Le=pr(Le)}catch{}Dr.set(ae,we,Le)}else Le=void 0;return Le}Q.extend({hasData:function(ae){return Dr.hasData(ae)||yr.hasData(ae)},data:function(ae,we,Le){return Dr.access(ae,we,Le)},removeData:function(ae,we){Dr.remove(ae,we)},_data:function(ae,we,Le){return yr.access(ae,we,Le)},_removeData:function(ae,we){yr.remove(ae,we)}}),Q.fn.extend({data:function(ae,we){var Le,$e,ct,ft=this[0],at=ft&&ft.attributes;if(ae===void 0){if(this.length&&(ct=Dr.get(ft),ft.nodeType===1&&!yr.get(ft,"hasDataAttrs"))){for(Le=at.length;Le--;)at[Le]&&($e=at[Le].name,$e.indexOf("data-")===0&&($e=Gt($e.slice(5)),Ft(ft,$e,ct[$e])));yr.set(ft,"hasDataAttrs",!0)}return ct}return typeof ae=="object"?this.each(function(){Dr.set(this,ae)}):bt(this,function(Er){var hr;if(ft&&Er===void 0)return hr=Dr.get(ft,ae),hr!==void 0||(hr=Ft(ft,ae),hr!==void 0)?hr:void 0;this.each(function(){Dr.set(this,ae,Er)})},null,we,arguments.length>1,null,!0)},removeData:function(ae){return this.each(function(){Dr.remove(this,ae)})}}),Q.extend({queue:function(ae,we,Le){var $e;if(ae)return we=(we||"fx")+"queue",$e=yr.get(ae,we),Le&&(!$e||Array.isArray(Le)?$e=yr.access(ae,we,Q.makeArray(Le)):$e.push(Le)),$e||[]},dequeue:function(ae,we){we=we||"fx";var Le=Q.queue(ae,we),$e=Le.length,ct=Le.shift(),ft=Q._queueHooks(ae,we),at=function(){Q.dequeue(ae,we)};ct==="inprogress"&&(ct=Le.shift(),$e--),ct&&(we==="fx"&&Le.unshift("inprogress"),delete ft.stop,ct.call(ae,at,ft)),!$e&&ft&&ft.empty.fire()},_queueHooks:function(ae,we){var Le=we+"queueHooks";return yr.get(ae,Le)||yr.access(ae,Le,{empty:Q.Callbacks("once memory").add(function(){yr.remove(ae,[we+"queue",Le])})})}}),Q.fn.extend({queue:function(ae,we){var Le=2;return typeof ae!="string"&&(we=ae,ae="fx",Le--),arguments.length<Le?Q.queue(this[0],ae):we===void 0?this:this.each(function(){var $e=Q.queue(this,ae,we);Q._queueHooks(this,ae),ae==="fx"&&$e[0]!=="inprogress"&&Q.dequeue(this,ae)})},dequeue:function(ae){return this.each(function(){Q.dequeue(this,ae)})},clearQueue:function(ae){return this.queue(ae||"fx",[])},promise:function(ae,we){var Le,$e=1,ct=Q.Deferred(),ft=this,at=this.length,Er=function(){--$e||ct.resolveWith(ft,[ft])};for(typeof ae!="string"&&(we=ae,ae=void 0),ae=ae||"fx";at--;)Le=yr.get(ft[at],ae+"queueHooks"),Le&&Le.empty&&($e++,Le.empty.add(Er));return Er(),ct.promise(we)}});var er=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ur=new RegExp("^(?:([+-])=|)("+er+")([a-z%]*)$","i"),Yt=["Top","Right","Bottom","Left"],mr=S.documentElement,Mr=function(ae){return Q.contains(ae.ownerDocument,ae)},sn={composed:!0};mr.getRootNode&&(Mr=function(ae){return Q.contains(ae.ownerDocument,ae)||ae.getRootNode(sn)===ae.ownerDocument});var Un=function(ae,we){return ae=we||ae,ae.style.display==="none"||ae.style.display===""&&Mr(ae)&&Q.css(ae,"display")==="none"};function wn(ae,we,Le,$e){var ct,ft,at=20,Er=$e?function(){return $e.cur()}:function(){return Q.css(ae,we,"")},hr=Er(),Wr=Le&&Le[3]||(Q.cssNumber[we]?"":"px"),bn=ae.nodeType&&(Q.cssNumber[we]||Wr!=="px"&&+hr)&&ur.exec(Q.css(ae,we));if(bn&&bn[3]!==Wr){for(hr=hr/2,Wr=Wr||bn[3],bn=+hr||1;at--;)Q.style(ae,we,bn+Wr),(1-ft)*(1-(ft=Er()/hr||.5))<=0&&(at=0),bn=bn/ft;bn=bn*2,Q.style(ae,we,bn+Wr),Le=Le||[]}return Le&&(bn=+bn||+hr||0,ct=Le[1]?bn+(Le[1]+1)*Le[2]:+Le[2],$e&&($e.unit=Wr,$e.start=bn,$e.end=ct)),ct}var Zi={};function ai(ae){var we,Le=ae.ownerDocument,$e=ae.nodeName,ct=Zi[$e];return ct||(we=Le.body.appendChild(Le.createElement($e)),ct=Q.css(we,"display"),we.parentNode.removeChild(we),ct==="none"&&(ct="block"),Zi[$e]=ct,ct)}function _i(ae,we){for(var Le,$e,ct=[],ft=0,at=ae.length;ft<at;ft++)$e=ae[ft],$e.style&&(Le=$e.style.display,we?(Le==="none"&&(ct[ft]=yr.get($e,"display")||null,ct[ft]||($e.style.display="")),$e.style.display===""&&Un($e)&&(ct[ft]=ai($e))):Le!=="none"&&(ct[ft]="none",yr.set($e,"display",Le)));for(ft=0;ft<at;ft++)ct[ft]!=null&&(ae[ft].style.display=ct[ft]);return ae}Q.fn.extend({show:function(){return _i(this,!0)},hide:function(){return _i(this)},toggle:function(ae){return typeof ae=="boolean"?ae?this.show():this.hide():this.each(function(){Un(this)?Q(this).show():Q(this).hide()})}});var Zn=/^(?:checkbox|radio)$/i,Bn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,On=/^$|^module$|\/(?:java|ecma)script/i;(function(){var ae=S.createDocumentFragment(),we=ae.appendChild(S.createElement("div")),Le=S.createElement("input");Le.setAttribute("type","radio"),Le.setAttribute("checked","checked"),Le.setAttribute("name","t"),we.appendChild(Le),b.checkClone=we.cloneNode(!0).cloneNode(!0).lastChild.checked,we.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!we.cloneNode(!0).lastChild.defaultValue,we.innerHTML="<option></option>",b.option=!!we.lastChild})();var tr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};tr.tbody=tr.tfoot=tr.colgroup=tr.caption=tr.thead,tr.th=tr.td,b.option||(tr.optgroup=tr.option=[1,"<select multiple='multiple'>","</select>"]);function zn(ae,we){var Le;return typeof ae.getElementsByTagName<"u"?Le=ae.getElementsByTagName(we||"*"):typeof ae.querySelectorAll<"u"?Le=ae.querySelectorAll(we||"*"):Le=[],we===void 0||we&&ne(ae,we)?Q.merge([ae],Le):Le}function Ki(ae,we){for(var Le=0,$e=ae.length;Le<$e;Le++)yr.set(ae[Le],"globalEval",!we||yr.get(we[Le],"globalEval"))}var Qs=/<|&#?\w+;/;function li(ae,we,Le,$e,ct){for(var ft,at,Er,hr,Wr,bn,Hn=we.createDocumentFragment(),cn=[],Hr=0,ei=ae.length;Hr<ei;Hr++)if(ft=ae[Hr],ft||ft===0)if(O(ft)==="object")Q.merge(cn,ft.nodeType?[ft]:ft);else if(!Qs.test(ft))cn.push(we.createTextNode(ft));else{for(at=at||Hn.appendChild(we.createElement("div")),Er=(Bn.exec(ft)||["",""])[1].toLowerCase(),hr=tr[Er]||tr._default,at.innerHTML=hr[1]+Q.htmlPrefilter(ft)+hr[2],bn=hr[0];bn--;)at=at.lastChild;Q.merge(cn,at.childNodes),at=Hn.firstChild,at.textContent=""}for(Hn.textContent="",Hr=0;ft=cn[Hr++];){if($e&&Q.inArray(ft,$e)>-1){ct&&ct.push(ft);continue}if(Wr=Mr(ft),at=zn(Hn.appendChild(ft),"script"),Wr&&Ki(at),Le)for(bn=0;ft=at[bn++];)On.test(ft.type||"")&&Le.push(ft)}return Hn}var Qt=/^([^.]*)(?:\.(.+)|)/;function Ve(){return!0}function et(){return!1}function We(ae,we,Le,$e,ct,ft){var at,Er;if(typeof we=="object"){typeof Le!="string"&&($e=$e||Le,Le=void 0);for(Er in we)We(ae,Er,Le,$e,we[Er],ft);return ae}if($e==null&&ct==null?(ct=Le,$e=Le=void 0):ct==null&&(typeof Le=="string"?(ct=$e,$e=void 0):(ct=$e,$e=Le,Le=void 0)),ct===!1)ct=et;else if(!ct)return ae;return ft===1&&(at=ct,ct=function(hr){return Q().off(hr),at.apply(this,arguments)},ct.guid=at.guid||(at.guid=Q.guid++)),ae.each(function(){Q.event.add(this,we,ct,$e,Le)})}Q.event={global:{},add:function(ae,we,Le,$e,ct){var ft,at,Er,hr,Wr,bn,Hn,cn,Hr,ei,Ti,vs=yr.get(ae);if(fr(ae))for(Le.handler&&(ft=Le,Le=ft.handler,ct=ft.selector),ct&&Q.find.matchesSelector(mr,ct),Le.guid||(Le.guid=Q.guid++),(hr=vs.events)||(hr=vs.events=Object.create(null)),(at=vs.handle)||(at=vs.handle=function(ma){return typeof Q<"u"&&Q.event.triggered!==ma.type?Q.event.dispatch.apply(ae,arguments):void 0}),we=(we||"").match(Be)||[""],Wr=we.length;Wr--;)Er=Qt.exec(we[Wr])||[],Hr=Ti=Er[1],ei=(Er[2]||"").split(".").sort(),Hr&&(Hn=Q.event.special[Hr]||{},Hr=(ct?Hn.delegateType:Hn.bindType)||Hr,Hn=Q.event.special[Hr]||{},bn=Q.extend({type:Hr,origType:Ti,data:$e,handler:Le,guid:Le.guid,selector:ct,needsContext:ct&&Q.expr.match.needsContext.test(ct),namespace:ei.join(".")},ft),(cn=hr[Hr])||(cn=hr[Hr]=[],cn.delegateCount=0,(!Hn.setup||Hn.setup.call(ae,$e,ei,at)===!1)&&ae.addEventListener&&ae.addEventListener(Hr,at)),Hn.add&&(Hn.add.call(ae,bn),bn.handler.guid||(bn.handler.guid=Le.guid)),ct?cn.splice(cn.delegateCount++,0,bn):cn.push(bn),Q.event.global[Hr]=!0)},remove:function(ae,we,Le,$e,ct){var ft,at,Er,hr,Wr,bn,Hn,cn,Hr,ei,Ti,vs=yr.hasData(ae)&&yr.get(ae);if(!(!vs||!(hr=vs.events))){for(we=(we||"").match(Be)||[""],Wr=we.length;Wr--;){if(Er=Qt.exec(we[Wr])||[],Hr=Ti=Er[1],ei=(Er[2]||"").split(".").sort(),!Hr){for(Hr in hr)Q.event.remove(ae,Hr+we[Wr],Le,$e,!0);continue}for(Hn=Q.event.special[Hr]||{},Hr=($e?Hn.delegateType:Hn.bindType)||Hr,cn=hr[Hr]||[],Er=Er[2]&&new RegExp("(^|\\.)"+ei.join("\\.(?:.*\\.|)")+"(\\.|$)"),at=ft=cn.length;ft--;)bn=cn[ft],(ct||Ti===bn.origType)&&(!Le||Le.guid===bn.guid)&&(!Er||Er.test(bn.namespace))&&(!$e||$e===bn.selector||$e==="**"&&bn.selector)&&(cn.splice(ft,1),bn.selector&&cn.delegateCount--,Hn.remove&&Hn.remove.call(ae,bn));at&&!cn.length&&((!Hn.teardown||Hn.teardown.call(ae,ei,vs.handle)===!1)&&Q.removeEvent(ae,Hr,vs.handle),delete hr[Hr])}Q.isEmptyObject(hr)&&yr.remove(ae,"handle events")}},dispatch:function(ae){var we,Le,$e,ct,ft,at,Er=new Array(arguments.length),hr=Q.event.fix(ae),Wr=(yr.get(this,"events")||Object.create(null))[hr.type]||[],bn=Q.event.special[hr.type]||{};for(Er[0]=hr,we=1;we<arguments.length;we++)Er[we]=arguments[we];if(hr.delegateTarget=this,!(bn.preDispatch&&bn.preDispatch.call(this,hr)===!1)){for(at=Q.event.handlers.call(this,hr,Wr),we=0;(ct=at[we++])&&!hr.isPropagationStopped();)for(hr.currentTarget=ct.elem,Le=0;(ft=ct.handlers[Le++])&&!hr.isImmediatePropagationStopped();)(!hr.rnamespace||ft.namespace===!1||hr.rnamespace.test(ft.namespace))&&(hr.handleObj=ft,hr.data=ft.data,$e=((Q.event.special[ft.origType]||{}).handle||ft.handler).apply(ct.elem,Er),$e!==void 0&&(hr.result=$e)===!1&&(hr.preventDefault(),hr.stopPropagation()));return bn.postDispatch&&bn.postDispatch.call(this,hr),hr.result}},handlers:function(ae,we){var Le,$e,ct,ft,at,Er=[],hr=we.delegateCount,Wr=ae.target;if(hr&&Wr.nodeType&&!(ae.type==="click"&&ae.button>=1)){for(;Wr!==this;Wr=Wr.parentNode||this)if(Wr.nodeType===1&&!(ae.type==="click"&&Wr.disabled===!0)){for(ft=[],at={},Le=0;Le<hr;Le++)$e=we[Le],ct=$e.selector+" ",at[ct]===void 0&&(at[ct]=$e.needsContext?Q(ct,this).index(Wr)>-1:Q.find(ct,this,null,[Wr]).length),at[ct]&&ft.push($e);ft.length&&Er.push({elem:Wr,handlers:ft})}}return Wr=this,hr<we.length&&Er.push({elem:Wr,handlers:we.slice(hr)}),Er},addProp:function(ae,we){Object.defineProperty(Q.Event.prototype,ae,{enumerable:!0,configurable:!0,get:x(we)?function(){if(this.originalEvent)return we(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[ae]},set:function(Le){Object.defineProperty(this,ae,{enumerable:!0,configurable:!0,writable:!0,value:Le})}})},fix:function(ae){return ae[Q.expando]?ae:new Q.Event(ae)},special:{load:{noBubble:!0},click:{setup:function(ae){var we=this||ae;return Zn.test(we.type)&&we.click&&ne(we,"input")&&tt(we,"click",!0),!1},trigger:function(ae){var we=this||ae;return Zn.test(we.type)&&we.click&&ne(we,"input")&&tt(we,"click"),!0},_default:function(ae){var we=ae.target;return Zn.test(we.type)&&we.click&&ne(we,"input")&&yr.get(we,"click")||ne(we,"a")}},beforeunload:{postDispatch:function(ae){ae.result!==void 0&&ae.originalEvent&&(ae.originalEvent.returnValue=ae.result)}}}};function tt(ae,we,Le){if(!Le){yr.get(ae,we)===void 0&&Q.event.add(ae,we,Ve);return}yr.set(ae,we,!1),Q.event.add(ae,we,{namespace:!1,handler:function($e){var ct,ft=yr.get(this,we);if($e.isTrigger&1&&this[we]){if(ft)(Q.event.special[we]||{}).delegateType&&$e.stopPropagation();else if(ft=a.call(arguments),yr.set(this,we,ft),this[we](),ct=yr.get(this,we),yr.set(this,we,!1),ft!==ct)return $e.stopImmediatePropagation(),$e.preventDefault(),ct}else ft&&(yr.set(this,we,Q.event.trigger(ft[0],ft.slice(1),this)),$e.stopPropagation(),$e.isImmediatePropagationStopped=Ve)}})}Q.removeEvent=function(ae,we,Le){ae.removeEventListener&&ae.removeEventListener(we,Le)},Q.Event=function(ae,we){if(!(this instanceof Q.Event))return new Q.Event(ae,we);ae&&ae.type?(this.originalEvent=ae,this.type=ae.type,this.isDefaultPrevented=ae.defaultPrevented||ae.defaultPrevented===void 0&&ae.returnValue===!1?Ve:et,this.target=ae.target&&ae.target.nodeType===3?ae.target.parentNode:ae.target,this.currentTarget=ae.currentTarget,this.relatedTarget=ae.relatedTarget):this.type=ae,we&&Q.extend(this,we),this.timeStamp=ae&&ae.timeStamp||Date.now(),this[Q.expando]=!0},Q.Event.prototype={constructor:Q.Event,isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et,isSimulated:!1,preventDefault:function(){var ae=this.originalEvent;this.isDefaultPrevented=Ve,ae&&!this.isSimulated&&ae.preventDefault()},stopPropagation:function(){var ae=this.originalEvent;this.isPropagationStopped=Ve,ae&&!this.isSimulated&&ae.stopPropagation()},stopImmediatePropagation:function(){var ae=this.originalEvent;this.isImmediatePropagationStopped=Ve,ae&&!this.isSimulated&&ae.stopImmediatePropagation(),this.stopPropagation()}},Q.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},Q.event.addProp),Q.each({focus:"focusin",blur:"focusout"},function(ae,we){function Le($e){if(S.documentMode){var ct=yr.get(this,"handle"),ft=Q.event.fix($e);ft.type=$e.type==="focusin"?"focus":"blur",ft.isSimulated=!0,ct($e),ft.target===ft.currentTarget&&ct(ft)}else Q.event.simulate(we,$e.target,Q.event.fix($e))}Q.event.special[ae]={setup:function(){var $e;if(tt(this,ae,!0),S.documentMode)$e=yr.get(this,we),$e||this.addEventListener(we,Le),yr.set(this,we,($e||0)+1);else return!1},trigger:function(){return tt(this,ae),!0},teardown:function(){var $e;if(S.documentMode)$e=yr.get(this,we)-1,$e?yr.set(this,we,$e):(this.removeEventListener(we,Le),yr.remove(this,we));else return!1},_default:function($e){return yr.get($e.target,ae)},delegateType:we},Q.event.special[we]={setup:function(){var $e=this.ownerDocument||this.document||this,ct=S.documentMode?this:$e,ft=yr.get(ct,we);ft||(S.documentMode?this.addEventListener(we,Le):$e.addEventListener(ae,Le,!0)),yr.set(ct,we,(ft||0)+1)},teardown:function(){var $e=this.ownerDocument||this.document||this,ct=S.documentMode?this:$e,ft=yr.get(ct,we)-1;ft?yr.set(ct,we,ft):(S.documentMode?this.removeEventListener(we,Le):$e.removeEventListener(ae,Le,!0),yr.remove(ct,we))}}}),Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(ae,we){Q.event.special[ae]={delegateType:we,bindType:we,handle:function(Le){var $e,ct=this,ft=Le.relatedTarget,at=Le.handleObj;return(!ft||ft!==ct&&!Q.contains(ct,ft))&&(Le.type=at.origType,$e=at.handler.apply(this,arguments),Le.type=we),$e}}}),Q.fn.extend({on:function(ae,we,Le,$e){return We(this,ae,we,Le,$e)},one:function(ae,we,Le,$e){return We(this,ae,we,Le,$e,1)},off:function(ae,we,Le){var $e,ct;if(ae&&ae.preventDefault&&ae.handleObj)return $e=ae.handleObj,Q(ae.delegateTarget).off($e.namespace?$e.origType+"."+$e.namespace:$e.origType,$e.selector,$e.handler),this;if(typeof ae=="object"){for(ct in ae)this.off(ct,we,ae[ct]);return this}return(we===!1||typeof we=="function")&&(Le=we,we=void 0),Le===!1&&(Le=et),this.each(function(){Q.event.remove(this,ae,Le,we)})}});var nt=/<script|<style|<link/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,rr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Et(ae,we){return ne(ae,"table")&&ne(we.nodeType!==11?we:we.firstChild,"tr")&&Q(ae).children("tbody")[0]||ae}function nr(ae){return ae.type=(ae.getAttribute("type")!==null)+"/"+ae.type,ae}function Fr(ae){return(ae.type||"").slice(0,5)==="true/"?ae.type=ae.type.slice(5):ae.removeAttribute("type"),ae}function _r(ae,we){var Le,$e,ct,ft,at,Er,hr;if(we.nodeType===1){if(yr.hasData(ae)&&(ft=yr.get(ae),hr=ft.events,hr)){yr.remove(we,"handle events");for(ct in hr)for(Le=0,$e=hr[ct].length;Le<$e;Le++)Q.event.add(we,ct,hr[ct][Le])}Dr.hasData(ae)&&(at=Dr.access(ae),Er=Q.extend({},at),Dr.set(we,Er))}}function pn(ae,we){var Le=we.nodeName.toLowerCase();Le==="input"&&Zn.test(ae.type)?we.checked=ae.checked:(Le==="input"||Le==="textarea")&&(we.defaultValue=ae.defaultValue)}function Tn(ae,we,Le,$e){we=l(we);var ct,ft,at,Er,hr,Wr,bn=0,Hn=ae.length,cn=Hn-1,Hr=we[0],ei=x(Hr);if(ei||Hn>1&&typeof Hr=="string"&&!b.checkClone&&Ct.test(Hr))return ae.each(function(Ti){var vs=ae.eq(Ti);ei&&(we[0]=Hr.call(this,Ti,vs.html())),Tn(vs,we,Le,$e)});if(Hn&&(ct=li(we,ae[0].ownerDocument,!1,ae,$e),ft=ct.firstChild,ct.childNodes.length===1&&(ct=ft),ft||$e)){for(at=Q.map(zn(ct,"script"),nr),Er=at.length;bn<Hn;bn++)hr=ct,bn!==cn&&(hr=Q.clone(hr,!0,!0),Er&&Q.merge(at,zn(hr,"script"))),Le.call(ae[bn],hr,bn);if(Er)for(Wr=at[at.length-1].ownerDocument,Q.map(at,Fr),bn=0;bn<Er;bn++)hr=at[bn],On.test(hr.type||"")&&!yr.access(hr,"globalEval")&&Q.contains(Wr,hr)&&(hr.src&&(hr.type||"").toLowerCase()!=="module"?Q._evalUrl&&!hr.noModule&&Q._evalUrl(hr.src,{nonce:hr.nonce||hr.getAttribute("nonce")},Wr):F(hr.textContent.replace(rr,""),hr,Wr))}return ae}function Vn(ae,we,Le){for(var $e,ct=we?Q.filter(we,ae):ae,ft=0;($e=ct[ft])!=null;ft++)!Le&&$e.nodeType===1&&Q.cleanData(zn($e)),$e.parentNode&&(Le&&Mr($e)&&Ki(zn($e,"script")),$e.parentNode.removeChild($e));return ae}Q.extend({htmlPrefilter:function(ae){return ae},clone:function(ae,we,Le){var $e,ct,ft,at,Er=ae.cloneNode(!0),hr=Mr(ae);if(!b.noCloneChecked&&(ae.nodeType===1||ae.nodeType===11)&&!Q.isXMLDoc(ae))for(at=zn(Er),ft=zn(ae),$e=0,ct=ft.length;$e<ct;$e++)pn(ft[$e],at[$e]);if(we)if(Le)for(ft=ft||zn(ae),at=at||zn(Er),$e=0,ct=ft.length;$e<ct;$e++)_r(ft[$e],at[$e]);else _r(ae,Er);return at=zn(Er,"script"),at.length>0&&Ki(at,!hr&&zn(ae,"script")),Er},cleanData:function(ae){for(var we,Le,$e,ct=Q.event.special,ft=0;(Le=ae[ft])!==void 0;ft++)if(fr(Le)){if(we=Le[yr.expando]){if(we.events)for($e in we.events)ct[$e]?Q.event.remove(Le,$e):Q.removeEvent(Le,$e,we.handle);Le[yr.expando]=void 0}Le[Dr.expando]&&(Le[Dr.expando]=void 0)}}}),Q.fn.extend({detach:function(ae){return Vn(this,ae,!0)},remove:function(ae){return Vn(this,ae)},text:function(ae){return bt(this,function(we){return we===void 0?Q.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=we)})},null,ae,arguments.length)},append:function(){return Tn(this,arguments,function(ae){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var we=Et(this,ae);we.appendChild(ae)}})},prepend:function(){return Tn(this,arguments,function(ae){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var we=Et(this,ae);we.insertBefore(ae,we.firstChild)}})},before:function(){return Tn(this,arguments,function(ae){this.parentNode&&this.parentNode.insertBefore(ae,this)})},after:function(){return Tn(this,arguments,function(ae){this.parentNode&&this.parentNode.insertBefore(ae,this.nextSibling)})},empty:function(){for(var ae,we=0;(ae=this[we])!=null;we++)ae.nodeType===1&&(Q.cleanData(zn(ae,!1)),ae.textContent="");return this},clone:function(ae,we){return ae=ae??!1,we=we??ae,this.map(function(){return Q.clone(this,ae,we)})},html:function(ae){return bt(this,function(we){var Le=this[0]||{},$e=0,ct=this.length;if(we===void 0&&Le.nodeType===1)return Le.innerHTML;if(typeof we=="string"&&!nt.test(we)&&!tr[(Bn.exec(we)||["",""])[1].toLowerCase()]){we=Q.htmlPrefilter(we);try{for(;$e<ct;$e++)Le=this[$e]||{},Le.nodeType===1&&(Q.cleanData(zn(Le,!1)),Le.innerHTML=we);Le=0}catch{}}Le&&this.empty().append(we)},null,ae,arguments.length)},replaceWith:function(){var ae=[];return Tn(this,arguments,function(we){var Le=this.parentNode;Q.inArray(this,ae)<0&&(Q.cleanData(zn(this)),Le&&Le.replaceChild(we,this))},ae)}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(ae,we){Q.fn[ae]=function(Le){for(var $e,ct=[],ft=Q(Le),at=ft.length-1,Er=0;Er<=at;Er++)$e=Er===at?this:this.clone(!0),Q(ft[Er])[we]($e),t.apply(ct,$e.get());return this.pushStack(ct)}});var Bi=new RegExp("^("+er+")(?!px)[a-z%]+$","i"),Si=/^--/,Di=function(ae){var we=ae.ownerDocument.defaultView;return(!we||!we.opener)&&(we=r),we.getComputedStyle(ae)},ds=function(ae,we,Le){var $e,ct,ft={};for(ct in we)ft[ct]=ae.style[ct],ae.style[ct]=we[ct];$e=Le.call(ae);for(ct in we)ae.style[ct]=ft[ct];return $e},Qi=new RegExp(Yt.join("|"),"i");(function(){function ae(){if(Wr){hr.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Wr.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",mr.appendChild(hr).appendChild(Wr);var bn=r.getComputedStyle(Wr);Le=bn.top!=="1%",Er=we(bn.marginLeft)===12,Wr.style.right="60%",ft=we(bn.right)===36,$e=we(bn.width)===36,Wr.style.position="absolute",ct=we(Wr.offsetWidth/3)===12,mr.removeChild(hr),Wr=null}}function we(bn){return Math.round(parseFloat(bn))}var Le,$e,ct,ft,at,Er,hr=S.createElement("div"),Wr=S.createElement("div");Wr.style&&(Wr.style.backgroundClip="content-box",Wr.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=Wr.style.backgroundClip==="content-box",Q.extend(b,{boxSizingReliable:function(){return ae(),$e},pixelBoxStyles:function(){return ae(),ft},pixelPosition:function(){return ae(),Le},reliableMarginLeft:function(){return ae(),Er},scrollboxSize:function(){return ae(),ct},reliableTrDimensions:function(){var bn,Hn,cn,Hr;return at==null&&(bn=S.createElement("table"),Hn=S.createElement("tr"),cn=S.createElement("div"),bn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Hn.style.cssText="box-sizing:content-box;border:1px solid",Hn.style.height="1px",cn.style.height="9px",cn.style.display="block",mr.appendChild(bn).appendChild(Hn).appendChild(cn),Hr=r.getComputedStyle(Hn),at=parseInt(Hr.height,10)+parseInt(Hr.borderTopWidth,10)+parseInt(Hr.borderBottomWidth,10)===Hn.offsetHeight,mr.removeChild(bn)),at}}))})();function Zt(ae,we,Le){var $e,ct,ft,at,Er=Si.test(we),hr=ae.style;return Le=Le||Di(ae),Le&&(at=Le.getPropertyValue(we)||Le[we],Er&&at&&(at=at.replace(Z,"$1")||void 0),at===""&&!Mr(ae)&&(at=Q.style(ae,we)),!b.pixelBoxStyles()&&Bi.test(at)&&Qi.test(we)&&($e=hr.width,ct=hr.minWidth,ft=hr.maxWidth,hr.minWidth=hr.maxWidth=hr.width=at,at=Le.width,hr.width=$e,hr.minWidth=ct,hr.maxWidth=ft)),at!==void 0?at+"":at}function $r(ae,we){return{get:function(){if(ae()){delete this.get;return}return(this.get=we).apply(this,arguments)}}}var kn=["Webkit","Moz","ms"],vn=S.createElement("div").style,si={};function qn(ae){for(var we=ae[0].toUpperCase()+ae.slice(1),Le=kn.length;Le--;)if(ae=kn[Le]+we,ae in vn)return ae}function Yn(ae){var we=Q.cssProps[ae]||si[ae];return we||(ae in vn?ae:si[ae]=qn(ae)||ae)}var Wi=/^(none|table(?!-c[ea]).+)/,us={position:"absolute",visibility:"hidden",display:"block"},xs={letterSpacing:"0",fontWeight:"400"};function zi(ae,we,Le){var $e=ur.exec(we);return $e?Math.max(0,$e[2]-(Le||0))+($e[3]||"px"):we}function uo(ae,we,Le,$e,ct,ft){var at=we==="width"?1:0,Er=0,hr=0,Wr=0;if(Le===($e?"border":"content"))return 0;for(;at<4;at+=2)Le==="margin"&&(Wr+=Q.css(ae,Le+Yt[at],!0,ct)),$e?(Le==="content"&&(hr-=Q.css(ae,"padding"+Yt[at],!0,ct)),Le!=="margin"&&(hr-=Q.css(ae,"border"+Yt[at]+"Width",!0,ct))):(hr+=Q.css(ae,"padding"+Yt[at],!0,ct),Le!=="padding"?hr+=Q.css(ae,"border"+Yt[at]+"Width",!0,ct):Er+=Q.css(ae,"border"+Yt[at]+"Width",!0,ct));return!$e&&ft>=0&&(hr+=Math.max(0,Math.ceil(ae["offset"+we[0].toUpperCase()+we.slice(1)]-ft-hr-Er-.5))||0),hr+Wr}function Ji(ae,we,Le){var $e=Di(ae),ct=!b.boxSizingReliable()||Le,ft=ct&&Q.css(ae,"boxSizing",!1,$e)==="border-box",at=ft,Er=Zt(ae,we,$e),hr="offset"+we[0].toUpperCase()+we.slice(1);if(Bi.test(Er)){if(!Le)return Er;Er="auto"}return(!b.boxSizingReliable()&&ft||!b.reliableTrDimensions()&&ne(ae,"tr")||Er==="auto"||!parseFloat(Er)&&Q.css(ae,"display",!1,$e)==="inline")&&ae.getClientRects().length&&(ft=Q.css(ae,"boxSizing",!1,$e)==="border-box",at=hr in ae,at&&(Er=ae[hr])),Er=parseFloat(Er)||0,Er+uo(ae,we,Le||(ft?"border":"content"),at,$e,Er)+"px"}Q.extend({cssHooks:{opacity:{get:function(ae,we){if(we){var Le=Zt(ae,"opacity");return Le===""?"1":Le}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(ae,we,Le,$e){if(!(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style)){var ct,ft,at,Er=Gt(we),hr=Si.test(we),Wr=ae.style;if(hr||(we=Yn(Er)),at=Q.cssHooks[we]||Q.cssHooks[Er],Le!==void 0){if(ft=typeof Le,ft==="string"&&(ct=ur.exec(Le))&&ct[1]&&(Le=wn(ae,we,ct),ft="number"),Le==null||Le!==Le)return;ft==="number"&&!hr&&(Le+=ct&&ct[3]||(Q.cssNumber[Er]?"":"px")),!b.clearCloneStyle&&Le===""&&we.indexOf("background")===0&&(Wr[we]="inherit"),(!at||!("set"in at)||(Le=at.set(ae,Le,$e))!==void 0)&&(hr?Wr.setProperty(we,Le):Wr[we]=Le)}else return at&&"get"in at&&(ct=at.get(ae,!1,$e))!==void 0?ct:Wr[we]}},css:function(ae,we,Le,$e){var ct,ft,at,Er=Gt(we),hr=Si.test(we);return hr||(we=Yn(Er)),at=Q.cssHooks[we]||Q.cssHooks[Er],at&&"get"in at&&(ct=at.get(ae,!0,Le)),ct===void 0&&(ct=Zt(ae,we,$e)),ct==="normal"&&we in xs&&(ct=xs[we]),Le===""||Le?(ft=parseFloat(ct),Le===!0||isFinite(ft)?ft||0:ct):ct}}),Q.each(["height","width"],function(ae,we){Q.cssHooks[we]={get:function(Le,$e,ct){if($e)return Wi.test(Q.css(Le,"display"))&&(!Le.getClientRects().length||!Le.getBoundingClientRect().width)?ds(Le,us,function(){return Ji(Le,we,ct)}):Ji(Le,we,ct)},set:function(Le,$e,ct){var ft,at=Di(Le),Er=!b.scrollboxSize()&&at.position==="absolute",hr=Er||ct,Wr=hr&&Q.css(Le,"boxSizing",!1,at)==="border-box",bn=ct?uo(Le,we,ct,Wr,at):0;return Wr&&Er&&(bn-=Math.ceil(Le["offset"+we[0].toUpperCase()+we.slice(1)]-parseFloat(at[we])-uo(Le,we,"border",!1,at)-.5)),bn&&(ft=ur.exec($e))&&(ft[3]||"px")!=="px"&&(Le.style[we]=$e,$e=Q.css(Le,we)),zi(Le,$e,bn)}}}),Q.cssHooks.marginLeft=$r(b.reliableMarginLeft,function(ae,we){if(we)return(parseFloat(Zt(ae,"marginLeft"))||ae.getBoundingClientRect().left-ds(ae,{marginLeft:0},function(){return ae.getBoundingClientRect().left}))+"px"}),Q.each({margin:"",padding:"",border:"Width"},function(ae,we){Q.cssHooks[ae+we]={expand:function(Le){for(var $e=0,ct={},ft=typeof Le=="string"?Le.split(" "):[Le];$e<4;$e++)ct[ae+Yt[$e]+we]=ft[$e]||ft[$e-2]||ft[0];return ct}},ae!=="margin"&&(Q.cssHooks[ae+we].set=zi)}),Q.fn.extend({css:function(ae,we){return bt(this,function(Le,$e,ct){var ft,at,Er={},hr=0;if(Array.isArray($e)){for(ft=Di(Le),at=$e.length;hr<at;hr++)Er[$e[hr]]=Q.css(Le,$e[hr],!1,ft);return Er}return ct!==void 0?Q.style(Le,$e,ct):Q.css(Le,$e)},ae,we,arguments.length>1)}});function ks(ae,we,Le,$e,ct){return new ks.prototype.init(ae,we,Le,$e,ct)}Q.Tween=ks,ks.prototype={constructor:ks,init:function(ae,we,Le,$e,ct,ft){this.elem=ae,this.prop=Le,this.easing=ct||Q.easing._default,this.options=we,this.start=this.now=this.cur(),this.end=$e,this.unit=ft||(Q.cssNumber[Le]?"":"px")},cur:function(){var ae=ks.propHooks[this.prop];return ae&&ae.get?ae.get(this):ks.propHooks._default.get(this)},run:function(ae){var we,Le=ks.propHooks[this.prop];return this.options.duration?this.pos=we=Q.easing[this.easing](ae,this.options.duration*ae,0,1,this.options.duration):this.pos=we=ae,this.now=(this.end-this.start)*we+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Le&&Le.set?Le.set(this):ks.propHooks._default.set(this),this}},ks.prototype.init.prototype=ks.prototype,ks.propHooks={_default:{get:function(ae){var we;return ae.elem.nodeType!==1||ae.elem[ae.prop]!=null&&ae.elem.style[ae.prop]==null?ae.elem[ae.prop]:(we=Q.css(ae.elem,ae.prop,""),!we||we==="auto"?0:we)},set:function(ae){Q.fx.step[ae.prop]?Q.fx.step[ae.prop](ae):ae.elem.nodeType===1&&(Q.cssHooks[ae.prop]||ae.elem.style[Yn(ae.prop)]!=null)?Q.style(ae.elem,ae.prop,ae.now+ae.unit):ae.elem[ae.prop]=ae.now}}},ks.propHooks.scrollTop=ks.propHooks.scrollLeft={set:function(ae){ae.elem.nodeType&&ae.elem.parentNode&&(ae.elem[ae.prop]=ae.now)}},Q.easing={linear:function(ae){return ae},swing:function(ae){return .5-Math.cos(ae*Math.PI)/2},_default:"swing"},Q.fx=ks.prototype.init,Q.fx.step={};var Co,Do,ba=/^(?:toggle|show|hide)$/,il=/queueHooks$/;function Ma(){Do&&(S.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Ma):r.setTimeout(Ma,Q.fx.interval),Q.fx.tick())}function Uo(){return r.setTimeout(function(){Co=void 0}),Co=Date.now()}function xa(ae,we){var Le,$e=0,ct={height:ae};for(we=we?1:0;$e<4;$e+=2-we)Le=Yt[$e],ct["margin"+Le]=ct["padding"+Le]=ae;return we&&(ct.opacity=ct.width=ae),ct}function Gl(ae,we,Le){for(var $e,ct=(zo.tweeners[we]||[]).concat(zo.tweeners["*"]),ft=0,at=ct.length;ft<at;ft++)if($e=ct[ft].call(Le,we,ae))return $e}function ro(ae,we,Le){var $e,ct,ft,at,Er,hr,Wr,bn,Hn="width"in we||"height"in we,cn=this,Hr={},ei=ae.style,Ti=ae.nodeType&&Un(ae),vs=yr.get(ae,"fxshow");Le.queue||(at=Q._queueHooks(ae,"fx"),at.unqueued==null&&(at.unqueued=0,Er=at.empty.fire,at.empty.fire=function(){at.unqueued||Er()}),at.unqueued++,cn.always(function(){cn.always(function(){at.unqueued--,Q.queue(ae,"fx").length||at.empty.fire()})}));for($e in we)if(ct=we[$e],ba.test(ct)){if(delete we[$e],ft=ft||ct==="toggle",ct===(Ti?"hide":"show"))if(ct==="show"&&vs&&vs[$e]!==void 0)Ti=!0;else continue;Hr[$e]=vs&&vs[$e]||Q.style(ae,$e)}if(hr=!Q.isEmptyObject(we),!(!hr&&Q.isEmptyObject(Hr))){Hn&&ae.nodeType===1&&(Le.overflow=[ei.overflow,ei.overflowX,ei.overflowY],Wr=vs&&vs.display,Wr==null&&(Wr=yr.get(ae,"display")),bn=Q.css(ae,"display"),bn==="none"&&(Wr?bn=Wr:(_i([ae],!0),Wr=ae.style.display||Wr,bn=Q.css(ae,"display"),_i([ae]))),(bn==="inline"||bn==="inline-block"&&Wr!=null)&&Q.css(ae,"float")==="none"&&(hr||(cn.done(function(){ei.display=Wr}),Wr==null&&(bn=ei.display,Wr=bn==="none"?"":bn)),ei.display="inline-block")),Le.overflow&&(ei.overflow="hidden",cn.always(function(){ei.overflow=Le.overflow[0],ei.overflowX=Le.overflow[1],ei.overflowY=Le.overflow[2]})),hr=!1;for($e in Hr)hr||(vs?"hidden"in vs&&(Ti=vs.hidden):vs=yr.access(ae,"fxshow",{display:Wr}),ft&&(vs.hidden=!Ti),Ti&&_i([ae],!0),cn.done(function(){Ti||_i([ae]),yr.remove(ae,"fxshow");for($e in Hr)Q.style(ae,$e,Hr[$e])})),hr=Gl(Ti?vs[$e]:0,$e,cn),$e in vs||(vs[$e]=hr.start,Ti&&(hr.end=hr.start,hr.start=0))}}function Hs(ae,we){var Le,$e,ct,ft,at;for(Le in ae)if($e=Gt(Le),ct=we[$e],ft=ae[Le],Array.isArray(ft)&&(ct=ft[1],ft=ae[Le]=ft[0]),Le!==$e&&(ae[$e]=ft,delete ae[Le]),at=Q.cssHooks[$e],at&&"expand"in at){ft=at.expand(ft),delete ae[$e];for(Le in ft)Le in ae||(ae[Le]=ft[Le],we[Le]=ct)}else we[$e]=ct}function zo(ae,we,Le){var $e,ct,ft=0,at=zo.prefilters.length,Er=Q.Deferred().always(function(){delete hr.elem}),hr=function(){if(ct)return!1;for(var Hn=Co||Uo(),cn=Math.max(0,Wr.startTime+Wr.duration-Hn),Hr=cn/Wr.duration||0,ei=1-Hr,Ti=0,vs=Wr.tweens.length;Ti<vs;Ti++)Wr.tweens[Ti].run(ei);return Er.notifyWith(ae,[Wr,ei,cn]),ei<1&&vs?cn:(vs||Er.notifyWith(ae,[Wr,1,0]),Er.resolveWith(ae,[Wr]),!1)},Wr=Er.promise({elem:ae,props:Q.extend({},we),opts:Q.extend(!0,{specialEasing:{},easing:Q.easing._default},Le),originalProperties:we,originalOptions:Le,startTime:Co||Uo(),duration:Le.duration,tweens:[],createTween:function(Hn,cn){var Hr=Q.Tween(ae,Wr.opts,Hn,cn,Wr.opts.specialEasing[Hn]||Wr.opts.easing);return Wr.tweens.push(Hr),Hr},stop:function(Hn){var cn=0,Hr=Hn?Wr.tweens.length:0;if(ct)return this;for(ct=!0;cn<Hr;cn++)Wr.tweens[cn].run(1);return Hn?(Er.notifyWith(ae,[Wr,1,0]),Er.resolveWith(ae,[Wr,Hn])):Er.rejectWith(ae,[Wr,Hn]),this}}),bn=Wr.props;for(Hs(bn,Wr.opts.specialEasing);ft<at;ft++)if($e=zo.prefilters[ft].call(Wr,ae,bn,Wr.opts),$e)return x($e.stop)&&(Q._queueHooks(Wr.elem,Wr.opts.queue).stop=$e.stop.bind($e)),$e;return Q.map(bn,Gl,Wr),x(Wr.opts.start)&&Wr.opts.start.call(ae,Wr),Wr.progress(Wr.opts.progress).done(Wr.opts.done,Wr.opts.complete).fail(Wr.opts.fail).always(Wr.opts.always),Q.fx.timer(Q.extend(hr,{elem:ae,anim:Wr,queue:Wr.opts.queue})),Wr}Q.Animation=Q.extend(zo,{tweeners:{"*":[function(ae,we){var Le=this.createTween(ae,we);return wn(Le.elem,ae,ur.exec(we),Le),Le}]},tweener:function(ae,we){x(ae)?(we=ae,ae=["*"]):ae=ae.match(Be);for(var Le,$e=0,ct=ae.length;$e<ct;$e++)Le=ae[$e],zo.tweeners[Le]=zo.tweeners[Le]||[],zo.tweeners[Le].unshift(we)},prefilters:[ro],prefilter:function(ae,we){we?zo.prefilters.unshift(ae):zo.prefilters.push(ae)}}),Q.speed=function(ae,we,Le){var $e=ae&&typeof ae=="object"?Q.extend({},ae):{complete:Le||!Le&&we||x(ae)&&ae,duration:ae,easing:Le&&we||we&&!x(we)&&we};return Q.fx.off?$e.duration=0:typeof $e.duration!="number"&&($e.duration in Q.fx.speeds?$e.duration=Q.fx.speeds[$e.duration]:$e.duration=Q.fx.speeds._default),($e.queue==null||$e.queue===!0)&&($e.queue="fx"),$e.old=$e.complete,$e.complete=function(){x($e.old)&&$e.old.call(this),$e.queue&&Q.dequeue(this,$e.queue)},$e},Q.fn.extend({fadeTo:function(ae,we,Le,$e){return this.filter(Un).css("opacity",0).show().end().animate({opacity:we},ae,Le,$e)},animate:function(ae,we,Le,$e){var ct=Q.isEmptyObject(ae),ft=Q.speed(we,Le,$e),at=function(){var Er=zo(this,Q.extend({},ae),ft);(ct||yr.get(this,"finish"))&&Er.stop(!0)};return at.finish=at,ct||ft.queue===!1?this.each(at):this.queue(ft.queue,at)},stop:function(ae,we,Le){var $e=function(ct){var ft=ct.stop;delete ct.stop,ft(Le)};return typeof ae!="string"&&(Le=we,we=ae,ae=void 0),we&&this.queue(ae||"fx",[]),this.each(function(){var ct=!0,ft=ae!=null&&ae+"queueHooks",at=Q.timers,Er=yr.get(this);if(ft)Er[ft]&&Er[ft].stop&&$e(Er[ft]);else for(ft in Er)Er[ft]&&Er[ft].stop&&il.test(ft)&&$e(Er[ft]);for(ft=at.length;ft--;)at[ft].elem===this&&(ae==null||at[ft].queue===ae)&&(at[ft].anim.stop(Le),ct=!1,at.splice(ft,1));(ct||!Le)&&Q.dequeue(this,ae)})},finish:function(ae){return ae!==!1&&(ae=ae||"fx"),this.each(function(){var we,Le=yr.get(this),$e=Le[ae+"queue"],ct=Le[ae+"queueHooks"],ft=Q.timers,at=$e?$e.length:0;for(Le.finish=!0,Q.queue(this,ae,[]),ct&&ct.stop&&ct.stop.call(this,!0),we=ft.length;we--;)ft[we].elem===this&&ft[we].queue===ae&&(ft[we].anim.stop(!0),ft.splice(we,1));for(we=0;we<at;we++)$e[we]&&$e[we].finish&&$e[we].finish.call(this);delete Le.finish})}}),Q.each(["toggle","show","hide"],function(ae,we){var Le=Q.fn[we];Q.fn[we]=function($e,ct,ft){return $e==null||typeof $e=="boolean"?Le.apply(this,arguments):this.animate(xa(we,!0),$e,ct,ft)}}),Q.each({slideDown:xa("show"),slideUp:xa("hide"),slideToggle:xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(ae,we){Q.fn[ae]=function(Le,$e,ct){return this.animate(we,Le,$e,ct)}}),Q.timers=[],Q.fx.tick=function(){var ae,we=0,Le=Q.timers;for(Co=Date.now();we<Le.length;we++)ae=Le[we],!ae()&&Le[we]===ae&&Le.splice(we--,1);Le.length||Q.fx.stop(),Co=void 0},Q.fx.timer=function(ae){Q.timers.push(ae),Q.fx.start()},Q.fx.interval=13,Q.fx.start=function(){Do||(Do=!0,Ma())},Q.fx.stop=function(){Do=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(ae,we){return ae=Q.fx&&Q.fx.speeds[ae]||ae,we=we||"fx",this.queue(we,function(Le,$e){var ct=r.setTimeout(Le,ae);$e.stop=function(){r.clearTimeout(ct)}})},function(){var ae=S.createElement("input"),we=S.createElement("select"),Le=we.appendChild(S.createElement("option"));ae.type="checkbox",b.checkOn=ae.value!=="",b.optSelected=Le.selected,ae=S.createElement("input"),ae.value="t",ae.type="radio",b.radioValue=ae.value==="t"}();var wl,Ha=Q.expr.attrHandle;Q.fn.extend({attr:function(ae,we){return bt(this,Q.attr,ae,we,arguments.length>1)},removeAttr:function(ae){return this.each(function(){Q.removeAttr(this,ae)})}}),Q.extend({attr:function(ae,we,Le){var $e,ct,ft=ae.nodeType;if(!(ft===3||ft===8||ft===2)){if(typeof ae.getAttribute>"u")return Q.prop(ae,we,Le);if((ft!==1||!Q.isXMLDoc(ae))&&(ct=Q.attrHooks[we.toLowerCase()]||(Q.expr.match.bool.test(we)?wl:void 0)),Le!==void 0){if(Le===null){Q.removeAttr(ae,we);return}return ct&&"set"in ct&&($e=ct.set(ae,Le,we))!==void 0?$e:(ae.setAttribute(we,Le+""),Le)}return ct&&"get"in ct&&($e=ct.get(ae,we))!==null?$e:($e=Q.find.attr(ae,we),$e??void 0)}},attrHooks:{type:{set:function(ae,we){if(!b.radioValue&&we==="radio"&&ne(ae,"input")){var Le=ae.value;return ae.setAttribute("type",we),Le&&(ae.value=Le),we}}}},removeAttr:function(ae,we){var Le,$e=0,ct=we&&we.match(Be);if(ct&&ae.nodeType===1)for(;Le=ct[$e++];)ae.removeAttribute(Le)}}),wl={set:function(ae,we,Le){return we===!1?Q.removeAttr(ae,Le):ae.setAttribute(Le,Le),Le}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(ae,we){var Le=Ha[we]||Q.find.attr;Ha[we]=function($e,ct,ft){var at,Er,hr=ct.toLowerCase();return ft||(Er=Ha[hr],Ha[hr]=at,at=Le($e,ct,ft)!=null?hr:null,Ha[hr]=Er),at}});var Fa=/^(?:input|select|textarea|button)$/i,Pa=/^(?:a|area)$/i;Q.fn.extend({prop:function(ae,we){return bt(this,Q.prop,ae,we,arguments.length>1)},removeProp:function(ae){return this.each(function(){delete this[Q.propFix[ae]||ae]})}}),Q.extend({prop:function(ae,we,Le){var $e,ct,ft=ae.nodeType;if(!(ft===3||ft===8||ft===2))return(ft!==1||!Q.isXMLDoc(ae))&&(we=Q.propFix[we]||we,ct=Q.propHooks[we]),Le!==void 0?ct&&"set"in ct&&($e=ct.set(ae,Le,we))!==void 0?$e:ae[we]=Le:ct&&"get"in ct&&($e=ct.get(ae,we))!==null?$e:ae[we]},propHooks:{tabIndex:{get:function(ae){var we=Q.find.attr(ae,"tabindex");return we?parseInt(we,10):Fa.test(ae.nodeName)||Pa.test(ae.nodeName)&&ae.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(Q.propHooks.selected={get:function(ae){var we=ae.parentNode;return we&&we.parentNode&&we.parentNode.selectedIndex,null},set:function(ae){var we=ae.parentNode;we&&(we.selectedIndex,we.parentNode&&we.parentNode.selectedIndex)}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});function wa(ae){var we=ae.match(Be)||[];return we.join(" ")}function Sl(ae){return ae.getAttribute&&ae.getAttribute("class")||""}function Jl(ae){return Array.isArray(ae)?ae:typeof ae=="string"?ae.match(Be)||[]:[]}Q.fn.extend({addClass:function(ae){var we,Le,$e,ct,ft,at;return x(ae)?this.each(function(Er){Q(this).addClass(ae.call(this,Er,Sl(this)))}):(we=Jl(ae),we.length?this.each(function(){if($e=Sl(this),Le=this.nodeType===1&&" "+wa($e)+" ",Le){for(ft=0;ft<we.length;ft++)ct=we[ft],Le.indexOf(" "+ct+" ")<0&&(Le+=ct+" ");at=wa(Le),$e!==at&&this.setAttribute("class",at)}}):this)},removeClass:function(ae){var we,Le,$e,ct,ft,at;return x(ae)?this.each(function(Er){Q(this).removeClass(ae.call(this,Er,Sl(this)))}):arguments.length?(we=Jl(ae),we.length?this.each(function(){if($e=Sl(this),Le=this.nodeType===1&&" "+wa($e)+" ",Le){for(ft=0;ft<we.length;ft++)for(ct=we[ft];Le.indexOf(" "+ct+" ")>-1;)Le=Le.replace(" "+ct+" "," ");at=wa(Le),$e!==at&&this.setAttribute("class",at)}}):this):this.attr("class","")},toggleClass:function(ae,we){var Le,$e,ct,ft,at=typeof ae,Er=at==="string"||Array.isArray(ae);return x(ae)?this.each(function(hr){Q(this).toggleClass(ae.call(this,hr,Sl(this),we),we)}):typeof we=="boolean"&&Er?we?this.addClass(ae):this.removeClass(ae):(Le=Jl(ae),this.each(function(){if(Er)for(ft=Q(this),ct=0;ct<Le.length;ct++)$e=Le[ct],ft.hasClass($e)?ft.removeClass($e):ft.addClass($e);else(ae===void 0||at==="boolean")&&($e=Sl(this),$e&&yr.set(this,"__className__",$e),this.setAttribute&&this.setAttribute("class",$e||ae===!1?"":yr.get(this,"__className__")||""))}))},hasClass:function(ae){var we,Le,$e=0;for(we=" "+ae+" ";Le=this[$e++];)if(Le.nodeType===1&&(" "+wa(Sl(Le))+" ").indexOf(we)>-1)return!0;return!1}});var pl=/\r/g;Q.fn.extend({val:function(ae){var we,Le,$e,ct=this[0];return arguments.length?($e=x(ae),this.each(function(ft){var at;this.nodeType===1&&($e?at=ae.call(this,ft,Q(this).val()):at=ae,at==null?at="":typeof at=="number"?at+="":Array.isArray(at)&&(at=Q.map(at,function(Er){return Er==null?"":Er+""})),we=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],(!we||!("set"in we)||we.set(this,at,"value")===void 0)&&(this.value=at))})):ct?(we=Q.valHooks[ct.type]||Q.valHooks[ct.nodeName.toLowerCase()],we&&"get"in we&&(Le=we.get(ct,"value"))!==void 0?Le:(Le=ct.value,typeof Le=="string"?Le.replace(pl,""):Le??"")):void 0}}),Q.extend({valHooks:{option:{get:function(ae){var we=Q.find.attr(ae,"value");return we??wa(Q.text(ae))}},select:{get:function(ae){var we,Le,$e,ct=ae.options,ft=ae.selectedIndex,at=ae.type==="select-one",Er=at?null:[],hr=at?ft+1:ct.length;for(ft<0?$e=hr:$e=at?ft:0;$e<hr;$e++)if(Le=ct[$e],(Le.selected||$e===ft)&&!Le.disabled&&(!Le.parentNode.disabled||!ne(Le.parentNode,"optgroup"))){if(we=Q(Le).val(),at)return we;Er.push(we)}return Er},set:function(ae,we){for(var Le,$e,ct=ae.options,ft=Q.makeArray(we),at=ct.length;at--;)$e=ct[at],($e.selected=Q.inArray(Q.valHooks.option.get($e),ft)>-1)&&(Le=!0);return Le||(ae.selectedIndex=-1),ft}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(ae,we){if(Array.isArray(we))return ae.checked=Q.inArray(Q(ae).val(),we)>-1}},b.checkOn||(Q.valHooks[this].get=function(ae){return ae.getAttribute("value")===null?"on":ae.value})});var sl=r.location,hc={guid:Date.now()},na=/\?/;Q.parseXML=function(ae){var we,Le;if(!ae||typeof ae!="string")return null;try{we=new r.DOMParser().parseFromString(ae,"text/xml")}catch{}return Le=we&&we.getElementsByTagName("parsererror")[0],(!we||Le)&&Q.error("Invalid XML: "+(Le?Q.map(Le.childNodes,function($e){return $e.textContent}).join(`
`):ae)),we};var La=/^(?:focusinfocus|focusoutblur)$/,zc=function(ae){ae.stopPropagation()};Q.extend(Q.event,{trigger:function(ae,we,Le,$e){var ct,ft,at,Er,hr,Wr,bn,Hn,cn=[Le||S],Hr=_.call(ae,"type")?ae.type:ae,ei=_.call(ae,"namespace")?ae.namespace.split("."):[];if(ft=Hn=at=Le=Le||S,!(Le.nodeType===3||Le.nodeType===8)&&!La.test(Hr+Q.event.triggered)&&(Hr.indexOf(".")>-1&&(ei=Hr.split("."),Hr=ei.shift(),ei.sort()),hr=Hr.indexOf(":")<0&&"on"+Hr,ae=ae[Q.expando]?ae:new Q.Event(Hr,typeof ae=="object"&&ae),ae.isTrigger=$e?2:3,ae.namespace=ei.join("."),ae.rnamespace=ae.namespace?new RegExp("(^|\\.)"+ei.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,ae.result=void 0,ae.target||(ae.target=Le),we=we==null?[ae]:Q.makeArray(we,[ae]),bn=Q.event.special[Hr]||{},!(!$e&&bn.trigger&&bn.trigger.apply(Le,we)===!1))){if(!$e&&!bn.noBubble&&!v(Le)){for(Er=bn.delegateType||Hr,La.test(Er+Hr)||(ft=ft.parentNode);ft;ft=ft.parentNode)cn.push(ft),at=ft;at===(Le.ownerDocument||S)&&cn.push(at.defaultView||at.parentWindow||r)}for(ct=0;(ft=cn[ct++])&&!ae.isPropagationStopped();)Hn=ft,ae.type=ct>1?Er:bn.bindType||Hr,Wr=(yr.get(ft,"events")||Object.create(null))[ae.type]&&yr.get(ft,"handle"),Wr&&Wr.apply(ft,we),Wr=hr&&ft[hr],Wr&&Wr.apply&&fr(ft)&&(ae.result=Wr.apply(ft,we),ae.result===!1&&ae.preventDefault());return ae.type=Hr,!$e&&!ae.isDefaultPrevented()&&(!bn._default||bn._default.apply(cn.pop(),we)===!1)&&fr(Le)&&hr&&x(Le[Hr])&&!v(Le)&&(at=Le[hr],at&&(Le[hr]=null),Q.event.triggered=Hr,ae.isPropagationStopped()&&Hn.addEventListener(Hr,zc),Le[Hr](),ae.isPropagationStopped()&&Hn.removeEventListener(Hr,zc),Q.event.triggered=void 0,at&&(Le[hr]=at)),ae.result}},simulate:function(ae,we,Le){var $e=Q.extend(new Q.Event,Le,{type:ae,isSimulated:!0});Q.event.trigger($e,null,we)}}),Q.fn.extend({trigger:function(ae,we){return this.each(function(){Q.event.trigger(ae,we,this)})},triggerHandler:function(ae,we){var Le=this[0];if(Le)return Q.event.trigger(ae,we,Le,!0)}});var Cc=/\[\]$/,Os=/\r?\n/g,qu=/^(?:submit|button|image|reset|file)$/i,Jc=/^(?:input|select|textarea|keygen)/i;function bs(ae,we,Le,$e){var ct;if(Array.isArray(we))Q.each(we,function(ft,at){Le||Cc.test(ae)?$e(ae,at):bs(ae+"["+(typeof at=="object"&&at!=null?ft:"")+"]",at,Le,$e)});else if(!Le&&O(we)==="object")for(ct in we)bs(ae+"["+ct+"]",we[ct],Le,$e);else $e(ae,we)}Q.param=function(ae,we){var Le,$e=[],ct=function(ft,at){var Er=x(at)?at():at;$e[$e.length]=encodeURIComponent(ft)+"="+encodeURIComponent(Er??"")};if(ae==null)return"";if(Array.isArray(ae)||ae.jquery&&!Q.isPlainObject(ae))Q.each(ae,function(){ct(this.name,this.value)});else for(Le in ae)bs(Le,ae[Le],we,ct);return $e.join("&")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var ae=Q.prop(this,"elements");return ae?Q.makeArray(ae):this}).filter(function(){var ae=this.type;return this.name&&!Q(this).is(":disabled")&&Jc.test(this.nodeName)&&!qu.test(ae)&&(this.checked||!Zn.test(ae))}).map(function(ae,we){var Le=Q(this).val();return Le==null?null:Array.isArray(Le)?Q.map(Le,function($e){return{name:we.name,value:$e.replace(Os,`\r
`)}}):{name:we.name,value:Le.replace(Os,`\r
`)}}).get()}});var Dh=/%20/g,mu=/#.*$/,Fu=/([?&])_=[^&]*/,Ec=/^(.*?):[ \t]*([^\r\n]*)$/mg,fh=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pu=/^(?:GET|HEAD)$/,gu=/^\/\//,Ho={},Ro={},eu="*/".concat("*"),Rh=S.createElement("a");Rh.href=sl.href;function Bc(ae){return function(we,Le){typeof we!="string"&&(Le=we,we="*");var $e,ct=0,ft=we.toLowerCase().match(Be)||[];if(x(Le))for(;$e=ft[ct++];)$e[0]==="+"?($e=$e.slice(1)||"*",(ae[$e]=ae[$e]||[]).unshift(Le)):(ae[$e]=ae[$e]||[]).push(Le)}}function Hc(ae,we,Le,$e){var ct={},ft=ae===Ro;function at(Er){var hr;return ct[Er]=!0,Q.each(ae[Er]||[],function(Wr,bn){var Hn=bn(we,Le,$e);if(typeof Hn=="string"&&!ft&&!ct[Hn])return we.dataTypes.unshift(Hn),at(Hn),!1;if(ft)return!(hr=Hn)}),hr}return at(we.dataTypes[0])||!ct["*"]&&at("*")}function Yu(ae,we){var Le,$e,ct=Q.ajaxSettings.flatOptions||{};for(Le in we)we[Le]!==void 0&&((ct[Le]?ae:$e||($e={}))[Le]=we[Le]);return $e&&Q.extend(!0,ae,$e),ae}function dh(ae,we,Le){for(var $e,ct,ft,at,Er=ae.contents,hr=ae.dataTypes;hr[0]==="*";)hr.shift(),$e===void 0&&($e=ae.mimeType||we.getResponseHeader("Content-Type"));if($e){for(ct in Er)if(Er[ct]&&Er[ct].test($e)){hr.unshift(ct);break}}if(hr[0]in Le)ft=hr[0];else{for(ct in Le){if(!hr[0]||ae.converters[ct+" "+hr[0]]){ft=ct;break}at||(at=ct)}ft=ft||at}if(ft)return ft!==hr[0]&&hr.unshift(ft),Le[ft]}function Qa(ae,we,Le,$e){var ct,ft,at,Er,hr,Wr={},bn=ae.dataTypes.slice();if(bn[1])for(at in ae.converters)Wr[at.toLowerCase()]=ae.converters[at];for(ft=bn.shift();ft;)if(ae.responseFields[ft]&&(Le[ae.responseFields[ft]]=we),!hr&&$e&&ae.dataFilter&&(we=ae.dataFilter(we,ae.dataType)),hr=ft,ft=bn.shift(),ft){if(ft==="*")ft=hr;else if(hr!=="*"&&hr!==ft){if(at=Wr[hr+" "+ft]||Wr["* "+ft],!at){for(ct in Wr)if(Er=ct.split(" "),Er[1]===ft&&(at=Wr[hr+" "+Er[0]]||Wr["* "+Er[0]],at)){at===!0?at=Wr[ct]:Wr[ct]!==!0&&(ft=Er[0],bn.unshift(Er[1]));break}}if(at!==!0)if(at&&ae.throws)we=at(we);else try{we=at(we)}catch(Hn){return{state:"parsererror",error:at?Hn:"No conversion from "+hr+" to "+ft}}}}return{state:"success",data:we}}Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:sl.href,type:"GET",isLocal:fh.test(sl.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":eu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(ae,we){return we?Yu(Yu(ae,Q.ajaxSettings),we):Yu(Q.ajaxSettings,ae)},ajaxPrefilter:Bc(Ho),ajaxTransport:Bc(Ro),ajax:function(ae,we){typeof ae=="object"&&(we=ae,ae=void 0),we=we||{};var Le,$e,ct,ft,at,Er,hr,Wr,bn,Hn,cn=Q.ajaxSetup({},we),Hr=cn.context||cn,ei=cn.context&&(Hr.nodeType||Hr.jquery)?Q(Hr):Q.event,Ti=Q.Deferred(),vs=Q.Callbacks("once memory"),ma=cn.statusCode||{},Fe={},pt={},lr="canceled",gr={readyState:0,getResponseHeader:function(Zr){var Gn;if(hr){if(!ft)for(ft={};Gn=Ec.exec(ct);)ft[Gn[1].toLowerCase()+" "]=(ft[Gn[1].toLowerCase()+" "]||[]).concat(Gn[2]);Gn=ft[Zr.toLowerCase()+" "]}return Gn==null?null:Gn.join(", ")},getAllResponseHeaders:function(){return hr?ct:null},setRequestHeader:function(Zr,Gn){return hr==null&&(Zr=pt[Zr.toLowerCase()]=pt[Zr.toLowerCase()]||Zr,Fe[Zr]=Gn),this},overrideMimeType:function(Zr){return hr==null&&(cn.mimeType=Zr),this},statusCode:function(Zr){var Gn;if(Zr)if(hr)gr.always(Zr[gr.status]);else for(Gn in Zr)ma[Gn]=[ma[Gn],Zr[Gn]];return this},abort:function(Zr){var Gn=Zr||lr;return Le&&Le.abort(Gn),Kr(0,Gn),this}};if(Ti.promise(gr),cn.url=((ae||cn.url||sl.href)+"").replace(gu,sl.protocol+"//"),cn.type=we.method||we.type||cn.method||cn.type,cn.dataTypes=(cn.dataType||"*").toLowerCase().match(Be)||[""],cn.crossDomain==null){Er=S.createElement("a");try{Er.href=cn.url,Er.href=Er.href,cn.crossDomain=Rh.protocol+"//"+Rh.host!=Er.protocol+"//"+Er.host}catch{cn.crossDomain=!0}}if(cn.data&&cn.processData&&typeof cn.data!="string"&&(cn.data=Q.param(cn.data,cn.traditional)),Hc(Ho,cn,we,gr),hr)return gr;Wr=Q.event&&cn.global,Wr&&Q.active++===0&&Q.event.trigger("ajaxStart"),cn.type=cn.type.toUpperCase(),cn.hasContent=!Pu.test(cn.type),$e=cn.url.replace(mu,""),cn.hasContent?cn.data&&cn.processData&&(cn.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(cn.data=cn.data.replace(Dh,"+")):(Hn=cn.url.slice($e.length),cn.data&&(cn.processData||typeof cn.data=="string")&&($e+=(na.test($e)?"&":"?")+cn.data,delete cn.data),cn.cache===!1&&($e=$e.replace(Fu,"$1"),Hn=(na.test($e)?"&":"?")+"_="+hc.guid+++Hn),cn.url=$e+Hn),cn.ifModified&&(Q.lastModified[$e]&&gr.setRequestHeader("If-Modified-Since",Q.lastModified[$e]),Q.etag[$e]&&gr.setRequestHeader("If-None-Match",Q.etag[$e])),(cn.data&&cn.hasContent&&cn.contentType!==!1||we.contentType)&&gr.setRequestHeader("Content-Type",cn.contentType),gr.setRequestHeader("Accept",cn.dataTypes[0]&&cn.accepts[cn.dataTypes[0]]?cn.accepts[cn.dataTypes[0]]+(cn.dataTypes[0]!=="*"?", "+eu+"; q=0.01":""):cn.accepts["*"]);for(bn in cn.headers)gr.setRequestHeader(bn,cn.headers[bn]);if(cn.beforeSend&&(cn.beforeSend.call(Hr,gr,cn)===!1||hr))return gr.abort();if(lr="abort",vs.add(cn.complete),gr.done(cn.success),gr.fail(cn.error),Le=Hc(Ro,cn,we,gr),!Le)Kr(-1,"No Transport");else{if(gr.readyState=1,Wr&&ei.trigger("ajaxSend",[gr,cn]),hr)return gr;cn.async&&cn.timeout>0&&(at=r.setTimeout(function(){gr.abort("timeout")},cn.timeout));try{hr=!1,Le.send(Fe,Kr)}catch(Zr){if(hr)throw Zr;Kr(-1,Zr)}}function Kr(Zr,Gn,Hi,ps){var ws,Ns,Ws,vo,qs,as=Gn;hr||(hr=!0,at&&r.clearTimeout(at),Le=void 0,ct=ps||"",gr.readyState=Zr>0?4:0,ws=Zr>=200&&Zr<300||Zr===304,Hi&&(vo=dh(cn,gr,Hi)),!ws&&Q.inArray("script",cn.dataTypes)>-1&&Q.inArray("json",cn.dataTypes)<0&&(cn.converters["text script"]=function(){}),vo=Qa(cn,vo,gr,ws),ws?(cn.ifModified&&(qs=gr.getResponseHeader("Last-Modified"),qs&&(Q.lastModified[$e]=qs),qs=gr.getResponseHeader("etag"),qs&&(Q.etag[$e]=qs)),Zr===204||cn.type==="HEAD"?as="nocontent":Zr===304?as="notmodified":(as=vo.state,Ns=vo.data,Ws=vo.error,ws=!Ws)):(Ws=as,(Zr||!as)&&(as="error",Zr<0&&(Zr=0))),gr.status=Zr,gr.statusText=(Gn||as)+"",ws?Ti.resolveWith(Hr,[Ns,as,gr]):Ti.rejectWith(Hr,[gr,as,Ws]),gr.statusCode(ma),ma=void 0,Wr&&ei.trigger(ws?"ajaxSuccess":"ajaxError",[gr,cn,ws?Ns:Ws]),vs.fireWith(Hr,[gr,as]),Wr&&(ei.trigger("ajaxComplete",[gr,cn]),--Q.active||Q.event.trigger("ajaxStop")))}return gr},getJSON:function(ae,we,Le){return Q.get(ae,we,Le,"json")},getScript:function(ae,we){return Q.get(ae,void 0,we,"script")}}),Q.each(["get","post"],function(ae,we){Q[we]=function(Le,$e,ct,ft){return x($e)&&(ft=ft||ct,ct=$e,$e=void 0),Q.ajax(Q.extend({url:Le,type:we,dataType:ft,data:$e,success:ct},Q.isPlainObject(Le)&&Le))}}),Q.ajaxPrefilter(function(ae){var we;for(we in ae.headers)we.toLowerCase()==="content-type"&&(ae.contentType=ae.headers[we]||"")}),Q._evalUrl=function(ae,we,Le){return Q.ajax({url:ae,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function($e){Q.globalEval($e,we,Le)}})},Q.fn.extend({wrapAll:function(ae){var we;return this[0]&&(x(ae)&&(ae=ae.call(this[0])),we=Q(ae,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&we.insertBefore(this[0]),we.map(function(){for(var Le=this;Le.firstElementChild;)Le=Le.firstElementChild;return Le}).append(this)),this},wrapInner:function(ae){return x(ae)?this.each(function(we){Q(this).wrapInner(ae.call(this,we))}):this.each(function(){var we=Q(this),Le=we.contents();Le.length?Le.wrapAll(ae):we.append(ae)})},wrap:function(ae){var we=x(ae);return this.each(function(Le){Q(this).wrapAll(we?ae.call(this,Le):ae)})},unwrap:function(ae){return this.parent(ae).not("body").each(function(){Q(this).replaceWith(this.childNodes)}),this}}),Q.expr.pseudos.hidden=function(ae){return!Q.expr.pseudos.visible(ae)},Q.expr.pseudos.visible=function(ae){return!!(ae.offsetWidth||ae.offsetHeight||ae.getClientRects().length)},Q.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var tu={0:200,1223:204},go=Q.ajaxSettings.xhr();b.cors=!!go&&"withCredentials"in go,b.ajax=go=!!go,Q.ajaxTransport(function(ae){var we,Le;if(b.cors||go&&!ae.crossDomain)return{send:function($e,ct){var ft,at=ae.xhr();if(at.open(ae.type,ae.url,ae.async,ae.username,ae.password),ae.xhrFields)for(ft in ae.xhrFields)at[ft]=ae.xhrFields[ft];ae.mimeType&&at.overrideMimeType&&at.overrideMimeType(ae.mimeType),!ae.crossDomain&&!$e["X-Requested-With"]&&($e["X-Requested-With"]="XMLHttpRequest");for(ft in $e)at.setRequestHeader(ft,$e[ft]);we=function(Er){return function(){we&&(we=Le=at.onload=at.onerror=at.onabort=at.ontimeout=at.onreadystatechange=null,Er==="abort"?at.abort():Er==="error"?typeof at.status!="number"?ct(0,"error"):ct(at.status,at.statusText):ct(tu[at.status]||at.status,at.statusText,(at.responseType||"text")!=="text"||typeof at.responseText!="string"?{binary:at.response}:{text:at.responseText},at.getAllResponseHeaders()))}},at.onload=we(),Le=at.onerror=at.ontimeout=we("error"),at.onabort!==void 0?at.onabort=Le:at.onreadystatechange=function(){at.readyState===4&&r.setTimeout(function(){we&&Le()})},we=we("abort");try{at.send(ae.hasContent&&ae.data||null)}catch(Er){if(we)throw Er}},abort:function(){we&&we()}}}),Q.ajaxPrefilter(function(ae){ae.crossDomain&&(ae.contents.script=!1)}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(ae){return Q.globalEval(ae),ae}}}),Q.ajaxPrefilter("script",function(ae){ae.cache===void 0&&(ae.cache=!1),ae.crossDomain&&(ae.type="GET")}),Q.ajaxTransport("script",function(ae){if(ae.crossDomain||ae.scriptAttrs){var we,Le;return{send:function($e,ct){we=Q("<script>").attr(ae.scriptAttrs||{}).prop({charset:ae.scriptCharset,src:ae.url}).on("load error",Le=function(ft){we.remove(),Le=null,ft&&ct(ft.type==="error"?404:200,ft.type)}),S.head.appendChild(we[0])},abort:function(){Le&&Le()}}}});var fc=[],Pl=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var ae=fc.pop()||Q.expando+"_"+hc.guid++;return this[ae]=!0,ae}}),Q.ajaxPrefilter("json jsonp",function(ae,we,Le){var $e,ct,ft,at=ae.jsonp!==!1&&(Pl.test(ae.url)?"url":typeof ae.data=="string"&&(ae.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Pl.test(ae.data)&&"data");if(at||ae.dataTypes[0]==="jsonp")return $e=ae.jsonpCallback=x(ae.jsonpCallback)?ae.jsonpCallback():ae.jsonpCallback,at?ae[at]=ae[at].replace(Pl,"$1"+$e):ae.jsonp!==!1&&(ae.url+=(na.test(ae.url)?"&":"?")+ae.jsonp+"="+$e),ae.converters["script json"]=function(){return ft||Q.error($e+" was not called"),ft[0]},ae.dataTypes[0]="json",ct=r[$e],r[$e]=function(){ft=arguments},Le.always(function(){ct===void 0?Q(r).removeProp($e):r[$e]=ct,ae[$e]&&(ae.jsonpCallback=we.jsonpCallback,fc.push($e)),ft&&x(ct)&&ct(ft[0]),ft=ct=void 0}),"script"}),b.createHTMLDocument=function(){var ae=S.implementation.createHTMLDocument("").body;return ae.innerHTML="<form></form><form></form>",ae.childNodes.length===2}(),Q.parseHTML=function(ae,we,Le){if(typeof ae!="string")return[];typeof we=="boolean"&&(Le=we,we=!1);var $e,ct,ft;return we||(b.createHTMLDocument?(we=S.implementation.createHTMLDocument(""),$e=we.createElement("base"),$e.href=S.location.href,we.head.appendChild($e)):we=S),ct=J.exec(ae),ft=!Le&&[],ct?[we.createElement(ct[1])]:(ct=li([ae],we,ft),ft&&ft.length&&Q(ft).remove(),Q.merge([],ct.childNodes))},Q.fn.load=function(ae,we,Le){var $e,ct,ft,at=this,Er=ae.indexOf(" ");return Er>-1&&($e=wa(ae.slice(Er)),ae=ae.slice(0,Er)),x(we)?(Le=we,we=void 0):we&&typeof we=="object"&&(ct="POST"),at.length>0&&Q.ajax({url:ae,type:ct||"GET",dataType:"html",data:we}).done(function(hr){ft=arguments,at.html($e?Q("<div>").append(Q.parseHTML(hr)).find($e):hr)}).always(Le&&function(hr,Wr){at.each(function(){Le.apply(this,ft||[hr.responseText,Wr,hr])})}),this},Q.expr.pseudos.animated=function(ae){return Q.grep(Q.timers,function(we){return ae===we.elem}).length},Q.offset={setOffset:function(ae,we,Le){var $e,ct,ft,at,Er,hr,Wr,bn=Q.css(ae,"position"),Hn=Q(ae),cn={};bn==="static"&&(ae.style.position="relative"),Er=Hn.offset(),ft=Q.css(ae,"top"),hr=Q.css(ae,"left"),Wr=(bn==="absolute"||bn==="fixed")&&(ft+hr).indexOf("auto")>-1,Wr?($e=Hn.position(),at=$e.top,ct=$e.left):(at=parseFloat(ft)||0,ct=parseFloat(hr)||0),x(we)&&(we=we.call(ae,Le,Q.extend({},Er))),we.top!=null&&(cn.top=we.top-Er.top+at),we.left!=null&&(cn.left=we.left-Er.left+ct),"using"in we?we.using.call(ae,cn):Hn.css(cn)}},Q.fn.extend({offset:function(ae){if(arguments.length)return ae===void 0?this:this.each(function(ct){Q.offset.setOffset(this,ae,ct)});var we,Le,$e=this[0];if($e)return $e.getClientRects().length?(we=$e.getBoundingClientRect(),Le=$e.ownerDocument.defaultView,{top:we.top+Le.pageYOffset,left:we.left+Le.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var ae,we,Le,$e=this[0],ct={top:0,left:0};if(Q.css($e,"position")==="fixed")we=$e.getBoundingClientRect();else{for(we=this.offset(),Le=$e.ownerDocument,ae=$e.offsetParent||Le.documentElement;ae&&(ae===Le.body||ae===Le.documentElement)&&Q.css(ae,"position")==="static";)ae=ae.parentNode;ae&&ae!==$e&&ae.nodeType===1&&(ct=Q(ae).offset(),ct.top+=Q.css(ae,"borderTopWidth",!0),ct.left+=Q.css(ae,"borderLeftWidth",!0))}return{top:we.top-ct.top-Q.css($e,"marginTop",!0),left:we.left-ct.left-Q.css($e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var ae=this.offsetParent;ae&&Q.css(ae,"position")==="static";)ae=ae.offsetParent;return ae||mr})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(ae,we){var Le=we==="pageYOffset";Q.fn[ae]=function($e){return bt(this,function(ct,ft,at){var Er;if(v(ct)?Er=ct:ct.nodeType===9&&(Er=ct.defaultView),at===void 0)return Er?Er[we]:ct[ft];Er?Er.scrollTo(Le?Er.pageXOffset:at,Le?at:Er.pageYOffset):ct[ft]=at},ae,$e,arguments.length)}}),Q.each(["top","left"],function(ae,we){Q.cssHooks[we]=$r(b.pixelPosition,function(Le,$e){if($e)return $e=Zt(Le,we),Bi.test($e)?Q(Le).position()[we]+"px":$e})}),Q.each({Height:"height",Width:"width"},function(ae,we){Q.each({padding:"inner"+ae,content:we,"":"outer"+ae},function(Le,$e){Q.fn[$e]=function(ct,ft){var at=arguments.length&&(Le||typeof ct!="boolean"),Er=Le||(ct===!0||ft===!0?"margin":"border");return bt(this,function(hr,Wr,bn){var Hn;return v(hr)?$e.indexOf("outer")===0?hr["inner"+ae]:hr.document.documentElement["client"+ae]:hr.nodeType===9?(Hn=hr.documentElement,Math.max(hr.body["scroll"+ae],Hn["scroll"+ae],hr.body["offset"+ae],Hn["offset"+ae],Hn["client"+ae])):bn===void 0?Q.css(hr,Wr,Er):Q.style(hr,Wr,bn,Er)},we,at?ct:void 0,at)}})}),Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(ae,we){Q.fn[we]=function(Le){return this.on(we,Le)}}),Q.fn.extend({bind:function(ae,we,Le){return this.on(ae,null,we,Le)},unbind:function(ae,we){return this.off(ae,null,we)},delegate:function(ae,we,Le,$e){return this.on(we,ae,Le,$e)},undelegate:function(ae,we,Le){return arguments.length===1?this.off(ae,"**"):this.off(we,ae||"**",Le)},hover:function(ae,we){return this.on("mouseenter",ae).on("mouseleave",we||ae)}}),Q.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(ae,we){Q.fn[we]=function(Le,$e){return arguments.length>0?this.on(we,null,Le,$e):this.trigger(we)}});var Lu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;Q.proxy=function(ae,we){var Le,$e,ct;if(typeof we=="string"&&(Le=ae[we],we=ae,ae=Le),!!x(ae))return $e=a.call(arguments,2),ct=function(){return ae.apply(we||this,$e.concat(a.call(arguments)))},ct.guid=ae.guid=ae.guid||Q.guid++,ct},Q.holdReady=function(ae){ae?Q.readyWait++:Q.ready(!0)},Q.isArray=Array.isArray,Q.parseJSON=JSON.parse,Q.nodeName=ne,Q.isFunction=x,Q.isWindow=v,Q.camelCase=Gt,Q.type=O,Q.now=Date.now,Q.isNumeric=function(ae){var we=Q.type(ae);return(we==="number"||we==="string")&&!isNaN(ae-parseFloat(ae))},Q.trim=function(ae){return ae==null?"":(ae+"").replace(Lu,"$1")};var ol=r.jQuery,ka=r.$;return Q.noConflict=function(ae){return r.$===Q&&(r.$=ka),ae&&r.jQuery===Q&&(r.jQuery=ol),Q},typeof e>"u"&&(r.jQuery=r.$=Q),Q})}(Rx)),Rx.exports}var M9=IC();const F9=s0(M9);var tv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var P9=tv.exports,H6;function L9(){return H6||(H6=1,function(n,r){(function(){var e,i="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",t="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",_=1,g=2,m=4,b=1,x=2,v=1,S=2,B=4,F=8,O=16,V=32,X=64,Q=128,ee=256,ne=512,Ae=30,fe="...",ce=800,G=16,Z=1,z=2,k=3,R=1/0,N=9007199254740991,U=17976931348623157e292,Y=NaN,de=4294967295,J=de-1,xe=de>>>1,Te=[["ary",Q],["bind",v],["bindKey",S],["curry",F],["curryRight",O],["flip",ne],["partial",V],["partialRight",X],["rearg",ee]],Ue="[object Arguments]",pe="[object Array]",Oe="[object AsyncFunction]",re="[object Boolean]",ie="[object Date]",Be="[object DOMException]",He="[object Error]",Ge="[object Function]",Ne="[object GeneratorFunction]",st="[object Map]",ot="[object Number]",Je="[object Null]",Ze="[object Object]",bt="[object Promise]",yt="[object Proxy]",Nt="[object RegExp]",kt="[object Set]",Gt="[object String]",fr="[object Symbol]",Tr="[object Undefined]",yr="[object WeakMap]",Dr="[object WeakSet]",jt="[object ArrayBuffer]",Jt="[object DataView]",pr="[object Float32Array]",Ft="[object Float64Array]",er="[object Int8Array]",ur="[object Int16Array]",Yt="[object Int32Array]",mr="[object Uint8Array]",Mr="[object Uint8ClampedArray]",sn="[object Uint16Array]",Un="[object Uint32Array]",wn=/\b__p \+= '';/g,Zi=/\b(__p \+=) '' \+/g,ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_i=/&(?:amp|lt|gt|quot|#39);/g,Zn=/[&<>"']/g,Bn=RegExp(_i.source),On=RegExp(Zn.source),tr=/<%-([\s\S]+?)%>/g,zn=/<%([\s\S]+?)%>/g,Ki=/<%=([\s\S]+?)%>/g,Qs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,li=/^\w*$/,Qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/[\\^$.*+?()[\]{}|]/g,et=RegExp(Ve.source),We=/^\s+/,tt=/\s/,nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ct=/\{\n\/\* \[wrapped with (.+)\] \*/,rr=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nr=/[()=,{}\[\]\/\s]/,Fr=/\\(\\)?/g,_r=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pn=/\w*$/,Tn=/^[-+]0x[0-9a-f]+$/i,Vn=/^0b[01]+$/i,Bi=/^\[object .+?Constructor\]$/,Si=/^0o[0-7]+$/i,Di=/^(?:0|[1-9]\d*)$/,ds=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qi=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,$r="\\ud800-\\udfff",kn="\\u0300-\\u036f",vn="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",qn=kn+vn+si,Yn="\\u2700-\\u27bf",Wi="a-z\\xdf-\\xf6\\xf8-\\xff",us="\\xac\\xb1\\xd7\\xf7",xs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zi="\\u2000-\\u206f",uo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ji="A-Z\\xc0-\\xd6\\xd8-\\xde",ks="\\ufe0e\\ufe0f",Co=us+xs+zi+uo,Do="['â]",ba="["+$r+"]",il="["+Co+"]",Ma="["+qn+"]",Uo="\\d+",xa="["+Yn+"]",Gl="["+Wi+"]",ro="[^"+$r+Co+Uo+Yn+Wi+Ji+"]",Hs="\\ud83c[\\udffb-\\udfff]",zo="(?:"+Ma+"|"+Hs+")",wl="[^"+$r+"]",Ha="(?:\\ud83c[\\udde6-\\uddff]){2}",Fa="[\\ud800-\\udbff][\\udc00-\\udfff]",Pa="["+Ji+"]",wa="\\u200d",Sl="(?:"+Gl+"|"+ro+")",Jl="(?:"+Pa+"|"+ro+")",pl="(?:"+Do+"(?:d|ll|m|re|s|t|ve))?",sl="(?:"+Do+"(?:D|LL|M|RE|S|T|VE))?",hc=zo+"?",na="["+ks+"]?",La="(?:"+wa+"(?:"+[wl,Ha,Fa].join("|")+")"+na+hc+")*",zc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Os=na+hc+La,qu="(?:"+[xa,Ha,Fa].join("|")+")"+Os,Jc="(?:"+[wl+Ma+"?",Ma,Ha,Fa,ba].join("|")+")",bs=RegExp(Do,"g"),Dh=RegExp(Ma,"g"),mu=RegExp(Hs+"(?="+Hs+")|"+Jc+Os,"g"),Fu=RegExp([Pa+"?"+Gl+"+"+pl+"(?="+[il,Pa,"$"].join("|")+")",Jl+"+"+sl+"(?="+[il,Pa+Sl,"$"].join("|")+")",Pa+"?"+Sl+"+"+pl,Pa+"+"+sl,Cc,zc,Uo,qu].join("|"),"g"),Ec=RegExp("["+wa+$r+qn+ks+"]"),fh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gu=-1,Ho={};Ho[pr]=Ho[Ft]=Ho[er]=Ho[ur]=Ho[Yt]=Ho[mr]=Ho[Mr]=Ho[sn]=Ho[Un]=!0,Ho[Ue]=Ho[pe]=Ho[jt]=Ho[re]=Ho[Jt]=Ho[ie]=Ho[He]=Ho[Ge]=Ho[st]=Ho[ot]=Ho[Ze]=Ho[Nt]=Ho[kt]=Ho[Gt]=Ho[yr]=!1;var Ro={};Ro[Ue]=Ro[pe]=Ro[jt]=Ro[Jt]=Ro[re]=Ro[ie]=Ro[pr]=Ro[Ft]=Ro[er]=Ro[ur]=Ro[Yt]=Ro[st]=Ro[ot]=Ro[Ze]=Ro[Nt]=Ro[kt]=Ro[Gt]=Ro[fr]=Ro[mr]=Ro[Mr]=Ro[sn]=Ro[Un]=!0,Ro[He]=Ro[Ge]=Ro[yr]=!1;var eu={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},Rh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Hc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yu=parseFloat,dh=parseInt,Qa=typeof So=="object"&&So&&So.Object===Object&&So,tu=typeof self=="object"&&self&&self.Object===Object&&self,go=Qa||tu||Function("return this")(),fc=r&&!r.nodeType&&r,Pl=fc&&!0&&n&&!n.nodeType&&n,Lu=Pl&&Pl.exports===fc,ol=Lu&&Qa.process,ka=function(){try{var Kt=Pl&&Pl.require&&Pl.require("util").types;return Kt||ol&&ol.binding&&ol.binding("util")}catch{}}(),ae=ka&&ka.isArrayBuffer,we=ka&&ka.isDate,Le=ka&&ka.isMap,$e=ka&&ka.isRegExp,ct=ka&&ka.isSet,ft=ka&&ka.isTypedArray;function at(Kt,Pr,Cr){switch(Cr.length){case 0:return Kt.call(Pr);case 1:return Kt.call(Pr,Cr[0]);case 2:return Kt.call(Pr,Cr[0],Cr[1]);case 3:return Kt.call(Pr,Cr[0],Cr[1],Cr[2])}return Kt.apply(Pr,Cr)}function Er(Kt,Pr,Cr,Nn){for(var Qn=-1,ki=Kt==null?0:Kt.length;++Qn<ki;){var es=Kt[Qn];Pr(Nn,es,Cr(es),Kt)}return Nn}function hr(Kt,Pr){for(var Cr=-1,Nn=Kt==null?0:Kt.length;++Cr<Nn&&Pr(Kt[Cr],Cr,Kt)!==!1;);return Kt}function Wr(Kt,Pr){for(var Cr=Kt==null?0:Kt.length;Cr--&&Pr(Kt[Cr],Cr,Kt)!==!1;);return Kt}function bn(Kt,Pr){for(var Cr=-1,Nn=Kt==null?0:Kt.length;++Cr<Nn;)if(!Pr(Kt[Cr],Cr,Kt))return!1;return!0}function Hn(Kt,Pr){for(var Cr=-1,Nn=Kt==null?0:Kt.length,Qn=0,ki=[];++Cr<Nn;){var es=Kt[Cr];Pr(es,Cr,Kt)&&(ki[Qn++]=es)}return ki}function cn(Kt,Pr){var Cr=Kt==null?0:Kt.length;return!!Cr&&Gn(Kt,Pr,0)>-1}function Hr(Kt,Pr,Cr){for(var Nn=-1,Qn=Kt==null?0:Kt.length;++Nn<Qn;)if(Cr(Pr,Kt[Nn]))return!0;return!1}function ei(Kt,Pr){for(var Cr=-1,Nn=Kt==null?0:Kt.length,Qn=Array(Nn);++Cr<Nn;)Qn[Cr]=Pr(Kt[Cr],Cr,Kt);return Qn}function Ti(Kt,Pr){for(var Cr=-1,Nn=Pr.length,Qn=Kt.length;++Cr<Nn;)Kt[Qn+Cr]=Pr[Cr];return Kt}function vs(Kt,Pr,Cr,Nn){var Qn=-1,ki=Kt==null?0:Kt.length;for(Nn&&ki&&(Cr=Kt[++Qn]);++Qn<ki;)Cr=Pr(Cr,Kt[Qn],Qn,Kt);return Cr}function ma(Kt,Pr,Cr,Nn){var Qn=Kt==null?0:Kt.length;for(Nn&&Qn&&(Cr=Kt[--Qn]);Qn--;)Cr=Pr(Cr,Kt[Qn],Qn,Kt);return Cr}function Fe(Kt,Pr){for(var Cr=-1,Nn=Kt==null?0:Kt.length;++Cr<Nn;)if(Pr(Kt[Cr],Cr,Kt))return!0;return!1}var pt=Ns("length");function lr(Kt){return Kt.split("")}function gr(Kt){return Kt.match(Et)||[]}function Kr(Kt,Pr,Cr){var Nn;return Cr(Kt,function(Qn,ki,es){if(Pr(Qn,ki,es))return Nn=ki,!1}),Nn}function Zr(Kt,Pr,Cr,Nn){for(var Qn=Kt.length,ki=Cr+(Nn?1:-1);Nn?ki--:++ki<Qn;)if(Pr(Kt[ki],ki,Kt))return ki;return-1}function Gn(Kt,Pr,Cr){return Pr===Pr?ll(Kt,Pr,Cr):Zr(Kt,ps,Cr)}function Hi(Kt,Pr,Cr,Nn){for(var Qn=Cr-1,ki=Kt.length;++Qn<ki;)if(Nn(Kt[Qn],Pr))return Qn;return-1}function ps(Kt){return Kt!==Kt}function ws(Kt,Pr){var Cr=Kt==null?0:Kt.length;return Cr?as(Kt,Pr)/Cr:Y}function Ns(Kt){return function(Pr){return Pr==null?e:Pr[Kt]}}function Ws(Kt){return function(Pr){return Kt==null?e:Kt[Pr]}}function vo(Kt,Pr,Cr,Nn,Qn){return Qn(Kt,function(ki,es,Oi){Cr=Nn?(Nn=!1,ki):Pr(Cr,ki,es,Oi)}),Cr}function qs(Kt,Pr){var Cr=Kt.length;for(Kt.sort(Pr);Cr--;)Kt[Cr]=Kt[Cr].value;return Kt}function as(Kt,Pr){for(var Cr,Nn=-1,Qn=Kt.length;++Nn<Qn;){var ki=Pr(Kt[Nn]);ki!==e&&(Cr=Cr===e?ki:Cr+ki)}return Cr}function Qo(Kt,Pr){for(var Cr=-1,Nn=Array(Kt);++Cr<Kt;)Nn[Cr]=Pr(Cr);return Nn}function Vo(Kt,Pr){return ei(Pr,function(Cr){return[Cr,Kt[Cr]]})}function Li(Kt){return Kt&&Kt.slice(0,ml(Kt)+1).replace(We,"")}function Sn(Kt){return function(Pr){return Kt(Pr)}}function ia(Kt,Pr){return ei(Pr,function(Cr){return Kt[Cr]})}function Ii(Kt,Pr){return Kt.has(Pr)}function As(Kt,Pr){for(var Cr=-1,Nn=Kt.length;++Cr<Nn&&Gn(Pr,Kt[Cr],0)>-1;);return Cr}function sa(Kt,Pr){for(var Cr=Kt.length;Cr--&&Gn(Pr,Kt[Cr],0)>-1;);return Cr}function Ai(Kt,Pr){for(var Cr=Kt.length,Nn=0;Cr--;)Kt[Cr]===Pr&&++Nn;return Nn}var aa=Ws(eu),ru=Ws(Rh);function Tl(Kt){return"\\"+Hc[Kt]}function al(Kt,Pr){return Kt==null?e:Kt[Pr]}function Us(Kt){return Ec.test(Kt)}function Xa(Kt){return fh.test(Kt)}function jl(Kt){for(var Pr,Cr=[];!(Pr=Kt.next()).done;)Cr.push(Pr.value);return Cr}function Sa(Kt){var Pr=-1,Cr=Array(Kt.size);return Kt.forEach(function(Nn,Qn){Cr[++Pr]=[Qn,Nn]}),Cr}function Al(Kt,Pr){return function(Cr){return Kt(Pr(Cr))}}function Va(Kt,Pr){for(var Cr=-1,Nn=Kt.length,Qn=0,ki=[];++Cr<Nn;){var es=Kt[Cr];(es===Pr||es===p)&&(Kt[Cr]=p,ki[Qn++]=Cr)}return ki}function Ca(Kt){var Pr=-1,Cr=Array(Kt.size);return Kt.forEach(function(Nn){Cr[++Pr]=Nn}),Cr}function yu(Kt){var Pr=-1,Cr=Array(Kt.size);return Kt.forEach(function(Nn){Cr[++Pr]=[Nn,Nn]}),Cr}function ll(Kt,Pr,Cr){for(var Nn=Cr-1,Qn=Kt.length;++Nn<Qn;)if(Kt[Nn]===Pr)return Nn;return-1}function ec(Kt,Pr,Cr){for(var Nn=Cr+1;Nn--;)if(Kt[Nn]===Pr)return Nn;return Nn}function Ga(Kt){return Us(Kt)?Wl(Kt):pt(Kt)}function bo(Kt){return Us(Kt)?ir(Kt):lr(Kt)}function ml(Kt){for(var Pr=Kt.length;Pr--&&tt.test(Kt.charAt(Pr)););return Pr}var dc=Ws(Bc);function Wl(Kt){for(var Pr=mu.lastIndex=0;mu.test(Kt);)++Pr;return Pr}function ir(Kt){return Kt.match(mu)||[]}function Lr(Kt){return Kt.match(Fu)||[]}var rn=function Kt(Pr){Pr=Pr==null?go:fn.defaults(go.Object(),Pr,fn.pick(go,Pu));var Cr=Pr.Array,Nn=Pr.Date,Qn=Pr.Error,ki=Pr.Function,es=Pr.Math,Oi=Pr.Object,Zs=Pr.RegExp,ms=Pr.String,Js=Pr.TypeError,xo=Cr.prototype,Za=ki.prototype,Ea=Oi.prototype,Wa=Pr["__core-js_shared__"],Ll=Za.toString,Vs=Ea.hasOwnProperty,cl=0,pc=function(){var D=/[^.]+$/.exec(Wa&&Wa.keys&&Wa.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),tn=Ea.toString,Oa=Ll.call(Oi),gl=go._,ul=Zs("^"+Ll.call(Vs).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tc=Lu?Pr.Buffer:e,tc=Pr.Symbol,Il=Pr.Uint8Array,Yh=Tc?Tc.allocUnsafe:e,nu=Al(Oi.getPrototypeOf,Oi),Nh=Oi.create,yl=Ea.propertyIsEnumerable,hs=xo.splice,Bd=tc?tc.isConcatSpreadable:e,ph=tc?tc.iterator:e,_u=tc?tc.toStringTag:e,jh=function(){try{var D=xu(Oi,"defineProperty");return D({},"",{}),D}catch{}}(),Td=Pr.clearTimeout!==go.clearTimeout&&Pr.clearTimeout,Eo=Nn&&Nn.now!==go.Date.now&&Nn.now,FA=Pr.setTimeout!==go.setTimeout&&Pr.setTimeout,Xf=es.ceil,Zf=es.floor,Jf=Oi.getOwnPropertySymbols,Pf=Tc?Tc.isBuffer:e,PA=Pr.isFinite,lp=xo.join,LA=Al(Oi.keys,Oi),Ul=es.max,kl=es.min,cp=Nn.now,Gp=Pr.parseInt,Xh=es.random,Zh=xo.reverse,Xu=xu(Pr,"DataView"),ku=xu(Pr,"Map"),Jh=xu(Pr,"Promise"),Lf=xu(Pr,"Set"),ef=xu(Pr,"WeakMap"),ed=xu(Oi,"create"),Uh=ef&&new ef,zh={},up=C(Xu),Ah=C(ku),iu=C(Jh),Ic=C(Lf),kA=C(ef),td=tc?tc.prototype:e,su=td?td.valueOf:e,rc=td?td.toString:e;function Ot(D){if(oc(D)&&!Oo(D)&&!(D instanceof Bo)){if(D instanceof ou)return D;if(Vs.call(D,"__wrapped__"))return A(D)}return new ou(D)}var mh=function(){function D(){}return function(q){if(!mc(q))return{};if(Nh)return Nh(q);D.prototype=q;var Se=new D;return D.prototype=e,Se}}();function tf(){}function ou(D,q){this.__wrapped__=D,this.__actions__=[],this.__chain__=!!q,this.__index__=0,this.__values__=e}Ot.templateSettings={escape:tr,evaluate:zn,interpolate:Ki,variable:"",imports:{_:Ot}},Ot.prototype=tf.prototype,Ot.prototype.constructor=Ot,ou.prototype=mh(tf.prototype),ou.prototype.constructor=ou;function Bo(D){this.__wrapped__=D,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=de,this.__views__=[]}function hp(){var D=new Bo(this.__wrapped__);return D.__actions__=nc(this.__actions__),D.__dir__=this.__dir__,D.__filtered__=this.__filtered__,D.__iteratees__=nc(this.__iteratees__),D.__takeCount__=this.__takeCount__,D.__views__=nc(this.__views__),D}function Wp(){if(this.__filtered__){var D=new Bo(this);D.__dir__=-1,D.__filtered__=!0}else D=this.clone(),D.__dir__*=-1;return D}function kf(){var D=this.__wrapped__.value(),q=this.__dir__,Se=Oo(D),Ye=q<0,_t=Se?D.length:0,Xt=ig(0,_t,this.__views__),Sr=Xt.start,Ur=Xt.end,on=Ur-Sr,hi=Ye?Ur:Sr-1,ui=this.__iteratees__,bi=ui.length,cs=0,Fs=kl(on,this.__takeCount__);if(!Se||!Ye&&_t==on&&Fs==on)return vu(D,this.__actions__);var mo=[];e:for(;on--&&cs<Fs;){hi+=q;for(var Ko=-1,ao=D[hi];++Ko<bi;){var ua=ui[Ko],ta=ua.iteratee,$h=ua.type,Kh=ta(ao);if($h==z)ao=Kh;else if(!Kh){if($h==Z)continue e;break e}}mo[cs++]=ao}return mo}Bo.prototype=mh(tf.prototype),Bo.prototype.constructor=Bo;function Ou(D){var q=-1,Se=D==null?0:D.length;for(this.clear();++q<Se;){var Ye=D[q];this.set(Ye[0],Ye[1])}}function au(){this.__data__=ed?ed(null):{},this.size=0}function fp(D){var q=this.has(D)&&delete this.__data__[D];return this.size-=q?1:0,q}function rd(D){var q=this.__data__;if(ed){var Se=q[D];return Se===h?e:Se}return Vs.call(q,D)?q[D]:e}function nd(D){var q=this.__data__;return ed?q[D]!==e:Vs.call(q,D)}function dp(D,q){var Se=this.__data__;return this.size+=this.has(D)?0:1,Se[D]=ed&&q===e?h:q,this}Ou.prototype.clear=au,Ou.prototype.delete=fp,Ou.prototype.get=rd,Ou.prototype.has=nd,Ou.prototype.set=dp;function Cl(D){var q=-1,Se=D==null?0:D.length;for(this.clear();++q<Se;){var Ye=D[q];this.set(Ye[0],Ye[1])}}function $p(){this.__data__=[],this.size=0}function pp(D){var q=this.__data__,Se=qr(q,D);if(Se<0)return!1;var Ye=q.length-1;return Se==Ye?q.pop():hs.call(q,Se,1),--this.size,!0}function Id(D){var q=this.__data__,Se=qr(q,D);return Se<0?e:q[Se][1]}function Ap(D){return qr(this.__data__,D)>-1}function mp(D,q){var Se=this.__data__,Ye=qr(Se,D);return Ye<0?(++this.size,Se.push([D,q])):Se[Ye][1]=q,this}Cl.prototype.clear=$p,Cl.prototype.delete=pp,Cl.prototype.get=Id,Cl.prototype.has=Ap,Cl.prototype.set=mp;function lu(D){var q=-1,Se=D==null?0:D.length;for(this.clear();++q<Se;){var Ye=D[q];this.set(Ye[0],Ye[1])}}function gp(){this.size=0,this.__data__={hash:new Ou,map:new(ku||Cl),string:new Ou}}function Md(D){var q=Vh(this,D).delete(D);return this.size-=q?1:0,q}function Fd(D){return Vh(this,D).get(D)}function oe(D){return Vh(this,D).has(D)}function be(D,q){var Se=Vh(this,D),Ye=Se.size;return Se.set(D,q),this.size+=Se.size==Ye?0:1,this}lu.prototype.clear=gp,lu.prototype.delete=Md,lu.prototype.get=Fd,lu.prototype.has=oe,lu.prototype.set=be;function ke(D){var q=-1,Se=D==null?0:D.length;for(this.__data__=new lu;++q<Se;)this.add(D[q])}function rt(D){return this.__data__.set(D,h),this}function gt(D){return this.__data__.has(D)}ke.prototype.add=ke.prototype.push=rt,ke.prototype.has=gt;function xt(D){var q=this.__data__=new Cl(D);this.size=q.size}function Bt(){this.__data__=new Cl,this.size=0}function Lt(D){var q=this.__data__,Se=q.delete(D);return this.size=q.size,Se}function Wt(D){return this.__data__.get(D)}function ar(D){return this.__data__.has(D)}function jr(D,q){var Se=this.__data__;if(Se instanceof Cl){var Ye=Se.__data__;if(!ku||Ye.length<o-1)return Ye.push([D,q]),this.size=++Se.size,this;Se=this.__data__=new lu(Ye)}return Se.set(D,q),this.size=Se.size,this}xt.prototype.clear=Bt,xt.prototype.delete=Lt,xt.prototype.get=Wt,xt.prototype.has=ar,xt.prototype.set=jr;function un(D,q){var Se=Oo(D),Ye=!Se&&Ql(D),_t=!Se&&!Ye&&$A(D),Xt=!Se&&!Ye&&!_t&&Mp(D),Sr=Se||Ye||_t||Xt,Ur=Sr?Qo(D.length,ms):[],on=Ur.length;for(var hi in D)(q||Vs.call(D,hi))&&!(Sr&&(hi=="length"||_t&&(hi=="offset"||hi=="parent")||Xt&&(hi=="buffer"||hi=="byteLength"||hi=="byteOffset")||Ih(hi,on)))&&Ur.push(hi);return Ur}function hn(D){var q=D.length;return q?D[sd(0,q-1)]:e}function en(D,q){return $d(nc(D),Ss(q,0,D.length))}function jn(D){return $d(nc(D))}function Dn(D,q,Se){(Se!==e&&!md(D[q],Se)||Se===e&&!(q in D))&&Ni(D,q,Se)}function Nr(D,q,Se){var Ye=D[q];(!(Vs.call(D,q)&&md(Ye,Se))||Se===e&&!(q in D))&&Ni(D,q,Se)}function qr(D,q){for(var Se=D.length;Se--;)if(md(D[Se][0],q))return Se;return-1}function ri(D,q,Se,Ye){return Go(D,function(_t,Xt,Sr){q(Ye,_t,Se(_t),Sr)}),Ye}function ci(D,q){return D&&sh(q,Kc(q),D)}function ni(D,q){return D&&sh(q,Wh(q),D)}function Ni(D,q,Se){q=="__proto__"&&jh?jh(D,q,{configurable:!0,enumerable:!0,value:Se,writable:!0}):D[q]=Se}function Fi(D,q){for(var Se=-1,Ye=q.length,_t=Cr(Ye),Xt=D==null;++Se<Ye;)_t[Se]=Xt?e:n_(D,q[Se]);return _t}function Ss(D,q,Se){return D===D&&(Se!==e&&(D=D<=Se?D:Se),q!==e&&(D=D>=q?D:q)),D}function Pi(D,q,Se,Ye,_t,Xt){var Sr,Ur=q&_,on=q&g,hi=q&m;if(Se&&(Sr=_t?Se(D,Ye,_t,Xt):Se(D)),Sr!==e)return Sr;if(!mc(D))return D;var ui=Oo(D);if(ui){if(Sr=Uf(D),!Ur)return nc(D,Sr)}else{var bi=Lc(D),cs=bi==Ge||bi==Ne;if($A(D))return Rd(D,Ur);if(bi==Ze||bi==Ue||cs&&!_t){if(Sr=on||cs?{}:Wd(D),!Ur)return on?af(D,ni(Sr,D)):zu(D,ci(Sr,D))}else{if(!Ro[bi])return _t?D:{};Sr=QA(D,bi,Ur)}}Xt||(Xt=new xt);var Fs=Xt.get(D);if(Fs)return Fs;Xt.set(D,Sr),Yy(D)?D.forEach(function(ao){Sr.add(Pi(ao,q,Se,ao,D,Xt))}):Db(D)&&D.forEach(function(ao,ua){Sr.set(ua,Pi(ao,q,Se,ua,D,Xt))});var mo=hi?on?rA:tA:on?Wh:Kc,Ko=ui?e:mo(D);return hr(Ko||D,function(ao,ua){Ko&&(ua=ao,ao=D[ua]),Nr(Sr,ua,Pi(ao,q,Se,ua,D,Xt))}),Sr}function pa(D){var q=Kc(D);return function(Se){return la(Se,D,q)}}function la(D,q,Se){var Ye=Se.length;if(D==null)return!Ye;for(D=Oi(D);Ye--;){var _t=Se[Ye],Xt=q[_t],Sr=D[_t];if(Sr===e&&!(_t in D)||!Xt(Sr))return!1}return!0}function Fo(D,q,Se){if(typeof D!="function")throw new Js(l);return sA(function(){D.apply(e,Se)},q)}function fi(D,q,Se,Ye){var _t=-1,Xt=cn,Sr=!0,Ur=D.length,on=[],hi=q.length;if(!Ur)return on;Se&&(q=ei(q,Sn(Se))),Ye?(Xt=Hr,Sr=!1):q.length>=o&&(Xt=Ii,Sr=!1,q=new ke(q));e:for(;++_t<Ur;){var ui=D[_t],bi=Se==null?ui:Se(ui);if(ui=Ye||ui!==0?ui:0,Sr&&bi===bi){for(var cs=hi;cs--;)if(q[cs]===bi)continue e;on.push(ui)}else Xt(q,bi,Ye)||on.push(ui)}return on}var Go=bp(hl),Jo=bp($a,!0);function ho(D,q){var Se=!0;return Go(D,function(Ye,_t,Xt){return Se=!!q(Ye,_t,Xt),Se}),Se}function ca(D,q,Se){for(var Ye=-1,_t=D.length;++Ye<_t;){var Xt=D[Ye],Sr=q(Xt);if(Sr!=null&&(Ur===e?Sr===Sr&&!Gh(Sr):Se(Sr,Ur)))var Ur=Sr,on=Xt}return on}function Qc(D,q,Se,Ye){var _t=D.length;for(Se=to(Se),Se<0&&(Se=-Se>_t?0:_t+Se),Ye=Ye===e||Ye>_t?_t:to(Ye),Ye<0&&(Ye+=_t),Ye=Se>Ye?0:Jy(Ye);Se<Ye;)D[Se++]=q;return D}function Da(D,q){var Se=[];return Go(D,function(Ye,_t,Xt){q(Ye,_t,Xt)&&Se.push(Ye)}),Se}function Wo(D,q,Se,Ye,_t){var Xt=-1,Sr=D.length;for(Se||(Se=Th),_t||(_t=[]);++Xt<Sr;){var Ur=D[Xt];q>0&&Se(Ur)?q>1?Wo(Ur,q-1,Se,Ye,_t):Ti(_t,Ur):Ye||(_t[_t.length]=Ur)}return _t}var $o=Hd(),zl=Hd(!0);function hl(D,q){return D&&$o(D,q,Kc)}function $a(D,q){return D&&zl(D,q,Kc)}function ja(D,q){return Hn(q,function(Se){return cA(D[Se])})}function Ra(D,q){q=Sh(q,D);for(var Se=0,Ye=q.length;D!=null&&Se<Ye;)D=D[Gi(q[Se++])];return Se&&Se==Ye?D:e}function $l(D,q,Se){var Ye=q(D);return Oo(D)?Ye:Ti(Ye,Se(D))}function Ja(D){return D==null?D===e?Tr:Je:_u&&_u in Oi(D)?hd(D):Tp(D)}function Ml(D,q){return D>q}function Zu(D,q){return D!=null&&Vs.call(D,q)}function Mc(D,q){return D!=null&&q in Oi(D)}function gh(D,q,Se){return D>=kl(q,Se)&&D<Ul(q,Se)}function Xn(D,q,Se){for(var Ye=Se?Hr:cn,_t=D[0].length,Xt=D.length,Sr=Xt,Ur=Cr(Xt),on=1/0,hi=[];Sr--;){var ui=D[Sr];Sr&&q&&(ui=ei(ui,Sn(q))),on=kl(ui.length,on),Ur[Sr]=!Se&&(q||_t>=120&&ui.length>=120)?new ke(Sr&&ui):e}ui=D[0];var bi=-1,cs=Ur[0];e:for(;++bi<_t&&hi.length<on;){var Fs=ui[bi],mo=q?q(Fs):Fs;if(Fs=Se||Fs!==0?Fs:0,!(cs?Ii(cs,mo):Ye(hi,mo,Se))){for(Sr=Xt;--Sr;){var Ko=Ur[Sr];if(!(Ko?Ii(Ko,mo):Ye(D[Sr],mo,Se)))continue e}cs&&cs.push(mo),hi.push(Fs)}}return hi}function fl(D,q,Se,Ye){return hl(D,function(_t,Xt,Sr){q(Ye,Se(_t),Xt,Sr)}),Ye}function Ju(D,q,Se){q=Sh(q,D),D=Hu(D,q);var Ye=D==null?D:D[Gi(dr(q))];return Ye==null?e:at(Ye,D,Se)}function eh(D){return oc(D)&&Ja(D)==Ue}function Fc(D){return oc(D)&&Ja(D)==jt}function Mi(D){return oc(D)&&Ja(D)==ie}function th(D,q,Se,Ye,_t){return D===q?!0:D==null||q==null||!oc(D)&&!oc(q)?D!==D&&q!==q:Pd(D,q,Se,Ye,th,_t)}function Pd(D,q,Se,Ye,_t,Xt){var Sr=Oo(D),Ur=Oo(q),on=Sr?pe:Lc(D),hi=Ur?pe:Lc(q);on=on==Ue?Ze:on,hi=hi==Ue?Ze:hi;var ui=on==Ze,bi=hi==Ze,cs=on==hi;if(cs&&$A(D)){if(!$A(q))return!1;Sr=!0,ui=!1}if(cs&&!ui)return Xt||(Xt=new xt),Sr||Mp(D)?jA(D,q,Se,Ye,_t,Xt):Jp(D,q,on,Se,Ye,_t,Xt);if(!(Se&b)){var Fs=ui&&Vs.call(D,"__wrapped__"),mo=bi&&Vs.call(q,"__wrapped__");if(Fs||mo){var Ko=Fs?D.value():D,ao=mo?q.value():q;return Xt||(Xt=new xt),_t(Ko,ao,Se,Ye,Xt)}}return cs?(Xt||(Xt=new xt),eA(D,q,Se,Ye,_t,Xt)):!1}function rh(D){return oc(D)&&Lc(D)==st}function nh(D,q,Se,Ye){var _t=Se.length,Xt=_t,Sr=!Ye;if(D==null)return!Xt;for(D=Oi(D);_t--;){var Ur=Se[_t];if(Sr&&Ur[2]?Ur[1]!==D[Ur[0]]:!(Ur[0]in D))return!1}for(;++_t<Xt;){Ur=Se[_t];var on=Ur[0],hi=D[on],ui=Ur[1];if(Sr&&Ur[2]){if(hi===e&&!(on in D))return!1}else{var bi=new xt;if(Ye)var cs=Ye(hi,ui,on,D,q,bi);if(!(cs===e?th(ui,hi,b|x,Ye,bi):cs))return!1}}return!0}function yh(D){if(!mc(D)||wm(D))return!1;var q=cA(D)?ul:Bi;return q.test(C(D))}function yp(D){return oc(D)&&Ja(D)==Nt}function Of(D){return oc(D)&&Lc(D)==kt}function Ld(D){return oc(D)&&B1(D.length)&&!!Ho[Ja(D)]}function kd(D){return typeof D=="function"?D:D==null?ah:typeof D=="object"?Oo(D)?Df(D[0],D[1]):Kp(D):C2(D)}function Hl(D){if(!Hf(D))return LA(D);var q=[];for(var Se in Oi(D))Vs.call(D,Se)&&Se!="constructor"&&q.push(Se);return q}function rf(D){if(!mc(D))return Bp(D);var q=Hf(D),Se=[];for(var Ye in D)Ye=="constructor"&&(q||!Vs.call(D,Ye))||Se.push(Ye);return Se}function El(D,q){return D<q}function _h(D,q){var Se=-1,Ye=pf(D)?Cr(D.length):[];return Go(D,function(_t,Xt,Sr){Ye[++Se]=q(_t,Xt,Sr)}),Ye}function Kp(D){var q=jf(D);return q.length==1&&q[0][2]?Sm(q[0][0],q[0][1]):function(Se){return Se===D||nh(Se,D,q)}}function Df(D,q){return Mh(D)&&og(q)?Sm(Gi(D),q):function(Se){var Ye=n_(Se,D);return Ye===e&&Ye===q?i_(Se,D):th(q,Ye,b|x)}}function Vc(D,q,Se,Ye,_t){D!==q&&$o(q,function(Xt,Sr){if(_t||(_t=new xt),mc(Xt))Od(D,q,Sr,Se,Vc,Ye,_t);else{var Ur=Ye?Ye(kc(D,Sr),Xt,Sr+"",D,q,_t):e;Ur===e&&(Ur=Xt),Dn(D,Sr,Ur)}},Wh)}function Od(D,q,Se,Ye,_t,Xt,Sr){var Ur=kc(D,Se),on=kc(q,Se),hi=Sr.get(on);if(hi){Dn(D,Se,hi);return}var ui=Xt?Xt(Ur,on,Se+"",D,q,Sr):e,bi=ui===e;if(bi){var cs=Oo(on),Fs=!cs&&$A(on),mo=!cs&&!Fs&&Mp(on);ui=on,cs||Fs||mo?Oo(Ur)?ui=Ur:$c(Ur)?ui=nc(Ur):Fs?(bi=!1,ui=Rd(on,!0)):mo?(bi=!1,ui=Nd(on,!0)):ui=[]:KA(on)||Ql(on)?(ui=Ur,Ql(Ur)?ui=e_(Ur):(!mc(Ur)||cA(Ur))&&(ui=Wd(on))):bi=!1}bi&&(Sr.set(on,ui),_t(ui,on,Ye,Xt,Sr),Sr.delete(on)),Dn(D,Se,ui)}function _p(D,q){var Se=D.length;if(Se)return q+=q<0?Se:0,Ih(q,Se)?D[q]:e}function Du(D,q,Se){q.length?q=ei(q,function(Xt){return Oo(Xt)?function(Sr){return Ra(Sr,Xt.length===1?Xt[0]:Xt)}:Xt}):q=[ah];var Ye=-1;q=ei(q,Sn(ls()));var _t=_h(D,function(Xt,Sr,Ur){var on=ei(q,function(hi){return hi(Xt)});return{criteria:on,index:++Ye,value:Xt}});return qs(_t,function(Xt,Sr){return Ud(Xt,Sr,Se)})}function Ao(D,q){return vh(D,q,function(Se,Ye){return i_(D,Ye)})}function vh(D,q,Se){for(var Ye=-1,_t=q.length,Xt={};++Ye<_t;){var Sr=q[Ye],Ur=Ra(D,Sr);Se(Ur,Sr)&&Nu(Xt,Sh(Sr,D),Ur)}return Xt}function Rf(D){return function(q){return Ra(q,D)}}function nf(D,q,Se,Ye){var _t=Ye?Hi:Gn,Xt=-1,Sr=q.length,Ur=D;for(D===q&&(q=nc(q)),Se&&(Ur=ei(D,Sn(Se)));++Xt<Sr;)for(var on=0,hi=q[Xt],ui=Se?Se(hi):hi;(on=_t(Ur,ui,on,Ye))>-1;)Ur!==D&&hs.call(Ur,on,1),hs.call(D,on,1);return D}function id(D,q){for(var Se=D?q.length:0,Ye=Se-1;Se--;){var _t=q[Se];if(Se==Ye||_t!==Xt){var Xt=_t;Ih(_t)?hs.call(D,_t,1):Hh(D,_t)}}return D}function sd(D,q){return D+Zf(Xh()*(q-D+1))}function Bl(D,q,Se,Ye){for(var _t=-1,Xt=Ul(Xf((q-D)/(Se||1)),0),Sr=Cr(Xt);Xt--;)Sr[Ye?Xt:++_t]=D,D+=Se;return Sr}function Ru(D,q){var Se="";if(!D||q<1||q>N)return Se;do q%2&&(Se+=D),q=Zf(q/2),q&&(D+=D);while(q);return Se}function eo(D,q){return Cm(df(D,q,ah),D+"")}function mn(D){return hn(Pp(D))}function Jn(D,q){var Se=Pp(D);return $d(Se,Ss(q,0,Se.length))}function Nu(D,q,Se,Ye){if(!mc(D))return D;q=Sh(q,D);for(var _t=-1,Xt=q.length,Sr=Xt-1,Ur=D;Ur!=null&&++_t<Xt;){var on=Gi(q[_t]),hi=Se;if(on==="__proto__"||on==="constructor"||on==="prototype")return D;if(_t!=Sr){var ui=Ur[on];hi=Ye?Ye(ui,on,Ur):e,hi===e&&(hi=mc(ui)?ui:Ih(q[_t+1])?[]:{})}Nr(Ur,on,hi),Ur=Ur[on]}return D}var Po=Uh?function(D,q){return Uh.set(D,q),D}:ah,Ar=jh?function(D,q){return jh(D,"toString",{configurable:!0,enumerable:!1,value:hA(q),writable:!0})}:ah;function qp(D){return $d(Pp(D))}function Pc(D,q,Se){var Ye=-1,_t=D.length;q<0&&(q=-q>_t?0:_t+q),Se=Se>_t?_t:Se,Se<0&&(Se+=_t),_t=q>Se?0:Se-q>>>0,q>>>=0;for(var Xt=Cr(_t);++Ye<_t;)Xt[Ye]=D[Ye+q];return Xt}function od(D,q){var Se;return Go(D,function(Ye,_t,Xt){return Se=q(Ye,_t,Xt),!Se}),!!Se}function Gc(D,q,Se){var Ye=0,_t=D==null?Ye:D.length;if(typeof q=="number"&&q===q&&_t<=xe){for(;Ye<_t;){var Xt=Ye+_t>>>1,Sr=D[Xt];Sr!==null&&!Gh(Sr)&&(Se?Sr<=q:Sr<q)?Ye=Xt+1:_t=Xt}return _t}return Dd(D,q,ah,Se)}function Dd(D,q,Se,Ye){var _t=0,Xt=D==null?0:D.length;if(Xt===0)return 0;q=Se(q);for(var Sr=q!==q,Ur=q===null,on=Gh(q),hi=q===e;_t<Xt;){var ui=Zf((_t+Xt)/2),bi=Se(D[ui]),cs=bi!==e,Fs=bi===null,mo=bi===bi,Ko=Gh(bi);if(Sr)var ao=Ye||mo;else hi?ao=mo&&(Ye||cs):Ur?ao=mo&&cs&&(Ye||!Fs):on?ao=mo&&cs&&!Fs&&(Ye||!Ko):Fs||Ko?ao=!1:ao=Ye?bi<=q:bi<q;ao?_t=ui+1:Xt=ui}return kl(Xt,J)}function sf(D,q){for(var Se=-1,Ye=D.length,_t=0,Xt=[];++Se<Ye;){var Sr=D[Se],Ur=q?q(Sr):Sr;if(!Se||!md(Ur,on)){var on=Ur;Xt[_t++]=Sr===0?0:Sr}}return Xt}function of(D){return typeof D=="number"?D:Gh(D)?Y:+D}function To(D){if(typeof D=="string")return D;if(Oo(D))return ei(D,To)+"";if(Gh(D))return rc?rc.call(D):"";var q=D+"";return q=="0"&&1/D==-R?"-0":q}function ju(D,q,Se){var Ye=-1,_t=cn,Xt=D.length,Sr=!0,Ur=[],on=Ur;if(Se)Sr=!1,_t=Hr;else if(Xt>=o){var hi=q?null:Zp(D);if(hi)return Ca(hi);Sr=!1,_t=Ii,on=new ke}else on=q?[]:Ur;e:for(;++Ye<Xt;){var ui=D[Ye],bi=q?q(ui):ui;if(ui=Se||ui!==0?ui:0,Sr&&bi===bi){for(var cs=on.length;cs--;)if(on[cs]===bi)continue e;q&&on.push(bi),Ur.push(ui)}else _t(on,bi,Se)||(on!==Ur&&on.push(bi),Ur.push(ui))}return Ur}function Hh(D,q){return q=Sh(q,D),D=Hu(D,q),D==null||delete D[Gi(dr(q))]}function Nf(D,q,Se,Ye){return Nu(D,q,Se(Ra(D,q)),Ye)}function bh(D,q,Se,Ye){for(var _t=D.length,Xt=Ye?_t:-1;(Ye?Xt--:++Xt<_t)&&q(D[Xt],Xt,D););return Se?Pc(D,Ye?0:Xt,Ye?Xt+1:_t):Pc(D,Ye?Xt+1:0,Ye?_t:Xt)}function vu(D,q){var Se=D;return Se instanceof Bo&&(Se=Se.value()),vs(q,function(Ye,_t){return _t.func.apply(_t.thisArg,Ti([Ye],_t.args))},Se)}function ih(D,q,Se){var Ye=D.length;if(Ye<2)return Ye?ju(D[0]):[];for(var _t=-1,Xt=Cr(Ye);++_t<Ye;)for(var Sr=D[_t],Ur=-1;++Ur<Ye;)Ur!=_t&&(Xt[_t]=fi(Xt[_t]||Sr,D[Ur],q,Se));return ju(Wo(Xt,1),q,Se)}function Uu(D,q,Se){for(var Ye=-1,_t=D.length,Xt=q.length,Sr={};++Ye<_t;){var Ur=Ye<Xt?q[Ye]:e;Se(Sr,D[Ye],Ur)}return Sr}function xh(D){return $c(D)?D:[]}function wh(D){return typeof D=="function"?D:ah}function Sh(D,q){return Oo(D)?D:Mh(D,q)?[D]:Oc(_l(D))}var bm=eo;function el(D,q,Se){var Ye=D.length;return Se=Se===e?Ye:Se,!q&&Se>=Ye?D:Pc(D,q,Se)}var vp=Td||function(D){return go.clearTimeout(D)};function Rd(D,q){if(q)return D.slice();var Se=D.length,Ye=Yh?Yh(Se):new D.constructor(Se);return D.copy(Ye),Ye}function No(D){var q=new D.constructor(D.byteLength);return new Il(q).set(new Il(D)),q}function Gs(D,q){var Se=q?No(D.buffer):D.buffer;return new D.constructor(Se,D.byteOffset,D.byteLength)}function OA(D){var q=new D.constructor(D.source,pn.exec(D));return q.lastIndex=D.lastIndex,q}function Wc(D){return su?Oi(su.call(D)):{}}function Nd(D,q){var Se=q?No(D.buffer):D.buffer;return new D.constructor(Se,D.byteOffset,D.length)}function jd(D,q){if(D!==q){var Se=D!==e,Ye=D===null,_t=D===D,Xt=Gh(D),Sr=q!==e,Ur=q===null,on=q===q,hi=Gh(q);if(!Ur&&!hi&&!Xt&&D>q||Xt&&Sr&&on&&!Ur&&!hi||Ye&&Sr&&on||!Se&&on||!_t)return 1;if(!Ye&&!Xt&&!hi&&D<q||hi&&Se&&_t&&!Ye&&!Xt||Ur&&Se&&_t||!Sr&&_t||!on)return-1}return 0}function Ud(D,q,Se){for(var Ye=-1,_t=D.criteria,Xt=q.criteria,Sr=_t.length,Ur=Se.length;++Ye<Sr;){var on=jd(_t[Ye],Xt[Ye]);if(on){if(Ye>=Ur)return on;var hi=Se[Ye];return on*(hi=="desc"?-1:1)}}return D.index-q.index}function DA(D,q,Se,Ye){for(var _t=-1,Xt=D.length,Sr=Se.length,Ur=-1,on=q.length,hi=Ul(Xt-Sr,0),ui=Cr(on+hi),bi=!Ye;++Ur<on;)ui[Ur]=q[Ur];for(;++_t<Sr;)(bi||_t<Xt)&&(ui[Se[_t]]=D[_t]);for(;hi--;)ui[Ur++]=D[_t++];return ui}function zd(D,q,Se,Ye){for(var _t=-1,Xt=D.length,Sr=-1,Ur=Se.length,on=-1,hi=q.length,ui=Ul(Xt-Ur,0),bi=Cr(ui+hi),cs=!Ye;++_t<ui;)bi[_t]=D[_t];for(var Fs=_t;++on<hi;)bi[Fs+on]=q[on];for(;++Sr<Ur;)(cs||_t<Xt)&&(bi[Fs+Se[Sr]]=D[_t++]);return bi}function nc(D,q){var Se=-1,Ye=D.length;for(q||(q=Cr(Ye));++Se<Ye;)q[Se]=D[Se];return q}function sh(D,q,Se,Ye){var _t=!Se;Se||(Se={});for(var Xt=-1,Sr=q.length;++Xt<Sr;){var Ur=q[Xt],on=Ye?Ye(Se[Ur],D[Ur],Ur,Se,D):e;on===e&&(on=D[Ur]),_t?Ni(Se,Ur,on):Nr(Se,Ur,on)}return Se}function zu(D,q){return sh(D,Gd(D),q)}function af(D,q){return sh(D,wo(D),q)}function lf(D,q){return function(Se,Ye){var _t=Oo(Se)?Er:ri,Xt=q?q():{};return _t(Se,D,ls(Ye,2),Xt)}}function cf(D){return eo(function(q,Se){var Ye=-1,_t=Se.length,Xt=_t>1?Se[_t-1]:e,Sr=_t>2?Se[2]:e;for(Xt=D.length>3&&typeof Xt=="function"?(_t--,Xt):e,Sr&&Io(Se[0],Se[1],Sr)&&(Xt=_t<3?e:Xt,_t=1),q=Oi(q);++Ye<_t;){var Ur=Se[Ye];Ur&&D(q,Ur,Ye,Xt)}return q})}function bp(D,q){return function(Se,Ye){if(Se==null)return Se;if(!pf(Se))return D(Se,Ye);for(var _t=Se.length,Xt=q?_t:-1,Sr=Oi(Se);(q?Xt--:++Xt<_t)&&Ye(Sr[Xt],Xt,Sr)!==!1;);return Se}}function Hd(D){return function(q,Se,Ye){for(var _t=-1,Xt=Oi(q),Sr=Ye(q),Ur=Sr.length;Ur--;){var on=Sr[D?Ur:++_t];if(Se(Xt[on],on,Xt)===!1)break}return q}}function Qh(D,q,Se){var Ye=q&v,_t=Qd(D);function Xt(){var Sr=this&&this!==go&&this instanceof Xt?_t:D;return Sr.apply(Ye?Se:this,arguments)}return Xt}function Yp(D){return function(q){q=_l(q);var Se=Us(q)?bo(q):e,Ye=Se?Se[0]:q.charAt(0),_t=Se?el(Se,1).join(""):q.slice(1);return Ye[D]()+_t}}function cu(D){return function(q){return vs(_2(u_(q).replace(bs,"")),D,"")}}function Qd(D){return function(){var q=arguments;switch(q.length){case 0:return new D;case 1:return new D(q[0]);case 2:return new D(q[0],q[1]);case 3:return new D(q[0],q[1],q[2]);case 4:return new D(q[0],q[1],q[2],q[3]);case 5:return new D(q[0],q[1],q[2],q[3],q[4]);case 6:return new D(q[0],q[1],q[2],q[3],q[4],q[5]);case 7:return new D(q[0],q[1],q[2],q[3],q[4],q[5],q[6])}var Se=mh(D.prototype),Ye=D.apply(Se,q);return mc(Ye)?Ye:Se}}function RA(D,q,Se){var Ye=Qd(D);function _t(){for(var Xt=arguments.length,Sr=Cr(Xt),Ur=Xt,on=ud(_t);Ur--;)Sr[Ur]=arguments[Ur];var hi=Xt<3&&Sr[0]!==on&&Sr[Xt-1]!==on?[]:Va(Sr,on);if(Xt-=hi.length,Xt<Se)return ff(D,q,Lo,_t.placeholder,e,Sr,hi,e,e,Se-Xt);var ui=this&&this!==go&&this instanceof _t?Ye:D;return at(ui,this,Sr)}return _t}function ad(D){return function(q,Se,Ye){var _t=Oi(q);if(!pf(q)){var Xt=ls(Se,3);q=Kc(q),Se=function(Ur){return Xt(_t[Ur],Ur,_t)}}var Sr=D(q,Se,Ye);return Sr>-1?_t[Xt?q[Sr]:Sr]:e}}function Ch(D){return Eh(function(q){var Se=q.length,Ye=Se,_t=ou.prototype.thru;for(D&&q.reverse();Ye--;){var Xt=q[Ye];if(typeof Xt!="function")throw new Js(l);if(_t&&!Sr&&Bh(Xt)=="wrapper")var Sr=new ou([],!0)}for(Ye=Sr?Ye:Se;++Ye<Se;){Xt=q[Ye];var Ur=Bh(Xt),on=Ur=="wrapper"?UA(Xt):e;on&&zf(on[0])&&on[1]==(Q|F|V|ee)&&!on[4].length&&on[9]==1?Sr=Sr[Bh(on[0])].apply(Sr,on[3]):Sr=Xt.length==1&&zf(Xt)?Sr[Ur]():Sr.thru(Xt)}return function(){var hi=arguments,ui=hi[0];if(Sr&&hi.length==1&&Oo(ui))return Sr.plant(ui).value();for(var bi=0,cs=Se?q[bi].apply(this,hi):ui;++bi<Se;)cs=q[bi].call(this,cs);return cs}})}function Lo(D,q,Se,Ye,_t,Xt,Sr,Ur,on,hi){var ui=q&Q,bi=q&v,cs=q&S,Fs=q&(F|O),mo=q&ne,Ko=cs?e:Qd(D);function ao(){for(var ua=arguments.length,ta=Cr(ua),$h=ua;$h--;)ta[$h]=arguments[$h];if(Fs)var Kh=ud(ao),Af=Ai(ta,Kh);if(Ye&&(ta=DA(ta,Ye,_t,Fs)),Xt&&(ta=zd(ta,Xt,Sr,Fs)),ua-=Af,Fs&&ua<hi){var qc=Va(ta,Kh);return ff(D,q,Lo,ao.placeholder,Se,ta,qc,Ur,on,hi-ua)}var Yd=bi?Se:this,fA=cs?Yd[D]:D;return ua=ta.length,Ur?ta=oh(ta,Ur):mo&&ua>1&&ta.reverse(),ui&&on<ua&&(ta.length=on),this&&this!==go&&this instanceof ao&&(fA=Ko||Qd(fA)),fA.apply(Yd,ta)}return ao}function uf(D,q){return function(Se,Ye){return fl(Se,D,q(Ye),{})}}function xp(D,q){return function(Se,Ye){var _t;if(Se===e&&Ye===e)return q;if(Se!==e&&(_t=Se),Ye!==e){if(_t===e)return Ye;typeof Se=="string"||typeof Ye=="string"?(Se=To(Se),Ye=To(Ye)):(Se=of(Se),Ye=of(Ye)),_t=D(Se,Ye)}return _t}}function Xp(D){return Eh(function(q){return q=ei(q,Sn(ls())),eo(function(Se){var Ye=this;return D(q,function(_t){return at(_t,Ye,Se)})})})}function hf(D,q){q=q===e?" ":To(q);var Se=q.length;if(Se<2)return Se?Ru(q,D):q;var Ye=Ru(q,Xf(D/Ga(q)));return Us(q)?el(bo(Ye),0,D).join(""):Ye.slice(0,D)}function xm(D,q,Se,Ye){var _t=q&v,Xt=Qd(D);function Sr(){for(var Ur=-1,on=arguments.length,hi=-1,ui=Ye.length,bi=Cr(ui+on),cs=this&&this!==go&&this instanceof Sr?Xt:D;++hi<ui;)bi[hi]=Ye[hi];for(;on--;)bi[hi++]=arguments[++Ur];return at(cs,_t?Se:this,bi)}return Sr}function Vd(D){return function(q,Se,Ye){return Ye&&typeof Ye!="number"&&Io(q,Se,Ye)&&(Se=Ye=e),q=uA(q),Se===e?(Se=q,q=0):Se=uA(Se),Ye=Ye===e?q<Se?1:-1:uA(Ye),Bl(q,Se,Ye,D)}}function ld(D){return function(q,Se){return typeof q=="string"&&typeof Se=="string"||(q=Vf(q),Se=Vf(Se)),D(q,Se)}}function ff(D,q,Se,Ye,_t,Xt,Sr,Ur,on,hi){var ui=q&F,bi=ui?Sr:e,cs=ui?e:Sr,Fs=ui?Xt:e,mo=ui?e:Xt;q|=ui?V:X,q&=~(ui?X:V),q&B||(q&=-4);var Ko=[D,q,_t,Fs,bi,mo,cs,Ur,on,hi],ao=Se.apply(e,Ko);return zf(D)&&Qu(ao,Ko),ao.placeholder=Ye,VA(ao,D,q)}function wp(D){var q=es[D];return function(Se,Ye){if(Se=Vf(Se),Ye=Ye==null?0:kl(to(Ye),292),Ye&&PA(Se)){var _t=(_l(Se)+"e").split("e"),Xt=q(_t[0]+"e"+(+_t[1]+Ye));return _t=(_l(Xt)+"e").split("e"),+(_t[0]+"e"+(+_t[1]-Ye))}return q(Se)}}var Zp=Lf&&1/Ca(new Lf([,-0]))[1]==R?function(D){return new Lf(D)}:ZA;function Sp(D){return function(q){var Se=Lc(q);return Se==st?Sa(q):Se==kt?yu(q):Vo(q,D(q))}}function bu(D,q,Se,Ye,_t,Xt,Sr,Ur){var on=q&S;if(!on&&typeof D!="function")throw new Js(l);var hi=Ye?Ye.length:0;if(hi||(q&=-97,Ye=_t=e),Sr=Sr===e?Sr:Ul(to(Sr),0),Ur=Ur===e?Ur:to(Ur),hi-=_t?_t.length:0,q&X){var ui=Ye,bi=_t;Ye=_t=e}var cs=on?e:UA(D),Fs=[D,q,Se,Ye,_t,ui,bi,Xt,Sr,Ur];if(cs&&iA(Fs,cs),D=Fs[0],q=Fs[1],Se=Fs[2],Ye=Fs[3],_t=Fs[4],Ur=Fs[9]=Fs[9]===e?on?0:D.length:Ul(Fs[9]-hi,0),!Ur&&q&(F|O)&&(q&=-25),!q||q==v)var mo=Qh(D,q,Se);else q==F||q==O?mo=RA(D,q,Ur):(q==V||q==(v|V))&&!_t.length?mo=xm(D,q,Se,Ye):mo=Lo.apply(e,Fs);var Ko=cs?Po:Qu;return VA(Ko(mo,Fs),D,q)}function NA(D,q,Se,Ye){return D===e||md(D,Ea[Se])&&!Vs.call(Ye,Se)?q:D}function cd(D,q,Se,Ye,_t,Xt){return mc(D)&&mc(q)&&(Xt.set(q,D),Vc(D,q,e,cd,Xt),Xt.delete(q)),D}function Cp(D){return KA(D)?e:D}function jA(D,q,Se,Ye,_t,Xt){var Sr=Se&b,Ur=D.length,on=q.length;if(Ur!=on&&!(Sr&&on>Ur))return!1;var hi=Xt.get(D),ui=Xt.get(q);if(hi&&ui)return hi==q&&ui==D;var bi=-1,cs=!0,Fs=Se&x?new ke:e;for(Xt.set(D,q),Xt.set(q,D);++bi<Ur;){var mo=D[bi],Ko=q[bi];if(Ye)var ao=Sr?Ye(Ko,mo,bi,q,D,Xt):Ye(mo,Ko,bi,D,q,Xt);if(ao!==e){if(ao)continue;cs=!1;break}if(Fs){if(!Fe(q,function(ua,ta){if(!Ii(Fs,ta)&&(mo===ua||_t(mo,ua,Se,Ye,Xt)))return Fs.push(ta)})){cs=!1;break}}else if(!(mo===Ko||_t(mo,Ko,Se,Ye,Xt))){cs=!1;break}}return Xt.delete(D),Xt.delete(q),cs}function Jp(D,q,Se,Ye,_t,Xt,Sr){switch(Se){case Jt:if(D.byteLength!=q.byteLength||D.byteOffset!=q.byteOffset)return!1;D=D.buffer,q=q.buffer;case jt:return!(D.byteLength!=q.byteLength||!Xt(new Il(D),new Il(q)));case re:case ie:case ot:return md(+D,+q);case He:return D.name==q.name&&D.message==q.message;case Nt:case Gt:return D==q+"";case st:var Ur=Sa;case kt:var on=Ye&b;if(Ur||(Ur=Ca),D.size!=q.size&&!on)return!1;var hi=Sr.get(D);if(hi)return hi==q;Ye|=x,Sr.set(D,q);var ui=jA(Ur(D),Ur(q),Ye,_t,Xt,Sr);return Sr.delete(D),ui;case fr:if(su)return su.call(D)==su.call(q)}return!1}function eA(D,q,Se,Ye,_t,Xt){var Sr=Se&b,Ur=tA(D),on=Ur.length,hi=tA(q),ui=hi.length;if(on!=ui&&!Sr)return!1;for(var bi=on;bi--;){var cs=Ur[bi];if(!(Sr?cs in q:Vs.call(q,cs)))return!1}var Fs=Xt.get(D),mo=Xt.get(q);if(Fs&&mo)return Fs==q&&mo==D;var Ko=!0;Xt.set(D,q),Xt.set(q,D);for(var ao=Sr;++bi<on;){cs=Ur[bi];var ua=D[cs],ta=q[cs];if(Ye)var $h=Sr?Ye(ta,ua,cs,q,D,Xt):Ye(ua,ta,cs,D,q,Xt);if(!($h===e?ua===ta||_t(ua,ta,Se,Ye,Xt):$h)){Ko=!1;break}ao||(ao=cs=="constructor")}if(Ko&&!ao){var Kh=D.constructor,Af=q.constructor;Kh!=Af&&"constructor"in D&&"constructor"in q&&!(typeof Kh=="function"&&Kh instanceof Kh&&typeof Af=="function"&&Af instanceof Af)&&(Ko=!1)}return Xt.delete(D),Xt.delete(q),Ko}function Eh(D){return Cm(df(D,e,qe),D+"")}function tA(D){return $l(D,Kc,Gd)}function rA(D){return $l(D,Wh,wo)}var UA=Uh?function(D){return Uh.get(D)}:ZA;function Bh(D){for(var q=D.name+"",Se=zh[q],Ye=Vs.call(zh,q)?Se.length:0;Ye--;){var _t=Se[Ye],Xt=_t.func;if(Xt==null||Xt==D)return _t.name}return q}function ud(D){var q=Vs.call(Ot,"placeholder")?Ot:D;return q.placeholder}function ls(){var D=Ot.iteratee||A_;return D=D===A_?kd:D,arguments.length?D(arguments[0],arguments[1]):D}function Vh(D,q){var Se=D.__data__;return Ep(q)?Se[typeof q=="string"?"string":"hash"]:Se.map}function jf(D){for(var q=Kc(D),Se=q.length;Se--;){var Ye=q[Se],_t=D[Ye];q[Se]=[Ye,_t,og(_t)]}return q}function xu(D,q){var Se=al(D,q);return yh(Se)?Se:e}function hd(D){var q=Vs.call(D,_u),Se=D[_u];try{D[_u]=e;var Ye=!0}catch{}var _t=tn.call(D);return Ye&&(q?D[_u]=Se:delete D[_u]),_t}var Gd=Jf?function(D){return D==null?[]:(D=Oi(D),Hn(Jf(D),function(q){return yl.call(D,q)}))}:j1,wo=Jf?function(D){for(var q=[];D;)Ti(q,Gd(D)),D=nu(D);return q}:j1,Lc=Ja;(Xu&&Lc(new Xu(new ArrayBuffer(1)))!=Jt||ku&&Lc(new ku)!=st||Jh&&Lc(Jh.resolve())!=bt||Lf&&Lc(new Lf)!=kt||ef&&Lc(new ef)!=yr)&&(Lc=function(D){var q=Ja(D),Se=q==Ze?D.constructor:e,Ye=Se?C(Se):"";if(Ye)switch(Ye){case up:return Jt;case Ah:return st;case iu:return bt;case Ic:return kt;case kA:return yr}return q});function ig(D,q,Se){for(var Ye=-1,_t=Se.length;++Ye<_t;){var Xt=Se[Ye],Sr=Xt.size;switch(Xt.type){case"drop":D+=Sr;break;case"dropRight":q-=Sr;break;case"take":q=kl(q,D+Sr);break;case"takeRight":D=Ul(D,q-Sr);break}}return{start:D,end:q}}function zA(D){var q=D.match(Ct);return q?q[1].split(rr):[]}function HA(D,q,Se){q=Sh(q,D);for(var Ye=-1,_t=q.length,Xt=!1;++Ye<_t;){var Sr=Gi(q[Ye]);if(!(Xt=D!=null&&Se(D,Sr)))break;D=D[Sr]}return Xt||++Ye!=_t?Xt:(_t=D==null?0:D.length,!!_t&&B1(_t)&&Ih(Sr,_t)&&(Oo(D)||Ql(D)))}function Uf(D){var q=D.length,Se=new D.constructor(q);return q&&typeof D[0]=="string"&&Vs.call(D,"index")&&(Se.index=D.index,Se.input=D.input),Se}function Wd(D){return typeof D.constructor=="function"&&!Hf(D)?mh(nu(D)):{}}function QA(D,q,Se){var Ye=D.constructor;switch(q){case jt:return No(D);case re:case ie:return new Ye(+D);case Jt:return Gs(D,Se);case pr:case Ft:case er:case ur:case Yt:case mr:case Mr:case sn:case Un:return Nd(D,Se);case st:return new Ye;case ot:case Gt:return new Ye(D);case Nt:return OA(D);case kt:return new Ye;case fr:return Wc(D)}}function fd(D,q){var Se=q.length;if(!Se)return D;var Ye=Se-1;return q[Ye]=(Se>1?"& ":"")+q[Ye],q=q.join(Se>2?", ":" "),D.replace(nt,`{
/* [wrapped with `+q+`] */
`)}function Th(D){return Oo(D)||Ql(D)||!!(Bd&&D&&D[Bd])}function Ih(D,q){var Se=typeof D;return q=q??N,!!q&&(Se=="number"||Se!="symbol"&&Di.test(D))&&D>-1&&D%1==0&&D<q}function Io(D,q,Se){if(!mc(Se))return!1;var Ye=typeof q;return(Ye=="number"?pf(Se)&&Ih(q,Se.length):Ye=="string"&&q in Se)?md(Se[q],D):!1}function Mh(D,q){if(Oo(D))return!1;var Se=typeof D;return Se=="number"||Se=="symbol"||Se=="boolean"||D==null||Gh(D)?!0:li.test(D)||!Qs.test(D)||q!=null&&D in Oi(q)}function Ep(D){var q=typeof D;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?D!=="__proto__":D===null}function zf(D){var q=Bh(D),Se=Ot[q];if(typeof Se!="function"||!(q in Bo.prototype))return!1;if(D===Se)return!0;var Ye=UA(Se);return!!Ye&&D===Ye[0]}function wm(D){return!!pc&&pc in D}var sg=Wa?cA:E0;function Hf(D){var q=D&&D.constructor,Se=typeof q=="function"&&q.prototype||Ea;return D===Se}function og(D){return D===D&&!mc(D)}function Sm(D,q){return function(Se){return Se==null?!1:Se[D]===q&&(q!==e||D in Oi(Se))}}function nA(D){var q=h0(D,function(Ye){return Se.size===f&&Se.clear(),Ye}),Se=q.cache;return q}function iA(D,q){var Se=D[1],Ye=q[1],_t=Se|Ye,Xt=_t<(v|S|Q),Sr=Ye==Q&&Se==F||Ye==Q&&Se==ee&&D[7].length<=q[8]||Ye==(Q|ee)&&q[7].length<=q[8]&&Se==F;if(!(Xt||Sr))return D;Ye&v&&(D[2]=q[2],_t|=Se&v?0:B);var Ur=q[3];if(Ur){var on=D[3];D[3]=on?DA(on,Ur,q[4]):Ur,D[4]=on?Va(D[3],p):q[4]}return Ur=q[5],Ur&&(on=D[5],D[5]=on?zd(on,Ur,q[6]):Ur,D[6]=on?Va(D[5],p):q[6]),Ur=q[7],Ur&&(D[7]=Ur),Ye&Q&&(D[8]=D[8]==null?q[8]:kl(D[8],q[8])),D[9]==null&&(D[9]=q[9]),D[0]=q[0],D[1]=_t,D}function Bp(D){var q=[];if(D!=null)for(var Se in Oi(D))q.push(Se);return q}function Tp(D){return tn.call(D)}function df(D,q,Se){return q=Ul(q===e?D.length-1:q,0),function(){for(var Ye=arguments,_t=-1,Xt=Ul(Ye.length-q,0),Sr=Cr(Xt);++_t<Xt;)Sr[_t]=Ye[q+_t];_t=-1;for(var Ur=Cr(q+1);++_t<q;)Ur[_t]=Ye[_t];return Ur[q]=Se(Sr),at(D,this,Ur)}}function Hu(D,q){return q.length<2?D:Ra(D,Pc(q,0,-1))}function oh(D,q){for(var Se=D.length,Ye=kl(q.length,Se),_t=nc(D);Ye--;){var Xt=q[Ye];D[Ye]=Ih(Xt,Se)?_t[Xt]:e}return D}function kc(D,q){if(!(q==="constructor"&&typeof D[q]=="function")&&q!="__proto__")return D[q]}var Qu=ag(Po),sA=FA||function(D,q){return go.setTimeout(D,q)},Cm=ag(Ar);function VA(D,q,Se){var Ye=q+"";return Cm(D,fd(Ye,c(zA(Ye),Se)))}function ag(D){var q=0,Se=0;return function(){var Ye=cp(),_t=G-(Ye-Se);if(Se=Ye,_t>0){if(++q>=ce)return arguments[0]}else q=0;return D.apply(e,arguments)}}function $d(D,q){var Se=-1,Ye=D.length,_t=Ye-1;for(q=q===e?Ye:q;++Se<q;){var Xt=sd(Se,_t),Sr=D[Xt];D[Xt]=D[Se],D[Se]=Sr}return D.length=q,D}var Oc=nA(function(D){var q=[];return D.charCodeAt(0)===46&&q.push(""),D.replace(Qt,function(Se,Ye,_t,Xt){q.push(_t?Xt.replace(Fr,"$1"):Ye||Se)}),q});function Gi(D){if(typeof D=="string"||Gh(D))return D;var q=D+"";return q=="0"&&1/D==-R?"-0":q}function C(D){if(D!=null){try{return Ll.call(D)}catch{}try{return D+""}catch{}}return""}function c(D,q){return hr(Te,function(Se){var Ye="_."+Se[0];q&Se[1]&&!cn(D,Ye)&&D.push(Ye)}),D.sort()}function A(D){if(D instanceof Bo)return D.clone();var q=new ou(D.__wrapped__,D.__chain__);return q.__actions__=nc(D.__actions__),q.__index__=D.__index__,q.__values__=D.__values__,q}function E(D,q,Se){(Se?Io(D,q,Se):q===e)?q=1:q=Ul(to(q),0);var Ye=D==null?0:D.length;if(!Ye||q<1)return[];for(var _t=0,Xt=0,Sr=Cr(Xf(Ye/q));_t<Ye;)Sr[Xt++]=Pc(D,_t,_t+=q);return Sr}function M(D){for(var q=-1,Se=D==null?0:D.length,Ye=0,_t=[];++q<Se;){var Xt=D[q];Xt&&(_t[Ye++]=Xt)}return _t}function P(){var D=arguments.length;if(!D)return[];for(var q=Cr(D-1),Se=arguments[0],Ye=D;Ye--;)q[Ye-1]=arguments[Ye];return Ti(Oo(Se)?nc(Se):[Se],Wo(q,1))}var j=eo(function(D,q){return $c(D)?fi(D,Wo(q,1,$c,!0)):[]}),K=eo(function(D,q){var Se=dr(q);return $c(Se)&&(Se=e),$c(D)?fi(D,Wo(q,1,$c,!0),ls(Se,2)):[]}),te=eo(function(D,q){var Se=dr(q);return $c(Se)&&(Se=e),$c(D)?fi(D,Wo(q,1,$c,!0),e,Se):[]});function ge(D,q,Se){var Ye=D==null?0:D.length;return Ye?(q=Se||q===e?1:to(q),Pc(D,q<0?0:q,Ye)):[]}function ve(D,q,Se){var Ye=D==null?0:D.length;return Ye?(q=Se||q===e?1:to(q),q=Ye-q,Pc(D,0,q<0?0:q)):[]}function Me(D,q){return D&&D.length?bh(D,ls(q,3),!0,!0):[]}function Ce(D,q){return D&&D.length?bh(D,ls(q,3),!0):[]}function Pe(D,q,Se,Ye){var _t=D==null?0:D.length;return _t?(Se&&typeof Se!="number"&&Io(D,q,Se)&&(Se=0,Ye=_t),Qc(D,q,Se,Ye)):[]}function Qe(D,q,Se){var Ye=D==null?0:D.length;if(!Ye)return-1;var _t=Se==null?0:to(Se);return _t<0&&(_t=Ul(Ye+_t,0)),Zr(D,ls(q,3),_t)}function je(D,q,Se){var Ye=D==null?0:D.length;if(!Ye)return-1;var _t=Ye-1;return Se!==e&&(_t=to(Se),_t=Se<0?Ul(Ye+_t,0):kl(_t,Ye-1)),Zr(D,ls(q,3),_t,!0)}function qe(D){var q=D==null?0:D.length;return q?Wo(D,1):[]}function Ke(D){var q=D==null?0:D.length;return q?Wo(D,R):[]}function lt(D,q){var Se=D==null?0:D.length;return Se?(q=q===e?1:to(q),Wo(D,q)):[]}function dt(D){for(var q=-1,Se=D==null?0:D.length,Ye={};++q<Se;){var _t=D[q];Ye[_t[0]]=_t[1]}return Ye}function vt(D){return D&&D.length?D[0]:e}function Tt(D,q,Se){var Ye=D==null?0:D.length;if(!Ye)return-1;var _t=Se==null?0:to(Se);return _t<0&&(_t=Ul(Ye+_t,0)),Gn(D,q,_t)}function Dt(D){var q=D==null?0:D.length;return q?Pc(D,0,-1):[]}var Vt=eo(function(D){var q=ei(D,xh);return q.length&&q[0]===D[0]?Xn(q):[]}),It=eo(function(D){var q=dr(D),Se=ei(D,xh);return q===dr(Se)?q=e:Se.pop(),Se.length&&Se[0]===D[0]?Xn(Se,ls(q,2)):[]}),Mt=eo(function(D){var q=dr(D),Se=ei(D,xh);return q=typeof q=="function"?q:e,q&&Se.pop(),Se.length&&Se[0]===D[0]?Xn(Se,e,q):[]});function Pt(D,q){return D==null?"":lp.call(D,q)}function dr(D){var q=D==null?0:D.length;return q?D[q-1]:e}function sr(D,q,Se){var Ye=D==null?0:D.length;if(!Ye)return-1;var _t=Ye;return Se!==e&&(_t=to(Se),_t=_t<0?Ul(Ye+_t,0):kl(_t,Ye-1)),q===q?ec(D,q,_t):Zr(D,ps,_t,!0)}function Qr(D,q){return D&&D.length?_p(D,to(q)):e}var Br=eo(Jr);function Jr(D,q){return D&&D.length&&q&&q.length?nf(D,q):D}function yn(D,q,Se){return D&&D.length&&q&&q.length?nf(D,q,ls(Se,2)):D}function vr(D,q,Se){return D&&D.length&&q&&q.length?nf(D,q,e,Se):D}var qt=Eh(function(D,q){var Se=D==null?0:D.length,Ye=Fi(D,q);return id(D,ei(q,function(_t){return Ih(_t,Se)?+_t:_t}).sort(jd)),Ye});function kr(D,q){var Se=[];if(!(D&&D.length))return Se;var Ye=-1,_t=[],Xt=D.length;for(q=ls(q,3);++Ye<Xt;){var Sr=D[Ye];q(Sr,Ye,D)&&(Se.push(Sr),_t.push(Ye))}return id(D,_t),Se}function br(D){return D==null?D:Zh.call(D)}function an(D,q,Se){var Ye=D==null?0:D.length;return Ye?(Se&&typeof Se!="number"&&Io(D,q,Se)?(q=0,Se=Ye):(q=q==null?0:to(q),Se=Se===e?Ye:to(Se)),Pc(D,q,Se)):[]}function ln(D,q){return Gc(D,q)}function dn(D,q,Se){return Dd(D,q,ls(Se,2))}function Mn(D,q){var Se=D==null?0:D.length;if(Se){var Ye=Gc(D,q);if(Ye<Se&&md(D[Ye],q))return Ye}return-1}function di(D,q){return Gc(D,q,!0)}function Ci(D,q,Se){return Dd(D,q,ls(Se,2),!0)}function ti(D,q){var Se=D==null?0:D.length;if(Se){var Ye=Gc(D,q,!0)-1;if(md(D[Ye],q))return Ye}return-1}function xi(D){return D&&D.length?sf(D):[]}function vi(D,q){return D&&D.length?sf(D,ls(q,2)):[]}function qi(D){var q=D==null?0:D.length;return q?Pc(D,1,q):[]}function fs(D,q,Se){return D&&D.length?(q=Se||q===e?1:to(q),Pc(D,0,q<0?0:q)):[]}function Bs(D,q,Se){var Ye=D==null?0:D.length;return Ye?(q=Se||q===e?1:to(q),q=Ye-q,Pc(D,q<0?0:q,Ye)):[]}function no(D,q){return D&&D.length?bh(D,ls(q,3),!1,!0):[]}function rs(D,q){return D&&D.length?bh(D,ls(q,3)):[]}var io=eo(function(D){return ju(Wo(D,1,$c,!0))}),fo=eo(function(D){var q=dr(D);return $c(q)&&(q=e),ju(Wo(D,1,$c,!0),ls(q,2))}),ko=eo(function(D){var q=dr(D);return q=typeof q=="function"?q:e,ju(Wo(D,1,$c,!0),e,q)});function Cs(D){return D&&D.length?ju(D):[]}function so(D,q){return D&&D.length?ju(D,ls(q,2)):[]}function he(D,q){return q=typeof q=="function"?q:e,D&&D.length?ju(D,e,q):[]}function le(D){if(!(D&&D.length))return[];var q=0;return D=Hn(D,function(Se){if($c(Se))return q=Ul(Se.length,q),!0}),Qo(q,function(Se){return ei(D,Ns(Se))})}function ye(D,q){if(!(D&&D.length))return[];var Se=le(D);return q==null?Se:ei(Se,function(Ye){return at(q,e,Ye)})}var _e=eo(function(D,q){return $c(D)?fi(D,q):[]}),De=eo(function(D){return ih(Hn(D,$c))}),it=eo(function(D){var q=dr(D);return $c(q)&&(q=e),ih(Hn(D,$c),ls(q,2))}),At=eo(function(D){var q=dr(D);return q=typeof q=="function"?q:e,ih(Hn(D,$c),e,q)}),Rt=eo(le);function zt(D,q){return Uu(D||[],q||[],Nr)}function Ir(D,q){return Uu(D||[],q||[],Nu)}var Or=eo(function(D){var q=D.length,Se=q>1?D[q-1]:e;return Se=typeof Se=="function"?(D.pop(),Se):e,ye(D,Se)});function Xr(D){var q=Ot(D);return q.__chain__=!0,q}function Fn(D,q){return q(D),D}function Vi(D,q){return q(D)}var wi=Eh(function(D){var q=D.length,Se=q?D[0]:0,Ye=this.__wrapped__,_t=function(Xt){return Fi(Xt,D)};return q>1||this.__actions__.length||!(Ye instanceof Bo)||!Ih(Se)?this.thru(_t):(Ye=Ye.slice(Se,+Se+(q?1:0)),Ye.__actions__.push({func:Vi,args:[_t],thisArg:e}),new ou(Ye,this.__chain__).thru(function(Xt){return q&&!Xt.length&&Xt.push(e),Xt}))});function Ri(){return Xr(this)}function js(){return new ou(this.value(),this.__chain__)}function os(){this.__values__===e&&(this.__values__=YA(this.value()));var D=this.__index__>=this.__values__.length,q=D?e:this.__values__[this.__index__++];return{done:D,value:q}}function ns(){return this}function oo(D){for(var q,Se=this;Se instanceof tf;){var Ye=A(Se);Ye.__index__=0,Ye.__values__=e,q?_t.__wrapped__=Ye:q=Ye;var _t=Ye;Se=Se.__wrapped__}return _t.__wrapped__=D,q}function ys(){var D=this.__wrapped__;if(D instanceof Bo){var q=D;return this.__actions__.length&&(q=new Bo(this)),q=q.reverse(),q.__actions__.push({func:Vi,args:[br],thisArg:e}),new ou(q,this.__chain__)}return this.thru(br)}function Xi(){return vu(this.__wrapped__,this.__actions__)}var mi=lf(function(D,q,Se){Vs.call(D,Se)?++D[Se]:Ni(D,Se,1)});function zs(D,q,Se){var Ye=Oo(D)?bn:ho;return Se&&Io(D,q,Se)&&(q=e),Ye(D,ls(q,3))}function Ys(D,q){var Se=Oo(D)?Hn:Da;return Se(D,ls(q,3))}var ss=ad(Qe),Ba=ad(je);function ic(D,q){return Wo(Qf(D,q),1)}function sc(D,q){return Wo(Qf(D,q),R)}function ga(D,q,Se){return Se=Se===e?1:to(Se),Wo(Qf(D,q),Se)}function Ol(D,q){var Se=Oo(D)?hr:Go;return Se(D,ls(q,3))}function Kl(D,q){var Se=Oo(D)?Wr:Jo;return Se(D,ls(q,3))}var Dl=lf(function(D,q,Se){Vs.call(D,Se)?D[Se].push(q):Ni(D,Se,[q])});function ea(D,q,Se,Ye){D=pf(D)?D:Pp(D),Se=Se&&!Ye?to(Se):0;var _t=D.length;return Se<0&&(Se=Ul(_t+Se,0)),qA(D)?Se<=_t&&D.indexOf(q,Se)>-1:!!_t&&Gn(D,q,Se)>-1}var Ac=eo(function(D,q,Se){var Ye=-1,_t=typeof q=="function",Xt=pf(D)?Cr(D.length):[];return Go(D,function(Sr){Xt[++Ye]=_t?at(q,Sr,Se):Ju(Sr,q,Se)}),Xt}),uu=lf(function(D,q,Se){Ni(D,Se,q)});function Qf(D,q){var Se=Oo(D)?ei:_h;return Se(D,ls(q,3))}function dd(D,q,Se,Ye){return D==null?[]:(Oo(q)||(q=q==null?[]:[q]),Se=Ye?e:Se,Oo(Se)||(Se=Se==null?[]:[Se]),Du(D,q,Se))}var oA=lf(function(D,q,Se){D[Se?0:1].push(q)},function(){return[[],[]]});function pd(D,q,Se){var Ye=Oo(D)?vs:vo,_t=arguments.length<3;return Ye(D,ls(q,4),Se,_t,Go)}function Ad(D,q,Se){var Ye=Oo(D)?ma:vo,_t=arguments.length<3;return Ye(D,ls(q,4),Se,_t,Jo)}function Kd(D,q){var Se=Oo(D)?Hn:Da;return Se(D,ug(ls(q,3)))}function aA(D){var q=Oo(D)?hn:mn;return q(D)}function Em(D,q,Se){(Se?Io(D,q,Se):q===e)?q=1:q=to(q);var Ye=Oo(D)?en:Jn;return Ye(D,q)}function Gy(D){var q=Oo(D)?jn:qp;return q(D)}function Ip(D){if(D==null)return 0;if(pf(D))return qA(D)?Ga(D):D.length;var q=Lc(D);return q==st||q==kt?D.size:Hl(D).length}function lA(D,q,Se){var Ye=Oo(D)?Fe:od;return Se&&Io(D,q,Se)&&(q=e),Ye(D,ls(q,3))}var vb=eo(function(D,q){if(D==null)return[];var Se=q.length;return Se>1&&Io(D,q[0],q[1])?q=[]:Se>2&&Io(q[0],q[1],q[2])&&(q=[q[0]]),Du(D,Wo(q,1),[])}),c0=Eo||function(){return go.Date.now()};function w1(D,q){if(typeof q!="function")throw new Js(l);return D=to(D),function(){if(--D<1)return q.apply(this,arguments)}}function S1(D,q,Se){return q=Se?e:q,q=D&&q==null?D.length:q,bu(D,Q,e,e,e,e,q)}function lg(D,q){var Se;if(typeof q!="function")throw new Js(l);return D=to(D),function(){return--D>0&&(Se=q.apply(this,arguments)),D<=1&&(q=e),Se}}var cg=eo(function(D,q,Se){var Ye=v;if(Se.length){var _t=Va(Se,ud(cg));Ye|=V}return bu(D,Ye,q,Se,_t)}),Wy=eo(function(D,q,Se){var Ye=v|S;if(Se.length){var _t=Va(Se,ud(Wy));Ye|=V}return bu(q,Ye,D,Se,_t)});function u0(D,q,Se){q=Se?e:q;var Ye=bu(D,F,e,e,e,e,e,q);return Ye.placeholder=u0.placeholder,Ye}function C1(D,q,Se){q=Se?e:q;var Ye=bu(D,O,e,e,e,e,e,q);return Ye.placeholder=C1.placeholder,Ye}function E1(D,q,Se){var Ye,_t,Xt,Sr,Ur,on,hi=0,ui=!1,bi=!1,cs=!0;if(typeof D!="function")throw new Js(l);q=Vf(q)||0,mc(Se)&&(ui=!!Se.leading,bi="maxWait"in Se,Xt=bi?Ul(Vf(Se.maxWait)||0,q):Xt,cs="trailing"in Se?!!Se.trailing:cs);function Fs(qc){var Yd=Ye,fA=_t;return Ye=_t=e,hi=qc,Sr=D.apply(fA,Yd),Sr}function mo(qc){return hi=qc,Ur=sA(ua,q),ui?Fs(qc):Sr}function Ko(qc){var Yd=qc-on,fA=qc-hi,v_=q-Yd;return bi?kl(v_,Xt-fA):v_}function ao(qc){var Yd=qc-on,fA=qc-hi;return on===e||Yd>=q||Yd<0||bi&&fA>=Xt}function ua(){var qc=c0();if(ao(qc))return ta(qc);Ur=sA(ua,Ko(qc))}function ta(qc){return Ur=e,cs&&Ye?Fs(qc):(Ye=_t=e,Sr)}function $h(){Ur!==e&&vp(Ur),hi=0,Ye=on=_t=Ur=e}function Kh(){return Ur===e?Sr:ta(c0())}function Af(){var qc=c0(),Yd=ao(qc);if(Ye=arguments,_t=this,on=qc,Yd){if(Ur===e)return mo(on);if(bi)return vp(Ur),Ur=sA(ua,q),Fs(on)}return Ur===e&&(Ur=sA(ua,q)),Sr}return Af.cancel=$h,Af.flush=Kh,Af}var bb=eo(function(D,q){return Fo(D,1,q)}),xb=eo(function(D,q,Se){return Fo(D,Vf(q)||0,Se)});function GA(D){return bu(D,ne)}function h0(D,q){if(typeof D!="function"||q!=null&&typeof q!="function")throw new Js(l);var Se=function(){var Ye=arguments,_t=q?q.apply(this,Ye):Ye[0],Xt=Se.cache;if(Xt.has(_t))return Xt.get(_t);var Sr=D.apply(this,Ye);return Se.cache=Xt.set(_t,Sr)||Xt,Sr};return Se.cache=new(h0.Cache||lu),Se}h0.Cache=lu;function ug(D){if(typeof D!="function")throw new Js(l);return function(){var q=arguments;switch(q.length){case 0:return!D.call(this);case 1:return!D.call(this,q[0]);case 2:return!D.call(this,q[0],q[1]);case 3:return!D.call(this,q[0],q[1],q[2])}return!D.apply(this,q)}}function wb(D){return lg(2,D)}var F5=bm(function(D,q){q=q.length==1&&Oo(q[0])?ei(q[0],Sn(ls())):ei(Wo(q,1),Sn(ls()));var Se=q.length;return eo(function(Ye){for(var _t=-1,Xt=kl(Ye.length,Se);++_t<Xt;)Ye[_t]=q[_t].call(this,Ye[_t]);return at(D,this,Ye)})}),$y=eo(function(D,q){var Se=Va(q,ud($y));return bu(D,V,e,q,Se)}),Sb=eo(function(D,q){var Se=Va(q,ud(Sb));return bu(D,X,e,q,Se)}),Cb=Eh(function(D,q){return bu(D,ee,e,e,e,q)});function Eb(D,q){if(typeof D!="function")throw new Js(l);return q=q===e?q:to(q),eo(D,q)}function P5(D,q){if(typeof D!="function")throw new Js(l);return q=q==null?0:Ul(to(q),0),eo(function(Se){var Ye=Se[q],_t=el(Se,0,q);return Ye&&Ti(_t,Ye),at(D,this,_t)})}function Bb(D,q,Se){var Ye=!0,_t=!0;if(typeof D!="function")throw new Js(l);return mc(Se)&&(Ye="leading"in Se?!!Se.leading:Ye,_t="trailing"in Se?!!Se.trailing:_t),E1(D,q,{leading:Ye,maxWait:q,trailing:_t})}function L5(D){return S1(D,1)}function k5(D,q){return $y(wh(q),D)}function Tb(){if(!arguments.length)return[];var D=arguments[0];return Oo(D)?D:[D]}function Ib(D){return Pi(D,m)}function Mb(D,q){return q=typeof q=="function"?q:e,Pi(D,m,q)}function Fb(D){return Pi(D,_|m)}function Pb(D,q){return q=typeof q=="function"?q:e,Pi(D,_|m,q)}function Lb(D,q){return q==null||la(D,q,Kc(q))}function md(D,q){return D===q||D!==D&&q!==q}var Ky=ld(Ml),WA=ld(function(D,q){return D>=q}),Ql=eh(function(){return arguments}())?eh:function(D){return oc(D)&&Vs.call(D,"callee")&&!yl.call(D,"callee")},Oo=Cr.isArray,f0=ae?Sn(ae):Fc;function pf(D){return D!=null&&B1(D.length)&&!cA(D)}function $c(D){return oc(D)&&pf(D)}function O5(D){return D===!0||D===!1||oc(D)&&Ja(D)==re}var $A=Pf||E0,hg=we?Sn(we):Mi;function kb(D){return oc(D)&&D.nodeType===1&&!KA(D)}function Bm(D){if(D==null)return!0;if(pf(D)&&(Oo(D)||typeof D=="string"||typeof D.splice=="function"||$A(D)||Mp(D)||Ql(D)))return!D.length;var q=Lc(D);if(q==st||q==kt)return!D.size;if(Hf(D))return!Hl(D).length;for(var Se in D)if(Vs.call(D,Se))return!1;return!0}function d0(D,q){return th(D,q)}function D5(D,q,Se){Se=typeof Se=="function"?Se:e;var Ye=Se?Se(D,q):e;return Ye===e?th(D,q,e,Se):!!Ye}function qy(D){if(!oc(D))return!1;var q=Ja(D);return q==He||q==Be||typeof D.message=="string"&&typeof D.name=="string"&&!KA(D)}function R5(D){return typeof D=="number"&&PA(D)}function cA(D){if(!mc(D))return!1;var q=Ja(D);return q==Ge||q==Ne||q==Oe||q==yt}function Ob(D){return typeof D=="number"&&D==to(D)}function B1(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=N}function mc(D){var q=typeof D;return D!=null&&(q=="object"||q=="function")}function oc(D){return D!=null&&typeof D=="object"}var Db=Le?Sn(Le):rh;function Rb(D,q){return D===q||nh(D,q,jf(q))}function p0(D,q,Se){return Se=typeof Se=="function"?Se:e,nh(D,q,jf(q),Se)}function N5(D){return A0(D)&&D!=+D}function gc(D){if(sg(D))throw new Qn(a);return yh(D)}function fg(D){return D===null}function Nb(D){return D==null}function A0(D){return typeof D=="number"||oc(D)&&Ja(D)==ot}function KA(D){if(!oc(D)||Ja(D)!=Ze)return!1;var q=nu(D);if(q===null)return!0;var Se=Vs.call(q,"constructor")&&q.constructor;return typeof Se=="function"&&Se instanceof Se&&Ll.call(Se)==Oa}var Tm=$e?Sn($e):yp;function jb(D){return Ob(D)&&D>=-N&&D<=N}var Yy=ct?Sn(ct):Of;function qA(D){return typeof D=="string"||!Oo(D)&&oc(D)&&Ja(D)==Gt}function Gh(D){return typeof D=="symbol"||oc(D)&&Ja(D)==fr}var Mp=ft?Sn(ft):Ld;function j5(D){return D===e}function Ub(D){return oc(D)&&Lc(D)==yr}function Xy(D){return oc(D)&&Ja(D)==Dr}var Zy=ld(El),zb=ld(function(D,q){return D<=q});function YA(D){if(!D)return[];if(pf(D))return qA(D)?bo(D):nc(D);if(ph&&D[ph])return jl(D[ph]());var q=Lc(D),Se=q==st?Sa:q==kt?Ca:Pp;return Se(D)}function uA(D){if(!D)return D===0?D:0;if(D=Vf(D),D===R||D===-R){var q=D<0?-1:1;return q*U}return D===D?D:0}function to(D){var q=uA(D),Se=q%1;return q===q?Se?q-Se:q:0}function Jy(D){return D?Ss(to(D),0,de):0}function Vf(D){if(typeof D=="number")return D;if(Gh(D))return Y;if(mc(D)){var q=typeof D.valueOf=="function"?D.valueOf():D;D=mc(q)?q+"":q}if(typeof D!="string")return D===0?D:+D;D=Li(D);var Se=Vn.test(D);return Se||Si.test(D)?dh(D.slice(2),Se?2:8):Tn.test(D)?Y:+D}function e_(D){return sh(D,Wh(D))}function T1(D){return D?Ss(to(D),-N,N):D===0?D:0}function _l(D){return D==null?"":To(D)}var U5=cf(function(D,q){if(Hf(q)||pf(q)){sh(q,Kc(q),D);return}for(var Se in q)Vs.call(q,Se)&&Nr(D,Se,q[Se])}),I1=cf(function(D,q){sh(q,Wh(q),D)}),m0=cf(function(D,q,Se,Ye){sh(q,Wh(q),D,Ye)}),t_=cf(function(D,q,Se,Ye){sh(q,Kc(q),D,Ye)}),r_=Eh(Fi);function Hb(D,q){var Se=mh(D);return q==null?Se:ci(Se,q)}var Qb=eo(function(D,q){D=Oi(D);var Se=-1,Ye=q.length,_t=Ye>2?q[2]:e;for(_t&&Io(q[0],q[1],_t)&&(Ye=1);++Se<Ye;)for(var Xt=q[Se],Sr=Wh(Xt),Ur=-1,on=Sr.length;++Ur<on;){var hi=Sr[Ur],ui=D[hi];(ui===e||md(ui,Ea[hi])&&!Vs.call(D,hi))&&(D[hi]=Xt[hi])}return D}),Vb=eo(function(D){return D.push(e,cd),at(Yb,e,D)});function Gb(D,q){return Kr(D,ls(q,3),hl)}function M1(D,q){return Kr(D,ls(q,3),$a)}function Fp(D,q){return D==null?D:$o(D,ls(q,3),Wh)}function Wb(D,q){return D==null?D:zl(D,ls(q,3),Wh)}function z5(D,q){return D&&hl(D,ls(q,3))}function H5(D,q){return D&&$a(D,ls(q,3))}function Q5(D){return D==null?[]:ja(D,Kc(D))}function V5(D){return D==null?[]:ja(D,Wh(D))}function n_(D,q,Se){var Ye=D==null?e:Ra(D,q);return Ye===e?Se:Ye}function G5(D,q){return D!=null&&HA(D,q,Zu)}function i_(D,q){return D!=null&&HA(D,q,Mc)}var g0=uf(function(D,q,Se){q!=null&&typeof q.toString!="function"&&(q=tn.call(q)),D[q]=Se},hA(ah)),$b=uf(function(D,q,Se){q!=null&&typeof q.toString!="function"&&(q=tn.call(q)),Vs.call(D,q)?D[q].push(Se):D[q]=[Se]},ls),Kb=eo(Ju);function Kc(D){return pf(D)?un(D):Hl(D)}function Wh(D){return pf(D)?un(D,!0):rf(D)}function s_(D,q){var Se={};return q=ls(q,3),hl(D,function(Ye,_t,Xt){Ni(Se,q(Ye,_t,Xt),Ye)}),Se}function F1(D,q){var Se={};return q=ls(q,3),hl(D,function(Ye,_t,Xt){Ni(Se,_t,q(Ye,_t,Xt))}),Se}var qb=cf(function(D,q,Se){Vc(D,q,Se)}),Yb=cf(function(D,q,Se,Ye){Vc(D,q,Se,Ye)}),o_=Eh(function(D,q){var Se={};if(D==null)return Se;var Ye=!1;q=ei(q,function(Xt){return Xt=Sh(Xt,D),Ye||(Ye=Xt.length>1),Xt}),sh(D,rA(D),Se),Ye&&(Se=Pi(Se,_|g|m,Cp));for(var _t=q.length;_t--;)Hh(Se,q[_t]);return Se});function Xb(D,q){return P1(D,ug(ls(q)))}var Zb=Eh(function(D,q){return D==null?{}:Ao(D,q)});function P1(D,q){if(D==null)return{};var Se=ei(rA(D),function(Ye){return[Ye]});return q=ls(q),vh(D,Se,function(Ye,_t){return q(Ye,_t[0])})}function a_(D,q,Se){q=Sh(q,D);var Ye=-1,_t=q.length;for(_t||(_t=1,D=e);++Ye<_t;){var Xt=D==null?e:D[Gi(q[Ye])];Xt===e&&(Ye=_t,Xt=Se),D=cA(Xt)?Xt.call(D):Xt}return D}function Jb(D,q,Se){return D==null?D:Nu(D,q,Se)}function l_(D,q,Se,Ye){return Ye=typeof Ye=="function"?Ye:e,D==null?D:Nu(D,q,Se,Ye)}var e2=Sp(Kc),t2=Sp(Wh);function W5(D,q,Se){var Ye=Oo(D),_t=Ye||$A(D)||Mp(D);if(q=ls(q,4),Se==null){var Xt=D&&D.constructor;_t?Se=Ye?new Xt:[]:mc(D)?Se=cA(Xt)?mh(nu(D)):{}:Se={}}return(_t?hr:hl)(D,function(Sr,Ur,on){return q(Se,Sr,Ur,on)}),Se}function $5(D,q){return D==null?!0:Hh(D,q)}function r2(D,q,Se){return D==null?D:Nf(D,q,wh(Se))}function XA(D,q,Se,Ye){return Ye=typeof Ye=="function"?Ye:e,D==null?D:Nf(D,q,wh(Se),Ye)}function Pp(D){return D==null?[]:ia(D,Kc(D))}function y0(D){return D==null?[]:ia(D,Wh(D))}function L1(D,q,Se){return Se===e&&(Se=q,q=e),Se!==e&&(Se=Vf(Se),Se=Se===Se?Se:0),q!==e&&(q=Vf(q),q=q===q?q:0),Ss(Vf(D),q,Se)}function _0(D,q,Se){return q=uA(q),Se===e?(Se=q,q=0):Se=uA(Se),D=Vf(D),gh(D,q,Se)}function n2(D,q,Se){if(Se&&typeof Se!="boolean"&&Io(D,q,Se)&&(q=Se=e),Se===e&&(typeof q=="boolean"?(Se=q,q=e):typeof D=="boolean"&&(Se=D,D=e)),D===e&&q===e?(D=0,q=1):(D=uA(D),q===e?(q=D,D=0):q=uA(q)),D>q){var Ye=D;D=q,q=Ye}if(Se||D%1||q%1){var _t=Xh();return kl(D+_t*(q-D+Yu("1e-"+((_t+"").length-1))),q)}return sd(D,q)}var i2=cu(function(D,q,Se){return q=q.toLowerCase(),D+(Se?c_(q):q)});function c_(D){return D1(_l(D).toLowerCase())}function u_(D){return D=_l(D),D&&D.replace(ds,aa).replace(Dh,"")}function K5(D,q,Se){D=_l(D),q=To(q);var Ye=D.length;Se=Se===e?Ye:Ss(to(Se),0,Ye);var _t=Se;return Se-=q.length,Se>=0&&D.slice(Se,_t)==q}function q5(D){return D=_l(D),D&&On.test(D)?D.replace(Zn,ru):D}function h_(D){return D=_l(D),D&&et.test(D)?D.replace(Ve,"\\$&"):D}var k1=cu(function(D,q,Se){return D+(Se?"-":"")+q.toLowerCase()}),s2=cu(function(D,q,Se){return D+(Se?" ":"")+q.toLowerCase()}),Y5=Yp("toLowerCase");function o2(D,q,Se){D=_l(D),q=to(q);var Ye=q?Ga(D):0;if(!q||Ye>=q)return D;var _t=(q-Ye)/2;return hf(Zf(_t),Se)+D+hf(Xf(_t),Se)}function f_(D,q,Se){D=_l(D),q=to(q);var Ye=q?Ga(D):0;return q&&Ye<q?D+hf(q-Ye,Se):D}function a2(D,q,Se){D=_l(D),q=to(q);var Ye=q?Ga(D):0;return q&&Ye<q?hf(q-Ye,Se)+D:D}function l2(D,q,Se){return Se||q==null?q=0:q&&(q=+q),Gp(_l(D).replace(We,""),q||0)}function c2(D,q,Se){return(Se?Io(D,q,Se):q===e)?q=1:q=to(q),Ru(_l(D),q)}function u2(){var D=arguments,q=_l(D[0]);return D.length<3?q:q.replace(D[1],D[2])}var h2=cu(function(D,q,Se){return D+(Se?"_":"")+q.toLowerCase()});function X5(D,q,Se){return Se&&typeof Se!="number"&&Io(D,q,Se)&&(q=Se=e),Se=Se===e?de:Se>>>0,Se?(D=_l(D),D&&(typeof q=="string"||q!=null&&!Tm(q))&&(q=To(q),!q&&Us(D))?el(bo(D),0,Se):D.split(q,Se)):[]}var f2=cu(function(D,q,Se){return D+(Se?" ":"")+D1(q)});function d2(D,q,Se){return D=_l(D),Se=Se==null?0:Ss(to(Se),0,D.length),q=To(q),D.slice(Se,Se+q.length)==q}function Im(D,q,Se){var Ye=Ot.templateSettings;Se&&Io(D,q,Se)&&(q=e),D=_l(D),q=m0({},q,Ye,NA);var _t=m0({},q.imports,Ye.imports,NA),Xt=Kc(_t),Sr=ia(_t,Xt),Ur,on,hi=0,ui=q.interpolate||Qi,bi="__p += '",cs=Zs((q.escape||Qi).source+"|"+ui.source+"|"+(ui===Ki?_r:Qi).source+"|"+(q.evaluate||Qi).source+"|$","g"),Fs="//# sourceURL="+(Vs.call(q,"sourceURL")?(q.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gu+"]")+`
`;D.replace(cs,function(ao,ua,ta,$h,Kh,Af){return ta||(ta=$h),bi+=D.slice(hi,Af).replace(Zt,Tl),ua&&(Ur=!0,bi+=`' +
__e(`+ua+`) +
'`),Kh&&(on=!0,bi+=`';
`+Kh+`;
__p += '`),ta&&(bi+=`' +
((__t = (`+ta+`)) == null ? '' : __t) +
'`),hi=Af+ao.length,ao}),bi+=`';
`;var mo=Vs.call(q,"variable")&&q.variable;if(!mo)bi=`with (obj) {
`+bi+`
}
`;else if(nr.test(mo))throw new Qn(t);bi=(on?bi.replace(wn,""):bi).replace(Zi,"$1").replace(ai,"$1;"),bi="function("+(mo||"obj")+`) {
`+(mo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ur?", __e = _.escape":"")+(on?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bi+`return __p
}`;var Ko=v2(function(){return ki(Xt,Fs+"return "+bi).apply(e,Sr)});if(Ko.source=bi,qy(Ko))throw Ko;return Ko}function p2(D){return _l(D).toLowerCase()}function A2(D){return _l(D).toUpperCase()}function m2(D,q,Se){if(D=_l(D),D&&(Se||q===e))return Li(D);if(!D||!(q=To(q)))return D;var Ye=bo(D),_t=bo(q),Xt=As(Ye,_t),Sr=sa(Ye,_t)+1;return el(Ye,Xt,Sr).join("")}function O1(D,q,Se){if(D=_l(D),D&&(Se||q===e))return D.slice(0,ml(D)+1);if(!D||!(q=To(q)))return D;var Ye=bo(D),_t=sa(Ye,bo(q))+1;return el(Ye,0,_t).join("")}function Z5(D,q,Se){if(D=_l(D),D&&(Se||q===e))return D.replace(We,"");if(!D||!(q=To(q)))return D;var Ye=bo(D),_t=As(Ye,bo(q));return el(Ye,_t).join("")}function g2(D,q){var Se=Ae,Ye=fe;if(mc(q)){var _t="separator"in q?q.separator:_t;Se="length"in q?to(q.length):Se,Ye="omission"in q?To(q.omission):Ye}D=_l(D);var Xt=D.length;if(Us(D)){var Sr=bo(D);Xt=Sr.length}if(Se>=Xt)return D;var Ur=Se-Ga(Ye);if(Ur<1)return Ye;var on=Sr?el(Sr,0,Ur).join(""):D.slice(0,Ur);if(_t===e)return on+Ye;if(Sr&&(Ur+=on.length-Ur),Tm(_t)){if(D.slice(Ur).search(_t)){var hi,ui=on;for(_t.global||(_t=Zs(_t.source,_l(pn.exec(_t))+"g")),_t.lastIndex=0;hi=_t.exec(ui);)var bi=hi.index;on=on.slice(0,bi===e?Ur:bi)}}else if(D.indexOf(To(_t),Ur)!=Ur){var cs=on.lastIndexOf(_t);cs>-1&&(on=on.slice(0,cs))}return on+Ye}function v0(D){return D=_l(D),D&&Bn.test(D)?D.replace(_i,dc):D}var y2=cu(function(D,q,Se){return D+(Se?" ":"")+q.toUpperCase()}),D1=Yp("toUpperCase");function _2(D,q,Se){return D=_l(D),q=Se?e:q,q===e?Xa(D)?Lr(D):gr(D):D.match(q)||[]}var v2=eo(function(D,q){try{return at(D,e,q)}catch(Se){return qy(Se)?Se:new Qn(Se)}}),b2=Eh(function(D,q){return hr(q,function(Se){Se=Gi(Se),Ni(D,Se,cg(D[Se],D))}),D});function b0(D){var q=D==null?0:D.length,Se=ls();return D=q?ei(D,function(Ye){if(typeof Ye[1]!="function")throw new Js(l);return[Se(Ye[0]),Ye[1]]}):[],eo(function(Ye){for(var _t=-1;++_t<q;){var Xt=D[_t];if(at(Xt[0],this,Ye))return at(Xt[1],this,Ye)}})}function d_(D){return pa(Pi(D,_))}function hA(D){return function(){return D}}function dg(D,q){return D==null||D!==D?q:D}var x0=Ch(),p_=Ch(!0);function ah(D){return D}function A_(D){return kd(typeof D=="function"?D:Pi(D,_))}function w0(D){return Kp(Pi(D,_))}function m_(D,q){return Df(D,Pi(q,_))}var qd=eo(function(D,q){return function(Se){return Ju(Se,D,q)}}),pg=eo(function(D,q){return function(Se){return Ju(D,Se,q)}});function S0(D,q,Se){var Ye=Kc(q),_t=ja(q,Ye);Se==null&&!(mc(q)&&(_t.length||!Ye.length))&&(Se=q,q=D,D=this,_t=ja(q,Kc(q)));var Xt=!(mc(Se)&&"chain"in Se)||!!Se.chain,Sr=cA(D);return hr(_t,function(Ur){var on=q[Ur];D[Ur]=on,Sr&&(D.prototype[Ur]=function(){var hi=this.__chain__;if(Xt||hi){var ui=D(this.__wrapped__),bi=ui.__actions__=nc(this.__actions__);return bi.push({func:on,args:arguments,thisArg:D}),ui.__chain__=hi,ui}return on.apply(D,Ti([this.value()],arguments))})}),D}function Ag(){return go._===this&&(go._=gl),this}function ZA(){}function x2(D){return D=to(D),eo(function(q){return _p(q,D)})}var R1=Xp(ei),w2=Xp(bn),S2=Xp(Fe);function C2(D){return Mh(D)?Ns(Gi(D)):Rf(D)}function N1(D){return function(q){return D==null?e:Ra(D,q)}}var J5=Vd(),C0=Vd(!0);function j1(){return[]}function E0(){return!1}function e3(){return{}}function U1(){return""}function t3(){return!0}function E2(D,q){if(D=to(D),D<1||D>N)return[];var Se=de,Ye=kl(D,de);q=ls(q),D-=de;for(var _t=Qo(Ye,q);++Se<D;)q(Se);return _t}function B2(D){return Oo(D)?ei(D,Gi):Gh(D)?[D]:nc(Oc(_l(D)))}function T2(D){var q=++cl;return _l(D)+q}var r3=xp(function(D,q){return D+q},0),I2=wp("ceil"),n3=xp(function(D,q){return D/q},1),M2=wp("floor");function g_(D){return D&&D.length?ca(D,ah,Ml):e}function y_(D,q){return D&&D.length?ca(D,ls(q,2),Ml):e}function __(D){return ws(D,ah)}function B0(D,q){return ws(D,ls(q,2))}function i3(D){return D&&D.length?ca(D,ah,El):e}function s3(D,q){return D&&D.length?ca(D,ls(q,2),El):e}var o3=xp(function(D,q){return D*q},1),a3=wp("round"),l3=xp(function(D,q){return D-q},0);function c3(D){return D&&D.length?as(D,ah):0}function u3(D,q){return D&&D.length?as(D,ls(q,2)):0}return Ot.after=w1,Ot.ary=S1,Ot.assign=U5,Ot.assignIn=I1,Ot.assignInWith=m0,Ot.assignWith=t_,Ot.at=r_,Ot.before=lg,Ot.bind=cg,Ot.bindAll=b2,Ot.bindKey=Wy,Ot.castArray=Tb,Ot.chain=Xr,Ot.chunk=E,Ot.compact=M,Ot.concat=P,Ot.cond=b0,Ot.conforms=d_,Ot.constant=hA,Ot.countBy=mi,Ot.create=Hb,Ot.curry=u0,Ot.curryRight=C1,Ot.debounce=E1,Ot.defaults=Qb,Ot.defaultsDeep=Vb,Ot.defer=bb,Ot.delay=xb,Ot.difference=j,Ot.differenceBy=K,Ot.differenceWith=te,Ot.drop=ge,Ot.dropRight=ve,Ot.dropRightWhile=Me,Ot.dropWhile=Ce,Ot.fill=Pe,Ot.filter=Ys,Ot.flatMap=ic,Ot.flatMapDeep=sc,Ot.flatMapDepth=ga,Ot.flatten=qe,Ot.flattenDeep=Ke,Ot.flattenDepth=lt,Ot.flip=GA,Ot.flow=x0,Ot.flowRight=p_,Ot.fromPairs=dt,Ot.functions=Q5,Ot.functionsIn=V5,Ot.groupBy=Dl,Ot.initial=Dt,Ot.intersection=Vt,Ot.intersectionBy=It,Ot.intersectionWith=Mt,Ot.invert=g0,Ot.invertBy=$b,Ot.invokeMap=Ac,Ot.iteratee=A_,Ot.keyBy=uu,Ot.keys=Kc,Ot.keysIn=Wh,Ot.map=Qf,Ot.mapKeys=s_,Ot.mapValues=F1,Ot.matches=w0,Ot.matchesProperty=m_,Ot.memoize=h0,Ot.merge=qb,Ot.mergeWith=Yb,Ot.method=qd,Ot.methodOf=pg,Ot.mixin=S0,Ot.negate=ug,Ot.nthArg=x2,Ot.omit=o_,Ot.omitBy=Xb,Ot.once=wb,Ot.orderBy=dd,Ot.over=R1,Ot.overArgs=F5,Ot.overEvery=w2,Ot.overSome=S2,Ot.partial=$y,Ot.partialRight=Sb,Ot.partition=oA,Ot.pick=Zb,Ot.pickBy=P1,Ot.property=C2,Ot.propertyOf=N1,Ot.pull=Br,Ot.pullAll=Jr,Ot.pullAllBy=yn,Ot.pullAllWith=vr,Ot.pullAt=qt,Ot.range=J5,Ot.rangeRight=C0,Ot.rearg=Cb,Ot.reject=Kd,Ot.remove=kr,Ot.rest=Eb,Ot.reverse=br,Ot.sampleSize=Em,Ot.set=Jb,Ot.setWith=l_,Ot.shuffle=Gy,Ot.slice=an,Ot.sortBy=vb,Ot.sortedUniq=xi,Ot.sortedUniqBy=vi,Ot.split=X5,Ot.spread=P5,Ot.tail=qi,Ot.take=fs,Ot.takeRight=Bs,Ot.takeRightWhile=no,Ot.takeWhile=rs,Ot.tap=Fn,Ot.throttle=Bb,Ot.thru=Vi,Ot.toArray=YA,Ot.toPairs=e2,Ot.toPairsIn=t2,Ot.toPath=B2,Ot.toPlainObject=e_,Ot.transform=W5,Ot.unary=L5,Ot.union=io,Ot.unionBy=fo,Ot.unionWith=ko,Ot.uniq=Cs,Ot.uniqBy=so,Ot.uniqWith=he,Ot.unset=$5,Ot.unzip=le,Ot.unzipWith=ye,Ot.update=r2,Ot.updateWith=XA,Ot.values=Pp,Ot.valuesIn=y0,Ot.without=_e,Ot.words=_2,Ot.wrap=k5,Ot.xor=De,Ot.xorBy=it,Ot.xorWith=At,Ot.zip=Rt,Ot.zipObject=zt,Ot.zipObjectDeep=Ir,Ot.zipWith=Or,Ot.entries=e2,Ot.entriesIn=t2,Ot.extend=I1,Ot.extendWith=m0,S0(Ot,Ot),Ot.add=r3,Ot.attempt=v2,Ot.camelCase=i2,Ot.capitalize=c_,Ot.ceil=I2,Ot.clamp=L1,Ot.clone=Ib,Ot.cloneDeep=Fb,Ot.cloneDeepWith=Pb,Ot.cloneWith=Mb,Ot.conformsTo=Lb,Ot.deburr=u_,Ot.defaultTo=dg,Ot.divide=n3,Ot.endsWith=K5,Ot.eq=md,Ot.escape=q5,Ot.escapeRegExp=h_,Ot.every=zs,Ot.find=ss,Ot.findIndex=Qe,Ot.findKey=Gb,Ot.findLast=Ba,Ot.findLastIndex=je,Ot.findLastKey=M1,Ot.floor=M2,Ot.forEach=Ol,Ot.forEachRight=Kl,Ot.forIn=Fp,Ot.forInRight=Wb,Ot.forOwn=z5,Ot.forOwnRight=H5,Ot.get=n_,Ot.gt=Ky,Ot.gte=WA,Ot.has=G5,Ot.hasIn=i_,Ot.head=vt,Ot.identity=ah,Ot.includes=ea,Ot.indexOf=Tt,Ot.inRange=_0,Ot.invoke=Kb,Ot.isArguments=Ql,Ot.isArray=Oo,Ot.isArrayBuffer=f0,Ot.isArrayLike=pf,Ot.isArrayLikeObject=$c,Ot.isBoolean=O5,Ot.isBuffer=$A,Ot.isDate=hg,Ot.isElement=kb,Ot.isEmpty=Bm,Ot.isEqual=d0,Ot.isEqualWith=D5,Ot.isError=qy,Ot.isFinite=R5,Ot.isFunction=cA,Ot.isInteger=Ob,Ot.isLength=B1,Ot.isMap=Db,Ot.isMatch=Rb,Ot.isMatchWith=p0,Ot.isNaN=N5,Ot.isNative=gc,Ot.isNil=Nb,Ot.isNull=fg,Ot.isNumber=A0,Ot.isObject=mc,Ot.isObjectLike=oc,Ot.isPlainObject=KA,Ot.isRegExp=Tm,Ot.isSafeInteger=jb,Ot.isSet=Yy,Ot.isString=qA,Ot.isSymbol=Gh,Ot.isTypedArray=Mp,Ot.isUndefined=j5,Ot.isWeakMap=Ub,Ot.isWeakSet=Xy,Ot.join=Pt,Ot.kebabCase=k1,Ot.last=dr,Ot.lastIndexOf=sr,Ot.lowerCase=s2,Ot.lowerFirst=Y5,Ot.lt=Zy,Ot.lte=zb,Ot.max=g_,Ot.maxBy=y_,Ot.mean=__,Ot.meanBy=B0,Ot.min=i3,Ot.minBy=s3,Ot.stubArray=j1,Ot.stubFalse=E0,Ot.stubObject=e3,Ot.stubString=U1,Ot.stubTrue=t3,Ot.multiply=o3,Ot.nth=Qr,Ot.noConflict=Ag,Ot.noop=ZA,Ot.now=c0,Ot.pad=o2,Ot.padEnd=f_,Ot.padStart=a2,Ot.parseInt=l2,Ot.random=n2,Ot.reduce=pd,Ot.reduceRight=Ad,Ot.repeat=c2,Ot.replace=u2,Ot.result=a_,Ot.round=a3,Ot.runInContext=Kt,Ot.sample=aA,Ot.size=Ip,Ot.snakeCase=h2,Ot.some=lA,Ot.sortedIndex=ln,Ot.sortedIndexBy=dn,Ot.sortedIndexOf=Mn,Ot.sortedLastIndex=di,Ot.sortedLastIndexBy=Ci,Ot.sortedLastIndexOf=ti,Ot.startCase=f2,Ot.startsWith=d2,Ot.subtract=l3,Ot.sum=c3,Ot.sumBy=u3,Ot.template=Im,Ot.times=E2,Ot.toFinite=uA,Ot.toInteger=to,Ot.toLength=Jy,Ot.toLower=p2,Ot.toNumber=Vf,Ot.toSafeInteger=T1,Ot.toString=_l,Ot.toUpper=A2,Ot.trim=m2,Ot.trimEnd=O1,Ot.trimStart=Z5,Ot.truncate=g2,Ot.unescape=v0,Ot.uniqueId=T2,Ot.upperCase=y2,Ot.upperFirst=D1,Ot.each=Ol,Ot.eachRight=Kl,Ot.first=vt,S0(Ot,function(){var D={};return hl(Ot,function(q,Se){Vs.call(Ot.prototype,Se)||(D[Se]=q)}),D}(),{chain:!1}),Ot.VERSION=i,hr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(D){Ot[D].placeholder=Ot}),hr(["drop","take"],function(D,q){Bo.prototype[D]=function(Se){Se=Se===e?1:Ul(to(Se),0);var Ye=this.__filtered__&&!q?new Bo(this):this.clone();return Ye.__filtered__?Ye.__takeCount__=kl(Se,Ye.__takeCount__):Ye.__views__.push({size:kl(Se,de),type:D+(Ye.__dir__<0?"Right":"")}),Ye},Bo.prototype[D+"Right"]=function(Se){return this.reverse()[D](Se).reverse()}}),hr(["filter","map","takeWhile"],function(D,q){var Se=q+1,Ye=Se==Z||Se==k;Bo.prototype[D]=function(_t){var Xt=this.clone();return Xt.__iteratees__.push({iteratee:ls(_t,3),type:Se}),Xt.__filtered__=Xt.__filtered__||Ye,Xt}}),hr(["head","last"],function(D,q){var Se="take"+(q?"Right":"");Bo.prototype[D]=function(){return this[Se](1).value()[0]}}),hr(["initial","tail"],function(D,q){var Se="drop"+(q?"":"Right");Bo.prototype[D]=function(){return this.__filtered__?new Bo(this):this[Se](1)}}),Bo.prototype.compact=function(){return this.filter(ah)},Bo.prototype.find=function(D){return this.filter(D).head()},Bo.prototype.findLast=function(D){return this.reverse().find(D)},Bo.prototype.invokeMap=eo(function(D,q){return typeof D=="function"?new Bo(this):this.map(function(Se){return Ju(Se,D,q)})}),Bo.prototype.reject=function(D){return this.filter(ug(ls(D)))},Bo.prototype.slice=function(D,q){D=to(D);var Se=this;return Se.__filtered__&&(D>0||q<0)?new Bo(Se):(D<0?Se=Se.takeRight(-D):D&&(Se=Se.drop(D)),q!==e&&(q=to(q),Se=q<0?Se.dropRight(-q):Se.take(q-D)),Se)},Bo.prototype.takeRightWhile=function(D){return this.reverse().takeWhile(D).reverse()},Bo.prototype.toArray=function(){return this.take(de)},hl(Bo.prototype,function(D,q){var Se=/^(?:filter|find|map|reject)|While$/.test(q),Ye=/^(?:head|last)$/.test(q),_t=Ot[Ye?"take"+(q=="last"?"Right":""):q],Xt=Ye||/^find/.test(q);_t&&(Ot.prototype[q]=function(){var Sr=this.__wrapped__,Ur=Ye?[1]:arguments,on=Sr instanceof Bo,hi=Ur[0],ui=on||Oo(Sr),bi=function(ua){var ta=_t.apply(Ot,Ti([ua],Ur));return Ye&&cs?ta[0]:ta};ui&&Se&&typeof hi=="function"&&hi.length!=1&&(on=ui=!1);var cs=this.__chain__,Fs=!!this.__actions__.length,mo=Xt&&!cs,Ko=on&&!Fs;if(!Xt&&ui){Sr=Ko?Sr:new Bo(this);var ao=D.apply(Sr,Ur);return ao.__actions__.push({func:Vi,args:[bi],thisArg:e}),new ou(ao,cs)}return mo&&Ko?D.apply(this,Ur):(ao=this.thru(bi),mo?Ye?ao.value()[0]:ao.value():ao)})}),hr(["pop","push","shift","sort","splice","unshift"],function(D){var q=xo[D],Se=/^(?:push|sort|unshift)$/.test(D)?"tap":"thru",Ye=/^(?:pop|shift)$/.test(D);Ot.prototype[D]=function(){var _t=arguments;if(Ye&&!this.__chain__){var Xt=this.value();return q.apply(Oo(Xt)?Xt:[],_t)}return this[Se](function(Sr){return q.apply(Oo(Sr)?Sr:[],_t)})}}),hl(Bo.prototype,function(D,q){var Se=Ot[q];if(Se){var Ye=Se.name+"";Vs.call(zh,Ye)||(zh[Ye]=[]),zh[Ye].push({name:q,func:Se})}}),zh[Lo(e,S).name]=[{name:"wrapper",func:e}],Bo.prototype.clone=hp,Bo.prototype.reverse=Wp,Bo.prototype.value=kf,Ot.prototype.at=wi,Ot.prototype.chain=Ri,Ot.prototype.commit=js,Ot.prototype.next=os,Ot.prototype.plant=oo,Ot.prototype.reverse=ys,Ot.prototype.toJSON=Ot.prototype.valueOf=Ot.prototype.value=Xi,Ot.prototype.first=Ot.prototype.head,ph&&(Ot.prototype[ph]=ns),Ot},fn=rn();Pl?((Pl.exports=fn)._=fn,fc._=fn):go._=fn}).call(P9)}(tv,tv.exports)),tv.exports}var EF=L9();const k9=s0(EF);function BF(n,r){return function(){return n.apply(r,arguments)}}const{toString:O9}=Object.prototype,{getPrototypeOf:MC}=Object,{iterator:Qw,toStringTag:TF}=Symbol,Vw=(n=>r=>{const e=O9.call(r);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),EA=n=>(n=n.toLowerCase(),r=>Vw(r)===n),Gw=n=>r=>typeof r===n,{isArray:ky}=Array,Pv=Gw("undefined");function D9(n){return n!==null&&!Pv(n)&&n.constructor!==null&&!Pv(n.constructor)&&vd(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const IF=EA("ArrayBuffer");function R9(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&IF(n.buffer),r}const N9=Gw("string"),vd=Gw("function"),MF=Gw("number"),Ww=n=>n!==null&&typeof n=="object",j9=n=>n===!0||n===!1,Nx=n=>{if(Vw(n)!=="object")return!1;const r=MC(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(TF in n)&&!(Qw in n)},U9=EA("Date"),z9=EA("File"),H9=EA("Blob"),Q9=EA("FileList"),V9=n=>Ww(n)&&vd(n.pipe),G9=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||vd(n.append)&&((r=Vw(n))==="formdata"||r==="object"&&vd(n.toString)&&n.toString()==="[object FormData]"))},W9=EA("URLSearchParams"),[$9,K9,q9,Y9]=["ReadableStream","Request","Response","Headers"].map(EA),X9=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ab(n,r,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ky(n))for(i=0,o=n.length;i<o;i++)r.call(null,n[i],i,n);else{const a=e?Object.getOwnPropertyNames(n):Object.keys(n),l=a.length;let t;for(i=0;i<l;i++)t=a[i],r.call(null,n[t],t,n)}}function FF(n,r){r=r.toLowerCase();const e=Object.keys(n);let i=e.length,o;for(;i-- >0;)if(o=e[i],r===o.toLowerCase())return o;return null}const V0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,PF=n=>!Pv(n)&&n!==V0;function Z4(){const{caseless:n}=PF(this)&&this||{},r={},e=(i,o)=>{const a=n&&FF(r,o)||o;Nx(r[a])&&Nx(i)?r[a]=Z4(r[a],i):Nx(i)?r[a]=Z4({},i):ky(i)?r[a]=i.slice():r[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ab(arguments[i],e);return r}const Z9=(n,r,e,{allOwnKeys:i}={})=>(ab(r,(o,a)=>{e&&vd(o)?n[a]=BF(o,e):n[a]=o},{allOwnKeys:i}),n),J9=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),eN=(n,r,e,i)=>{n.prototype=Object.create(r.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),e&&Object.assign(n.prototype,e)},tN=(n,r,e,i)=>{let o,a,l;const t={};if(r=r||{},n==null)return r;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)l=o[a],(!i||i(l,n,r))&&!t[l]&&(r[l]=n[l],t[l]=!0);n=e!==!1&&MC(n)}while(n&&(!e||e(n,r))&&n!==Object.prototype);return r},rN=(n,r,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=r.length;const i=n.indexOf(r,e);return i!==-1&&i===e},nN=n=>{if(!n)return null;if(ky(n))return n;let r=n.length;if(!MF(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=n[r];return e},iN=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&MC(Uint8Array)),sN=(n,r)=>{const i=(n&&n[Qw]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;r.call(n,a[0],a[1])}},oN=(n,r)=>{let e;const i=[];for(;(e=n.exec(r))!==null;)i.push(e);return i},aN=EA("HTMLFormElement"),lN=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,o){return i.toUpperCase()+o}),Q6=(({hasOwnProperty:n})=>(r,e)=>n.call(r,e))(Object.prototype),cN=EA("RegExp"),LF=(n,r)=>{const e=Object.getOwnPropertyDescriptors(n),i={};ab(e,(o,a)=>{let l;(l=r(o,a,n))!==!1&&(i[a]=l||o)}),Object.defineProperties(n,i)},uN=n=>{LF(n,(r,e)=>{if(vd(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(vd(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},hN=(n,r)=>{const e={},i=o=>{o.forEach(a=>{e[a]=!0})};return ky(n)?i(n):i(String(n).split(r)),e},fN=()=>{},dN=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function pN(n){return!!(n&&vd(n.append)&&n[TF]==="FormData"&&n[Qw])}const AN=n=>{const r=new Array(10),e=(i,o)=>{if(Ww(i)){if(r.indexOf(i)>=0)return;if(!("toJSON"in i)){r[o]=i;const a=ky(i)?[]:{};return ab(i,(l,t)=>{const h=e(l,o+1);!Pv(h)&&(a[t]=h)}),r[o]=void 0,a}}return i};return e(n,0)},mN=EA("AsyncFunction"),gN=n=>n&&(Ww(n)||vd(n))&&vd(n.then)&&vd(n.catch),kF=((n,r)=>n?setImmediate:r?((e,i)=>(V0.addEventListener("message",({source:o,data:a})=>{o===V0&&a===e&&i.length&&i.shift()()},!1),o=>{i.push(o),V0.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",vd(V0.postMessage)),yN=typeof queueMicrotask<"u"?queueMicrotask.bind(V0):typeof process<"u"&&process.nextTick||kF,_N=n=>n!=null&&vd(n[Qw]),Wn={isArray:ky,isArrayBuffer:IF,isBuffer:D9,isFormData:G9,isArrayBufferView:R9,isString:N9,isNumber:MF,isBoolean:j9,isObject:Ww,isPlainObject:Nx,isReadableStream:$9,isRequest:K9,isResponse:q9,isHeaders:Y9,isUndefined:Pv,isDate:U9,isFile:z9,isBlob:H9,isRegExp:cN,isFunction:vd,isStream:V9,isURLSearchParams:W9,isTypedArray:iN,isFileList:Q9,forEach:ab,merge:Z4,extend:Z9,trim:X9,stripBOM:J9,inherits:eN,toFlatObject:tN,kindOf:Vw,kindOfTest:EA,endsWith:rN,toArray:nN,forEachEntry:sN,matchAll:oN,isHTMLForm:aN,hasOwnProperty:Q6,hasOwnProp:Q6,reduceDescriptors:LF,freezeMethods:uN,toObjectSet:hN,toCamelCase:lN,noop:fN,toFiniteNumber:dN,findKey:FF,global:V0,isContextDefined:PF,isSpecCompliantForm:pN,toJSONObject:AN,isAsyncFn:mN,isThenable:gN,setImmediate:kF,asap:yN,isIterable:_N};function oa(n,r,e,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Wn.inherits(oa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wn.toJSONObject(this.config),code:this.code,status:this.status}}});const OF=oa.prototype,DF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{DF[n]={value:n}});Object.defineProperties(oa,DF);Object.defineProperty(OF,"isAxiosError",{value:!0});oa.from=(n,r,e,i,o,a)=>{const l=Object.create(OF);return Wn.toFlatObject(n,l,function(h){return h!==Error.prototype},t=>t!=="isAxiosError"),oa.call(l,n.message,r,e,i,o),l.cause=n,l.name=n.name,a&&Object.assign(l,a),l};const vN=null;function J4(n){return Wn.isPlainObject(n)||Wn.isArray(n)}function RF(n){return Wn.endsWith(n,"[]")?n.slice(0,-2):n}function V6(n,r,e){return n?n.concat(r).map(function(o,a){return o=RF(o),!e&&a?"["+o+"]":o}).join(e?".":""):r}function bN(n){return Wn.isArray(n)&&!n.some(J4)}const xN=Wn.toFlatObject(Wn,{},null,function(r){return/^is[A-Z]/.test(r)});function $w(n,r,e){if(!Wn.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,e=Wn.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,v){return!Wn.isUndefined(v[x])});const i=e.metaTokens,o=e.visitor||p,a=e.dots,l=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&Wn.isSpecCompliantForm(r);if(!Wn.isFunction(o))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if(Wn.isDate(b))return b.toISOString();if(Wn.isBoolean(b))return b.toString();if(!h&&Wn.isBlob(b))throw new oa("Blob is not supported. Use a Buffer instead.");return Wn.isArrayBuffer(b)||Wn.isTypedArray(b)?h&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,x,v){let S=b;if(b&&!v&&typeof b=="object"){if(Wn.endsWith(x,"{}"))x=i?x:x.slice(0,-2),b=JSON.stringify(b);else if(Wn.isArray(b)&&bN(b)||(Wn.isFileList(b)||Wn.endsWith(x,"[]"))&&(S=Wn.toArray(b)))return x=RF(x),S.forEach(function(F,O){!(Wn.isUndefined(F)||F===null)&&r.append(l===!0?V6([x],O,a):l===null?x:x+"[]",f(F))}),!1}return J4(b)?!0:(r.append(V6(v,x,a),f(b)),!1)}const _=[],g=Object.assign(xN,{defaultVisitor:p,convertValue:f,isVisitable:J4});function m(b,x){if(!Wn.isUndefined(b)){if(_.indexOf(b)!==-1)throw Error("Circular reference detected in "+x.join("."));_.push(b),Wn.forEach(b,function(S,B){(!(Wn.isUndefined(S)||S===null)&&o.call(r,S,Wn.isString(B)?B.trim():B,x,g))===!0&&m(S,x?x.concat(B):[B])}),_.pop()}}if(!Wn.isObject(n))throw new TypeError("data must be an object");return m(n),r}function G6(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function FC(n,r){this._pairs=[],n&&$w(n,this,r)}const NF=FC.prototype;NF.append=function(r,e){this._pairs.push([r,e])};NF.toString=function(r){const e=r?function(i){return r.call(this,i,G6)}:G6;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function wN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jF(n,r,e){if(!r)return n;const i=e&&e.encode||wN;Wn.isFunction(e)&&(e={serialize:e});const o=e&&e.serialize;let a;if(o?a=o(r,e):a=Wn.isURLSearchParams(r)?r.toString():new FC(r,e).toString(i),a){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class W6{constructor(){this.handlers=[]}use(r,e,i){return this.handlers.push({fulfilled:r,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Wn.forEach(this.handlers,function(i){i!==null&&r(i)})}}const UF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},SN=typeof URLSearchParams<"u"?URLSearchParams:FC,CN=typeof FormData<"u"?FormData:null,EN=typeof Blob<"u"?Blob:null,BN={isBrowser:!0,classes:{URLSearchParams:SN,FormData:CN,Blob:EN},protocols:["http","https","file","blob","url","data"]},PC=typeof window<"u"&&typeof document<"u",eS=typeof navigator=="object"&&navigator||void 0,TN=PC&&(!eS||["ReactNative","NativeScript","NS"].indexOf(eS.product)<0),IN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",MN=PC&&window.location.href||"http://localhost",FN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:PC,hasStandardBrowserEnv:TN,hasStandardBrowserWebWorkerEnv:IN,navigator:eS,origin:MN},Symbol.toStringTag,{value:"Module"})),Sf={...FN,...BN};function PN(n,r){return $w(n,new Sf.classes.URLSearchParams,Object.assign({visitor:function(e,i,o,a){return Sf.isNode&&Wn.isBuffer(e)?(this.append(i,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},r))}function LN(n){return Wn.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function kN(n){const r={},e=Object.keys(n);let i;const o=e.length;let a;for(i=0;i<o;i++)a=e[i],r[a]=n[a];return r}function zF(n){function r(e,i,o,a){let l=e[a++];if(l==="__proto__")return!0;const t=Number.isFinite(+l),h=a>=e.length;return l=!l&&Wn.isArray(o)?o.length:l,h?(Wn.hasOwnProp(o,l)?o[l]=[o[l],i]:o[l]=i,!t):((!o[l]||!Wn.isObject(o[l]))&&(o[l]=[]),r(e,i,o[l],a)&&Wn.isArray(o[l])&&(o[l]=kN(o[l])),!t)}if(Wn.isFormData(n)&&Wn.isFunction(n.entries)){const e={};return Wn.forEachEntry(n,(i,o)=>{r(LN(i),o,e,0)}),e}return null}function ON(n,r,e){if(Wn.isString(n))try{return(r||JSON.parse)(n),Wn.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const lb={transitional:UF,adapter:["xhr","http","fetch"],transformRequest:[function(r,e){const i=e.getContentType()||"",o=i.indexOf("application/json")>-1,a=Wn.isObject(r);if(a&&Wn.isHTMLForm(r)&&(r=new FormData(r)),Wn.isFormData(r))return o?JSON.stringify(zF(r)):r;if(Wn.isArrayBuffer(r)||Wn.isBuffer(r)||Wn.isStream(r)||Wn.isFile(r)||Wn.isBlob(r)||Wn.isReadableStream(r))return r;if(Wn.isArrayBufferView(r))return r.buffer;if(Wn.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let t;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return PN(r,this.formSerializer).toString();if((t=Wn.isFileList(r))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return $w(t?{"files[]":r}:r,h&&new h,this.formSerializer)}}return a||o?(e.setContentType("application/json",!1),ON(r)):r}],transformResponse:[function(r){const e=this.transitional||lb.transitional,i=e&&e.forcedJSONParsing,o=this.responseType==="json";if(Wn.isResponse(r)||Wn.isReadableStream(r))return r;if(r&&Wn.isString(r)&&(i&&!this.responseType||o)){const l=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(t){if(l)throw t.name==="SyntaxError"?oa.from(t,oa.ERR_BAD_RESPONSE,this,null,this.response):t}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Sf.classes.FormData,Blob:Sf.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wn.forEach(["delete","get","head","post","put","patch"],n=>{lb.headers[n]={}});const DN=Wn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RN=n=>{const r={};let e,i,o;return n&&n.split(`
`).forEach(function(l){o=l.indexOf(":"),e=l.substring(0,o).trim().toLowerCase(),i=l.substring(o+1).trim(),!(!e||r[e]&&DN[e])&&(e==="set-cookie"?r[e]?r[e].push(i):r[e]=[i]:r[e]=r[e]?r[e]+", "+i:i)}),r},$6=Symbol("internals");function z_(n){return n&&String(n).trim().toLowerCase()}function jx(n){return n===!1||n==null?n:Wn.isArray(n)?n.map(jx):String(n)}function NN(n){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)r[i[1]]=i[2];return r}const jN=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function $3(n,r,e,i,o){if(Wn.isFunction(i))return i.call(this,r,e);if(o&&(r=e),!!Wn.isString(r)){if(Wn.isString(i))return r.indexOf(i)!==-1;if(Wn.isRegExp(i))return i.test(r)}}function UN(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,i)=>e.toUpperCase()+i)}function zN(n,r){const e=Wn.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(o,a,l){return this[i].call(this,r,o,a,l)},configurable:!0})})}let bd=class{constructor(r){r&&this.set(r)}set(r,e,i){const o=this;function a(t,h,f){const p=z_(h);if(!p)throw new Error("header name must be a non-empty string");const _=Wn.findKey(o,p);(!_||o[_]===void 0||f===!0||f===void 0&&o[_]!==!1)&&(o[_||h]=jx(t))}const l=(t,h)=>Wn.forEach(t,(f,p)=>a(f,p,h));if(Wn.isPlainObject(r)||r instanceof this.constructor)l(r,e);else if(Wn.isString(r)&&(r=r.trim())&&!jN(r))l(RN(r),e);else if(Wn.isObject(r)&&Wn.isIterable(r)){let t={},h,f;for(const p of r){if(!Wn.isArray(p))throw TypeError("Object iterator must return a key-value pair");t[f=p[0]]=(h=t[f])?Wn.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}l(t,e)}else r!=null&&a(e,r,i);return this}get(r,e){if(r=z_(r),r){const i=Wn.findKey(this,r);if(i){const o=this[i];if(!e)return o;if(e===!0)return NN(o);if(Wn.isFunction(e))return e.call(this,o,i);if(Wn.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=z_(r),r){const i=Wn.findKey(this,r);return!!(i&&this[i]!==void 0&&(!e||$3(this,this[i],i,e)))}return!1}delete(r,e){const i=this;let o=!1;function a(l){if(l=z_(l),l){const t=Wn.findKey(i,l);t&&(!e||$3(i,i[t],t,e))&&(delete i[t],o=!0)}}return Wn.isArray(r)?r.forEach(a):a(r),o}clear(r){const e=Object.keys(this);let i=e.length,o=!1;for(;i--;){const a=e[i];(!r||$3(this,this[a],a,r,!0))&&(delete this[a],o=!0)}return o}normalize(r){const e=this,i={};return Wn.forEach(this,(o,a)=>{const l=Wn.findKey(i,a);if(l){e[l]=jx(o),delete e[a];return}const t=r?UN(a):String(a).trim();t!==a&&delete e[a],e[t]=jx(o),i[t]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return Wn.forEach(this,(i,o)=>{i!=null&&i!==!1&&(e[o]=r&&Wn.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const i=new this(r);return e.forEach(o=>i.set(o)),i}static accessor(r){const i=(this[$6]=this[$6]={accessors:{}}).accessors,o=this.prototype;function a(l){const t=z_(l);i[t]||(zN(o,l),i[t]=!0)}return Wn.isArray(r)?r.forEach(a):a(r),this}};bd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Wn.reduceDescriptors(bd.prototype,({value:n},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(i){this[e]=i}}});Wn.freezeMethods(bd);function K3(n,r){const e=this||lb,i=r||e,o=bd.from(i.headers);let a=i.data;return Wn.forEach(n,function(t){a=t.call(e,a,o.normalize(),r?r.status:void 0)}),o.normalize(),a}function HF(n){return!!(n&&n.__CANCEL__)}function Oy(n,r,e){oa.call(this,n??"canceled",oa.ERR_CANCELED,r,e),this.name="CanceledError"}Wn.inherits(Oy,oa,{__CANCEL__:!0});function QF(n,r,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):r(new oa("Request failed with status code "+e.status,[oa.ERR_BAD_REQUEST,oa.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function HN(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function QN(n,r){n=n||10;const e=new Array(n),i=new Array(n);let o=0,a=0,l;return r=r!==void 0?r:1e3,function(h){const f=Date.now(),p=i[a];l||(l=f),e[o]=h,i[o]=f;let _=a,g=0;for(;_!==o;)g+=e[_++],_=_%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),f-l<r)return;const m=p&&f-p;return m?Math.round(g*1e3/m):void 0}}function VN(n,r){let e=0,i=1e3/r,o,a;const l=(f,p=Date.now())=>{e=p,o=null,a&&(clearTimeout(a),a=null),n.apply(null,f)};return[(...f)=>{const p=Date.now(),_=p-e;_>=i?l(f,p):(o=f,a||(a=setTimeout(()=>{a=null,l(o)},i-_)))},()=>o&&l(o)]}const cw=(n,r,e=3)=>{let i=0;const o=QN(50,250);return VN(a=>{const l=a.loaded,t=a.lengthComputable?a.total:void 0,h=l-i,f=o(h),p=l<=t;i=l;const _={loaded:l,total:t,progress:t?l/t:void 0,bytes:h,rate:f||void 0,estimated:f&&t&&p?(t-l)/f:void 0,event:a,lengthComputable:t!=null,[r?"download":"upload"]:!0};n(_)},e)},K6=(n,r)=>{const e=n!=null;return[i=>r[0]({lengthComputable:e,total:n,loaded:i}),r[1]]},q6=n=>(...r)=>Wn.asap(()=>n(...r)),GN=Sf.hasStandardBrowserEnv?((n,r)=>e=>(e=new URL(e,Sf.origin),n.protocol===e.protocol&&n.host===e.host&&(r||n.port===e.port)))(new URL(Sf.origin),Sf.navigator&&/(msie|trident)/i.test(Sf.navigator.userAgent)):()=>!0,WN=Sf.hasStandardBrowserEnv?{write(n,r,e,i,o,a){const l=[n+"="+encodeURIComponent(r)];Wn.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),Wn.isString(i)&&l.push("path="+i),Wn.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function $N(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function KN(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function VF(n,r,e){let i=!$N(r);return n&&(i||e==!1)?KN(n,r):r}const Y6=n=>n instanceof bd?{...n}:n;function d1(n,r){r=r||{};const e={};function i(f,p,_,g){return Wn.isPlainObject(f)&&Wn.isPlainObject(p)?Wn.merge.call({caseless:g},f,p):Wn.isPlainObject(p)?Wn.merge({},p):Wn.isArray(p)?p.slice():p}function o(f,p,_,g){if(Wn.isUndefined(p)){if(!Wn.isUndefined(f))return i(void 0,f,_,g)}else return i(f,p,_,g)}function a(f,p){if(!Wn.isUndefined(p))return i(void 0,p)}function l(f,p){if(Wn.isUndefined(p)){if(!Wn.isUndefined(f))return i(void 0,f)}else return i(void 0,p)}function t(f,p,_){if(_ in r)return i(f,p);if(_ in n)return i(void 0,f)}const h={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:t,headers:(f,p,_)=>o(Y6(f),Y6(p),_,!0)};return Wn.forEach(Object.keys(Object.assign({},n,r)),function(p){const _=h[p]||o,g=_(n[p],r[p],p);Wn.isUndefined(g)&&_!==t||(e[p]=g)}),e}const GF=n=>{const r=d1({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:l,auth:t}=r;r.headers=l=bd.from(l),r.url=jF(VF(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),t&&l.set("Authorization","Basic "+btoa((t.username||"")+":"+(t.password?unescape(encodeURIComponent(t.password)):"")));let h;if(Wn.isFormData(e)){if(Sf.hasStandardBrowserEnv||Sf.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[f,...p]=h?h.split(";").map(_=>_.trim()).filter(Boolean):[];l.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Sf.hasStandardBrowserEnv&&(i&&Wn.isFunction(i)&&(i=i(r)),i||i!==!1&&GN(r.url))){const f=o&&a&&WN.read(a);f&&l.set(o,f)}return r},qN=typeof XMLHttpRequest<"u",YN=qN&&function(n){return new Promise(function(e,i){const o=GF(n);let a=o.data;const l=bd.from(o.headers).normalize();let{responseType:t,onUploadProgress:h,onDownloadProgress:f}=o,p,_,g,m,b;function x(){m&&m(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let v=new XMLHttpRequest;v.open(o.method.toUpperCase(),o.url,!0),v.timeout=o.timeout;function S(){if(!v)return;const F=bd.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),V={data:!t||t==="text"||t==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:F,config:n,request:v};QF(function(Q){e(Q),x()},function(Q){i(Q),x()},V),v=null}"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(S)},v.onabort=function(){v&&(i(new oa("Request aborted",oa.ECONNABORTED,n,v)),v=null)},v.onerror=function(){i(new oa("Network Error",oa.ERR_NETWORK,n,v)),v=null},v.ontimeout=function(){let O=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const V=o.transitional||UF;o.timeoutErrorMessage&&(O=o.timeoutErrorMessage),i(new oa(O,V.clarifyTimeoutError?oa.ETIMEDOUT:oa.ECONNABORTED,n,v)),v=null},a===void 0&&l.setContentType(null),"setRequestHeader"in v&&Wn.forEach(l.toJSON(),function(O,V){v.setRequestHeader(V,O)}),Wn.isUndefined(o.withCredentials)||(v.withCredentials=!!o.withCredentials),t&&t!=="json"&&(v.responseType=o.responseType),f&&([g,b]=cw(f,!0),v.addEventListener("progress",g)),h&&v.upload&&([_,m]=cw(h),v.upload.addEventListener("progress",_),v.upload.addEventListener("loadend",m)),(o.cancelToken||o.signal)&&(p=F=>{v&&(i(!F||F.type?new Oy(null,n,v):F),v.abort(),v=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const B=HN(o.url);if(B&&Sf.protocols.indexOf(B)===-1){i(new oa("Unsupported protocol "+B+":",oa.ERR_BAD_REQUEST,n));return}v.send(a||null)})},XN=(n,r)=>{const{length:e}=n=n?n.filter(Boolean):[];if(r||e){let i=new AbortController,o;const a=function(f){if(!o){o=!0,t();const p=f instanceof Error?f:this.reason;i.abort(p instanceof oa?p:new Oy(p instanceof Error?p.message:p))}};let l=r&&setTimeout(()=>{l=null,a(new oa(`timeout ${r} of ms exceeded`,oa.ETIMEDOUT))},r);const t=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),n=null)};n.forEach(f=>f.addEventListener("abort",a));const{signal:h}=i;return h.unsubscribe=()=>Wn.asap(t),h}},ZN=function*(n,r){let e=n.byteLength;if(e<r){yield n;return}let i=0,o;for(;i<e;)o=i+r,yield n.slice(i,o),i=o},JN=async function*(n,r){for await(const e of ej(n))yield*ZN(e,r)},ej=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:e,value:i}=await r.read();if(e)break;yield i}}finally{await r.cancel()}},X6=(n,r,e,i)=>{const o=JN(n,r);let a=0,l,t=h=>{l||(l=!0,i&&i(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await o.next();if(f){t(),h.close();return}let _=p.byteLength;if(e){let g=a+=_;e(g)}h.enqueue(new Uint8Array(p))}catch(f){throw t(f),f}},cancel(h){return t(h),o.return()}},{highWaterMark:2})},Kw=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",WF=Kw&&typeof ReadableStream=="function",tj=Kw&&(typeof TextEncoder=="function"?(n=>r=>n.encode(r))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),$F=(n,...r)=>{try{return!!n(...r)}catch{return!1}},rj=WF&&$F(()=>{let n=!1;const r=new Request(Sf.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!r}),Z6=64*1024,tS=WF&&$F(()=>Wn.isReadableStream(new Response("").body)),uw={stream:tS&&(n=>n.body)};Kw&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!uw[r]&&(uw[r]=Wn.isFunction(n[r])?e=>e[r]():(e,i)=>{throw new oa(`Response type '${r}' is not supported`,oa.ERR_NOT_SUPPORT,i)})})})(new Response);const nj=async n=>{if(n==null)return 0;if(Wn.isBlob(n))return n.size;if(Wn.isSpecCompliantForm(n))return(await new Request(Sf.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Wn.isArrayBufferView(n)||Wn.isArrayBuffer(n))return n.byteLength;if(Wn.isURLSearchParams(n)&&(n=n+""),Wn.isString(n))return(await tj(n)).byteLength},ij=async(n,r)=>{const e=Wn.toFiniteNumber(n.getContentLength());return e??nj(r)},sj=Kw&&(async n=>{let{url:r,method:e,data:i,signal:o,cancelToken:a,timeout:l,onDownloadProgress:t,onUploadProgress:h,responseType:f,headers:p,withCredentials:_="same-origin",fetchOptions:g}=GF(n);f=f?(f+"").toLowerCase():"text";let m=XN([o,a&&a.toAbortSignal()],l),b;const x=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(h&&rj&&e!=="get"&&e!=="head"&&(v=await ij(p,i))!==0){let V=new Request(r,{method:"POST",body:i,duplex:"half"}),X;if(Wn.isFormData(i)&&(X=V.headers.get("content-type"))&&p.setContentType(X),V.body){const[Q,ee]=K6(v,cw(q6(h)));i=X6(V.body,Z6,Q,ee)}}Wn.isString(_)||(_=_?"include":"omit");const S="credentials"in Request.prototype;b=new Request(r,{...g,signal:m,method:e.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:S?_:void 0});let B=await fetch(b,g);const F=tS&&(f==="stream"||f==="response");if(tS&&(t||F&&x)){const V={};["status","statusText","headers"].forEach(ne=>{V[ne]=B[ne]});const X=Wn.toFiniteNumber(B.headers.get("content-length")),[Q,ee]=t&&K6(X,cw(q6(t),!0))||[];B=new Response(X6(B.body,Z6,Q,()=>{ee&&ee(),x&&x()}),V)}f=f||"text";let O=await uw[Wn.findKey(uw,f)||"text"](B,n);return!F&&x&&x(),await new Promise((V,X)=>{QF(V,X,{data:O,headers:bd.from(B.headers),status:B.status,statusText:B.statusText,config:n,request:b})})}catch(S){throw x&&x(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new oa("Network Error",oa.ERR_NETWORK,n,b),{cause:S.cause||S}):oa.from(S,S&&S.code,n,b)}}),rS={http:vN,xhr:YN,fetch:sj};Wn.forEach(rS,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const J6=n=>`- ${n}`,oj=n=>Wn.isFunction(n)||n===null||n===!1,KF={getAdapter:n=>{n=Wn.isArray(n)?n:[n];const{length:r}=n;let e,i;const o={};for(let a=0;a<r;a++){e=n[a];let l;if(i=e,!oj(e)&&(i=rS[(l=String(e)).toLowerCase()],i===void 0))throw new oa(`Unknown adapter '${l}'`);if(i)break;o[l||"#"+a]=i}if(!i){const a=Object.entries(o).map(([t,h])=>`adapter ${t} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=r?a.length>1?`since :
`+a.map(J6).join(`
`):" "+J6(a[0]):"as no adapter specified";throw new oa("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:rS};function q3(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Oy(null,n)}function eI(n){return q3(n),n.headers=bd.from(n.headers),n.data=K3.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),KF.getAdapter(n.adapter||lb.adapter)(n).then(function(i){return q3(n),i.data=K3.call(n,n.transformResponse,i),i.headers=bd.from(i.headers),i},function(i){return HF(i)||(q3(n),i&&i.response&&(i.response.data=K3.call(n,n.transformResponse,i.response),i.response.headers=bd.from(i.response.headers))),Promise.reject(i)})}const qF="1.10.0",qw={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{qw[n]=function(i){return typeof i===n||"a"+(r<1?"n ":" ")+n}});const tI={};qw.transitional=function(r,e,i){function o(a,l){return"[Axios v"+qF+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,t)=>{if(r===!1)throw new oa(o(l," has been removed"+(e?" in "+e:"")),oa.ERR_DEPRECATED);return e&&!tI[l]&&(tI[l]=!0,console.warn(o(l," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(a,l,t):!0}};qw.spelling=function(r){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function aj(n,r,e){if(typeof n!="object")throw new oa("options must be an object",oa.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],l=r[a];if(l){const t=n[a],h=t===void 0||l(t,a,n);if(h!==!0)throw new oa("option "+a+" must be "+h,oa.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new oa("Unknown option "+a,oa.ERR_BAD_OPTION)}}const Ux={assertOptions:aj,validators:qw},tm=Ux.validators;let Y0=class{constructor(r){this.defaults=r||{},this.interceptors={request:new W6,response:new W6}}async request(r,e){try{return await this._request(r,e)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=d1(this.defaults,e);const{transitional:i,paramsSerializer:o,headers:a}=e;i!==void 0&&Ux.assertOptions(i,{silentJSONParsing:tm.transitional(tm.boolean),forcedJSONParsing:tm.transitional(tm.boolean),clarifyTimeoutError:tm.transitional(tm.boolean)},!1),o!=null&&(Wn.isFunction(o)?e.paramsSerializer={serialize:o}:Ux.assertOptions(o,{encode:tm.function,serialize:tm.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Ux.assertOptions(e,{baseUrl:tm.spelling("baseURL"),withXsrfToken:tm.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=a&&Wn.merge(a.common,a[e.method]);a&&Wn.forEach(["delete","get","head","post","put","patch","common"],b=>{delete a[b]}),e.headers=bd.concat(l,a);const t=[];let h=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(e)===!1||(h=h&&x.synchronous,t.unshift(x.fulfilled,x.rejected))});const f=[];this.interceptors.response.forEach(function(x){f.push(x.fulfilled,x.rejected)});let p,_=0,g;if(!h){const b=[eI.bind(this),void 0];for(b.unshift.apply(b,t),b.push.apply(b,f),g=b.length,p=Promise.resolve(e);_<g;)p=p.then(b[_++],b[_++]);return p}g=t.length;let m=e;for(_=0;_<g;){const b=t[_++],x=t[_++];try{m=b(m)}catch(v){x.call(this,v);break}}try{p=eI.call(this,m)}catch(b){return Promise.reject(b)}for(_=0,g=f.length;_<g;)p=p.then(f[_++],f[_++]);return p}getUri(r){r=d1(this.defaults,r);const e=VF(r.baseURL,r.url,r.allowAbsoluteUrls);return jF(e,r.params,r.paramsSerializer)}};Wn.forEach(["delete","get","head","options"],function(r){Y0.prototype[r]=function(e,i){return this.request(d1(i||{},{method:r,url:e,data:(i||{}).data}))}});Wn.forEach(["post","put","patch"],function(r){function e(i){return function(a,l,t){return this.request(d1(t||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Y0.prototype[r]=e(),Y0.prototype[r+"Form"]=e(!0)});let lj=class YF{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const l=new Promise(t=>{i.subscribe(t),a=t}).then(o);return l.cancel=function(){i.unsubscribe(a)},l},r(function(a,l,t){i.reason||(i.reason=new Oy(a,l,t),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const r=new AbortController,e=i=>{r.abort(i)};return this.subscribe(e),r.signal.unsubscribe=()=>this.unsubscribe(e),r.signal}static source(){let r;return{token:new YF(function(o){r=o}),cancel:r}}};function cj(n){return function(e){return n.apply(null,e)}}function uj(n){return Wn.isObject(n)&&n.isAxiosError===!0}const nS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nS).forEach(([n,r])=>{nS[r]=n});function XF(n){const r=new Y0(n),e=BF(Y0.prototype.request,r);return Wn.extend(e,Y0.prototype,r,{allOwnKeys:!0}),Wn.extend(e,r,null,{allOwnKeys:!0}),e.create=function(o){return XF(d1(n,o))},e}const Mu=XF(lb);Mu.Axios=Y0;Mu.CanceledError=Oy;Mu.CancelToken=lj;Mu.isCancel=HF;Mu.VERSION=qF;Mu.toFormData=$w;Mu.AxiosError=oa;Mu.Cancel=Mu.CanceledError;Mu.all=function(r){return Promise.all(r)};Mu.spread=cj;Mu.isAxiosError=uj;Mu.mergeConfig=d1;Mu.AxiosHeaders=bd;Mu.formToJSON=n=>zF(Wn.isHTMLForm(n)?new FormData(n):n);Mu.getAdapter=KF.getAdapter;Mu.HttpStatusCode=nS;Mu.default=Mu;const{Axios:are,AxiosError:lre,CanceledError:cre,isCancel:ure,CancelToken:hre,VERSION:fre,all:dre,Cancel:pre,isAxiosError:Are,spread:mre,toFormData:gre,AxiosHeaders:yre,HttpStatusCode:_re,formToJSON:vre,getAdapter:bre,mergeConfig:xre}=Mu;var zx={exports:{}},hj=zx.exports,rI;function fj(){return rI||(rI=1,function(n,r){(function(i,o){n.exports=o()})(typeof self<"u"?self:hj,function(){return function(e){var i={};function o(a){if(i[a])return i[a].exports;var l=i[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=e,o.c=i,o.d=function(a,l,t){o.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:t})},o.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s=0)}({"./dist/icons.json":function(e){e.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./node_modules/classnames/dedupe.js":function(e,i,o){var a,l;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t=function(){function h(){}h.prototype=Object.create(null);function f(S,B){for(var F=B.length,O=0;O<F;++O)x(S,B[O])}var p={}.hasOwnProperty;function _(S,B){S[B]=!0}function g(S,B){for(var F in B)p.call(B,F)&&(S[F]=!!B[F])}var m=/\s+/;function b(S,B){for(var F=B.split(m),O=F.length,V=0;V<O;++V)S[F[V]]=!0}function x(S,B){if(B){var F=typeof B;F==="string"?b(S,B):Array.isArray(B)?f(S,B):F==="object"?g(S,B):F==="number"&&_(S,B)}}function v(){for(var S=arguments.length,B=Array(S),F=0;F<S;F++)B[F]=arguments[F];var O=new h;f(O,B);var V=[];for(var X in O)O[X]&&V.push(X);return V.join(" ")}return v}();typeof e<"u"&&e.exports?e.exports=t:(a=[],l=(function(){return t}).apply(i,a),l!==void 0&&(e.exports=l))})()},"./node_modules/core-js/es/array/from.js":function(e,i,o){o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/es.array.from.js");var a=o("./node_modules/core-js/internals/path.js");e.exports=a.Array.from},"./node_modules/core-js/internals/a-function.js":function(e,i){e.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"./node_modules/core-js/internals/an-object.js":function(e,i,o){var a=o("./node_modules/core-js/internals/is-object.js");e.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"./node_modules/core-js/internals/array-from.js":function(e,i,o){var a=o("./node_modules/core-js/internals/bind-context.js"),l=o("./node_modules/core-js/internals/to-object.js"),t=o("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),h=o("./node_modules/core-js/internals/is-array-iterator-method.js"),f=o("./node_modules/core-js/internals/to-length.js"),p=o("./node_modules/core-js/internals/create-property.js"),_=o("./node_modules/core-js/internals/get-iterator-method.js");e.exports=function(m){var b=l(m),x=typeof this=="function"?this:Array,v=arguments.length,S=v>1?arguments[1]:void 0,B=S!==void 0,F=0,O=_(b),V,X,Q,ee;if(B&&(S=a(S,v>2?arguments[2]:void 0,2)),O!=null&&!(x==Array&&h(O)))for(ee=O.call(b),X=new x;!(Q=ee.next()).done;F++)p(X,F,B?t(ee,S,[Q.value,F],!0):Q.value);else for(V=f(b.length),X=new x(V);V>F;F++)p(X,F,B?S(b[F],F):b[F]);return X.length=F,X}},"./node_modules/core-js/internals/array-includes.js":function(e,i,o){var a=o("./node_modules/core-js/internals/to-indexed-object.js"),l=o("./node_modules/core-js/internals/to-length.js"),t=o("./node_modules/core-js/internals/to-absolute-index.js");e.exports=function(h){return function(f,p,_){var g=a(f),m=l(g.length),b=t(_,m),x;if(h&&p!=p){for(;m>b;)if(x=g[b++],x!=x)return!0}else for(;m>b;b++)if((h||b in g)&&g[b]===p)return h||b||0;return!h&&-1}}},"./node_modules/core-js/internals/bind-context.js":function(e,i,o){var a=o("./node_modules/core-js/internals/a-function.js");e.exports=function(l,t,h){if(a(l),t===void 0)return l;switch(h){case 0:return function(){return l.call(t)};case 1:return function(f){return l.call(t,f)};case 2:return function(f,p){return l.call(t,f,p)};case 3:return function(f,p,_){return l.call(t,f,p,_)}}return function(){return l.apply(t,arguments)}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(e,i,o){var a=o("./node_modules/core-js/internals/an-object.js");e.exports=function(l,t,h,f){try{return f?t(a(h)[0],h[1]):t(h)}catch(_){var p=l.return;throw p!==void 0&&a(p.call(l)),_}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(e,i,o){var a=o("./node_modules/core-js/internals/well-known-symbol.js"),l=a("iterator"),t=!1;try{var h=0,f={next:function(){return{done:!!h++}},return:function(){t=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}e.exports=function(p,_){if(!_&&!t)return!1;var g=!1;try{var m={};m[l]=function(){return{next:function(){return{done:g=!0}}}},p(m)}catch{}return g}},"./node_modules/core-js/internals/classof-raw.js":function(e,i){var o={}.toString;e.exports=function(a){return o.call(a).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(e,i,o){var a=o("./node_modules/core-js/internals/classof-raw.js"),l=o("./node_modules/core-js/internals/well-known-symbol.js"),t=l("toStringTag"),h=a(function(){return arguments}())=="Arguments",f=function(p,_){try{return p[_]}catch{}};e.exports=function(p){var _,g,m;return p===void 0?"Undefined":p===null?"Null":typeof(g=f(_=Object(p),t))=="string"?g:h?a(_):(m=a(_))=="Object"&&typeof _.callee=="function"?"Arguments":m}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(e,i,o){var a=o("./node_modules/core-js/internals/has.js"),l=o("./node_modules/core-js/internals/own-keys.js"),t=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),h=o("./node_modules/core-js/internals/object-define-property.js");e.exports=function(f,p){for(var _=l(p),g=h.f,m=t.f,b=0;b<_.length;b++){var x=_[b];a(f,x)||g(f,x,m(p,x))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(e,i,o){var a=o("./node_modules/core-js/internals/fails.js");e.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},"./node_modules/core-js/internals/create-iterator-constructor.js":function(e,i,o){var a=o("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,l=o("./node_modules/core-js/internals/object-create.js"),t=o("./node_modules/core-js/internals/create-property-descriptor.js"),h=o("./node_modules/core-js/internals/set-to-string-tag.js"),f=o("./node_modules/core-js/internals/iterators.js"),p=function(){return this};e.exports=function(_,g,m){var b=g+" Iterator";return _.prototype=l(a,{next:t(1,m)}),h(_,b,!1,!0),f[b]=p,_}},"./node_modules/core-js/internals/create-property-descriptor.js":function(e,i){e.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"./node_modules/core-js/internals/create-property.js":function(e,i,o){var a=o("./node_modules/core-js/internals/to-primitive.js"),l=o("./node_modules/core-js/internals/object-define-property.js"),t=o("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(h,f,p){var _=a(f);_ in h?l.f(h,_,t(0,p)):h[_]=p}},"./node_modules/core-js/internals/define-iterator.js":function(e,i,o){var a=o("./node_modules/core-js/internals/export.js"),l=o("./node_modules/core-js/internals/create-iterator-constructor.js"),t=o("./node_modules/core-js/internals/object-get-prototype-of.js"),h=o("./node_modules/core-js/internals/object-set-prototype-of.js"),f=o("./node_modules/core-js/internals/set-to-string-tag.js"),p=o("./node_modules/core-js/internals/hide.js"),_=o("./node_modules/core-js/internals/redefine.js"),g=o("./node_modules/core-js/internals/well-known-symbol.js"),m=o("./node_modules/core-js/internals/is-pure.js"),b=o("./node_modules/core-js/internals/iterators.js"),x=o("./node_modules/core-js/internals/iterators-core.js"),v=x.IteratorPrototype,S=x.BUGGY_SAFARI_ITERATORS,B=g("iterator"),F="keys",O="values",V="entries",X=function(){return this};e.exports=function(Q,ee,ne,Ae,fe,ce,G){l(ne,ee,Ae);var Z=function(Te){if(Te===fe&&U)return U;if(!S&&Te in R)return R[Te];switch(Te){case F:return function(){return new ne(this,Te)};case O:return function(){return new ne(this,Te)};case V:return function(){return new ne(this,Te)}}return function(){return new ne(this)}},z=ee+" Iterator",k=!1,R=Q.prototype,N=R[B]||R["@@iterator"]||fe&&R[fe],U=!S&&N||Z(fe),Y=ee=="Array"&&R.entries||N,de,J,xe;if(Y&&(de=t(Y.call(new Q)),v!==Object.prototype&&de.next&&(!m&&t(de)!==v&&(h?h(de,v):typeof de[B]!="function"&&p(de,B,X)),f(de,z,!0,!0),m&&(b[z]=X))),fe==O&&N&&N.name!==O&&(k=!0,U=function(){return N.call(this)}),(!m||G)&&R[B]!==U&&p(R,B,U),b[ee]=U,fe)if(J={values:Z(O),keys:ce?U:Z(F),entries:Z(V)},G)for(xe in J)(S||k||!(xe in R))&&_(R,xe,J[xe]);else a({target:ee,proto:!0,forced:S||k},J);return J}},"./node_modules/core-js/internals/descriptors.js":function(e,i,o){var a=o("./node_modules/core-js/internals/fails.js");e.exports=!a(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/document-create-element.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/is-object.js"),t=a.document,h=l(t)&&l(t.createElement);e.exports=function(f){return h?t.createElement(f):{}}},"./node_modules/core-js/internals/enum-bug-keys.js":function(e,i){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,t=o("./node_modules/core-js/internals/hide.js"),h=o("./node_modules/core-js/internals/redefine.js"),f=o("./node_modules/core-js/internals/set-global.js"),p=o("./node_modules/core-js/internals/copy-constructor-properties.js"),_=o("./node_modules/core-js/internals/is-forced.js");e.exports=function(g,m){var b=g.target,x=g.global,v=g.stat,S,B,F,O,V,X;if(x?B=a:v?B=a[b]||f(b,{}):B=(a[b]||{}).prototype,B)for(F in m){if(V=m[F],g.noTargetGet?(X=l(B,F),O=X&&X.value):O=B[F],S=_(x?F:b+(v?".":"#")+F,g.forced),!S&&O!==void 0){if(typeof V==typeof O)continue;p(V,O)}(g.sham||O&&O.sham)&&t(V,"sham",!0),h(B,F,V,g)}}},"./node_modules/core-js/internals/fails.js":function(e,i){e.exports=function(o){try{return!!o()}catch{return!0}}},"./node_modules/core-js/internals/function-to-string.js":function(e,i,o){var a=o("./node_modules/core-js/internals/shared.js");e.exports=a("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/get-iterator-method.js":function(e,i,o){var a=o("./node_modules/core-js/internals/classof.js"),l=o("./node_modules/core-js/internals/iterators.js"),t=o("./node_modules/core-js/internals/well-known-symbol.js"),h=t("iterator");e.exports=function(f){if(f!=null)return f[h]||f["@@iterator"]||l[a(f)]}},"./node_modules/core-js/internals/global.js":function(e,i,o){(function(a){var l="object",t=function(h){return h&&h.Math==Math&&h};e.exports=t(typeof globalThis==l&&globalThis)||t(typeof window==l&&window)||t(typeof self==l&&self)||t(typeof a==l&&a)||Function("return this")()}).call(this,o("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/has.js":function(e,i){var o={}.hasOwnProperty;e.exports=function(a,l){return o.call(a,l)}},"./node_modules/core-js/internals/hidden-keys.js":function(e,i){e.exports={}},"./node_modules/core-js/internals/hide.js":function(e,i,o){var a=o("./node_modules/core-js/internals/descriptors.js"),l=o("./node_modules/core-js/internals/object-define-property.js"),t=o("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=a?function(h,f,p){return l.f(h,f,t(1,p))}:function(h,f,p){return h[f]=p,h}},"./node_modules/core-js/internals/html.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=a.document;e.exports=l&&l.documentElement},"./node_modules/core-js/internals/ie8-dom-define.js":function(e,i,o){var a=o("./node_modules/core-js/internals/descriptors.js"),l=o("./node_modules/core-js/internals/fails.js"),t=o("./node_modules/core-js/internals/document-create-element.js");e.exports=!a&&!l(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(e,i,o){var a=o("./node_modules/core-js/internals/fails.js"),l=o("./node_modules/core-js/internals/classof-raw.js"),t="".split;e.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return l(h)=="String"?t.call(h,""):Object(h)}:Object},"./node_modules/core-js/internals/internal-state.js":function(e,i,o){var a=o("./node_modules/core-js/internals/native-weak-map.js"),l=o("./node_modules/core-js/internals/global.js"),t=o("./node_modules/core-js/internals/is-object.js"),h=o("./node_modules/core-js/internals/hide.js"),f=o("./node_modules/core-js/internals/has.js"),p=o("./node_modules/core-js/internals/shared-key.js"),_=o("./node_modules/core-js/internals/hidden-keys.js"),g=l.WeakMap,m,b,x,v=function(Q){return x(Q)?b(Q):m(Q,{})},S=function(Q){return function(ee){var ne;if(!t(ee)||(ne=b(ee)).type!==Q)throw TypeError("Incompatible receiver, "+Q+" required");return ne}};if(a){var B=new g,F=B.get,O=B.has,V=B.set;m=function(Q,ee){return V.call(B,Q,ee),ee},b=function(Q){return F.call(B,Q)||{}},x=function(Q){return O.call(B,Q)}}else{var X=p("state");_[X]=!0,m=function(Q,ee){return h(Q,X,ee),ee},b=function(Q){return f(Q,X)?Q[X]:{}},x=function(Q){return f(Q,X)}}e.exports={set:m,get:b,has:x,enforce:v,getterFor:S}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(e,i,o){var a=o("./node_modules/core-js/internals/well-known-symbol.js"),l=o("./node_modules/core-js/internals/iterators.js"),t=a("iterator"),h=Array.prototype;e.exports=function(f){return f!==void 0&&(l.Array===f||h[t]===f)}},"./node_modules/core-js/internals/is-forced.js":function(e,i,o){var a=o("./node_modules/core-js/internals/fails.js"),l=/#|\.prototype\./,t=function(g,m){var b=f[h(g)];return b==_?!0:b==p?!1:typeof m=="function"?a(m):!!m},h=t.normalize=function(g){return String(g).replace(l,".").toLowerCase()},f=t.data={},p=t.NATIVE="N",_=t.POLYFILL="P";e.exports=t},"./node_modules/core-js/internals/is-object.js":function(e,i){e.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},"./node_modules/core-js/internals/is-pure.js":function(e,i){e.exports=!1},"./node_modules/core-js/internals/iterators-core.js":function(e,i,o){var a=o("./node_modules/core-js/internals/object-get-prototype-of.js"),l=o("./node_modules/core-js/internals/hide.js"),t=o("./node_modules/core-js/internals/has.js"),h=o("./node_modules/core-js/internals/well-known-symbol.js"),f=o("./node_modules/core-js/internals/is-pure.js"),p=h("iterator"),_=!1,g=function(){return this},m,b,x;[].keys&&(x=[].keys(),"next"in x?(b=a(a(x)),b!==Object.prototype&&(m=b)):_=!0),m==null&&(m={}),!f&&!t(m,p)&&l(m,p,g),e.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:_}},"./node_modules/core-js/internals/iterators.js":function(e,i){e.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(e,i,o){var a=o("./node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-weak-map.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/function-to-string.js"),t=a.WeakMap;e.exports=typeof t=="function"&&/native code/.test(l.call(t))},"./node_modules/core-js/internals/object-create.js":function(e,i,o){var a=o("./node_modules/core-js/internals/an-object.js"),l=o("./node_modules/core-js/internals/object-define-properties.js"),t=o("./node_modules/core-js/internals/enum-bug-keys.js"),h=o("./node_modules/core-js/internals/hidden-keys.js"),f=o("./node_modules/core-js/internals/html.js"),p=o("./node_modules/core-js/internals/document-create-element.js"),_=o("./node_modules/core-js/internals/shared-key.js"),g=_("IE_PROTO"),m="prototype",b=function(){},x=function(){var v=p("iframe"),S=t.length,B="<",F="script",O=">",V="java"+F+":",X;for(v.style.display="none",f.appendChild(v),v.src=String(V),X=v.contentWindow.document,X.open(),X.write(B+F+O+"document.F=Object"+B+"/"+F+O),X.close(),x=X.F;S--;)delete x[m][t[S]];return x()};e.exports=Object.create||function(S,B){var F;return S!==null?(b[m]=a(S),F=new b,b[m]=null,F[g]=S):F=x(),B===void 0?F:l(F,B)},h[g]=!0},"./node_modules/core-js/internals/object-define-properties.js":function(e,i,o){var a=o("./node_modules/core-js/internals/descriptors.js"),l=o("./node_modules/core-js/internals/object-define-property.js"),t=o("./node_modules/core-js/internals/an-object.js"),h=o("./node_modules/core-js/internals/object-keys.js");e.exports=a?Object.defineProperties:function(p,_){t(p);for(var g=h(_),m=g.length,b=0,x;m>b;)l.f(p,x=g[b++],_[x]);return p}},"./node_modules/core-js/internals/object-define-property.js":function(e,i,o){var a=o("./node_modules/core-js/internals/descriptors.js"),l=o("./node_modules/core-js/internals/ie8-dom-define.js"),t=o("./node_modules/core-js/internals/an-object.js"),h=o("./node_modules/core-js/internals/to-primitive.js"),f=Object.defineProperty;i.f=a?f:function(_,g,m){if(t(_),g=h(g,!0),t(m),l)try{return f(_,g,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(_[g]=m.value),_}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,i,o){var a=o("./node_modules/core-js/internals/descriptors.js"),l=o("./node_modules/core-js/internals/object-property-is-enumerable.js"),t=o("./node_modules/core-js/internals/create-property-descriptor.js"),h=o("./node_modules/core-js/internals/to-indexed-object.js"),f=o("./node_modules/core-js/internals/to-primitive.js"),p=o("./node_modules/core-js/internals/has.js"),_=o("./node_modules/core-js/internals/ie8-dom-define.js"),g=Object.getOwnPropertyDescriptor;i.f=a?g:function(b,x){if(b=h(b),x=f(x,!0),_)try{return g(b,x)}catch{}if(p(b,x))return t(!l.f.call(b,x),b[x])}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(e,i,o){var a=o("./node_modules/core-js/internals/object-keys-internal.js"),l=o("./node_modules/core-js/internals/enum-bug-keys.js"),t=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(f){return a(f,t)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,i){i.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(e,i,o){var a=o("./node_modules/core-js/internals/has.js"),l=o("./node_modules/core-js/internals/to-object.js"),t=o("./node_modules/core-js/internals/shared-key.js"),h=o("./node_modules/core-js/internals/correct-prototype-getter.js"),f=t("IE_PROTO"),p=Object.prototype;e.exports=h?Object.getPrototypeOf:function(_){return _=l(_),a(_,f)?_[f]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?p:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(e,i,o){var a=o("./node_modules/core-js/internals/has.js"),l=o("./node_modules/core-js/internals/to-indexed-object.js"),t=o("./node_modules/core-js/internals/array-includes.js"),h=o("./node_modules/core-js/internals/hidden-keys.js"),f=t(!1);e.exports=function(p,_){var g=l(p),m=0,b=[],x;for(x in g)!a(h,x)&&a(g,x)&&b.push(x);for(;_.length>m;)a(g,x=_[m++])&&(~f(b,x)||b.push(x));return b}},"./node_modules/core-js/internals/object-keys.js":function(e,i,o){var a=o("./node_modules/core-js/internals/object-keys-internal.js"),l=o("./node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(h){return a(h,l)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(e,i,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,t=l&&!a.call({1:2},1);i.f=t?function(f){var p=l(this,f);return!!p&&p.enumerable}:a},"./node_modules/core-js/internals/object-set-prototype-of.js":function(e,i,o){var a=o("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l=!1,t={},h;try{h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,h.call(t,[]),l=t instanceof Array}catch{}return function(p,_){return a(p,_),l?h.call(p,_):p.__proto__=_,p}}():void 0)},"./node_modules/core-js/internals/own-keys.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/object-get-own-property-names.js"),t=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),h=o("./node_modules/core-js/internals/an-object.js"),f=a.Reflect;e.exports=f&&f.ownKeys||function(_){var g=l.f(h(_)),m=t.f;return m?g.concat(m(_)):g}},"./node_modules/core-js/internals/path.js":function(e,i,o){e.exports=o("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/redefine.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/shared.js"),t=o("./node_modules/core-js/internals/hide.js"),h=o("./node_modules/core-js/internals/has.js"),f=o("./node_modules/core-js/internals/set-global.js"),p=o("./node_modules/core-js/internals/function-to-string.js"),_=o("./node_modules/core-js/internals/internal-state.js"),g=_.get,m=_.enforce,b=String(p).split("toString");l("inspectSource",function(x){return p.call(x)}),(e.exports=function(x,v,S,B){var F=B?!!B.unsafe:!1,O=B?!!B.enumerable:!1,V=B?!!B.noTargetGet:!1;if(typeof S=="function"&&(typeof v=="string"&&!h(S,"name")&&t(S,"name",v),m(S).source=b.join(typeof v=="string"?v:"")),x===a){O?x[v]=S:f(v,S);return}else F?!V&&x[v]&&(O=!0):delete x[v];O?x[v]=S:t(x,v,S)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||p.call(this)})},"./node_modules/core-js/internals/require-object-coercible.js":function(e,i){e.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"./node_modules/core-js/internals/set-global.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/hide.js");e.exports=function(t,h){try{l(a,t,h)}catch{a[t]=h}return h}},"./node_modules/core-js/internals/set-to-string-tag.js":function(e,i,o){var a=o("./node_modules/core-js/internals/object-define-property.js").f,l=o("./node_modules/core-js/internals/has.js"),t=o("./node_modules/core-js/internals/well-known-symbol.js"),h=t("toStringTag");e.exports=function(f,p,_){f&&!l(f=_?f:f.prototype,h)&&a(f,h,{configurable:!0,value:p})}},"./node_modules/core-js/internals/shared-key.js":function(e,i,o){var a=o("./node_modules/core-js/internals/shared.js"),l=o("./node_modules/core-js/internals/uid.js"),t=a("keys");e.exports=function(h){return t[h]||(t[h]=l(h))}},"./node_modules/core-js/internals/shared.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/set-global.js"),t=o("./node_modules/core-js/internals/is-pure.js"),h="__core-js_shared__",f=a[h]||l(h,{});(e.exports=function(p,_){return f[p]||(f[p]=_!==void 0?_:{})})("versions",[]).push({version:"3.1.3",mode:t?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-at.js":function(e,i,o){var a=o("./node_modules/core-js/internals/to-integer.js"),l=o("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(t,h,f){var p=String(l(t)),_=a(h),g=p.length,m,b;return _<0||_>=g?f?"":void 0:(m=p.charCodeAt(_),m<55296||m>56319||_+1===g||(b=p.charCodeAt(_+1))<56320||b>57343?f?p.charAt(_):m:f?p.slice(_,_+2):(m-55296<<10)+(b-56320)+65536)}},"./node_modules/core-js/internals/to-absolute-index.js":function(e,i,o){var a=o("./node_modules/core-js/internals/to-integer.js"),l=Math.max,t=Math.min;e.exports=function(h,f){var p=a(h);return p<0?l(p+f,0):t(p,f)}},"./node_modules/core-js/internals/to-indexed-object.js":function(e,i,o){var a=o("./node_modules/core-js/internals/indexed-object.js"),l=o("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(t){return a(l(t))}},"./node_modules/core-js/internals/to-integer.js":function(e,i){var o=Math.ceil,a=Math.floor;e.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},"./node_modules/core-js/internals/to-length.js":function(e,i,o){var a=o("./node_modules/core-js/internals/to-integer.js"),l=Math.min;e.exports=function(t){return t>0?l(a(t),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(e,i,o){var a=o("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(l){return Object(a(l))}},"./node_modules/core-js/internals/to-primitive.js":function(e,i,o){var a=o("./node_modules/core-js/internals/is-object.js");e.exports=function(l,t){if(!a(l))return l;var h,f;if(t&&typeof(h=l.toString)=="function"&&!a(f=h.call(l))||typeof(h=l.valueOf)=="function"&&!a(f=h.call(l))||!t&&typeof(h=l.toString)=="function"&&!a(f=h.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/uid.js":function(e,i){var o=0,a=Math.random();e.exports=function(l){return"Symbol(".concat(l===void 0?"":l,")_",(++o+a).toString(36))}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":function(e,i,o){var a=o("./node_modules/core-js/internals/is-object.js"),l=o("./node_modules/core-js/internals/an-object.js");e.exports=function(t,h){if(l(t),!a(h)&&h!==null)throw TypeError("Can't set "+String(h)+" as a prototype")}},"./node_modules/core-js/internals/well-known-symbol.js":function(e,i,o){var a=o("./node_modules/core-js/internals/global.js"),l=o("./node_modules/core-js/internals/shared.js"),t=o("./node_modules/core-js/internals/uid.js"),h=o("./node_modules/core-js/internals/native-symbol.js"),f=a.Symbol,p=l("wks");e.exports=function(_){return p[_]||(p[_]=h&&f[_]||(h?f:t)("Symbol."+_))}},"./node_modules/core-js/modules/es.array.from.js":function(e,i,o){var a=o("./node_modules/core-js/internals/export.js"),l=o("./node_modules/core-js/internals/array-from.js"),t=o("./node_modules/core-js/internals/check-correctness-of-iteration.js"),h=!t(function(f){Array.from(f)});a({target:"Array",stat:!0,forced:h},{from:l})},"./node_modules/core-js/modules/es.string.iterator.js":function(e,i,o){var a=o("./node_modules/core-js/internals/string-at.js"),l=o("./node_modules/core-js/internals/internal-state.js"),t=o("./node_modules/core-js/internals/define-iterator.js"),h="String Iterator",f=l.set,p=l.getterFor(h);t(String,"String",function(_){f(this,{type:h,string:String(_),index:0})},function(){var g=p(this),m=g.string,b=g.index,x;return b>=m.length?{value:void 0,done:!0}:(x=a(m,b,!0),g.index+=x.length,{value:x,done:!1})})},"./node_modules/webpack/buildin/global.js":function(e,i){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(o=window)}e.exports=o},"./src/default-attrs.json":function(e){e.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/icon.js":function(e,i,o){Object.defineProperty(i,"__esModule",{value:!0});var a=Object.assign||function(x){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var B in S)Object.prototype.hasOwnProperty.call(S,B)&&(x[B]=S[B])}return x},l=function(){function x(v,S){for(var B=0;B<S.length;B++){var F=S[B];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(v,F.key,F)}}return function(v,S,B){return S&&x(v.prototype,S),B&&x(v,B),v}}(),t=o("./node_modules/classnames/dedupe.js"),h=_(t),f=o("./src/default-attrs.json"),p=_(f);function _(x){return x&&x.__esModule?x:{default:x}}function g(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}var m=function(){function x(v,S){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];g(this,x),this.name=v,this.contents=S,this.tags=B,this.attrs=a({},p.default,{class:"feather feather-"+v})}return l(x,[{key:"toSvg",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=a({},this.attrs,S,{class:(0,h.default)(this.attrs.class,S.class)});return"<svg "+b(B)+">"+this.contents+"</svg>"}},{key:"toString",value:function(){return this.contents}}]),x}();function b(x){return Object.keys(x).map(function(v){return v+'="'+x[v]+'"'}).join(" ")}i.default=m},"./src/icons.js":function(e,i,o){Object.defineProperty(i,"__esModule",{value:!0});var a=o("./src/icon.js"),l=_(a),t=o("./dist/icons.json"),h=_(t),f=o("./src/tags.json"),p=_(f);function _(g){return g&&g.__esModule?g:{default:g}}i.default=Object.keys(h.default).map(function(g){return new l.default(g,h.default[g],p.default[g])}).reduce(function(g,m){return g[m.name]=m,g},{})},"./src/index.js":function(e,i,o){var a=o("./src/icons.js"),l=_(a),t=o("./src/to-svg.js"),h=_(t),f=o("./src/replace.js"),p=_(f);function _(g){return g&&g.__esModule?g:{default:g}}e.exports={icons:l.default,toSvg:h.default,replace:p.default}},"./src/replace.js":function(e,i,o){Object.defineProperty(i,"__esModule",{value:!0});var a=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var v=arguments[x];for(var S in v)Object.prototype.hasOwnProperty.call(v,S)&&(b[S]=v[S])}return b},l=o("./node_modules/classnames/dedupe.js"),t=p(l),h=o("./src/icons.js"),f=p(h);function p(b){return b&&b.__esModule?b:{default:b}}function _(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof document>"u")throw new Error("`feather.replace()` only works in a browser environment.");var x=document.querySelectorAll("[data-feather]");Array.from(x).forEach(function(v){return g(v,b)})}function g(b){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=m(b),S=v["data-feather"];if(delete v["data-feather"],f.default[S]===void 0){console.warn("feather: '"+S+"' is not a valid icon");return}var B=f.default[S].toSvg(a({},x,v,{class:(0,t.default)(x.class,v.class)})),F=new DOMParser().parseFromString(B,"image/svg+xml"),O=F.querySelector("svg");b.parentNode.replaceChild(O,b)}function m(b){return Array.from(b.attributes).reduce(function(x,v){return x[v.name]=v.value,x},{})}i.default=_},"./src/tags.json":function(e){e.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/to-svg.js":function(e,i,o){Object.defineProperty(i,"__esModule",{value:!0});var a=o("./src/icons.js"),l=t(a);function t(f){return f&&f.__esModule?f:{default:f}}function h(f){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!f)throw new Error("The required `key` (icon name) parameter is missing.");if(!l.default[f])throw new Error("No icon matching '"+f+"'. See the complete list of icons at https://feathericons.com");return l.default[f].toSvg(p)}i.default=h},0:function(e,i,o){o("./node_modules/core-js/es/array/from.js"),e.exports=o("./src/index.js")}})})}(zx)),zx.exports}var dj=fj();const ZF=s0(dj);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var JF;function _s(){return JF.apply(null,arguments)}function pj(n){JF=n}function wA(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function X0(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function bl(n,r){return Object.prototype.hasOwnProperty.call(n,r)}function LC(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var r;for(r in n)if(bl(n,r))return!1;return!0}function yd(n){return n===void 0}function Ym(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function cb(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function eP(n,r){var e=[],i,o=n.length;for(i=0;i<o;++i)e.push(r(n[i],i));return e}function Mg(n,r){for(var e in r)bl(r,e)&&(n[e]=r[e]);return bl(r,"toString")&&(n.toString=r.toString),bl(r,"valueOf")&&(n.valueOf=r.valueOf),n}function ym(n,r,e,i){return wP(n,r,e,i,!0).utc()}function Aj(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function da(n){return n._pf==null&&(n._pf=Aj()),n._pf}var iS;Array.prototype.some?iS=Array.prototype.some:iS=function(n){var r=Object(this),e=r.length>>>0,i;for(i=0;i<e;i++)if(i in r&&n.call(this,r[i],i,r))return!0;return!1};function kC(n){var r=null,e=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(r=da(n),e=iS.call(r.parsedDateParts,function(o){return o!=null}),i=r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&e),n._strict&&(i=i&&r.charsLeftOver===0&&r.unusedTokens.length===0&&r.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function Yw(n){var r=ym(NaN);return n!=null?Mg(da(r),n):da(r).userInvalidated=!0,r}var nI=_s.momentProperties=[],Y3=!1;function OC(n,r){var e,i,o,a=nI.length;if(yd(r._isAMomentObject)||(n._isAMomentObject=r._isAMomentObject),yd(r._i)||(n._i=r._i),yd(r._f)||(n._f=r._f),yd(r._l)||(n._l=r._l),yd(r._strict)||(n._strict=r._strict),yd(r._tzm)||(n._tzm=r._tzm),yd(r._isUTC)||(n._isUTC=r._isUTC),yd(r._offset)||(n._offset=r._offset),yd(r._pf)||(n._pf=da(r)),yd(r._locale)||(n._locale=r._locale),a>0)for(e=0;e<a;e++)i=nI[e],o=r[i],yd(o)||(n[i]=o);return n}function ub(n){OC(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Y3===!1&&(Y3=!0,_s.updateOffset(this),Y3=!1)}function SA(n){return n instanceof ub||n!=null&&n._isAMomentObject!=null}function tP(n){_s.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function Qp(n,r){var e=!0;return Mg(function(){if(_s.deprecationHandler!=null&&_s.deprecationHandler(null,n),e){var i=[],o,a,l,t=arguments.length;for(a=0;a<t;a++){if(o="",typeof arguments[a]=="object"){o+=`
[`+a+"] ";for(l in arguments[0])bl(arguments[0],l)&&(o+=l+": "+arguments[0][l]+", ");o=o.slice(0,-2)}else o=arguments[a];i.push(o)}tP(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),e=!1}return r.apply(this,arguments)},r)}var iI={};function rP(n,r){_s.deprecationHandler!=null&&_s.deprecationHandler(n,r),iI[n]||(tP(r),iI[n]=!0)}_s.suppressDeprecationWarnings=!1;_s.deprecationHandler=null;function _m(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function mj(n){var r,e;for(e in n)bl(n,e)&&(r=n[e],_m(r)?this[e]=r:this["_"+e]=r);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function sS(n,r){var e=Mg({},n),i;for(i in r)bl(r,i)&&(X0(n[i])&&X0(r[i])?(e[i]={},Mg(e[i],n[i]),Mg(e[i],r[i])):r[i]!=null?e[i]=r[i]:delete e[i]);for(i in n)bl(n,i)&&!bl(r,i)&&X0(n[i])&&(e[i]=Mg({},e[i]));return e}function DC(n){n!=null&&this.set(n)}var oS;Object.keys?oS=Object.keys:oS=function(n){var r,e=[];for(r in n)bl(n,r)&&e.push(r);return e};var gj={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function yj(n,r,e){var i=this._calendar[n]||this._calendar.sameElse;return _m(i)?i.call(r,e):i}function mm(n,r,e){var i=""+Math.abs(n),o=r-i.length,a=n>=0;return(a?e?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}var RC=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ix=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,X3={},dy={};function co(n,r,e,i){var o=i;typeof i=="string"&&(o=function(){return this[i]()}),n&&(dy[n]=o),r&&(dy[r[0]]=function(){return mm(o.apply(this,arguments),r[1],r[2])}),e&&(dy[e]=function(){return this.localeData().ordinal(o.apply(this,arguments),n)})}function _j(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function vj(n){var r=n.match(RC),e,i;for(e=0,i=r.length;e<i;e++)dy[r[e]]?r[e]=dy[r[e]]:r[e]=_j(r[e]);return function(o){var a="",l;for(l=0;l<i;l++)a+=_m(r[l])?r[l].call(o,n):r[l];return a}}function Hx(n,r){return n.isValid()?(r=nP(r,n.localeData()),X3[r]=X3[r]||vj(r),X3[r](n)):n.localeData().invalidDate()}function nP(n,r){var e=5;function i(o){return r.longDateFormat(o)||o}for(ix.lastIndex=0;e>=0&&ix.test(n);)n=n.replace(ix,i),ix.lastIndex=0,e-=1;return n}var bj={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function xj(n){var r=this._longDateFormat[n],e=this._longDateFormat[n.toUpperCase()];return r||!e?r:(this._longDateFormat[n]=e.match(RC).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var wj="Invalid date";function Sj(){return this._invalidDate}var Cj="%d",Ej=/\d{1,2}/;function Bj(n){return this._ordinal.replace("%d",n)}var Tj={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ij(n,r,e,i){var o=this._relativeTime[e];return _m(o)?o(n,r,e,i):o.replace(/%d/i,n)}function Mj(n,r){var e=this._relativeTime[n>0?"future":"past"];return _m(e)?e(r):e.replace(/%s/i,r)}var sI={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Vp(n){return typeof n=="string"?sI[n]||sI[n.toLowerCase()]:void 0}function NC(n){var r={},e,i;for(i in n)bl(n,i)&&(e=Vp(i),e&&(r[e]=n[i]));return r}var Fj={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Pj(n){var r=[],e;for(e in n)bl(n,e)&&r.push({unit:e,priority:Fj[e]});return r.sort(function(i,o){return i.priority-o.priority}),r}var iP=/\d/,ap=/\d\d/,sP=/\d{3}/,jC=/\d{4}/,Xw=/[+-]?\d{6}/,Sc=/\d\d?/,oP=/\d\d\d\d?/,aP=/\d\d\d\d\d\d?/,Zw=/\d{1,3}/,UC=/\d{1,4}/,Jw=/[+-]?\d{1,6}/,Dy=/\d+/,e5=/[+-]?\d+/,Lj=/Z|[+-]\d\d:?\d\d/gi,t5=/Z|[+-]\d\d(?::?\d\d)?/gi,kj=/[+-]?\d+(\.\d{1,3})?/,hb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ry=/^[1-9]\d?/,zC=/^([1-9]\d|\d)/,hw;hw={};function Ms(n,r,e){hw[n]=_m(r)?r:function(i,o){return i&&e?e:r}}function Oj(n,r){return bl(hw,n)?hw[n](r._strict,r._locale):new RegExp(Dj(n))}function Dj(n){return $m(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(r,e,i,o,a){return e||i||o||a}))}function $m(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Rp(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function Ua(n){var r=+n,e=0;return r!==0&&isFinite(r)&&(e=Rp(r)),e}var aS={};function Vl(n,r){var e,i=r,o;for(typeof n=="string"&&(n=[n]),Ym(r)&&(i=function(a,l){l[r]=Ua(a)}),o=n.length,e=0;e<o;e++)aS[n[e]]=i}function fb(n,r){Vl(n,function(e,i,o,a){o._w=o._w||{},r(e,o._w,o,a)})}function Rj(n,r,e){r!=null&&bl(aS,n)&&aS[n](r,e._a,e,n)}function r5(n){return n%4===0&&n%100!==0||n%400===0}var Tf=0,Hm=1,am=2,uh=3,vA=4,Qm=5,G0=6,Nj=7,jj=8;co("Y",0,0,function(){var n=this.year();return n<=9999?mm(n,4):"+"+n});co(0,["YY",2],0,function(){return this.year()%100});co(0,["YYYY",4],0,"year");co(0,["YYYYY",5],0,"year");co(0,["YYYYYY",6,!0],0,"year");Ms("Y",e5);Ms("YY",Sc,ap);Ms("YYYY",UC,jC);Ms("YYYYY",Jw,Xw);Ms("YYYYYY",Jw,Xw);Vl(["YYYYY","YYYYYY"],Tf);Vl("YYYY",function(n,r){r[Tf]=n.length===2?_s.parseTwoDigitYear(n):Ua(n)});Vl("YY",function(n,r){r[Tf]=_s.parseTwoDigitYear(n)});Vl("Y",function(n,r){r[Tf]=parseInt(n,10)});function pv(n){return r5(n)?366:365}_s.parseTwoDigitYear=function(n){return Ua(n)+(Ua(n)>68?1900:2e3)};var lP=Ny("FullYear",!0);function Uj(){return r5(this.year())}function Ny(n,r){return function(e){return e!=null?(cP(this,n,e),_s.updateOffset(this,r),this):Lv(this,n)}}function Lv(n,r){if(!n.isValid())return NaN;var e=n._d,i=n._isUTC;switch(r){case"Milliseconds":return i?e.getUTCMilliseconds():e.getMilliseconds();case"Seconds":return i?e.getUTCSeconds():e.getSeconds();case"Minutes":return i?e.getUTCMinutes():e.getMinutes();case"Hours":return i?e.getUTCHours():e.getHours();case"Date":return i?e.getUTCDate():e.getDate();case"Day":return i?e.getUTCDay():e.getDay();case"Month":return i?e.getUTCMonth():e.getMonth();case"FullYear":return i?e.getUTCFullYear():e.getFullYear();default:return NaN}}function cP(n,r,e){var i,o,a,l,t;if(!(!n.isValid()||isNaN(e))){switch(i=n._d,o=n._isUTC,r){case"Milliseconds":return void(o?i.setUTCMilliseconds(e):i.setMilliseconds(e));case"Seconds":return void(o?i.setUTCSeconds(e):i.setSeconds(e));case"Minutes":return void(o?i.setUTCMinutes(e):i.setMinutes(e));case"Hours":return void(o?i.setUTCHours(e):i.setHours(e));case"Date":return void(o?i.setUTCDate(e):i.setDate(e));case"FullYear":break;default:return}a=e,l=n.month(),t=n.date(),t=t===29&&l===1&&!r5(a)?28:t,o?i.setUTCFullYear(a,l,t):i.setFullYear(a,l,t)}}function zj(n){return n=Vp(n),_m(this[n])?this[n]():this}function Hj(n,r){if(typeof n=="object"){n=NC(n);var e=Pj(n),i,o=e.length;for(i=0;i<o;i++)this[e[i].unit](n[e[i].unit])}else if(n=Vp(n),_m(this[n]))return this[n](r);return this}function Qj(n,r){return(n%r+r)%r}var Su;Array.prototype.indexOf?Su=Array.prototype.indexOf:Su=function(n){var r;for(r=0;r<this.length;++r)if(this[r]===n)return r;return-1};function HC(n,r){if(isNaN(n)||isNaN(r))return NaN;var e=Qj(r,12);return n+=(r-e)/12,e===1?r5(n)?29:28:31-e%7%2}co("M",["MM",2],"Mo",function(){return this.month()+1});co("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});co("MMMM",0,0,function(n){return this.localeData().months(this,n)});Ms("M",Sc,Ry);Ms("MM",Sc,ap);Ms("MMM",function(n,r){return r.monthsShortRegex(n)});Ms("MMMM",function(n,r){return r.monthsRegex(n)});Vl(["M","MM"],function(n,r){r[Hm]=Ua(n)-1});Vl(["MMM","MMMM"],function(n,r,e,i){var o=e._locale.monthsParse(n,i,e._strict);o!=null?r[Hm]=o:da(e).invalidMonth=n});var Vj="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),uP="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hP=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gj=hb,Wj=hb;function $j(n,r){return n?wA(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||hP).test(r)?"format":"standalone"][n.month()]:wA(this._months)?this._months:this._months.standalone}function Kj(n,r){return n?wA(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[hP.test(r)?"format":"standalone"][n.month()]:wA(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function qj(n,r,e){var i,o,a,l=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=ym([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return e?r==="MMM"?(o=Su.call(this._shortMonthsParse,l),o!==-1?o:null):(o=Su.call(this._longMonthsParse,l),o!==-1?o:null):r==="MMM"?(o=Su.call(this._shortMonthsParse,l),o!==-1?o:(o=Su.call(this._longMonthsParse,l),o!==-1?o:null)):(o=Su.call(this._longMonthsParse,l),o!==-1?o:(o=Su.call(this._shortMonthsParse,l),o!==-1?o:null))}function Yj(n,r,e){var i,o,a;if(this._monthsParseExact)return qj.call(this,n,r,e);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=ym([2e3,i]),e&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),!e&&!this._monthsParse[i]&&(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),e&&r==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(e&&r==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!e&&this._monthsParse[i].test(n))return i}}function fP(n,r){if(!n.isValid())return n;if(typeof r=="string"){if(/^\d+$/.test(r))r=Ua(r);else if(r=n.localeData().monthsParse(r),!Ym(r))return n}var e=r,i=n.date();return i=i<29?i:Math.min(i,HC(n.year(),e)),n._isUTC?n._d.setUTCMonth(e,i):n._d.setMonth(e,i),n}function dP(n){return n!=null?(fP(this,n),_s.updateOffset(this,!0),this):Lv(this,"Month")}function Xj(){return HC(this.year(),this.month())}function Zj(n){return this._monthsParseExact?(bl(this,"_monthsRegex")||pP.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(bl(this,"_monthsShortRegex")||(this._monthsShortRegex=Gj),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function Jj(n){return this._monthsParseExact?(bl(this,"_monthsRegex")||pP.call(this),n?this._monthsStrictRegex:this._monthsRegex):(bl(this,"_monthsRegex")||(this._monthsRegex=Wj),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function pP(){function n(h,f){return f.length-h.length}var r=[],e=[],i=[],o,a,l,t;for(o=0;o<12;o++)a=ym([2e3,o]),l=$m(this.monthsShort(a,"")),t=$m(this.months(a,"")),r.push(l),e.push(t),i.push(t),i.push(l);r.sort(n),e.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function eU(n,r,e,i,o,a,l){var t;return n<100&&n>=0?(t=new Date(n+400,r,e,i,o,a,l),isFinite(t.getFullYear())&&t.setFullYear(n)):t=new Date(n,r,e,i,o,a,l),t}function kv(n){var r,e;return n<100&&n>=0?(e=Array.prototype.slice.call(arguments),e[0]=n+400,r=new Date(Date.UTC.apply(null,e)),isFinite(r.getUTCFullYear())&&r.setUTCFullYear(n)):r=new Date(Date.UTC.apply(null,arguments)),r}function fw(n,r,e){var i=7+r-e,o=(7+kv(n,0,i).getUTCDay()-r)%7;return-o+i-1}function AP(n,r,e,i,o){var a=(7+e-i)%7,l=fw(n,i,o),t=1+7*(r-1)+a+l,h,f;return t<=0?(h=n-1,f=pv(h)+t):t>pv(n)?(h=n+1,f=t-pv(n)):(h=n,f=t),{year:h,dayOfYear:f}}function Ov(n,r,e){var i=fw(n.year(),r,e),o=Math.floor((n.dayOfYear()-i-1)/7)+1,a,l;return o<1?(l=n.year()-1,a=o+Km(l,r,e)):o>Km(n.year(),r,e)?(a=o-Km(n.year(),r,e),l=n.year()+1):(l=n.year(),a=o),{week:a,year:l}}function Km(n,r,e){var i=fw(n,r,e),o=fw(n+1,r,e);return(pv(n)-i+o)/7}co("w",["ww",2],"wo","week");co("W",["WW",2],"Wo","isoWeek");Ms("w",Sc,Ry);Ms("ww",Sc,ap);Ms("W",Sc,Ry);Ms("WW",Sc,ap);fb(["w","ww","W","WW"],function(n,r,e,i){r[i.substr(0,1)]=Ua(n)});function tU(n){return Ov(n,this._week.dow,this._week.doy).week}var rU={dow:0,doy:6};function nU(){return this._week.dow}function iU(){return this._week.doy}function sU(n){var r=this.localeData().week(this);return n==null?r:this.add((n-r)*7,"d")}function oU(n){var r=Ov(this,1,4).week;return n==null?r:this.add((n-r)*7,"d")}co("d",0,"do","day");co("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});co("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});co("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});co("e",0,0,"weekday");co("E",0,0,"isoWeekday");Ms("d",Sc);Ms("e",Sc);Ms("E",Sc);Ms("dd",function(n,r){return r.weekdaysMinRegex(n)});Ms("ddd",function(n,r){return r.weekdaysShortRegex(n)});Ms("dddd",function(n,r){return r.weekdaysRegex(n)});fb(["dd","ddd","dddd"],function(n,r,e,i){var o=e._locale.weekdaysParse(n,i,e._strict);o!=null?r.d=o:da(e).invalidWeekday=n});fb(["d","e","E"],function(n,r,e,i){r[i]=Ua(n)});function aU(n,r){return typeof n!="string"?n:isNaN(n)?(n=r.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function lU(n,r){return typeof n=="string"?r.weekdaysParse(n)%7||7:isNaN(n)?null:n}function QC(n,r){return n.slice(r,7).concat(n.slice(0,r))}var cU="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),mP="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),uU="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),hU=hb,fU=hb,dU=hb;function pU(n,r){var e=wA(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(r)?"format":"standalone"];return n===!0?QC(e,this._week.dow):n?e[n.day()]:e}function AU(n){return n===!0?QC(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function mU(n){return n===!0?QC(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function gU(n,r,e){var i,o,a,l=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=ym([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return e?r==="dddd"?(o=Su.call(this._weekdaysParse,l),o!==-1?o:null):r==="ddd"?(o=Su.call(this._shortWeekdaysParse,l),o!==-1?o:null):(o=Su.call(this._minWeekdaysParse,l),o!==-1?o:null):r==="dddd"?(o=Su.call(this._weekdaysParse,l),o!==-1||(o=Su.call(this._shortWeekdaysParse,l),o!==-1)?o:(o=Su.call(this._minWeekdaysParse,l),o!==-1?o:null)):r==="ddd"?(o=Su.call(this._shortWeekdaysParse,l),o!==-1||(o=Su.call(this._weekdaysParse,l),o!==-1)?o:(o=Su.call(this._minWeekdaysParse,l),o!==-1?o:null)):(o=Su.call(this._minWeekdaysParse,l),o!==-1||(o=Su.call(this._weekdaysParse,l),o!==-1)?o:(o=Su.call(this._shortWeekdaysParse,l),o!==-1?o:null))}function yU(n,r,e){var i,o,a;if(this._weekdaysParseExact)return gU.call(this,n,r,e);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=ym([2e3,1]).day(i),e&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),e&&r==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(e&&r==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(e&&r==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!e&&this._weekdaysParse[i].test(n))return i}}function _U(n){if(!this.isValid())return n!=null?this:NaN;var r=Lv(this,"Day");return n!=null?(n=aU(n,this.localeData()),this.add(n-r,"d")):r}function vU(n){if(!this.isValid())return n!=null?this:NaN;var r=(this.day()+7-this.localeData()._week.dow)%7;return n==null?r:this.add(n-r,"d")}function bU(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var r=lU(n,this.localeData());return this.day(this.day()%7?r:r-7)}else return this.day()||7}function xU(n){return this._weekdaysParseExact?(bl(this,"_weekdaysRegex")||VC.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(bl(this,"_weekdaysRegex")||(this._weekdaysRegex=hU),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function wU(n){return this._weekdaysParseExact?(bl(this,"_weekdaysRegex")||VC.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(bl(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=fU),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function SU(n){return this._weekdaysParseExact?(bl(this,"_weekdaysRegex")||VC.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(bl(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=dU),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function VC(){function n(p,_){return _.length-p.length}var r=[],e=[],i=[],o=[],a,l,t,h,f;for(a=0;a<7;a++)l=ym([2e3,1]).day(a),t=$m(this.weekdaysMin(l,"")),h=$m(this.weekdaysShort(l,"")),f=$m(this.weekdays(l,"")),r.push(t),e.push(h),i.push(f),o.push(t),o.push(h),o.push(f);r.sort(n),e.sort(n),i.sort(n),o.sort(n),this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function GC(){return this.hours()%12||12}function CU(){return this.hours()||24}co("H",["HH",2],0,"hour");co("h",["hh",2],0,GC);co("k",["kk",2],0,CU);co("hmm",0,0,function(){return""+GC.apply(this)+mm(this.minutes(),2)});co("hmmss",0,0,function(){return""+GC.apply(this)+mm(this.minutes(),2)+mm(this.seconds(),2)});co("Hmm",0,0,function(){return""+this.hours()+mm(this.minutes(),2)});co("Hmmss",0,0,function(){return""+this.hours()+mm(this.minutes(),2)+mm(this.seconds(),2)});function gP(n,r){co(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),r)})}gP("a",!0);gP("A",!1);function yP(n,r){return r._meridiemParse}Ms("a",yP);Ms("A",yP);Ms("H",Sc,zC);Ms("h",Sc,Ry);Ms("k",Sc,Ry);Ms("HH",Sc,ap);Ms("hh",Sc,ap);Ms("kk",Sc,ap);Ms("hmm",oP);Ms("hmmss",aP);Ms("Hmm",oP);Ms("Hmmss",aP);Vl(["H","HH"],uh);Vl(["k","kk"],function(n,r,e){var i=Ua(n);r[uh]=i===24?0:i});Vl(["a","A"],function(n,r,e){e._isPm=e._locale.isPM(n),e._meridiem=n});Vl(["h","hh"],function(n,r,e){r[uh]=Ua(n),da(e).bigHour=!0});Vl("hmm",function(n,r,e){var i=n.length-2;r[uh]=Ua(n.substr(0,i)),r[vA]=Ua(n.substr(i)),da(e).bigHour=!0});Vl("hmmss",function(n,r,e){var i=n.length-4,o=n.length-2;r[uh]=Ua(n.substr(0,i)),r[vA]=Ua(n.substr(i,2)),r[Qm]=Ua(n.substr(o)),da(e).bigHour=!0});Vl("Hmm",function(n,r,e){var i=n.length-2;r[uh]=Ua(n.substr(0,i)),r[vA]=Ua(n.substr(i))});Vl("Hmmss",function(n,r,e){var i=n.length-4,o=n.length-2;r[uh]=Ua(n.substr(0,i)),r[vA]=Ua(n.substr(i,2)),r[Qm]=Ua(n.substr(o))});function EU(n){return(n+"").toLowerCase().charAt(0)==="p"}var BU=/[ap]\.?m?\.?/i,TU=Ny("Hours",!0);function IU(n,r,e){return n>11?e?"pm":"PM":e?"am":"AM"}var _P={calendar:gj,longDateFormat:bj,invalidDate:wj,ordinal:Cj,dayOfMonthOrdinalParse:Ej,relativeTime:Tj,months:Vj,monthsShort:uP,week:rU,weekdays:cU,weekdaysMin:uU,weekdaysShort:mP,meridiemParse:BU},Rc={},H_={},Dv;function MU(n,r){var e,i=Math.min(n.length,r.length);for(e=0;e<i;e+=1)if(n[e]!==r[e])return e;return i}function oI(n){return n&&n.toLowerCase().replace("_","-")}function FU(n){for(var r=0,e,i,o,a;r<n.length;){for(a=oI(n[r]).split("-"),e=a.length,i=oI(n[r+1]),i=i?i.split("-"):null;e>0;){if(o=n5(a.slice(0,e).join("-")),o)return o;if(i&&i.length>=e&&MU(a,i)>=e-1)break;e--}r++}return Dv}function PU(n){return!!(n&&n.match("^[^/\\\\]*$"))}function n5(n){var r=null,e;if(Rc[n]===void 0&&typeof module<"u"&&module&&module.exports&&PU(n))try{r=Dv._abbr,e=require,e("./locale/"+n),zg(r)}catch{Rc[n]=null}return Rc[n]}function zg(n,r){var e;return n&&(yd(r)?e=tg(n):e=WC(n,r),e?Dv=e:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),Dv._abbr}function WC(n,r){if(r!==null){var e,i=_P;if(r.abbr=n,Rc[n]!=null)rP("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Rc[n]._config;else if(r.parentLocale!=null)if(Rc[r.parentLocale]!=null)i=Rc[r.parentLocale]._config;else if(e=n5(r.parentLocale),e!=null)i=e._config;else return H_[r.parentLocale]||(H_[r.parentLocale]=[]),H_[r.parentLocale].push({name:n,config:r}),null;return Rc[n]=new DC(sS(i,r)),H_[n]&&H_[n].forEach(function(o){WC(o.name,o.config)}),zg(n),Rc[n]}else return delete Rc[n],null}function LU(n,r){if(r!=null){var e,i,o=_P;Rc[n]!=null&&Rc[n].parentLocale!=null?Rc[n].set(sS(Rc[n]._config,r)):(i=n5(n),i!=null&&(o=i._config),r=sS(o,r),i==null&&(r.abbr=n),e=new DC(r),e.parentLocale=Rc[n],Rc[n]=e),zg(n)}else Rc[n]!=null&&(Rc[n].parentLocale!=null?(Rc[n]=Rc[n].parentLocale,n===zg()&&zg(n)):Rc[n]!=null&&delete Rc[n]);return Rc[n]}function tg(n){var r;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return Dv;if(!wA(n)){if(r=n5(n),r)return r;n=[n]}return FU(n)}function kU(){return oS(Rc)}function $C(n){var r,e=n._a;return e&&da(n).overflow===-2&&(r=e[Hm]<0||e[Hm]>11?Hm:e[am]<1||e[am]>HC(e[Tf],e[Hm])?am:e[uh]<0||e[uh]>24||e[uh]===24&&(e[vA]!==0||e[Qm]!==0||e[G0]!==0)?uh:e[vA]<0||e[vA]>59?vA:e[Qm]<0||e[Qm]>59?Qm:e[G0]<0||e[G0]>999?G0:-1,da(n)._overflowDayOfYear&&(r<Tf||r>am)&&(r=am),da(n)._overflowWeeks&&r===-1&&(r=Nj),da(n)._overflowWeekday&&r===-1&&(r=jj),da(n).overflow=r),n}var OU=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,DU=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,RU=/Z|[+-]\d\d(?::?\d\d)?/,sx=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Z3=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],NU=/^\/?Date\((-?\d+)/i,jU=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,UU={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function vP(n){var r,e,i=n._i,o=OU.exec(i)||DU.exec(i),a,l,t,h,f=sx.length,p=Z3.length;if(o){for(da(n).iso=!0,r=0,e=f;r<e;r++)if(sx[r][1].exec(o[1])){l=sx[r][0],a=sx[r][2]!==!1;break}if(l==null){n._isValid=!1;return}if(o[3]){for(r=0,e=p;r<e;r++)if(Z3[r][1].exec(o[3])){t=(o[2]||" ")+Z3[r][0];break}if(t==null){n._isValid=!1;return}}if(!a&&t!=null){n._isValid=!1;return}if(o[4])if(RU.exec(o[4]))h="Z";else{n._isValid=!1;return}n._f=l+(t||"")+(h||""),qC(n)}else n._isValid=!1}function zU(n,r,e,i,o,a){var l=[HU(n),uP.indexOf(r),parseInt(e,10),parseInt(i,10),parseInt(o,10)];return a&&l.push(parseInt(a,10)),l}function HU(n){var r=parseInt(n,10);return r<=49?2e3+r:r<=999?1900+r:r}function QU(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function VU(n,r,e){if(n){var i=mP.indexOf(n),o=new Date(r[0],r[1],r[2]).getDay();if(i!==o)return da(e).weekdayMismatch=!0,e._isValid=!1,!1}return!0}function GU(n,r,e){if(n)return UU[n];if(r)return 0;var i=parseInt(e,10),o=i%100,a=(i-o)/100;return a*60+o}function bP(n){var r=jU.exec(QU(n._i)),e;if(r){if(e=zU(r[4],r[3],r[2],r[5],r[6],r[7]),!VU(r[1],e,n))return;n._a=e,n._tzm=GU(r[8],r[9],r[10]),n._d=kv.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),da(n).rfc2822=!0}else n._isValid=!1}function WU(n){var r=NU.exec(n._i);if(r!==null){n._d=new Date(+r[1]);return}if(vP(n),n._isValid===!1)delete n._isValid;else return;if(bP(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:_s.createFromInputFallback(n)}_s.createFromInputFallback=Qp("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function iy(n,r,e){return n??r??e}function $U(n){var r=new Date(_s.now());return n._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function KC(n){var r,e,i=[],o,a,l;if(!n._d){for(o=$U(n),n._w&&n._a[am]==null&&n._a[Hm]==null&&KU(n),n._dayOfYear!=null&&(l=iy(n._a[Tf],o[Tf]),(n._dayOfYear>pv(l)||n._dayOfYear===0)&&(da(n)._overflowDayOfYear=!0),e=kv(l,0,n._dayOfYear),n._a[Hm]=e.getUTCMonth(),n._a[am]=e.getUTCDate()),r=0;r<3&&n._a[r]==null;++r)n._a[r]=i[r]=o[r];for(;r<7;r++)n._a[r]=i[r]=n._a[r]==null?r===2?1:0:n._a[r];n._a[uh]===24&&n._a[vA]===0&&n._a[Qm]===0&&n._a[G0]===0&&(n._nextDay=!0,n._a[uh]=0),n._d=(n._useUTC?kv:eU).apply(null,i),a=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[uh]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==a&&(da(n).weekdayMismatch=!0)}}function KU(n){var r,e,i,o,a,l,t,h,f;r=n._w,r.GG!=null||r.W!=null||r.E!=null?(a=1,l=4,e=iy(r.GG,n._a[Tf],Ov(wc(),1,4).year),i=iy(r.W,1),o=iy(r.E,1),(o<1||o>7)&&(h=!0)):(a=n._locale._week.dow,l=n._locale._week.doy,f=Ov(wc(),a,l),e=iy(r.gg,n._a[Tf],f.year),i=iy(r.w,f.week),r.d!=null?(o=r.d,(o<0||o>6)&&(h=!0)):r.e!=null?(o=r.e+a,(r.e<0||r.e>6)&&(h=!0)):o=a),i<1||i>Km(e,a,l)?da(n)._overflowWeeks=!0:h!=null?da(n)._overflowWeekday=!0:(t=AP(e,i,o,a,l),n._a[Tf]=t.year,n._dayOfYear=t.dayOfYear)}_s.ISO_8601=function(){};_s.RFC_2822=function(){};function qC(n){if(n._f===_s.ISO_8601){vP(n);return}if(n._f===_s.RFC_2822){bP(n);return}n._a=[],da(n).empty=!0;var r=""+n._i,e,i,o,a,l,t=r.length,h=0,f,p;for(o=nP(n._f,n._locale).match(RC)||[],p=o.length,e=0;e<p;e++)a=o[e],i=(r.match(Oj(a,n))||[])[0],i&&(l=r.substr(0,r.indexOf(i)),l.length>0&&da(n).unusedInput.push(l),r=r.slice(r.indexOf(i)+i.length),h+=i.length),dy[a]?(i?da(n).empty=!1:da(n).unusedTokens.push(a),Rj(a,i,n)):n._strict&&!i&&da(n).unusedTokens.push(a);da(n).charsLeftOver=t-h,r.length>0&&da(n).unusedInput.push(r),n._a[uh]<=12&&da(n).bigHour===!0&&n._a[uh]>0&&(da(n).bigHour=void 0),da(n).parsedDateParts=n._a.slice(0),da(n).meridiem=n._meridiem,n._a[uh]=qU(n._locale,n._a[uh],n._meridiem),f=da(n).era,f!==null&&(n._a[Tf]=n._locale.erasConvertYear(f,n._a[Tf])),KC(n),$C(n)}function qU(n,r,e){var i;return e==null?r:n.meridiemHour!=null?n.meridiemHour(r,e):(n.isPM!=null&&(i=n.isPM(e),i&&r<12&&(r+=12),!i&&r===12&&(r=0)),r)}function YU(n){var r,e,i,o,a,l,t=!1,h=n._f.length;if(h===0){da(n).invalidFormat=!0,n._d=new Date(NaN);return}for(o=0;o<h;o++)a=0,l=!1,r=OC({},n),n._useUTC!=null&&(r._useUTC=n._useUTC),r._f=n._f[o],qC(r),kC(r)&&(l=!0),a+=da(r).charsLeftOver,a+=da(r).unusedTokens.length*10,da(r).score=a,t?a<i&&(i=a,e=r):(i==null||a<i||l)&&(i=a,e=r,l&&(t=!0));Mg(n,e||r)}function XU(n){if(!n._d){var r=NC(n._i),e=r.day===void 0?r.date:r.day;n._a=eP([r.year,r.month,e,r.hour,r.minute,r.second,r.millisecond],function(i){return i&&parseInt(i,10)}),KC(n)}}function ZU(n){var r=new ub($C(xP(n)));return r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function xP(n){var r=n._i,e=n._f;return n._locale=n._locale||tg(n._l),r===null||e===void 0&&r===""?Yw({nullInput:!0}):(typeof r=="string"&&(n._i=r=n._locale.preparse(r)),SA(r)?new ub($C(r)):(cb(r)?n._d=r:wA(e)?YU(n):e?qC(n):JU(n),kC(n)||(n._d=null),n))}function JU(n){var r=n._i;yd(r)?n._d=new Date(_s.now()):cb(r)?n._d=new Date(r.valueOf()):typeof r=="string"?WU(n):wA(r)?(n._a=eP(r.slice(0),function(e){return parseInt(e,10)}),KC(n)):X0(r)?XU(n):Ym(r)?n._d=new Date(r):_s.createFromInputFallback(n)}function wP(n,r,e,i,o){var a={};return(r===!0||r===!1)&&(i=r,r=void 0),(e===!0||e===!1)&&(i=e,e=void 0),(X0(n)&&LC(n)||wA(n)&&n.length===0)&&(n=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=e,a._i=n,a._f=r,a._strict=i,ZU(a)}function wc(n,r,e,i){return wP(n,r,e,i,!1)}var ez=Qp("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=wc.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:Yw()}),tz=Qp("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=wc.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:Yw()});function SP(n,r){var e,i;if(r.length===1&&wA(r[0])&&(r=r[0]),!r.length)return wc();for(e=r[0],i=1;i<r.length;++i)(!r[i].isValid()||r[i][n](e))&&(e=r[i]);return e}function rz(){var n=[].slice.call(arguments,0);return SP("isBefore",n)}function nz(){var n=[].slice.call(arguments,0);return SP("isAfter",n)}var iz=function(){return Date.now?Date.now():+new Date},Q_=["year","quarter","month","week","day","hour","minute","second","millisecond"];function sz(n){var r,e=!1,i,o=Q_.length;for(r in n)if(bl(n,r)&&!(Su.call(Q_,r)!==-1&&(n[r]==null||!isNaN(n[r]))))return!1;for(i=0;i<o;++i)if(n[Q_[i]]){if(e)return!1;parseFloat(n[Q_[i]])!==Ua(n[Q_[i]])&&(e=!0)}return!0}function oz(){return this._isValid}function az(){return BA(NaN)}function i5(n){var r=NC(n),e=r.year||0,i=r.quarter||0,o=r.month||0,a=r.week||r.isoWeek||0,l=r.day||0,t=r.hour||0,h=r.minute||0,f=r.second||0,p=r.millisecond||0;this._isValid=sz(r),this._milliseconds=+p+f*1e3+h*6e4+t*1e3*60*60,this._days=+l+a*7,this._months=+o+i*3+e*12,this._data={},this._locale=tg(),this._bubble()}function Qx(n){return n instanceof i5}function lS(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function lz(n,r,e){var i=Math.min(n.length,r.length),o=Math.abs(n.length-r.length),a=0,l;for(l=0;l<i;l++)Ua(n[l])!==Ua(r[l])&&a++;return a+o}function CP(n,r){co(n,0,0,function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+mm(~~(e/60),2)+r+mm(~~e%60,2)})}CP("Z",":");CP("ZZ","");Ms("Z",t5);Ms("ZZ",t5);Vl(["Z","ZZ"],function(n,r,e){e._useUTC=!0,e._tzm=YC(t5,n)});var cz=/([\+\-]|\d\d)/gi;function YC(n,r){var e=(r||"").match(n),i,o,a;return e===null?null:(i=e[e.length-1]||[],o=(i+"").match(cz)||["-",0,0],a=+(o[1]*60)+Ua(o[2]),a===0?0:o[0]==="+"?a:-a)}function XC(n,r){var e,i;return r._isUTC?(e=r.clone(),i=(SA(n)||cb(n)?n.valueOf():wc(n).valueOf())-e.valueOf(),e._d.setTime(e._d.valueOf()+i),_s.updateOffset(e,!1),e):wc(n).local()}function cS(n){return-Math.round(n._d.getTimezoneOffset())}_s.updateOffset=function(){};function uz(n,r,e){var i=this._offset||0,o;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=YC(t5,n),n===null)return this}else Math.abs(n)<16&&!e&&(n=n*60);return!this._isUTC&&r&&(o=cS(this)),this._offset=n,this._isUTC=!0,o!=null&&this.add(o,"m"),i!==n&&(!r||this._changeInProgress?TP(this,BA(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_s.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:cS(this)}function hz(n,r){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,r),this):-this.utcOffset()}function fz(n){return this.utcOffset(0,n)}function dz(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(cS(this),"m")),this}function pz(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=YC(Lj,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function Az(n){return this.isValid()?(n=n?wc(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function mz(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function gz(){if(!yd(this._isDSTShifted))return this._isDSTShifted;var n={},r;return OC(n,this),n=xP(n),n._a?(r=n._isUTC?ym(n._a):wc(n._a),this._isDSTShifted=this.isValid()&&lz(n._a,r.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function yz(){return this.isValid()?!this._isUTC:!1}function _z(){return this.isValid()?this._isUTC:!1}function EP(){return this.isValid()?this._isUTC&&this._offset===0:!1}var vz=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,bz=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function BA(n,r){var e=n,i=null,o,a,l;return Qx(n)?e={ms:n._milliseconds,d:n._days,M:n._months}:Ym(n)||!isNaN(+n)?(e={},r?e[r]=+n:e.milliseconds=+n):(i=vz.exec(n))?(o=i[1]==="-"?-1:1,e={y:0,d:Ua(i[am])*o,h:Ua(i[uh])*o,m:Ua(i[vA])*o,s:Ua(i[Qm])*o,ms:Ua(lS(i[G0]*1e3))*o}):(i=bz.exec(n))?(o=i[1]==="-"?-1:1,e={y:M0(i[2],o),M:M0(i[3],o),w:M0(i[4],o),d:M0(i[5],o),h:M0(i[6],o),m:M0(i[7],o),s:M0(i[8],o)}):e==null?e={}:typeof e=="object"&&("from"in e||"to"in e)&&(l=xz(wc(e.from),wc(e.to)),e={},e.ms=l.milliseconds,e.M=l.months),a=new i5(e),Qx(n)&&bl(n,"_locale")&&(a._locale=n._locale),Qx(n)&&bl(n,"_isValid")&&(a._isValid=n._isValid),a}BA.fn=i5.prototype;BA.invalid=az;function M0(n,r){var e=n&&parseFloat(n.replace(",","."));return(isNaN(e)?0:e)*r}function aI(n,r){var e={};return e.months=r.month()-n.month()+(r.year()-n.year())*12,n.clone().add(e.months,"M").isAfter(r)&&--e.months,e.milliseconds=+r-+n.clone().add(e.months,"M"),e}function xz(n,r){var e;return n.isValid()&&r.isValid()?(r=XC(r,n),n.isBefore(r)?e=aI(n,r):(e=aI(r,n),e.milliseconds=-e.milliseconds,e.months=-e.months),e):{milliseconds:0,months:0}}function BP(n,r){return function(e,i){var o,a;return i!==null&&!isNaN(+i)&&(rP(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=e,e=i,i=a),o=BA(e,i),TP(this,o,n),this}}function TP(n,r,e,i){var o=r._milliseconds,a=lS(r._days),l=lS(r._months);n.isValid()&&(i=i??!0,l&&fP(n,Lv(n,"Month")+l*e),a&&cP(n,"Date",Lv(n,"Date")+a*e),o&&n._d.setTime(n._d.valueOf()+o*e),i&&_s.updateOffset(n,a||l))}var wz=BP(1,"add"),Sz=BP(-1,"subtract");function IP(n){return typeof n=="string"||n instanceof String}function Cz(n){return SA(n)||cb(n)||IP(n)||Ym(n)||Bz(n)||Ez(n)||n===null||n===void 0}function Ez(n){var r=X0(n)&&!LC(n),e=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],o,a,l=i.length;for(o=0;o<l;o+=1)a=i[o],e=e||bl(n,a);return r&&e}function Bz(n){var r=wA(n),e=!1;return r&&(e=n.filter(function(i){return!Ym(i)&&IP(n)}).length===0),r&&e}function Tz(n){var r=X0(n)&&!LC(n),e=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],o,a;for(o=0;o<i.length;o+=1)a=i[o],e=e||bl(n,a);return r&&e}function Iz(n,r){var e=n.diff(r,"days",!0);return e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"}function Mz(n,r){arguments.length===1&&(arguments[0]?Cz(arguments[0])?(n=arguments[0],r=void 0):Tz(arguments[0])&&(r=arguments[0],n=void 0):(n=void 0,r=void 0));var e=n||wc(),i=XC(e,this).startOf("day"),o=_s.calendarFormat(this,i)||"sameElse",a=r&&(_m(r[o])?r[o].call(this,e):r[o]);return this.format(a||this.localeData().calendar(o,this,wc(e)))}function Fz(){return new ub(this)}function Pz(n,r){var e=SA(n)?n:wc(n);return this.isValid()&&e.isValid()?(r=Vp(r)||"millisecond",r==="millisecond"?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(r).valueOf()):!1}function Lz(n,r){var e=SA(n)?n:wc(n);return this.isValid()&&e.isValid()?(r=Vp(r)||"millisecond",r==="millisecond"?this.valueOf()<e.valueOf():this.clone().endOf(r).valueOf()<e.valueOf()):!1}function kz(n,r,e,i){var o=SA(n)?n:wc(n),a=SA(r)?r:wc(r);return this.isValid()&&o.isValid()&&a.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(o,e):!this.isBefore(o,e))&&(i[1]===")"?this.isBefore(a,e):!this.isAfter(a,e))):!1}function Oz(n,r){var e=SA(n)?n:wc(n),i;return this.isValid()&&e.isValid()?(r=Vp(r)||"millisecond",r==="millisecond"?this.valueOf()===e.valueOf():(i=e.valueOf(),this.clone().startOf(r).valueOf()<=i&&i<=this.clone().endOf(r).valueOf())):!1}function Dz(n,r){return this.isSame(n,r)||this.isAfter(n,r)}function Rz(n,r){return this.isSame(n,r)||this.isBefore(n,r)}function Nz(n,r,e){var i,o,a;if(!this.isValid())return NaN;if(i=XC(n,this),!i.isValid())return NaN;switch(o=(i.utcOffset()-this.utcOffset())*6e4,r=Vp(r),r){case"year":a=Vx(this,i)/12;break;case"month":a=Vx(this,i);break;case"quarter":a=Vx(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-o)/864e5;break;case"week":a=(this-i-o)/6048e5;break;default:a=this-i}return e?a:Rp(a)}function Vx(n,r){if(n.date()<r.date())return-Vx(r,n);var e=(r.year()-n.year())*12+(r.month()-n.month()),i=n.clone().add(e,"months"),o,a;return r-i<0?(o=n.clone().add(e-1,"months"),a=(r-i)/(i-o)):(o=n.clone().add(e+1,"months"),a=(r-i)/(o-i)),-(e+a)||0}_s.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";_s.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function jz(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Uz(n){if(!this.isValid())return null;var r=n!==!0,e=r?this.clone().utc():this;return e.year()<0||e.year()>9999?Hx(e,r?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):_m(Date.prototype.toISOString)?r?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Hx(e,"Z")):Hx(e,r?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function zz(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",r="",e,i,o,a;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),e="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o="-MM-DD[T]HH:mm:ss.SSS",a=r+'[")]',this.format(e+i+o+a)}function Hz(n){n||(n=this.isUtc()?_s.defaultFormatUtc:_s.defaultFormat);var r=Hx(this,n);return this.localeData().postformat(r)}function Qz(n,r){return this.isValid()&&(SA(n)&&n.isValid()||wc(n).isValid())?BA({to:this,from:n}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function Vz(n){return this.from(wc(),n)}function Gz(n,r){return this.isValid()&&(SA(n)&&n.isValid()||wc(n).isValid())?BA({from:this,to:n}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function Wz(n){return this.to(wc(),n)}function MP(n){var r;return n===void 0?this._locale._abbr:(r=tg(n),r!=null&&(this._locale=r),this)}var FP=Qp("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function PP(){return this._locale}var dw=1e3,py=60*dw,pw=60*py,LP=(365*400+97)*24*pw;function Ay(n,r){return(n%r+r)%r}function kP(n,r,e){return n<100&&n>=0?new Date(n+400,r,e)-LP:new Date(n,r,e).valueOf()}function OP(n,r,e){return n<100&&n>=0?Date.UTC(n+400,r,e)-LP:Date.UTC(n,r,e)}function $z(n){var r,e;if(n=Vp(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(e=this._isUTC?OP:kP,n){case"year":r=e(this.year(),0,1);break;case"quarter":r=e(this.year(),this.month()-this.month()%3,1);break;case"month":r=e(this.year(),this.month(),1);break;case"week":r=e(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=e(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=e(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=Ay(r+(this._isUTC?0:this.utcOffset()*py),pw);break;case"minute":r=this._d.valueOf(),r-=Ay(r,py);break;case"second":r=this._d.valueOf(),r-=Ay(r,dw);break}return this._d.setTime(r),_s.updateOffset(this,!0),this}function Kz(n){var r,e;if(n=Vp(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(e=this._isUTC?OP:kP,n){case"year":r=e(this.year()+1,0,1)-1;break;case"quarter":r=e(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=e(this.year(),this.month()+1,1)-1;break;case"week":r=e(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=e(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=e(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=pw-Ay(r+(this._isUTC?0:this.utcOffset()*py),pw)-1;break;case"minute":r=this._d.valueOf(),r+=py-Ay(r,py)-1;break;case"second":r=this._d.valueOf(),r+=dw-Ay(r,dw)-1;break}return this._d.setTime(r),_s.updateOffset(this,!0),this}function qz(){return this._d.valueOf()-(this._offset||0)*6e4}function Yz(){return Math.floor(this.valueOf()/1e3)}function Xz(){return new Date(this.valueOf())}function Zz(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function Jz(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function eH(){return this.isValid()?this.toISOString():null}function tH(){return kC(this)}function rH(){return Mg({},da(this))}function nH(){return da(this).overflow}function iH(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}co("N",0,0,"eraAbbr");co("NN",0,0,"eraAbbr");co("NNN",0,0,"eraAbbr");co("NNNN",0,0,"eraName");co("NNNNN",0,0,"eraNarrow");co("y",["y",1],"yo","eraYear");co("y",["yy",2],0,"eraYear");co("y",["yyy",3],0,"eraYear");co("y",["yyyy",4],0,"eraYear");Ms("N",ZC);Ms("NN",ZC);Ms("NNN",ZC);Ms("NNNN",AH);Ms("NNNNN",mH);Vl(["N","NN","NNN","NNNN","NNNNN"],function(n,r,e,i){var o=e._locale.erasParse(n,i,e._strict);o?da(e).era=o:da(e).invalidEra=n});Ms("y",Dy);Ms("yy",Dy);Ms("yyy",Dy);Ms("yyyy",Dy);Ms("yo",gH);Vl(["y","yy","yyy","yyyy"],Tf);Vl(["yo"],function(n,r,e,i){var o;e._locale._eraYearOrdinalRegex&&(o=n.match(e._locale._eraYearOrdinalRegex)),e._locale.eraYearOrdinalParse?r[Tf]=e._locale.eraYearOrdinalParse(n,o):r[Tf]=parseInt(n,10)});function sH(n,r){var e,i,o,a=this._eras||tg("en")._eras;for(e=0,i=a.length;e<i;++e){switch(typeof a[e].since){case"string":o=_s(a[e].since).startOf("day"),a[e].since=o.valueOf();break}switch(typeof a[e].until){case"undefined":a[e].until=1/0;break;case"string":o=_s(a[e].until).startOf("day").valueOf(),a[e].until=o.valueOf();break}}return a}function oH(n,r,e){var i,o,a=this.eras(),l,t,h;for(n=n.toUpperCase(),i=0,o=a.length;i<o;++i)if(l=a[i].name.toUpperCase(),t=a[i].abbr.toUpperCase(),h=a[i].narrow.toUpperCase(),e)switch(r){case"N":case"NN":case"NNN":if(t===n)return a[i];break;case"NNNN":if(l===n)return a[i];break;case"NNNNN":if(h===n)return a[i];break}else if([l,t,h].indexOf(n)>=0)return a[i]}function aH(n,r){var e=n.since<=n.until?1:-1;return r===void 0?_s(n.since).year():_s(n.since).year()+(r-n.offset)*e}function lH(){var n,r,e,i=this.localeData().eras();for(n=0,r=i.length;n<r;++n)if(e=this.clone().startOf("day").valueOf(),i[n].since<=e&&e<=i[n].until||i[n].until<=e&&e<=i[n].since)return i[n].name;return""}function cH(){var n,r,e,i=this.localeData().eras();for(n=0,r=i.length;n<r;++n)if(e=this.clone().startOf("day").valueOf(),i[n].since<=e&&e<=i[n].until||i[n].until<=e&&e<=i[n].since)return i[n].narrow;return""}function uH(){var n,r,e,i=this.localeData().eras();for(n=0,r=i.length;n<r;++n)if(e=this.clone().startOf("day").valueOf(),i[n].since<=e&&e<=i[n].until||i[n].until<=e&&e<=i[n].since)return i[n].abbr;return""}function hH(){var n,r,e,i,o=this.localeData().eras();for(n=0,r=o.length;n<r;++n)if(e=o[n].since<=o[n].until?1:-1,i=this.clone().startOf("day").valueOf(),o[n].since<=i&&i<=o[n].until||o[n].until<=i&&i<=o[n].since)return(this.year()-_s(o[n].since).year())*e+o[n].offset;return this.year()}function fH(n){return bl(this,"_erasNameRegex")||JC.call(this),n?this._erasNameRegex:this._erasRegex}function dH(n){return bl(this,"_erasAbbrRegex")||JC.call(this),n?this._erasAbbrRegex:this._erasRegex}function pH(n){return bl(this,"_erasNarrowRegex")||JC.call(this),n?this._erasNarrowRegex:this._erasRegex}function ZC(n,r){return r.erasAbbrRegex(n)}function AH(n,r){return r.erasNameRegex(n)}function mH(n,r){return r.erasNarrowRegex(n)}function gH(n,r){return r._eraYearOrdinalRegex||Dy}function JC(){var n=[],r=[],e=[],i=[],o,a,l,t,h,f=this.eras();for(o=0,a=f.length;o<a;++o)l=$m(f[o].name),t=$m(f[o].abbr),h=$m(f[o].narrow),r.push(l),n.push(t),e.push(h),i.push(l),i.push(t),i.push(h);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+e.join("|")+")","i")}co(0,["gg",2],0,function(){return this.weekYear()%100});co(0,["GG",2],0,function(){return this.isoWeekYear()%100});function s5(n,r){co(0,[n,n.length],0,r)}s5("gggg","weekYear");s5("ggggg","weekYear");s5("GGGG","isoWeekYear");s5("GGGGG","isoWeekYear");Ms("G",e5);Ms("g",e5);Ms("GG",Sc,ap);Ms("gg",Sc,ap);Ms("GGGG",UC,jC);Ms("gggg",UC,jC);Ms("GGGGG",Jw,Xw);Ms("ggggg",Jw,Xw);fb(["gggg","ggggg","GGGG","GGGGG"],function(n,r,e,i){r[i.substr(0,2)]=Ua(n)});fb(["gg","GG"],function(n,r,e,i){r[i]=_s.parseTwoDigitYear(n)});function yH(n){return DP.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function _H(n){return DP.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function vH(){return Km(this.year(),1,4)}function bH(){return Km(this.isoWeekYear(),1,4)}function xH(){var n=this.localeData()._week;return Km(this.year(),n.dow,n.doy)}function wH(){var n=this.localeData()._week;return Km(this.weekYear(),n.dow,n.doy)}function DP(n,r,e,i,o){var a;return n==null?Ov(this,i,o).year:(a=Km(n,i,o),r>a&&(r=a),SH.call(this,n,r,e,i,o))}function SH(n,r,e,i,o){var a=AP(n,r,e,i,o),l=kv(a.year,0,a.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}co("Q",0,"Qo","quarter");Ms("Q",iP);Vl("Q",function(n,r){r[Hm]=(Ua(n)-1)*3});function CH(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}co("D",["DD",2],"Do","date");Ms("D",Sc,Ry);Ms("DD",Sc,ap);Ms("Do",function(n,r){return n?r._dayOfMonthOrdinalParse||r._ordinalParse:r._dayOfMonthOrdinalParseLenient});Vl(["D","DD"],am);Vl("Do",function(n,r){r[am]=Ua(n.match(Sc)[0])});var RP=Ny("Date",!0);co("DDD",["DDDD",3],"DDDo","dayOfYear");Ms("DDD",Zw);Ms("DDDD",sP);Vl(["DDD","DDDD"],function(n,r,e){e._dayOfYear=Ua(n)});function EH(n){var r=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?r:this.add(n-r,"d")}co("m",["mm",2],0,"minute");Ms("m",Sc,zC);Ms("mm",Sc,ap);Vl(["m","mm"],vA);var BH=Ny("Minutes",!1);co("s",["ss",2],0,"second");Ms("s",Sc,zC);Ms("ss",Sc,ap);Vl(["s","ss"],Qm);var TH=Ny("Seconds",!1);co("S",0,0,function(){return~~(this.millisecond()/100)});co(0,["SS",2],0,function(){return~~(this.millisecond()/10)});co(0,["SSS",3],0,"millisecond");co(0,["SSSS",4],0,function(){return this.millisecond()*10});co(0,["SSSSS",5],0,function(){return this.millisecond()*100});co(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});co(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});co(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});co(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ms("S",Zw,iP);Ms("SS",Zw,ap);Ms("SSS",Zw,sP);var Fg,NP;for(Fg="SSSS";Fg.length<=9;Fg+="S")Ms(Fg,Dy);function IH(n,r){r[G0]=Ua(("0."+n)*1e3)}for(Fg="S";Fg.length<=9;Fg+="S")Vl(Fg,IH);NP=Ny("Milliseconds",!1);co("z",0,0,"zoneAbbr");co("zz",0,0,"zoneName");function MH(){return this._isUTC?"UTC":""}function FH(){return this._isUTC?"Coordinated Universal Time":""}var ji=ub.prototype;ji.add=wz;ji.calendar=Mz;ji.clone=Fz;ji.diff=Nz;ji.endOf=Kz;ji.format=Hz;ji.from=Qz;ji.fromNow=Vz;ji.to=Gz;ji.toNow=Wz;ji.get=zj;ji.invalidAt=nH;ji.isAfter=Pz;ji.isBefore=Lz;ji.isBetween=kz;ji.isSame=Oz;ji.isSameOrAfter=Dz;ji.isSameOrBefore=Rz;ji.isValid=tH;ji.lang=FP;ji.locale=MP;ji.localeData=PP;ji.max=tz;ji.min=ez;ji.parsingFlags=rH;ji.set=Hj;ji.startOf=$z;ji.subtract=Sz;ji.toArray=Zz;ji.toObject=Jz;ji.toDate=Xz;ji.toISOString=Uz;ji.inspect=zz;typeof Symbol<"u"&&Symbol.for!=null&&(ji[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ji.toJSON=eH;ji.toString=jz;ji.unix=Yz;ji.valueOf=qz;ji.creationData=iH;ji.eraName=lH;ji.eraNarrow=cH;ji.eraAbbr=uH;ji.eraYear=hH;ji.year=lP;ji.isLeapYear=Uj;ji.weekYear=yH;ji.isoWeekYear=_H;ji.quarter=ji.quarters=CH;ji.month=dP;ji.daysInMonth=Xj;ji.week=ji.weeks=sU;ji.isoWeek=ji.isoWeeks=oU;ji.weeksInYear=xH;ji.weeksInWeekYear=wH;ji.isoWeeksInYear=vH;ji.isoWeeksInISOWeekYear=bH;ji.date=RP;ji.day=ji.days=_U;ji.weekday=vU;ji.isoWeekday=bU;ji.dayOfYear=EH;ji.hour=ji.hours=TU;ji.minute=ji.minutes=BH;ji.second=ji.seconds=TH;ji.millisecond=ji.milliseconds=NP;ji.utcOffset=uz;ji.utc=fz;ji.local=dz;ji.parseZone=pz;ji.hasAlignedHourOffset=Az;ji.isDST=mz;ji.isLocal=yz;ji.isUtcOffset=_z;ji.isUtc=EP;ji.isUTC=EP;ji.zoneAbbr=MH;ji.zoneName=FH;ji.dates=Qp("dates accessor is deprecated. Use date instead.",RP);ji.months=Qp("months accessor is deprecated. Use month instead",dP);ji.years=Qp("years accessor is deprecated. Use year instead",lP);ji.zone=Qp("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",hz);ji.isDSTShifted=Qp("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",gz);function PH(n){return wc(n*1e3)}function LH(){return wc.apply(null,arguments).parseZone()}function jP(n){return n}var xl=DC.prototype;xl.calendar=yj;xl.longDateFormat=xj;xl.invalidDate=Sj;xl.ordinal=Bj;xl.preparse=jP;xl.postformat=jP;xl.relativeTime=Ij;xl.pastFuture=Mj;xl.set=mj;xl.eras=sH;xl.erasParse=oH;xl.erasConvertYear=aH;xl.erasAbbrRegex=dH;xl.erasNameRegex=fH;xl.erasNarrowRegex=pH;xl.months=$j;xl.monthsShort=Kj;xl.monthsParse=Yj;xl.monthsRegex=Jj;xl.monthsShortRegex=Zj;xl.week=tU;xl.firstDayOfYear=iU;xl.firstDayOfWeek=nU;xl.weekdays=pU;xl.weekdaysMin=mU;xl.weekdaysShort=AU;xl.weekdaysParse=yU;xl.weekdaysRegex=xU;xl.weekdaysShortRegex=wU;xl.weekdaysMinRegex=SU;xl.isPM=EU;xl.meridiem=IU;function Aw(n,r,e,i){var o=tg(),a=ym().set(i,r);return o[e](a,n)}function UP(n,r,e){if(Ym(n)&&(r=n,n=void 0),n=n||"",r!=null)return Aw(n,r,e,"month");var i,o=[];for(i=0;i<12;i++)o[i]=Aw(n,i,e,"month");return o}function eE(n,r,e,i){typeof n=="boolean"?(Ym(r)&&(e=r,r=void 0),r=r||""):(r=n,e=r,n=!1,Ym(r)&&(e=r,r=void 0),r=r||"");var o=tg(),a=n?o._week.dow:0,l,t=[];if(e!=null)return Aw(r,(e+a)%7,i,"day");for(l=0;l<7;l++)t[l]=Aw(r,(l+a)%7,i,"day");return t}function kH(n,r){return UP(n,r,"months")}function OH(n,r){return UP(n,r,"monthsShort")}function DH(n,r,e){return eE(n,r,e,"weekdays")}function RH(n,r,e){return eE(n,r,e,"weekdaysShort")}function NH(n,r,e){return eE(n,r,e,"weekdaysMin")}zg("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var r=n%10,e=Ua(n%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return n+e}});_s.lang=Qp("moment.lang is deprecated. Use moment.locale instead.",zg);_s.langData=Qp("moment.langData is deprecated. Use moment.localeData instead.",tg);var Fm=Math.abs;function jH(){var n=this._data;return this._milliseconds=Fm(this._milliseconds),this._days=Fm(this._days),this._months=Fm(this._months),n.milliseconds=Fm(n.milliseconds),n.seconds=Fm(n.seconds),n.minutes=Fm(n.minutes),n.hours=Fm(n.hours),n.months=Fm(n.months),n.years=Fm(n.years),this}function zP(n,r,e,i){var o=BA(r,e);return n._milliseconds+=i*o._milliseconds,n._days+=i*o._days,n._months+=i*o._months,n._bubble()}function UH(n,r){return zP(this,n,r,1)}function zH(n,r){return zP(this,n,r,-1)}function lI(n){return n<0?Math.floor(n):Math.ceil(n)}function HH(){var n=this._milliseconds,r=this._days,e=this._months,i=this._data,o,a,l,t,h;return n>=0&&r>=0&&e>=0||n<=0&&r<=0&&e<=0||(n+=lI(uS(e)+r)*864e5,r=0,e=0),i.milliseconds=n%1e3,o=Rp(n/1e3),i.seconds=o%60,a=Rp(o/60),i.minutes=a%60,l=Rp(a/60),i.hours=l%24,r+=Rp(l/24),h=Rp(HP(r)),e+=h,r-=lI(uS(h)),t=Rp(e/12),e%=12,i.days=r,i.months=e,i.years=t,this}function HP(n){return n*4800/146097}function uS(n){return n*146097/4800}function QH(n){if(!this.isValid())return NaN;var r,e,i=this._milliseconds;if(n=Vp(n),n==="month"||n==="quarter"||n==="year")switch(r=this._days+i/864e5,e=this._months+HP(r),n){case"month":return e;case"quarter":return e/3;case"year":return e/12}else switch(r=this._days+Math.round(uS(this._months)),n){case"week":return r/7+i/6048e5;case"day":return r+i/864e5;case"hour":return r*24+i/36e5;case"minute":return r*1440+i/6e4;case"second":return r*86400+i/1e3;case"millisecond":return Math.floor(r*864e5)+i;default:throw new Error("Unknown unit "+n)}}function rg(n){return function(){return this.as(n)}}var QP=rg("ms"),VH=rg("s"),GH=rg("m"),WH=rg("h"),$H=rg("d"),KH=rg("w"),qH=rg("M"),YH=rg("Q"),XH=rg("y"),ZH=QP;function JH(){return BA(this)}function eQ(n){return n=Vp(n),this.isValid()?this[n+"s"]():NaN}function y1(n){return function(){return this.isValid()?this._data[n]:NaN}}var tQ=y1("milliseconds"),rQ=y1("seconds"),nQ=y1("minutes"),iQ=y1("hours"),sQ=y1("days"),oQ=y1("months"),aQ=y1("years");function lQ(){return Rp(this.days()/7)}var Dm=Math.round,ly={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function cQ(n,r,e,i,o){return o.relativeTime(r||1,!!e,n,i)}function uQ(n,r,e,i){var o=BA(n).abs(),a=Dm(o.as("s")),l=Dm(o.as("m")),t=Dm(o.as("h")),h=Dm(o.as("d")),f=Dm(o.as("M")),p=Dm(o.as("w")),_=Dm(o.as("y")),g=a<=e.ss&&["s",a]||a<e.s&&["ss",a]||l<=1&&["m"]||l<e.m&&["mm",l]||t<=1&&["h"]||t<e.h&&["hh",t]||h<=1&&["d"]||h<e.d&&["dd",h];return e.w!=null&&(g=g||p<=1&&["w"]||p<e.w&&["ww",p]),g=g||f<=1&&["M"]||f<e.M&&["MM",f]||_<=1&&["y"]||["yy",_],g[2]=r,g[3]=+n>0,g[4]=i,cQ.apply(null,g)}function hQ(n){return n===void 0?Dm:typeof n=="function"?(Dm=n,!0):!1}function fQ(n,r){return ly[n]===void 0?!1:r===void 0?ly[n]:(ly[n]=r,n==="s"&&(ly.ss=r-1),!0)}function dQ(n,r){if(!this.isValid())return this.localeData().invalidDate();var e=!1,i=ly,o,a;return typeof n=="object"&&(r=n,n=!1),typeof n=="boolean"&&(e=n),typeof r=="object"&&(i=Object.assign({},ly,r),r.s!=null&&r.ss==null&&(i.ss=r.s-1)),o=this.localeData(),a=uQ(this,!e,i,o),e&&(a=o.pastFuture(+this,a)),o.postformat(a)}var J3=Math.abs;function X1(n){return(n>0)-(n<0)||+n}function o5(){if(!this.isValid())return this.localeData().invalidDate();var n=J3(this._milliseconds)/1e3,r=J3(this._days),e=J3(this._months),i,o,a,l,t=this.asSeconds(),h,f,p,_;return t?(i=Rp(n/60),o=Rp(i/60),n%=60,i%=60,a=Rp(e/12),e%=12,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=t<0?"-":"",f=X1(this._months)!==X1(t)?"-":"",p=X1(this._days)!==X1(t)?"-":"",_=X1(this._milliseconds)!==X1(t)?"-":"",h+"P"+(a?f+a+"Y":"")+(e?f+e+"M":"")+(r?p+r+"D":"")+(o||i||n?"T":"")+(o?_+o+"H":"")+(i?_+i+"M":"")+(n?_+l+"S":"")):"P0D"}var nl=i5.prototype;nl.isValid=oz;nl.abs=jH;nl.add=UH;nl.subtract=zH;nl.as=QH;nl.asMilliseconds=QP;nl.asSeconds=VH;nl.asMinutes=GH;nl.asHours=WH;nl.asDays=$H;nl.asWeeks=KH;nl.asMonths=qH;nl.asQuarters=YH;nl.asYears=XH;nl.valueOf=ZH;nl._bubble=HH;nl.clone=JH;nl.get=eQ;nl.milliseconds=tQ;nl.seconds=rQ;nl.minutes=nQ;nl.hours=iQ;nl.days=sQ;nl.weeks=lQ;nl.months=oQ;nl.years=aQ;nl.humanize=dQ;nl.toISOString=o5;nl.toString=o5;nl.toJSON=o5;nl.locale=MP;nl.localeData=PP;nl.toIsoString=Qp("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",o5);nl.lang=FP;co("X",0,0,"unix");co("x",0,0,"valueOf");Ms("x",e5);Ms("X",kj);Vl("X",function(n,r,e){e._d=new Date(parseFloat(n)*1e3)});Vl("x",function(n,r,e){e._d=new Date(Ua(n))});//! moment.js
_s.version="2.30.1";pj(wc);_s.fn=ji;_s.min=rz;_s.max=nz;_s.now=iz;_s.utc=ym;_s.unix=PH;_s.months=kH;_s.isDate=cb;_s.locale=zg;_s.invalid=Yw;_s.duration=BA;_s.isMoment=SA;_s.weekdays=DH;_s.parseZone=LH;_s.localeData=tg;_s.isDuration=Qx;_s.monthsShort=OH;_s.weekdaysMin=NH;_s.defineLocale=WC;_s.updateLocale=LU;_s.locales=kU;_s.weekdaysShort=RH;_s.normalizeUnits=Vp;_s.relativeTimeRounding=hQ;_s.relativeTimeThreshold=fQ;_s.calendarFormat=Iz;_s.prototype=ji;_s.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const pQ=Object.freeze(Object.defineProperty({__proto__:null,default:_s},Symbol.toStringTag,{value:"Module"}));var Gx={exports:{}};const AQ=CF(pQ);/**
* @version: 3.1
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2019 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: http://www.daterangepicker.com/
*/var mQ=Gx.exports,cI;function gQ(){return cI||(cI=1,function(n){(function(r,e){if(n.exports){var i=typeof window<"u"?window.jQuery:void 0;i||(i=IC(),i.fn||(i.fn={}));var o=typeof window<"u"&&typeof window.moment<"u"?window.moment:AQ;n.exports=e(o,i)}else r.daterangepicker=e(r.moment,r.jQuery)})(mQ,function(r,e){var i=function(o,a,l){if(this.parentEl="body",this.element=e(o),this.startDate=r().startOf("day"),this.endDate=r().endOf("day"),this.minDate=!1,this.maxDate=!1,this.maxSpan=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=r().subtract(100,"year").format("YYYY"),this.maxYear=r().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:r.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:r.weekdaysMin(),monthNames:r.monthsShort(),firstDay:r.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},(typeof a!="object"||a===null)&&(a={}),a=e.extend(this.element.data(),a),typeof a.template!="string"&&!(a.template instanceof e)&&(a.template='<div class="daterangepicker"><div class="ranges"></div><div class="drp-calendar left"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-calendar right"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-buttons"><span class="drp-selected"></span><button class="cancelBtn" type="button"></button><button class="applyBtn" disabled="disabled" type="button"></button> </div></div>'),this.parentEl=a.parentEl&&e(a.parentEl).length?e(a.parentEl):e(this.parentEl),this.container=e(a.template).appendTo(this.parentEl),typeof a.locale=="object"&&(typeof a.locale.direction=="string"&&(this.locale.direction=a.locale.direction),typeof a.locale.format=="string"&&(this.locale.format=a.locale.format),typeof a.locale.separator=="string"&&(this.locale.separator=a.locale.separator),typeof a.locale.daysOfWeek=="object"&&(this.locale.daysOfWeek=a.locale.daysOfWeek.slice()),typeof a.locale.monthNames=="object"&&(this.locale.monthNames=a.locale.monthNames.slice()),typeof a.locale.firstDay=="number"&&(this.locale.firstDay=a.locale.firstDay),typeof a.locale.applyLabel=="string"&&(this.locale.applyLabel=a.locale.applyLabel),typeof a.locale.cancelLabel=="string"&&(this.locale.cancelLabel=a.locale.cancelLabel),typeof a.locale.weekLabel=="string"&&(this.locale.weekLabel=a.locale.weekLabel),typeof a.locale.customRangeLabel=="string")){var t=document.createElement("textarea");t.innerHTML=a.locale.customRangeLabel;var h=t.value;this.locale.customRangeLabel=h}if(this.container.addClass(this.locale.direction),typeof a.startDate=="string"&&(this.startDate=r(a.startDate,this.locale.format)),typeof a.endDate=="string"&&(this.endDate=r(a.endDate,this.locale.format)),typeof a.minDate=="string"&&(this.minDate=r(a.minDate,this.locale.format)),typeof a.maxDate=="string"&&(this.maxDate=r(a.maxDate,this.locale.format)),typeof a.startDate=="object"&&(this.startDate=r(a.startDate)),typeof a.endDate=="object"&&(this.endDate=r(a.endDate)),typeof a.minDate=="object"&&(this.minDate=r(a.minDate)),typeof a.maxDate=="object"&&(this.maxDate=r(a.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),typeof a.applyButtonClasses=="string"&&(this.applyButtonClasses=a.applyButtonClasses),typeof a.applyClass=="string"&&(this.applyButtonClasses=a.applyClass),typeof a.cancelButtonClasses=="string"&&(this.cancelButtonClasses=a.cancelButtonClasses),typeof a.cancelClass=="string"&&(this.cancelButtonClasses=a.cancelClass),typeof a.maxSpan=="object"&&(this.maxSpan=a.maxSpan),typeof a.dateLimit=="object"&&(this.maxSpan=a.dateLimit),typeof a.opens=="string"&&(this.opens=a.opens),typeof a.drops=="string"&&(this.drops=a.drops),typeof a.showWeekNumbers=="boolean"&&(this.showWeekNumbers=a.showWeekNumbers),typeof a.showISOWeekNumbers=="boolean"&&(this.showISOWeekNumbers=a.showISOWeekNumbers),typeof a.buttonClasses=="string"&&(this.buttonClasses=a.buttonClasses),typeof a.buttonClasses=="object"&&(this.buttonClasses=a.buttonClasses.join(" ")),typeof a.showDropdowns=="boolean"&&(this.showDropdowns=a.showDropdowns),typeof a.minYear=="number"&&(this.minYear=a.minYear),typeof a.maxYear=="number"&&(this.maxYear=a.maxYear),typeof a.showCustomRangeLabel=="boolean"&&(this.showCustomRangeLabel=a.showCustomRangeLabel),typeof a.singleDatePicker=="boolean"&&(this.singleDatePicker=a.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),typeof a.timePicker=="boolean"&&(this.timePicker=a.timePicker),typeof a.timePickerSeconds=="boolean"&&(this.timePickerSeconds=a.timePickerSeconds),typeof a.timePickerIncrement=="number"&&(this.timePickerIncrement=a.timePickerIncrement),typeof a.timePicker24Hour=="boolean"&&(this.timePicker24Hour=a.timePicker24Hour),typeof a.autoApply=="boolean"&&(this.autoApply=a.autoApply),typeof a.autoUpdateInput=="boolean"&&(this.autoUpdateInput=a.autoUpdateInput),typeof a.linkedCalendars=="boolean"&&(this.linkedCalendars=a.linkedCalendars),typeof a.isInvalidDate=="function"&&(this.isInvalidDate=a.isInvalidDate),typeof a.isCustomDate=="function"&&(this.isCustomDate=a.isCustomDate),typeof a.alwaysShowCalendars=="boolean"&&(this.alwaysShowCalendars=a.alwaysShowCalendars),this.locale.firstDay!=0)for(var f=this.locale.firstDay;f>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),f--;var p,_,g;if(typeof a.startDate>"u"&&typeof a.endDate>"u"&&e(this.element).is(":text")){var m=e(this.element).val(),b=m.split(this.locale.separator);p=_=null,b.length==2?(p=r(b[0],this.locale.format),_=r(b[1],this.locale.format)):this.singleDatePicker&&m!==""&&(p=r(m,this.locale.format),_=r(m,this.locale.format)),p!==null&&_!==null&&(this.setStartDate(p),this.setEndDate(_))}if(typeof a.ranges=="object"){for(g in a.ranges){typeof a.ranges[g][0]=="string"?p=r(a.ranges[g][0],this.locale.format):p=r(a.ranges[g][0]),typeof a.ranges[g][1]=="string"?_=r(a.ranges[g][1],this.locale.format):_=r(a.ranges[g][1]),this.minDate&&p.isBefore(this.minDate)&&(p=this.minDate.clone());var x=this.maxDate;if(this.maxSpan&&x&&p.clone().add(this.maxSpan).isAfter(x)&&(x=p.clone().add(this.maxSpan)),x&&_.isAfter(x)&&(_=x.clone()),!(this.minDate&&_.isBefore(this.minDate,this.timepicker?"minute":"day")||x&&p.isAfter(x,this.timepicker?"minute":"day"))){var t=document.createElement("textarea");t.innerHTML=g;var h=t.value;this.ranges[h]=[p,_]}}var v="<ul>";for(g in this.ranges)v+='<li data-range-key="'+g+'">'+g+"</li>";this.showCustomRangeLabel&&(v+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),v+="</ul>",this.container.find(".ranges").prepend(v)}typeof l=="function"&&(this.callback=l),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&this.container.addClass("auto-apply"),typeof a.ranges=="object"&&this.container.addClass("show-ranges"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),!this.timePicker&&this.autoApply&&this.container.addClass("auto-apply")),(typeof a.ranges>"u"&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses),this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".drp-calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",e.proxy(this.timeChanged,this)),this.container.find(".ranges").on("click.daterangepicker","li",e.proxy(this.clickRange,this)),this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.elementChanged,this),"keydown.daterangepicker":e.proxy(this.keydown,this)}):(this.element.on("click.daterangepicker",e.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",e.proxy(this.toggle,this))),this.updateElement()};return i.prototype={constructor:i,setStartDate:function(o){typeof o=="string"&&(this.startDate=r(o,this.locale.format)),typeof o=="object"&&(this.startDate=r(o)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(o){typeof o=="string"&&(this.endDate=r(o,this.locale.format)),typeof o=="object"&&(this.endDate=r(o)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan)),this.previousRightTime=this.endDate.clone(),this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").prop("disabled",!1).removeClass("disabled"):this.container.find(".right .calendar-time select").prop("disabled",!0).addClass("disabled")),this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),!this.linkedCalendars&&(this.endDate.month()!=this.startDate.month()||this.endDate.year()!=this.startDate.year())?this.rightCalendar.month=this.endDate.clone().date(2):this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month")}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var o,a,l;if(this.endDate){if(o=parseInt(this.container.find(".left .hourselect").val(),10),a=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(a)&&(a=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),l=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var t=this.container.find(".left .ampmselect").val();t==="PM"&&o<12&&(o+=12),t==="AM"&&o===12&&(o=0)}}else if(o=parseInt(this.container.find(".right .hourselect").val(),10),a=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(a)&&(a=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),l=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var t=this.container.find(".right .ampmselect").val();t==="PM"&&o<12&&(o+=12),t==="AM"&&o===12&&(o=0)}this.leftCalendar.month.hour(o).minute(a).second(l),this.rightCalendar.month.hour(o).minute(a).second(l)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),this.endDate!=null&&this.calculateChosenLabel()},renderCalendar:function(o){var S=o=="left"?this.leftCalendar:this.rightCalendar,a=S.month.month(),l=S.month.year(),t=S.month.hour(),h=S.month.minute(),f=S.month.second(),p=r([l,a]).daysInMonth(),_=r([l,a,1]),g=r([l,a,p]),m=r(_).subtract(1,"month").month(),b=r(_).subtract(1,"month").year(),x=r([b,m]).daysInMonth(),v=_.day(),S=[];S.firstDay=_,S.lastDay=g;for(var B=0;B<6;B++)S[B]=[];var F=x-v+this.locale.firstDay+1;F>x&&(F-=7),v==this.locale.firstDay&&(F=x-6);for(var O=r([b,m,F,12,h,f]),V,X,B=0,V=0,X=0;B<42;B++,V++,O=r(O).add(24,"hour"))B>0&&V%7===0&&(V=0,X++),S[X][V]=O.clone().hour(t).minute(h).second(f),O.hour(12),this.minDate&&S[X][V].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&S[X][V].isBefore(this.minDate)&&o=="left"&&(S[X][V]=this.minDate.clone()),this.maxDate&&S[X][V].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&S[X][V].isAfter(this.maxDate)&&o=="right"&&(S[X][V]=this.maxDate.clone());o=="left"?this.leftCalendar.calendar=S:this.rightCalendar.calendar=S;var Q=o=="left"?this.minDate:this.startDate,ee=this.maxDate;o=="left"?this.startDate:this.endDate,this.locale.direction=="ltr";var ne='<table class="table-condensed">';ne+="<thead>",ne+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(ne+="<th></th>"),(!Q||Q.isBefore(S.firstDay))&&(!this.linkedCalendars||o=="left")?ne+='<th class="prev available"><span></span></th>':ne+="<th></th>";var Ae=this.locale.monthNames[S[1][1].month()]+S[1][1].format(" YYYY");if(this.showDropdowns){for(var fe=S[1][1].month(),ce=S[1][1].year(),G=ee&&ee.year()||this.maxYear,Z=Q&&Q.year()||this.minYear,z=ce==Z,k=ce==G,R='<select class="monthselect">',N=0;N<12;N++)(!z||Q&&N>=Q.month())&&(!k||ee&&N<=ee.month())?R+="<option value='"+N+"'"+(N===fe?" selected='selected'":"")+">"+this.locale.monthNames[N]+"</option>":R+="<option value='"+N+"'"+(N===fe?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[N]+"</option>";R+="</select>";for(var U='<select class="yearselect">',Y=Z;Y<=G;Y++)U+='<option value="'+Y+'"'+(Y===ce?' selected="selected"':"")+">"+Y+"</option>";U+="</select>",Ae=R+U}if(ne+='<th colspan="5" class="month">'+Ae+"</th>",(!ee||ee.isAfter(S.lastDay))&&(!this.linkedCalendars||o=="right"||this.singleDatePicker)?ne+='<th class="next available"><span></span></th>':ne+="<th></th>",ne+="</tr>",ne+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(ne+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,function(pe,Oe){ne+="<th>"+Oe+"</th>"}),ne+="</tr>",ne+="</thead>",ne+="<tbody>",this.endDate==null&&this.maxSpan){var de=this.startDate.clone().add(this.maxSpan).endOf("day");(!ee||de.isBefore(ee))&&(ee=de)}for(var X=0;X<6;X++){ne+="<tr>",this.showWeekNumbers?ne+='<td class="week">'+S[X][0].week()+"</td>":this.showISOWeekNumbers&&(ne+='<td class="week">'+S[X][0].isoWeek()+"</td>");for(var V=0;V<7;V++){var J=[];S[X][V].isSame(new Date,"day")&&J.push("today"),S[X][V].isoWeekday()>5&&J.push("weekend"),S[X][V].month()!=S[1][1].month()&&J.push("off","ends"),this.minDate&&S[X][V].isBefore(this.minDate,"day")&&J.push("off","disabled"),ee&&S[X][V].isAfter(ee,"day")&&J.push("off","disabled"),this.isInvalidDate(S[X][V])&&J.push("off","disabled"),S[X][V].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&J.push("active","start-date"),this.endDate!=null&&S[X][V].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&J.push("active","end-date"),this.endDate!=null&&S[X][V]>this.startDate&&S[X][V]<this.endDate&&J.push("in-range");var xe=this.isCustomDate(S[X][V]);xe!==!1&&(typeof xe=="string"?J.push(xe):Array.prototype.push.apply(J,xe));for(var Te="",Ue=!1,B=0;B<J.length;B++)Te+=J[B]+" ",J[B]=="disabled"&&(Ue=!0);Ue||(Te+="available"),ne+='<td class="'+Te.replace(/^\s+|\s+$/g,"")+'" data-title="r'+X+"c"+V+'">'+S[X][V].date()+"</td>"}ne+="</tr>"}ne+="</tbody>",ne+="</table>",this.container.find(".drp-calendar."+o+" .calendar-table").html(ne)},renderTimePicker:function(o){if(!(o=="right"&&!this.endDate)){var a,l,t,h=this.maxDate;if(this.maxSpan&&(!this.maxDate||this.startDate.clone().add(this.maxSpan).isBefore(this.maxDate))&&(h=this.startDate.clone().add(this.maxSpan)),o=="left")l=this.startDate.clone(),t=this.minDate;else if(o=="right"){l=this.endDate.clone(),t=this.startDate;var f=this.container.find(".drp-calendar.right .calendar-time");if(f.html()!=""&&(l.hour(isNaN(l.hour())?f.find(".hourselect option:selected").val():l.hour()),l.minute(isNaN(l.minute())?f.find(".minuteselect option:selected").val():l.minute()),l.second(isNaN(l.second())?f.find(".secondselect option:selected").val():l.second()),!this.timePicker24Hour)){var p=f.find(".ampmselect option:selected").val();p==="PM"&&l.hour()<12&&l.hour(l.hour()+12),p==="AM"&&l.hour()===12&&l.hour(0)}l.isBefore(this.startDate)&&(l=this.startDate.clone()),h&&l.isAfter(h)&&(l=h.clone())}a='<select class="hourselect">';for(var _=this.timePicker24Hour?0:1,g=this.timePicker24Hour?23:12,m=_;m<=g;m++){var b=m;this.timePicker24Hour||(b=l.hour()>=12?m==12?12:m+12:m==12?0:m);var x=l.clone().hour(b),v=!1;t&&x.minute(59).isBefore(t)&&(v=!0),h&&x.minute(0).isAfter(h)&&(v=!0),b==l.hour()&&!v?a+='<option value="'+m+'" selected="selected">'+m+"</option>":v?a+='<option value="'+m+'" disabled="disabled" class="disabled">'+m+"</option>":a+='<option value="'+m+'">'+m+"</option>"}a+="</select> ",a+=': <select class="minuteselect">';for(var m=0;m<60;m+=this.timePickerIncrement){var S=m<10?"0"+m:m,x=l.clone().minute(m),v=!1;t&&x.second(59).isBefore(t)&&(v=!0),h&&x.second(0).isAfter(h)&&(v=!0),l.minute()==m&&!v?a+='<option value="'+m+'" selected="selected">'+S+"</option>":v?a+='<option value="'+m+'" disabled="disabled" class="disabled">'+S+"</option>":a+='<option value="'+m+'">'+S+"</option>"}if(a+="</select> ",this.timePickerSeconds){a+=': <select class="secondselect">';for(var m=0;m<60;m++){var S=m<10?"0"+m:m,x=l.clone().second(m),v=!1;t&&x.isBefore(t)&&(v=!0),h&&x.isAfter(h)&&(v=!0),l.second()==m&&!v?a+='<option value="'+m+'" selected="selected">'+S+"</option>":v?a+='<option value="'+m+'" disabled="disabled" class="disabled">'+S+"</option>":a+='<option value="'+m+'">'+S+"</option>"}a+="</select> "}if(!this.timePicker24Hour){a+='<select class="ampmselect">';var B="",F="";t&&l.clone().hour(12).minute(0).second(0).isBefore(t)&&(B=' disabled="disabled" class="disabled"'),h&&l.clone().hour(0).minute(0).second(0).isAfter(h)&&(F=' disabled="disabled" class="disabled"'),l.hour()>=12?a+='<option value="AM"'+B+'>AM</option><option value="PM" selected="selected"'+F+">PM</option>":a+='<option value="AM" selected="selected"'+B+'>AM</option><option value="PM"'+F+">PM</option>",a+="</select>"}this.container.find(".drp-calendar."+o+" .calendar-time").html(a)}},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").prop("disabled",!1):this.container.find("button.applyBtn").prop("disabled",!0)},move:function(){var o={top:0,left:0},a,l=this.drops,t=e(window).width();switch(this.parentEl.is("body")||(o={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},t=this.parentEl[0].clientWidth+this.parentEl.offset().left),l){case"auto":a=this.element.offset().top+this.element.outerHeight()-o.top,a+this.container.outerHeight()>=this.parentEl[0].scrollHeight&&(a=this.element.offset().top-this.container.outerHeight()-o.top,l="up");break;case"up":a=this.element.offset().top-this.container.outerHeight()-o.top;break;default:a=this.element.offset().top+this.element.outerHeight()-o.top;break}this.container.css({top:0,left:0,right:"auto"});var h=this.container.outerWidth();if(this.container.toggleClass("drop-up",l=="up"),this.opens=="left"){var f=t-this.element.offset().left-this.element.outerWidth();h+f>e(window).width()?this.container.css({top:a,right:"auto",left:9}):this.container.css({top:a,right:f,left:"auto"})}else if(this.opens=="center"){var p=this.element.offset().left-o.left+this.element.outerWidth()/2-h/2;p<0?this.container.css({top:a,right:"auto",left:9}):p+h>e(window).width()?this.container.css({top:a,left:"auto",right:0}):this.container.css({top:a,left:p,right:"auto"})}else{var p=this.element.offset().left-o.left;p+h>e(window).width()?this.container.css({top:a,left:"auto",right:0}):this.container.css({top:a,left:p,right:"auto"})}},show:function(o){this.isShowing||(this._outsideClickProxy=e.proxy(function(a){this.outsideClick(a)},this),e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),e(window).on("resize.daterangepicker",e.proxy(function(a){this.move(a)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(o){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))&&this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(o){this.isShowing?this.hide():this.show()},outsideClick:function(o){var a=e(o.target);o.type=="focusin"||a.closest(this.element).length||a.closest(this.container).length||a.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(o){var a=o.target.getAttribute("data-range-key");if(this.chosenLabel=a,a==this.locale.customRangeLabel)this.showCalendars();else{var l=this.ranges[a];this.startDate=l[0],this.endDate=l[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(o){var a=e(o.target).parents(".drp-calendar");a.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(o){var a=e(o.target).parents(".drp-calendar");a.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(o){if(e(o.target).hasClass("available")){var a=e(o.target).attr("data-title"),l=a.substr(1,1),t=a.substr(3,1),h=e(o.target).parents(".drp-calendar"),f=h.hasClass("left")?this.leftCalendar.calendar[l][t]:this.rightCalendar.calendar[l][t],p=this.leftCalendar,_=this.rightCalendar,g=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each(function(m,b){if(!e(b).hasClass("week")){var x=e(b).attr("data-title"),v=x.substr(1,1),S=x.substr(3,1),B=e(b).parents(".drp-calendar"),F=B.hasClass("left")?p.calendar[v][S]:_.calendar[v][S];F.isAfter(g)&&F.isBefore(f)||F.isSame(f,"day")?e(b).addClass("in-range"):e(b).removeClass("in-range")}})}},clickDate:function(o){if(e(o.target).hasClass("available")){var a=e(o.target).attr("data-title"),l=a.substr(1,1),t=a.substr(3,1),h=e(o.target).parents(".drp-calendar"),f=h.hasClass("left")?this.leftCalendar.calendar[l][t]:this.rightCalendar.calendar[l][t];if(this.endDate||f.isBefore(this.startDate,"day")){if(this.timePicker){var p=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var _=this.container.find(".left .ampmselect").val();_==="PM"&&p<12&&(p+=12),_==="AM"&&p===12&&(p=0)}var g=parseInt(this.container.find(".left .minuteselect").val(),10);isNaN(g)&&(g=parseInt(this.container.find(".left .minuteselect option:last").val(),10));var m=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;f=f.clone().hour(p).minute(g).second(m)}this.endDate=null,this.setStartDate(f.clone())}else if(!this.endDate&&f.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var p=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var _=this.container.find(".right .ampmselect").val();_==="PM"&&p<12&&(p+=12),_==="AM"&&p===12&&(p=0)}var g=parseInt(this.container.find(".right .minuteselect").val(),10);isNaN(g)&&(g=parseInt(this.container.find(".right .minuteselect option:last").val(),10));var m=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;f=f.clone().hour(p).minute(g).second(m)}this.setEndDate(f.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),!this.timePicker&&this.autoApply&&this.clickApply()),this.updateView(),o.stopPropagation()}},calculateChosenLabel:function(){var o=!0,a=0;for(var l in this.ranges){if(this.timePicker){var t=this.timePickerSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm";if(this.startDate.format(t)==this.ranges[l][0].format(t)&&this.endDate.format(t)==this.ranges[l][1].format(t)){o=!1,this.chosenLabel=this.container.find(".ranges li:eq("+a+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[l][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[l][1].format("YYYY-MM-DD")){o=!1,this.chosenLabel=this.container.find(".ranges li:eq("+a+")").addClass("active").attr("data-range-key");break}a++}o&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):this.chosenLabel=null,this.showCalendars())},clickApply:function(o){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(o){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(o){var a=e(o.target).closest(".drp-calendar").hasClass("left"),l=a?"left":"right",t=this.container.find(".drp-calendar."+l),h=parseInt(t.find(".monthselect").val(),10),f=t.find(".yearselect").val();a||(f<this.startDate.year()||f==this.startDate.year()&&h<this.startDate.month())&&(h=this.startDate.month(),f=this.startDate.year()),this.minDate&&(f<this.minDate.year()||f==this.minDate.year()&&h<this.minDate.month())&&(h=this.minDate.month(),f=this.minDate.year()),this.maxDate&&(f>this.maxDate.year()||f==this.maxDate.year()&&h>this.maxDate.month())&&(h=this.maxDate.month(),f=this.maxDate.year()),a?(this.leftCalendar.month.month(h).year(f),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(h).year(f),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(o){var a=e(o.target).closest(".drp-calendar"),l=a.hasClass("left"),t=parseInt(a.find(".hourselect").val(),10),h=parseInt(a.find(".minuteselect").val(),10);isNaN(h)&&(h=parseInt(a.find(".minuteselect option:last").val(),10));var f=this.timePickerSeconds?parseInt(a.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var p=a.find(".ampmselect").val();p==="PM"&&t<12&&(t+=12),p==="AM"&&t===12&&(t=0)}if(l){var _=this.startDate.clone();_.hour(t),_.minute(h),_.second(f),this.setStartDate(_),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==_.format("YYYY-MM-DD")&&this.endDate.isBefore(_)&&this.setEndDate(_.clone())}else if(this.endDate){var g=this.endDate.clone();g.hour(t),g.minute(h),g.second(f),this.setEndDate(g)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var o=this.element.val().split(this.locale.separator),a=null,l=null;o.length===2&&(a=r(o[0],this.locale.format),l=r(o[1],this.locale.format)),(this.singleDatePicker||a===null||l===null)&&(a=r(this.element.val(),this.locale.format),l=a),!(!a.isValid()||!l.isValid())&&(this.setStartDate(a),this.setEndDate(l),this.updateView())}},keydown:function(o){(o.keyCode===9||o.keyCode===13)&&this.hide(),o.keyCode===27&&(o.preventDefault(),o.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var o=this.startDate.format(this.locale.format);this.singleDatePicker||(o+=this.locale.separator+this.endDate.format(this.locale.format)),o!==this.element.val()&&this.element.val(o).trigger("change")}},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},e.fn.daterangepicker=function(o,a){var l=e.extend(!0,{},e.fn.daterangepicker.defaultOptions,o);return this.each(function(){var t=e(this);t.data("daterangepicker")&&t.data("daterangepicker").remove(),t.data("daterangepicker",new i(t,l,a))}),this},i})}(Gx)),Gx.exports}gQ();/*! License details at fancyapps.com/license */const Lh=n=>typeof n=="string";/*! License details at fancyapps.com/license */const cy=n=>n&&n!==null&&n instanceof Element&&"nodeType"in n;/*! License details at fancyapps.com/license */const yQ=function(n){if(!(n&&n instanceof Element&&n.offsetParent))return!1;const r=n.scrollHeight>n.clientHeight,e=window.getComputedStyle(n).overflowY,i=e.indexOf("hidden")!==-1,o=e.indexOf("visible")!==-1;return r&&!i&&!o},Rv=function(n,r=void 0){return!n||n===document.body||r&&n===r?null:yQ(n)?n:Rv(n.parentElement,r)};/*! License details at fancyapps.com/license */const $g=function(n){var r=new DOMParser().parseFromString(n,"text/html").body;if(r.childElementCount>1){for(var e=document.createElement("div");r.firstChild;)e.appendChild(r.firstChild);return e}let i=r.firstChild;return!i||i instanceof HTMLElement?i:((e=document.createElement("div")).appendChild(i),e)};/*! License details at fancyapps.com/license */const rl=function(n=0,r=0,e=0){return Math.max(Math.min(r,e),n)};/*! License details at fancyapps.com/license */const Yf=n=>typeof n=="object"&&n!==null&&n.constructor===Object&&Object.prototype.toString.call(n)==="[object Object]";/*! License details at fancyapps.com/license */function uI(n){return Yf(n)||Array.isArray(n)}function hS(n,r){const e=Object.keys(n),i=Object.keys(r);return e.length===i.length&&e.every(o=>{const a=n[o],l=r[o];return typeof a=="function"?`${a}`==`${l}`:uI(a)&&uI(l)?hS(a,l):a===l})}/*! License details at fancyapps.com/license */const VP=function(n){for(const r of mw)r.getState()===$f.Running&&r.tick(e4?n-e4:0);e4=n,my=window.requestAnimationFrame(VP)};var $f,Tg,uy;(function(n){n[n.Initializing=0]="Initializing",n[n.Running=1]="Running",n[n.Paused=2]="Paused",n[n.Completed=3]="Completed",n[n.Destroyed=4]="Destroyed"})($f||($f={})),function(n){n[n.Spring=0]="Spring",n[n.Ease=1]="Ease"}(Tg||(Tg={})),function(n){n[n.Loop=0]="Loop",n[n.Reverse=1]="Reverse"}(uy||(uy={}));const mw=new Set;let my=null,e4=0;function Kg(){let n=$f.Initializing,r=Tg.Ease,e=0,i=0,o=Kg.Easings.Linear,a=500,l=0,t=0,h=0,f=0,p=1/0,_=.01,g=.01,m=!1,b={},x=null,v={},S={},B={},F=0,O=0,V=uy.Loop,X=Kg.Easings.Linear;const Q=new Map;function ee(G,...Z){for(const z of Q.get(G)||[])z(...Z)}function ne(G){return i=0,G?x=setTimeout(()=>{Ae()},G):Ae(),ce}function Ae(){n=$f.Running,ee("start",v,S)}function fe(){if(n=$f.Completed,B={},ee("end",v),n===$f.Completed)if(e<F){if(e++,V===uy.Reverse){const G=Object.assign({},b);b=Object.assign({},S),S=G}ne(O)}else e=0;return ce}const ce={getState:function(){return n},easing:function(G){return o=G,r=Tg.Ease,B={},ce},duration:function(G){return a=G,ce},spring:function(G={}){r=Tg.Spring;const Z={velocity:0,mass:1,tension:170,friction:26,restDelta:.1,restSpeed:.1,maxSpeed:1/0,clamp:!0},{velocity:z,mass:k,tension:R,friction:N,restDelta:U,restSpeed:Y,maxSpeed:de,clamp:J}=Object.assign(Object.assign({},Z),G);return l=z,t=k,h=R,f=N,g=U,_=Y,p=de,m=J,B={},ce},isRunning:function(){return n===$f.Running},isSpring:function(){return r===Tg.Spring},from:function(G){return v=Object.assign({},G),ce},to:function(G){return S=G,ce},repeat:function(G,Z=0,z=uy.Loop,k){return F=G,O=Z,V=z,X=k||o,ce},on:function(G,Z){var z,k;return z=G,k=Z,Q.set(z,[...Q.get(z)||[],k]),ce},off:function(G,Z){var z,k;return z=G,k=Z,Q.has(z)&&Q.set(z,Q.get(z).filter(R=>R!==k)),ce},start:function(G){return n=$f.Initializing,b=Object.assign({},v),hS(b,S)||(mw.add(this),my||(my=window.requestAnimationFrame(VP)),ne(G)),ce},pause:function(){return x&&(clearTimeout(x),x=null),n===$f.Running&&(n=$f.Paused,ee("pause",v)),ce},end:fe,tick:function(G){G>50&&(G=50),i+=G;let Z=0,z=!1;if(n!==$f.Running)return ce;if(r===Tg.Ease){Z=rl(0,i/a,1),z=Z===1;const R=V===uy.Reverse?X:o;for(const N in v)v[N]=b[N]+(S[N]-b[N])*R(Z)}if(r===Tg.Spring){const R=.001*G;let N=0;for(const U in v){const Y=S[U];let de=v[U];if(typeof Y!="number"||isNaN(Y)||typeof de!="number"||isNaN(de))continue;if(Math.abs(Y-de)<=g){v[U]=Y,B[U]=0;continue}B[U]||(typeof l=="object"&&typeof l[U]=="number"?B[U]=l[U]:B[U]=typeof l=="number"?l:0);let J=B[U];J=rl(-1*Math.abs(p),J,Math.abs(p));const xe=J*t*f;J+=((de>Y?-1:1)*(Math.abs(Y-de)*h)-xe)/t*R,de+=J*R;const Te=v[U]>Y?de<Y:de>Y;let Ue=Math.abs(J)<_&&Math.abs(Y-de)<=g;m&&Te&&(Ue=!0),Ue?(de=Y,J=0):N++,v[U]=de,B[U]=J}z=!N}const k=Object.assign({},S);return ee("step",v,b,S,Z),z&&n===$f.Running&&hS(S,k)&&(n=$f.Completed,fe()),ce},getStartValues:function(){return b},getCurrentValues:function(){return v},getCurrentVelocities:function(){return B},getEndValues:function(){return S},destroy:function(){n=$f.Destroyed,x&&(clearTimeout(x),x=null),b=v=S={},mw.delete(this)}};return ce}Kg.destroy=()=>{for(const n of mw)n.destroy();my&&(cancelAnimationFrame(my),my=null)},Kg.Easings={Linear:function(n){return n},EaseIn:function(n){return n===0?0:Math.pow(2,10*n-10)},EaseOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},EaseInOut:function(n){return n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2}};/*! License details at fancyapps.com/license */function t4(n){const r=[],e=typeof TouchEvent<"u"&&n instanceof TouchEvent?n.touches:n instanceof MouseEvent&&n.type!=="mouseup"?[n]:[];for(const i of e)r.push({x:i.clientX,y:i.clientY,ts:Date.now()});return r}function GP(n){const r=[],e=typeof TouchEvent<"u"&&n instanceof TouchEvent?n.changedTouches:n instanceof MouseEvent?[n]:[];for(const i of e)r.push({x:i.clientX,y:i.clientY,ts:Date.now()});return r}function Eg(n){const r=n[0],e=n[1]||r;return{x:(r.x+e.x)/2,y:(r.y+e.y)/2,ts:e.ts}}function ox(n){const r=n[0],e=n[1]||n[0];return r&&e?-1*Math.sqrt((e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y)):0}const hI=n=>{n.cancelable&&n.preventDefault()},bg={passive:!1},_Q={panThreshold:5,swipeThreshold:3,ignore:["textarea","input","select","[contenteditable]","[data-selectable]","[data-draggable]"]};let r4=!1,rv=!0;const Nv=(n,r)=>{let e,i,o,a=Object.assign(Object.assign({},_Q),r),l=[],t=[],h=[],f=!1,p=!1,_=!1,g=0,m=0,b=0,x=0,v=0,S=0,B=0,F=0,O=0,V=[],X=0,Q=0;const ee=new Map;function ne(U){const Y=ox(t),de=ox(h),J=Y&&de?Y/de:0,xe=Math.abs(B)>Math.abs(F)?B:F,Te={srcEvent:e,isPanRecognized:f,isSwipeRecognized:p,firstTouch:l,previousTouch:h,currentTouch:t,deltaX:b,deltaY:x,offsetX:v,offsetY:S,velocityX:B,velocityY:F,velocity:xe,angle:O,axis:o,scale:J,center:i};for(const Ue of ee.get(U)||[])Ue(Te)}function Ae(U){const Y=Date.now();V=V.filter(de=>!de.ts||de.ts>Y-100),U&&V.push(U)}function fe(){if(B=0,F=0,V.length>3){const U=V[0],Y=V[V.length-1];if(U&&Y){const de=Y.x-U.x,J=Y.y-U.y,xe=U.ts&&Y.ts?Y.ts-U.ts:0;xe>0&&(B=Math.abs(de)>3?de/(xe/30):0,F=Math.abs(J)>3?J/(xe/30):0)}}}function ce(U){if(U instanceof MouseEvent){if(r4)return}else r4=!0;const Y=U.composedPath()[0],de=a.ignore.join(",");if(Y.matches(de)||Y.closest(de)||typeof MouseEvent<"u"&&U instanceof MouseEvent&&(!U.buttons||U.button!==0))return;U instanceof MouseEvent&&hI(U);const J=Date.now(),xe=J-(g||J);_=xe>0&&xe<=250,g=J,clearTimeout(X),e=U,U instanceof MouseEvent&&(window.addEventListener("mousemove",G),window.addEventListener("mouseup",Z)),window.addEventListener("blur",z),t=t4(U),l=[...t],h=[],m=t.length,i=Eg(t),m===1&&(f=!1,p=!1),m&&Ae(Eg(t)),ne("start")}function G(U){var Y;if(!l.length||U.defaultPrevented)return;e=U,h=[...t],t=t4(U),m=t.length,i=Eg(t);const de=i,J=Eg(h);if(b=de.x-J.x,x=de.y-J.y,Ae(de),fe(),ne("move"),t.length>1){const xe=ox(t),Te=ox(h);Math.abs(xe-Te)>=.1&&ne("pinch")}if(!f&&l.length){const xe=Eg(l);v=de.x-xe.x,S=de.y-xe.y,f=Math.abs(v)>a.panThreshold||Math.abs(S)>a.panThreshold,f&&(rv=!1,clearTimeout(Q),Q=0,O=Math.abs(180*Math.atan2(S,v)/Math.PI),o=O>45&&O<135?"y":"x",l=[...t],h=[...t],(Y=window.getSelection())===null||Y===void 0||Y.removeAllRanges(),ne("panstart"))}f&&(b||x)&&ne("pan")}function Z(U){if(e=U,!l.length)return;const Y=t4(U),de=GP(U);if(m=Y.length,i=Eg(de),de.length&&Ae(Eg(de)),fe(),h=[...t],t=[...Y],l=[...Y],Y.length>0)ne("end"),f=!1,p=!1,V=[];else{const J=a.swipeThreshold;(Math.abs(B)>J||Math.abs(F)>J)&&(p=!0),f&&ne("panend"),p&&ne("swipe"),f||p||(ne("tap"),_?ne("doubleTap"):X=setTimeout(function(){ne("singleTap")},250)),ne("end"),k()}}function z(){clearTimeout(X),k(),f&&ne("panend"),ne("end")}function k(){f=!1,p=!1,_=!1,m=0,V=[],t=[],h=[],l=[],b=0,x=0,v=0,S=0,B=0,F=0,O=0,o=void 0,window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",Z),window.removeEventListener("blur",z),rv||Q||(Q=setTimeout(()=>{rv=!0,Q=0},100))}function R(U){const Y=U.target;r4=!1,Y&&!U.defaultPrevented&&(rv||(hI(U),U.stopPropagation()))}const N={init:function(){if(n)return n.addEventListener("click",R,bg),n.addEventListener("mousedown",ce,bg),n.addEventListener("touchstart",ce,bg),n.addEventListener("touchmove",G,bg),n.addEventListener("touchend",Z),n.addEventListener("touchcancel",Z),N},on:function(U,Y){return function(de,J){ee.set(de,[...ee.get(de)||[],J])}(U,Y),N},off:function(U,Y){return ee.has(U)&&ee.set(U,ee.get(U).filter(de=>de!==Y)),N},isPointerDown:()=>m>0,destroy:function(){clearTimeout(X),clearTimeout(Q),Q=0,n&&(n.removeEventListener("click",R,bg),n.removeEventListener("mousedown",ce,bg),n.removeEventListener("touchstart",ce,bg),n.removeEventListener("touchmove",G,bg),n.removeEventListener("touchend",Z),n.removeEventListener("touchcancel",Z)),n=null,k()}};return N};Nv.isClickAllowed=()=>rv;/*! License details at fancyapps.com/license */const tE={IMAGE_ERROR:"This image couldn't be loaded. <br /> Please try again later.",MOVE_UP:"Move up",MOVE_DOWN:"Move down",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",TOGGLE_FULL:"Toggle zoom level",TOGGLE_1TO1:"Toggle zoom level",ITERATE_ZOOM:"Toggle zoom level",ROTATE_CCW:"Rotate counterclockwise",ROTATE_CW:"Rotate clockwise",FLIP_X:"Flip horizontally",FLIP_Y:"Flip vertically",RESET:"Reset"};/*! License details at fancyapps.com/license */const Fl=(n,r="")=>{n&&n.classList&&r.split(" ").forEach(e=>{e&&n.classList.add(e)})};/*! License details at fancyapps.com/license */const ax=n=>{n.cancelable&&n.preventDefault()},Wf=(n,r=1e4)=>(n=parseFloat(n+"")||0,Math.round((n+Number.EPSILON)*r)/r);var Is,fI;(function(n){n.Reset="reset",n.Zoom="zoom",n.ZoomIn="zoomIn",n.ZoomOut="zoomOut",n.ZoomTo="zoomTo",n.ToggleCover="toggleCover",n.ToggleFull="toggleFull",n.ToggleMax="toggleMax",n.IterateZoom="iterateZoom",n.Pan="pan",n.Swipe="swipe",n.Move="move",n.MoveLeft="moveLeft",n.MoveRight="moveRight",n.MoveUp="moveUp",n.MoveDown="moveDown",n.RotateCCW="rotateCCW",n.RotateCW="rotateCW",n.FlipX="flipX",n.FlipY="flipY"})(Is||(Is={})),function(n){n.Cover="cover",n.Full="full",n.Max="max"}(fI||(fI={}));const Op={x:0,y:0,scale:1,angle:0,flipX:1,flipY:1},fS={bounds:!0,classes:{container:"f-panzoom",wrapper:"f-panzoom__wrapper",content:"f-panzoom__content",viewport:"f-panzoom__viewport"},clickAction:Is.ToggleFull,dblClickAction:!1,gestures:{},height:"auto",l10n:tE,maxScale:4,minScale:1,mouseMoveFactor:1,panMode:"drag",singleClickAction:!1,spinnerTpl:'<div class="f-spinner"></div>',wheelAction:Is.Zoom,width:"auto"};let lx,dI=0,pI=0,cx=0;const dS=(n,r={},e={})=>{let i,o,a,l,t,h,f,p=0,_=Object.assign(Object.assign({},fS),r),g={},m=Object.assign({},Op),b=Object.assign({},Op);const x=[];function v(Ge){let Ne=_[Ge];return Ne&&typeof Ne=="function"?Ne(He):Ne}const S=new Map;function B(Ge,...Ne){const st=S.get(Ge)||[];_.on&&st.push(_.on[Ge]);for(const ot of st)ot&&ot instanceof Function&&ot(He,...Ne);Ge!=="*"&&B("*",Ge,...Ne)}function F(Ge){if(p!==3)return;const Ne=Ge.target;if(Rv(Ne))return;const st=Date.now(),ot=[-Ge.deltaX||0,-Ge.deltaY||0,-Ge.detail||0].reduce(function(Nt,kt){return Math.abs(kt)>Math.abs(Nt)?kt:Nt}),Je=rl(-1,ot,1);B("wheel",Ge,Je);const Ze=v("wheelAction");if(!Ze||Ge.defaultPrevented)return;const bt=b.scale;let yt=bt*(Je>0?1.5:.5);if(Ze===Is.Zoom){const Nt=Math.abs(Ge.deltaY)<100&&Math.abs(Ge.deltaX)<100;if(st-pI<(Nt?200:45))return void ax(Ge);pI=st;const kt=ce(),Gt=k();if(Wf(yt)<Wf(kt)&&Wf(bt)<=Wf(kt)?(cx+=Math.abs(Je),yt=kt):Wf(yt)>Wf(Gt)&&Wf(bt)>=Wf(Gt)?(cx+=Math.abs(Je),yt=Gt):(cx=0,yt=rl(kt,yt,Gt)),cx>7)return}switch(ax(Ge),Ze){case Is.Pan:Y(Ze,{srcEvent:Ge,deltaX:2*-Ge.deltaX,deltaY:2*-Ge.deltaY});break;case Is.Zoom:Y(Is.ZoomTo,{srcEvent:Ge,scale:yt,center:{x:Ge.clientX,y:Ge.clientY}});break;default:Y(Ze,{srcEvent:Ge})}}function O(Ge){var Ne,st;const ot=Ge.composedPath()[0];if(!Nv.isClickAllowed()||!cy(ot)||Ge.defaultPrevented||!(n!=null&&n.contains(ot))||ot.hasAttribute("disabled")||ot.hasAttribute("aria-disabled"))return;const Je=ot.closest("[data-panzoom-action]"),Ze=(Ne=Je==null?void 0:Je.dataset)===null||Ne===void 0?void 0:Ne.panzoomAction,bt=((st=Je==null?void 0:Je.dataset)===null||st===void 0?void 0:st.panzoomValue)||"";if(Ze){switch(Ze){case Is.ZoomTo:case Is.ZoomIn:case Is.ZoomOut:Y(Ze,{scale:parseFloat(bt||"")||void 0});break;case Is.MoveLeft:case Is.MoveRight:Y(Ze,{deltaX:parseFloat(bt||"")||void 0});break;case Is.MoveUp:case Is.MoveDown:Y(Ze,{deltaY:parseFloat(bt||"")||void 0});break;default:Y(Ze)}return}if(!(i!=null&&i.contains(ot)))return;const yt={srcEvent:Ge};if(Y(v("clickAction"),yt),v("dblClickAction")){const Nt=Date.now(),kt=Nt-(dI||Nt);dI=Nt,kt>0&&kt<=250?(lx&&(clearTimeout(lx),lx=void 0),Y(v("dblClickAction"),yt)):lx=setTimeout(()=>{Y(v("singleClickAction"),yt)},250)}}function V(Ge){if(f=Ge,!ne()||p!==3||m.scale<=1||b.scale<=1||((i==null?void 0:i.dataset.animationName)||"").indexOf("zoom")>-1)return;const Ne=Ae(b.scale);if(!Ne)return;const{x:st,y:ot}=Ne;Y(Is.Pan,{deltaX:st-b.x,deltaY:ot-b.y})}function X(){var Ge;if(n&&((Ge=n.querySelector(".f-spinner"))===null||Ge===void 0||Ge.remove(),n.classList.remove("is-loading")),!n||!i)return;if(o instanceof HTMLImageElement&&(!o.complete||!o.naturalWidth))return p=2,i==null||i.classList.add("has-error"),void B("error");B("loaded");const{width:Ne,height:st}=ee();o&&(o.setAttribute("width",Ne+""),o.setAttribute("height",st+"")),i&&(i.classList.remove("has-error"),i.setAttribute("width",Ne+""),i.setAttribute("height",st+""),i.style.aspectRatio=`${Ne/st||""}`),t=Kg().on("start",(Je,Ze)=>{b=Object.assign(Object.assign({},Op),Ze),Ze.angle!==void 0&&(Ze.angle=90*Math.round(Ze.angle/90)),Ze.flipX!==void 0&&(Ze.flipX=Ze.flipX>0?1:-1),Ze.flipY!==void 0&&(Ze.flipY=Ze.flipY>0?1:-1),U(),B("animationStart")}).on("pause",Je=>{b=Object.assign(Object.assign({},Op),Je)}).on("step",Je=>{if(p!==3||!t)return;if(!n||!n.parentElement)return void t.end();if(m=Object.assign(Object.assign({},Op),Je),ne()||!v("bounds")||(l==null?void 0:l.isPointerDown())||b.scale>m.scale||b.scale<G())return void de();const Ze=R(b.scale);let bt=!1,yt=!1,Nt=!1,kt=!1;m.x<Ze.x[0]&&(bt=!0),m.x>Ze.x[1]&&(yt=!0),m.y<Ze.y[0]&&(kt=!0),m.y>Ze.y[1]&&(Nt=!0);let Gt=!1,fr=!1,Tr=!1,yr=!1;b.x<Ze.x[0]&&(Gt=!0),b.x>Ze.x[1]&&(fr=!0),b.y<Ze.y[0]&&(yr=!0),b.y>Ze.y[1]&&(Tr=!0);let Dr=!1;(yt&&fr||bt&&Gt)&&(b.x=rl(Ze.x[0],b.x,Ze.x[1]),Dr=!0),(Nt&&Tr||kt&&yr)&&(b.y=rl(Ze.y[0],b.y,Ze.y[1]),Dr=!0),Dr&&t.spring({tension:94,friction:17,maxSpeed:555*b.scale,restDelta:.1,restSpeed:.1,velocity:t.getCurrentVelocities()}).from(m).to(b).start(),de()}).on("end",()=>{N(),t!=null&&t.isRunning()||(U(),B("animationEnd"))}),function(){const Je=v("gestures");Je&&a&&o&&(l=Nv(a,Je).on("start",Ze=>{if(!t)return;const bt=Ze.srcEvent;ne()||((m.scale>1||Ze.currentTouch.length>1)&&(bt==null||bt.stopPropagation(),t.pause()),Ze.currentTouch.length===1&&B("touchStart"))}).on("move",Ze=>{ne()||(b.scale!==1||Ze.currentTouch.length>1)&&(Ze.srcEvent.preventDefault(),Ze.srcEvent.stopPropagation())}).on("pan",Ze=>{if(ne())return;const bt=Ze.srcEvent;(b.scale!==1||Ze.currentTouch.length>1)&&(ax(bt),Y(Is.Pan,Ze))}).on("swipe",Ze=>{ne()||b.scale>1&&Y(Is.Swipe,Ze)}).on("tap",Ze=>{B("click",Ze)}).on("singleTap",Ze=>{B("singleClick",Ze)}).on("doubleTap",Ze=>{B("dblClick",Ze)}).on("pinch",Ze=>{ne()||(Ze.scale>G()?Y(Is.ZoomIn,Ze):Ze.scale<G()?Y(Is.ZoomOut,Ze):Y(Is.Pan,Ze))}).on("end",Ze=>{ne()||(Ze.currentTouch.length?(Ze.srcEvent.stopPropagation(),ax(Ze.srcEvent),t==null||t.end()):(U(),N(),B("touchEnd")))}).init())}(),a&&(a.addEventListener("wheel",F,{passive:!1}),x.push(()=>{a==null||a.removeEventListener("wheel",F,{passive:!1})})),n==null||n.addEventListener("click",O),document==null||document.addEventListener("mousemove",V),x.push(()=>{n==null||n.removeEventListener("click",O),document==null||document.removeEventListener("mousemove",V)});const ot=Object.assign(Object.assign({},v("startPos")||{}),{scale:G()});if(m=Object.assign(Object.assign({},Op),ot),b=Object.assign(Object.assign({},Op),ot),ne()){const Je=Ae(b.scale);if(Je){const{x:Ze,y:bt}=Je;m.x=Ze,m.y=bt,b.x=Ze,b.y=bt}}p=3,de(),U(),B("ready"),requestAnimationFrame(()=>{a&&(a.style.visibility="")})}function Q(){const Ge={top:0,left:0,width:0,height:0};if(i){const Ne=i.getBoundingClientRect();b.angle%180==90?(Ge.top=Ne.top+.5*Ne.height-.5*Ne.width,Ge.left=Ne.left+.5*Ne.width-.5*Ne.height,Ge.width=Ne.height,Ge.height=Ne.width):(Ge.top=Ne.top,Ge.left=Ne.left,Ge.width=Ne.width,Ge.height=Ne.height)}return Ge}function ee(){let Ge=v("width"),Ne=v("height");if(o&&Ge==="auto"){const st=o.getAttribute("width");Ge=st?parseFloat(st+""):o.dataset.width!==void 0?parseFloat(o.dataset.width+""):a instanceof HTMLImageElement?a.naturalWidth:o instanceof HTMLImageElement?o.naturalWidth:o.getBoundingClientRect().width}else Ge=Lh(Ge)?parseFloat(Ge):Ge;if(o&&Ne==="auto"){const st=o.getAttribute("height");Ne=st?parseFloat(st+""):o.dataset.height!==void 0?parseFloat(o.dataset.height+""):a instanceof HTMLImageElement?a.naturalHeight:o instanceof HTMLImageElement?o.naturalHeight:o.getBoundingClientRect().height}else Ne=Lh(Ne)?parseFloat(Ne):Ne;return{width:Ge,height:Ne}}function ne(){return v("panMode")==="mousemove"&&matchMedia("(hover: hover)").matches}function Ae(Ge){const Ne=f||v("event"),st=i==null?void 0:i.getBoundingClientRect();if(!Ne||!st||Ge<=1)return{x:0,y:0};const ot=(Ne.clientX||0)-st.left,Je=(Ne.clientY||0)-st.top,Ze=st.width,bt=st.height,yt=R(Ge);if(Ge>1){const Tr=v("mouseMoveFactor");Tr>1&&(Ge*=Tr)}let Nt=Ze*Ge,kt=bt*Ge,Gt=.5*(Nt-Ze)-ot/Ze*100/100*(Nt-Ze),fr=.5*(kt-bt)-Je/bt*100/100*(kt-bt);return Gt=rl(yt.x[0],Gt,yt.x[1]),fr=rl(yt.y[0],fr,yt.y[1]),{x:Gt,y:fr}}function fe(Ge="base"){if(!n)return 1;const Ne=n.getBoundingClientRect(),st=Q(),{width:ot,height:Je}=ee(),Ze=Gt=>{if(typeof Gt=="number")return Gt;switch(Gt){case"min":case"base":return 1;case"cover":return Math.max(Ne.height/st.height,Ne.width/st.width)||1;case"full":case"max":{const fr=b.angle%180==90?Je:ot;return fr&&st.width?fr/st.width:1}}},bt=v("minScale"),yt=v("maxScale"),Nt=Math.min(Ze("full"),Ze(bt)),kt=typeof yt=="number"?Ze("full")*yt:Math.min(Ze("full"),Ze(yt));switch(Ge){case"min":return Nt;case"base":return rl(Nt,1,kt);case"cover":return Ze("cover");case"full":return Math.min(kt,Ze("full"));case"max":return kt}}function ce(){return fe("min")}function G(){return fe("base")}function Z(){return fe("cover")}function z(){return fe("full")}function k(){return fe("max")}function R(Ge){const Ne={x:[0,0],y:[0,0]},st=n==null?void 0:n.getBoundingClientRect();if(!st)return Ne;const ot=Q(),Je=st.width,Ze=st.height;let bt=ot.width,yt=ot.height,Nt=Ge=Ge===void 0?b.scale:Ge,kt=Ge;if(ne()&&Ge>1){const Gt=v("mouseMoveFactor");Gt>1&&(bt*Ge>Je+.01&&(Nt*=Gt),yt*Ge>Ze+.01&&(kt*=Gt))}return bt*=Nt,yt*=kt,Ge>1&&(bt>Je&&(Ne.x[0]=.5*(Je-bt),Ne.x[1]=.5*(bt-Je)),Ne.x[0]-=.5*(ot.left-st.left),Ne.x[1]-=.5*(ot.left-st.left),Ne.x[0]-=.5*(ot.left+ot.width-st.right),Ne.x[1]-=.5*(ot.left+ot.width-st.right),yt>Ze&&(Ne.y[0]=.5*(Ze-yt),Ne.y[1]=.5*(yt-Ze)),Ne.y[0]-=.5*(ot.top-st.top),Ne.y[1]-=.5*(ot.top-st.top),Ne.y[0]-=.5*(ot.top+ot.height-st.bottom),Ne.y[1]-=.5*(ot.top+ot.height-st.bottom)),Ne}function N(){if(!v("bounds")||p!==3||!(n!=null&&n.parentElement)||!t||!l)return;const Ge=ce(),Ne=k(),st=rl(Ge,b.scale,Ne);if(b.scale<Ge-.01||b.scale>Ne+.01)return void Y(Is.ZoomTo,{scale:st});if(t.isRunning()||l.isPointerDown())return;const ot=R(st);b.x<ot.x[0]||b.x>ot.x[1]||b.y<ot.y[0]||b.y>ot.y[1]?(b.x=rl(ot.x[0],b.x,ot.x[1]),b.y=rl(ot.y[0],b.y,ot.y[1]),t.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:t.getCurrentVelocities()}),t.from(m).to(b).start()):de()}function U(){if(!n||!n.parentElement||!i)return;const Ge=Oe(),Ne=re(),st=ie(),ot=Be(),Je=xe(),Ze=Te();i.classList.toggle("is-fullsize",ot),i.classList.toggle("is-expanded",st),i.classList.toggle("is-dragging",Ne),i.classList.toggle("can-drag",Ge),i.classList.toggle("will-zoom-in",Je),i.classList.toggle("will-zoom-out",Ze);const bt=Ue(),yt=pe(),Nt=p!==3;for(const kt of(n==null?void 0:n.querySelectorAll("[data-panzoom-action]"))||[]){const Gt=kt.dataset.panzoomAction;let fr=!1;if(Nt)fr=!0;else switch(Gt){case Is.ZoomIn:bt||(fr=!0);break;case Is.ZoomOut:yt||(fr=!0);break;case Is.ToggleFull:bt||yt||(fr=!0);const Tr=kt.querySelector("g");Tr&&(Tr.style.display=ot?"none":"");break;case Is.ToggleCover:case Is.ToggleMax:bt||yt||(fr=!0)}fr?(kt.setAttribute("aria-disabled",""),kt.setAttribute("tabindex","-1")):(kt.removeAttribute("aria-disabled"),kt.removeAttribute("tabindex"))}}function Y(Ge,Ne){var st;if(!n||!o||!t||Ge===Is.Swipe&&Math.abs(t.getCurrentVelocities().scale)>.01)return;let ot=Object.assign({},b),Je=R(ne()?b.scale:m.scale);const Ze=t.getCurrentVelocities(),bt=Q(),yt=(((st=(Ne=Ne||{}).currentTouch)===null||st===void 0?void 0:st.length)||0)>1,Nt=Ne.velocityX||0,kt=Ne.velocityY||0;let Gt=Ne.center;!Gt&&Ne.srcEvent&&(Gt=Eg(GP(Ne.srcEvent)));let fr=Ne.deltaX||0,Tr=Ne.deltaY||0;switch(Ge){case Is.MoveRight:fr=Ne.deltaX||100;break;case Is.MoveLeft:fr=Ne.deltaX||-100;break;case Is.MoveUp:Tr=Ne.deltaY||-100;break;case Is.MoveDown:Tr=Ne.deltaY||100}let yr=[];switch(Ge){case Is.Reset:b=Object.assign({},Op),b.scale=G();break;case Is.Pan:case Is.Move:case Is.MoveLeft:case Is.MoveRight:case Is.MoveUp:case Is.MoveDown:if(l!=null&&l.isPointerDown()){let Jt=1,pr=1;b.x<=Je.x[0]&&Nt<=0&&(Jt=Math.max(.01,1-Math.abs(1/bt.width*Math.abs(b.x-Je.x[0]))),Jt*=.2),b.x>=Je.x[1]&&Nt>=0&&(Jt=Math.max(.01,1-Math.abs(1/bt.width*Math.abs(b.x-Je.x[1]))),Jt*=.2),b.y<=Je.y[0]&&kt<=0&&(pr=Math.max(.01,1-Math.abs(1/bt.height*Math.abs(b.y-Je.y[0]))),pr*=.2),b.y>=Je.y[1]&&kt>=0&&(pr=Math.max(.01,1-Math.abs(1/bt.height*Math.abs(b.y-Je.y[1]))),pr*=.2),b.x+=fr*Jt,b.y+=Tr*pr}else b.x=rl(Je.x[0],b.x+fr,Je.x[1]),b.y=rl(Je.y[0],b.y+Tr,Je.y[1]);break;case Is.Swipe:const Dr=(Jt=0)=>Math.sign(Jt)*Math.pow(Math.abs(Jt),1.5);b.x+=rl(-1e3,Dr(Nt),1e3),b.y+=rl(-1e3,Dr(kt),1e3),kt&&!Nt&&(b.x=rl(Je.x[0],b.x,Je.x[1])),!kt&&Nt&&(b.y=rl(Je.y[0],b.y,Je.y[1])),Ze.x=Nt,Ze.y=kt;break;case Is.ZoomTo:b.scale=Ne.scale||1;break;case Is.ZoomIn:b.scale=b.scale*(Ne.scale||2),yt||(b.scale=Math.min(b.scale,k()));break;case Is.ZoomOut:b.scale=b.scale*(Ne.scale||.5),yt||(b.scale=Math.max(b.scale,ce()));break;case Is.ToggleCover:yr=[G(),Z()];break;case Is.ToggleFull:yr=[G(),z()];break;case Is.ToggleMax:yr=[G(),k()];break;case Is.IterateZoom:yr=[G(),z(),k()];break;case Is.Zoom:const jt=z();b.scale>=jt-.05?b.scale=G():b.scale=Math.min(jt,b.scale*(Ne.scale||2));break;case Is.RotateCW:b.angle+=90;break;case Is.RotateCCW:b.angle-=90;break;case Is.FlipX:b.flipX*=-1;break;case Is.FlipY:b.flipY*=-1}if(m.angle!==void 0&&Math.abs(m.angle)>=360&&(b.angle-=360*Math.floor(m.angle/360),m.angle-=360*Math.floor(m.angle/360)),yr.length){const Dr=yr.findIndex(jt=>jt>b.scale+1e-4);b.scale=yr[Dr]||yr[0]}if(yt&&(b.scale=rl(ce()*(yt?.8:1),b.scale,k()*(yt?1.6:1))),ne()){const Dr=Ae(b.scale);if(Dr){const{x:jt,y:Jt}=Dr;b.x=jt,b.y=Jt}}else if(b.scale!==ot.scale){let Dr=0,jt=0;if(Gt)Dr=Gt.x,jt=Gt.y;else{const ur=n.getBoundingClientRect();Dr=ur.x+.5*ur.width,jt=ur.y+.5*ur.height}let Jt=Dr-bt.left,pr=jt-bt.top;Jt-=.5*bt.width,pr-=.5*bt.height;const Ft=(Jt-ot.x)/ot.scale,er=(pr-ot.y)/ot.scale;b.x=Jt-Ft*b.scale,b.y=pr-er*b.scale,!yt&&v("bounds")&&(Je=R(b.scale),b.x=rl(Je.x[0],b.x,Je.x[1]),b.y=rl(Je.y[0],b.y,Je.y[1]))}if(Ge===Is.Swipe){let Dr=94,jt=17,Jt=500*b.scale,pr=Ze;t.spring({tension:Dr,friction:jt,maxSpeed:Jt,restDelta:.1,restSpeed:.1,velocity:pr})}else Ge===Is.Pan||yt?t.spring({tension:750,friction:17,restDelta:.01,restSpeed:.01,maxSpeed:1}):t.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:Ze});Ge===Is.Reset&&Ne.velocity===0?m=Object.assign({},b):t.from(m).to(b).start(),B("action",Ge)}function de(){if(!i||!o)return;if(o instanceof HTMLImageElement){const{width:yt,height:Nt}=ee();i.style.maxWidth=`min(${yt}px, 100%)`,i.style.maxHeight=`min(${Nt}px, 100%)`}let{x:Ge,y:Ne,scale:st,angle:ot,flipX:Je,flipY:Ze}=m;const bt=function(){const yt=Q(),Nt=yt.width,kt=yt.height,{width:Gt,height:fr}=ee();if(!n)return{x:0,y:0,width:0,height:0,scale:0,flipX:0,flipY:0,angle:0,fitWidth:Nt,fitHeight:kt,fullWidth:Gt,fullHeight:fr};let{x:Tr,y:yr,scale:Dr,angle:jt,flipX:Jt,flipY:pr}=m,Ft=1/z(),er=Gt,ur=fr,Yt=m.scale*Ft,mr=b.scale*Ft;const Mr=Math.max(Nt,kt),sn=Math.min(Nt,kt);Gt>fr?(er=Mr,ur=sn):(er=sn,ur=Mr),Yt=Gt>fr?Mr*Dr/Gt||1:Mr*Dr/fr||1;let Un=er?Gt*mr:0,wn=ur?fr*mr:0;return Tr=Tr+.5*er-.5*Un,yr=yr+.5*ur-.5*wn,{x:Tr,y:yr,width:Un,height:wn,scale:er&&ur?Gt*Yt/Un:0,flipX:Jt,flipY:pr,angle:jt,fitWidth:Nt,fitHeight:kt,fullWidth:Gt,fullHeight:fr}}();if(i&&bt){const{x:yt,y:Nt,width:kt,height:Gt,scale:fr,flipX:Tr,flipY:yr}=bt;let Dr=`translate(${Wf(yt)}px, ${Wf(Nt)}px)`;Dr+=Tr!==1||yr!==1?` scaleX(${Wf(fr*Tr)}) scaleY(${Wf(fr*yr)})`:` scale(${Wf(fr)})`,ot!==0&&(Dr+=` rotate(${ot}deg)`),a&&(a.style.width=`${Wf(kt)}px`,a.style.height=`${Wf(Gt)}px`,a.style.transform=`${Dr}`)}B("render")}function J(){let Ge=b.scale;const Ne=v("clickAction");let st=G();if(Ne){let ot=[];switch(Ne){case Is.ZoomIn:st=2*Ge;break;case Is.ZoomOut:st=.5*Ge;break;case Is.ToggleCover:ot=[G(),Z()];break;case Is.ToggleFull:ot=[G(),z()];break;case Is.ToggleMax:ot=[G(),k()];break;case Is.IterateZoom:ot=[G(),z(),k()];break;case Is.Zoom:const Je=z();st=Ge>=Je-.05?G():Math.min(Je,2*Ge)}if(ot.length){const Je=ot.findIndex(Ze=>Ze>Ge+1e-4);st=ot[Je]||G()}}return st=rl(ce(),st,k()),st}function xe(){return p===3&&J()>b.scale}function Te(){return p===3&&J()<b.scale}function Ue(){return p===3&&b.scale<k()}function pe(){return p===3&&b.scale>ce()}function Oe(){return p===3&&ie()&&!!l&&!ne()}function re(){return p===3&&(l==null?void 0:l.isPointerDown())&&!ne()}function ie(){return p===3&&b.scale>G()}function Be(){return p===3&&b.scale>=z()}const He={canDrag:Oe,canZoomIn:Ue,canZoomOut:pe,destroy:function(){B("destroy");for(const Ge of Object.values(g))Ge==null||Ge.destroy(He);for(const Ge of x)Ge();return i&&(i.style.aspectRatio="",i.style.maxWidth="",i.style.maxHeight=""),a&&(a.style.width="",a.style.height="",a.style.transform=""),i=void 0,o=void 0,a=void 0,m=Object.assign({},Op),b=Object.assign({},Op),t==null||t.destroy(),t=void 0,l==null||l.destroy(),l=void 0,p=4,He},emit:B,execute:Y,getBoundaries:R,getContainer:function(){return n},getFullDim:ee,getGestures:function(){return l},getMousemovePos:Ae,getOptions:function(){return _},getScale:fe,getState:function(){return p},getTransform:function(Ge){return Ge===!0?b:m},getTween:function(){return t},getViewport:function(){return a},getWrapper:function(){return i},init:function(){return p=0,B("init"),function(){for(const[Ge,Ne]of Object.entries(Object.assign(Object.assign({},e),_.plugins||{})))if(Ge&&!g[Ge]&&Ne instanceof Function){const st=Ne();st.init(He),g[Ge]=st}B("initPlugins")}(),function(){if(!n)return;const Ge=Object.assign(Object.assign({},fS.classes),v("classes"));if(Fl(n,Ge.container),o=n.querySelector("."+Ge.content),!!o&&(o.setAttribute("draggable","false"),i=n.querySelector("."+Ge.wrapper),i||(i=document.createElement("div"),Fl(i,Ge.wrapper),o.insertAdjacentElement("beforebegin",i),i.insertAdjacentElement("afterbegin",o)),o instanceof HTMLImageElement||o instanceof HTMLPictureElement)){if(a=n.querySelector("."+Ge.viewport),!a){a=document.createElement("div"),Fl(a,Ge.viewport);const Ne=o.cloneNode(!0);Ne.classList.remove("is-lazyloading"),Ne.classList.remove("is-lazyloaded"),a.insertAdjacentElement("afterbegin",Ne),i.insertAdjacentElement("beforeend",a)}o instanceof HTMLPictureElement&&(o=o.querySelector("img")),a instanceof HTMLPictureElement&&(a=a.querySelector("img")),a.style.visibility="hidden",B("initLayout")}}(),function(){if(!(o&&o instanceof HTMLImageElement))return;const Ge=()=>{o&&o instanceof HTMLImageElement&&o.decode().then(()=>{requestAnimationFrame(()=>{X()})}).catch(()=>{X()})};if(o.src&&o.complete)return void Ge();p=1,function(){const Ne=n==null?void 0:n.querySelector(".f-spinner");if(!n||Ne)return;const st=v("spinnerTpl"),ot=$g(st);ot&&(ot.classList.add("f-spinner"),n.classList.add("is-loading"),i==null||i.insertAdjacentElement("afterbegin",ot))}(),B("loading"),o.addEventListener("load",Ge,!1),o.addEventListener("error",Ge,!1),x.push(()=>{o==null||o.removeEventListener("load",Ge,!1),o==null||o.removeEventListener("error",Ge,!1)})}(),function(){if(n&&!h){let Ge=null;h=new ResizeObserver(()=>{Ge||(Ge=requestAnimationFrame(()=>{n&&n.parentElement&&p===3&&(U(),N(),B("refresh")),Ge=null}))}),h.observe(n),x.push(()=>{h==null||h.disconnect(),h=void 0,Ge&&(cancelAnimationFrame(Ge),Ge=null)})}}(),He},isDragging:re,isExpanded:ie,isFullsize:Be,localize:function(Ge,Ne=[]){const st=v("l10n")||{};Ge=String(Ge).replace(/\{\{(\w+)\}\}/g,(ot,Je)=>st[Je]||ot);for(let ot=0;ot<Ne.length;ot++)Ge=Ge.split(Ne[ot][0]).join(Ne[ot][1]);return Ge=Ge.replace(/\{\{(.*?)\}\}/g,(ot,Je)=>Je)},off:function(Ge,Ne){for(const st of Ge instanceof Array?Ge:[Ge])S.has(st)&&S.set(st,S.get(st).filter(ot=>ot!==Ne));return He},on:function(Ge,Ne){for(const st of Ge instanceof Array?Ge:[Ge])S.set(st,[...S.get(st)||[],Ne]);return He},version:"6.0.5",willZoomIn:xe,willZoomOut:Te};return He};dS.l10n={en_EN:tE},dS.getDefaults=()=>fS;/*! License details at fancyapps.com/license */const n4=(n,r)=>{let e=[];return n.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||r&&!i.matches(r)||e.push(i)}),e};/*! License details at fancyapps.com/license */const Hp=(n,...r)=>{const e=r.length;for(let i=0;i<e;i++){const o=r[i]||{};Object.entries(o).forEach(([a,l])=>{const t=Array.isArray(l)?[]:{};n[a]||Object.assign(n,{[a]:t}),Yf(l)?Object.assign(n[a],Hp(t,l)):Array.isArray(l)?Object.assign(n,{[a]:[...l]}):Object.assign(n,{[a]:l})})}return n};/*! License details at fancyapps.com/license */const pS=function(n=0,r=0,e=0,i=0,o=0,a=!1){const l=(n-r)/(e-r)*(o-i)+i;return a?i<o?rl(i,l,o):rl(o,l,i):l};/*! License details at fancyapps.com/license */const xg=(n,r="")=>{n&&n.classList&&r.split(" ").forEach(e=>{e&&n.classList.remove(e)})};/*! License details at fancyapps.com/license */const Bg=(n,r="",e)=>{n&&n.classList&&r.split(" ").forEach(i=>{i&&n.classList.toggle(i,e||!1)})};/*! License details at fancyapps.com/license */const rE=Object.assign(Object.assign({},tE),{ERROR:"Something went wrong. <br /> Please try again later.",NEXT:"Next page",PREV:"Previous page",GOTO:"Go to page #%d",DOWNLOAD:"Download",TOGGLE_FULLSCREEN:"Toggle full-screen mode",TOGGLE_EXPAND:"Toggle full-size mode",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_AUTOPLAY:"Toggle slideshow"});/*! License details at fancyapps.com/license */const Z1=n=>{n.cancelable&&n.preventDefault()},sy={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:rE,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:200,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1};let AI,mI=0;const gw=(n,r={},e={})=>{mI++;let i,o,a,l,t,h=0,f=Object.assign({},sy),p=Object.assign({},sy),_={},g=null,m=null,b=!1,x=!1,v=!1,S="height",B=0,F=!0,O=0,V=0,X=0,Q=0,ee="*",ne=[],Ae=[];const fe=new Set;let ce=[],G=0,Z=0;function z(jt,...Jt){let pr=p[jt];return pr&&pr instanceof Function?pr(Dr,...Jt):pr}function k(jt,Jt=[]){const pr=z("l10n")||{};jt=String(jt).replace(/\{\{(\w+)\}\}/g,(Ft,er)=>pr[er]||Ft);for(let Ft=0;Ft<Jt.length;Ft++)jt=jt.split(Jt[Ft][0]).join(Jt[Ft][1]);return jt=jt.replace(/\{\{(.*?)\}\}/g,(Ft,er)=>er)}const R=new Map;function N(jt,...Jt){const pr=R.get(jt)||[];p.on&&pr.push(p.on[jt]);for(const Ft of pr)Ft&&Ft instanceof Function&&Ft(Dr,...Jt);jt!=="*"&&N("*",jt,...Jt)}function U(){var jt,Jt;const pr=Hp({},sy,f);Hp(pr,sy,f);let Ft="";const er=f.breakpoints||{};if(er)for(const[ur,Yt]of Object.entries(er))window.matchMedia(ur).matches&&(Ft+=ur,Hp(pr,Yt));if(t===void 0||Ft!==t){if(t=Ft,h!==0){let ur=(Jt=(jt=ce[O])===null||jt===void 0?void 0:jt.slides[0])===null||Jt===void 0?void 0:Jt.index;ur===void 0&&(ur=p.initialSlide),pr.initialSlide=ur,pr.slides=[];for(const Yt of ne)Yt.isVirtual&&pr.slides.push(Yt)}yr(),p=pr,p.enabled!==!1&&(h=0,N("init"),function(){for(const[ur,Yt]of Object.entries(Object.assign(Object.assign({},e),p.plugins||{})))if(ur&&!_[ur]&&Yt instanceof Function){const mr=Yt();mr.init(Dr,gw),_[ur]=mr}N("initPlugins")}(),function(){if(!g)return;const ur=z("classes")||{};Fl(g,ur.container),Fl(g,ur.isEnabled);const Yt=z("style");if(Yt&&Yf(Yt))for(const[mr,Mr]of Object.entries(Yt))g.style.setProperty(mr,Mr);m=g.querySelector(`.${ur.viewport}`),m||(m=document.createElement("div"),Fl(m,ur.viewport),m.append(...n4(g,`.${ur.slide}`)),g.insertAdjacentElement("afterbegin",m)),g.carousel=Dr,N("initLayout")}(),function(){if(!m)return;const ur=z("classes")||{};ne=[],[...n4(m,`.${ur.slide}`)].forEach(Yt=>{Yt.parentElement&&(ne.push(Be(Object.assign({el:Yt,isVirtual:!1},Yt.dataset||{}))),Yt.parentElement.removeChild(Yt))}),ie(z("slides"));for(const Yt of ne)N("addSlide",Yt);N("initSlides")}(),o=Kg().on("start",()=>{F=!1,i&&i.isPointerDown()||(J(),Tr())}).on("step",ur=>{B=ur.pos,Tr()}).on("end",ur=>{i!=null&&i.isPointerDown()||(B=ur.pos,o&&!b&&(B<X||B>Q)?o.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:B}).to({pos:rl(X,B,Q)}).start():F||(F=!0,N("settle")))}),function(){const ur=z("gestures");m&&ur!==!1&&(i=Nv(m,ur).on("start",Yt=>{var mr,Mr;if(!o)return;const{srcEvent:sn}=Yt;function Un(Zi){const ai=window.getComputedStyle(Zi),_i=new DOMMatrixReadOnly(ai.transform);return{width:_i.m41||0,height:_i.m42||0}}v&&Z1(sn),o.pause(),o.getCurrentVelocities().pos=0;const wn=(mr=ce[O])===null||mr===void 0?void 0:mr.slides[0];wn&&fe.has(wn.index)&&wn.el&&(B=wn.offset||0,B+=(Un(wn.el)[S]||0)*(x&&!v?1:-1)),Ze(),b||(B<X||B>Q)&&o.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:((Mr=o.getCurrentVelocities())===null||Mr===void 0?void 0:Mr.pos)||0,restDelta:1,restSpeed:1}).from({pos:B}).to({pos:rl(X,B,Q)}).start()}).on("move",Yt=>{const{srcEvent:mr,axis:Mr}=Yt,sn=Yt.srcEvent.target;sn&&Rv(sn)||(Mr||(mr.stopPropagation(),mr.stopImmediatePropagation()),(Mr==="y"&&v||Mr==="x"&&!v)&&(Z1(mr),mr.stopPropagation()))}).on("panstart",Yt=>{(Yt==null?void 0:Yt.axis)===(v?"y":"x")&&Fl(m,"is-dragging")}).on("panend",()=>{xg(m,"is-dragging")}).on("pan",Yt=>{var mr;const{deltaX:Mr,deltaY:sn,currentTouch:Un,axis:wn}=Yt;if(!o||Un.length>1||wn==="y"&&!v||wn==="x"&&v)return;const Zi=x&&!v?1:-1;let ai=v?sn:Mr,_i=o!=null&&o.isRunning()?o.getEndValues().pos:B,Zn=1;b||(_i<=X&&ai*Zi<0?(Zn=Math.max(.01,1-Math.abs(1/Oe()*Math.abs(_i-X))),Zn*=.2):_i>=Q&&ai*Zi>0&&(Zn=Math.max(.01,1-Math.abs(1/Oe()*Math.abs(_i-Q))),Zn*=.2)),_i+=ai*Zn*Zi,o.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:((mr=o.getCurrentVelocities())===null||mr===void 0?void 0:mr.pos)||0,restDelta:1,restSpeed:1}).from({pos:B}).to({pos:_i}).start()}).on("end",Yt=>{var mr,Mr;const{axis:sn,velocityX:Un,velocityY:wn,currentTouch:Zi}=Yt,ai=ce.length,_i=z("dragFree");if(Zi.length>0||!o||!ai)return;const Zn=z("vertical")?wn:Un;let Bn=o!=null&&o.isRunning()?o.getEndValues().pos:B;const On=x&&!v?1:-1;if(Bn+=Zn*(_i?5:1)*On,!b&&(Zn*On<=0&&Bn<X||Zn*On>=0&&Bn>Q)){let zn=0;return Math.abs(Zn)>0&&(zn=2*Math.abs(Zn),zn=Math.min(.3*Oe(),zn)),Bn=rl(X+-1*zn,Bn,Q+zn),void o.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*Zn,restDelta:1,restSpeed:1}).from({pos:B}).to({pos:Bn}).start()}if(_i||!((mr=_.Autoscroll)===null||mr===void 0)&&mr.isEnabled())return void(Math.abs(Zn)>10?o.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*Zn,restDelta:1,restSpeed:1}).from({pos:B}).to({pos:Bn}).start():o.isRunning()||F||(F=!0,N("settle")));if(!_i&&!(!((Mr=_.Autoscroll)===null||Mr===void 0)&&Mr.isEnabled())&&(!Yt.offsetX&&!Yt.offsetY||sn==="y"&&!v||sn==="x"&&v))return void fr(O,{transition:"tween"});let tr=Ue(Bn);Math.abs(Zn)>10&&tr===O&&(tr+=Zn>0?x&&!v?1:-1:x&&!v?-1:1),fr(tr,{transition:"tween",tween:{tension:160,friction:25,velocity:-1*Zn}})}).init())}(),ot(),function(){if(g&&(g.addEventListener("click",yt,{passive:!1}),document.addEventListener("mousemove",Y),!a)){let ur=null;a=new ResizeObserver(Yt=>{ur||(ur=requestAnimationFrame(()=>{(function(mr){if(!g)return;let Mr=mr[0].contentBoxSize[0].blockSize,sn=mr[0].contentBoxSize[0].inlineSize;if(h===0)return G=Mr,Z=sn,h=1,Tr(),xe(),void N("ready");if(h!==1)return;const Un=ce.length;ot();const wn=g.getBoundingClientRect();Mr=wn.height,sn=wn.width,Un>1&&(v&&Math.abs(Mr-G)<.5||!v&&Math.abs(sn-Z)<.5)||(G=Mr,Z=sn,v&&!Mr||!v&&!sn||g&&m&&(Un===ce.length&&(i!=null&&i.isPointerDown()||z("dragFree")&&(o!=null&&o.isRunning()))||fr(O,{transition:!1})))})(Yt),ur=null}))}),a.observe(g)}}())}}function Y(jt){AI=jt}function de(jt="*"){var Jt;const pr=[];for(const Ft of ne)(jt==="*"||Ft.class&&Ft.class.includes(jt)||Ft.el&&(!((Jt=Ft.el)===null||Jt===void 0)&&Jt.classList.contains(jt)))&&pr.push(Ft);l=void 0,ee=jt,Ae=[...pr]}function J(){if(!o)return;const jt=Ue(o!=null&&o.isRunning()?o.getEndValues().pos:B);jt!==O&&(l=O,O=jt,Gt(),xe(),Te(),N("change",O,l))}function xe(){var jt;if(!g)return;Bg(m,"is-draggable",!!i&&ce.length>0);for(const Ft of g.querySelectorAll("[data-carousel-index]"))Ft.innerHTML=O+"";for(const Ft of g.querySelectorAll("[data-carousel-page]"))Ft.innerHTML=O+1+"";for(const Ft of g.querySelectorAll("[data-carousel-pages]"))Ft.innerHTML=ce.length+"";let Jt=!1;const pr=(jt=ce[O])===null||jt===void 0?void 0:jt.slides[0];pr&&(pr.downloadSrc||pr.type==="image"&&pr.src)&&(Jt=!0);for(const Ft of g.querySelectorAll("[data-carousel-download]"))Ft.toggleAttribute("aria-disabled",!Jt)}function Te(jt){var Jt;if(!g)return;jt||(jt=(Jt=ce[O])===null||Jt===void 0?void 0:Jt.slides[0]);const pr=jt.el;if(pr)for(const Ft of pr.querySelectorAll("[data-slide-index]"))Ft.innerHTML=jt.index+1+""}function Ue(jt){if(!ce.length||!o)return 0;const Jt=re();let pr=jt;b?pr-=Math.floor((jt-ce[0].pos)/Jt)*Jt:pr=rl(ce[0].pos,jt,ce[ce.length-1].pos);const Ft=new Map;let er=0;for(const Yt of ce){const mr=Math.abs(Yt.pos-pr),Mr=Math.abs(Yt.pos-pr-Jt),sn=Math.abs(Yt.pos-pr+Jt),Un=Math.min(mr,Mr,sn);Ft.set(er,Un),er++}const ur=Ft.size>0?[...Ft.entries()].reduce((Yt,mr)=>mr[1]<Yt[1]?mr:Yt):[O,0];return parseInt(ur[0])}function pe(){return m&&parseFloat(getComputedStyle(m).getPropertyValue("--f-carousel-gap"))||0}function Oe(){return m&&m.getBoundingClientRect()[S]||0}function re(jt=!0){const Jt=pe();return Ae.reduce((pr,Ft)=>pr+Ft.dim,0)+(Ae.length-(b&&jt?0:1))*Jt}function ie(jt,Jt){const pr=[];for(const Ft of Array.isArray(jt)?jt:[jt]){const er=Be(Object.assign(Object.assign({},Ft),{isVirtual:!0}));pr.push(er)}ne.splice(Jt===void 0?ne.length:Jt,0,...pr),st();for(const Ft of pr)He(Ft);return de(ee),pr}function Be(jt){return(Lh(jt)||jt instanceof HTMLElement)&&(jt={html:jt}),Object.assign({index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:""},jt)}function He(jt){if(!jt)return;let Jt=jt.el;Jt||(Jt=document.createElement("div"),jt.el=Jt);const pr=jt.html?jt.html instanceof HTMLElement?jt.html:$g(jt.html):void 0;pr&&(Fl(pr,"f-html"),jt.htmlEl=pr,Fl(Jt,"has-html"),Jt.append(pr),N("contentReady",jt))}function Ge(jt){if(!m||!jt)return;let Jt=jt.el;if(Jt){if(Jt.setAttribute("index",jt.index+""),Jt.parentElement!==m){let pr;Fl(Jt,p.classes.slide),Fl(Jt,jt.class),Gt(jt);for(const Ft of ne)if(Ft.index>jt.index){pr=Ft.el;break}m.insertBefore(Jt,pr&&m.contains(pr)?pr:null),xe(),Te(jt),N("attachSlideEl",jt)}return Jt}}function Ne(jt){const Jt=jt==null?void 0:jt.el;Jt&&(Jt.remove(),Je(Jt),N("detachSlideEl",jt))}function st(){for(let jt=0;jt<ne.length;jt++){const Jt=ne[jt],pr=Jt.el;pr&&(Jt.index!==jt&&Je(pr),pr.setAttribute("index",`${jt}`)),Jt.index=jt}}function ot(){var jt,Jt,pr,Ft;if(!g||!m)return;x=z("rtl"),v=z("vertical"),S=v?"height":"width";const er=z("classes");Bg(g,er.isLTR,!x),Bg(g,er.isRTL,x),Bg(g,er.isHorizontal,!v),Bg(g,er.isVertical,v),Bg(g,er.hasAdaptiveHeight,z("adaptiveHeight"));const ur=function(){let Yt=0;if(m){let mr=document.createElement("div");Fl(mr,p.classes.slide),m.appendChild(mr),Yt=mr.getBoundingClientRect()[S],mr.remove(),mr=void 0}return Yt}();for(const Yt of Ae){const mr=Yt.el;let Mr=0;if(!Yt.isVirtual&&mr&&cy(mr)){let sn=!1;mr.parentElement&&mr.parentElement===m||(m.appendChild(mr),sn=!0),Mr=mr.getBoundingClientRect()[S],sn&&((jt=mr.parentElement)===null||jt===void 0||jt.removeChild(mr))}else Mr=ur;Yt.dim=Mr}if(function(){if(!g)return;st();const Yt=Oe(),mr=pe(),Mr=re(!1);let sn=z("slidesPerPage");sn=sn==="auto"?1/0:parseFloat(sn+""),ce=[];let Un=0,wn=0;for(const tr of Ae)(!ce.length||Un+tr.dim-Yt>.05||wn>=sn)&&(ce.push({index:ce.length,slides:[],dim:0,offset:0,pos:0}),Un=0,wn=0),ce[ce.length-1].slides.push(tr),Un+=tr.dim+mr,wn++;const Zi=z("center"),ai=z("fill"),_i=z("infinite");let Zn=0;for(const tr of ce){tr.dim=(tr.slides.length-1)*mr;for(const zn of tr.slides)tr.dim+=zn.dim;tr.offset=Zn,tr.pos=Zn,Zi!==!1&&(tr.pos-=.5*(Yt-tr.dim)),ai&&!_i&&Mr>Yt&&(tr.pos=rl(0,tr.pos,Mr-Yt)),Zn+=tr.dim+mr}const Bn=[];let On;for(const tr of ce){const zn=Object.assign({},tr);On&&zn.pos===On.pos?(On.dim+=zn.dim,On.slides=[...On.slides,...zn.slides]):(On=zn,zn.index=Bn.length,Bn.push(zn))}ce=Bn}(),b=z("infinite")&&ce.length>1&&re()-(Oe()+(((Jt=Ae[0])===null||Jt===void 0?void 0:Jt.dim)||0))>-.5,X=((pr=ce[0])===null||pr===void 0?void 0:pr.pos)||0,Q=((Ft=ce[ce.length-1])===null||Ft===void 0?void 0:Ft.pos)||0,h===0)(function(){var Yt;l=void 0,O=z("initialPage");const mr=z("initialSlide")||void 0;mr!==void 0&&(O=Dr.getPageIndex(mr)||0),O=rl(0,O,ce.length-1),B=((Yt=ce[O])===null||Yt===void 0?void 0:Yt.pos)||0,V=B})();else{const Yt=o!=null&&o.isRunning()?o.getEndValues().pos:B;(Yt<X||Yt>Q)&&(O=rl(0,O,ce.length-1))}N("refresh")}function Je(jt){if(!jt||!cy(jt))return;const Jt=parseInt(jt.getAttribute("index")||"-1");let pr="";for(const er of Array.from(jt.classList)){const ur=er.match(/^f-(\w+)(Out|In)$/);ur&&ur[1]&&(pr=ur[1]+"")}if(!jt||!pr)return;const Ft=[`f-${pr}Out`,`f-${pr}In`,"to-prev","to-next","from-prev","from-next"];jt.removeEventListener("animationend",bt),xg(jt,Ft.join(" ")),fe.delete(Jt)}function Ze(){if(!m)return;const jt=fe.size;for(const Jt of Ae)Je(Jt.el);fe.clear(),jt&&Tr()}function bt(jt){jt.animationName.substring(0,2)==="f-"&&(Je(jt.target),fe.size||(xg(g,"in-transition"),!F&&Math.abs(Dr.getPosition(!0)-V)<.5&&(F=!0,N("settle"))),Tr())}function yt(jt){if(jt.defaultPrevented)return;const Jt=jt.composedPath()[0];if(Jt.closest("[data-carousel-go-prev]"))return Z1(jt),void Dr.prev();if(Jt.closest("[data-carousel-go-next]"))return Z1(jt),void Dr.next();const pr=Jt.closest("[data-carousel-go-to]");if(pr)return Z1(jt),void Dr.goTo(parseFloat(pr.dataset.carouselGoTo||"")||0);if(Jt.closest("[data-carousel-download]")){Z1(jt);const Ft=ce[O].slides[0];if(Ft.downloadSrc||Ft.type==="image"&&Ft.src){const er=Ft.downloadFilename,ur=document.createElement("a");ur.href=Ft.downloadSrc||Ft.src||"",ur.target="_blank",er&&(ur.download=er),ur.click()}}else N("click",jt)}function Nt(jt){var Jt;const pr=jt.el;pr&&((Jt=pr.querySelector(".f-spinner"))===null||Jt===void 0||Jt.remove(),xg(pr,"is-loading"))}function kt(jt){var Jt;const pr=jt.el;pr&&((Jt=pr.querySelector(".f-html.is-error"))===null||Jt===void 0||Jt.remove(),xg(pr,"has-error"))}function Gt(jt){var Jt;jt||(jt=(Jt=ce[O])===null||Jt===void 0?void 0:Jt.slides[0]);const pr=jt==null?void 0:jt.el;if(!pr)return;let Ft=z("formatCaption",jt);Ft===void 0&&(Ft=jt.caption),Ft=Ft||"";const er=z("captionEl");if(er&&er instanceof HTMLElement){if(jt.index!==O)return;if(Lh(Ft)&&(er.innerHTML=k(Ft+"")),Ft instanceof HTMLElement){if(Ft.parentElement===er)return;er.innerHTML="",Ft.parentElement&&(Ft=Ft.cloneNode(!0)),er.append(Ft)}return}if(!Ft)return;let ur=jt.captionEl||pr.querySelector(".f-caption");!ur&&Ft instanceof HTMLElement&&Ft.classList.contains("f-caption")&&(ur=Ft),ur||(ur=document.createElement("div"),Fl(ur,"f-caption"),Lh(Ft)?ur.innerHTML=k(Ft+""):Ft instanceof HTMLElement&&(Ft.parentElement&&(Ft=Ft.cloneNode(!0)),ur.append(Ft)));const Yt=`f-caption-${mI}_${jt.index}`;ur.setAttribute("id",Yt),ur.dataset.selectable="true",Fl(pr,"has-caption"),pr.setAttribute("aria-labelledby",Yt),jt.captionEl=ur,pr.insertAdjacentElement("beforeend",ur)}function fr(jt,Jt){let{transition:pr,tween:Ft}=Object.assign({transition:p.transition,tween:p.tween},Jt||{});if(!g||!o)return;const er=ce.length;if(!er||function(Yt,mr){var Mr,sn,Un;if(!(g&&o&&mr&&Lh(mr)&&mr!=="tween"))return!1;const wn=ce.length;let Zi=Yt>O?1:-1;Yt=b?(Yt%wn+wn)%wn:rl(0,Yt,wn-1),x&&(Zi*=-1);const ai=(Mr=ce[O])===null||Mr===void 0?void 0:Mr.slides[0],_i=ai==null?void 0:ai.index,Zn=(sn=ce[Yt])===null||sn===void 0?void 0:sn.slides[0],Bn=Zn==null?void 0:Zn.index,On=(Un=ce[Yt])===null||Un===void 0?void 0:Un.pos;if(Bn===void 0||_i===void 0||_i===Bn||B===On||Math.abs(Oe()-((Zn==null?void 0:Zn.dim)||0))>1)return!1;F=!1,o.pause(),Ze(),Fl(g,"in-transition"),B=V=On,J();const tr=Ge(ai),zn=Ge(Zn);return tr&&(fe.add(_i),tr.style.transform="",tr.addEventListener("animationend",bt),xg(tr,p.classes.isSelected),Fl(tr,`f-${mr}Out to-${Zi>0?"next":"prev"}`)),zn&&(fe.add(Bn),zn.style.transform="",zn.addEventListener("animationend",bt),Fl(zn,p.classes.isSelected),Fl(zn,`f-${mr}In from-${Zi>0?"prev":"next"}`)),Tr(),!0}(jt,pr))return;jt=b?(jt%er+er)%er:rl(0,jt,er-1),V=ce[jt||0].pos||0;const ur=o.isRunning()?o.getEndValues().pos:B;if(Math.abs(V-ur)<1)return B=V,O!==jt&&(Gt(),xe(),Te(),l=O,O=jt,N("change",O,l)),Tr(),void(F||(F=!0,N("settle")));if(o.pause(),Ze(),b){const Yt=re(),mr=Math.floor((ur-ce[0].pos)/Yt),Mr=V+mr*Yt;V=[Mr+Yt,Mr,Mr-Yt].reduce(function(sn,Un){return Math.abs(Un-ur)<Math.abs(sn-ur)?Un:sn})}pr!==!1&&Yf(Ft)?o.spring(Ft).from({pos:B}).to({pos:V}).start():(B=V,J(),Tr(),F||(F=!0,N("settle")))}function Tr(){var jt;if(!g||!m)return;const Jt=ce[O],pr=function(Yt){const mr=pe(),Mr=re(),sn=Oe(),Un=[];if(!Mr||!sn)return Un;Yt=Yt===void 0?B:Yt,b&&(Yt-=Math.floor(Yt/Mr)*Mr);let wn=0,Zi=0,ai=0;do{for(let _i of Ae)Un.indexOf(_i)>-1||(_i.offset=Zi,_i.pos=Zi-Yt,_i.offset+_i.dim>Yt+.51&&_i.offset<Yt+sn-.51&&Un.push(_i),Zi+=_i.dim+mr,wn=Yt+sn-((_i.pos||0)+_i.dim+mr));if(ai++,ai>100||!b)break}while(wn>0&&Mr>0);return Un}(),Ft=new Set,er=new Set;let ur;for(const Yt of pr){let mr=Ge(Yt);if(!mr)continue;Ft.add(mr);const Mr=((jt=Jt==null?void 0:Jt.slides)===null||jt===void 0?void 0:jt.indexOf(Yt))>-1;Mr&&er.add(mr);const sn=Yt.pos?Math.round(1e4*Yt.pos)/1e4:0,Un=v?0:x?-1*sn:sn,wn=v?sn:0,Zi=pS(Un,0,Yt.dim,0,100),ai=pS(wn,0,Yt.dim,0,100),_i=p.setTransform||void 0;if(_i instanceof Function?_i(Dr,Yt,{x:Un,y:wn,xPercent:Zi,yPercent:ai}):mr.style.transform=Un||wn?`translate3d(${Zi}%, ${ai}%,0)`:"",z("adaptiveHeight")&&!v&&Mr){const Zn=(mr.firstElementChild||mr).getBoundingClientRect().height;ur=ur==null?Zn:Math.max(ur,Zn)}}[...n4(m,`.${p.classes.slide}`)].forEach(Yt=>{const mr=parseInt(Yt.getAttribute("index")||"-1"),Mr=ne[mr];Mr||Yt.remove(),Bg(Yt,p.classes.isSelected,er.has(Yt)),fe.has(mr)||Ft.has(Yt)||Ne(Mr)}),m&&ur!==void 0&&(m.style.height=`${ur}px`),N("render",pr)}function yr(){var jt;g==null||g.removeEventListener("click",yt),Ze(),document.removeEventListener("mousemove",Y),a==null||a.disconnect(),a=void 0;for(const Jt of Object.values(_))Jt==null||Jt.destroy();_={};for(const Jt of ne)Jt.el&&cy(Jt.el)&&(Jt.state=void 0,Nt(Jt),kt(Jt),Ne(Jt),Jt.isVirtual?((jt=Jt.el)===null||jt===void 0||jt.remove(),Jt.el=void 0):(Jt.el.style.transform="",m==null||m.appendChild(Jt.el)));i==null||i.destroy(),i=void 0,o==null||o.destroy(),o=void 0;for(const Jt of Object.values(p.classes||{}))xg(g,Jt);xg(m,"is-draggable")}const Dr={add:function(jt,Jt){const pr=ie(jt,Jt);for(const Ft of pr)N("addSlide",Ft);return de(ee),ot(),Tr(),Dr},canGoPrev:function(){return b||O>0},canGoNext:function(){return b||O<ce.length-1},destroy:function(){return N("destroy"),window.removeEventListener("resize",U),yr(),R.clear(),g=null,ce=[],ne=[],p=Object.assign({},sy),_={},Ae=[],t="",ee="*",h=2,Dr},emit:N,filter:function(jt="*"){return de(jt),ot(),Tr(),N("filter",jt),Dr},getContainer:function(){return g},getGapDim:pe,getGestures:function(){return i},getLastMouseMove:function(){return AI},getOptions:function(){return p},getPage:function(){return ce[O]},getPageIndex:function(jt){if(jt!==void 0){for(const Jt of ce||[])for(const pr of Jt.slides)if(pr.index===jt)return Jt.index;return-1}return O},getPageProgress:function(jt,Jt){jt===void 0&&(jt=O);const pr=ce[jt];if(!pr)return jt>O?-1:1;let Ft=pr.pos;const er=pe(),ur=Dr.getPosition(),Yt=re();if(b&&Jt!==!0){const mr=Ft+Yt*Math.floor((ur-ce[0].pos)/Yt);Ft=[mr+Yt,mr,mr-Yt].reduce(function(Mr,sn){return Math.abs(sn-ur)<Math.abs(Mr-ur)?sn:Mr})}return(ur-Ft)/(pr.dim+er)},getPageVisibility:function(jt){jt===void 0&&(jt=O);const Jt=ce[jt];if(!Jt)return jt>O?-1:1;const pr=Dr.getPosition(),Ft=Oe();let er=Jt.pos;if(b){const ur=Dr.getPosition(),Yt=re(),mr=er+Math.floor((ur-ce[0].pos)/Yt)*Yt;er=[mr+Yt,mr,mr-Yt].reduce(function(Mr,sn){return Math.abs(sn-ur)<Math.abs(Mr-ur)?sn:Mr})}return er>pr&&er+Jt.dim<pr+Ft?1:er<pr?(er+Jt.dim-pr)/Jt.dim:er+Jt.dim>pr+Ft?(pr+Ft-er)/Jt.dim:0},getPages:function(){return ce},getPlugins:function(){return _},getPosition:function(jt){var Jt;let pr=B;if(b&&jt!==!0){const Ft=re();pr-=Math.floor((B-((Jt=ce[0])===null||Jt===void 0?void 0:Jt.pos)||0)/Ft)*Ft}return pr},getSlides:function(){return ne},getState:function(){return h},getTotalSlideDim:re,getTween:function(){return o},getViewport:function(){return m},getViewportDim:Oe,goTo:fr,hasNavigated:function(){return l!==void 0},hideError:kt,hideLoading:Nt,init:function(){if(!n||!cy(n))throw new Error("No Element found");return h!==0&&(yr(),h=0),g=n,f=r,window.removeEventListener("resize",U),f.breakpoints&&window.addEventListener("resize",U),U(),Dr},isInfinite:function(){return b},isInTransition:function(){return fe.size>0},isRTL:function(){return x},isSettled:function(){return F},localize:function(jt,Jt=[]){return k(jt,Jt)},next:function(jt={}){return fr(O+1,jt),Dr},off:function(jt,Jt){for(const pr of jt instanceof Array?jt:[jt])R.has(pr)&&R.set(pr,R.get(pr).filter(Ft=>Ft!==Jt));return Dr},on:function(jt,Jt){for(const pr of jt instanceof Array?jt:[jt])R.set(pr,[...R.get(pr)||[],Jt]);return Dr},prev:function(jt={}){return fr(O-1,jt),Dr},remove:function(jt){jt===void 0&&(jt=ne.length-1);const Jt=ne[jt];return Jt&&(N("removeSlide",Jt),Jt.el&&(Je(Jt.el),Jt.el.remove(),Jt.el=void 0),ne.splice(jt,1),de(ee),ot(),Tr()),Dr},setPosition:function(jt){B=jt,J(),Tr()},showError:function(jt,Jt){Nt(jt),kt(jt);const pr=jt.el;if(pr){const Ft=document.createElement("div");Fl(Ft,"f-html"),Fl(Ft,"is-error"),Ft.innerHTML=k(Jt||"<p>{{ERROR}}</p>"),jt.htmlEl=Ft,Fl(pr,"has-html"),Fl(pr,"has-error"),pr.insertAdjacentElement("afterbegin",Ft),N("contentReady",jt)}return Dr},showLoading:function(jt){const Jt=jt.el,pr=Jt==null?void 0:Jt.querySelector(".f-spinner");if(!Jt||pr)return Dr;const Ft=z("spinnerTpl"),er=$g(Ft);return er&&(Fl(er,"f-spinner"),Fl(Jt,"is-loading"),Jt.insertAdjacentElement("beforeend",er)),Dr},version:"6.0.5"};return Dr};gw.l10n={en_EN:rE},gw.getDefaults=()=>sy;/*! License details at fancyapps.com/license */const gI=(n=!0,r="--f-scrollbar-compensate",e="--f-body-margin",i="hide-scrollbar")=>{const o=document,a=o.body,l=o.documentElement;if(n){if(a.classList.contains(i))return;let t=window.innerWidth-l.getBoundingClientRect().width;t<0&&(t=0),l.style.setProperty(r,`${t}px`);const h=parseFloat(window.getComputedStyle(a).marginRight);h&&a.style.setProperty(e,`${h}px`),a.classList.add(i)}else a.classList.remove(i),a.style.setProperty(e,""),o.documentElement.style.setProperty(r,"")};/*! License details at fancyapps.com/license */function WP(){return!(typeof window>"u"||!window.document||!window.document.createElement)}/*! License details at fancyapps.com/license */const Pg=function(n="",r="",e=""){return n.split(r).join(e)};/*! License details at fancyapps.com/license */const yI={tpl:n=>`<img class="f-panzoom__content" 
    ${n.srcset?'data-lazy-srcset="{{srcset}}"':""} 
    ${n.sizes?'data-lazy-sizes="{{sizes}}"':""} 
    data-lazy-src="{{src}}" alt="{{alt}}" />`},vQ=()=>{let n;function r(p,_){const g=n==null?void 0:n.getOptions().Zoomable;let m=(Yf(g)?Object.assign(Object.assign({},yI),g):yI)[p];return m&&typeof m=="function"&&_?m(_):m}function e(){n&&(n.on("addSlide",a),n.on("removeSlide",l),n.on("attachSlideEl",t),n.on("click",o),n.on("change",i))}function i(){h()}function o(p,_){const g=_.target;g&&!_.defaultPrevented&&g.dataset.panzoomAction&&f(g.dataset.panzoomAction)}function a(p,_){if(!n)return;const g=_.el;if(!g)return;const m=_.src||_.lazySrc||"",b=_.srcset||_.lazySrcset||"",x=_.sizes||_.lazySizes||"";if(m&&Lh(m)&&!_.html&&(!_.type||_.type==="image")){let F=r("tpl",_);F=Pg(F,"{{src}}",m+""),F=Pg(F,"{{srcset}}",b+""),F=Pg(F,"{{sizes}}",x+""),F=Pg(F,"{{alt}}",`${_.alt||_.caption||`Image #${_.index}`}`),g.insertAdjacentHTML("afterbegin",F)}if(!g.querySelector(".f-panzoom__content"))return;const v=_.width&&_.width!=="auto"?parseFloat(_.width+""):"auto",S=_.height&&_.height!=="auto"?parseFloat(_.height+""):"auto",B=dS(g,Object.assign({width:v,height:S,event:()=>n==null?void 0:n.getLastMouseMove(),classes:{container:"f-zoomable"}},r("Panzoom")));B.on("*",(F,O,...V)=>{n&&(O==="loading"&&(_.state=0),O==="loaded"&&(_.state=1),O==="error"&&(_.state=2,n==null||n.showError(_,"{{IMAGE_ERROR}}")),n.emit(`panzoom:${O}`,_,...V),O==="ready"&&n.emit("contentReady",_),_.index===n.getPageIndex()&&h())}),_.panzoomRef=B}function l(p,_){_.panzoomRef&&(_.panzoomRef.destroy(),_.panzoomRef=void 0)}function t(p,_){const g=_.panzoomRef;if(g)switch(g.getState()){case 0:g.init();break;case 3:g.execute(Is.Reset,{velocity:0})}}function h(){var p;const _=n==null?void 0:n.getContainer();if(!_)return;const g=(p=n==null?void 0:n.getPage())===null||p===void 0?void 0:p.slides[0].panzoomRef,m=(g==null?void 0:g.canZoomIn())||!1,b=(g==null?void 0:g.canZoomOut())||!1,x=(g==null?void 0:g.isFullsize())||!1,v=!g||(g==null?void 0:g.getState())!==3;for(const S of(_==null?void 0:_.querySelectorAll("[data-panzoom-action]"))||[]){const B=S.dataset.panzoomAction;let F=!1;if(v)F=!0;else switch(B){case Is.ZoomIn:m||(F=!0);break;case Is.ZoomOut:b||(F=!0);break;case Is.ToggleFull:m||b||(F=!0);const O=S.querySelector("g");O&&(O.style.display=x?"none":"");break;case Is.ToggleCover:case Is.ToggleMax:m||b||(F=!0)}F?(S.setAttribute("aria-disabled",""),S.setAttribute("tabindex","-1")):(S.removeAttribute("aria-disabled"),S.removeAttribute("tabindex"))}}function f(p,..._){var g;(g=n==null?void 0:n.getPage().slides[0].panzoomRef)===null||g===void 0||g.execute(p,..._)}return{init:function(p){n=p,n.getOptions().Zoomable!==!1&&n.on("initPlugins",e)},destroy:function(){if(n){n.off("addSlide",a),n.off("removeSlide",l),n.off("attachSlideEl",t),n.off("change",i);for(const p of n.getSlides())l(0,p)}n=void 0},execute:f}};/*! License details at fancyapps.com/license */const _I={syncOnChange:!1,syncOnClick:!0,syncOnHover:!1},$P=()=>{let n,r;function e(){const m=n==null?void 0:n.getOptions().Sync;return Yf(m)?Object.assign(Object.assign({},_I),m):_I}function i(m){var b,x,v;n&&m&&(r=m,n.getOptions().classes=Object.assign(Object.assign({},n.getOptions().classes),{isSelected:""}),n.getOptions().initialSlide=((x=(b=r.getPage())===null||b===void 0?void 0:b.slides[0])===null||x===void 0?void 0:x.index)||0,e().syncOnChange&&n.on("change",l),e().syncOnClick&&n.on("click",h),e().syncOnHover&&((v=n.getViewport())===null||v===void 0||v.addEventListener("mouseover",f)),function(){!n||!r||(n.on("ready",a),n.on("refresh",p),r.on("change",t),r.on("filter",_))}())}function o(){const m=e().target;n&&m&&i(m)}function a(){g()}function l(){var m;if(n&&r){const b=((m=n.getPage())===null||m===void 0?void 0:m.slides)||[],x=r.getPageIndex(b[0].index||0);x>-1&&r.goTo(x,n.hasNavigated()?void 0:{tween:!1,transition:!1}),g()}}function t(){var m;if(n&&r){const b=n.getPageIndex(((m=r.getPage())===null||m===void 0?void 0:m.slides[0].index)||0);b>-1&&n.goTo(b,r.hasNavigated()?void 0:{tween:!1,transition:!1}),g()}}function h(m,b){var x;if(!n||!r||!((x=n.getTween())===null||x===void 0)&&x.isRunning())return;const v=n==null?void 0:n.getOptions().classes.slide;if(!v)return;const S=v?b.target.closest(`.${v}`):null;if(S){const B=parseInt(S.getAttribute("index")||"")||0,F=r.getPageIndex(B);r.goTo(F)}}function f(m){n&&h(0,m)}function p(){var m;if(n&&r){const b=n.getPageIndex(((m=r.getPage())===null||m===void 0?void 0:m.slides[0].index)||0);b>-1&&n.goTo(b,{tween:!1,transition:!1}),g()}}function _(m,b){n&&r&&(n.filter(b),t())}function g(){var m,b,x;if(!r)return;const v=((b=(m=r.getPage())===null||m===void 0?void 0:m.slides[0])===null||b===void 0?void 0:b.index)||0;for(const S of(n==null?void 0:n.getSlides())||[])(x=S.el)===null||x===void 0||x.classList.toggle("is-selected",S.index===v)}return{init:function(m){n=m,n.on("initSlides",o)},destroy:function(){var m;n==null||n.off("ready",a),n==null||n.off("refresh",p),n==null||n.off("change",l),n==null||n.off("click",h),(m=n==null?void 0:n.getViewport())===null||m===void 0||m.removeEventListener("mouseover",f),r==null||r.off("change",t),r==null||r.off("filter",_),r=void 0,n==null||n.off("initSlides",o),n=void 0},getTarget:function(){return r}}};/*! License details at fancyapps.com/license */const vI={showLoading:!0,preload:1},ux="is-lazyloading",bI="is-lazyloaded",KP=()=>{let n;function r(){const a=n==null?void 0:n.getOptions().Lazyload;return Yf(a)?Object.assign(Object.assign({},vI),a):vI}function e(a){const l=a.el;if(!l)return;const t="[data-lazy-src],[data-lazy-srcset],[data-lazy-bg]",h=Array.from(l.querySelectorAll(t));l.matches(t)&&h.push(l);for(const f of h){const p=f.dataset.lazySrc,_=f.dataset.lazySrcset,g=f.dataset.lazySizes,m=f.dataset.lazyBg,b=(f instanceof HTMLImageElement||f instanceof HTMLSourceElement)&&(p||_),x=f instanceof HTMLElement&&m;if(!b&&!x)continue;const v=p||_||m;v&&(b&&v?(r().showLoading&&(n==null||n.showLoading(a)),f.addEventListener("load",()=>{n==null||n.hideLoading(a),f instanceof HTMLImageElement?f.decode().then(()=>{f.classList.remove(ux),f.classList.add(bI)}):(f.classList.remove(ux),f.classList.add(bI)),n==null||n.emit("lazyLoad:loaded",a,f,v)}),f.addEventListener("error",()=>{n==null||n.hideLoading(a),f.classList.remove(ux),f.classList.add("has-lazyerror"),n==null||n.emit("lazyLoad:error",a,f,v)}),f.classList.add("f-lazyload"),f.classList.add(ux),n==null||n.emit("lazyLoad:load",a,f,v),p&&(f.src=p),_&&(f.srcset=_),g&&(f.sizes=g)):x&&(document.body.contains(f)||(document.createElement("img").src=m),f.style.backgroundImage=`url('${m}')`),delete f.dataset.lazySrc,delete f.dataset.lazySrcset,delete f.dataset.lazySizes)}}function i(){var a;if(!n)return;const l=r().preload,t=n.getPages(),h=t.length,f=n.getPageIndex();for(let p=f-l;p<=f+l;p++){const _=(p%h+h)%h;for(const g of((a=t[_])===null||a===void 0?void 0:a.slides)||[])e(g)}}function o(a,l){e(l)}return{init:function(a){n=a,n.on(["ready","change"],i),n.on("attachSlideEl",o)},destroy:function(){n==null||n.off(["ready","change"],i),n==null||n.off("attachSlideEl",o),n=void 0}}};/*! License details at fancyapps.com/license */const xI={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"></path></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"></path></svg>'},bQ=()=>{let n,r,e;function i(l){if(!n)return;const t=`<button data-carousel-go-${l} tabindex="0" class="f-button is-arrow is-${l}" title="{{${l.toUpperCase()}}}">`+function(){const h=n==null?void 0:n.getOptions().Arrows;return Yf(h)?Object.assign(Object.assign({},xI),h):xI}()[`${l}Tpl`]+"</button";return $g(n.localize(t))||void 0}function o(){var l;r==null||r.remove(),r=void 0,e==null||e.remove(),e=void 0,(l=n==null?void 0:n.getContainer())===null||l===void 0||l.classList.remove("has-arrows")}function a(){n&&n.getOptions().Arrows!==!1&&n.getPages().length>1?(function(){if(!n)return;const l=n.getViewport();l&&(r||(r=i("prev"),r&&l.insertAdjacentElement("beforebegin",r)),e||(e=i("next"),e&&l.insertAdjacentElement("afterend",e)),Bg(n.getContainer(),"has-arrows",!(!r&&!e)))}(),n&&(r==null||r.toggleAttribute("aria-disabled",!n.canGoPrev()),e==null||e.toggleAttribute("aria-disabled",!n.canGoNext()))):o()}return{init:function(l){n=l.on(["change","refresh"],a)},destroy:function(){o(),n==null||n.off(["change","refresh"],a),n=void 0}}};/*! License details at fancyapps.com/license */const qP={moveLeft:{tpl:'<button data-panzoom-action="moveLeft" class="f-button" title="{{MOVE_LEFT}}"><svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg></button>'},moveRight:{tpl:'<button data-panzoom-action="moveRight" class="f-button" title="{{MOVE_RIGHT}}"><svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg></button>'},moveUp:{tpl:'<button data-panzoom-action="moveUp" class="f-button" title="{{MOVE_UP}}"><svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg></button>'},moveDown:{tpl:'<button data-panzoom-action="moveDown" class="f-button" title="{{MOVE_DOWN}}"><svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg></button>'},zoomIn:{tpl:'<button data-panzoom-action="zoomIn" class="f-button" title="{{ZOOM_IN}}"><svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg></button>'},zoomOut:{tpl:'<button data-panzoom-action="zoomOut" class="f-button" title="{{ZOOM_OUT}}"><svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg></button>'},toggle1to1:{tpl:'<button data-panzoom-action="toggleFull" class="f-button" title="{{TOGGLE_FULL}}"><svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg></button>'},toggleFull:{tpl:'<button data-panzoom-action="toggleFull" class="f-button" title="{{TOGGLE_FULL}}"><svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg></button>'},rotateCCW:{tpl:'<button data-panzoom-action="rotateCCW" class="f-button" title="{{ROTATE_CCW}}"><svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg></button>'},rotateCW:{tpl:'<button data-panzoom-action="rotateCW" class="f-button" title="{{ROTATE_CW}}"><svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg></button>'},flipX:{tpl:'<button data-panzoom-action="flipX" class="f-button" title="{{FLIP_X}}"><svg><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg></button>'},flipY:{tpl:'<button data-panzoom-action="flipY" class="f-button" title="{{FLIP_Y}}"><svg><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg></button>'},reset:{tpl:'<button data-panzoom-action="reset" class="f-button" title="{{RESET}}"><svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg></button>'}};/*! License details at fancyapps.com/license */var wI;(function(n){n.Left="left",n.middle="middle",n.right="right"})(wI||(wI={}));const SI=Object.assign({counter:{tpl:'<div class="f-carousel__counter"><span data-carousel-page></span>/<span data-carousel-pages></span></div>'},download:{tpl:'<button data-carousel-download class="f-button" title="{{DOWNLOAD}}"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></button>'},autoplay:{tpl:'<button data-autoplay-action="toggle" class="f-button" title="{{TOGGLE_AUTOPLAY}}"><svg><g><path d="M5 3.5 19 12 5 20.5Z"/></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},thumbs:{tpl:'<button data-thumbs-action="toggle" class="f-button" title="{{TOGGLE_THUMBS}}"><svg><rect width="18" height="14" x="3" y="3" rx="2"/><path d="M4 21h1M9 21h1M14 21h1M19 21h1"/></svg></button>'}},qP),CI={absolute:!1,display:{left:[],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:[]},enabled:"auto",items:{}},YP=()=>{let n,r;function e(){const o=n==null?void 0:n.getOptions().Toolbar;return Yf(o)?Object.assign(Object.assign({},CI),o):CI}function i(){var o,a,l;if(!(n!=null&&n.getOptions().Toolbar)||!n||r)return;let t=e().enabled;if(!t)return;let h=e().absolute;const f=n.getSlides().length>1;let p=!1,_=!1;for(const S of n.getSlides())S.panzoomRef&&(p=!0),(S.downloadSrc||S.type==="image"&&S.src)&&(_=!0);let g=((o=n.getPlugins().Thumbs)===null||o===void 0?void 0:o.isEnabled())||!1,m=f&&n.getPlugins().Autoplay||!1,b=n.getPlugins().Fullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled);if(t==="auto"&&(t=p),!t)return;r=document.createElement("div"),r.classList.add("f-carousel__toolbar");const x=e().display,v=Hp({},SI,e().items);for(const S of["left","middle","right"]){const B=x[S]||[],F=document.createElement("div");F.classList.add("f-carousel__toolbar__column"),F.classList.add(`is-${S}`);for(const O of B){let V;if(Lh(O)){if(O==="counter"&&!f||O==="autoplay"&&!m||qP[O]&&!p||O==="fullscreen"&&!b||O==="thumbs"&&!g||O==="download"&&!_)continue;V=v[O]}if(typeof O=="object"&&(V=O),V&&V.tpl){let X=n.localize(V.tpl);X=X.split("<svg>").join('<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24">');const Q=$g(X);Q&&(typeof V.click=="function"&&n&&Q.addEventListener("click",ee=>{ee.preventDefault(),ee.stopPropagation(),typeof V.click=="function"&&n&&V.click(n,ee)}),F.append(Q))}}r.append(F)}r.childElementCount&&(h===!0&&r.classList.add("is-absolute"),(a=n.getContainer())===null||a===void 0||a.classList.add("has-toolbar"),(l=n.getViewport())===null||l===void 0||l.insertAdjacentElement("beforebegin",r))}return{init:function(o){n=o,n.on("initSlides",i)},destroy:function(){var o;n==null||n.off("initSlides",i),(o=n==null?void 0:n.getContainer())===null||o===void 0||o.classList.remove("has-toolbar"),r==null||r.remove(),r=void 0},add:function(o,a){SI[o]=a},isEnabled:function(){return!!r}}};/*! License details at fancyapps.com/license */const EI={autoStart:!0,pauseOnHover:!0,showProgressbar:!0,timeout:2e3},xQ=()=>{let n,r,e=!1,i=!1,o=!1,a=null;function l(X){const Q=n==null?void 0:n.getOptions().Autoplay;let ee=(Yf(Q)?Object.assign(Object.assign({},EI),Q):EI)[X];return ee&&typeof ee=="function"&&n?ee(n):ee}function t(){var X;const Q=((X=n==null?void 0:n.getPage())===null||X===void 0?void 0:X.slides)||[];for(const ee of Q)if(ee.state===0)return!0;return!1}function h(){clearTimeout(r),r=void 0}function f(){if(r||o||t()||!(n!=null&&n.isSettled()))return;(function(){var Q,ee,ne,Ae;if(!n||(g(),!l("showProgressbar")))return;let fe=l("progressbarParentEl");if(!fe&&(!((Q=n.getPlugins().Toolbar)===null||Q===void 0)&&Q.isEnabled())&&(fe=n.getContainer()),!fe&&((ee=n.getPlugins().Toolbar)===null||ee===void 0?void 0:ee.isEnabled())!==!0){const G=((ne=n.getPages()[0])===null||ne===void 0?void 0:ne.slides)||[],Z=((Ae=n.getPage())===null||Ae===void 0?void 0:Ae.slides)||[];G.length===1&&Z.length===1&&(fe=Z[0].el)}if(fe||(fe=n.getViewport()),!fe)return;a=document.createElement("div"),a.classList.add("f-progressbar"),fe.prepend(a);const ce=l("timeout")||1e3;a.style.animationDuration=`${ce}ms`})();const X=l("timeout");r=setTimeout(()=>{n&&e&&!i&&(n.isInfinite()||n.getPageIndex()!==n.getPages().length-1?n.next():n.goTo(0))},X)}function p(){var X,Q;if(!n||n.getPages().length<2||n.getOptions().Autoplay===!1||e)return;e=!0,n.emit("autoplay:start",l("timeout")),(X=n.getContainer())===null||X===void 0||X.classList.add("has-autoplay"),(Q=n.getTween())===null||Q===void 0||Q.on("start",B);const ee=n==null?void 0:n.getContainer();ee&&l("pauseOnHover")&&matchMedia("(hover: hover)").matches&&(ee.addEventListener("mouseenter",F,!1),ee.addEventListener("mouseleave",O,!1)),n.on("change",v),n.on("settle",S),n.on("contentReady",b),n.on("panzoom:animationStart",_),n.isSettled()&&f()}function _(){var X,Q;if(h(),g(),e&&n){n.emit("autoplay:end"),(X=n.getContainer())===null||X===void 0||X.classList.remove("has-autoplay"),(Q=n.getTween())===null||Q===void 0||Q.off("start",B);const ee=n==null?void 0:n.getContainer();ee&&(ee.removeEventListener("mouseenter",F,!1),ee.removeEventListener("mouseleave",O,!1))}n&&(n.off("change",v),n.off("settle",S),n.off("contentReady",b),n.off("panzoom:animationStart",_)),e=!1,i=!1}function g(){a&&(a.remove(),a=null)}function m(){n&&n.getPages().length>1&&l("autoStart")&&p()}function b(X){n&&n.getPageIndex(X.index)===n.getPageIndex()&&(!e||o||t()||f())}function x(X,Q){const ee=Q.target;ee&&!Q.defaultPrevented&&ee.dataset.autoplayAction==="toggle"&&V.toggle()}function v(){!n||!(n!=null&&n.isInfinite())&&n.getPageIndex()===n.getPages().length-1?_():(g(),h())}function S(){!e||o||i||f()}function B(){h(),g()}function F(){o=!0,e&&(g(),h())}function O(){o=!1,e&&!i&&(n!=null&&n.isSettled())&&f()}const V={init:function(X){n=X,n.on("ready",m),n.on("click",x)},destroy:function(){_(),n==null||n.off("ready",m),n==null||n.off("click",x),n=void 0},isEnabled:()=>e,pause:function(){i=!0,h()},resume:function(){i=!1,e&&!o&&f()},start(){p()},stop(){_()},toggle(){e?_():p()}};return V};/*! License details at fancyapps.com/license */const i4={Carousel:{Lazyload:{showLoading:!1}},minCount:2,showOnStart:!0,thumbTpl:'<button aria-label="Slide to #{{page}}"><img draggable="false" alt="{{alt}}" data-lazy-src="{{src}}" /></button>',type:"modern"};let s4;const wQ=()=>{let n,r,e,i=0,o=0,a=!0;function l(S){const B=n==null?void 0:n.getOptions().Thumbs;let F=(Yf(B)?Object.assign(Object.assign({},i4),B):i4)[S];return F&&typeof F=="function"?F():F}function t(){if(!n||(n==null?void 0:n.getOptions().Thumbs)===!1)return!1;let S=0;for(const B of n.getSlides())B.thumbSrc&&S++;return S>=l("minCount")}function h(){return l("type")==="modern"}function f(S=!1){const B=n==null?void 0:n.getContainer();if(n&&B&&!e&&t()){if(!e){const F=B.nextElementSibling;F!=null&&F.classList.contains("f-thumbs")&&(e=F)}if(!e){e=document.createElement("div"),e.classList.add("f-thumbs");const F=l("parentEl");F?F.insertAdjacentElement("beforeend",e):B.insertAdjacentElement("afterend",e)}e.classList.add(`is-${l("type")}`),e.classList.add("is-syncing"),S&&(e.style.maxHeight="0px")}}function p(){var S,B;if(!s4||!n||!e||r)return;const F=[];for(const O of n.getSlides()){let V=O.thumb?O.thumb instanceof HTMLImageElement?O.thumb.src:O.thumb:O.thumbSrc||void 0,X=l("thumbTpl");X=Pg(X,"{{alt}}",`Thumbnail #${O.index}`),X=Pg(X,"{{src}}",V+""),X=Pg(X,"{{index}}",`${O.index}`),X=Pg(X,"{{page}}",`${O.index||1}`),F.push({html:X})}F.length&&(r=s4(e,Hp({},{Sync:{target:n},Lazyload:{preload:1},slides:F,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",slide:"f-thumbs__slide"},initialSlide:n.getOptions().initialPage,center:!0,fill:!h(),infinite:!1,dragFree:!0,rtl:n.getOptions().rtl||!1,slidesPerPage:O=>{let V=0;return h()&&(function(){if(!h()||!e)return;const X=Q=>e&&parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-"+Q))||0;i=X("width"),o=X("clip-width")}(),V=4*(i-o)),O&&O.getTotalSlideDim()<=O.getViewportDim()-V?1/0:1}},i4.Carousel||{},l("Carousel")||{}),{Sync:$P,Lazyload:KP}).init(),(S=r.getGestures())===null||S===void 0||S.on("start",()=>{a=!1}),r.on("click",(O,V)=>{const X=V.target;if(X){const Q=X.matches("button")?X:X.firstElementChild;Q&&Q.matches("button")&&Q.focus({})}}),(B=n.getContainer())===null||B===void 0||B.classList.add("has-thumbs"),v())}function _(){var S;t()&&((S=n==null?void 0:n.getGestures())===null||S===void 0||S.on("start",g),l("showOnStart")&&(f(),p()))}function g(){var S,B;a=!0,!((S=document.activeElement)===null||S===void 0)&&S.closest(".f-thumbs")&&((B=document.activeElement)===null||B===void 0||B.blur())}function m(){var S,B;e==null||e.classList.toggle("is-syncing",(n==null?void 0:n.hasNavigated())===!1||((S=n==null?void 0:n.getTween())===null||S===void 0?void 0:S.isRunning())),v(),!((B=n==null?void 0:n.getGestures())===null||B===void 0)&&B.isPointerDown()&&function(){if(!h()||!n||!r||!a)return;const F=r.getTween(),O=r.getPages(),V=n.getPageIndex()||0,X=n.getPageProgress()||0;if(!(n&&O&&O[V]&&F))return;const Q=F.isRunning()?F.getCurrentValues().pos:r.getPosition();if(Q===void 0)return;let ee=O[V].pos+X*(i-o);ee=rl(O[0].pos,ee,O[O.length-1].pos),F.from({pos:Q}).to({pos:ee}).start()}()}function b(){a=!0}function x(S,B){const F=B.target;F&&!B.defaultPrevented&&F.dataset.thumbsAction==="toggle"&&function(){if(e||(f(!0),p()),!e)return;const O=e.style.maxHeight;e.style.maxHeight=O?"":"0px"}()}function v(){if(!h()||!n||!r)return;const S=(r==null?void 0:r.getSlides())||[];let B=-.5*i;for(const F of S){const O=F.el;if(!O)continue;let V=n.getPageProgress(F.index)||0;V=Math.max(-1,Math.min(1,V)),V>-1&&V<1&&(B+=.5*i*(1-Math.abs(V))),V=Math.round(1e4*V)/1e4,B=Math.round(1e4*B)/1e4,O.style.setProperty("--progress",`${Math.abs(V)}`),O.style.setProperty("--shift",`${n!=null&&n.isRTL()?-1*B:B}px`),V>-1&&V<1&&(B+=.5*i*(1-Math.abs(V)))}}return{init:function(S,B){s4=B,n=S,n.on("ready",_),n.on("render",m),n.on("change",b),n.on("click",x)},destroy:function(){var S,B;n==null||n.off("ready",_),n==null||n.off("render",m),n==null||n.off("change",b),n==null||n.off("click",x),(S=n==null?void 0:n.getGestures())===null||S===void 0||S.off("start",g),(B=n==null?void 0:n.getContainer())===null||B===void 0||B.classList.remove("has-thumbs"),n=void 0,r==null||r.destroy(),r=void 0,e==null||e.remove(),e=void 0},getContainer:function(){return e},isEnabled:function(){return t()}}};/*! License details at fancyapps.com/license */const BI={iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto",credentialless:""}},SQ=()=>{let n;function r(o,a){let l=a.src;if(!Lh(l))return;let t=a.type;if(!t){if(t||(l.charAt(0)==="#"?t="inline":l.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.((a)?png|avif|gif|jp(g|eg)|pjp(eg)?|jfif|svg|webp|bmp|ico|tif(f)?)((\?|#).*)?$)/i)?t="image":l.match(/\.(pdf)((\?|#).*)?$/i)?t="pdf":l.match(/\.(html|php)((\?|#).*)?$/i)&&(t="iframe")),!t){const h=l.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i);h&&(l=`https://maps.google.${h[1]}/?ll=${(h[2]?h[2]+"&z="+Math.floor(parseFloat(h[3]))+(h[4]?h[4].replace(/^\//,"&"):""):h[4]+"").replace(/\?/,"&")}&output=${h[4]&&h[4].indexOf("layer=c")>0?"svembed":"embed"}`,t="gmap")}if(!t){const h=l.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i);h&&(l=`https://maps.google.${h[1]}/maps?q=${h[2].replace("query=","q=").replace("api=1","")}&output=embed`,t="gmap")}a.src=l,a.type=t}}function e(o,a){a.type!=="iframe"&&a.type!=="pdf"&&a.type!=="gmap"||function(l){if(!n||!l.el||!l.src)return;const t=document.createElement("iframe");t.classList.add("f-iframe");for(const[f,p]of Object.entries(function(){const _=n==null?void 0:n.getOptions().Html;return Yf(_)?Object.assign(Object.assign({},BI),_):BI}().iframeAttr||{}))t.setAttribute(f,p);t.onerror=()=>{n&&n.getState()===1&&n.showError(l,"{{IFRAME_ERROR}}")},t.src=l.src;const h=document.createElement("div");if(h.classList.add("f-html"),h.append(t),l.width){let f=`${l.width}`;f.match(/^\d+$/)&&(f+="px"),h.style.maxWidth=`${f}`}if(l.height){let f=`${l.height}`;f.match(/^\d+$/)&&(f+="px"),h.style.maxHeight=`${f}`}if(l.aspectRatio){const f=l.el.getBoundingClientRect();h.style.aspectRatio=`${l.aspectRatio}`,h.style[f.width>f.height?"width":"height"]="auto",h.style[f.width>f.height?"maxWidth":"maxHeight"]="none"}l.contentEl=t,l.htmlEl=h,l.el.classList.add("has-html"),l.el.classList.add("has-iframe"),l.el.classList.add(`has-${l.type}`),l.el.prepend(h),n.emit("contentReady",l)}(a)}function i(o,a){var l,t;a.type!=="iframe"&&a.type!=="pdf"&&a.type!=="gmap"||(n==null||n.hideError(a),(l=a.contentEl)===null||l===void 0||l.remove(),a.contentEl=void 0,(t=a.htmlEl)===null||t===void 0||t.remove(),a.htmlEl=void 0)}return{init:function(o){n=o,n.on("addSlide",r),n.on("attachSlideEl",e),n.on("detachSlideEl",i)},destroy:function(){n==null||n.off("addSlide",r),n==null||n.off("attachSlideEl",e),n==null||n.off("detachSlideEl",i),n=void 0}}};/*! License details at fancyapps.com/license */const TI=(n,r={})=>{const e=new URL(n),i=new URLSearchParams(e.search),o=new URLSearchParams;for(const[t,h]of[...i,...Object.entries(r)]){let f=h+"";if(t==="t"){let p=f.match(/((\d*)m)?(\d*)s?/);p&&o.set("start",60*parseInt(p[2]||"0")+parseInt(p[3]||"0")+"")}else o.set(t,f)}let a=o+"",l=n.match(/#t=((.*)?\d+s)/);return l&&(a+=`#t=${l[1]}`),a},II={autoplay:!1,html5videoTpl:`<video class="f-html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
    <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto",credentialless:""},vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},CQ=()=>{let n,r=!1;function e(){const g=n==null?void 0:n.getOptions().Video;return Yf(g)?Object.assign(Object.assign({},II),g):II}function i(){var g;return(g=n==null?void 0:n.getPage())===null||g===void 0?void 0:g.slides[0]}const o=g=>{var m;try{let b=JSON.parse(g.data);if(g.origin==="https://player.vimeo.com"){if(b.event==="ready")for(let x of Array.from(((m=n==null?void 0:n.getContainer())===null||m===void 0?void 0:m.getElementsByClassName("f-iframe"))||[]))x instanceof HTMLIFrameElement&&x.contentWindow===g.source&&(x.dataset.ready="true")}else if(g.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&b.event==="onReady"){const x=document.getElementById(b.id);x&&(x.dataset.ready="true")}}catch{}};function a(g,m){const b=m.src;if(!Lh(b))return;let x=m.type;if(!x||x==="html5video"){const v=b.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i);v&&(x="html5video",m.html5videoFormat=m.html5videoFormat||"video/"+(v[1]==="ogv"?"ogg":v[1]))}if(!x||x==="youtube"){const v=b.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i);if(v){const S=Object.assign(Object.assign({},e().youtube),m.youtube||{}),B=`www.youtube${S.nocookie?"-nocookie":""}.com`,F=TI(b,S),O=encodeURIComponent(v[2]);m.videoId=O,m.src=`https://${B}/embed/${O}?${F}`,m.thumb=m.thumb||`https://i.ytimg.com/vi/${O}/mqdefault.jpg`,x="youtube"}}if(!x||x==="vimeo"){const v=b.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/);if(v){const S=Object.assign(Object.assign({},e().vimeo),m.vimeo||{}),B=TI(b,S),F=encodeURIComponent(v[1]),O=v[4]||"";m.videoId=F,m.src=`https://player.vimeo.com/video/${F}?${O?`h=${O}${B?"&":""}`:""}${B}`,x="vimeo"}}m.type=x}function l(g,m){m.type==="html5video"&&function(b){if(!n||!b.el||!b.src)return;const{el:x,src:v}=b;if(!x||!v)return;const S=b.html5videoTpl||e().html5videoTpl,B=b.html5videoFormat||e().html5videoFormat;if(!S)return;const F=b.poster||(b.thumb&&Lh(b.thumb)?b.thumb:""),O=$g(S.replace(/\{\{src\}\}/gi,v+"").replace(/\{\{format\}\}/gi,B||"").replace(/\{\{poster\}\}/gi,F+""));if(!O)return;const V=document.createElement("div");V.classList.add("f-html"),V.append(O),b.contentEl=O,b.htmlEl=V,x.classList.add(`has-${b.type}`),x.prepend(V),p(b),n.emit("contentReady",b)}(m),m.type!=="youtube"&&m.type!=="vimeo"||function(b){if(!n||!b.el||!b.src)return;const x=document.createElement("iframe");x.classList.add("f-iframe"),x.setAttribute("id",`f-iframe_${b.videoId}`);for(const[S,B]of Object.entries(e().iframeAttr||{}))x.setAttribute(S,B);x.onload=()=>{var S;n&&n.getState()===1&&b.type==="youtube"&&((S=x.contentWindow)===null||S===void 0||S.postMessage(JSON.stringify({event:"listening",id:x.getAttribute("id")}),"*"))},x.onerror=()=>{n&&n.getState()===1&&(n==null||n.showError(b,"{{IFRAME_ERROR}}"))},x.src=b.src;const v=document.createElement("div");v.classList.add("f-html"),v.append(x),b.contentEl=x,b.htmlEl=v,b.el.classList.add("has-html"),b.el.classList.add("has-iframe"),b.el.classList.add(`has-${b.type}`),b.el.prepend(v),p(b),n.emit("contentReady",b)}(m)}function t(g,m){var b,x;m.type!=="html5video"&&m.type!=="youtube"&&m.type!=="vimeo"||((b=m.contentEl)===null||b===void 0||b.remove(),m.contentEl=void 0,(x=m.htmlEl)===null||x===void 0||x.remove(),m.htmlEl=void 0),m.poller&&clearTimeout(m.poller)}function h(){r=!1}function f(){if(r)return;r=!0;const g=i();(g&&g.autoplay!==void 0?g.autoplay:e().autoplay)&&(function(){var m;const b=i(),x=b==null?void 0:b.el;if(x&&(b==null?void 0:b.type)==="html5video")try{const S=x.querySelector("video");if(S){const B=S.play();B!==void 0&&B.then(()=>{}).catch(F=>{S.muted=!0,S.play()})}}catch{}const v=b==null?void 0:b.htmlEl;v instanceof HTMLIFrameElement&&((m=v.contentWindow)===null||m===void 0||m.postMessage('{"event":"command","func":"stopVideo","args":""}',"*"))}(),function(){const m=i(),b=m==null?void 0:m.type;if(!(m!=null&&m.el)||b!=="youtube"&&b!=="vimeo")return;const x=()=>{if(m.contentEl&&m.contentEl instanceof HTMLIFrameElement&&m.contentEl.contentWindow){let v;if(m.contentEl.dataset.ready==="true")return v=m.type==="youtube"?{event:"command",func:"playVideo"}:{method:"play",value:"true"},v&&m.contentEl.contentWindow.postMessage(JSON.stringify(v),"*"),void(m.poller=void 0);m.type==="youtube"&&(v={event:"listening",id:m.contentEl.getAttribute("id")},m.contentEl.contentWindow.postMessage(JSON.stringify(v),"*"))}m.poller=setTimeout(x,250)};x()}())}function p(g){const m=g==null?void 0:g.el,b=g==null?void 0:g.htmlEl;if(!g||!b)return;b.style.aspectRatio="",b.style.width="",b.style.height="",b.style.maxWidth="",b.style.maxHeight="",b.offsetHeight;const x=b.getBoundingClientRect(),v=x.width||1,S=x.height||1;if(g.width){let X=`${g.width}`;X.match(/^\d+$/)&&(X+="px"),b.style.maxWidth=`${X}`}if(g.height){let X=`${g.height}`;X.match(/^\d+$/)&&(X+="px"),b.style.maxHeight=`${X}`}if(!m||!g.aspectRatio)return;const B=g.aspectRatio.split("/"),F=parseFloat(B[0].trim()),O=B[1]?parseFloat(B[1].trim()):0,V=(F&&O?F/O:F)<v/S;b.style.aspectRatio=`${g.aspectRatio}`,b.style.width=V?"auto":"",b.style.height=V?"":"auto"}function _(){p(i())}return{init:function(g){n=g,n.on("addSlide",a),n.on("attachSlideEl",l),n.on("detachSlideEl",t),n.on("ready",f),n.on("change",h),n.on("settle",f),n.on("refresh",_),window.addEventListener("message",o)},destroy:function(){n==null||n.off("addSlide",a),n==null||n.off("attachSlideEl",l),n==null||n.off("detachSlideEl",t),n==null||n.off("ready",f),n==null||n.off("change",h),n==null||n.off("settle",f),n==null||n.off("refresh",_),window.removeEventListener("message",o),n=void 0}}};/*! License details at fancyapps.com/license */const MI={autoStart:!1,btnTpl:'<button data-fullscreen-action="toggle" class="f-button" title="{{TOGGLE_FULLSCREEN}}"><svg><g><path d="M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},FI="in-fullscreen-mode",EQ=()=>{let n;function r(_){const g=n==null?void 0:n.getOptions().Fullscreen;let m=(Yf(g)?Object.assign(Object.assign({},MI),g):MI)[_];return m&&typeof m=="function"&&n?m(n):m}function e(){var _;(_=n==null?void 0:n.getPlugins().Toolbar)===null||_===void 0||_.add("fullscreen",{tpl:r("btnTpl")})}function i(){if(r("autoStart")){const _=l();_&&h(_)}}function o(_,g){const m=g.target;m&&!g.defaultPrevented&&m.dataset.fullscreenAction==="toggle"&&p()}function a(_){l()&&_.key==="Escape"&&!_.defaultPrevented&&p()}function l(){return r("el")||(n==null?void 0:n.getContainer())||void 0}function t(){const _=document;return _.fullscreenEnabled?!!_.fullscreenElement:!!_.webkitFullscreenEnabled&&!!_.webkitFullscreenElement}function h(_){const g=document;let m;return _||(_=g.documentElement),g.fullscreenEnabled?m=_.requestFullscreen():g.webkitFullscreenEnabled&&(m=_.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),m&&m.then(()=>{_.classList.add(FI)}),m}function f(){const _=document;let g;return _.fullscreenEnabled?g=_.fullscreenElement&&_.exitFullscreen():_.webkitFullscreenEnabled&&(g=_.webkitFullscreenElement&&_.webkitExitFullscreen()),g&&g.then(()=>{var m;(m=l())===null||m===void 0||m.classList.remove(FI)}),g}function p(){const _=l();_&&(t()?f():h(_))}return{init:function(_){n=_,n.on("initPlugins",e),n.on("ready",i),n.on("click",o)},destroy:function(){n==null||n.off("initPlugins",e),n==null||n.off("ready",i),n==null||n.off("click",o),document.removeEventListener("keydown",a,!0)},exit:f,inFullscreen:t,request:h,toggle:p}};/*! License details at fancyapps.com/license */let cm,yw=!1,PI=!1,nv=!1,AS=!1;const _w=()=>{const n=new URL(document.URL).hash,r=n.slice(1).split("-"),e=r[r.length-1],i=e&&/^\+?\d+$/.test(e)&&parseInt(r.pop()||"1",10)||1;return{hash:n,slug:r.join("-"),index:i}},nE=()=>{if(!cm||cm.getInstance())return;const{slug:n,index:r}=_w();if(!n)return;let e=document.querySelector(`[data-slug="${n}"]`);if(e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),!cm||cm.getInstance())return;const i=document.querySelectorAll(`[data-fancybox="${n}"]`);i.length&&(e=i[r-1],e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},BQ=()=>{var n,r,e;if(!cm||nv)return;const i=cm==null?void 0:cm.getInstance();if((i==null?void 0:i.getOptions().Hash)===!1)return;const{slug:o,index:a}=_w(),l=((n=i==null?void 0:i.getSlide())===null||n===void 0?void 0:n.fancybox)||((r=i==null?void 0:i.getSlide())===null||r===void 0?void 0:r.slug)||void 0;i&&l&&(o===l?(e=i.getCarousel())===null||e===void 0||e.goTo(a-1):(AS=!0,i.close(),AS=!1)),nE()},LI=()=>{cm&&setTimeout(()=>{yw=!0,nE(),yw=!1,window.addEventListener("hashchange",BQ,!1)},300)},mS=()=>{let n,r="auto",e="";function i(){if(!(n!=null&&n.isTopMost())||(n==null?void 0:n.getOptions().Hash)===!1)return;const l=n==null?void 0:n.getCarousel();if(!l)return;const{hash:t,slug:h}=_w(),f=n==null?void 0:n.getSlide();if(!f)return;let p=f.fancybox||"",_=parseInt(f.index+"",10)+1;if(!p)return;let g=`#${p}-${_}`;if(t!==g&&(e=t),history.scrollRestoration&&(r=history.scrollRestoration,history.scrollRestoration="manual"),l.on("change",o),!yw)if(p===h)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+g)}catch{}else try{window.history.pushState({},document.title,window.location.pathname+window.location.search+g),PI=!0}catch{}}function o(){if(!(n!=null&&n.isTopMost()))return;const{slug:l}=_w(),t=n==null?void 0:n.getSlide();if(!t)return;let h=t.fancybox||"",f=`#${h}-${t.index+1}`;if(h===l){nv=!0;try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+f)}catch{}nv=!1}}function a(){if(!(n!=null&&n.isTopMost())||(n==null?void 0:n.getOptions().Hash)===!1)return;const l=n==null?void 0:n.getSlide();if(l&&l.fancybox&&!AS){nv=!0;try{!PI||yw||function(){if(window.parent===window)return!1;try{var t=window.frameElement}catch{t=null}return t===null?location.protocol==="data:":t.hasAttribute("sandbox")}()?window.history.replaceState({},document.title,window.location.pathname+window.location.search+e):window.history.back()}catch{}nv=!1}}return{init:function(l){n=l,n.on("ready",i),n.on("close",a)},destroy:function(){n==null||n.off("ready",i),n==null||n.off("close",a);const l=n==null?void 0:n.getCarousel();l&&l.off("change",o),n=void 0,history.scrollRestoration&&r&&(history.scrollRestoration=r)}}};mS.startFromUrl=nE,mS.setup=function(n){cm||(cm=n,WP()&&(/complete|interactive|loaded/.test(document.readyState)?LI():document.addEventListener("DOMContentLoaded",LI)))};/*! License details at fancyapps.com/license */const TQ=Object.assign(Object.assign({},rE),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ELEMENT_NOT_FOUND:"HTML Element Not Found",IFRAME_ERROR:"Error Loading Page"});/*! License details at fancyapps.com/license */const XP='<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="M19.286 4.714 4.714 19.286M4.714 4.714l14.572 14.572" /></svg></button>';YP().add("close",{tpl:XP});const ZP=n=>{n&&n.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:n}))},kI=(n=null,r="",e)=>{if(!n||!n.parentElement||!r)return void(e&&e());ZP(n);const i=o=>{o.target===n&&n.dataset.animationName&&(n.removeEventListener("animationend",i),delete n.dataset.animationName,e&&e(),n.classList.remove(r))};n.dataset.animationName=r,n.addEventListener("animationend",i),Fl(n,r)};var Ph;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Closing=2]="Closing",n[n.Destroyed=3]="Destroyed"})(Ph||(Ph={}));const Av={backdropClick:"close",Carousel:{},closeButton:"auto",closeExisting:!1,delegateEl:void 0,dragToClose:!0,fadeEffect:!0,groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,id:void 0,idle:!1,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:TQ,mainClass:"",mainStyle:{},mainTpl:`<dialog class="fancybox__dialog">
    <div class="fancybox__container" tabindex="0" aria-label="{{MODAL}}">
      <div class="fancybox__backdrop"></div>
      <div class="fancybox__carousel"></div>
    </div>
  </dialog>`,on:{},parentEl:void 0,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,sync:void 0,theme:"dark",triggerEl:void 0,triggerEvent:void 0,zoomEffect:!0},Nm=new Map;let IQ=0;const MQ=()=>{let n,r,e,i,o,a=Ph.Init,l=Object.assign({},Av),t=-1,h={},f=[],p=!1,_=!0;function g(re,...ie){let Be=l[re];return Be&&typeof Be=="function"?Be(Oe,...ie):Be}function m(re,ie=[]){const Be=g("l10n")||{};re=String(re).replace(/\{\{(\w+)\}\}/g,(He,Ge)=>Be[Ge]||He);for(let He=0;He<ie.length;He++)re=re.split(ie[He][0]).join(ie[He][1]);return re=re.replace(/\{\{(.*?)\}\}/g,(He,Ge)=>Ge)}const b=new Map;function x(re,...ie){const Be=b.get(re)||[];for(const[He,Ge]of Object.entries(l.on||{}))(He===re||He.split(" ").indexOf(re)>-1)&&Be.push(Ge);for(const He of Be)He&&typeof He=="function"&&He(Oe,...ie);re!=="*"&&x("*",re,...ie)}function v(re=[],ie={}){a!==Ph.Init&&(Oe.destroy(),a=Ph.Init),l=Hp({},Av,ie),t=g("id")||"fancybox-"+ ++IQ;const Be=Nm.get(t);if(Be&&Be.destroy(),Nm.set(t,Oe),x("init"),function(){for(const[He,Ge]of Object.entries(Object.assign(Object.assign({},_c.Plugins),l.plugins||{})))if(He&&!h[He]&&Ge instanceof Function){const Ne=Ge();Ne.init(Oe),h[He]=Ne}x("initPlugins")}(),function(He=[]){x("initSlides",He),f=[...He]}(re),function(){const He=g("parentEl")||document.body;if(!(He&&He instanceof HTMLElement))return;const Ge=m(g("mainTpl")||"");if(n=$g(Ge)||void 0,!(n&&n instanceof HTMLDialogElement)||(r=n.querySelector(".fancybox__container"),!(r&&r instanceof HTMLElement)))return;const Ne=g("mainClass");Ne&&Fl(r,Ne);const st=g("mainStyle");if(st&&Yf(st))for(const[Ze,bt]of Object.entries(st))r.style.setProperty(Ze,bt);const ot=g("theme"),Je=ot==="auto"?window.matchMedia("(prefers-color-scheme:light)").matches:ot==="light";r.setAttribute("theme",Je?"light":"dark"),n.setAttribute("id",`${t}`),n.addEventListener("keydown",Ze=>{Ze.key==="Escape"&&Ze.preventDefault()}),He.append(n),Nm.size===1&&(g("hideScrollbar")&&gI(!0),document.documentElement.classList.add("with-fancybox")),n.showModal(),x("initLayout")}(),function(){if(e=(n==null?void 0:n.querySelector(".fancybox__carousel"))||void 0,!e)return;const He=Hp({Autoplay:{autoStart:!1,pauseOnHover:!1,progressbarParentEl:Ge=>{const Ne=Ge.getContainer();return(Ne==null?void 0:Ne.querySelector(".f-carousel__toolbar [data-autoplay-action]"))||Ne}},Fullscreen:{el:r},Toolbar:{absolute:!0,display:{left:["counter"],right:["toggleFull","autoplay","fullscreen","thumbs","close"]}},Video:{autoplay:!0},Zoomable:{Panzoom:{event:g("triggerEvent")}},classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",slide:"fancybox__slide"},spinnerTpl:'<div class="f-spinner" data-fancybox-close></div>',dragFree:!1,slidesPerPage:1,plugins:{Sync:$P,Arrows:bQ,Lazyload:KP,Zoomable:vQ,Html:SQ,Video:CQ,Autoplay:xQ,Fullscreen:EQ,Thumbs:wQ,Toolbar:YP}},g("Carousel")||{},{slides:f,enabled:!0,initialPage:g("startIndex")||0,l10n:g("l10n")});i=gw(e,He),x("initCarousel",i),i.on("*",(Ge,Ne,...st)=>{x(`Carousel.${Ne}`,Ge,...st)}),i==null||i.on("addSlide",O),i.on("attachSlideEl",V),i.on("detachSlideEl",X),i.on("contentReady",ce),i.on("ready",ne),i.on("change",ee),i.on("settle",Ae),i.init()}(),g("closeExisting"))for(const[He,Ge]of Nm.entries())He!==t&&Ge.close();g("fadeEffect")&&r&&(setTimeout(()=>{r==null||r.classList.remove("is-revealing")},500),Fl(r,"is-revealing")),r==null||r.classList.add("is-ready"),a=Ph.Ready,x("ready")}function S(re){if(!z())return;if(a!==Ph.Ready)return re.preventDefault(),void re.stopPropagation();if(re.defaultPrevented||!Nv.isClickAllowed())return;const ie=re.composedPath()[0];ie.closest(".fancybox__carousel")&&ie.classList.contains("fancybox__slide")&&B(re)}function B(re){if(re.composedPath()[0].closest("[data-fancybox-close]"))return void Te(re);x("backdropClick",re),!re.defaultPrevented&&g("backdropClick")&&Te(re)}function F(re){if(!z()||a!==Ph.Ready||(J(),re.defaultPrevented))return;const ie=re.composedPath()[0],Be=!!ie.closest("[data-fancybox-close]"),He=ie.classList.contains("fancybox__backdrop");(Be||He)&&B(re)}function O(re,ie){var Be;(Be=ie.el)===null||Be===void 0||Be.addEventListener("click",S)}function V(re,ie){Q(ie),function(Be){if(!i||!Be||!Be.el||Be.type!=="inline"&&Be.type!=="clone")return;let He=null;if(Lh(Be.src)){const Ge=Be.src.split("#",2).pop();He=Ge?document.getElementById(Ge):null}if(He){if(Fl(He,"f-html"),Be.type==="clone"||He.closest(".fancybox__carousel")){He=He.cloneNode(!0);const Ge=He.dataset.animationName;Ge&&(He.classList.remove(Ge),delete He.dataset.animationName);let Ne=He.getAttribute("id");Ne=Ne?`${Ne}--clone`:`clone-${t}-${Be.index}`,He.setAttribute("id",Ne)}else if(He.parentNode){const Ge=document.createElement("div");Ge.inert=!0,He.parentNode.insertBefore(Ge,He),Be.placeholderEl=Ge}Be.htmlEl=He,Fl(Be.el,"has-html"),Be.el.prepend(He),He.classList.remove("hidden"),He.style.display==="none"&&(He.style.display=""),getComputedStyle(He).getPropertyValue("display")==="none"&&(He.style.display=He.dataset.display||"flex"),i==null||i.emit("contentReady",Be)}else i==null||i.showError(Be,"{{ELEMENT_NOT_FOUND}}")}(ie)}function X(re,ie){(function(Be){Be.closeButtonEl&&(Be.closeButtonEl.remove(),Be.closeButtonEl=void 0)})(ie),function(Be){if(Be.type!=="inline")return;const He=Be.htmlEl,Ge=Be.placeholderEl;He&&(getComputedStyle(He).getPropertyValue("display")!=="none"&&(He.style.display="none"),He.offsetHeight),Ge&&(He&&Ge.parentNode&&Ge.parentNode.insertBefore(He,Ge),Ge.remove()),Be.htmlEl=void 0,Be.placeholderEl=void 0}(ie)}function Q(re){var ie;const{el:Be,htmlEl:He,closeButtonEl:Ge}=re;if(!Be||!He||Ge)return;let Ne=g("closeButton");if(Ne==="auto"&&(Ne=((ie=i==null?void 0:i.getPlugins().Toolbar)===null||ie===void 0?void 0:ie.isEnabled())!==!0),Ne){const st=$g(m(XP));st&&(re.closeButtonEl=He.insertAdjacentElement("afterbegin",st),Be.classList.add("has-close-btn"))}}function ee(){_=!1,r&&i&&r.classList.remove("is-revealing");const re=g("sync");if(i&&re){const ie=re.getPageIndex(i.getPageIndex())||0;re.goTo(ie,{transition:!1})}}function ne(){var re;if(a!==Ph.Ready)return;fe(k()),function(){if(!g("dragToClose")||!i||!i.getViewport())return;const Be=i.getGestures();if(!Be)return;let He=0,Ge=0,Ne=Kg().on("step",st=>{He=st.y;const ot=i==null?void 0:i.getViewport();if(r&&ot){const Je=pS(Math.abs(He),0,.5*ot.getBoundingClientRect().height,1,.5);r.style.setProperty("--f-drag-opacity",Je+""),r.style.setProperty("--f-drag-offset",He+"px")}}).on("end",()=>{if(!He){r&&r.style.removeProperty("--f-opacity");const st=i==null?void 0:i.getViewport();st&&(st.style.transform="")}});Be.on("start",function(){Ne.pause()}).on("panstart",st=>{var ot;const Je=st.srcEvent.target;Je&&!Rv(Je)&&((ot=i==null?void 0:i.getViewport())===null||ot===void 0||ot.classList.add("is-dragging"))}).on("pan",function(st){const ot=st.srcEvent.target;ot&&Rv(ot)||i!=null&&i.getViewport()&&st.axis==="y"&&(Ge+=st.deltaY,Ne.spring({clamp:!0,mass:1,tension:860,friction:17,restDelta:.01,restSpeed:.01}).from({y:He}).to({y:Ge}).start())}).on("end",function(st){Ne.pause(),st.axis==="y"&&Math.abs(st.velocityY)>5&&Math.abs(Ge)>0?Te(st.srcEvent,"f-throwOut"+(st.velocityY>0?"Down":"Up")):Ge!==0&&(Ge=0,Ne.spring({clamp:!0,mass:1,tension:140,friction:25,restDelta:.1,restSpeed:.1,maxSpeed:1/0}).from({y:He}).to({y:Ge}).start())})}(),document.body.addEventListener("click",F),document.body.addEventListener("keydown",Z,{passive:!1,capture:!0}),Y();const ie=g("sync");ie&&((re=ie.getTween())===null||re===void 0||re.start())}function Ae(){i!=null&&i.canGoNext()?Y():xe()}function fe(re){if(!(_&&i&&i.getState()===1&&re&&re.index===i.getOptions().initialPage&&re.el&&re.el.parentElement))return;const ie=re.panzoomRef,Be=ie==null?void 0:ie.getTween();if(ie&&re.state!==1)return;_=!1;const He=g("zoomEffect")?N(re):void 0;if(ie&&Be&&He){const Ne=ie.getScale("base")||1,{x:st,y:ot}=ie.getMousemovePos(Ne)||{x:0,y:0};return void Be.spring({tension:225,friction:25,restDelta:.001,restSpeed:.001,maxSpeed:1/0}).from(He).to({x:st,y:ot,scale:Ne}).start()}const Ge=(ie==null?void 0:ie.getWrapper())||re.htmlEl;Ge&&kI(Ge,g("showClass",re))}function ce(re,ie){Q(ie),fe(ie)}function G(){J()}function Z(re){if(!z()||a!==Ph.Ready)return;const ie=re.key,Be=g("keyboard");if(!Be||re.ctrlKey||re.altKey||re.shiftKey)return;const He=re.composedPath()[0];if(!cy(He)||ie!=="Escape"&&(Ne=>{const st=["input","textarea","select","option","video","iframe","[contenteditable]","[data-selectable]","[data-draggable]"].join(",");return Ne.matches(st)||Ne.closest(st)})(He)||(x("keydown",re),re.defaultPrevented))return;const Ge=Be[ie];if(Ge)switch(Ge){case"close":Te(re);break;case"next":re.preventDefault(),i==null||i.next();break;case"prev":re.preventDefault(),i==null||i.prev()}}function z(){var re;return((re=_c.getInstance())===null||re===void 0?void 0:re.getId())===t}function k(){var re;return(re=i==null?void 0:i.getPage())===null||re===void 0?void 0:re.slides[0]}function R(){const re=k();return re?re.triggerEl||g("triggerEl"):void 0}function N(re){var ie,Be;const He=(Be=(ie=re.panzoomRef)===null||ie===void 0?void 0:ie.getWrapper())===null||Be===void 0?void 0:Be.getBoundingClientRect();if(!He||!He.width||!He.height)return;const Ge=re.thumbEl;if(!Ge)return;const Ne=Ge.getBoundingClientRect();if(!(!Ne||!Ne.width||!Ne.height)&&function(st){const ot=st.getBoundingClientRect(),Je=st.closest("[style]"),Ze=Je==null?void 0:Je.parentElement;if(Je&&Je.style.transform&&Ze){const Nt=Ze.getBoundingClientRect();if(ot.left<Nt.left||ot.left>Nt.left+Nt.width-ot.width||ot.top<Nt.top||ot.top>Nt.top+Nt.height-ot.height)return!1}const bt=Math.max(document.documentElement.clientHeight,window.innerHeight),yt=Math.max(document.documentElement.clientWidth,window.innerWidth);return!(ot.bottom<0||ot.top-bt>=0)&&!(ot.right<0||ot.left-yt>=0)}(Ge)&&!(Math.abs(He.width/He.height-Ne.width/Ne.height)>.1))return{x:Ne.left+.5*Ne.width-(He.left+.5*He.width),y:Ne.top+.5*Ne.height-(He.top+.5*He.height),scale:Ne.width/He.width}}function U(){o&&clearTimeout(o),o=void 0,document.removeEventListener("mousemove",G)}function Y(){if(p||o)return;const re=g("idle");re&&(o=setTimeout(de,re))}function de(){r&&(U(),Fl(r,"is-idle"),document.addEventListener("mousemove",G),p=!0)}function J(){p&&(xe(),Y())}function xe(){U(),r==null||r.classList.remove("is-idle"),p=!1}function Te(re,ie){var Be,He,Ge,Ne,st,ot;if(a===Ph.Closing||a===Ph.Destroyed)return;if(a=Ph.Closing,U(),re){if(re.defaultPrevented)return;re.cancelable&&re.preventDefault(),re.stopPropagation(),re.stopImmediatePropagation()}if(i){(Be=i.getGestures())===null||Be===void 0||Be.destroy(),(He=i.getTween())===null||He===void 0||He.pause();const Ze=k(),bt=Ze==null?void 0:Ze.panzoomRef;Ze&&bt&&Hp(bt.getOptions(),{clickAction:!1,wheelAction:!1,bounds:!1,minScale:0,maxScale:1/0});for(const yt of i.getSlides())(Ne=(Ge=yt.panzoomRef)===null||Ge===void 0?void 0:Ge.getGestures())===null||Ne===void 0||Ne.destroy(),(ot=(st=yt.panzoomRef)===null||st===void 0?void 0:st.getTween())===null||ot===void 0||ot.pause()}const Je=i==null?void 0:i.getPlugins().fullscreen;Je&&Je.inFullscreen()?Promise.resolve(Je.exit()).then(()=>{setTimeout(()=>{Ue(re,ie)},150)}):Ue(re,ie)}function Ue(re,ie){var Be,He,Ge,Ne,st;if(a!==Ph.Closing)return;if(x("close",re),g("placeFocusBack")){const Gt=R();!Gt||(st=Gt.getBoundingClientRect()).bottom>0&&st.right>0&&st.left<(window.innerWidth||document.documentElement.clientWidth)&&st.top<(window.innerHeight||document.documentElement.clientHeight)||Gt.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}g("fadeEffect")&&(r==null||r.classList.remove("is-ready"),r==null||r.classList.add("is-hiding")),r==null||r.classList.add("is-closing");const ot=k(),Je=ot==null?void 0:ot.panzoomRef,Ze=(Be=ot==null?void 0:ot.panzoomRef)===null||Be===void 0?void 0:Be.getTween(),bt=ie||g("hideClass");let yt=!1,Nt=!1;if(i&&ot&&Je&&Ze){let Gt;g("zoomEffect")&&(((Ge=(He=i.getTween())===null||He===void 0?void 0:He.getCurrentVelocities())===null||Ge===void 0?void 0:Ge.pos)||0)<700&&ot.state===1&&(Gt=N(ot)),Gt&&(yt=!0,i.on("refresh",()=>{const fr=N(ot);fr&&Ze.to(Object.assign(Object.assign({},Op),fr))}),Ze.easing(Kg.Easings.EaseOut).duration(350).from(Object.assign({},Je.getTransform())).to(Object.assign(Object.assign({},Op),Gt)).start())}const kt=(ot==null?void 0:ot.htmlEl)||((Ne=ot==null?void 0:ot.panzoomRef)===null||Ne===void 0?void 0:Ne.getWrapper());kt&&ZP(kt),!yt&&bt&&kt&&(Nt=!0,kI(kt,bt,()=>{pe()})),yt||Nt?setTimeout(()=>{pe()},350):pe()}function pe(){var re,ie,Be,He,Ge;if(a===Ph.Destroyed)return;a=Ph.Destroyed,document.body.removeEventListener("click",F),document.body.removeEventListener("keydown",Z,{passive:!1,capture:!0});for(const st of Object.values(h))st==null||st.destroy();h={};const Ne=R();if(x("destroy"),(ie=(re=g("sync"))===null||re===void 0?void 0:re.getPlugins().Autoplay)===null||ie===void 0||ie.resume(),(He=(Be=g("sync"))===null||Be===void 0?void 0:Be.getPlugins().Autoscroll)===null||He===void 0||He.resume(),n instanceof HTMLDialogElement&&n.close(),(Ge=i==null?void 0:i.getContainer())===null||Ge===void 0||Ge.classList.remove("is-idle"),i==null||i.destroy(),n==null||n.remove(),n=void 0,r=void 0,i=void 0,Nm.delete(t),!Nm.size&&(gI(!1),document.documentElement.classList.remove("with-fancybox"),g("placeFocusBack")))try{Ne==null||Ne.focus({preventScroll:!0})}catch{}}const Oe={close:Te,destroy:pe,getCarousel:function(){return i},getContainer:function(){return r},getId:function(){return t},getOptions:function(){return l},getPlugins:function(){return h},getSlide:function(){return k()},getState:function(){return a},init:function(re=[],ie={}){return v(re,ie),Oe},isCurrentSlide:function(re){const ie=k();return!(!re||!ie)&&ie.index===re.index},isTopMost:function(){return z()},off:function(re,ie){return b.has(re)&&b.set(re,b.get(re).filter(Be=>Be!==ie)),Oe},on:function(re,ie){return b.set(re,[...b.get(re)||[],ie]),Oe},toggleIdle(re){console.log(`[F] toggleIdle(); force: ${re}`),(p||re===!0)&&de(),p&&re!==!1||xe()}};return Oe},_c={Plugins:{Hash:mS},version:"6.0.5",openers:new Map,bind:function(n,r,e){if(!WP())return;let i=document.body,o="[data-fancybox]",a={};if(Lh(n)?(i=document.body,o=n,typeof r=="object"&&(a=r||{})):n instanceof Element&&(i=n,Lh(r)&&(o=r),typeof e=="object"&&(a=e||{})),!(i&&i instanceof Element&&o))return!1;const l=_c.openers.get(i)||new Map;if(l.set(o,a),_c.openers.set(i,l),l.size===1){i.addEventListener("click",_c.fromEvent);for(const t of Object.values(_c.Plugins)){const h=t.setup;typeof h=="function"&&h(_c)}}return!0},close:function(n=!0,...r){if(n)for(const e of Nm.values())e.close(...r);else{const e=_c.getInstance();e&&e.close(...r)}},destroy:function(){let n;for(;n=_c.getInstance();)n.destroy();for(const r of _c.openers.keys())r.removeEventListener("click",_c.fromEvent);_c.openers.clear()},fromEvent:function(n){var r,e,i;if(n.defaultPrevented||n.button&&n.button!==0||n.ctrlKey||n.metaKey||n.shiftKey)return;let o=n.composedPath()[0];if(o.closest(".fancybox__container.is-hiding"))return n.preventDefault(),void n.stopPropagation();const a=o.closest("[data-fancybox-delegate]")||void 0;if(a){const v=a.dataset.fancyboxDelegate||"",S=document.querySelectorAll(`[data-fancybox="${v}"]`);o=S[parseInt(a.dataset.fancyboxIndex||"",10)||0]||S[0]}if(!(o&&o instanceof Element))return;let l,t,h;for(const v of Array.from(_c.openers.keys()).reverse()){const S=_c.openers.get(v);if(S&&v.contains(o))for(const B of Array.from(S.keys()).reverse()){let F=null;try{F=o.closest(B)}catch{}if(F){o=F,l=v,t=B,h=S.get(B);break}}}if(!(l&&t&&h))return;n.preventDefault();const f=Hp({},Av,{triggerEvent:n,triggerEl:o,delegateEl:a},h),p=f.groupAll,_=f.groupAttr,g=_&&o?o.getAttribute(`${_}`):"";let m=[];const b=(r=o.closest(".f-carousel"))===null||r===void 0?void 0:r.carousel;if(b){const v=[];for(const S of b==null?void 0:b.getSlides()){const B=S.el;B&&(B.matches(t)?v.push(B):v.push(...[].slice.call(B.querySelectorAll(t))))}v.length&&(m=[...v],(e=b.getPlugins().Autoplay)===null||e===void 0||e.pause(),(i=b.getPlugins().Autoscroll)===null||i===void 0||i.pause(),f.sync=b)}else(!o||g||p)&&(m=[].slice.call(l.querySelectorAll(t)));if(o&&!p&&(m=g?m.filter(v=>v.getAttribute(`${_}`)===g):[o]),!m.length)return;const x=_c.getInstance();if(x){const v=x.getOptions().triggerEl;if(v&&m.indexOf(v)>-1)return}return Object.assign({},f.Carousel||{}).rtl&&(m=m.reverse()),o&&(f.startIndex=m.indexOf(o)),_c.fromNodes(m,f)},fromNodes:function(n,r){r=Hp({},Av,r||{});const e=[],i=o=>o instanceof HTMLImageElement?o:o instanceof HTMLElement?o.querySelector("img:not([aria-hidden])"):void 0;for(const o of n){const a=o.dataset||{},l=r.delegateEl&&n.indexOf(o)===r.startIndex?r.delegateEl:void 0,t=i(l)||i(o)||void 0,h=a.src||o.getAttribute("href")||o.getAttribute("currentSrc")||o.getAttribute("src")||void 0,f=a.thumb||a.thumbSrc||(t==null?void 0:t.getAttribute("currentSrc"))||(t==null?void 0:t.getAttribute("src"))||(t==null?void 0:t.dataset.lazySrc)||void 0,p={src:h,alt:a.alt||(t==null?void 0:t.getAttribute("alt"))||void 0,thumbSrc:f,thumbEl:t,triggerEl:o,delegateEl:l};for(const _ in a){let g=a[_]+"";g=g!=="false"&&(g==="true"||g),p[_]=g}e.push(p)}return _c.show(e,r)},fromSelector:function(n,r,e){let i=document.body,o="",a={};if(Lh(n)?o=n:n instanceof Element&&(i=n,Lh(r)&&(o=r),typeof e=="object"&&(a=e||{})),!(i&&i instanceof Element&&o))return;const l=_c.openers.get(i);return l?(a=Hp({},l.get(o)||{},a),a?_c.fromNodes(Array.from(i.querySelectorAll(o)),a):void 0):void 0},getCarousel:function(){var n;return((n=_c.getInstance())===null||n===void 0?void 0:n.getCarousel())||void 0},getDefaults:function(){return Av},getInstance:function(n){if(n){const r=Nm.get(n);return r&&r.getState()!==Ph.Destroyed?r:void 0}return Array.from(Nm.values()).reverse().find(r=>{if(r.getState()!==Ph.Destroyed)return r})||void 0},getSlide:function(){var n;return((n=_c.getInstance())===null||n===void 0?void 0:n.getSlide())||void 0},show:function(n=[],r={}){return MQ().init(n,r)},unbind:function(n,r){let e=document.body,i="";if(Lh(n)?i=n:n instanceof Element&&(e=n,Lh(r)&&(i=r)),e){const o=_c.openers.get(e);o&&i&&o.delete(i),o!=null&&o.size&&i||_c.openers.delete(e),e.removeEventListener("click",_c.fromEvent)}}};var gS=!1,yS=!1,Z0=[],_S=-1;function FQ(n){PQ(n)}function PQ(n){Z0.includes(n)||Z0.push(n),kQ()}function LQ(n){let r=Z0.indexOf(n);r!==-1&&r>_S&&Z0.splice(r,1)}function kQ(){!yS&&!gS&&(gS=!0,queueMicrotask(OQ))}function OQ(){gS=!1,yS=!0;for(let n=0;n<Z0.length;n++)Z0[n](),_S=n;Z0.length=0,_S=-1,yS=!1}var jy,_1,Uy,JP,vS=!0;function DQ(n){vS=!1,n(),vS=!0}function RQ(n){jy=n.reactive,Uy=n.release,_1=r=>n.effect(r,{scheduler:e=>{vS?FQ(e):e()}}),JP=n.raw}function OI(n){_1=n}function NQ(n){let r=()=>{};return[i=>{let o=_1(i);return n._x_effects||(n._x_effects=new Set,n._x_runEffects=()=>{n._x_effects.forEach(a=>a())}),n._x_effects.add(o),r=()=>{o!==void 0&&(n._x_effects.delete(o),Uy(o))},o},()=>{r()}]}function eL(n,r){let e=!0,i,o=_1(()=>{let a=n();JSON.stringify(a),e?i=a:queueMicrotask(()=>{r(a,i),i=a}),e=!1});return()=>Uy(o)}var tL=[],rL=[],nL=[];function jQ(n){nL.push(n)}function iE(n,r){typeof r=="function"?(n._x_cleanups||(n._x_cleanups=[]),n._x_cleanups.push(r)):(r=n,rL.push(r))}function iL(n){tL.push(n)}function sL(n,r,e){n._x_attributeCleanups||(n._x_attributeCleanups={}),n._x_attributeCleanups[r]||(n._x_attributeCleanups[r]=[]),n._x_attributeCleanups[r].push(e)}function oL(n,r){n._x_attributeCleanups&&Object.entries(n._x_attributeCleanups).forEach(([e,i])=>{(r===void 0||r.includes(e))&&(i.forEach(o=>o()),delete n._x_attributeCleanups[e])})}function UQ(n){var r,e;for((r=n._x_effects)==null||r.forEach(LQ);(e=n._x_cleanups)!=null&&e.length;)n._x_cleanups.pop()()}var sE=new MutationObserver(cE),oE=!1;function aE(){sE.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),oE=!0}function aL(){zQ(),sE.disconnect(),oE=!1}var V_=[];function zQ(){let n=sE.takeRecords();V_.push(()=>n.length>0&&cE(n));let r=V_.length;queueMicrotask(()=>{if(V_.length===r)for(;V_.length>0;)V_.shift()()})}function Zc(n){if(!oE)return n();aL();let r=n();return aE(),r}var lE=!1,vw=[];function HQ(){lE=!0}function QQ(){lE=!1,cE(vw),vw=[]}function cE(n){if(lE){vw=vw.concat(n);return}let r=[],e=new Set,i=new Map,o=new Map;for(let a=0;a<n.length;a++)if(!n[a].target._x_ignoreMutationObserver&&(n[a].type==="childList"&&(n[a].removedNodes.forEach(l=>{l.nodeType===1&&l._x_marker&&e.add(l)}),n[a].addedNodes.forEach(l=>{if(l.nodeType===1){if(e.has(l)){e.delete(l);return}l._x_marker||r.push(l)}})),n[a].type==="attributes")){let l=n[a].target,t=n[a].attributeName,h=n[a].oldValue,f=()=>{i.has(l)||i.set(l,[]),i.get(l).push({name:t,value:l.getAttribute(t)})},p=()=>{o.has(l)||o.set(l,[]),o.get(l).push(t)};l.hasAttribute(t)&&h===null?f():l.hasAttribute(t)?(p(),f()):p()}o.forEach((a,l)=>{oL(l,a)}),i.forEach((a,l)=>{tL.forEach(t=>t(l,a))});for(let a of e)r.some(l=>l.contains(a))||rL.forEach(l=>l(a));for(let a of r)a.isConnected&&nL.forEach(l=>l(a));r=null,e=null,i=null,o=null}function lL(n){return pb(by(n))}function db(n,r,e){return n._x_dataStack=[r,...by(e||n)],()=>{n._x_dataStack=n._x_dataStack.filter(i=>i!==r)}}function by(n){return n._x_dataStack?n._x_dataStack:typeof ShadowRoot=="function"&&n instanceof ShadowRoot?by(n.host):n.parentNode?by(n.parentNode):[]}function pb(n){return new Proxy({objects:n},VQ)}var VQ={ownKeys({objects:n}){return Array.from(new Set(n.flatMap(r=>Object.keys(r))))},has({objects:n},r){return r==Symbol.unscopables?!1:n.some(e=>Object.prototype.hasOwnProperty.call(e,r)||Reflect.has(e,r))},get({objects:n},r,e){return r=="toJSON"?GQ:Reflect.get(n.find(i=>Reflect.has(i,r))||{},r,e)},set({objects:n},r,e,i){const o=n.find(l=>Object.prototype.hasOwnProperty.call(l,r))||n[n.length-1],a=Object.getOwnPropertyDescriptor(o,r);return a!=null&&a.set&&(a!=null&&a.get)?a.set.call(i,e)||!0:Reflect.set(o,r,e)}};function GQ(){return Reflect.ownKeys(this).reduce((r,e)=>(r[e]=Reflect.get(this,e),r),{})}function cL(n){let r=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,e=(i,o="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([a,{value:l,enumerable:t}])=>{if(t===!1||l===void 0||typeof l=="object"&&l!==null&&l.__v_skip)return;let h=o===""?a:`${o}.${a}`;typeof l=="object"&&l!==null&&l._x_interceptor?i[a]=l.initialize(n,h,a):r(l)&&l!==i&&!(l instanceof Element)&&e(l,h)})};return e(n)}function uL(n,r=()=>{}){let e={initialValue:void 0,_x_interceptor:!0,initialize(i,o,a){return n(this.initialValue,()=>WQ(i,o),l=>bS(i,o,l),o,a)}};return r(e),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let o=e.initialize.bind(e);e.initialize=(a,l,t)=>{let h=i.initialize(a,l,t);return e.initialValue=h,o(a,l,t)}}else e.initialValue=i;return e}}function WQ(n,r){return r.split(".").reduce((e,i)=>e[i],n)}function bS(n,r,e){if(typeof r=="string"&&(r=r.split(".")),r.length===1)n[r[0]]=e;else{if(r.length===0)throw error;return n[r[0]]||(n[r[0]]={}),bS(n[r[0]],r.slice(1),e)}}var hL={};function TA(n,r){hL[n]=r}function xS(n,r){let e=$Q(r);return Object.entries(hL).forEach(([i,o])=>{Object.defineProperty(n,`$${i}`,{get(){return o(r,e)},enumerable:!1})}),n}function $Q(n){let[r,e]=gL(n),i={interceptor:uL,...r};return iE(n,e),i}function KQ(n,r,e,...i){try{return e(...i)}catch(o){jv(o,n,r)}}function jv(n,r,e=void 0){n=Object.assign(n??{message:"No error message given."},{el:r,expression:e}),console.warn(`Alpine Expression Error: ${n.message}

${e?'Expression: "'+e+`"

`:""}`,r),setTimeout(()=>{throw n},0)}var Wx=!0;function fL(n){let r=Wx;Wx=!1;let e=n();return Wx=r,e}function J0(n,r,e={}){let i;return qf(n,r)(o=>i=o,e),i}function qf(...n){return dL(...n)}var dL=pL;function qQ(n){dL=n}function pL(n,r){let e={};xS(e,n);let i=[e,...by(n)],o=typeof r=="function"?YQ(i,r):ZQ(i,r,n);return KQ.bind(null,n,r,o)}function YQ(n,r){return(e=()=>{},{scope:i={},params:o=[]}={})=>{let a=r.apply(pb([i,...n]),o);bw(e,a)}}var o4={};function XQ(n,r){if(o4[n])return o4[n];let e=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(n.trim())||/^(let|const)\s/.test(n.trim())?`(async()=>{ ${n} })()`:n,a=(()=>{try{let l=new e(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(l,"name",{value:`[Alpine] ${n}`}),l}catch(l){return jv(l,r,n),Promise.resolve()}})();return o4[n]=a,a}function ZQ(n,r,e){let i=XQ(r,e);return(o=()=>{},{scope:a={},params:l=[]}={})=>{i.result=void 0,i.finished=!1;let t=pb([a,...n]);if(typeof i=="function"){let h=i(i,t).catch(f=>jv(f,e,r));i.finished?(bw(o,i.result,t,l,e),i.result=void 0):h.then(f=>{bw(o,f,t,l,e)}).catch(f=>jv(f,e,r)).finally(()=>i.result=void 0)}}}function bw(n,r,e,i,o){if(Wx&&typeof r=="function"){let a=r.apply(e,i);a instanceof Promise?a.then(l=>bw(n,l,e,i)).catch(l=>jv(l,o,r)):n(a)}else typeof r=="object"&&r instanceof Promise?r.then(a=>n(a)):n(r)}var uE="x-";function zy(n=""){return uE+n}function JQ(n){uE=n}var xw={};function Ku(n,r){return xw[n]=r,{before(e){if(!xw[e]){console.warn(String.raw`Cannot find directive \`${e}\`. \`${n}\` will use the default order of execution`);return}const i=W0.indexOf(e);W0.splice(i>=0?i:W0.indexOf("DEFAULT"),0,n)}}}function eV(n){return Object.keys(xw).includes(n)}function hE(n,r,e){if(r=Array.from(r),n._x_virtualDirectives){let a=Object.entries(n._x_virtualDirectives).map(([t,h])=>({name:t,value:h})),l=AL(a);a=a.map(t=>l.find(h=>h.name===t.name)?{name:`x-bind:${t.name}`,value:`"${t.value}"`}:t),r=r.concat(a)}let i={};return r.map(vL((a,l)=>i[a]=l)).filter(xL).map(nV(i,e)).sort(iV).map(a=>rV(n,a))}function AL(n){return Array.from(n).map(vL()).filter(r=>!xL(r))}var wS=!1,iv=new Map,mL=Symbol();function tV(n){wS=!0;let r=Symbol();mL=r,iv.set(r,[]);let e=()=>{for(;iv.get(r).length;)iv.get(r).shift()();iv.delete(r)},i=()=>{wS=!1,e()};n(e),i()}function gL(n){let r=[],e=t=>r.push(t),[i,o]=NQ(n);return r.push(o),[{Alpine:Ab,effect:i,cleanup:e,evaluateLater:qf.bind(qf,n),evaluate:J0.bind(J0,n)},()=>r.forEach(t=>t())]}function rV(n,r){let e=()=>{},i=xw[r.type]||e,[o,a]=gL(n);sL(n,r.original,a);let l=()=>{n._x_ignore||n._x_ignoreSelf||(i.inline&&i.inline(n,r,o),i=i.bind(i,n,r,o),wS?iv.get(mL).push(i):i())};return l.runCleanups=a,l}var yL=(n,r)=>({name:e,value:i})=>(e.startsWith(n)&&(e=e.replace(n,r)),{name:e,value:i}),_L=n=>n;function vL(n=()=>{}){return({name:r,value:e})=>{let{name:i,value:o}=bL.reduce((a,l)=>l(a),{name:r,value:e});return i!==r&&n(i,r),{name:i,value:o}}}var bL=[];function fE(n){bL.push(n)}function xL({name:n}){return wL().test(n)}var wL=()=>new RegExp(`^${uE}([^:^.]+)\\b`);function nV(n,r){return({name:e,value:i})=>{let o=e.match(wL()),a=e.match(/:([a-zA-Z0-9\-_:]+)/),l=e.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],t=r||n[e]||e;return{type:o?o[1]:null,value:a?a[1]:null,modifiers:l.map(h=>h.replace(".","")),expression:i,original:t}}}var SS="DEFAULT",W0=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",SS,"teleport"];function iV(n,r){let e=W0.indexOf(n.type)===-1?SS:n.type,i=W0.indexOf(r.type)===-1?SS:r.type;return W0.indexOf(e)-W0.indexOf(i)}function mv(n,r,e={}){n.dispatchEvent(new CustomEvent(r,{detail:e,bubbles:!0,composed:!0,cancelable:!0}))}function p1(n,r){if(typeof ShadowRoot=="function"&&n instanceof ShadowRoot){Array.from(n.children).forEach(o=>p1(o,r));return}let e=!1;if(r(n,()=>e=!0),e)return;let i=n.firstElementChild;for(;i;)p1(i,r),i=i.nextElementSibling}function Np(n,...r){console.warn(`Alpine Warning: ${n}`,...r)}var DI=!1;function sV(){DI&&Np("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),DI=!0,document.body||Np("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),mv(document,"alpine:init"),mv(document,"alpine:initializing"),aE(),jQ(r=>Xm(r,p1)),iE(r=>Qy(r)),iL((r,e)=>{hE(r,e).forEach(i=>i())});let n=r=>!a5(r.parentElement,!0);Array.from(document.querySelectorAll(EL().join(","))).filter(n).forEach(r=>{Xm(r)}),mv(document,"alpine:initialized"),setTimeout(()=>{cV()})}var dE=[],SL=[];function CL(){return dE.map(n=>n())}function EL(){return dE.concat(SL).map(n=>n())}function BL(n){dE.push(n)}function TL(n){SL.push(n)}function a5(n,r=!1){return Hy(n,e=>{if((r?EL():CL()).some(o=>e.matches(o)))return!0})}function Hy(n,r){if(n){if(r(n))return n;if(n._x_teleportBack&&(n=n._x_teleportBack),!!n.parentElement)return Hy(n.parentElement,r)}}function oV(n){return CL().some(r=>n.matches(r))}var IL=[];function aV(n){IL.push(n)}var lV=1;function Xm(n,r=p1,e=()=>{}){Hy(n,i=>i._x_ignore)||tV(()=>{r(n,(i,o)=>{i._x_marker||(e(i,o),IL.forEach(a=>a(i,o)),hE(i,i.attributes).forEach(a=>a()),i._x_ignore||(i._x_marker=lV++),i._x_ignore&&o())})})}function Qy(n,r=p1){r(n,e=>{UQ(e),oL(e),delete e._x_marker})}function cV(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([r,e,i])=>{eV(e)||i.some(o=>{if(document.querySelector(o))return Np(`found "${o}", but missing ${r} plugin`),!0})})}var CS=[],pE=!1;function AE(n=()=>{}){return queueMicrotask(()=>{pE||setTimeout(()=>{ES()})}),new Promise(r=>{CS.push(()=>{n(),r()})})}function ES(){for(pE=!1;CS.length;)CS.shift()()}function uV(){pE=!0}function mE(n,r){return Array.isArray(r)?RI(n,r.join(" ")):typeof r=="object"&&r!==null?hV(n,r):typeof r=="function"?mE(n,r()):RI(n,r)}function RI(n,r){let e=o=>o.split(" ").filter(a=>!n.classList.contains(a)).filter(Boolean),i=o=>(n.classList.add(...o),()=>{n.classList.remove(...o)});return r=r===!0?r="":r||"",i(e(r))}function hV(n,r){let e=t=>t.split(" ").filter(Boolean),i=Object.entries(r).flatMap(([t,h])=>h?e(t):!1).filter(Boolean),o=Object.entries(r).flatMap(([t,h])=>h?!1:e(t)).filter(Boolean),a=[],l=[];return o.forEach(t=>{n.classList.contains(t)&&(n.classList.remove(t),l.push(t))}),i.forEach(t=>{n.classList.contains(t)||(n.classList.add(t),a.push(t))}),()=>{l.forEach(t=>n.classList.add(t)),a.forEach(t=>n.classList.remove(t))}}function l5(n,r){return typeof r=="object"&&r!==null?fV(n,r):dV(n,r)}function fV(n,r){let e={};return Object.entries(r).forEach(([i,o])=>{e[i]=n.style[i],i.startsWith("--")||(i=pV(i)),n.style.setProperty(i,o)}),setTimeout(()=>{n.style.length===0&&n.removeAttribute("style")}),()=>{l5(n,e)}}function dV(n,r){let e=n.getAttribute("style",r);return n.setAttribute("style",r),()=>{n.setAttribute("style",e||"")}}function pV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function BS(n,r=()=>{}){let e=!1;return function(){e?r.apply(this,arguments):(e=!0,n.apply(this,arguments))}}Ku("transition",(n,{value:r,modifiers:e,expression:i},{evaluate:o})=>{typeof i=="function"&&(i=o(i)),i!==!1&&(!i||typeof i=="boolean"?mV(n,e,r):AV(n,i,r))});function AV(n,r,e){ML(n,mE,""),{enter:o=>{n._x_transition.enter.during=o},"enter-start":o=>{n._x_transition.enter.start=o},"enter-end":o=>{n._x_transition.enter.end=o},leave:o=>{n._x_transition.leave.during=o},"leave-start":o=>{n._x_transition.leave.start=o},"leave-end":o=>{n._x_transition.leave.end=o}}[e](r)}function mV(n,r,e){ML(n,l5);let i=!r.includes("in")&&!r.includes("out")&&!e,o=i||r.includes("in")||["enter"].includes(e),a=i||r.includes("out")||["leave"].includes(e);r.includes("in")&&!i&&(r=r.filter((S,B)=>B<r.indexOf("out"))),r.includes("out")&&!i&&(r=r.filter((S,B)=>B>r.indexOf("out")));let l=!r.includes("opacity")&&!r.includes("scale"),t=l||r.includes("opacity"),h=l||r.includes("scale"),f=t?0:1,p=h?G_(r,"scale",95)/100:1,_=G_(r,"delay",0)/1e3,g=G_(r,"origin","center"),m="opacity, transform",b=G_(r,"duration",150)/1e3,x=G_(r,"duration",75)/1e3,v="cubic-bezier(0.4, 0.0, 0.2, 1)";o&&(n._x_transition.enter.during={transformOrigin:g,transitionDelay:`${_}s`,transitionProperty:m,transitionDuration:`${b}s`,transitionTimingFunction:v},n._x_transition.enter.start={opacity:f,transform:`scale(${p})`},n._x_transition.enter.end={opacity:1,transform:"scale(1)"}),a&&(n._x_transition.leave.during={transformOrigin:g,transitionDelay:`${_}s`,transitionProperty:m,transitionDuration:`${x}s`,transitionTimingFunction:v},n._x_transition.leave.start={opacity:1,transform:"scale(1)"},n._x_transition.leave.end={opacity:f,transform:`scale(${p})`})}function ML(n,r,e={}){n._x_transition||(n._x_transition={enter:{during:e,start:e,end:e},leave:{during:e,start:e,end:e},in(i=()=>{},o=()=>{}){TS(n,r,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,o)},out(i=()=>{},o=()=>{}){TS(n,r,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,o)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(n,r,e,i){const o=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let a=()=>o(e);if(r){n._x_transition&&(n._x_transition.enter||n._x_transition.leave)?n._x_transition.enter&&(Object.entries(n._x_transition.enter.during).length||Object.entries(n._x_transition.enter.start).length||Object.entries(n._x_transition.enter.end).length)?n._x_transition.in(e):a():n._x_transition?n._x_transition.in(e):a();return}n._x_hidePromise=n._x_transition?new Promise((l,t)=>{n._x_transition.out(()=>{},()=>l(i)),n._x_transitioning&&n._x_transitioning.beforeCancel(()=>t({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let l=FL(n);l?(l._x_hideChildren||(l._x_hideChildren=[]),l._x_hideChildren.push(n)):o(()=>{let t=h=>{let f=Promise.all([h._x_hidePromise,...(h._x_hideChildren||[]).map(t)]).then(([p])=>p==null?void 0:p());return delete h._x_hidePromise,delete h._x_hideChildren,f};t(n).catch(h=>{if(!h.isFromCancelledTransition)throw h})})})};function FL(n){let r=n.parentNode;if(r)return r._x_hidePromise?r:FL(r)}function TS(n,r,{during:e,start:i,end:o}={},a=()=>{},l=()=>{}){if(n._x_transitioning&&n._x_transitioning.cancel(),Object.keys(e).length===0&&Object.keys(i).length===0&&Object.keys(o).length===0){a(),l();return}let t,h,f;gV(n,{start(){t=r(n,i)},during(){h=r(n,e)},before:a,end(){t(),f=r(n,o)},after:l,cleanup(){h(),f()}})}function gV(n,r){let e,i,o,a=BS(()=>{Zc(()=>{e=!0,i||r.before(),o||(r.end(),ES()),r.after(),n.isConnected&&r.cleanup(),delete n._x_transitioning})});n._x_transitioning={beforeCancels:[],beforeCancel(l){this.beforeCancels.push(l)},cancel:BS(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();a()}),finish:a},Zc(()=>{r.start(),r.during()}),uV(),requestAnimationFrame(()=>{if(e)return;let l=Number(getComputedStyle(n).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,t=Number(getComputedStyle(n).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;l===0&&(l=Number(getComputedStyle(n).animationDuration.replace("s",""))*1e3),Zc(()=>{r.before()}),i=!0,requestAnimationFrame(()=>{e||(Zc(()=>{r.end()}),ES(),setTimeout(n._x_transitioning.finish,l+t),o=!0)})})}function G_(n,r,e){if(n.indexOf(r)===-1)return e;const i=n[n.indexOf(r)+1];if(!i||r==="scale"&&isNaN(i))return e;if(r==="duration"||r==="delay"){let o=i.match(/([0-9]+)ms/);if(o)return o[1]}return r==="origin"&&["top","right","left","center","bottom"].includes(n[n.indexOf(r)+2])?[i,n[n.indexOf(r)+2]].join(" "):i}var qg=!1;function o0(n,r=()=>{}){return(...e)=>qg?r(...e):n(...e)}function yV(n){return(...r)=>qg&&n(...r)}var PL=[];function c5(n){PL.push(n)}function _V(n,r){PL.forEach(e=>e(n,r)),qg=!0,LL(()=>{Xm(r,(e,i)=>{i(e,()=>{})})}),qg=!1}var IS=!1;function vV(n,r){r._x_dataStack||(r._x_dataStack=n._x_dataStack),qg=!0,IS=!0,LL(()=>{bV(r)}),qg=!1,IS=!1}function bV(n){let r=!1;Xm(n,(i,o)=>{p1(i,(a,l)=>{if(r&&oV(a))return l();r=!0,o(a,l)})})}function LL(n){let r=_1;OI((e,i)=>{let o=r(e);return Uy(o),()=>{}}),n(),OI(r)}function kL(n,r,e,i=[]){switch(n._x_bindings||(n._x_bindings=jy({})),n._x_bindings[r]=e,r=i.includes("camel")?IV(r):r,r){case"value":xV(n,e);break;case"style":SV(n,e);break;case"class":wV(n,e);break;case"selected":case"checked":CV(n,r,e);break;default:OL(n,r,e);break}}function xV(n,r){if(NL(n))n.attributes.value===void 0&&(n.value=r),window.fromModel&&(typeof r=="boolean"?n.checked=$x(n.value)===r:n.checked=NI(n.value,r));else if(gE(n))Number.isInteger(r)?n.value=r:!Array.isArray(r)&&typeof r!="boolean"&&![null,void 0].includes(r)?n.value=String(r):Array.isArray(r)?n.checked=r.some(e=>NI(e,n.value)):n.checked=!!r;else if(n.tagName==="SELECT")TV(n,r);else{if(n.value===r)return;n.value=r===void 0?"":r}}function wV(n,r){n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedClasses=mE(n,r)}function SV(n,r){n._x_undoAddedStyles&&n._x_undoAddedStyles(),n._x_undoAddedStyles=l5(n,r)}function CV(n,r,e){OL(n,r,e),BV(n,r,e)}function OL(n,r,e){[null,void 0,!1].includes(e)&&FV(r)?n.removeAttribute(r):(DL(r)&&(e=r),EV(n,r,e))}function EV(n,r,e){n.getAttribute(r)!=e&&n.setAttribute(r,e)}function BV(n,r,e){n[r]!==e&&(n[r]=e)}function TV(n,r){const e=[].concat(r).map(i=>i+"");Array.from(n.options).forEach(i=>{i.selected=e.includes(i.value)})}function IV(n){return n.toLowerCase().replace(/-(\w)/g,(r,e)=>e.toUpperCase())}function NI(n,r){return n==r}function $x(n){return[1,"1","true","on","yes",!0].includes(n)?!0:[0,"0","false","off","no",!1].includes(n)?!1:n?!!n:null}var MV=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function DL(n){return MV.has(n)}function FV(n){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(n)}function PV(n,r,e){return n._x_bindings&&n._x_bindings[r]!==void 0?n._x_bindings[r]:RL(n,r,e)}function LV(n,r,e,i=!0){if(n._x_bindings&&n._x_bindings[r]!==void 0)return n._x_bindings[r];if(n._x_inlineBindings&&n._x_inlineBindings[r]!==void 0){let o=n._x_inlineBindings[r];return o.extract=i,fL(()=>J0(n,o.expression))}return RL(n,r,e)}function RL(n,r,e){let i=n.getAttribute(r);return i===null?typeof e=="function"?e():e:i===""?!0:DL(r)?!![r,"true"].includes(i):i}function gE(n){return n.type==="checkbox"||n.localName==="ui-checkbox"||n.localName==="ui-switch"}function NL(n){return n.type==="radio"||n.localName==="ui-radio"}function jL(n,r){var e;return function(){var i=this,o=arguments,a=function(){e=null,n.apply(i,o)};clearTimeout(e),e=setTimeout(a,r)}}function UL(n,r){let e;return function(){let i=this,o=arguments;e||(n.apply(i,o),e=!0,setTimeout(()=>e=!1,r))}}function zL({get:n,set:r},{get:e,set:i}){let o=!0,a,l=_1(()=>{let t=n(),h=e();if(o)i(a4(t)),o=!1;else{let f=JSON.stringify(t),p=JSON.stringify(h);f!==a?i(a4(t)):f!==p&&r(a4(h))}a=JSON.stringify(n()),JSON.stringify(e())});return()=>{Uy(l)}}function a4(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function kV(n){(Array.isArray(n)?n:[n]).forEach(e=>e(Ab))}var R0={},jI=!1;function OV(n,r){if(jI||(R0=jy(R0),jI=!0),r===void 0)return R0[n];R0[n]=r,cL(R0[n]),typeof r=="object"&&r!==null&&r.hasOwnProperty("init")&&typeof r.init=="function"&&R0[n].init()}function DV(){return R0}var HL={};function RV(n,r){let e=typeof r!="function"?()=>r:r;return n instanceof Element?QL(n,e()):(HL[n]=e,()=>{})}function NV(n){return Object.entries(HL).forEach(([r,e])=>{Object.defineProperty(n,r,{get(){return(...i)=>e(...i)}})}),n}function QL(n,r,e){let i=[];for(;i.length;)i.pop()();let o=Object.entries(r).map(([l,t])=>({name:l,value:t})),a=AL(o);return o=o.map(l=>a.find(t=>t.name===l.name)?{name:`x-bind:${l.name}`,value:`"${l.value}"`}:l),hE(n,o,e).map(l=>{i.push(l.runCleanups),l()}),()=>{for(;i.length;)i.pop()()}}var VL={};function jV(n,r){VL[n]=r}function UV(n,r){return Object.entries(VL).forEach(([e,i])=>{Object.defineProperty(n,e,{get(){return(...o)=>i.bind(r)(...o)},enumerable:!1})}),n}var zV={get reactive(){return jy},get release(){return Uy},get effect(){return _1},get raw(){return JP},version:"3.14.9",flushAndStopDeferringMutations:QQ,dontAutoEvaluateFunctions:fL,disableEffectScheduling:DQ,startObservingMutations:aE,stopObservingMutations:aL,setReactivityEngine:RQ,onAttributeRemoved:sL,onAttributesAdded:iL,closestDataStack:by,skipDuringClone:o0,onlyDuringClone:yV,addRootSelector:BL,addInitSelector:TL,interceptClone:c5,addScopeToNode:db,deferMutations:HQ,mapAttributes:fE,evaluateLater:qf,interceptInit:aV,setEvaluator:qQ,mergeProxies:pb,extractProp:LV,findClosest:Hy,onElRemoved:iE,closestRoot:a5,destroyTree:Qy,interceptor:uL,transition:TS,setStyles:l5,mutateDom:Zc,directive:Ku,entangle:zL,throttle:UL,debounce:jL,evaluate:J0,initTree:Xm,nextTick:AE,prefixed:zy,prefix:JQ,plugin:kV,magic:TA,store:OV,start:sV,clone:vV,cloneNode:_V,bound:PV,$data:lL,watch:eL,walk:p1,data:jV,bind:RV},Ab=zV;function HV(n,r){const e=Object.create(null),i=n.split(",");for(let o=0;o<i.length;o++)e[i[o]]=!0;return o=>!!e[o]}var QV=Object.freeze({}),VV=Object.prototype.hasOwnProperty,u5=(n,r)=>VV.call(n,r),e1=Array.isArray,gv=n=>GL(n)==="[object Map]",GV=n=>typeof n=="string",yE=n=>typeof n=="symbol",h5=n=>n!==null&&typeof n=="object",WV=Object.prototype.toString,GL=n=>WV.call(n),WL=n=>GL(n).slice(8,-1),_E=n=>GV(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,$V=n=>{const r=Object.create(null);return e=>r[e]||(r[e]=n(e))},KV=$V(n=>n.charAt(0).toUpperCase()+n.slice(1)),$L=(n,r)=>n!==r&&(n===n||r===r),MS=new WeakMap,W_=[],sm,t1=Symbol("iterate"),FS=Symbol("Map key iterate");function qV(n){return n&&n._isEffect===!0}function YV(n,r=QV){qV(n)&&(n=n.raw);const e=JV(n,r);return r.lazy||e(),e}function XV(n){n.active&&(KL(n),n.options.onStop&&n.options.onStop(),n.active=!1)}var ZV=0;function JV(n,r){const e=function(){if(!e.active)return n();if(!W_.includes(e)){KL(e);try{return tG(),W_.push(e),sm=e,n()}finally{W_.pop(),qL(),sm=W_[W_.length-1]}}};return e.id=ZV++,e.allowRecurse=!!r.allowRecurse,e._isEffect=!0,e.active=!0,e.raw=n,e.deps=[],e.options=r,e}function KL(n){const{deps:r}=n;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(n);r.length=0}}var xy=!0,vE=[];function eG(){vE.push(xy),xy=!1}function tG(){vE.push(xy),xy=!0}function qL(){const n=vE.pop();xy=n===void 0?!0:n}function CA(n,r,e){if(!xy||sm===void 0)return;let i=MS.get(n);i||MS.set(n,i=new Map);let o=i.get(e);o||i.set(e,o=new Set),o.has(sm)||(o.add(sm),sm.deps.push(o),sm.options.onTrack&&sm.options.onTrack({effect:sm,target:n,type:r,key:e}))}function Yg(n,r,e,i,o,a){const l=MS.get(n);if(!l)return;const t=new Set,h=p=>{p&&p.forEach(_=>{(_!==sm||_.allowRecurse)&&t.add(_)})};if(r==="clear")l.forEach(h);else if(e==="length"&&e1(n))l.forEach((p,_)=>{(_==="length"||_>=i)&&h(p)});else switch(e!==void 0&&h(l.get(e)),r){case"add":e1(n)?_E(e)&&h(l.get("length")):(h(l.get(t1)),gv(n)&&h(l.get(FS)));break;case"delete":e1(n)||(h(l.get(t1)),gv(n)&&h(l.get(FS)));break;case"set":gv(n)&&h(l.get(t1));break}const f=p=>{p.options.onTrigger&&p.options.onTrigger({effect:p,target:n,key:e,type:r,newValue:i,oldValue:o,oldTarget:a}),p.options.scheduler?p.options.scheduler(p):p()};t.forEach(f)}var rG=HV("__proto__,__v_isRef,__isVue"),YL=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(yE)),nG=XL(),iG=XL(!0),UI=sG();function sG(){const n={};return["includes","indexOf","lastIndexOf"].forEach(r=>{n[r]=function(...e){const i=xc(this);for(let a=0,l=this.length;a<l;a++)CA(i,"get",a+"");const o=i[r](...e);return o===-1||o===!1?i[r](...e.map(xc)):o}}),["push","pop","shift","unshift","splice"].forEach(r=>{n[r]=function(...e){eG();const i=xc(this)[r].apply(this,e);return qL(),i}}),n}function XL(n=!1,r=!1){return function(i,o,a){if(o==="__v_isReactive")return!n;if(o==="__v_isReadonly")return n;if(o==="__v_raw"&&a===(n?r?_G:tk:r?yG:ek).get(i))return i;const l=e1(i);if(!n&&l&&u5(UI,o))return Reflect.get(UI,o,a);const t=Reflect.get(i,o,a);return(yE(o)?YL.has(o):rG(o))||(n||CA(i,"get",o),r)?t:PS(t)?!l||!_E(o)?t.value:t:h5(t)?n?rk(t):SE(t):t}}var oG=aG();function aG(n=!1){return function(e,i,o,a){let l=e[i];if(!n&&(o=xc(o),l=xc(l),!e1(e)&&PS(l)&&!PS(o)))return l.value=o,!0;const t=e1(e)&&_E(i)?Number(i)<e.length:u5(e,i),h=Reflect.set(e,i,o,a);return e===xc(a)&&(t?$L(o,l)&&Yg(e,"set",i,o,l):Yg(e,"add",i,o)),h}}function lG(n,r){const e=u5(n,r),i=n[r],o=Reflect.deleteProperty(n,r);return o&&e&&Yg(n,"delete",r,void 0,i),o}function cG(n,r){const e=Reflect.has(n,r);return(!yE(r)||!YL.has(r))&&CA(n,"has",r),e}function uG(n){return CA(n,"iterate",e1(n)?"length":t1),Reflect.ownKeys(n)}var hG={get:nG,set:oG,deleteProperty:lG,has:cG,ownKeys:uG},fG={get:iG,set(n,r){return console.warn(`Set operation on key "${String(r)}" failed: target is readonly.`,n),!0},deleteProperty(n,r){return console.warn(`Delete operation on key "${String(r)}" failed: target is readonly.`,n),!0}},bE=n=>h5(n)?SE(n):n,xE=n=>h5(n)?rk(n):n,wE=n=>n,f5=n=>Reflect.getPrototypeOf(n);function hx(n,r,e=!1,i=!1){n=n.__v_raw;const o=xc(n),a=xc(r);r!==a&&!e&&CA(o,"get",r),!e&&CA(o,"get",a);const{has:l}=f5(o),t=i?wE:e?xE:bE;if(l.call(o,r))return t(n.get(r));if(l.call(o,a))return t(n.get(a));n!==o&&n.get(r)}function fx(n,r=!1){const e=this.__v_raw,i=xc(e),o=xc(n);return n!==o&&!r&&CA(i,"has",n),!r&&CA(i,"has",o),n===o?e.has(n):e.has(n)||e.has(o)}function dx(n,r=!1){return n=n.__v_raw,!r&&CA(xc(n),"iterate",t1),Reflect.get(n,"size",n)}function zI(n){n=xc(n);const r=xc(this);return f5(r).has.call(r,n)||(r.add(n),Yg(r,"add",n,n)),this}function HI(n,r){r=xc(r);const e=xc(this),{has:i,get:o}=f5(e);let a=i.call(e,n);a?JL(e,i,n):(n=xc(n),a=i.call(e,n));const l=o.call(e,n);return e.set(n,r),a?$L(r,l)&&Yg(e,"set",n,r,l):Yg(e,"add",n,r),this}function QI(n){const r=xc(this),{has:e,get:i}=f5(r);let o=e.call(r,n);o?JL(r,e,n):(n=xc(n),o=e.call(r,n));const a=i?i.call(r,n):void 0,l=r.delete(n);return o&&Yg(r,"delete",n,void 0,a),l}function VI(){const n=xc(this),r=n.size!==0,e=gv(n)?new Map(n):new Set(n),i=n.clear();return r&&Yg(n,"clear",void 0,void 0,e),i}function px(n,r){return function(i,o){const a=this,l=a.__v_raw,t=xc(l),h=r?wE:n?xE:bE;return!n&&CA(t,"iterate",t1),l.forEach((f,p)=>i.call(o,h(f),h(p),a))}}function Ax(n,r,e){return function(...i){const o=this.__v_raw,a=xc(o),l=gv(a),t=n==="entries"||n===Symbol.iterator&&l,h=n==="keys"&&l,f=o[n](...i),p=e?wE:r?xE:bE;return!r&&CA(a,"iterate",h?FS:t1),{next(){const{value:_,done:g}=f.next();return g?{value:_,done:g}:{value:t?[p(_[0]),p(_[1])]:p(_),done:g}},[Symbol.iterator](){return this}}}}function wg(n){return function(...r){{const e=r[0]?`on key "${r[0]}" `:"";console.warn(`${KV(n)} operation ${e}failed: target is readonly.`,xc(this))}return n==="delete"?!1:this}}function dG(){const n={get(a){return hx(this,a)},get size(){return dx(this)},has:fx,add:zI,set:HI,delete:QI,clear:VI,forEach:px(!1,!1)},r={get(a){return hx(this,a,!1,!0)},get size(){return dx(this)},has:fx,add:zI,set:HI,delete:QI,clear:VI,forEach:px(!1,!0)},e={get(a){return hx(this,a,!0)},get size(){return dx(this,!0)},has(a){return fx.call(this,a,!0)},add:wg("add"),set:wg("set"),delete:wg("delete"),clear:wg("clear"),forEach:px(!0,!1)},i={get(a){return hx(this,a,!0,!0)},get size(){return dx(this,!0)},has(a){return fx.call(this,a,!0)},add:wg("add"),set:wg("set"),delete:wg("delete"),clear:wg("clear"),forEach:px(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=Ax(a,!1,!1),e[a]=Ax(a,!0,!1),r[a]=Ax(a,!1,!0),i[a]=Ax(a,!0,!0)}),[n,e,r,i]}var[pG,AG,wre,Sre]=dG();function ZL(n,r){const e=n?AG:pG;return(i,o,a)=>o==="__v_isReactive"?!n:o==="__v_isReadonly"?n:o==="__v_raw"?i:Reflect.get(u5(e,o)&&o in i?e:i,o,a)}var mG={get:ZL(!1)},gG={get:ZL(!0)};function JL(n,r,e){const i=xc(e);if(i!==e&&r.call(n,i)){const o=WL(n);console.warn(`Reactive ${o} contains both the raw and reactive versions of the same object${o==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var ek=new WeakMap,yG=new WeakMap,tk=new WeakMap,_G=new WeakMap;function vG(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bG(n){return n.__v_skip||!Object.isExtensible(n)?0:vG(WL(n))}function SE(n){return n&&n.__v_isReadonly?n:nk(n,!1,hG,mG,ek)}function rk(n){return nk(n,!0,fG,gG,tk)}function nk(n,r,e,i,o){if(!h5(n))return console.warn(`value cannot be made reactive: ${String(n)}`),n;if(n.__v_raw&&!(r&&n.__v_isReactive))return n;const a=o.get(n);if(a)return a;const l=bG(n);if(l===0)return n;const t=new Proxy(n,l===2?i:e);return o.set(n,t),t}function xc(n){return n&&xc(n.__v_raw)||n}function PS(n){return!!(n&&n.__v_isRef===!0)}TA("nextTick",()=>AE);TA("dispatch",n=>mv.bind(mv,n));TA("watch",(n,{evaluateLater:r,cleanup:e})=>(i,o)=>{let a=r(i),t=eL(()=>{let h;return a(f=>h=f),h},o);e(t)});TA("store",DV);TA("data",n=>lL(n));TA("root",n=>a5(n));TA("refs",n=>(n._x_refs_proxy||(n._x_refs_proxy=pb(xG(n))),n._x_refs_proxy));function xG(n){let r=[];return Hy(n,e=>{e._x_refs&&r.push(e._x_refs)}),r}var l4={};function ik(n){return l4[n]||(l4[n]=0),++l4[n]}function wG(n,r){return Hy(n,e=>{if(e._x_ids&&e._x_ids[r])return!0})}function SG(n,r){n._x_ids||(n._x_ids={}),n._x_ids[r]||(n._x_ids[r]=ik(r))}TA("id",(n,{cleanup:r})=>(e,i=null)=>{let o=`${e}${i?`-${i}`:""}`;return CG(n,o,r,()=>{let a=wG(n,e),l=a?a._x_ids[e]:ik(e);return i?`${e}-${l}-${i}`:`${e}-${l}`})});c5((n,r)=>{n._x_id&&(r._x_id=n._x_id)});function CG(n,r,e,i){if(n._x_id||(n._x_id={}),n._x_id[r])return n._x_id[r];let o=i();return n._x_id[r]=o,e(()=>{delete n._x_id[r]}),o}TA("el",n=>n);sk("Focus","focus","focus");sk("Persist","persist","persist");function sk(n,r,e){TA(r,i=>Np(`You can't use [$${r}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${e}`,i))}Ku("modelable",(n,{expression:r},{effect:e,evaluateLater:i,cleanup:o})=>{let a=i(r),l=()=>{let p;return a(_=>p=_),p},t=i(`${r} = __placeholder`),h=p=>t(()=>{},{scope:{__placeholder:p}}),f=l();h(f),queueMicrotask(()=>{if(!n._x_model)return;n._x_removeModelListeners.default();let p=n._x_model.get,_=n._x_model.set,g=zL({get(){return p()},set(m){_(m)}},{get(){return l()},set(m){h(m)}});o(g)})});Ku("teleport",(n,{modifiers:r,expression:e},{cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&Np("x-teleport can only be used on a <template> tag",n);let o=GI(e),a=n.content.cloneNode(!0).firstElementChild;n._x_teleport=a,a._x_teleportBack=n,n.setAttribute("data-teleport-template",!0),a.setAttribute("data-teleport-target",!0),n._x_forwardEvents&&n._x_forwardEvents.forEach(t=>{a.addEventListener(t,h=>{h.stopPropagation(),n.dispatchEvent(new h.constructor(h.type,h))})}),db(a,{},n);let l=(t,h,f)=>{f.includes("prepend")?h.parentNode.insertBefore(t,h):f.includes("append")?h.parentNode.insertBefore(t,h.nextSibling):h.appendChild(t)};Zc(()=>{l(a,o,r),o0(()=>{Xm(a)})()}),n._x_teleportPutBack=()=>{let t=GI(e);Zc(()=>{l(n._x_teleport,t,r)})},i(()=>Zc(()=>{a.remove(),Qy(a)}))});var EG=document.createElement("div");function GI(n){let r=o0(()=>document.querySelector(n),()=>EG)();return r||Np(`Cannot find x-teleport element for selector: "${n}"`),r}var ok=()=>{};ok.inline=(n,{modifiers:r},{cleanup:e})=>{r.includes("self")?n._x_ignoreSelf=!0:n._x_ignore=!0,e(()=>{r.includes("self")?delete n._x_ignoreSelf:delete n._x_ignore})};Ku("ignore",ok);Ku("effect",o0((n,{expression:r},{effect:e})=>{e(qf(n,r))}));function LS(n,r,e,i){let o=n,a=h=>i(h),l={},t=(h,f)=>p=>f(h,p);if(e.includes("dot")&&(r=BG(r)),e.includes("camel")&&(r=TG(r)),e.includes("passive")&&(l.passive=!0),e.includes("capture")&&(l.capture=!0),e.includes("window")&&(o=window),e.includes("document")&&(o=document),e.includes("debounce")){let h=e[e.indexOf("debounce")+1]||"invalid-wait",f=ww(h.split("ms")[0])?Number(h.split("ms")[0]):250;a=jL(a,f)}if(e.includes("throttle")){let h=e[e.indexOf("throttle")+1]||"invalid-wait",f=ww(h.split("ms")[0])?Number(h.split("ms")[0]):250;a=UL(a,f)}return e.includes("prevent")&&(a=t(a,(h,f)=>{f.preventDefault(),h(f)})),e.includes("stop")&&(a=t(a,(h,f)=>{f.stopPropagation(),h(f)})),e.includes("once")&&(a=t(a,(h,f)=>{h(f),o.removeEventListener(r,a,l)})),(e.includes("away")||e.includes("outside"))&&(o=document,a=t(a,(h,f)=>{n.contains(f.target)||f.target.isConnected!==!1&&(n.offsetWidth<1&&n.offsetHeight<1||n._x_isShown!==!1&&h(f))})),e.includes("self")&&(a=t(a,(h,f)=>{f.target===n&&h(f)})),(MG(r)||ak(r))&&(a=t(a,(h,f)=>{FG(f,e)||h(f)})),o.addEventListener(r,a,l),()=>{o.removeEventListener(r,a,l)}}function BG(n){return n.replace(/-/g,".")}function TG(n){return n.toLowerCase().replace(/-(\w)/g,(r,e)=>e.toUpperCase())}function ww(n){return!Array.isArray(n)&&!isNaN(n)}function IG(n){return[" ","_"].includes(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function MG(n){return["keydown","keyup"].includes(n)}function ak(n){return["contextmenu","click","mouse"].some(r=>n.includes(r))}function FG(n,r){let e=r.filter(a=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(a));if(e.includes("debounce")){let a=e.indexOf("debounce");e.splice(a,ww((e[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.includes("throttle")){let a=e.indexOf("throttle");e.splice(a,ww((e[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.length===0||e.length===1&&WI(n.key).includes(e[0]))return!1;const o=["ctrl","shift","alt","meta","cmd","super"].filter(a=>e.includes(a));return e=e.filter(a=>!o.includes(a)),!(o.length>0&&o.filter(l=>((l==="cmd"||l==="super")&&(l="meta"),n[`${l}Key`])).length===o.length&&(ak(n.type)||WI(n.key).includes(e[0])))}function WI(n){if(!n)return[];n=IG(n);let r={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return r[n]=n,Object.keys(r).map(e=>{if(r[e]===n)return e}).filter(e=>e)}Ku("model",(n,{modifiers:r,expression:e},{effect:i,cleanup:o})=>{let a=n;r.includes("parent")&&(a=n.parentNode);let l=qf(a,e),t;typeof e=="string"?t=qf(a,`${e} = __placeholder`):typeof e=="function"&&typeof e()=="string"?t=qf(a,`${e()} = __placeholder`):t=()=>{};let h=()=>{let g;return l(m=>g=m),$I(g)?g.get():g},f=g=>{let m;l(b=>m=b),$I(m)?m.set(g):t(()=>{},{scope:{__placeholder:g}})};typeof e=="string"&&n.type==="radio"&&Zc(()=>{n.hasAttribute("name")||n.setAttribute("name",e)});var p=n.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(n.type)||r.includes("lazy")?"change":"input";let _=qg?()=>{}:LS(n,p,r,g=>{f(c4(n,r,g,h()))});if(r.includes("fill")&&([void 0,null,""].includes(h())||gE(n)&&Array.isArray(h())||n.tagName.toLowerCase()==="select"&&n.multiple)&&f(c4(n,r,{target:n},h())),n._x_removeModelListeners||(n._x_removeModelListeners={}),n._x_removeModelListeners.default=_,o(()=>n._x_removeModelListeners.default()),n.form){let g=LS(n.form,"reset",[],m=>{AE(()=>n._x_model&&n._x_model.set(c4(n,r,{target:n},h())))});o(()=>g())}n._x_model={get(){return h()},set(g){f(g)}},n._x_forceModelUpdate=g=>{g===void 0&&typeof e=="string"&&e.match(/\./)&&(g=""),window.fromModel=!0,Zc(()=>kL(n,"value",g)),delete window.fromModel},i(()=>{let g=h();r.includes("unintrusive")&&document.activeElement.isSameNode(n)||n._x_forceModelUpdate(g)})});function c4(n,r,e,i){return Zc(()=>{if(e instanceof CustomEvent&&e.detail!==void 0)return e.detail!==null&&e.detail!==void 0?e.detail:e.target.value;if(gE(n))if(Array.isArray(i)){let o=null;return r.includes("number")?o=u4(e.target.value):r.includes("boolean")?o=$x(e.target.value):o=e.target.value,e.target.checked?i.includes(o)?i:i.concat([o]):i.filter(a=>!PG(a,o))}else return e.target.checked;else{if(n.tagName.toLowerCase()==="select"&&n.multiple)return r.includes("number")?Array.from(e.target.selectedOptions).map(o=>{let a=o.value||o.text;return u4(a)}):r.includes("boolean")?Array.from(e.target.selectedOptions).map(o=>{let a=o.value||o.text;return $x(a)}):Array.from(e.target.selectedOptions).map(o=>o.value||o.text);{let o;return NL(n)?e.target.checked?o=e.target.value:o=i:o=e.target.value,r.includes("number")?u4(o):r.includes("boolean")?$x(o):r.includes("trim")?o.trim():o}}})}function u4(n){let r=n?parseFloat(n):null;return LG(r)?r:n}function PG(n,r){return n==r}function LG(n){return!Array.isArray(n)&&!isNaN(n)}function $I(n){return n!==null&&typeof n=="object"&&typeof n.get=="function"&&typeof n.set=="function"}Ku("cloak",n=>queueMicrotask(()=>Zc(()=>n.removeAttribute(zy("cloak")))));TL(()=>`[${zy("init")}]`);Ku("init",o0((n,{expression:r},{evaluate:e})=>typeof r=="string"?!!r.trim()&&e(r,{},!1):e(r,{},!1)));Ku("text",(n,{expression:r},{effect:e,evaluateLater:i})=>{let o=i(r);e(()=>{o(a=>{Zc(()=>{n.textContent=a})})})});Ku("html",(n,{expression:r},{effect:e,evaluateLater:i})=>{let o=i(r);e(()=>{o(a=>{Zc(()=>{n.innerHTML=a,n._x_ignoreSelf=!0,Xm(n),delete n._x_ignoreSelf})})})});fE(yL(":",_L(zy("bind:"))));var lk=(n,{value:r,modifiers:e,expression:i,original:o},{effect:a,cleanup:l})=>{if(!r){let h={};NV(h),qf(n,i)(p=>{QL(n,p,o)},{scope:h});return}if(r==="key")return kG(n,i);if(n._x_inlineBindings&&n._x_inlineBindings[r]&&n._x_inlineBindings[r].extract)return;let t=qf(n,i);a(()=>t(h=>{h===void 0&&typeof i=="string"&&i.match(/\./)&&(h=""),Zc(()=>kL(n,r,h,e))})),l(()=>{n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedStyles&&n._x_undoAddedStyles()})};lk.inline=(n,{value:r,modifiers:e,expression:i})=>{r&&(n._x_inlineBindings||(n._x_inlineBindings={}),n._x_inlineBindings[r]={expression:i,extract:!1})};Ku("bind",lk);function kG(n,r){n._x_keyExpression=r}BL(()=>`[${zy("data")}]`);Ku("data",(n,{expression:r},{cleanup:e})=>{if(OG(n))return;r=r===""?"{}":r;let i={};xS(i,n);let o={};UV(o,i);let a=J0(n,r,{scope:o});(a===void 0||a===!0)&&(a={}),xS(a,n);let l=jy(a);cL(l);let t=db(n,l);l.init&&J0(n,l.init),e(()=>{l.destroy&&J0(n,l.destroy),t()})});c5((n,r)=>{n._x_dataStack&&(r._x_dataStack=n._x_dataStack,r.setAttribute("data-has-alpine-state",!0))});function OG(n){return qg?IS?!0:n.hasAttribute("data-has-alpine-state"):!1}Ku("show",(n,{modifiers:r,expression:e},{effect:i})=>{let o=qf(n,e);n._x_doHide||(n._x_doHide=()=>{Zc(()=>{n.style.setProperty("display","none",r.includes("important")?"important":void 0)})}),n._x_doShow||(n._x_doShow=()=>{Zc(()=>{n.style.length===1&&n.style.display==="none"?n.removeAttribute("style"):n.style.removeProperty("display")})});let a=()=>{n._x_doHide(),n._x_isShown=!1},l=()=>{n._x_doShow(),n._x_isShown=!0},t=()=>setTimeout(l),h=BS(_=>_?l():a(),_=>{typeof n._x_toggleAndCascadeWithTransitions=="function"?n._x_toggleAndCascadeWithTransitions(n,_,l,a):_?t():a()}),f,p=!0;i(()=>o(_=>{!p&&_===f||(r.includes("immediate")&&(_?t():a()),h(_),f=_,p=!1)}))});Ku("for",(n,{expression:r},{effect:e,cleanup:i})=>{let o=RG(r),a=qf(n,o.items),l=qf(n,n._x_keyExpression||"index");n._x_prevKeys=[],n._x_lookup={},e(()=>DG(n,o,a,l)),i(()=>{Object.values(n._x_lookup).forEach(t=>Zc(()=>{Qy(t),t.remove()})),delete n._x_prevKeys,delete n._x_lookup})});function DG(n,r,e,i){let o=l=>typeof l=="object"&&!Array.isArray(l),a=n;e(l=>{NG(l)&&l>=0&&(l=Array.from(Array(l).keys(),v=>v+1)),l===void 0&&(l=[]);let t=n._x_lookup,h=n._x_prevKeys,f=[],p=[];if(o(l))l=Object.entries(l).map(([v,S])=>{let B=KI(r,S,v,l);i(F=>{p.includes(F)&&Np("Duplicate key on x-for",n),p.push(F)},{scope:{index:v,...B}}),f.push(B)});else for(let v=0;v<l.length;v++){let S=KI(r,l[v],v,l);i(B=>{p.includes(B)&&Np("Duplicate key on x-for",n),p.push(B)},{scope:{index:v,...S}}),f.push(S)}let _=[],g=[],m=[],b=[];for(let v=0;v<h.length;v++){let S=h[v];p.indexOf(S)===-1&&m.push(S)}h=h.filter(v=>!m.includes(v));let x="template";for(let v=0;v<p.length;v++){let S=p[v],B=h.indexOf(S);if(B===-1)h.splice(v,0,S),_.push([x,v]);else if(B!==v){let F=h.splice(v,1)[0],O=h.splice(B-1,1)[0];h.splice(v,0,O),h.splice(B,0,F),g.push([F,O])}else b.push(S);x=S}for(let v=0;v<m.length;v++){let S=m[v];S in t&&(Zc(()=>{Qy(t[S]),t[S].remove()}),delete t[S])}for(let v=0;v<g.length;v++){let[S,B]=g[v],F=t[S],O=t[B],V=document.createElement("div");Zc(()=>{O||Np('x-for ":key" is undefined or invalid',a,B,t),O.after(V),F.after(O),O._x_currentIfEl&&O.after(O._x_currentIfEl),V.before(F),F._x_currentIfEl&&F.after(F._x_currentIfEl),V.remove()}),O._x_refreshXForScope(f[p.indexOf(B)])}for(let v=0;v<_.length;v++){let[S,B]=_[v],F=S==="template"?a:t[S];F._x_currentIfEl&&(F=F._x_currentIfEl);let O=f[B],V=p[B],X=document.importNode(a.content,!0).firstElementChild,Q=jy(O);db(X,Q,a),X._x_refreshXForScope=ee=>{Object.entries(ee).forEach(([ne,Ae])=>{Q[ne]=Ae})},Zc(()=>{F.after(X),o0(()=>Xm(X))()}),typeof V=="object"&&Np("x-for key cannot be an object, it must be a string or an integer",a),t[V]=X}for(let v=0;v<b.length;v++)t[b[v]]._x_refreshXForScope(f[p.indexOf(b[v])]);a._x_prevKeys=p})}function RG(n){let r=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,e=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,o=n.match(i);if(!o)return;let a={};a.items=o[2].trim();let l=o[1].replace(e,"").trim(),t=l.match(r);return t?(a.item=l.replace(r,"").trim(),a.index=t[1].trim(),t[2]&&(a.collection=t[2].trim())):a.item=l,a}function KI(n,r,e,i){let o={};return/^\[.*\]$/.test(n.item)&&Array.isArray(r)?n.item.replace("[","").replace("]","").split(",").map(l=>l.trim()).forEach((l,t)=>{o[l]=r[t]}):/^\{.*\}$/.test(n.item)&&!Array.isArray(r)&&typeof r=="object"?n.item.replace("{","").replace("}","").split(",").map(l=>l.trim()).forEach(l=>{o[l]=r[l]}):o[n.item]=r,n.index&&(o[n.index]=e),n.collection&&(o[n.collection]=i),o}function NG(n){return!Array.isArray(n)&&!isNaN(n)}function ck(){}ck.inline=(n,{expression:r},{cleanup:e})=>{let i=a5(n);i._x_refs||(i._x_refs={}),i._x_refs[r]=n,e(()=>delete i._x_refs[r])};Ku("ref",ck);Ku("if",(n,{expression:r},{effect:e,cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&Np("x-if can only be used on a <template> tag",n);let o=qf(n,r),a=()=>{if(n._x_currentIfEl)return n._x_currentIfEl;let t=n.content.cloneNode(!0).firstElementChild;return db(t,{},n),Zc(()=>{n.after(t),o0(()=>Xm(t))()}),n._x_currentIfEl=t,n._x_undoIf=()=>{Zc(()=>{Qy(t),t.remove()}),delete n._x_currentIfEl},t},l=()=>{n._x_undoIf&&(n._x_undoIf(),delete n._x_undoIf)};e(()=>o(t=>{t?a():l()})),i(()=>n._x_undoIf&&n._x_undoIf())});Ku("id",(n,{expression:r},{evaluate:e})=>{e(r).forEach(o=>SG(n,o))});c5((n,r)=>{n._x_ids&&(r._x_ids=n._x_ids)});fE(yL("@",_L(zy("on:"))));Ku("on",o0((n,{value:r,modifiers:e,expression:i},{cleanup:o})=>{let a=i?qf(n,i):()=>{};n.tagName.toLowerCase()==="template"&&(n._x_forwardEvents||(n._x_forwardEvents=[]),n._x_forwardEvents.includes(r)||n._x_forwardEvents.push(r));let l=LS(n,r,e,t=>{a(()=>{},{scope:{$event:t},params:[t]})});o(()=>l())}));d5("Collapse","collapse","collapse");d5("Intersect","intersect","intersect");d5("Focus","trap","focus");d5("Mask","mask","mask");function d5(n,r,e){Ku(r,i=>Np(`You can't use [x-${r}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${e}`,i))}Ab.setEvaluator(pL);Ab.setReactivityEngine({reactive:SE,effect:YV,release:XV,raw:xc});var jG=Ab,mb=jG;function Rm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uk(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var np={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},wy={duration:.5,overwrite:!1,delay:0},CE,qh,Nc,jp=1e8,Zl=1/jp,kS=Math.PI*2,UG=kS/4,zG=0,hk=Math.sqrt,HG=Math.cos,QG=Math.sin,Oh=function(r){return typeof r=="string"},du=function(r){return typeof r=="function"},Zm=function(r){return typeof r=="number"},EE=function(r){return typeof r>"u"},gm=function(r){return typeof r=="object"},xd=function(r){return r!==!1},BE=function(){return typeof window<"u"},mx=function(r){return du(r)||Oh(r)},fk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},If=Array.isArray,OS=/(?:-?\.?\d|\.)+/gi,dk=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,hy=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,h4=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,pk=/[+-]=-?[.\d]+/,Ak=/[^,'"\[\]\s]+/gi,VG=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Yc,om,DS,TE,sp={},Sw={},mk,gk=function(r){return(Sw=Sy(r,sp))&&Mf},IE=function(r,e){return console.warn("Invalid property",r,"set to",e,"Missing plugin? gsap.registerPlugin()")},Uv=function(r,e){return!e&&console.warn(r)},yk=function(r,e){return r&&(sp[r]=e)&&Sw&&(Sw[r]=e)||sp},zv=function(){return 0},GG={suppressEvents:!0,isStart:!0,kill:!1},Kx={suppressEvents:!0,kill:!1},WG={suppressEvents:!0},ME={},Hg=[],RS={},_k,Jd={},f4={},qI=30,qx=[],FE="",PE=function(r){var e=r[0],i,o;if(gm(e)||du(e)||(r=[r]),!(i=(e._gsap||{}).harness)){for(o=qx.length;o--&&!qx[o].targetTest(e););i=qx[o]}for(o=r.length;o--;)r[o]&&(r[o]._gsap||(r[o]._gsap=new Qk(r[o],i)))||r.splice(o,1);return r},r1=function(r){return r._gsap||PE(Up(r))[0]._gsap},vk=function(r,e,i){return(i=r[e])&&du(i)?r[e]():EE(i)&&r.getAttribute&&r.getAttribute(e)||i},wd=function(r,e){return(r=r.split(",")).forEach(e)||r},Cu=function(r){return Math.round(r*1e5)/1e5||0},$u=function(r){return Math.round(r*1e7)/1e7||0},gy=function(r,e){var i=e.charAt(0),o=parseFloat(e.substr(2));return r=parseFloat(r),i==="+"?r+o:i==="-"?r-o:i==="*"?r*o:r/o},$G=function(r,e){for(var i=e.length,o=0;r.indexOf(e[o])<0&&++o<i;);return o<i},Cw=function(){var r=Hg.length,e=Hg.slice(0),i,o;for(RS={},Hg.length=0,i=0;i<r;i++)o=e[i],o&&o._lazy&&(o.render(o._lazy[0],o._lazy[1],!0)._lazy=0)},LE=function(r){return!!(r._initted||r._startAt||r.add)},bk=function(r,e,i,o){Hg.length&&!qh&&Cw(),r.render(e,i,!!(qh&&e<0&&LE(r))),Hg.length&&!qh&&Cw()},xk=function(r){var e=parseFloat(r);return(e||e===0)&&(r+"").match(Ak).length<2?e:Oh(r)?r.trim():r},wk=function(r){return r},op=function(r,e){for(var i in e)i in r||(r[i]=e[i]);return r},KG=function(r){return function(e,i){for(var o in i)o in e||o==="duration"&&r||o==="ease"||(e[o]=i[o])}},Sy=function(r,e){for(var i in e)r[i]=e[i];return r},YI=function n(r,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(r[i]=gm(e[i])?n(r[i]||(r[i]={}),e[i]):e[i]);return r},Ew=function(r,e){var i={},o;for(o in r)o in e||(i[o]=r[o]);return i},yv=function(r){var e=r.parent||Yc,i=r.keyframes?KG(If(r.keyframes)):op;if(xd(r.inherit))for(;e;)i(r,e.vars.defaults),e=e.parent||e._dp;return r},qG=function(r,e){for(var i=r.length,o=i===e.length;o&&i--&&r[i]===e[i];);return i<0},Sk=function(r,e,i,o,a){var l=r[o],t;if(a)for(t=e[a];l&&l[a]>t;)l=l._prev;return l?(e._next=l._next,l._next=e):(e._next=r[i],r[i]=e),e._next?e._next._prev=e:r[o]=e,e._prev=l,e.parent=e._dp=r,e},p5=function(r,e,i,o){i===void 0&&(i="_first"),o===void 0&&(o="_last");var a=e._prev,l=e._next;a?a._next=l:r[i]===e&&(r[i]=l),l?l._prev=a:r[o]===e&&(r[o]=a),e._next=e._prev=e.parent=null},Xg=function(r,e){r.parent&&(!e||r.parent.autoRemoveChildren)&&r.parent.remove&&r.parent.remove(r),r._act=0},n1=function(r,e){if(r&&(!e||e._end>r._dur||e._start<0))for(var i=r;i;)i._dirty=1,i=i.parent;return r},YG=function(r){for(var e=r.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return r},NS=function(r,e,i,o){return r._startAt&&(qh?r._startAt.revert(Kx):r.vars.immediateRender&&!r.vars.autoRevert||r._startAt.render(e,!0,o))},XG=function n(r){return!r||r._ts&&n(r.parent)},XI=function(r){return r._repeat?Cy(r._tTime,r=r.duration()+r._rDelay)*r:0},Cy=function(r,e){var i=Math.floor(r=$u(r/e));return r&&i===r?i-1:i},Bw=function(r,e){return(r-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},A5=function(r){return r._end=$u(r._start+(r._tDur/Math.abs(r._ts||r._rts||Zl)||0))},m5=function(r,e){var i=r._dp;return i&&i.smoothChildTiming&&r._ts&&(r._start=$u(i._time-(r._ts>0?e/r._ts:((r._dirty?r.totalDuration():r._tDur)-e)/-r._ts)),A5(r),i._dirty||n1(i,r)),r},Ck=function(r,e){var i;if((e._time||!e._dur&&e._initted||e._start<r._time&&(e._dur||!e.add))&&(i=Bw(r.rawTime(),e),(!e._dur||gb(0,e.totalDuration(),i)-e._tTime>Zl)&&e.render(i,!0)),n1(r,e)._dp&&r._initted&&r._time>=r._dur&&r._ts){if(r._dur<r.duration())for(i=r;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;r._zTime=-Zl}},lm=function(r,e,i,o){return e.parent&&Xg(e),e._start=$u((Zm(i)?i:i||r!==Yc?Dp(r,i,e):r._time)+e._delay),e._end=$u(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Sk(r,e,"_first","_last",r._sort?"_start":0),jS(e)||(r._recent=e),o||Ck(r,e),r._ts<0&&m5(r,r._tTime),r},Ek=function(r,e){return(sp.ScrollTrigger||IE("scrollTrigger",e))&&sp.ScrollTrigger.create(e,r)},Bk=function(r,e,i,o,a){if(OE(r,e,a),!r._initted)return 1;if(!i&&r._pt&&!qh&&(r._dur&&r.vars.lazy!==!1||!r._dur&&r.vars.lazy)&&_k!==ep.frame)return Hg.push(r),r._lazy=[a,o],1},ZG=function n(r){var e=r.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},jS=function(r){var e=r.data;return e==="isFromStart"||e==="isStart"},JG=function(r,e,i,o){var a=r.ratio,l=e<0||!e&&(!r._start&&ZG(r)&&!(!r._initted&&jS(r))||(r._ts<0||r._dp._ts<0)&&!jS(r))?0:1,t=r._rDelay,h=0,f,p,_;if(t&&r._repeat&&(h=gb(0,r._tDur,e),p=Cy(h,t),r._yoyo&&p&1&&(l=1-l),p!==Cy(r._tTime,t)&&(a=1-l,r.vars.repeatRefresh&&r._initted&&r.invalidate())),l!==a||qh||o||r._zTime===Zl||!e&&r._zTime){if(!r._initted&&Bk(r,e,o,i,h))return;for(_=r._zTime,r._zTime=e||(i?Zl:0),i||(i=e&&!_),r.ratio=l,r._from&&(l=1-l),r._time=0,r._tTime=h,f=r._pt;f;)f.r(l,f.d),f=f._next;e<0&&NS(r,e,i,!0),r._onUpdate&&!i&&tp(r,"onUpdate"),h&&r._repeat&&!i&&r.parent&&tp(r,"onRepeat"),(e>=r._tDur||e<0)&&r.ratio===l&&(l&&Xg(r,1),!i&&!qh&&(tp(r,l?"onComplete":"onReverseComplete",!0),r._prom&&r._prom()))}else r._zTime||(r._zTime=e)},eW=function(r,e,i){var o;if(i>e)for(o=r._first;o&&o._start<=i;){if(o.data==="isPause"&&o._start>e)return o;o=o._next}else for(o=r._last;o&&o._start>=i;){if(o.data==="isPause"&&o._start<e)return o;o=o._prev}},Ey=function(r,e,i,o){var a=r._repeat,l=$u(e)||0,t=r._tTime/r._tDur;return t&&!o&&(r._time*=l/r._dur),r._dur=l,r._tDur=a?a<0?1e10:$u(l*(a+1)+r._rDelay*a):l,t>0&&!o&&m5(r,r._tTime=r._tDur*t),r.parent&&A5(r),i||n1(r.parent,r),r},ZI=function(r){return r instanceof Kf?n1(r):Ey(r,r._dur)},tW={_start:0,endTime:zv,totalDuration:zv},Dp=function n(r,e,i){var o=r.labels,a=r._recent||tW,l=r.duration()>=jp?a.endTime(!1):r._dur,t,h,f;return Oh(e)&&(isNaN(e)||e in o)?(h=e.charAt(0),f=e.substr(-1)==="%",t=e.indexOf("="),h==="<"||h===">"?(t>=0&&(e=e.replace(/=/,"")),(h==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(e.substr(1))||0)*(f?(t<0?a:i).totalDuration()/100:1)):t<0?(e in o||(o[e]=l),o[e]):(h=parseFloat(e.charAt(t-1)+e.substr(t+1)),f&&i&&(h=h/100*(If(i)?i[0]:i).totalDuration()),t>1?n(r,e.substr(0,t-1),i)+h:l+h)):e==null?l:+e},_v=function(r,e,i){var o=Zm(e[1]),a=(o?2:1)+(r<2?0:1),l=e[a],t,h;if(o&&(l.duration=e[1]),l.parent=i,r){for(t=l,h=i;h&&!("immediateRender"in t);)t=h.vars.defaults||{},h=xd(h.vars.inherit)&&h.parent;l.immediateRender=xd(t.immediateRender),r<2?l.runBackwards=1:l.startAt=e[a-1]}return new Wu(e[0],l,e[a+1])},a0=function(r,e){return r||r===0?e(r):e},gb=function(r,e,i){return i<r?r:i>e?e:i},Cf=function(r,e){return!Oh(r)||!(e=VG.exec(r))?"":e[1]},rW=function(r,e,i){return a0(i,function(o){return gb(r,e,o)})},US=[].slice,Tk=function(r,e){return r&&gm(r)&&"length"in r&&(!e&&!r.length||r.length-1 in r&&gm(r[0]))&&!r.nodeType&&r!==om},nW=function(r,e,i){return i===void 0&&(i=[]),r.forEach(function(o){var a;return Oh(o)&&!e||Tk(o,1)?(a=i).push.apply(a,Up(o)):i.push(o)})||i},Up=function(r,e,i){return Nc&&!e&&Nc.selector?Nc.selector(r):Oh(r)&&!i&&(DS||!By())?US.call((e||TE).querySelectorAll(r),0):If(r)?nW(r,i):Tk(r)?US.call(r,0):r?[r]:[]},zS=function(r){return r=Up(r)[0]||Uv("Invalid scope")||{},function(e){var i=r.current||r.nativeElement||r;return Up(e,i.querySelectorAll?i:i===r?Uv("Invalid scope")||TE.createElement("div"):r)}},Ik=function(r){return r.sort(function(){return .5-Math.random()})},Mk=function(r){if(du(r))return r;var e=gm(r)?r:{each:r},i=i1(e.ease),o=e.from||0,a=parseFloat(e.base)||0,l={},t=o>0&&o<1,h=isNaN(o)||t,f=e.axis,p=o,_=o;return Oh(o)?p=_={center:.5,edges:.5,end:1}[o]||0:!t&&h&&(p=o[0],_=o[1]),function(g,m,b){var x=(b||e).length,v=l[x],S,B,F,O,V,X,Q,ee,ne;if(!v){if(ne=e.grid==="auto"?0:(e.grid||[1,jp])[1],!ne){for(Q=-jp;Q<(Q=b[ne++].getBoundingClientRect().left)&&ne<x;);ne<x&&ne--}for(v=l[x]=[],S=h?Math.min(ne,x)*p-.5:o%ne,B=ne===jp?0:h?x*_/ne-.5:o/ne|0,Q=0,ee=jp,X=0;X<x;X++)F=X%ne-S,O=B-(X/ne|0),v[X]=V=f?Math.abs(f==="y"?O:F):hk(F*F+O*O),V>Q&&(Q=V),V<ee&&(ee=V);o==="random"&&Ik(v),v.max=Q-ee,v.min=ee,v.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(ne>x?x-1:f?f==="y"?x/ne:ne:Math.max(ne,x/ne))||0)*(o==="edges"?-1:1),v.b=x<0?a-x:a,v.u=Cf(e.amount||e.each)||0,i=i&&x<0?Uk(i):i}return x=(v[g]-v.min)/v.max||0,$u(v.b+(i?i(x):x)*v.v)+v.u}},HS=function(r){var e=Math.pow(10,((r+"").split(".")[1]||"").length);return function(i){var o=$u(Math.round(parseFloat(i)/r)*r*e);return(o-o%1)/e+(Zm(i)?0:Cf(i))}},Fk=function(r,e){var i=If(r),o,a;return!i&&gm(r)&&(o=i=r.radius||jp,r.values?(r=Up(r.values),(a=!Zm(r[0]))&&(o*=o)):r=HS(r.increment)),a0(e,i?du(r)?function(l){return a=r(l),Math.abs(a-l)<=o?a:l}:function(l){for(var t=parseFloat(a?l.x:l),h=parseFloat(a?l.y:0),f=jp,p=0,_=r.length,g,m;_--;)a?(g=r[_].x-t,m=r[_].y-h,g=g*g+m*m):g=Math.abs(r[_]-t),g<f&&(f=g,p=_);return p=!o||f<=o?r[p]:l,a||p===l||Zm(l)?p:p+Cf(l)}:HS(r))},Pk=function(r,e,i,o){return a0(If(r)?!e:i===!0?!!(i=0):!o,function(){return If(r)?r[~~(Math.random()*r.length)]:(i=i||1e-5)&&(o=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((r-i/2+Math.random()*(e-r+i*.99))/i)*i*o)/o})},iW=function(){for(var r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];return function(o){return e.reduce(function(a,l){return l(a)},o)}},sW=function(r,e){return function(i){return r(parseFloat(i))+(e||Cf(i))}},oW=function(r,e,i){return kk(r,e,0,1,i)},Lk=function(r,e,i){return a0(i,function(o){return r[~~e(o)]})},aW=function n(r,e,i){var o=e-r;return If(r)?Lk(r,n(0,r.length),e):a0(i,function(a){return(o+(a-r)%o)%o+r})},lW=function n(r,e,i){var o=e-r,a=o*2;return If(r)?Lk(r,n(0,r.length-1),e):a0(i,function(l){return l=(a+(l-r)%a)%a||0,r+(l>o?a-l:l)})},Hv=function(r){for(var e=0,i="",o,a,l,t;~(o=r.indexOf("random(",e));)l=r.indexOf(")",o),t=r.charAt(o+7)==="[",a=r.substr(o+7,l-o-7).match(t?Ak:OS),i+=r.substr(e,o-e)+Pk(t?a:+a[0],t?0:+a[1],+a[2]||1e-5),e=l+1;return i+r.substr(e,r.length-e)},kk=function(r,e,i,o,a){var l=e-r,t=o-i;return a0(a,function(h){return i+((h-r)/l*t||0)})},cW=function n(r,e,i,o){var a=isNaN(r+e)?0:function(m){return(1-m)*r+m*e};if(!a){var l=Oh(r),t={},h,f,p,_,g;if(i===!0&&(o=1)&&(i=null),l)r={p:r},e={p:e};else if(If(r)&&!If(e)){for(p=[],_=r.length,g=_-2,f=1;f<_;f++)p.push(n(r[f-1],r[f]));_--,a=function(b){b*=_;var x=Math.min(g,~~b);return p[x](b-x)},i=e}else o||(r=Sy(If(r)?[]:{},r));if(!p){for(h in e)kE.call(t,r,h,"get",e[h]);a=function(b){return NE(b,t)||(l?r.p:r)}}}return a0(i,a)},JI=function(r,e,i){var o=r.labels,a=jp,l,t,h;for(l in o)t=o[l]-e,t<0==!!i&&t&&a>(t=Math.abs(t))&&(h=l,a=t);return h},tp=function(r,e,i){var o=r.vars,a=o[e],l=Nc,t=r._ctx,h,f,p;if(a)return h=o[e+"Params"],f=o.callbackScope||r,i&&Hg.length&&Cw(),t&&(Nc=t),p=h?a.apply(f,h):a.call(f),Nc=l,p},sv=function(r){return Xg(r),r.scrollTrigger&&r.scrollTrigger.kill(!!qh),r.progress()<1&&tp(r,"onInterrupt"),r},fy,Ok=[],Dk=function(r){if(r)if(r=!r.name&&r.default||r,BE()||r.headless){var e=r.name,i=du(r),o=e&&!i&&r.init?function(){this._props=[]}:r,a={init:zv,render:NE,add:kE,kill:CW,modifier:SW,rawVars:0},l={targetTest:0,get:0,getSetter:RE,aliases:{},register:0};if(By(),r!==o){if(Jd[e])return;op(o,op(Ew(r,a),l)),Sy(o.prototype,Sy(a,Ew(r,l))),Jd[o.prop=e]=o,r.targetTest&&(qx.push(o),ME[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}yk(e,o),r.register&&r.register(Mf,o,Sd)}else Ok.push(r)},Yl=255,ov={aqua:[0,Yl,Yl],lime:[0,Yl,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Yl],navy:[0,0,128],white:[Yl,Yl,Yl],olive:[128,128,0],yellow:[Yl,Yl,0],orange:[Yl,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Yl,0,0],pink:[Yl,192,203],cyan:[0,Yl,Yl],transparent:[Yl,Yl,Yl,0]},d4=function(r,e,i){return r+=r<0?1:r>1?-1:0,(r*6<1?e+(i-e)*r*6:r<.5?i:r*3<2?e+(i-e)*(2/3-r)*6:e)*Yl+.5|0},Rk=function(r,e,i){var o=r?Zm(r)?[r>>16,r>>8&Yl,r&Yl]:0:ov.black,a,l,t,h,f,p,_,g,m,b;if(!o){if(r.substr(-1)===","&&(r=r.substr(0,r.length-1)),ov[r])o=ov[r];else if(r.charAt(0)==="#"){if(r.length<6&&(a=r.charAt(1),l=r.charAt(2),t=r.charAt(3),r="#"+a+a+l+l+t+t+(r.length===5?r.charAt(4)+r.charAt(4):"")),r.length===9)return o=parseInt(r.substr(1,6),16),[o>>16,o>>8&Yl,o&Yl,parseInt(r.substr(7),16)/255];r=parseInt(r.substr(1),16),o=[r>>16,r>>8&Yl,r&Yl]}else if(r.substr(0,3)==="hsl"){if(o=b=r.match(OS),!e)h=+o[0]%360/360,f=+o[1]/100,p=+o[2]/100,l=p<=.5?p*(f+1):p+f-p*f,a=p*2-l,o.length>3&&(o[3]*=1),o[0]=d4(h+1/3,a,l),o[1]=d4(h,a,l),o[2]=d4(h-1/3,a,l);else if(~r.indexOf("="))return o=r.match(dk),i&&o.length<4&&(o[3]=1),o}else o=r.match(OS)||ov.transparent;o=o.map(Number)}return e&&!b&&(a=o[0]/Yl,l=o[1]/Yl,t=o[2]/Yl,_=Math.max(a,l,t),g=Math.min(a,l,t),p=(_+g)/2,_===g?h=f=0:(m=_-g,f=p>.5?m/(2-_-g):m/(_+g),h=_===a?(l-t)/m+(l<t?6:0):_===l?(t-a)/m+2:(a-l)/m+4,h*=60),o[0]=~~(h+.5),o[1]=~~(f*100+.5),o[2]=~~(p*100+.5)),i&&o.length<4&&(o[3]=1),o},Nk=function(r){var e=[],i=[],o=-1;return r.split(Qg).forEach(function(a){var l=a.match(hy)||[];e.push.apply(e,l),i.push(o+=l.length+1)}),e.c=i,e},eM=function(r,e,i){var o="",a=(r+o).match(Qg),l=e?"hsla(":"rgba(",t=0,h,f,p,_;if(!a)return r;if(a=a.map(function(g){return(g=Rk(g,e,1))&&l+(e?g[0]+","+g[1]+"%,"+g[2]+"%,"+g[3]:g.join(","))+")"}),i&&(p=Nk(r),h=i.c,h.join(o)!==p.c.join(o)))for(f=r.replace(Qg,"1").split(hy),_=f.length-1;t<_;t++)o+=f[t]+(~h.indexOf(t)?a.shift()||l+"0,0,0,0)":(p.length?p:a.length?a:i).shift());if(!f)for(f=r.split(Qg),_=f.length-1;t<_;t++)o+=f[t]+a[t];return o+f[_]},Qg=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",r;for(r in ov)n+="|"+r+"\\b";return new RegExp(n+")","gi")}(),uW=/hsl[a]?\(/,jk=function(r){var e=r.join(" "),i;if(Qg.lastIndex=0,Qg.test(e))return i=uW.test(e),r[1]=eM(r[1],i),r[0]=eM(r[0],i,Nk(r[1])),!0},Qv,ep=function(){var n=Date.now,r=500,e=33,i=n(),o=i,a=1e3/240,l=a,t=[],h,f,p,_,g,m,b=function x(v){var S=n()-o,B=v===!0,F,O,V,X;if((S>r||S<0)&&(i+=S-e),o+=S,V=o-i,F=V-l,(F>0||B)&&(X=++_.frame,g=V-_.time*1e3,_.time=V=V/1e3,l+=F+(F>=a?4:a-F),O=1),B||(h=f(x)),O)for(m=0;m<t.length;m++)t[m](V,g,X,v)};return _={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(v){return g/(1e3/(v||60))},wake:function(){mk&&(!DS&&BE()&&(om=DS=window,TE=om.document||{},sp.gsap=Mf,(om.gsapVersions||(om.gsapVersions=[])).push(Mf.version),gk(Sw||om.GreenSockGlobals||!om.gsap&&om||{}),Ok.forEach(Dk)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&_.sleep(),f=p||function(v){return setTimeout(v,l-_.time*1e3+1|0)},Qv=1,b(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(h),Qv=0,f=zv},lagSmoothing:function(v,S){r=v||1/0,e=Math.min(S||33,r)},fps:function(v){a=1e3/(v||240),l=_.time*1e3+a},add:function(v,S,B){var F=S?function(O,V,X,Q){v(O,V,X,Q),_.remove(F)}:v;return _.remove(v),t[B?"unshift":"push"](F),By(),F},remove:function(v,S){~(S=t.indexOf(v))&&t.splice(S,1)&&m>=S&&m--},_listeners:t},_}(),By=function(){return!Qv&&ep.wake()},Ya={},hW=/^[\d.\-M][\d.\-,\s]/,fW=/["']/g,dW=function(r){for(var e={},i=r.substr(1,r.length-3).split(":"),o=i[0],a=1,l=i.length,t,h,f;a<l;a++)h=i[a],t=a!==l-1?h.lastIndexOf(","):h.length,f=h.substr(0,t),e[o]=isNaN(f)?f.replace(fW,"").trim():+f,o=h.substr(t+1).trim();return e},pW=function(r){var e=r.indexOf("(")+1,i=r.indexOf(")"),o=r.indexOf("(",e);return r.substring(e,~o&&o<i?r.indexOf(")",i+1):i)},AW=function(r){var e=(r+"").split("("),i=Ya[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~r.indexOf("{")?[dW(e[1])]:pW(r).split(",").map(xk)):Ya._CE&&hW.test(r)?Ya._CE("",r):i},Uk=function(r){return function(e){return 1-r(1-e)}},zk=function n(r,e){for(var i=r._first,o;i;)i instanceof Kf?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(o=i._ease,i._ease=i._yEase,i._yEase=o,i._yoyo=e)),i=i._next},i1=function(r,e){return r&&(du(r)?r:Ya[r]||AW(r))||e},v1=function(r,e,i,o){i===void 0&&(i=function(h){return 1-e(1-h)}),o===void 0&&(o=function(h){return h<.5?e(h*2)/2:1-e((1-h)*2)/2});var a={easeIn:e,easeOut:i,easeInOut:o},l;return wd(r,function(t){Ya[t]=sp[t]=a,Ya[l=t.toLowerCase()]=i;for(var h in a)Ya[l+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=Ya[t+"."+h]=a[h]}),a},Hk=function(r){return function(e){return e<.5?(1-r(1-e*2))/2:.5+r((e-.5)*2)/2}},p4=function n(r,e,i){var o=e>=1?e:1,a=(i||(r?.3:.45))/(e<1?e:1),l=a/kS*(Math.asin(1/o)||0),t=function(p){return p===1?1:o*Math.pow(2,-10*p)*QG((p-l)*a)+1},h=r==="out"?t:r==="in"?function(f){return 1-t(1-f)}:Hk(t);return a=kS/a,h.config=function(f,p){return n(r,f,p)},h},A4=function n(r,e){e===void 0&&(e=1.70158);var i=function(l){return l?--l*l*((e+1)*l+e)+1:0},o=r==="out"?i:r==="in"?function(a){return 1-i(1-a)}:Hk(i);return o.config=function(a){return n(r,a)},o};wd("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,r){var e=r<5?r+1:r;v1(n+",Power"+(e-1),r?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});Ya.Linear.easeNone=Ya.none=Ya.Linear.easeIn;v1("Elastic",p4("in"),p4("out"),p4());(function(n,r){var e=1/r,i=2*e,o=2.5*e,a=function(t){return t<e?n*t*t:t<i?n*Math.pow(t-1.5/r,2)+.75:t<o?n*(t-=2.25/r)*t+.9375:n*Math.pow(t-2.625/r,2)+.984375};v1("Bounce",function(l){return 1-a(1-l)},a)})(7.5625,2.75);v1("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});v1("Circ",function(n){return-(hk(1-n*n)-1)});v1("Sine",function(n){return n===1?1:-HG(n*UG)+1});v1("Back",A4("in"),A4("out"),A4());Ya.SteppedEase=Ya.steps=sp.SteppedEase={config:function(r,e){r===void 0&&(r=1);var i=1/r,o=r+(e?0:1),a=e?1:0,l=1-Zl;return function(t){return((o*gb(0,l,t)|0)+a)*i}}};wy.ease=Ya["quad.out"];wd("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return FE+=n+","+n+"Params,"});var Qk=function(r,e){this.id=zG++,r._gsap=this,this.target=r,this.harness=e,this.get=e?e.get:vk,this.set=e?e.getSetter:RE},Vv=function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Ey(this,+e.duration,1,1),this.data=e.data,Nc&&(this._ctx=Nc,Nc.data.push(this)),Qv||ep.wake()}var r=n.prototype;return r.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},r.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},r.totalDuration=function(i){return arguments.length?(this._dirty=0,Ey(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},r.totalTime=function(i,o){if(By(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(m5(this,i),!a._dp||a.parent||Ck(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&lm(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!o||this._initted&&Math.abs(this._zTime)===Zl||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),bk(this,i,o)),this},r.time=function(i,o){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+XI(this))%(this._dur+this._rDelay)||(i?this._dur:0),o):this._time},r.totalProgress=function(i,o){return arguments.length?this.totalTime(this.totalDuration()*i,o):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},r.progress=function(i,o){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+XI(this),o):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},r.iteration=function(i,o){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,o):this._repeat?Cy(this._tTime,a)+1:1},r.timeScale=function(i,o){if(!arguments.length)return this._rts===-Zl?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?Bw(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Zl?0:this._rts,this.totalTime(gb(-Math.abs(this._delay),this.totalDuration(),a),o!==!1),A5(this),YG(this)},r.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(By(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Zl&&(this._tTime-=Zl)))),this):this._ps},r.startTime=function(i){if(arguments.length){this._start=i;var o=this.parent||this._dp;return o&&(o._sort||!this.parent)&&lm(o,this,i-this._delay),this}return this._start},r.endTime=function(i){return this._start+(xd(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},r.rawTime=function(i){var o=this.parent||this._dp;return o?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Bw(o.rawTime(i),this):this._tTime:this._tTime},r.revert=function(i){i===void 0&&(i=WG);var o=qh;return qh=i,LE(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),qh=o,this},r.globalTime=function(i){for(var o=this,a=arguments.length?i:o.rawTime();o;)a=o._start+a/(Math.abs(o._ts)||1),o=o._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},r.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,ZI(this)):this._repeat===-2?1/0:this._repeat},r.repeatDelay=function(i){if(arguments.length){var o=this._time;return this._rDelay=i,ZI(this),o?this.time(o):this}return this._rDelay},r.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},r.seek=function(i,o){return this.totalTime(Dp(this,i),xd(o))},r.restart=function(i,o){return this.play().totalTime(i?-this._delay:0,xd(o)),this._dur||(this._zTime=-Zl),this},r.play=function(i,o){return i!=null&&this.seek(i,o),this.reversed(!1).paused(!1)},r.reverse=function(i,o){return i!=null&&this.seek(i||this.totalDuration(),o),this.reversed(!0).paused(!1)},r.pause=function(i,o){return i!=null&&this.seek(i,o),this.paused(!0)},r.resume=function(){return this.paused(!1)},r.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Zl:0)),this):this._rts<0},r.invalidate=function(){return this._initted=this._act=0,this._zTime=-Zl,this},r.isActive=function(){var i=this.parent||this._dp,o=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=o&&a<this.endTime(!0)-Zl)},r.eventCallback=function(i,o,a){var l=this.vars;return arguments.length>1?(o?(l[i]=o,a&&(l[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=o)):delete l[i],this):l[i]},r.then=function(i){var o=this;return new Promise(function(a){var l=du(i)?i:wk,t=function(){var f=o.then;o.then=null,du(l)&&(l=l(o))&&(l.then||l===o)&&(o.then=f),a(l),o.then=f};o._initted&&o.totalProgress()===1&&o._ts>=0||!o._tTime&&o._ts<0?t():o._prom=t})},r.kill=function(){sv(this)},n}();op(Vv.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Zl,_prom:0,_ps:!1,_rts:1});var Kf=function(n){uk(r,n);function r(i,o){var a;return i===void 0&&(i={}),a=n.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=xd(i.sortChildren),Yc&&lm(i.parent||Yc,Rm(a),o),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&Ek(Rm(a),i.scrollTrigger),a}var e=r.prototype;return e.to=function(o,a,l){return _v(0,arguments,this),this},e.from=function(o,a,l){return _v(1,arguments,this),this},e.fromTo=function(o,a,l,t){return _v(2,arguments,this),this},e.set=function(o,a,l){return a.duration=0,a.parent=this,yv(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Wu(o,a,Dp(this,l),1),this},e.call=function(o,a,l){return lm(this,Wu.delayedCall(0,o,a),l)},e.staggerTo=function(o,a,l,t,h,f,p){return l.duration=a,l.stagger=l.stagger||t,l.onComplete=f,l.onCompleteParams=p,l.parent=this,new Wu(o,l,Dp(this,h)),this},e.staggerFrom=function(o,a,l,t,h,f,p){return l.runBackwards=1,yv(l).immediateRender=xd(l.immediateRender),this.staggerTo(o,a,l,t,h,f,p)},e.staggerFromTo=function(o,a,l,t,h,f,p,_){return t.startAt=l,yv(t).immediateRender=xd(t.immediateRender),this.staggerTo(o,a,t,h,f,p,_)},e.render=function(o,a,l){var t=this._time,h=this._dirty?this.totalDuration():this._tDur,f=this._dur,p=o<=0?0:$u(o),_=this._zTime<0!=o<0&&(this._initted||!f),g,m,b,x,v,S,B,F,O,V,X,Q;if(this!==Yc&&p>h&&o>=0&&(p=h),p!==this._tTime||l||_){if(t!==this._time&&f&&(p+=this._time-t,o+=this._time-t),g=p,O=this._start,F=this._ts,S=!F,_&&(f||(t=this._zTime),(o||!a)&&(this._zTime=o)),this._repeat){if(X=this._yoyo,v=f+this._rDelay,this._repeat<-1&&o<0)return this.totalTime(v*100+o,a,l);if(g=$u(p%v),p===h?(x=this._repeat,g=f):(V=$u(p/v),x=~~V,x&&x===V&&(g=f,x--),g>f&&(g=f)),V=Cy(this._tTime,v),!t&&this._tTime&&V!==x&&this._tTime-V*v-this._dur<=0&&(V=x),X&&x&1&&(g=f-g,Q=1),x!==V&&!this._lock){var ee=X&&V&1,ne=ee===(X&&x&1);if(x<V&&(ee=!ee),t=ee?0:p%f?f:p,this._lock=1,this.render(t||(Q?0:$u(x*v)),a,!f)._lock=0,this._tTime=p,!a&&this.parent&&tp(this,"onRepeat"),this.vars.repeatRefresh&&!Q&&(this.invalidate()._lock=1),t&&t!==this._time||S!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,h=this._tDur,ne&&(this._lock=2,t=ee?f:-1e-4,this.render(t,!0),this.vars.repeatRefresh&&!Q&&this.invalidate()),this._lock=0,!this._ts&&!S)return this;zk(this,Q)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(B=eW(this,$u(t),$u(g)),B&&(p-=g-(g=B._start))),this._tTime=p,this._time=g,this._act=!F,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=o,t=0),!t&&p&&!a&&!V&&(tp(this,"onStart"),this._tTime!==p))return this;if(g>=t&&o>=0)for(m=this._first;m;){if(b=m._next,(m._act||g>=m._start)&&m._ts&&B!==m){if(m.parent!==this)return this.render(o,a,l);if(m.render(m._ts>0?(g-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(g-m._start)*m._ts,a,l),g!==this._time||!this._ts&&!S){B=0,b&&(p+=this._zTime=-Zl);break}}m=b}else{m=this._last;for(var Ae=o<0?o:g;m;){if(b=m._prev,(m._act||Ae<=m._end)&&m._ts&&B!==m){if(m.parent!==this)return this.render(o,a,l);if(m.render(m._ts>0?(Ae-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(Ae-m._start)*m._ts,a,l||qh&&LE(m)),g!==this._time||!this._ts&&!S){B=0,b&&(p+=this._zTime=Ae?-Zl:Zl);break}}m=b}}if(B&&!a&&(this.pause(),B.render(g>=t?0:-Zl)._zTime=g>=t?1:-1,this._ts))return this._start=O,A5(this),this.render(o,a,l);this._onUpdate&&!a&&tp(this,"onUpdate",!0),(p===h&&this._tTime>=this.totalDuration()||!p&&t)&&(O===this._start||Math.abs(F)!==Math.abs(this._ts))&&(this._lock||((o||!f)&&(p===h&&this._ts>0||!p&&this._ts<0)&&Xg(this,1),!a&&!(o<0&&!t)&&(p||t||!h)&&(tp(this,p===h&&o>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<h&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(o,a){var l=this;if(Zm(a)||(a=Dp(this,a,o)),!(o instanceof Vv)){if(If(o))return o.forEach(function(t){return l.add(t,a)}),this;if(Oh(o))return this.addLabel(o,a);if(du(o))o=Wu.delayedCall(0,o);else return this}return this!==o?lm(this,o,a):this},e.getChildren=function(o,a,l,t){o===void 0&&(o=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),t===void 0&&(t=-jp);for(var h=[],f=this._first;f;)f._start>=t&&(f instanceof Wu?a&&h.push(f):(l&&h.push(f),o&&h.push.apply(h,f.getChildren(!0,a,l)))),f=f._next;return h},e.getById=function(o){for(var a=this.getChildren(1,1,1),l=a.length;l--;)if(a[l].vars.id===o)return a[l]},e.remove=function(o){return Oh(o)?this.removeLabel(o):du(o)?this.killTweensOf(o):(o.parent===this&&p5(this,o),o===this._recent&&(this._recent=this._last),n1(this))},e.totalTime=function(o,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=$u(ep.time-(this._ts>0?o/this._ts:(this.totalDuration()-o)/-this._ts))),n.prototype.totalTime.call(this,o,a),this._forcing=0,this):this._tTime},e.addLabel=function(o,a){return this.labels[o]=Dp(this,a),this},e.removeLabel=function(o){return delete this.labels[o],this},e.addPause=function(o,a,l){var t=Wu.delayedCall(0,a||zv,l);return t.data="isPause",this._hasPause=1,lm(this,t,Dp(this,o))},e.removePause=function(o){var a=this._first;for(o=Dp(this,o);a;)a._start===o&&a.data==="isPause"&&Xg(a),a=a._next},e.killTweensOf=function(o,a,l){for(var t=this.getTweensOf(o,l),h=t.length;h--;)Lg!==t[h]&&t[h].kill(o,a);return this},e.getTweensOf=function(o,a){for(var l=[],t=Up(o),h=this._first,f=Zm(a),p;h;)h instanceof Wu?$G(h._targets,t)&&(f?(!Lg||h._initted&&h._ts)&&h.globalTime(0)<=a&&h.globalTime(h.totalDuration())>a:!a||h.isActive())&&l.push(h):(p=h.getTweensOf(t,a)).length&&l.push.apply(l,p),h=h._next;return l},e.tweenTo=function(o,a){a=a||{};var l=this,t=Dp(l,o),h=a,f=h.startAt,p=h.onStart,_=h.onStartParams,g=h.immediateRender,m,b=Wu.to(l,op({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:t,overwrite:"auto",duration:a.duration||Math.abs((t-(f&&"time"in f?f.time:l._time))/l.timeScale())||Zl,onStart:function(){if(l.pause(),!m){var v=a.duration||Math.abs((t-(f&&"time"in f?f.time:l._time))/l.timeScale());b._dur!==v&&Ey(b,v,0,1).render(b._time,!0,!0),m=1}p&&p.apply(b,_||[])}},a));return g?b.render(0):b},e.tweenFromTo=function(o,a,l){return this.tweenTo(a,op({startAt:{time:Dp(this,o)}},l))},e.recent=function(){return this._recent},e.nextLabel=function(o){return o===void 0&&(o=this._time),JI(this,Dp(this,o))},e.previousLabel=function(o){return o===void 0&&(o=this._time),JI(this,Dp(this,o),1)},e.currentLabel=function(o){return arguments.length?this.seek(o,!0):this.previousLabel(this._time+Zl)},e.shiftChildren=function(o,a,l){l===void 0&&(l=0);for(var t=this._first,h=this.labels,f;t;)t._start>=l&&(t._start+=o,t._end+=o),t=t._next;if(a)for(f in h)h[f]>=l&&(h[f]+=o);return n1(this)},e.invalidate=function(o){var a=this._first;for(this._lock=0;a;)a.invalidate(o),a=a._next;return n.prototype.invalidate.call(this,o)},e.clear=function(o){o===void 0&&(o=!0);for(var a=this._first,l;a;)l=a._next,this.remove(a),a=l;return this._dp&&(this._time=this._tTime=this._pTime=0),o&&(this.labels={}),n1(this)},e.totalDuration=function(o){var a=0,l=this,t=l._last,h=jp,f,p,_;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-o:o));if(l._dirty){for(_=l.parent;t;)f=t._prev,t._dirty&&t.totalDuration(),p=t._start,p>h&&l._sort&&t._ts&&!l._lock?(l._lock=1,lm(l,t,p-t._delay,1)._lock=0):h=p,p<0&&t._ts&&(a-=p,(!_&&!l._dp||_&&_.smoothChildTiming)&&(l._start+=p/l._ts,l._time-=p,l._tTime-=p),l.shiftChildren(-p,!1,-1/0),h=0),t._end>a&&t._ts&&(a=t._end),t=f;Ey(l,l===Yc&&l._time>a?l._time:a,1,1),l._dirty=0}return l._tDur},r.updateRoot=function(o){if(Yc._ts&&(bk(Yc,Bw(o,Yc)),_k=ep.frame),ep.frame>=qI){qI+=np.autoSleep||120;var a=Yc._first;if((!a||!a._ts)&&np.autoSleep&&ep._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||ep.sleep()}}},r}(Vv);op(Kf.prototype,{_lock:0,_hasPause:0,_forcing:0});var mW=function(r,e,i,o,a,l,t){var h=new Sd(this._pt,r,e,0,1,qk,null,a),f=0,p=0,_,g,m,b,x,v,S,B;for(h.b=i,h.e=o,i+="",o+="",(S=~o.indexOf("random("))&&(o=Hv(o)),l&&(B=[i,o],l(B,r,e),i=B[0],o=B[1]),g=i.match(h4)||[];_=h4.exec(o);)b=_[0],x=o.substring(f,_.index),m?m=(m+1)%5:x.substr(-5)==="rgba("&&(m=1),b!==g[p++]&&(v=parseFloat(g[p-1])||0,h._pt={_next:h._pt,p:x||p===1?x:",",s:v,c:b.charAt(1)==="="?gy(v,b)-v:parseFloat(b)-v,m:m&&m<4?Math.round:0},f=h4.lastIndex);return h.c=f<o.length?o.substring(f,o.length):"",h.fp=t,(pk.test(o)||S)&&(h.e=0),this._pt=h,h},kE=function(r,e,i,o,a,l,t,h,f,p){du(o)&&(o=o(a||0,r,l));var _=r[e],g=i!=="get"?i:du(_)?f?r[e.indexOf("set")||!du(r["get"+e.substr(3)])?e:"get"+e.substr(3)](f):r[e]():_,m=du(_)?f?bW:$k:DE,b;if(Oh(o)&&(~o.indexOf("random(")&&(o=Hv(o)),o.charAt(1)==="="&&(b=gy(g,o)+(Cf(g)||0),(b||b===0)&&(o=b))),!p||g!==o||QS)return!isNaN(g*o)&&o!==""?(b=new Sd(this._pt,r,e,+g||0,o-(g||0),typeof _=="boolean"?wW:Kk,0,m),f&&(b.fp=f),t&&b.modifier(t,this,r),this._pt=b):(!_&&!(e in r)&&IE(e,o),mW.call(this,r,e,g,o,m,h||np.stringFilter,f))},gW=function(r,e,i,o,a){if(du(r)&&(r=vv(r,a,e,i,o)),!gm(r)||r.style&&r.nodeType||If(r)||fk(r))return Oh(r)?vv(r,a,e,i,o):r;var l={},t;for(t in r)l[t]=vv(r[t],a,e,i,o);return l},Vk=function(r,e,i,o,a,l){var t,h,f,p;if(Jd[r]&&(t=new Jd[r]).init(a,t.rawVars?e[r]:gW(e[r],o,a,l,i),i,o,l)!==!1&&(i._pt=h=new Sd(i._pt,a,r,0,1,t.render,t,0,t.priority),i!==fy))for(f=i._ptLookup[i._targets.indexOf(a)],p=t._props.length;p--;)f[t._props[p]]=h;return t},Lg,QS,OE=function n(r,e,i){var o=r.vars,a=o.ease,l=o.startAt,t=o.immediateRender,h=o.lazy,f=o.onUpdate,p=o.runBackwards,_=o.yoyoEase,g=o.keyframes,m=o.autoRevert,b=r._dur,x=r._startAt,v=r._targets,S=r.parent,B=S&&S.data==="nested"?S.vars.targets:v,F=r._overwrite==="auto"&&!CE,O=r.timeline,V,X,Q,ee,ne,Ae,fe,ce,G,Z,z,k,R;if(O&&(!g||!a)&&(a="none"),r._ease=i1(a,wy.ease),r._yEase=_?Uk(i1(_===!0?a:_,wy.ease)):0,_&&r._yoyo&&!r._repeat&&(_=r._yEase,r._yEase=r._ease,r._ease=_),r._from=!O&&!!o.runBackwards,!O||g&&!o.stagger){if(ce=v[0]?r1(v[0]).harness:0,k=ce&&o[ce.prop],V=Ew(o,ME),x&&(x._zTime<0&&x.progress(1),e<0&&p&&t&&!m?x.render(-1,!0):x.revert(p&&b?Kx:GG),x._lazy=0),l){if(Xg(r._startAt=Wu.set(v,op({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!x&&xd(h),startAt:null,delay:0,onUpdate:f&&function(){return tp(r,"onUpdate")},stagger:0},l))),r._startAt._dp=0,r._startAt._sat=r,e<0&&(qh||!t&&!m)&&r._startAt.revert(Kx),t&&b&&e<=0&&i<=0){e&&(r._zTime=e);return}}else if(p&&b&&!x){if(e&&(t=!1),Q=op({overwrite:!1,data:"isFromStart",lazy:t&&!x&&xd(h),immediateRender:t,stagger:0,parent:S},V),k&&(Q[ce.prop]=k),Xg(r._startAt=Wu.set(v,Q)),r._startAt._dp=0,r._startAt._sat=r,e<0&&(qh?r._startAt.revert(Kx):r._startAt.render(-1,!0)),r._zTime=e,!t)n(r._startAt,Zl,Zl);else if(!e)return}for(r._pt=r._ptCache=0,h=b&&xd(h)||h&&!b,X=0;X<v.length;X++){if(ne=v[X],fe=ne._gsap||PE(v)[X]._gsap,r._ptLookup[X]=Z={},RS[fe.id]&&Hg.length&&Cw(),z=B===v?X:B.indexOf(ne),ce&&(G=new ce).init(ne,k||V,r,z,B)!==!1&&(r._pt=ee=new Sd(r._pt,ne,G.name,0,1,G.render,G,0,G.priority),G._props.forEach(function(N){Z[N]=ee}),G.priority&&(Ae=1)),!ce||k)for(Q in V)Jd[Q]&&(G=Vk(Q,V,r,z,ne,B))?G.priority&&(Ae=1):Z[Q]=ee=kE.call(r,ne,Q,"get",V[Q],z,B,0,o.stringFilter);r._op&&r._op[X]&&r.kill(ne,r._op[X]),F&&r._pt&&(Lg=r,Yc.killTweensOf(ne,Z,r.globalTime(e)),R=!r.parent,Lg=0),r._pt&&h&&(RS[fe.id]=1)}Ae&&Yk(r),r._onInit&&r._onInit(r)}r._onUpdate=f,r._initted=(!r._op||r._pt)&&!R,g&&e<=0&&O.render(jp,!0,!0)},yW=function(r,e,i,o,a,l,t,h){var f=(r._pt&&r._ptCache||(r._ptCache={}))[e],p,_,g,m;if(!f)for(f=r._ptCache[e]=[],g=r._ptLookup,m=r._targets.length;m--;){if(p=g[m][e],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==e&&p.fp!==e;)p=p._next;if(!p)return QS=1,r.vars[e]="+=0",OE(r,t),QS=0,h?Uv(e+" not eligible for reset"):1;f.push(p)}for(m=f.length;m--;)_=f[m],p=_._pt||_,p.s=(o||o===0)&&!a?o:p.s+(o||0)+l*p.c,p.c=i-p.s,_.e&&(_.e=Cu(i)+Cf(_.e)),_.b&&(_.b=p.s+Cf(_.b))},_W=function(r,e){var i=r[0]?r1(r[0]).harness:0,o=i&&i.aliases,a,l,t,h;if(!o)return e;a=Sy({},e);for(l in o)if(l in a)for(h=o[l].split(","),t=h.length;t--;)a[h[t]]=a[l];return a},vW=function(r,e,i,o){var a=e.ease||o||"power1.inOut",l,t;if(If(e))t=i[r]||(i[r]=[]),e.forEach(function(h,f){return t.push({t:f/(e.length-1)*100,v:h,e:a})});else for(l in e)t=i[l]||(i[l]=[]),l==="ease"||t.push({t:parseFloat(r),v:e[l],e:a})},vv=function(r,e,i,o,a){return du(r)?r.call(e,i,o,a):Oh(r)&&~r.indexOf("random(")?Hv(r):r},Gk=FE+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Wk={};wd(Gk+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Wk[n]=1});var Wu=function(n){uk(r,n);function r(i,o,a,l){var t;typeof o=="number"&&(a.duration=o,o=a,a=null),t=n.call(this,l?o:yv(o))||this;var h=t.vars,f=h.duration,p=h.delay,_=h.immediateRender,g=h.stagger,m=h.overwrite,b=h.keyframes,x=h.defaults,v=h.scrollTrigger,S=h.yoyoEase,B=o.parent||Yc,F=(If(i)||fk(i)?Zm(i[0]):"length"in o)?[i]:Up(i),O,V,X,Q,ee,ne,Ae,fe;if(t._targets=F.length?PE(F):Uv("GSAP target "+i+" not found. https://gsap.com",!np.nullTargetWarn)||[],t._ptLookup=[],t._overwrite=m,b||g||mx(f)||mx(p)){if(o=t.vars,O=t.timeline=new Kf({data:"nested",defaults:x||{},targets:B&&B.data==="nested"?B.vars.targets:F}),O.kill(),O.parent=O._dp=Rm(t),O._start=0,g||mx(f)||mx(p)){if(Q=F.length,Ae=g&&Mk(g),gm(g))for(ee in g)~Gk.indexOf(ee)&&(fe||(fe={}),fe[ee]=g[ee]);for(V=0;V<Q;V++)X=Ew(o,Wk),X.stagger=0,S&&(X.yoyoEase=S),fe&&Sy(X,fe),ne=F[V],X.duration=+vv(f,Rm(t),V,ne,F),X.delay=(+vv(p,Rm(t),V,ne,F)||0)-t._delay,!g&&Q===1&&X.delay&&(t._delay=p=X.delay,t._start+=p,X.delay=0),O.to(ne,X,Ae?Ae(V,ne,F):0),O._ease=Ya.none;O.duration()?f=p=0:t.timeline=0}else if(b){yv(op(O.vars.defaults,{ease:"none"})),O._ease=i1(b.ease||o.ease||"none");var ce=0,G,Z,z;if(If(b))b.forEach(function(k){return O.to(F,k,">")}),O.duration();else{X={};for(ee in b)ee==="ease"||ee==="easeEach"||vW(ee,b[ee],X,b.easeEach);for(ee in X)for(G=X[ee].sort(function(k,R){return k.t-R.t}),ce=0,V=0;V<G.length;V++)Z=G[V],z={ease:Z.e,duration:(Z.t-(V?G[V-1].t:0))/100*f},z[ee]=Z.v,O.to(F,z,ce),ce+=z.duration;O.duration()<f&&O.to({},{duration:f-O.duration()})}}f||t.duration(f=O.duration())}else t.timeline=0;return m===!0&&!CE&&(Lg=Rm(t),Yc.killTweensOf(F),Lg=0),lm(B,Rm(t),a),o.reversed&&t.reverse(),o.paused&&t.paused(!0),(_||!f&&!b&&t._start===$u(B._time)&&xd(_)&&XG(Rm(t))&&B.data!=="nested")&&(t._tTime=-Zl,t.render(Math.max(0,-p)||0)),v&&Ek(Rm(t),v),t}var e=r.prototype;return e.render=function(o,a,l){var t=this._time,h=this._tDur,f=this._dur,p=o<0,_=o>h-Zl&&!p?h:o<Zl?0:o,g,m,b,x,v,S,B,F,O;if(!f)JG(this,o,a,l);else if(_!==this._tTime||!o||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(g=_,F=this.timeline,this._repeat){if(x=f+this._rDelay,this._repeat<-1&&p)return this.totalTime(x*100+o,a,l);if(g=$u(_%x),_===h?(b=this._repeat,g=f):(v=$u(_/x),b=~~v,b&&b===v?(g=f,b--):g>f&&(g=f)),S=this._yoyo&&b&1,S&&(O=this._yEase,g=f-g),v=Cy(this._tTime,x),g===t&&!l&&this._initted&&b===v)return this._tTime=_,this;b!==v&&(F&&this._yEase&&zk(F,S),this.vars.repeatRefresh&&!S&&!this._lock&&g!==x&&this._initted&&(this._lock=l=1,this.render($u(x*b),!0).invalidate()._lock=0))}if(!this._initted){if(Bk(this,p?o:g,l,a,_))return this._tTime=0,this;if(t!==this._time&&!(l&&this.vars.repeatRefresh&&b!==v))return this;if(f!==this._dur)return this.render(o,a,l)}if(this._tTime=_,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=B=(O||this._ease)(g/f),this._from&&(this.ratio=B=1-B),!t&&_&&!a&&!v&&(tp(this,"onStart"),this._tTime!==_))return this;for(m=this._pt;m;)m.r(B,m.d),m=m._next;F&&F.render(o<0?o:F._dur*F._ease(g/this._dur),a,l)||this._startAt&&(this._zTime=o),this._onUpdate&&!a&&(p&&NS(this,o,a,l),tp(this,"onUpdate")),this._repeat&&b!==v&&this.vars.onRepeat&&!a&&this.parent&&tp(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(p&&!this._onUpdate&&NS(this,o,!0,!0),(o||!f)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&Xg(this,1),!a&&!(p&&!t)&&(_||t||S)&&(tp(this,_===h?"onComplete":"onReverseComplete",!0),this._prom&&!(_<h&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(o){return(!o||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(o),n.prototype.invalidate.call(this,o)},e.resetTo=function(o,a,l,t,h){Qv||ep.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||OE(this,f),p=this._ease(f/this._dur),yW(this,o,a,l,t,p,f,h)?this.resetTo(o,a,l,t,1):(m5(this,0),this.parent||Sk(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(o,a){if(a===void 0&&(a="all"),!o&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?sv(this):this.scrollTrigger&&this.scrollTrigger.kill(!!qh),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(o,a,Lg&&Lg.vars.overwrite!==!0)._first||sv(this),this.parent&&l!==this.timeline.totalDuration()&&Ey(this,this._dur*this.timeline._tDur/l,0,1),this}var t=this._targets,h=o?Up(o):t,f=this._ptLookup,p=this._pt,_,g,m,b,x,v,S;if((!a||a==="all")&&qG(t,h))return a==="all"&&(this._pt=0),sv(this);for(_=this._op=this._op||[],a!=="all"&&(Oh(a)&&(x={},wd(a,function(B){return x[B]=1}),a=x),a=_W(t,a)),S=t.length;S--;)if(~h.indexOf(t[S])){g=f[S],a==="all"?(_[S]=a,b=g,m={}):(m=_[S]=_[S]||{},b=a);for(x in b)v=g&&g[x],v&&((!("kill"in v.d)||v.d.kill(x)===!0)&&p5(this,v,"_pt"),delete g[x]),m!=="all"&&(m[x]=1)}return this._initted&&!this._pt&&p&&sv(this),this},r.to=function(o,a){return new r(o,a,arguments[2])},r.from=function(o,a){return _v(1,arguments)},r.delayedCall=function(o,a,l,t){return new r(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:o,onComplete:a,onReverseComplete:a,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:t})},r.fromTo=function(o,a,l){return _v(2,arguments)},r.set=function(o,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new r(o,a)},r.killTweensOf=function(o,a,l){return Yc.killTweensOf(o,a,l)},r}(Vv);op(Wu.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});wd("staggerTo,staggerFrom,staggerFromTo",function(n){Wu[n]=function(){var r=new Kf,e=US.call(arguments,0);return e.splice(n==="staggerFromTo"?5:4,0,0),r[n].apply(r,e)}});var DE=function(r,e,i){return r[e]=i},$k=function(r,e,i){return r[e](i)},bW=function(r,e,i,o){return r[e](o.fp,i)},xW=function(r,e,i){return r.setAttribute(e,i)},RE=function(r,e){return du(r[e])?$k:EE(r[e])&&r.setAttribute?xW:DE},Kk=function(r,e){return e.set(e.t,e.p,Math.round((e.s+e.c*r)*1e6)/1e6,e)},wW=function(r,e){return e.set(e.t,e.p,!!(e.s+e.c*r),e)},qk=function(r,e){var i=e._pt,o="";if(!r&&e.b)o=e.b;else if(r===1&&e.e)o=e.e;else{for(;i;)o=i.p+(i.m?i.m(i.s+i.c*r):Math.round((i.s+i.c*r)*1e4)/1e4)+o,i=i._next;o+=e.c}e.set(e.t,e.p,o,e)},NE=function(r,e){for(var i=e._pt;i;)i.r(r,i.d),i=i._next},SW=function(r,e,i,o){for(var a=this._pt,l;a;)l=a._next,a.p===o&&a.modifier(r,e,i),a=l},CW=function(r){for(var e=this._pt,i,o;e;)o=e._next,e.p===r&&!e.op||e.op===r?p5(this,e,"_pt"):e.dep||(i=1),e=o;return!i},EW=function(r,e,i,o){o.mSet(r,e,o.m.call(o.tween,i,o.mt),o)},Yk=function(r){for(var e=r._pt,i,o,a,l;e;){for(i=e._next,o=a;o&&o.pr>e.pr;)o=o._next;(e._prev=o?o._prev:l)?e._prev._next=e:a=e,(e._next=o)?o._prev=e:l=e,e=i}r._pt=a},Sd=function(){function n(e,i,o,a,l,t,h,f,p){this.t=i,this.s=a,this.c=l,this.p=o,this.r=t||Kk,this.d=h||this,this.set=f||DE,this.pr=p||0,this._next=e,e&&(e._prev=this)}var r=n.prototype;return r.modifier=function(i,o,a){this.mSet=this.mSet||this.set,this.set=EW,this.m=i,this.mt=a,this.tween=o},n}();wd(FE+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return ME[n]=1});sp.TweenMax=sp.TweenLite=Wu;sp.TimelineLite=sp.TimelineMax=Kf;Yc=new Kf({sortChildren:!1,defaults:wy,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});np.stringFilter=jk;var s1=[],Yx={},BW=[],tM=0,TW=0,m4=function(r){return(Yx[r]||BW).map(function(e){return e()})},VS=function(){var r=Date.now(),e=[];r-tM>2&&(m4("matchMediaInit"),s1.forEach(function(i){var o=i.queries,a=i.conditions,l,t,h,f;for(t in o)l=om.matchMedia(o[t]).matches,l&&(h=1),l!==a[t]&&(a[t]=l,f=1);f&&(i.revert(),h&&e.push(i))}),m4("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(o){return i.add(null,o)})}),tM=r,m4("matchMedia"))},Xk=function(){function n(e,i){this.selector=i&&zS(i),this.data=[],this._r=[],this.isReverted=!1,this.id=TW++,e&&this.add(e)}var r=n.prototype;return r.add=function(i,o,a){du(i)&&(a=o,o=i,i=du);var l=this,t=function(){var f=Nc,p=l.selector,_;return f&&f!==l&&f.data.push(l),a&&(l.selector=zS(a)),Nc=l,_=o.apply(l,arguments),du(_)&&l._r.push(_),Nc=f,l.selector=p,l.isReverted=!1,_};return l.last=t,i===du?t(l,function(h){return l.add(null,h)}):i?l[i]=t:t},r.ignore=function(i){var o=Nc;Nc=null,i(this),Nc=o},r.getTweens=function(){var i=[];return this.data.forEach(function(o){return o instanceof n?i.push.apply(i,o.getTweens()):o instanceof Wu&&!(o.parent&&o.parent.data==="nested")&&i.push(o)}),i},r.clear=function(){this._r.length=this.data.length=0},r.kill=function(i,o){var a=this;if(i?function(){for(var t=a.getTweens(),h=a.data.length,f;h--;)f=a.data[h],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(p){return t.splice(t.indexOf(p),1)}));for(t.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,_){return _.g-p.g||-1/0}).forEach(function(p){return p.t.revert(i)}),h=a.data.length;h--;)f=a.data[h],f instanceof Kf?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof Wu)&&f.revert&&f.revert(i);a._r.forEach(function(p){return p(i,a)}),a.isReverted=!0}():this.data.forEach(function(t){return t.kill&&t.kill()}),this.clear(),o)for(var l=s1.length;l--;)s1[l].id===this.id&&s1.splice(l,1)},r.revert=function(i){this.kill(i||{})},n}(),IW=function(){function n(e){this.contexts=[],this.scope=e,Nc&&Nc.data.push(this)}var r=n.prototype;return r.add=function(i,o,a){gm(i)||(i={matches:i});var l=new Xk(0,a||this.scope),t=l.conditions={},h,f,p;Nc&&!l.selector&&(l.selector=Nc.selector),this.contexts.push(l),o=l.add("onMatch",o),l.queries=i;for(f in i)f==="all"?p=1:(h=om.matchMedia(i[f]),h&&(s1.indexOf(l)<0&&s1.push(l),(t[f]=h.matches)&&(p=1),h.addListener?h.addListener(VS):h.addEventListener("change",VS)));return p&&o(l,function(_){return l.add(null,_)}),this},r.revert=function(i){this.kill(i||{})},r.kill=function(i){this.contexts.forEach(function(o){return o.kill(i,!0)})},n}(),Tw={registerPlugin:function(){for(var r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];e.forEach(function(o){return Dk(o)})},timeline:function(r){return new Kf(r)},getTweensOf:function(r,e){return Yc.getTweensOf(r,e)},getProperty:function(r,e,i,o){Oh(r)&&(r=Up(r)[0]);var a=r1(r||{}).get,l=i?wk:xk;return i==="native"&&(i=""),r&&(e?l((Jd[e]&&Jd[e].get||a)(r,e,i,o)):function(t,h,f){return l((Jd[t]&&Jd[t].get||a)(r,t,h,f))})},quickSetter:function(r,e,i){if(r=Up(r),r.length>1){var o=r.map(function(p){return Mf.quickSetter(p,e,i)}),a=o.length;return function(p){for(var _=a;_--;)o[_](p)}}r=r[0]||{};var l=Jd[e],t=r1(r),h=t.harness&&(t.harness.aliases||{})[e]||e,f=l?function(p){var _=new l;fy._pt=0,_.init(r,i?p+i:p,fy,0,[r]),_.render(1,_),fy._pt&&NE(1,fy)}:t.set(r,h);return l?f:function(p){return f(r,h,i?p+i:p,t,1)}},quickTo:function(r,e,i){var o,a=Mf.to(r,op((o={},o[e]="+=0.1",o.paused=!0,o.stagger=0,o),i||{})),l=function(h,f,p){return a.resetTo(e,h,f,p)};return l.tween=a,l},isTweening:function(r){return Yc.getTweensOf(r,!0).length>0},defaults:function(r){return r&&r.ease&&(r.ease=i1(r.ease,wy.ease)),YI(wy,r||{})},config:function(r){return YI(np,r||{})},registerEffect:function(r){var e=r.name,i=r.effect,o=r.plugins,a=r.defaults,l=r.extendTimeline;(o||"").split(",").forEach(function(t){return t&&!Jd[t]&&!sp[t]&&Uv(e+" effect requires "+t+" plugin.")}),f4[e]=function(t,h,f){return i(Up(t),op(h||{},a),f)},l&&(Kf.prototype[e]=function(t,h,f){return this.add(f4[e](t,gm(h)?h:(f=h)&&{},this),f)})},registerEase:function(r,e){Ya[r]=i1(e)},parseEase:function(r,e){return arguments.length?i1(r,e):Ya},getById:function(r){return Yc.getById(r)},exportRoot:function(r,e){r===void 0&&(r={});var i=new Kf(r),o,a;for(i.smoothChildTiming=xd(r.smoothChildTiming),Yc.remove(i),i._dp=0,i._time=i._tTime=Yc._time,o=Yc._first;o;)a=o._next,(e||!(!o._dur&&o instanceof Wu&&o.vars.onComplete===o._targets[0]))&&lm(i,o,o._start-o._delay),o=a;return lm(Yc,i,0),i},context:function(r,e){return r?new Xk(r,e):Nc},matchMedia:function(r){return new IW(r)},matchMediaRefresh:function(){return s1.forEach(function(r){var e=r.conditions,i,o;for(o in e)e[o]&&(e[o]=!1,i=1);i&&r.revert()})||VS()},addEventListener:function(r,e){var i=Yx[r]||(Yx[r]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(r,e){var i=Yx[r],o=i&&i.indexOf(e);o>=0&&i.splice(o,1)},utils:{wrap:aW,wrapYoyo:lW,distribute:Mk,random:Pk,snap:Fk,normalize:oW,getUnit:Cf,clamp:rW,splitColor:Rk,toArray:Up,selector:zS,mapRange:kk,pipe:iW,unitize:sW,interpolate:cW,shuffle:Ik},install:gk,effects:f4,ticker:ep,updateRoot:Kf.updateRoot,plugins:Jd,globalTimeline:Yc,core:{PropTween:Sd,globals:yk,Tween:Wu,Timeline:Kf,Animation:Vv,getCache:r1,_removeLinkedListItem:p5,reverting:function(){return qh},context:function(r){return r&&Nc&&(Nc.data.push(r),r._ctx=Nc),Nc},suppressOverwrites:function(r){return CE=r}}};wd("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Tw[n]=Wu[n]});ep.add(Kf.updateRoot);fy=Tw.to({},{duration:0});var MW=function(r,e){for(var i=r._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},FW=function(r,e){var i=r._targets,o,a,l;for(o in e)for(a=i.length;a--;)l=r._ptLookup[a][o],l&&(l=l.d)&&(l._pt&&(l=MW(l,o)),l&&l.modifier&&l.modifier(e[o],r,i[a],o))},g4=function(r,e){return{name:r,headless:1,rawVars:1,init:function(o,a,l){l._onInit=function(t){var h,f;if(Oh(a)&&(h={},wd(a,function(p){return h[p]=1}),a=h),e){h={};for(f in a)h[f]=e(a[f]);a=h}FW(t,a)}}}},Mf=Tw.registerPlugin({name:"attr",init:function(r,e,i,o,a){var l,t,h;this.tween=i;for(l in e)h=r.getAttribute(l)||"",t=this.add(r,"setAttribute",(h||0)+"",e[l],o,a,0,0,l),t.op=l,t.b=h,this._props.push(l)},render:function(r,e){for(var i=e._pt;i;)qh?i.set(i.t,i.p,i.b,i):i.r(r,i.d),i=i._next}},{name:"endArray",headless:1,init:function(r,e){for(var i=e.length;i--;)this.add(r,i,r[i]||0,e[i],0,0,0,0,0,1)}},g4("roundProps",HS),g4("modifiers"),g4("snap",Fk))||Tw;Wu.version=Kf.version=Mf.version="3.13.0";mk=1;BE()&&By();Ya.Power0;Ya.Power1;Ya.Power2;Ya.Power3;Ya.Power4;Ya.Linear;Ya.Quad;Ya.Cubic;Ya.Quart;Ya.Quint;Ya.Strong;Ya.Elastic;Ya.Back;Ya.SteppedEase;Ya.Bounce;Ya.Sine;Ya.Expo;Ya.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var rM,kg,yy,jE,$0,nM,UE,PW=function(){return typeof window<"u"},Jm={},N0=180/Math.PI,_y=Math.PI/180,J1=Math.atan2,iM=1e8,zE=/([A-Z])/g,LW=/(left|right|width|margin|padding|x)/i,kW=/[\s,\(]\S/,um={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},GS=function(r,e){return e.set(e.t,e.p,Math.round((e.s+e.c*r)*1e4)/1e4+e.u,e)},OW=function(r,e){return e.set(e.t,e.p,r===1?e.e:Math.round((e.s+e.c*r)*1e4)/1e4+e.u,e)},DW=function(r,e){return e.set(e.t,e.p,r?Math.round((e.s+e.c*r)*1e4)/1e4+e.u:e.b,e)},RW=function(r,e){var i=e.s+e.c*r;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},Zk=function(r,e){return e.set(e.t,e.p,r?e.e:e.b,e)},Jk=function(r,e){return e.set(e.t,e.p,r!==1?e.b:e.e,e)},NW=function(r,e,i){return r.style[e]=i},jW=function(r,e,i){return r.style.setProperty(e,i)},UW=function(r,e,i){return r._gsap[e]=i},zW=function(r,e,i){return r._gsap.scaleX=r._gsap.scaleY=i},HW=function(r,e,i,o,a){var l=r._gsap;l.scaleX=l.scaleY=i,l.renderTransform(a,l)},QW=function(r,e,i,o,a){var l=r._gsap;l[e]=i,l.renderTransform(a,l)},Xc="transform",Cd=Xc+"Origin",VW=function n(r,e){var i=this,o=this.target,a=o.style,l=o._gsap;if(r in Jm&&a){if(this.tfm=this.tfm||{},r!=="transform")r=um[r]||r,~r.indexOf(",")?r.split(",").forEach(function(t){return i.tfm[t]=jm(o,t)}):this.tfm[r]=l.x?l[r]:jm(o,r),r===Cd&&(this.tfm.zOrigin=l.zOrigin);else return um.transform.split(",").forEach(function(t){return n.call(i,t,e)});if(this.props.indexOf(Xc)>=0)return;l.svg&&(this.svgo=o.getAttribute("data-svg-origin"),this.props.push(Cd,e,"")),r=Xc}(a||e)&&this.props.push(r,e,a[r])},eO=function(r){r.translate&&(r.removeProperty("translate"),r.removeProperty("scale"),r.removeProperty("rotate"))},GW=function(){var r=this.props,e=this.target,i=e.style,o=e._gsap,a,l;for(a=0;a<r.length;a+=3)r[a+1]?r[a+1]===2?e[r[a]](r[a+2]):e[r[a]]=r[a+2]:r[a+2]?i[r[a]]=r[a+2]:i.removeProperty(r[a].substr(0,2)==="--"?r[a]:r[a].replace(zE,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)o[l]=this.tfm[l];o.svg&&(o.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),a=UE(),(!a||!a.isStart)&&!i[Xc]&&(eO(i),o.zOrigin&&i[Cd]&&(i[Cd]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},tO=function(r,e){var i={target:r,props:[],revert:GW,save:VW};return r._gsap||Mf.core.getCache(r),e&&r.style&&r.nodeType&&e.split(",").forEach(function(o){return i.save(o)}),i},rO,WS=function(r,e){var i=kg.createElementNS?kg.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),r):kg.createElement(r);return i&&i.style?i:kg.createElement(r)},zp=function n(r,e,i){var o=getComputedStyle(r);return o[e]||o.getPropertyValue(e.replace(zE,"-$1").toLowerCase())||o.getPropertyValue(e)||!i&&n(r,Ty(e)||e,1)||""},sM="O,Moz,ms,Ms,Webkit".split(","),Ty=function(r,e,i){var o=e||$0,a=o.style,l=5;if(r in a&&!i)return r;for(r=r.charAt(0).toUpperCase()+r.substr(1);l--&&!(sM[l]+r in a););return l<0?null:(l===3?"ms":l>=0?sM[l]:"")+r},$S=function(){PW()&&window.document&&(rM=window,kg=rM.document,yy=kg.documentElement,$0=WS("div")||{style:{}},WS("div"),Xc=Ty(Xc),Cd=Xc+"Origin",$0.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",rO=!!Ty("perspective"),UE=Mf.core.reverting,jE=1)},oM=function(r){var e=r.ownerSVGElement,i=WS("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),o=r.cloneNode(!0),a;o.style.display="block",i.appendChild(o),yy.appendChild(i);try{a=o.getBBox()}catch{}return i.removeChild(o),yy.removeChild(i),a},aM=function(r,e){for(var i=e.length;i--;)if(r.hasAttribute(e[i]))return r.getAttribute(e[i])},nO=function(r){var e,i;try{e=r.getBBox()}catch{e=oM(r),i=1}return e&&(e.width||e.height)||i||(e=oM(r)),e&&!e.width&&!e.x&&!e.y?{x:+aM(r,["x","cx","x1"])||0,y:+aM(r,["y","cy","y1"])||0,width:0,height:0}:e},iO=function(r){return!!(r.getCTM&&(!r.parentNode||r.ownerSVGElement)&&nO(r))},A1=function(r,e){if(e){var i=r.style,o;e in Jm&&e!==Cd&&(e=Xc),i.removeProperty?(o=e.substr(0,2),(o==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(o==="--"?e:e.replace(zE,"-$1").toLowerCase())):i.removeAttribute(e)}},Og=function(r,e,i,o,a,l){var t=new Sd(r._pt,e,i,0,1,l?Jk:Zk);return r._pt=t,t.b=o,t.e=a,r._props.push(i),t},lM={deg:1,rad:1,turn:1},WW={grid:1,flex:1},Zg=function n(r,e,i,o){var a=parseFloat(i)||0,l=(i+"").trim().substr((a+"").length)||"px",t=$0.style,h=LW.test(e),f=r.tagName.toLowerCase()==="svg",p=(f?"client":"offset")+(h?"Width":"Height"),_=100,g=o==="px",m=o==="%",b,x,v,S;if(o===l||!a||lM[o]||lM[l])return a;if(l!=="px"&&!g&&(a=n(r,e,i,"px")),S=r.getCTM&&iO(r),(m||l==="%")&&(Jm[e]||~e.indexOf("adius")))return b=S?r.getBBox()[h?"width":"height"]:r[p],Cu(m?a/b*_:a/100*b);if(t[h?"width":"height"]=_+(g?l:o),x=o!=="rem"&&~e.indexOf("adius")||o==="em"&&r.appendChild&&!f?r:r.parentNode,S&&(x=(r.ownerSVGElement||{}).parentNode),(!x||x===kg||!x.appendChild)&&(x=kg.body),v=x._gsap,v&&m&&v.width&&h&&v.time===ep.time&&!v.uncache)return Cu(a/v.width*_);if(m&&(e==="height"||e==="width")){var B=r.style[e];r.style[e]=_+o,b=r[p],B?r.style[e]=B:A1(r,e)}else(m||l==="%")&&!WW[zp(x,"display")]&&(t.position=zp(r,"position")),x===r&&(t.position="static"),x.appendChild($0),b=$0[p],x.removeChild($0),t.position="absolute";return h&&m&&(v=r1(x),v.time=ep.time,v.width=x[p]),Cu(g?b*a/_:b&&a?_/b*a:0)},jm=function(r,e,i,o){var a;return jE||$S(),e in um&&e!=="transform"&&(e=um[e],~e.indexOf(",")&&(e=e.split(",")[0])),Jm[e]&&e!=="transform"?(a=Wv(r,o),a=e!=="transformOrigin"?a[e]:a.svg?a.origin:Mw(zp(r,Cd))+" "+a.zOrigin+"px"):(a=r.style[e],(!a||a==="auto"||o||~(a+"").indexOf("calc("))&&(a=Iw[e]&&Iw[e](r,e,i)||zp(r,e)||vk(r,e)||(e==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Zg(r,e,a,i)+i:a},$W=function(r,e,i,o){if(!i||i==="none"){var a=Ty(e,r,1),l=a&&zp(r,a,1);l&&l!==i?(e=a,i=l):e==="borderColor"&&(i=zp(r,"borderTopColor"))}var t=new Sd(this._pt,r.style,e,0,1,qk),h=0,f=0,p,_,g,m,b,x,v,S,B,F,O,V;if(t.b=i,t.e=o,i+="",o+="",o.substring(0,6)==="var(--"&&(o=zp(r,o.substring(4,o.indexOf(")")))),o==="auto"&&(x=r.style[e],r.style[e]=o,o=zp(r,e)||o,x?r.style[e]=x:A1(r,e)),p=[i,o],jk(p),i=p[0],o=p[1],g=i.match(hy)||[],V=o.match(hy)||[],V.length){for(;_=hy.exec(o);)v=_[0],B=o.substring(h,_.index),b?b=(b+1)%5:(B.substr(-5)==="rgba("||B.substr(-5)==="hsla(")&&(b=1),v!==(x=g[f++]||"")&&(m=parseFloat(x)||0,O=x.substr((m+"").length),v.charAt(1)==="="&&(v=gy(m,v)+O),S=parseFloat(v),F=v.substr((S+"").length),h=hy.lastIndex-F.length,F||(F=F||np.units[e]||O,h===o.length&&(o+=F,t.e+=F)),O!==F&&(m=Zg(r,e,x,F)||0),t._pt={_next:t._pt,p:B||f===1?B:",",s:m,c:S-m,m:b&&b<4||e==="zIndex"?Math.round:0});t.c=h<o.length?o.substring(h,o.length):""}else t.r=e==="display"&&o==="none"?Jk:Zk;return pk.test(o)&&(t.e=0),this._pt=t,t},cM={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},KW=function(r){var e=r.split(" "),i=e[0],o=e[1]||"50%";return(i==="top"||i==="bottom"||o==="left"||o==="right")&&(r=i,i=o,o=r),e[0]=cM[i]||i,e[1]=cM[o]||o,e.join(" ")},qW=function(r,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,o=i.style,a=e.u,l=i._gsap,t,h,f;if(a==="all"||a===!0)o.cssText="",h=1;else for(a=a.split(","),f=a.length;--f>-1;)t=a[f],Jm[t]&&(h=1,t=t==="transformOrigin"?Cd:Xc),A1(i,t);h&&(A1(i,Xc),l&&(l.svg&&i.removeAttribute("transform"),o.scale=o.rotate=o.translate="none",Wv(i,1),l.uncache=1,eO(o)))}},Iw={clearProps:function(r,e,i,o,a){if(a.data!=="isFromStart"){var l=r._pt=new Sd(r._pt,e,i,0,0,qW);return l.u=o,l.pr=-10,l.tween=a,r._props.push(i),1}}},Gv=[1,0,0,1,0,0],sO={},oO=function(r){return r==="matrix(1, 0, 0, 1, 0, 0)"||r==="none"||!r},uM=function(r){var e=zp(r,Xc);return oO(e)?Gv:e.substr(7).match(dk).map(Cu)},HE=function(r,e){var i=r._gsap||r1(r),o=r.style,a=uM(r),l,t,h,f;return i.svg&&r.getAttribute("transform")?(h=r.transform.baseVal.consolidate().matrix,a=[h.a,h.b,h.c,h.d,h.e,h.f],a.join(",")==="1,0,0,1,0,0"?Gv:a):(a===Gv&&!r.offsetParent&&r!==yy&&!i.svg&&(h=o.display,o.display="block",l=r.parentNode,(!l||!r.offsetParent&&!r.getBoundingClientRect().width)&&(f=1,t=r.nextElementSibling,yy.appendChild(r)),a=uM(r),h?o.display=h:A1(r,"display"),f&&(t?l.insertBefore(r,t):l?l.appendChild(r):yy.removeChild(r))),e&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},KS=function(r,e,i,o,a,l){var t=r._gsap,h=a||HE(r,!0),f=t.xOrigin||0,p=t.yOrigin||0,_=t.xOffset||0,g=t.yOffset||0,m=h[0],b=h[1],x=h[2],v=h[3],S=h[4],B=h[5],F=e.split(" "),O=parseFloat(F[0])||0,V=parseFloat(F[1])||0,X,Q,ee,ne;i?h!==Gv&&(Q=m*v-b*x)&&(ee=O*(v/Q)+V*(-x/Q)+(x*B-v*S)/Q,ne=O*(-b/Q)+V*(m/Q)-(m*B-b*S)/Q,O=ee,V=ne):(X=nO(r),O=X.x+(~F[0].indexOf("%")?O/100*X.width:O),V=X.y+(~(F[1]||F[0]).indexOf("%")?V/100*X.height:V)),o||o!==!1&&t.smooth?(S=O-f,B=V-p,t.xOffset=_+(S*m+B*x)-S,t.yOffset=g+(S*b+B*v)-B):t.xOffset=t.yOffset=0,t.xOrigin=O,t.yOrigin=V,t.smooth=!!o,t.origin=e,t.originIsAbsolute=!!i,r.style[Cd]="0px 0px",l&&(Og(l,t,"xOrigin",f,O),Og(l,t,"yOrigin",p,V),Og(l,t,"xOffset",_,t.xOffset),Og(l,t,"yOffset",g,t.yOffset)),r.setAttribute("data-svg-origin",O+" "+V)},Wv=function(r,e){var i=r._gsap||new Qk(r);if("x"in i&&!e&&!i.uncache)return i;var o=r.style,a=i.scaleX<0,l="px",t="deg",h=getComputedStyle(r),f=zp(r,Cd)||"0",p,_,g,m,b,x,v,S,B,F,O,V,X,Q,ee,ne,Ae,fe,ce,G,Z,z,k,R,N,U,Y,de,J,xe,Te,Ue;return p=_=g=x=v=S=B=F=O=0,m=b=1,i.svg=!!(r.getCTM&&iO(r)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(o[Xc]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[Xc]!=="none"?h[Xc]:"")),o.scale=o.rotate=o.translate="none"),Q=HE(r,i.svg),i.svg&&(i.uncache?(N=r.getBBox(),f=i.xOrigin-N.x+"px "+(i.yOrigin-N.y)+"px",R=""):R=!e&&r.getAttribute("data-svg-origin"),KS(r,R||f,!!R||i.originIsAbsolute,i.smooth!==!1,Q)),V=i.xOrigin||0,X=i.yOrigin||0,Q!==Gv&&(fe=Q[0],ce=Q[1],G=Q[2],Z=Q[3],p=z=Q[4],_=k=Q[5],Q.length===6?(m=Math.sqrt(fe*fe+ce*ce),b=Math.sqrt(Z*Z+G*G),x=fe||ce?J1(ce,fe)*N0:0,B=G||Z?J1(G,Z)*N0+x:0,B&&(b*=Math.abs(Math.cos(B*_y))),i.svg&&(p-=V-(V*fe+X*G),_-=X-(V*ce+X*Z))):(Ue=Q[6],xe=Q[7],Y=Q[8],de=Q[9],J=Q[10],Te=Q[11],p=Q[12],_=Q[13],g=Q[14],ee=J1(Ue,J),v=ee*N0,ee&&(ne=Math.cos(-ee),Ae=Math.sin(-ee),R=z*ne+Y*Ae,N=k*ne+de*Ae,U=Ue*ne+J*Ae,Y=z*-Ae+Y*ne,de=k*-Ae+de*ne,J=Ue*-Ae+J*ne,Te=xe*-Ae+Te*ne,z=R,k=N,Ue=U),ee=J1(-G,J),S=ee*N0,ee&&(ne=Math.cos(-ee),Ae=Math.sin(-ee),R=fe*ne-Y*Ae,N=ce*ne-de*Ae,U=G*ne-J*Ae,Te=Z*Ae+Te*ne,fe=R,ce=N,G=U),ee=J1(ce,fe),x=ee*N0,ee&&(ne=Math.cos(ee),Ae=Math.sin(ee),R=fe*ne+ce*Ae,N=z*ne+k*Ae,ce=ce*ne-fe*Ae,k=k*ne-z*Ae,fe=R,z=N),v&&Math.abs(v)+Math.abs(x)>359.9&&(v=x=0,S=180-S),m=Cu(Math.sqrt(fe*fe+ce*ce+G*G)),b=Cu(Math.sqrt(k*k+Ue*Ue)),ee=J1(z,k),B=Math.abs(ee)>2e-4?ee*N0:0,O=Te?1/(Te<0?-Te:Te):0),i.svg&&(R=r.getAttribute("transform"),i.forceCSS=r.setAttribute("transform","")||!oO(zp(r,Xc)),R&&r.setAttribute("transform",R))),Math.abs(B)>90&&Math.abs(B)<270&&(a?(m*=-1,B+=x<=0?180:-180,x+=x<=0?180:-180):(b*=-1,B+=B<=0?180:-180)),e=e||i.uncache,i.x=p-((i.xPercent=p&&(!e&&i.xPercent||(Math.round(r.offsetWidth/2)===Math.round(-p)?-50:0)))?r.offsetWidth*i.xPercent/100:0)+l,i.y=_-((i.yPercent=_&&(!e&&i.yPercent||(Math.round(r.offsetHeight/2)===Math.round(-_)?-50:0)))?r.offsetHeight*i.yPercent/100:0)+l,i.z=g+l,i.scaleX=Cu(m),i.scaleY=Cu(b),i.rotation=Cu(x)+t,i.rotationX=Cu(v)+t,i.rotationY=Cu(S)+t,i.skewX=B+t,i.skewY=F+t,i.transformPerspective=O+l,(i.zOrigin=parseFloat(f.split(" ")[2])||!e&&i.zOrigin||0)&&(o[Cd]=Mw(f)),i.xOffset=i.yOffset=0,i.force3D=np.force3D,i.renderTransform=i.svg?XW:rO?aO:YW,i.uncache=0,i},Mw=function(r){return(r=r.split(" "))[0]+" "+r[1]},y4=function(r,e,i){var o=Cf(e);return Cu(parseFloat(e)+parseFloat(Zg(r,"x",i+"px",o)))+o},YW=function(r,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,aO(r,e)},F0="0deg",$_="0px",P0=") ",aO=function(r,e){var i=e||this,o=i.xPercent,a=i.yPercent,l=i.x,t=i.y,h=i.z,f=i.rotation,p=i.rotationY,_=i.rotationX,g=i.skewX,m=i.skewY,b=i.scaleX,x=i.scaleY,v=i.transformPerspective,S=i.force3D,B=i.target,F=i.zOrigin,O="",V=S==="auto"&&r&&r!==1||S===!0;if(F&&(_!==F0||p!==F0)){var X=parseFloat(p)*_y,Q=Math.sin(X),ee=Math.cos(X),ne;X=parseFloat(_)*_y,ne=Math.cos(X),l=y4(B,l,Q*ne*-F),t=y4(B,t,-Math.sin(X)*-F),h=y4(B,h,ee*ne*-F+F)}v!==$_&&(O+="perspective("+v+P0),(o||a)&&(O+="translate("+o+"%, "+a+"%) "),(V||l!==$_||t!==$_||h!==$_)&&(O+=h!==$_||V?"translate3d("+l+", "+t+", "+h+") ":"translate("+l+", "+t+P0),f!==F0&&(O+="rotate("+f+P0),p!==F0&&(O+="rotateY("+p+P0),_!==F0&&(O+="rotateX("+_+P0),(g!==F0||m!==F0)&&(O+="skew("+g+", "+m+P0),(b!==1||x!==1)&&(O+="scale("+b+", "+x+P0),B.style[Xc]=O||"translate(0, 0)"},XW=function(r,e){var i=e||this,o=i.xPercent,a=i.yPercent,l=i.x,t=i.y,h=i.rotation,f=i.skewX,p=i.skewY,_=i.scaleX,g=i.scaleY,m=i.target,b=i.xOrigin,x=i.yOrigin,v=i.xOffset,S=i.yOffset,B=i.forceCSS,F=parseFloat(l),O=parseFloat(t),V,X,Q,ee,ne;h=parseFloat(h),f=parseFloat(f),p=parseFloat(p),p&&(p=parseFloat(p),f+=p,h+=p),h||f?(h*=_y,f*=_y,V=Math.cos(h)*_,X=Math.sin(h)*_,Q=Math.sin(h-f)*-g,ee=Math.cos(h-f)*g,f&&(p*=_y,ne=Math.tan(f-p),ne=Math.sqrt(1+ne*ne),Q*=ne,ee*=ne,p&&(ne=Math.tan(p),ne=Math.sqrt(1+ne*ne),V*=ne,X*=ne)),V=Cu(V),X=Cu(X),Q=Cu(Q),ee=Cu(ee)):(V=_,ee=g,X=Q=0),(F&&!~(l+"").indexOf("px")||O&&!~(t+"").indexOf("px"))&&(F=Zg(m,"x",l,"px"),O=Zg(m,"y",t,"px")),(b||x||v||S)&&(F=Cu(F+b-(b*V+x*Q)+v),O=Cu(O+x-(b*X+x*ee)+S)),(o||a)&&(ne=m.getBBox(),F=Cu(F+o/100*ne.width),O=Cu(O+a/100*ne.height)),ne="matrix("+V+","+X+","+Q+","+ee+","+F+","+O+")",m.setAttribute("transform",ne),B&&(m.style[Xc]=ne)},ZW=function(r,e,i,o,a){var l=360,t=Oh(a),h=parseFloat(a)*(t&&~a.indexOf("rad")?N0:1),f=h-o,p=o+f+"deg",_,g;return t&&(_=a.split("_")[1],_==="short"&&(f%=l,f!==f%(l/2)&&(f+=f<0?l:-l)),_==="cw"&&f<0?f=(f+l*iM)%l-~~(f/l)*l:_==="ccw"&&f>0&&(f=(f-l*iM)%l-~~(f/l)*l)),r._pt=g=new Sd(r._pt,e,i,o,f,OW),g.e=p,g.u="deg",r._props.push(i),g},hM=function(r,e){for(var i in e)r[i]=e[i];return r},JW=function(r,e,i){var o=hM({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",l=i.style,t,h,f,p,_,g,m,b;o.svg?(f=i.getAttribute("transform"),i.setAttribute("transform",""),l[Xc]=e,t=Wv(i,1),A1(i,Xc),i.setAttribute("transform",f)):(f=getComputedStyle(i)[Xc],l[Xc]=e,t=Wv(i,1),l[Xc]=f);for(h in Jm)f=o[h],p=t[h],f!==p&&a.indexOf(h)<0&&(m=Cf(f),b=Cf(p),_=m!==b?Zg(i,h,f,b):parseFloat(f),g=parseFloat(p),r._pt=new Sd(r._pt,t,h,_,g-_,GS),r._pt.u=b||0,r._props.push(h));hM(t,o)};wd("padding,margin,Width,Radius",function(n,r){var e="Top",i="Right",o="Bottom",a="Left",l=(r<3?[e,i,o,a]:[e+a,e+i,o+i,o+a]).map(function(t){return r<2?n+t:"border"+t+n});Iw[r>1?"border"+n:n]=function(t,h,f,p,_){var g,m;if(arguments.length<4)return g=l.map(function(b){return jm(t,b,f)}),m=g.join(" "),m.split(g[0]).length===5?g[0]:m;g=(p+"").split(" "),m={},l.forEach(function(b,x){return m[b]=g[x]=g[x]||g[(x-1)/2|0]}),t.init(h,m,_)}});var QE={name:"css",register:$S,targetTest:function(r){return r.style&&r.nodeType},init:function(r,e,i,o,a){var l=this._props,t=r.style,h=i.vars.startAt,f,p,_,g,m,b,x,v,S,B,F,O,V,X,Q,ee;jE||$S(),this.styles=this.styles||tO(r),ee=this.styles.props,this.tween=i;for(x in e)if(x!=="autoRound"&&(p=e[x],!(Jd[x]&&Vk(x,e,i,o,r,a)))){if(m=typeof p,b=Iw[x],m==="function"&&(p=p.call(i,o,r,a),m=typeof p),m==="string"&&~p.indexOf("random(")&&(p=Hv(p)),b)b(this,r,x,p,i)&&(Q=1);else if(x.substr(0,2)==="--")f=(getComputedStyle(r).getPropertyValue(x)+"").trim(),p+="",Qg.lastIndex=0,Qg.test(f)||(v=Cf(f),S=Cf(p)),S?v!==S&&(f=Zg(r,x,f,S)+S):v&&(p+=v),this.add(t,"setProperty",f,p,o,a,0,0,x),l.push(x),ee.push(x,0,t[x]);else if(m!=="undefined"){if(h&&x in h?(f=typeof h[x]=="function"?h[x].call(i,o,r,a):h[x],Oh(f)&&~f.indexOf("random(")&&(f=Hv(f)),Cf(f+"")||f==="auto"||(f+=np.units[x]||Cf(jm(r,x))||""),(f+"").charAt(1)==="="&&(f=jm(r,x))):f=jm(r,x),g=parseFloat(f),B=m==="string"&&p.charAt(1)==="="&&p.substr(0,2),B&&(p=p.substr(2)),_=parseFloat(p),x in um&&(x==="autoAlpha"&&(g===1&&jm(r,"visibility")==="hidden"&&_&&(g=0),ee.push("visibility",0,t.visibility),Og(this,t,"visibility",g?"inherit":"hidden",_?"inherit":"hidden",!_)),x!=="scale"&&x!=="transform"&&(x=um[x],~x.indexOf(",")&&(x=x.split(",")[0]))),F=x in Jm,F){if(this.styles.save(x),m==="string"&&p.substring(0,6)==="var(--"&&(p=zp(r,p.substring(4,p.indexOf(")"))),_=parseFloat(p)),O||(V=r._gsap,V.renderTransform&&!e.parseTransform||Wv(r,e.parseTransform),X=e.smoothOrigin!==!1&&V.smooth,O=this._pt=new Sd(this._pt,t,Xc,0,1,V.renderTransform,V,0,-1),O.dep=1),x==="scale")this._pt=new Sd(this._pt,V,"scaleY",V.scaleY,(B?gy(V.scaleY,B+_):_)-V.scaleY||0,GS),this._pt.u=0,l.push("scaleY",x),x+="X";else if(x==="transformOrigin"){ee.push(Cd,0,t[Cd]),p=KW(p),V.svg?KS(r,p,0,X,0,this):(S=parseFloat(p.split(" ")[2])||0,S!==V.zOrigin&&Og(this,V,"zOrigin",V.zOrigin,S),Og(this,t,x,Mw(f),Mw(p)));continue}else if(x==="svgOrigin"){KS(r,p,1,X,0,this);continue}else if(x in sO){ZW(this,V,x,g,B?gy(g,B+p):p);continue}else if(x==="smoothOrigin"){Og(this,V,"smooth",V.smooth,p);continue}else if(x==="force3D"){V[x]=p;continue}else if(x==="transform"){JW(this,p,r);continue}}else x in t||(x=Ty(x)||x);if(F||(_||_===0)&&(g||g===0)&&!kW.test(p)&&x in t)v=(f+"").substr((g+"").length),_||(_=0),S=Cf(p)||(x in np.units?np.units[x]:v),v!==S&&(g=Zg(r,x,f,S)),this._pt=new Sd(this._pt,F?V:t,x,g,(B?gy(g,B+_):_)-g,!F&&(S==="px"||x==="zIndex")&&e.autoRound!==!1?RW:GS),this._pt.u=S||0,v!==S&&S!=="%"&&(this._pt.b=f,this._pt.r=DW);else if(x in t)$W.call(this,r,x,f,B?B+p:p);else if(x in r)this.add(r,x,f||r[x],B?B+p:p,o,a);else if(x!=="parseTransform"){IE(x,p);continue}F||(x in t?ee.push(x,0,t[x]):typeof r[x]=="function"?ee.push(x,2,r[x]()):ee.push(x,1,f||r[x])),l.push(x)}}Q&&Yk(this)},render:function(r,e){if(e.tween._time||!UE())for(var i=e._pt;i;)i.r(r,i.d),i=i._next;else e.styles.revert()},get:jm,aliases:um,getSetter:function(r,e,i){var o=um[e];return o&&o.indexOf(",")<0&&(e=o),e in Jm&&e!==Cd&&(r._gsap.x||jm(r,"x"))?i&&nM===i?e==="scale"?zW:UW:(nM=i||{})&&(e==="scale"?HW:QW):r.style&&!EE(r.style[e])?NW:~e.indexOf("-")?jW:RE(r,e)},core:{_removeProperty:A1,_getMatrix:HE}};Mf.utils.checkPrefix=Ty;Mf.core.getStyleSaver=tO;(function(n,r,e,i){var o=wd(n+","+r+","+e,function(a){Jm[a]=1});wd(r,function(a){np.units[a]="deg",sO[a]=1}),um[o[13]]=n+","+r,wd(i,function(a){var l=a.split(":");um[l[1]]=o[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");wd("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){np.units[n]="px"});Mf.registerPlugin(QE);var av=Mf.registerPlugin(QE)||Mf;av.core.Tween;function e$(n){n.store("animate",{enter:(r,e)=>{r&&(r instanceof Element&&av.to(r.closest(".dialog"),{autoAlpha:1,duration:.2}),av.fromTo(r,{scale:.8,autoAlpha:0},{scale:1,autoAlpha:1,duration:.2}).eventCallback("onComplete",()=>{e&&e(r)}))},leave:(r,e)=>{r&&(av.to(r,{scale:.8,autoAlpha:0,duration:.2}).eventCallback("onComplete",()=>{e&&e(r)}),r instanceof Element&&av.to(r.closest(".dialog"),{autoAlpha:0,duration:.2}))}}),n.store("libs",{getLastIndex:function(r){return Math.max(...Array.from(r??document.querySelectorAll("*"),e=>parseFloat(window.getComputedStyle(e).zIndex)).filter(e=>!Number.isNaN(e)),0)},playAnimateOnLoad:function(r,e){n.store("animate").enter(r,i=>{i==null||i.removeAttribute("style"),e==null||e.call(i)})}}),n.magic("json",()=>(r,e=!1)=>{if(r!=null&&r!="")return e?JSON.stringify(r):typeof r!="string"?Error("Argument must be a string"):JSON.parse(r)}),n.magic("toJson",()=>r=>JSON.stringify(r)),n.magic("isEmpty",()=>r=>EF.isEmpty(r)),n.magic("mask",()=>(r,e)=>{let i="",o=0;for(let a=0;a<(e==null?void 0:e.length);a++)e[a]==="#"?(i+=r[o]??"",o++):i+=e[a];return i}),n.magic("currency",()=>(r,e=null,i=".",o=2)=>{if(isNaN(r))throw new Error(`${r} is not a number`);let l=parseFloat(r).toFixed(o).split(".");return l[0]=l[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e&&(l[0]=e+l[0]),l.join(i)}),n.magic("url",()=>{const r=new URL(document.location);return{current:r,params:r.searchParams,hasParam:function(e,i){return e&&i?this.params.get(e)===i:this.params.get(e)},getParam:function(e){return this.params.get(e)??null}}}),n.magic("link",()=>(r,e="_self")=>{window.open(r,e)}),n.directive("render",(r,{value:e,expression:i},{evaluate:o,evaluateLater:a})=>{const l=/#\{(.*?)\}/g;let t=r.outerHTML;Array.from(t.matchAll(l),f=>f[0]).map(f=>{const p=f.replace("#{","").replace("}",""),_=o(p);t=t.replace(f,_)}),r.outerHTML=t}),n.magic("http",()=>r=>{r&&Axios({url:r.url,method:r.method??"GET",data:r.data??{},params:r.params??{},headers:r.headers??{}}).then(e=>{typeof r.success=="function"&&r.success(e)}).catch(e=>{typeof r.error=="function"&&r.error(e)}).finally(()=>{typeof r.finally=="function"&&r.finally()})})}var j0=Mf.registerPlugin(QE)||Mf;j0.core.Tween;function t$(n,r){const e={MAIN:"alpinjs-dialog",CONTAINER:"alpinjs-dialog-container",WRAPPER:"alpinjs-dialog-wrapper",OVERLAY:"alpinjs-dialog-overlay"};let i=n.reactive({});n.directive("dialog",(b,{expression:x,value:v,modifiers:S},{effect:B,evaluateLater:F})=>{if(!v){let O=i[x],V=b.content.cloneNode(!0),X=document.createElement("div");X.classList.add(e.CONTAINER),X.appendChild(V);let Q=document.createElement("div");Q.classList.add(e.WRAPPER),Q.appendChild(X);let ee=document.createElement("div");ee.classList.add(e.MAIN),ee.appendChild(Q),O||(O=i[x]={show:!1,mainElement:ee,el:ee.cloneNode(!0),persist:!1,data:null,addClass:m(b,"addClass"),addOverlayClass:m(b,"addOverlayClass"),drawer:null,config:{width:m(b,"width"),height:m(b,"height"),position:m(b,"position"),backdrop:m(b,"backdrop"),blur:m(b,"blur"),animate:{enter:m(b,"animateEnter"),leave:m(b,"animateLeave")}},name:x,props:{},validClose:void 0,processing:!1,afterOpen:()=>{},beforeClose:()=>{},afterClose:()=>{}}),b.remove();return}B(()=>{i[x].show})}),n.magic("dialog",b=>x=>{if(typeof x=="function"){setTimeout(()=>{x()},500);return}const v=i[x];if(!v)throw new Error(`Dialog ${x} not found`);return{target:v==null?void 0:v.el,open(S={}){v.afterOpen=S.afterOpen??v.afterOpen,v.afterClose=S.afterClose??v.afterClose,v.beforeClose=S.beforeClose??v.beforeClose,v.config={...v.config,...S.config},v.data=S.data??null,v.addClass=S.addClass??v.addClass,v.addOverlayClass=S.addOverlayClass??v.addOverlayClass,v.props=S.props??{},v.show=!0,v.drawer=S.drawer,v.persist=S.persist??!1,a(v)},close(S){l(v,S)},get data(){return v==null?void 0:v.data},get rawData(){return Object.assign({},v==null?void 0:v.data)},props:v==null?void 0:v.props,validClose(S){S&&(v.validClose=S)}}});const o={onReady:function(b){return new CustomEvent("dialogReady",{detail:b})},onClose:function(b){return new CustomEvent("dialogClose",{detail:b})}};function a(b){var S,B;b.processing=!0,h(b.el,()=>{b.config.backdrop&&l(b)});const x=document.createElement("div");x.classList.add(e.OVERLAY,...b==null?void 0:b.addOverlayClass),x.style.zIndex=g(),x.setAttribute("dialog-name",b.name),document.body.appendChild(x),t(b.el,b==null?void 0:b.addClass),p(b.el,(S=b==null?void 0:b.config)==null?void 0:S.blur),b.el.setAttribute("x-dialog:show",b.name),b.el.setAttribute("dialog-position",b.config.position),b.el.style.zIndex=g();const v=b.el.querySelector(`.${e.CONTAINER}`);v.style.width=b.config.width,v.style.height=b.config.height,document.body.appendChild(b.el),_(b.config.position,(B=b==null?void 0:b.config)==null?void 0:B.animate,b).enter(b.el,()=>{b.afterOpen(b),b.el.dispatchEvent(o.onReady(b)),b.processing=!1})}function l(b,x){var S;if(b.processing||(b.processing=!0,b.beforeClose(b),typeof(b==null?void 0:b.validClose)=="function"&&!b.validClose()))return;const v=document.querySelector(`.${e.OVERLAY}[dialog-name=${b.name}]`);_(b.config.position,(S=b==null?void 0:b.config)==null?void 0:S.animate,b).leave(b.el,()=>{b.show=!1,v.remove();const B=b.el.cloneNode(!0);b.el.remove(),b.el=b.persist?B:b.mainElement.cloneNode(!0),b.afterClose(x),b.el.dispatchEvent(o.onClose(b)),b.processing=!1})}function t(b,x=[]){Array.isArray(x)&&x.forEach(v=>{b.classList.add(v)})}function h(b,x){const v=b.querySelector(`.${e.CONTAINER}`),S=B=>{f(v,B.target)||x()};return b.addEventListener("click",S),()=>{b.removeEventListener("click",S)}}function f(b,x){return b===x||b.contains(x)}function p(b,x=0){b.style.backdropFilter=`blur(${x}px)`}function _(b,x={},v){const{drawer:S}=v,B=document.querySelector(`.${e.OVERLAY}[dialog-name=${v.name}]`);let F=X=>{const{clientWidth:Q,clientHeight:ee}=v.el.querySelector(`.${e.CONTAINER}`),ne=100,Ae=50,fe=Math.max((Math.max(Q,ee)-50)*100/Math.max(Q,ee)/100,.8);switch(X){case"right":return{from:{x:ne,autoAlpha:0},to:{x:"0%",autoAlpha:1}};case"left":return{from:{x:-ne,autoAlpha:0},to:{x:"0%",autoAlpha:1}};case"top":return{from:{y:-Ae,autoAlpha:0},to:{y:"0%",autoAlpha:1}};case"bottom":return{from:{y:Ae,autoAlpha:0},to:{y:"0%",autoAlpha:1}};default:return{from:{scale:fe,autoAlpha:0},to:{scale:1,autoAlpha:1}}}};const O=document.querySelector(S),V=Math.max((Math.max(O==null?void 0:O.clientWidth,O==null?void 0:O.clientHeight)-50)*100/Math.max(O==null?void 0:O.clientWidth,O==null?void 0:O.clientHeight)/100,.8);return{enter:(X,Q)=>{j0.to(B,{autoAlpha:1,duration:(x==null?void 0:x.enter)??.2}),O&&j0.to(O,{scale:V,duration:(x==null?void 0:x.enter)??.2}),j0.fromTo(X.querySelector(`.${e.CONTAINER}`),{...F(b).from},{...F(b).to,duration:(x==null?void 0:x.enter)??.2}).eventCallback("onComplete",()=>{Q&&Q(X)})},leave:(X,Q)=>{j0.to(X.querySelector(`.${e.CONTAINER}`),{...F(b).from,duration:(x==null?void 0:x.leave)??.2}).eventCallback("onComplete",()=>{Q&&Q(X)}),O&&j0.to(O,{scale:1,duration:(x==null?void 0:x.leave)??.2}),j0.to(B,{autoAlpha:0,duration:(x==null?void 0:x.leave)??.2})}}}function g(){return Math.max(...Array.from(document.querySelectorAll("*"),b=>parseFloat(window.getComputedStyle(b).zIndex)).filter(b=>!Number.isNaN(b)),0)+1}function m(b,x){var S,B,F,O;return{width:b.getAttribute("width")??(r==null?void 0:r.width),height:b.getAttribute("height")??(r==null?void 0:r.height),position:b.getAttribute("position")??(r==null?void 0:r.position)??"center",backdrop:b.getAttribute("backdrop")!="false",blur:b.getAttribute("blur")??(r==null?void 0:r.blur)??0,animateEnter:b.getAttribute("animate-enter")??((S=r==null?void 0:r.animate)==null?void 0:S.enter)??.2,animateLeave:b.getAttribute("animate-leave")??((B=r==null?void 0:r.animate)==null?void 0:B.leave)??.2,addClass:((F=b.getAttribute("add-class"))==null?void 0:F.split(" "))??(r==null?void 0:r.addClass)??[],addOverlayClass:((O=b.getAttribute("add-overlay-class"))==null?void 0:O.split(" "))??(r==null?void 0:r.addOverlayClass)??[]}[x]}}function r$(n){const r={onFilter:function(v){return new CustomEvent("filter",{detail:{value:v.value}})},onSelected:function(v){return new CustomEvent("selected",{detail:v})},onUnselected:function(){return new CustomEvent("unselected",{detail:null})},unselect:function(v){g(v)}};let e=n.reactive({});n.directive("dropdown",(v,{expression:S},{effect:B,evaluateLater:F})=>{}),n.magic("dropdown",(v,{Alpine:S})=>(B,F)=>{const O=Math.random().toString(36).substr(2,9);return e[O]={show:!1,target:B,filterText:"",id:O,data:F.data??[],options:{limitPerScroll:5,placeholder:B.getAttribute("placeholder"),filterPlaceholder:"Type to filter...",...F},selected:null,elements:{input:null}},a(O),HTMLInputElement.prototype.destroy=i,HTMLSelectElement.prototype.destroy=i,S.effect(()=>{}),{target:B,selected:e[O].selected,setData:V=>{o(O).data=V,t(O,V)},onFilter:V=>{p(o(O).elements.input,"filter",X=>{V(X.detail)})},setSelectItem:(V,X=!1)=>{_(O,V,X)},onSelected:V=>{p(o(O).elements.main,"selected",X=>{V(o(O).selected)})},onUnselected:V=>{p(o(O).elements.main,"unselected",X=>{V(!0)})}}});function i(){const v=this.getAttribute("dropdown-target");o(v).target.removeAttribute("dropdown-target"),o(v).target.removeAttribute("hidden"),o(v).target.removeAttribute("type"),o(v).elements.main.remove(),delete e[v]}function o(v){return e[v]}function a(v){var Z,z,k,R,N,U;const S=o(v).target;S.setAttribute("dropdown-target",v),S&&S.setAttribute("type","hidden"),S&&S.setAttribute("hidden","true");const B=document.createElement("div");B.classList.add("alpinjs-dropdown"),B.setAttribute("dropdown-id",v),o(v).elements.main=B;const F=document.createElement("div");F.classList.add("alpinjs-dropdown-box"),o(v).elements.box=F;const O=document.createElement("div");if(O.classList.add("dropdown-action"),o(v).elements.action=O,F.appendChild(O),(Z=o(v).options)!=null&&Z.unselectable){const Y=document.createElement("div");Y.classList.add("dropdown-unselect"),Y.style.display="none",p(Y,"click",()=>r.unselect(v)),o(v).elements.unselect=Y,F.appendChild(Y)}const V=document.createElement("input");V.classList.add("alpinjs-dropdown-input"),V.setAttribute("type","text"),V.setAttribute("placeholder",((z=o(v).options)==null?void 0:z.filterPlaceholder)??""),V.setAttribute("autocomplete","off"),V.setAttribute("dropdown-input","true"),V.style.display="none",o(v).elements.input=V;let X=document.createElement("div");X.classList.add("alpinjs-dropdown-selected"),X.style.display="none";let Q=document.createElement("img");Q.classList.add("alpinjs-dropdown-selected-image"),o(v).elements.selected_image=Q;let ee=document.createElement("span");ee.classList.add("alpinjs-dropdown-selected-text"),o(v).elements.selected_text=ee,X.appendChild(Q),X.appendChild(ee),o(v).elements.selected_item=X;let ne=document.createElement("div");ne.classList.add("dropdown-placeholder");let Ae=document.createElement("span");Ae.innerText=(k=o(v).options)==null?void 0:k.placeholder,ne.appendChild(Ae),o(v).elements.placeholder=ne;let fe=document.createElement("div");fe.classList.add("alpinjs-dropdown-popup"),fe.style.zIndex=b().toString(),fe.style.display="none",o(v).elements.popup=fe;let ce=document.createElement("div");if(ce.classList.add("dropdown-wrapper"),(R=o(v).options)!=null&&R.defaultItem){let Y=document.createElement("div");Y.classList.add("defualt-dropdown-item");let de=document.createElement("span");de.innerText=((U=(N=o(v).options)==null?void 0:N.defaultItem(o(v)))==null?void 0:U.text)??"",Y.appendChild(de),p(Y,"click",()=>{var J,xe;return(xe=(J=o(v).options)==null?void 0:J.defaultItem())==null?void 0:xe.onSelect(o(v))}),o(v).elements.default_item=Y,ce.appendChild(Y)}let G=document.createElement("div");G.classList.add("dropdown-list"),G.style.maxHeight=e[v].options.limitPerScroll*50+"px",o(v).elements.dropdown_list=G,ce.appendChild(G),F.appendChild(V),F.appendChild(X),F.appendChild(ne),B.appendChild(F),B.appendChild(fe),fe.appendChild(ce),S.after(B),p(B,"click",Y=>{l(v,o(v).data),x(v,de=>{de(),f(v)})}),p(V,"input",Y=>{o(v).filterText=Y.target.value,o(v).elements.default_item&&(o(v).elements.default_item.querySelector("span").innerText=o(v).options.defaultItem(o(v)).text),V.dispatchEvent(r.onFilter(Y.target))})}function l(v,S){o(v).show||(o(v).elements.dropdown_list.style.display="none",S.forEach(B=>{o(v).elements.dropdown_list.style.display="block";let F=document.createElement("div");if(F.classList.add("dropdown-item"),B.image){let V=document.createElement("img");V.src=B.image,F.appendChild(V)}let O=document.createElement("span");O.innerText=B.text,F.appendChild(O),p(F,"click",()=>h(v,B)),o(v).elements.dropdown_list.appendChild(F)}),o(v).elements.popup.style.width=m(o(v).elements.main).width+"px",o(v).elements.selected_item.style.display="none",o(v).elements.placeholder.style.display="none",o(v).elements.box.classList.add("show"),o(v).elements.popup.style.display="block",o(v).elements.input.style.display="block",o(v).elements.input.focus(),o(v).show=!0)}function t(v,S){o(v).show&&(o(v).elements.dropdown_list.innerHTML="",o(v).elements.dropdown_list.style.display="none",S.forEach(B=>{o(v).elements.dropdown_list.style.display="block";let F=document.createElement("div");if(F.classList.add("dropdown-item"),B.image){let V=document.createElement("img");V.src=B.image,F.appendChild(V)}let O=document.createElement("span");O.innerText=B.text,F.appendChild(O),p(F,"click",()=>h(v,B)),o(v).elements.dropdown_list.appendChild(F)}))}function h(v,S){_(v,S),f(v)}function f(v){o(v).selected===null?o(v).elements.placeholder.style.display="block":(o(v).elements.selected_item.style.display="flex",o(v).elements.selected_image.style.display="none",o(v).selected.image&&(o(v).elements.selected_image.style.display="block")),o(v).elements.input.style.display="none",o(v).elements.box.classList.remove("show"),o(v).elements.dropdown_list.innerHTML="",o(v).elements.popup.style.display="none",o(v).show=!1}function p(v,S,B){v.addEventListener(S,B)}function _(v,S,B=!1){if(!S||(S==null?void 0:S.value)===void 0||(S==null?void 0:S.value)==="")return f(v);let F=o(v).elements.main;if(F&&S){if(o(v).selected=S,o(v).target.value=JSON.stringify(S.value),o(v).target instanceof HTMLSelectElement){o(v).target.innerHTML="";let O=document.createElement("option");O.value=S.value,O.innerText=S.text,O.setAttribute("selected","selected"),o(v).target.appendChild(O)}B||(F.dispatchEvent(r.onSelected(S)),o(v).target.dispatchEvent(new Event("input")),o(v).target.dispatchEvent(new Event("change"))),o(v).elements.selected_text.innerText=o(v).selected.text,o(v).selected.image?(o(v).elements.selected_image.src=o(v).selected.image,o(v).elements.selected_image.style.display="block"):o(v).elements.selected_image.style.display="none",o(v).elements.selected_item.style.display="flex",o(v).elements.placeholder.style.display="none",o(v).elements.input.style.display="none",o(v).options.unselectable&&(o(v).elements.action.style.display="none",o(v).elements.unselect.removeAttribute("style"))}}function g(v){if(o(v).selected=null,o(v).elements.unselect.style.display="none",o(v).elements.action.removeAttribute("style"),o(v).elements.main.dispatchEvent(r.onUnselected()),o(v).target.value="",o(v).target instanceof HTMLSelectElement){o(v).target.innerHTML="";let S=document.createElement("option");S.value="",S.innerText="",S.removeAttribute("selected"),o(v).target.appendChild(S)}o(v).target.dispatchEvent(new Event("input")),o(v).target.dispatchEvent(new Event("change"))}function m(v){const S=v.getBoundingClientRect();return{top:S.top+window.pageYOffset,left:S.left+window.pageXOffset,width:S.width,height:S.height}}function b(){return Math.max(...Array.from(document.querySelectorAll("*"),v=>parseFloat(window.getComputedStyle(v).zIndex)).filter(v=>!Number.isNaN(v)),0)+1}function x(v,S){const B=document.querySelector(`[dropdown-id='${v}']`),F=V=>{B!=null&&B.contains(V.target)||S(O)},O=()=>{document.removeEventListener("click",F)};p(document,"click",F)}}const n$=function(n,r){const e=[];return r.map(i=>{const[o,a]=i.split(":");let l=!1;switch(o){case"required":l=n!=""&&n!=null;break;case"email":l=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n);break;case"number":l=/^\d+$/.test(n);break;case"min":l=n.length>=a;break;case"max":l=n.length<=a;break;case"pattern":l=new RegExp(a).test(n);break;default:l=!1;break}e.push(l)}),e.every(i=>i===!1)},i$=function(n,r){const e=[];return r.map(i=>{const[o,a]=i.split(":");switch(o){case"required":(n==""||n==null)&&e.push(o);break;case"email":/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n)||e.push(o);break;case"number":/^\d+$/.test(n)||e.push(o);break;case"min":n.length<a&&e.push(o);break;case"max":n.length>a&&e.push(o);break;case"pattern":new RegExp(a).test(n)||e.push(o);break}}),e},s$=function(n){return{...Object.fromEntries(Object.entries(n).map(([e,i])=>{const[o,a]=i;return[e,o??""]})),disabled:!1,value:function(){return Object.fromEntries(Object.entries(n).map(([e,i])=>[e,this[e]??""]))},valid:function(){return Object.entries(n).every(([e,i])=>!n$(this[e],i[1]))},getErrors:function(){return Object.fromEntries(Object.entries(n).map(([e,i])=>[e,i$(this[e],i[1])]))},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},patchValue:function(e){Object.entries(e).map(([i,o])=>{this[i]=o})},reset:function(){Object.entries(n).map(([e,i])=>{this[e]=null})},resetFilter:function(){Object.entries(n).map(([e,i])=>{this[e]=""})}}},o$=function(n){return{data:null,paginate:null,loading:!1,init:function(r={}){let e={};location.search.replace("?","").split("&").map(i=>{const[o,a]=i.split("=");!o||!a||(e[o]=a)}),r={...e,...r},this.fetchData(r,i=>{var _;let o=i,a=null;i!=null&&i.data&&((_=i==null?void 0:i.data)==null?void 0:_.data)!==void 0&&(o=i.data,a=i.otherData);const{data:l,total:t,per_page:h,current_page:f,last_page:p}=o;this.otherData=a??i.otherData,this.paginate={totalItems:t,currentPage:f,perPage:h,totalPages:p,leftSection:function(){if(p>10){if(f>=4)return[1];{let g=[];for(let m=1;m<=(t>4?4:p);m++)g.push(m);return g}}},midSection:function(){if(p>10){if(f>=4&&f<p-2){let g=[];for(let m=f-1;m<=f+1;m++)g.push(m);return g}}else{let g=[];for(let m=1;m<=p;m++)g.push(m);return g}},rightSection:function(){if(p>10){if(f<p-2)return[p];{let g=[];for(let m=p-3;m<=p;m++)g.push(m);return g}}}},this.data=l==null?void 0:l.map((g,m)=>({iteration:this.paginate.currentPage*this.paginate.perPage-this.paginate.perPage+(m+1),...g})),setTimeout(()=>{feather.replace()},10)})},fetchData:function(r,e){this.loading=!0,Axios({url:n,method:"GET",params:r}).then(i=>{var a;e(i.data);let o="";(a=Object.entries(r))==null||a.map(([l,t],h)=>{h==0&&(o+="?"),o+=`${l}=${t}`,Object.entries(r).length-1>h&&(o+="&")}),history.replaceState({},"",o||location.pathname)}).finally(()=>{this.loading=!1})},reload:function(){this.init()},reset:function(r){this.fetchData({},e=>{var p;let i=e,o=null;e!=null&&e.data&&((p=e==null?void 0:e.data)==null?void 0:p.data)!==void 0&&(i=e.data,o=e.otherData);const{data:a,total:l,per_page:t,current_page:h,last_page:f}=i;this.otherData=o??e.otherData,this.paginate={totalItems:l,currentPage:h,perPage:t,totalPages:f,leftSection:function(){if(f>10){if(h>=4)return[1];{let _=[];for(let g=1;g<=(l>4?4:f);g++)_.push(g);return _}}},midSection:function(){if(f>10){if(h>=4&&h<f-2){let _=[];for(let g=h-1;g<=h+1;g++)_.push(g);return _}}else{let _=[];for(let g=1;g<=f;g++)_.push(g);return _}},rightSection:function(){if(f>10){if(h<f-2)return[f];{let _=[];for(let g=f-3;g<=f;g++)_.push(g);return _}}}},this.data=a==null?void 0:a.map((_,g)=>({iteration:this.paginate.currentPage*this.paginate.perPage-this.paginate.perPage+(g+1),..._})),r&&r(e),setTimeout(()=>{feather.replace()},10)})},empty:function(){var r;return((r=this.data)==null?void 0:r.length)===0},goPreviousPage:function(){this.paginate.currentPage<=1||(this.paginate.currentPage-=1,this.init({page:this.paginate.currentPage}))},goNextPage:function(){this.paginate.currentPage>=this.paginate.totalPages||(this.paginate.currentPage+=1,this.init({page:this.paginate.currentPage}))},goToPage:function(r){isNaN(r)||r<1||r>this.paginate.totalPages||r==this.paginate.currentPage||(this.paginate.currentPage=r,this.init({page:this.paginate.currentPage}))}}};window.$selectFile=function(n,r){return new Promise(e=>{const i=document.createElement("input");i.type="file",i.multiple=r,i.accept=n,i.onchange=o=>{const a=Array.from(i.files);e(r?a:a[0])},i.click()})};async function a$(n,r=!0,e="image/*",i){const o=await $selectFile(e,r),a=Array.isArray(o)?o:[o];a.map((l,t)=>{const h=new Date().getTime()+t;a&&i&&i(!0,!1,l,0,h,!1);var f=_=>{i&&i(!0,!1,l,_,h)};let p=new FormData;p.append("file",l),Axios.post(n,p,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8",Accept:"application/json"},responseType:"json",onUploadProgress:function(_){var g=Math.round(_.loaded*100/_.total);f(g)}}).then(_=>{i&&i(!1,_,l,100,h)}).catch(_=>{i&&i(!0,null,l,null,h,_)})})}window.$validator=function(n,r,e){$("body").on("submit",n,function(i){const o=$(this),a=r,l=Object.keys(a);l.length>0&&l.map(async t=>{const h=o.find(`[name=${t}]`),f=h.val().toString(),p=h.parent().find(`.${(e==null?void 0:e.messageClass)??"error"}`);let _="";const g=a[t],m=Object.keys(a[t]);for(var b=0;b<m.length;b++)if(m[b]=="required"){if(f.length==0){_=h.attr("error-message")??"Please input this field",i.preventDefault();break}}else if(m[b]=="email"){if(!new RegExp("([a-zA-Z0-9._]{5,30}[@][a-zA-Z]{2,20}[.][a-zA-Z]{2,20})+$","").test(f)){_=h.attr("error-email")??"Please input a valid email",i.preventDefault();break}}else if(m[b]=="phone"){if(!new RegExp("([0]{1}[1-9]{1}[0-9]{7,8})+$","").test(f)){_=h.attr("error-phone")??"Please input a valid phone",i.preventDefault();break}}else if(m[b]=="image"){if(f.length==0){_=h.attr("error-message")??"Please choose a photo",i.preventDefault();break}}else if(m[b]=="match"){if(f.length!=0&&f!=$(`[name=${a[t][m[b]]}]`).val()){_=h.attr("error-message")??"Password your entered not match.",i.preventDefault();break}}else if(m[b]=="minLength"){if(f.length>0&&f.length<g.minLength){_=h.attr("error-minLength")??`Please input at least ${g.minLength} characters`,i.preventDefault();break}}else if(m[b]=="maxLength"){if(f.length>0&&f.length>g.maxLength){_=h.attr("error-maxLength")??`Please input less than ${g.maxLength} characters`,i.preventDefault();break}}else if(m[b]=="type"){if(g.type=="number"&&isNaN(f)){_=h.attr("error-type")??"Please input a valid number",i.preventDefault();break}}else if(m[b]=="range"){const[x,v]=g.range.split("-");if(!isNaN(f)&&!isNaN(x)&&!isNaN(v))if(x)if(v){if(Number(f)<x||Number(f)>v){_=h.attr("error-range")??`Please input a number between ${x} and ${v}`,i.preventDefault();break}}else{_=h.attr("error-range")??`Please input greater than ${x}`,i.preventDefault();break}else{_=h.attr("error-range")??`Please input less than ${v}`,i.preventDefault();break}}else if(m[b]=="unique"&&f.length!=0){if(h.data("old")&&await h.data("old").toLowerCase()==f){i.preventDefault();break}await Axios.get(`${a[t][m[b]].url}/${f}`,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8",Accept:"application/json"},responseType:"json"}).then(x=>{Object.keys(x.data).length>0&&(_=a[t][m[b]].message)})}h.removeClass(e==null?void 0:e.inputClass),p.length>0?(e!=null&&e.inputClass&&_.length!=0&&h.addClass(e==null?void 0:e.inputClass),p.text(_)):(e!=null&&e.inputClass&&_.length!=0&&h.addClass(e==null?void 0:e.inputClass),(!e||e!=null&&e.showMessage)&&h.after(`<span class="${(e==null?void 0:e.messageClass)??"error"}">${_}</span>`))})})};function l$(n,r,e,i){const o=$(n),a=r,l=Object.keys(a);let t=[!1];l.length>0&&(l.map(async h=>{const f=o.find(`[name=${h}]`),p=f.val().toString(),_=f.parent().find(".error");let g="";const m=Object.keys(a[h]);for(var b=0;b<m.length;b++){if(m[b]=="required"&&p.length==0){g="Please input this field",t.push(!0);break}if(m[b]=="checkbox"){if(!f[0].checked){g="Please check the box above",t.push(!0);break}}else if(m[b]=="email"){if(!new RegExp("([a-zA-Z0-9._]{5,30}[@][a-zA-Z]{2,20}[.][a-zA-Z]{2,20})+$","").test(p)){g="Please input a valid email",t.push(!0);break}}else if(m[b]=="phone"){if(!new RegExp("([0]{1}[1-9]{1}[0-9]{7,8})+$","").test(p)){g="Please input a valid phone",t.push(!0);break}}else if(m[b]=="image"){if(p.length==0){g="Please choose a photo",t.push(!0);break}}else if(m[b]=="match"){if(p.length!=0){p!=$(`[name=${a[h][m[b]]}]`).val()&&(g="Password your entered not match."),t.push(!0);break}}else if(m[b]=="unique"&&p.length!=0){if(f.data("old")&&await f.data("old").toLowerCase()==p){t.push(!0);break}await Axios.get(`${a[h][m[b]].url}/${p}`,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8",Accept:"application/json"},responseType:"json"}).then(x=>{Object.keys(x.data).length>0&&(g=a[h][m[b]].message,t.push(!0))})}}f.removeClass(e==null?void 0:e.inputClass),_.length>0?(e!=null&&e.inputClass&&g.length!=0&&f.addClass(e==null?void 0:e.inputClass),_.text(g)):(e!=null&&e.inputClass&&g.length!=0&&f.addClass(e==null?void 0:e.inputClass),(!e||e!=null&&e.showMessage)&&f.after(`<span class="${(e==null?void 0:e.messageClass)??"error"}">${g}</span>`))}),i(t))}window.$readURL=function(n,r){if(n.files&&n.files[0]){var e=new FileReader;e.onload=function(i){r(i.target.result,n.files[0])},e.readAsDataURL(n.files[0])}};window.$onConfirmMessage=function(n,r,e,i,o){let a={customClass:"confirm-message",icon:"warning",html:r,showCloseButton:!1,showCancelButton:!0,focusConfirm:!1,focusCancel:!0,confirmButtonText:e.confirm,cancelButtonText:e.cancel};i&&(a=Object.assign({},a,{input:i.type,inputValue:i.value,inputPlaceholder:i.text})),Swal.fire(a).then(l=>{l.isConfirmed&&(n?Array.isArray(n)?l.value==1?location.href=n[0]:location.href=n[1]:location.href=n:o())})};window.$quillPatchValue=function(n,r){$(r).val(n.root.innerHTML),n.on("text-change",function(e,i,o){$(r).val(n.root.innerHTML)})};window.$quillSetContentHtml=function(n){n.map(function(r){const e=r.content.clipboard.convert(r.html);r.content.setContents(e,"user")})};var _4={exports:{}},fM;function c$(){return fM||(fM=1,function(n){(function(r){r(["jquery"],function(e){return function(){var i,o,a=0,l={error:"error",info:"info",success:"success",warning:"warning"},t={clear:x,remove:v,error:f,getContainer:p,info:_,options:{},subscribe:g,success:m,version:"2.1.4",warning:b},h;return t;function f(ne,Ae,fe){return X({type:l.error,iconClass:Q().iconClasses.error,message:ne,optionsOverride:fe,title:Ae})}function p(ne,Ae){return ne||(ne=Q()),i=e("#"+ne.containerId),i.length||Ae&&(i=F(ne)),i}function _(ne,Ae,fe){return X({type:l.info,iconClass:Q().iconClasses.info,message:ne,optionsOverride:fe,title:Ae})}function g(ne){o=ne}function m(ne,Ae,fe){return X({type:l.success,iconClass:Q().iconClasses.success,message:ne,optionsOverride:fe,title:Ae})}function b(ne,Ae,fe){return X({type:l.warning,iconClass:Q().iconClasses.warning,message:ne,optionsOverride:fe,title:Ae})}function x(ne,Ae){var fe=Q();i||p(fe),B(ne,fe,Ae)||S(fe)}function v(ne){var Ae=Q();if(i||p(Ae),ne&&e(":focus",ne).length===0){ee(ne);return}i.children().length&&i.remove()}function S(ne){for(var Ae=i.children(),fe=Ae.length-1;fe>=0;fe--)B(e(Ae[fe]),ne)}function B(ne,Ae,fe){var ce=fe&&fe.force?fe.force:!1;return ne&&(ce||e(":focus",ne).length===0)?(ne[Ae.hideMethod]({duration:Ae.hideDuration,easing:Ae.hideEasing,complete:function(){ee(ne)}}),!0):!1}function F(ne){return i=e("<div/>").attr("id",ne.containerId).addClass(ne.positionClass),i.appendTo(e(ne.target)),i}function O(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function V(ne){o&&o(ne)}function X(ne){var Ae=Q(),fe=ne.iconClass||Ae.iconClass;if(typeof ne.optionsOverride<"u"&&(Ae=e.extend(Ae,ne.optionsOverride),fe=ne.optionsOverride.iconClass||fe),Ge(Ae,ne))return;a++,i=p(Ae,!0);var ce=null,G=e("<div/>"),Z=e("<div/>"),z=e("<div/>"),k=e("<div/>"),R=e(Ae.closeHtml),N={intervalId:null,hideEta:null,maxHideTime:null},U={toastId:a,state:"visible",startTime:new Date,options:Ae,map:ne};return de(),Te(),xe(),V(U),Ae.debug&&console&&console.log(U),G;function Y(Ze){return Ze==null&&(Ze=""),Ze.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function de(){Ue(),Oe(),re(),ie(),Be(),He(),pe(),J()}function J(){var Ze="";switch(ne.iconClass){case"toast-success":case"toast-info":Ze="polite";break;default:Ze="assertive"}G.attr("aria-live",Ze)}function xe(){Ae.closeOnHover&&G.hover(ot,st),!Ae.onclick&&Ae.tapToDismiss&&G.click(Ne),Ae.closeButton&&R&&R.click(function(Ze){Ze.stopPropagation?Ze.stopPropagation():Ze.cancelBubble!==void 0&&Ze.cancelBubble!==!0&&(Ze.cancelBubble=!0),Ae.onCloseClick&&Ae.onCloseClick(Ze),Ne(!0)}),Ae.onclick&&G.click(function(Ze){Ae.onclick(Ze),Ne()})}function Te(){G.hide(),G[Ae.showMethod]({duration:Ae.showDuration,easing:Ae.showEasing,complete:Ae.onShown}),Ae.timeOut>0&&(ce=setTimeout(Ne,Ae.timeOut),N.maxHideTime=parseFloat(Ae.timeOut),N.hideEta=new Date().getTime()+N.maxHideTime,Ae.progressBar&&(N.intervalId=setInterval(Je,10)))}function Ue(){ne.iconClass&&G.addClass(Ae.toastClass).addClass(fe)}function pe(){Ae.newestOnTop?i.prepend(G):i.append(G)}function Oe(){if(ne.title){var Ze=ne.title;Ae.escapeHtml&&(Ze=Y(ne.title)),Z.append(Ze).addClass(Ae.titleClass),G.append(Z)}}function re(){if(ne.message){var Ze=ne.message;Ae.escapeHtml&&(Ze=Y(ne.message)),z.append(Ze).addClass(Ae.messageClass),G.append(z)}}function ie(){Ae.closeButton&&(R.addClass(Ae.closeClass).attr("role","button"),G.prepend(R))}function Be(){Ae.progressBar&&(k.addClass(Ae.progressClass),G.prepend(k))}function He(){Ae.rtl&&G.addClass("rtl")}function Ge(Ze,bt){if(Ze.preventDuplicates){if(bt.message===h)return!0;h=bt.message}return!1}function Ne(Ze){var bt=Ze&&Ae.closeMethod!==!1?Ae.closeMethod:Ae.hideMethod,yt=Ze&&Ae.closeDuration!==!1?Ae.closeDuration:Ae.hideDuration,Nt=Ze&&Ae.closeEasing!==!1?Ae.closeEasing:Ae.hideEasing;if(!(e(":focus",G).length&&!Ze))return clearTimeout(N.intervalId),G[bt]({duration:yt,easing:Nt,complete:function(){ee(G),clearTimeout(ce),Ae.onHidden&&U.state!=="hidden"&&Ae.onHidden(),U.state="hidden",U.endTime=new Date,V(U)}})}function st(){(Ae.timeOut>0||Ae.extendedTimeOut>0)&&(ce=setTimeout(Ne,Ae.extendedTimeOut),N.maxHideTime=parseFloat(Ae.extendedTimeOut),N.hideEta=new Date().getTime()+N.maxHideTime)}function ot(){clearTimeout(ce),N.hideEta=0,G.stop(!0,!0)[Ae.showMethod]({duration:Ae.showDuration,easing:Ae.showEasing})}function Je(){var Ze=(N.hideEta-new Date().getTime())/N.maxHideTime*100;k.width(Ze+"%")}}function Q(){return e.extend({},O(),t.options)}function ee(ne){i||(i=p()),!ne.is(":visible")&&(ne.remove(),ne=null,i.children().length===0&&(i.remove(),h=void 0))}}()})})(function(r,e){n.exports?n.exports=e(IC()):window.toastr=e(window.jQuery)})}(_4)),_4.exports}var u$=c$();const h$=s0(u$);var v4={exports:{}};const f$="modulepreload",d$=function(n){return"/build/"+n},dM={},qS=function(r,e,i){let o=Promise.resolve();if(e&&e.length>0){let l=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),h=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));o=l(e.map(f=>{if(f=d$(f),f in dM)return;dM[f]=!0;const p=f.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${_}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":f$,p||(g.as="script"),g.crossOrigin="",g.href=f,h&&g.setAttribute("nonce",h),document.head.appendChild(g),p)return new Promise((m,b)=>{g.addEventListener("load",m),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=l,window.dispatchEvent(t),!t.defaultPrevented)throw l}return o.then(l=>{for(const t of l||[])t.status==="rejected"&&a(t.reason);return r().catch(a)})};function Nl(n){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nl(n)}var Ef=Uint8Array,rp=Uint16Array,VE=Int32Array,g5=new Ef([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),y5=new Ef([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),YS=new Ef([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lO=function(n,r){for(var e=new rp(31),i=0;i<31;++i)e[i]=r+=1<<n[i-1];for(var o=new VE(e[30]),i=1;i<30;++i)for(var a=e[i];a<e[i+1];++a)o[a]=a-e[i]<<5|i;return{b:e,r:o}},cO=lO(g5,2),uO=cO.b,XS=cO.r;uO[28]=258,XS[258]=28;var hO=lO(y5,0),p$=hO.b,pM=hO.r,ZS=new rp(32768);for(var vc=0;vc<32768;++vc){var Sg=(vc&43690)>>1|(vc&21845)<<1;Sg=(Sg&52428)>>2|(Sg&13107)<<2,Sg=(Sg&61680)>>4|(Sg&3855)<<4,ZS[vc]=((Sg&65280)>>8|(Sg&255)<<8)>>1}var pm=function(n,r,e){for(var i=n.length,o=0,a=new rp(r);o<i;++o)n[o]&&++a[n[o]-1];var l=new rp(r);for(o=1;o<r;++o)l[o]=l[o-1]+a[o-1]<<1;var t;if(e){t=new rp(1<<r);var h=15-r;for(o=0;o<i;++o)if(n[o])for(var f=o<<4|n[o],p=r-n[o],_=l[n[o]-1]++<<p,g=_|(1<<p)-1;_<=g;++_)t[ZS[_]>>h]=f}else for(t=new rp(i),o=0;o<i;++o)n[o]&&(t[o]=ZS[l[n[o]-1]++]>>15-n[o]);return t},Jg=new Ef(288);for(var vc=0;vc<144;++vc)Jg[vc]=8;for(var vc=144;vc<256;++vc)Jg[vc]=9;for(var vc=256;vc<280;++vc)Jg[vc]=7;for(var vc=280;vc<288;++vc)Jg[vc]=8;var $v=new Ef(32);for(var vc=0;vc<32;++vc)$v[vc]=5;var A$=pm(Jg,9,0),m$=pm(Jg,9,1),g$=pm($v,5,0),y$=pm($v,5,1),b4=function(n){for(var r=n[0],e=1;e<n.length;++e)n[e]>r&&(r=n[e]);return r},mA=function(n,r,e){var i=r/8|0;return(n[i]|n[i+1]<<8)>>(r&7)&e},x4=function(n,r){var e=r/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(r&7)},GE=function(n){return(n+7)/8|0},fO=function(n,r,e){return(e==null||e>n.length)&&(e=n.length),new Ef(n.subarray(r,e))},_$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yA=function(n,r,e){var i=new Error(r||_$[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,yA),!e)throw i;return i},v$=function(n,r,e,i){var o=n.length,a=0;if(!o||r.f&&!r.l)return e||new Ef(0);var l=!e,t=l||r.i!=2,h=r.i;l&&(e=new Ef(o*3));var f=function(He){var Ge=e.length;if(He>Ge){var Ne=new Ef(Math.max(Ge*2,He));Ne.set(e),e=Ne}},p=r.f||0,_=r.p||0,g=r.b||0,m=r.l,b=r.d,x=r.m,v=r.n,S=o*8;do{if(!m){p=mA(n,_,1);var B=mA(n,_+1,3);if(_+=3,B)if(B==1)m=m$,b=y$,x=9,v=5;else if(B==2){var X=mA(n,_,31)+257,Q=mA(n,_+10,15)+4,ee=X+mA(n,_+5,31)+1;_+=14;for(var ne=new Ef(ee),Ae=new Ef(19),fe=0;fe<Q;++fe)Ae[YS[fe]]=mA(n,_+fe*3,7);_+=Q*3;for(var ce=b4(Ae),G=(1<<ce)-1,Z=pm(Ae,ce,1),fe=0;fe<ee;){var z=Z[mA(n,_,G)];_+=z&15;var F=z>>4;if(F<16)ne[fe++]=F;else{var k=0,R=0;for(F==16?(R=3+mA(n,_,3),_+=2,k=ne[fe-1]):F==17?(R=3+mA(n,_,7),_+=3):F==18&&(R=11+mA(n,_,127),_+=7);R--;)ne[fe++]=k}}var N=ne.subarray(0,X),U=ne.subarray(X);x=b4(N),v=b4(U),m=pm(N,x,1),b=pm(U,v,1)}else yA(1);else{var F=GE(_)+4,O=n[F-4]|n[F-3]<<8,V=F+O;if(V>o){h&&yA(0);break}t&&f(g+O),e.set(n.subarray(F,V),g),r.b=g+=O,r.p=_=V*8,r.f=p;continue}if(_>S){h&&yA(0);break}}t&&f(g+131072);for(var Y=(1<<x)-1,de=(1<<v)-1,J=_;;J=_){var k=m[x4(n,_)&Y],xe=k>>4;if(_+=k&15,_>S){h&&yA(0);break}if(k||yA(2),xe<256)e[g++]=xe;else if(xe==256){J=_,m=null;break}else{var Te=xe-254;if(xe>264){var fe=xe-257,Ue=g5[fe];Te=mA(n,_,(1<<Ue)-1)+uO[fe],_+=Ue}var pe=b[x4(n,_)&de],Oe=pe>>4;pe||yA(3),_+=pe&15;var U=p$[Oe];if(Oe>3){var Ue=y5[Oe];U+=x4(n,_)&(1<<Ue)-1,_+=Ue}if(_>S){h&&yA(0);break}t&&f(g+131072);var re=g+Te;if(g<U){var ie=a-U,Be=Math.min(U,re);for(ie+g<0&&yA(3);g<Be;++g)e[g]=i[ie+g]}for(;g<re;++g)e[g]=e[g-U]}}r.l=m,r.p=J,r.b=g,r.f=p,m&&(p=1,r.m=x,r.d=b,r.n=v)}while(!p);return g!=e.length&&l?fO(e,0,g):e.subarray(0,g)},Pm=function(n,r,e){e<<=r&7;var i=r/8|0;n[i]|=e,n[i+1]|=e>>8},K_=function(n,r,e){e<<=r&7;var i=r/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},w4=function(n,r){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var o=e.length,a=e.slice();if(!o)return{t:pO,l:0};if(o==1){var l=new Ef(e[0].s+1);return l[e[0].s]=1,{t:l,l:1}}e.sort(function(V,X){return V.f-X.f}),e.push({s:-1,f:25001});var t=e[0],h=e[1],f=0,p=1,_=2;for(e[0]={s:-1,f:t.f+h.f,l:t,r:h};p!=o-1;)t=e[e[f].f<e[_].f?f++:_++],h=e[f!=p&&e[f].f<e[_].f?f++:_++],e[p++]={s:-1,f:t.f+h.f,l:t,r:h};for(var g=a[0].s,i=1;i<o;++i)a[i].s>g&&(g=a[i].s);var m=new rp(g+1),b=JS(e[p-1],m,0);if(b>r){var i=0,x=0,v=b-r,S=1<<v;for(a.sort(function(X,Q){return m[Q.s]-m[X.s]||X.f-Q.f});i<o;++i){var B=a[i].s;if(m[B]>r)x+=S-(1<<b-m[B]),m[B]=r;else break}for(x>>=v;x>0;){var F=a[i].s;m[F]<r?x-=1<<r-m[F]++-1:++i}for(;i>=0&&x;--i){var O=a[i].s;m[O]==r&&(--m[O],++x)}b=r}return{t:new Ef(m),l:b}},JS=function(n,r,e){return n.s==-1?Math.max(JS(n.l,r,e+1),JS(n.r,r,e+1)):r[n.s]=e},AM=function(n){for(var r=n.length;r&&!n[--r];);for(var e=new rp(++r),i=0,o=n[0],a=1,l=function(h){e[i++]=h},t=1;t<=r;++t)if(n[t]==o&&t!=r)++a;else{if(!o&&a>2){for(;a>138;a-=138)l(32754);a>2&&(l(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(l(o),--a;a>6;a-=6)l(8304);a>2&&(l(a-3<<5|8208),a=0)}for(;a--;)l(o);a=1,o=n[t]}return{c:e.subarray(0,i),n:r}},q_=function(n,r){for(var e=0,i=0;i<r.length;++i)e+=n[i]*r[i];return e},dO=function(n,r,e){var i=e.length,o=GE(r+2);n[o]=i&255,n[o+1]=i>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var a=0;a<i;++a)n[o+a+4]=e[a];return(o+4+i)*8},mM=function(n,r,e,i,o,a,l,t,h,f,p){Pm(r,p++,e),++o[256];for(var _=w4(o,15),g=_.t,m=_.l,b=w4(a,15),x=b.t,v=b.l,S=AM(g),B=S.c,F=S.n,O=AM(x),V=O.c,X=O.n,Q=new rp(19),ee=0;ee<B.length;++ee)++Q[B[ee]&31];for(var ee=0;ee<V.length;++ee)++Q[V[ee]&31];for(var ne=w4(Q,7),Ae=ne.t,fe=ne.l,ce=19;ce>4&&!Ae[YS[ce-1]];--ce);var G=f+5<<3,Z=q_(o,Jg)+q_(a,$v)+l,z=q_(o,g)+q_(a,x)+l+14+3*ce+q_(Q,Ae)+2*Q[16]+3*Q[17]+7*Q[18];if(h>=0&&G<=Z&&G<=z)return dO(r,p,n.subarray(h,h+f));var k,R,N,U;if(Pm(r,p,1+(z<Z)),p+=2,z<Z){k=pm(g,m,0),R=g,N=pm(x,v,0),U=x;var Y=pm(Ae,fe,0);Pm(r,p,F-257),Pm(r,p+5,X-1),Pm(r,p+10,ce-4),p+=14;for(var ee=0;ee<ce;++ee)Pm(r,p+3*ee,Ae[YS[ee]]);p+=3*ce;for(var de=[B,V],J=0;J<2;++J)for(var xe=de[J],ee=0;ee<xe.length;++ee){var Te=xe[ee]&31;Pm(r,p,Y[Te]),p+=Ae[Te],Te>15&&(Pm(r,p,xe[ee]>>5&127),p+=xe[ee]>>12)}}else k=A$,R=Jg,N=g$,U=$v;for(var ee=0;ee<t;++ee){var Ue=i[ee];if(Ue>255){var Te=Ue>>18&31;K_(r,p,k[Te+257]),p+=R[Te+257],Te>7&&(Pm(r,p,Ue>>23&31),p+=g5[Te]);var pe=Ue&31;K_(r,p,N[pe]),p+=U[pe],pe>3&&(K_(r,p,Ue>>5&8191),p+=y5[pe])}else K_(r,p,k[Ue]),p+=R[Ue]}return K_(r,p,k[256]),p+R[256]},b$=new VE([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pO=new Ef(0),x$=function(n,r,e,i,o,a){var l=a.z||n.length,t=new Ef(i+l+5*(1+Math.ceil(l/7e3))+o),h=t.subarray(i,t.length-o),f=a.l,p=(a.r||0)&7;if(r){p&&(h[0]=a.r>>3);for(var _=b$[r-1],g=_>>13,m=_&8191,b=(1<<e)-1,x=a.p||new rp(32768),v=a.h||new rp(b+1),S=Math.ceil(e/3),B=2*S,F=function(st){return(n[st]^n[st+1]<<S^n[st+2]<<B)&b},O=new VE(25e3),V=new rp(288),X=new rp(32),Q=0,ee=0,ne=a.i||0,Ae=0,fe=a.w||0,ce=0;ne+2<l;++ne){var G=F(ne),Z=ne&32767,z=v[G];if(x[Z]=z,v[G]=Z,fe<=ne){var k=l-ne;if((Q>7e3||Ae>24576)&&(k>423||!f)){p=mM(n,h,0,O,V,X,ee,Ae,ce,ne-ce,p),Ae=Q=ee=0,ce=ne;for(var R=0;R<286;++R)V[R]=0;for(var R=0;R<30;++R)X[R]=0}var N=2,U=0,Y=m,de=Z-z&32767;if(k>2&&G==F(ne-de))for(var J=Math.min(g,k)-1,xe=Math.min(32767,ne),Te=Math.min(258,k);de<=xe&&--Y&&Z!=z;){if(n[ne+N]==n[ne+N-de]){for(var Ue=0;Ue<Te&&n[ne+Ue]==n[ne+Ue-de];++Ue);if(Ue>N){if(N=Ue,U=de,Ue>J)break;for(var pe=Math.min(de,Ue-2),Oe=0,R=0;R<pe;++R){var re=ne-de+R&32767,ie=x[re],Be=re-ie&32767;Be>Oe&&(Oe=Be,z=re)}}}Z=z,z=x[Z],de+=Z-z&32767}if(U){O[Ae++]=268435456|XS[N]<<18|pM[U];var He=XS[N]&31,Ge=pM[U]&31;ee+=g5[He]+y5[Ge],++V[257+He],++X[Ge],fe=ne+N,++Q}else O[Ae++]=n[ne],++V[n[ne]]}}for(ne=Math.max(ne,fe);ne<l;++ne)O[Ae++]=n[ne],++V[n[ne]];p=mM(n,h,f,O,V,X,ee,Ae,ce,ne-ce,p),f||(a.r=p&7|h[p/8|0]<<3,p-=7,a.h=v,a.p=x,a.i=ne,a.w=fe)}else{for(var ne=a.w||0;ne<l+f;ne+=65535){var Ne=ne+65535;Ne>=l&&(h[p/8|0]=f,Ne=l),p=dO(h,p+1,n.subarray(ne,Ne))}a.i=l}return fO(t,0,i+GE(p)+o)},AO=function(){var n=1,r=0;return{p:function(e){for(var i=n,o=r,a=e.length|0,l=0;l!=a;){for(var t=Math.min(l+2655,a);l<t;++l)o+=i+=e[l];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}n=i,r=o},d:function(){return n%=65521,r%=65521,(n&255)<<24|(n&65280)<<8|(r&255)<<8|r>>8}}},w$=function(n,r,e,i,o){if(!o&&(o={l:1},r.dictionary)){var a=r.dictionary.subarray(-32768),l=new Ef(a.length+n.length);l.set(a),l.set(n,a.length),n=l,o.w=a.length}return x$(n,r.level==null?6:r.level,r.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+r.mem,e,i,o)},mO=function(n,r,e){for(;e;++r)n[r]=e,e>>>=8},S$=function(n,r){var e=r.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(r.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,r.dictionary){var o=AO();o.p(r.dictionary),mO(n,2,o.d())}},C$=function(n,r){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&yA(6,"invalid zlib data"),(n[1]>>5&1)==1&&yA(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function eC(n,r){r||(r={});var e=AO();e.p(n);var i=w$(n,r,r.dictionary?6:2,4);return S$(i,r),mO(i,i.length-4,e.d()),i}function E$(n,r){return v$(n.subarray(C$(n),-4),{i:2},r,r)}var B$=typeof TextDecoder<"u"&&new TextDecoder,T$=0;try{B$.decode(pO,{stream:!0}),T$=1}catch{}var _o=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function S4(){_o.console&&typeof _o.console.log=="function"&&_o.console.log.apply(_o.console,arguments)}var Xl={log:S4,warn:function(n){_o.console&&(typeof _o.console.warn=="function"?_o.console.warn.apply(_o.console,arguments):S4.call(null,arguments))},error:function(n){_o.console&&(typeof _o.console.error=="function"?_o.console.error.apply(_o.console,arguments):S4(n))}};function C4(n,r,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){U0(i.response,r,e)},i.onerror=function(){Xl.error("could not download file")},i.send()}function gM(n){var r=new XMLHttpRequest;r.open("HEAD",n,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function gx(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}}var bv,tC,U0=_o.saveAs||((typeof window>"u"?"undefined":Nl(window))!=="object"||window!==_o?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,r,e){var i=_o.URL||_o.webkitURL,o=document.createElement("a");r=r||n.name||"download",o.download=r,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?gM(o.href)?C4(n,r,e):gx(o,o.target="_blank"):gx(o)):(o.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){gx(o)},0))}:"msSaveOrOpenBlob"in navigator?function(n,r,e){if(r=r||n.name||"download",typeof n=="string")if(gM(n))C4(n,r,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){gx(i)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:Nl(a)!=="object"&&(Xl.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(n,e),r)}:function(n,r,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return C4(n,r,e);var o=n.type==="application/octet-stream",a=/constructor/i.test(_o.HTMLElement)||_o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&a)&&(typeof FileReader>"u"?"undefined":Nl(FileReader))==="object"){var t=new FileReader;t.onloadend=function(){var p=t.result;p=l?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},t.readAsDataURL(n)}else{var h=_o.URL||_o.webkitURL,f=h.createObjectURL(n);i?i.location=f:location.href=f,i=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function gO(n){var r;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<e.length;i++){var o=e[i].re,a=e[i].process,l=o.exec(n);l&&(r=a(l),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return t.length==1&&(t="0"+t),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+t+h+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function E4(n,r){var e=n[0],i=n[1],o=n[2],a=n[3];e=yf(e,i,o,a,r[0],7,-680876936),a=yf(a,e,i,o,r[1],12,-389564586),o=yf(o,a,e,i,r[2],17,606105819),i=yf(i,o,a,e,r[3],22,-1044525330),e=yf(e,i,o,a,r[4],7,-176418897),a=yf(a,e,i,o,r[5],12,1200080426),o=yf(o,a,e,i,r[6],17,-1473231341),i=yf(i,o,a,e,r[7],22,-45705983),e=yf(e,i,o,a,r[8],7,1770035416),a=yf(a,e,i,o,r[9],12,-1958414417),o=yf(o,a,e,i,r[10],17,-42063),i=yf(i,o,a,e,r[11],22,-1990404162),e=yf(e,i,o,a,r[12],7,1804603682),a=yf(a,e,i,o,r[13],12,-40341101),o=yf(o,a,e,i,r[14],17,-1502002290),e=_f(e,i=yf(i,o,a,e,r[15],22,1236535329),o,a,r[1],5,-165796510),a=_f(a,e,i,o,r[6],9,-1069501632),o=_f(o,a,e,i,r[11],14,643717713),i=_f(i,o,a,e,r[0],20,-373897302),e=_f(e,i,o,a,r[5],5,-701558691),a=_f(a,e,i,o,r[10],9,38016083),o=_f(o,a,e,i,r[15],14,-660478335),i=_f(i,o,a,e,r[4],20,-405537848),e=_f(e,i,o,a,r[9],5,568446438),a=_f(a,e,i,o,r[14],9,-1019803690),o=_f(o,a,e,i,r[3],14,-187363961),i=_f(i,o,a,e,r[8],20,1163531501),e=_f(e,i,o,a,r[13],5,-1444681467),a=_f(a,e,i,o,r[2],9,-51403784),o=_f(o,a,e,i,r[7],14,1735328473),e=vf(e,i=_f(i,o,a,e,r[12],20,-1926607734),o,a,r[5],4,-378558),a=vf(a,e,i,o,r[8],11,-2022574463),o=vf(o,a,e,i,r[11],16,1839030562),i=vf(i,o,a,e,r[14],23,-35309556),e=vf(e,i,o,a,r[1],4,-1530992060),a=vf(a,e,i,o,r[4],11,1272893353),o=vf(o,a,e,i,r[7],16,-155497632),i=vf(i,o,a,e,r[10],23,-1094730640),e=vf(e,i,o,a,r[13],4,681279174),a=vf(a,e,i,o,r[0],11,-358537222),o=vf(o,a,e,i,r[3],16,-722521979),i=vf(i,o,a,e,r[6],23,76029189),e=vf(e,i,o,a,r[9],4,-640364487),a=vf(a,e,i,o,r[12],11,-421815835),o=vf(o,a,e,i,r[15],16,530742520),e=bf(e,i=vf(i,o,a,e,r[2],23,-995338651),o,a,r[0],6,-198630844),a=bf(a,e,i,o,r[7],10,1126891415),o=bf(o,a,e,i,r[14],15,-1416354905),i=bf(i,o,a,e,r[5],21,-57434055),e=bf(e,i,o,a,r[12],6,1700485571),a=bf(a,e,i,o,r[3],10,-1894986606),o=bf(o,a,e,i,r[10],15,-1051523),i=bf(i,o,a,e,r[1],21,-2054922799),e=bf(e,i,o,a,r[8],6,1873313359),a=bf(a,e,i,o,r[15],10,-30611744),o=bf(o,a,e,i,r[6],15,-1560198380),i=bf(i,o,a,e,r[13],21,1309151649),e=bf(e,i,o,a,r[4],6,-145523070),a=bf(a,e,i,o,r[11],10,-1120210379),o=bf(o,a,e,i,r[2],15,718787259),i=bf(i,o,a,e,r[9],21,-343485551),n[0]=Dg(e,n[0]),n[1]=Dg(i,n[1]),n[2]=Dg(o,n[2]),n[3]=Dg(a,n[3])}function _5(n,r,e,i,o,a){return r=Dg(Dg(r,n),Dg(i,a)),Dg(r<<o|r>>>32-o,e)}function yf(n,r,e,i,o,a,l){return _5(r&e|~r&i,n,r,o,a,l)}function _f(n,r,e,i,o,a,l){return _5(r&i|e&~i,n,r,o,a,l)}function vf(n,r,e,i,o,a,l){return _5(r^e^i,n,r,o,a,l)}function bf(n,r,e,i,o,a,l){return _5(e^(r|~i),n,r,o,a,l)}function yO(n){var r,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=n.length;r+=64)E4(i,I$(n.substring(r-64,r)));n=n.substring(r-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<n.length;r++)o[r>>2]|=n.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(E4(i,o),r=0;r<16;r++)o[r]=0;return o[14]=8*e,E4(i,o),i}function I$(n){var r,e=[];for(r=0;r<64;r+=4)e[r>>2]=n.charCodeAt(r)+(n.charCodeAt(r+1)<<8)+(n.charCodeAt(r+2)<<16)+(n.charCodeAt(r+3)<<24);return e}bv=_o.atob.bind(_o),tC=_o.btoa.bind(_o);var yM="0123456789abcdef".split("");function M$(n){for(var r="",e=0;e<4;e++)r+=yM[n>>8*e+4&15]+yM[n>>8*e&15];return r}function F$(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function rC(n){return yO(n).map(F$).join("")}var P$=function(n){for(var r=0;r<n.length;r++)n[r]=M$(n[r]);return n.join("")}(yO("hello"))!="5d41402abc4b2a76b9719d911017c592";function Dg(n,r){if(P$){var e=(65535&n)+(65535&r);return(n>>16)+(r>>16)+(e>>16)<<16|65535&e}return n+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function nC(n,r){var e,i,o,a;if(n!==e){for(var l=(o=n,a=1+(256/n.length>>0),new Array(a+1).join(o)),t=[],h=0;h<256;h++)t[h]=h;var f=0;for(h=0;h<256;h++){var p=t[h];f=(f+p+l.charCodeAt(h))%256,t[h]=t[f],t[f]=p}e=n,i=t}else t=i;var _=r.length,g=0,m=0,b="";for(h=0;h<_;h++)m=(m+(p=t[g=(g+1)%256]))%256,t[g]=t[m],t[m]=p,l=t[(t[g]+t[m])%256],b+=String.fromCharCode(r.charCodeAt(h)^l);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _M={print:4,modify:8,copy:16,"annot-forms":32};function oy(n,r,e,i){this.v=1,this.r=2;var o=192;n.forEach(function(t){if(_M.perm!==void 0)throw new Error("Invalid permission: "+t);o+=_M[t]}),this.padding="(Â¿N^NuÂAd\0NVÃ¿Ãº\b..\0Â¶Ãh>Â/\fÂ©Ã¾dSiz";var a=(r+this.padding).substr(0,32),l=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,l),this.P=-(1+(255^o)),this.encryptionKey=rC(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=nC(this.encryptionKey,this.padding)}function ay(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var r="",e=n.length,i=0;i<e;i++){var o=n.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?r+="#"+("0"+o.toString(16)).slice(-2):r+=n[i]}return r}function vM(n){if(Nl(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(e,i,o){if(o=o||!1,typeof e!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(e)||(r[e]={});var a=Math.random().toString(35);return r[e][a]=[i,!!o],a},this.unsubscribe=function(e){for(var i in r)if(r[i][e])return delete r[i][e],Object.keys(r[i]).length===0&&delete r[i],!0;return!1},this.publish=function(e){if(r.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var a in r[e]){var l=r[e][a];try{l[0].apply(n,i)}catch(t){_o.console&&Xl.error("jsPDF PubSub Error",t.message,t)}l[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function Kv(n){if(!(this instanceof Kv))return new Kv(n);var r="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&r.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function _O(n,r){this.gState=n,this.matrix=r,this.id="",this.objectNumber=-1}function Ig(n,r,e,i,o){if(!(this instanceof Ig))return new Ig(n,r,e,i,o);this.type=n==="axial"?2:3,this.coords=r,this.colors=e,_O.call(this,i,o)}function K0(n,r,e,i,o){if(!(this instanceof K0))return new K0(n,r,e,i,o);this.boundingBox=n,this.xStep=r,this.yStep=e,this.stream="",this.cloneIndex=0,_O.call(this,i,o)}function yo(n){var r,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],a=arguments[3],l=[],t=1,h=16,f="S",p=null;Nl(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,o=n.format||o,a=n.compress||n.compressPdf||a,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),t=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(r=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),l=n.filters||(a===!0?["FlateEncode"]:l),i=i||"mm",e=(""+(e||"P")).toLowerCase();var _=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=vM;var b="1.3",x=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(Fe){b=Fe};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var S=m.__private__.getPageFormat=function(Fe){return v[Fe]};o=o||"a4";var B={COMPAT:"compat",ADVANCED:"advanced"},F=B.COMPAT;function O(){this.saveGraphicsState(),Je(new Qt(er,0,0,-er,0,vs()*er).toString()+" cm"),this.setFontSize(this.getFontSize()/er),f="n",F=B.ADVANCED}function V(){this.restoreGraphicsState(),f="S",F=B.COMPAT}var X=m.__private__.combineFontStyleAndFontWeight=function(Fe,pt){if(Fe=="bold"&&pt=="normal"||Fe=="bold"&&pt==400||Fe=="normal"&&pt=="italic"||Fe=="bold"&&pt=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pt&&(Fe=pt==400||pt==="normal"?Fe==="italic"?"italic":"normal":pt!=700&&pt!=="bold"||Fe!=="normal"?(pt==700?"bold":pt)+""+Fe:"bold"),Fe};m.advancedAPI=function(Fe){var pt=F===B.COMPAT;return pt&&O.call(this),typeof Fe!="function"||(Fe(this),pt&&V.call(this)),this},m.compatAPI=function(Fe){var pt=F===B.ADVANCED;return pt&&V.call(this),typeof Fe!="function"||(Fe(this),pt&&O.call(this)),this},m.isAdvancedAPI=function(){return F===B.ADVANCED};var Q,ee=function(Fe){if(F!==B.ADVANCED)throw new Error(Fe+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ne=m.roundToPrecision=m.__private__.roundToPrecision=function(Fe,pt){var lr=r||pt;if(isNaN(Fe)||isNaN(lr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Fe.toFixed(lr).replace(/0+$/,"")};Q=m.hpf=m.__private__.hpf=typeof h=="number"?function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(Fe,h)}:h==="smart"?function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(Fe,Fe>-1&&Fe<1?16:5)}:function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(Fe,16)};var Ae=m.f2=m.__private__.f2=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.f2");return ne(Fe,2)},fe=m.__private__.f3=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.f3");return ne(Fe,3)},ce=m.scale=m.__private__.scale=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.scale");return F===B.COMPAT?Fe*er:F===B.ADVANCED?Fe:void 0},G=function(Fe){return F===B.COMPAT?vs()-Fe:F===B.ADVANCED?Fe:void 0},Z=function(Fe){return ce(G(Fe))};m.__private__.setPrecision=m.setPrecision=function(Fe){typeof parseInt(Fe,10)=="number"&&(r=parseInt(Fe,10))};var z,k="00000000000000000000000000000000",R=m.__private__.getFileId=function(){return k},N=m.__private__.setFileId=function(Fe){return k=Fe!==void 0&&/^[a-fA-F0-9]{32}$/.test(Fe)?Fe.toUpperCase():k.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(La=new oy(p.userPermissions,p.userPassword,p.ownerPassword,k)),k};m.setFileId=function(Fe){return N(Fe),this},m.getFileId=function(){return R()};var U=m.__private__.convertDateToPDFDate=function(Fe){var pt=Fe.getTimezoneOffset(),lr=pt<0?"+":"-",gr=Math.floor(Math.abs(pt/60)),Kr=Math.abs(pt%60),Zr=[lr,Te(gr),"'",Te(Kr),"'"].join("");return["D:",Fe.getFullYear(),Te(Fe.getMonth()+1),Te(Fe.getDate()),Te(Fe.getHours()),Te(Fe.getMinutes()),Te(Fe.getSeconds()),Zr].join("")},Y=m.__private__.convertPDFDateToDate=function(Fe){var pt=parseInt(Fe.substr(2,4),10),lr=parseInt(Fe.substr(6,2),10)-1,gr=parseInt(Fe.substr(8,2),10),Kr=parseInt(Fe.substr(10,2),10),Zr=parseInt(Fe.substr(12,2),10),Gn=parseInt(Fe.substr(14,2),10);return new Date(pt,lr,gr,Kr,Zr,Gn,0)},de=m.__private__.setCreationDate=function(Fe){var pt;if(Fe===void 0&&(Fe=new Date),Fe instanceof Date)pt=U(Fe);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Fe))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pt=Fe}return z=pt},J=m.__private__.getCreationDate=function(Fe){var pt=z;return Fe==="jsDate"&&(pt=Y(z)),pt};m.setCreationDate=function(Fe){return de(Fe),this},m.getCreationDate=function(Fe){return J(Fe)};var xe,Te=m.__private__.padd2=function(Fe){return("0"+parseInt(Fe)).slice(-2)},Ue=m.__private__.padd2Hex=function(Fe){return("00"+(Fe=Fe.toString())).substr(Fe.length)},pe=0,Oe=[],re=[],ie=0,Be=[],He=[],Ge=!1,Ne=re,st=function(){pe=0,ie=0,re=[],Oe=[],Be=[],Et=nt(),nr=nt()};m.__private__.setCustomOutputDestination=function(Fe){Ge=!0,Ne=Fe};var ot=function(Fe){Ge||(Ne=Fe)};m.__private__.resetCustomOutputDestination=function(){Ge=!1,Ne=re};var Je=m.__private__.out=function(Fe){return Fe=Fe.toString(),ie+=Fe.length+1,Ne.push(Fe),Ne},Ze=m.__private__.write=function(Fe){return Je(arguments.length===1?Fe.toString():Array.prototype.join.call(arguments," "))},bt=m.__private__.getArrayBuffer=function(Fe){for(var pt=Fe.length,lr=new ArrayBuffer(pt),gr=new Uint8Array(lr);pt--;)gr[pt]=Fe.charCodeAt(pt);return lr},yt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return yt};var Nt=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(Fe){return Nt=F===B.ADVANCED?Fe/er:Fe,this};var kt,Gt=m.__private__.getFontSize=m.getFontSize=function(){return F===B.COMPAT?Nt:Nt*er},fr=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(Fe){return fr=Fe,this},m.__private__.getR2L=m.getR2L=function(){return fr};var Tr,yr=m.__private__.setZoomMode=function(Fe){var pt=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Fe))kt=Fe;else if(isNaN(Fe)){if(pt.indexOf(Fe)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Fe+'" is not recognized.');kt=Fe}else kt=parseInt(Fe,10)};m.__private__.getZoomMode=function(){return kt};var Dr,jt=m.__private__.setPageMode=function(Fe){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Fe)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Fe+'" is not recognized.');Tr=Fe};m.__private__.getPageMode=function(){return Tr};var Jt=m.__private__.setLayoutMode=function(Fe){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Fe)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Fe+'" is not recognized.');Dr=Fe};m.__private__.getLayoutMode=function(){return Dr},m.__private__.setDisplayMode=m.setDisplayMode=function(Fe,pt,lr){return yr(Fe),Jt(pt),jt(lr),this};var pr={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(Fe){if(Object.keys(pr).indexOf(Fe)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pr[Fe]},m.__private__.getDocumentProperties=function(){return pr},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(Fe){for(var pt in pr)pr.hasOwnProperty(pt)&&Fe[pt]&&(pr[pt]=Fe[pt]);return this},m.__private__.setDocumentProperty=function(Fe,pt){if(Object.keys(pr).indexOf(Fe)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pr[Fe]=pt};var Ft,er,ur,Yt,mr,Mr={},sn={},Un=[],wn={},Zi={},ai={},_i={},Zn=null,Bn=0,On=[],tr=new vM(m),zn=n.hotfixes||[],Ki={},Qs={},li=[],Qt=function Fe(pt,lr,gr,Kr,Zr,Gn){if(!(this instanceof Fe))return new Fe(pt,lr,gr,Kr,Zr,Gn);isNaN(pt)&&(pt=1),isNaN(lr)&&(lr=0),isNaN(gr)&&(gr=0),isNaN(Kr)&&(Kr=1),isNaN(Zr)&&(Zr=0),isNaN(Gn)&&(Gn=0),this._matrix=[pt,lr,gr,Kr,Zr,Gn]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Fe){this._matrix[0]=Fe}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Fe){this._matrix[1]=Fe}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Fe){this._matrix[2]=Fe}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Fe){this._matrix[3]=Fe}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Fe){this._matrix[4]=Fe}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Fe){this._matrix[5]=Fe}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Fe){this._matrix[0]=Fe}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Fe){this._matrix[1]=Fe}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Fe){this._matrix[2]=Fe}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Fe){this._matrix[3]=Fe}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Fe){this._matrix[4]=Fe}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Fe){this._matrix[5]=Fe}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(Fe){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(Fe)},Qt.prototype.multiply=function(Fe){var pt=Fe.sx*this.sx+Fe.shy*this.shx,lr=Fe.sx*this.shy+Fe.shy*this.sy,gr=Fe.shx*this.sx+Fe.sy*this.shx,Kr=Fe.shx*this.shy+Fe.sy*this.sy,Zr=Fe.tx*this.sx+Fe.ty*this.shx+this.tx,Gn=Fe.tx*this.shy+Fe.ty*this.sy+this.ty;return new Qt(pt,lr,gr,Kr,Zr,Gn)},Qt.prototype.decompose=function(){var Fe=this.sx,pt=this.shy,lr=this.shx,gr=this.sy,Kr=this.tx,Zr=this.ty,Gn=Math.sqrt(Fe*Fe+pt*pt),Hi=(Fe/=Gn)*lr+(pt/=Gn)*gr;lr-=Fe*Hi,gr-=pt*Hi;var ps=Math.sqrt(lr*lr+gr*gr);return Hi/=ps,Fe*(gr/=ps)<pt*(lr/=ps)&&(Fe=-Fe,pt=-pt,Hi=-Hi,Gn=-Gn),{scale:new Qt(Gn,0,0,ps,0,0),translate:new Qt(1,0,0,1,Kr,Zr),rotate:new Qt(Fe,pt,-pt,Fe,0,0),skew:new Qt(1,0,Hi,1,0,0)}},Qt.prototype.toString=function(Fe){return this.join(" ")},Qt.prototype.inversed=function(){var Fe=this.sx,pt=this.shy,lr=this.shx,gr=this.sy,Kr=this.tx,Zr=this.ty,Gn=1/(Fe*gr-pt*lr),Hi=gr*Gn,ps=-pt*Gn,ws=-lr*Gn,Ns=Fe*Gn;return new Qt(Hi,ps,ws,Ns,-Hi*Kr-ws*Zr,-ps*Kr-Ns*Zr)},Qt.prototype.applyToPoint=function(Fe){var pt=Fe.x*this.sx+Fe.y*this.shx+this.tx,lr=Fe.x*this.shy+Fe.y*this.sy+this.ty;return new hr(pt,lr)},Qt.prototype.applyToRectangle=function(Fe){var pt=this.applyToPoint(Fe),lr=this.applyToPoint(new hr(Fe.x+Fe.w,Fe.y+Fe.h));return new Wr(pt.x,pt.y,lr.x-pt.x,lr.y-pt.y)},Qt.prototype.clone=function(){var Fe=this.sx,pt=this.shy,lr=this.shx,gr=this.sy,Kr=this.tx,Zr=this.ty;return new Qt(Fe,pt,lr,gr,Kr,Zr)},m.Matrix=Qt;var Ve=m.matrixMult=function(Fe,pt){return pt.multiply(Fe)},et=new Qt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=et;var We=function(Fe,pt){if(!Zi[Fe]){var lr=(pt instanceof Ig?"Sh":"P")+(Object.keys(wn).length+1).toString(10);pt.id=lr,Zi[Fe]=lr,wn[lr]=pt,tr.publish("addPattern",pt)}};m.ShadingPattern=Ig,m.TilingPattern=K0,m.addShadingPattern=function(Fe,pt){return ee("addShadingPattern()"),We(Fe,pt),this},m.beginTilingPattern=function(Fe){ee("beginTilingPattern()"),Hn(Fe.boundingBox[0],Fe.boundingBox[1],Fe.boundingBox[2]-Fe.boundingBox[0],Fe.boundingBox[3]-Fe.boundingBox[1],Fe.matrix)},m.endTilingPattern=function(Fe,pt){ee("endTilingPattern()"),pt.stream=He[xe].join(`
`),We(Fe,pt),tr.publish("endTilingPattern",pt),li.pop().restore()};var tt=m.__private__.newObject=function(){var Fe=nt();return Ct(Fe,!0),Fe},nt=m.__private__.newObjectDeferred=function(){return pe++,Oe[pe]=function(){return ie},pe},Ct=function(Fe,pt){return pt=typeof pt=="boolean"&&pt,Oe[Fe]=ie,pt&&Je(Fe+" 0 obj"),Fe},rr=m.__private__.newAdditionalObject=function(){var Fe={objId:nt(),content:""};return Be.push(Fe),Fe},Et=nt(),nr=nt(),Fr=m.__private__.decodeColorString=function(Fe){var pt=Fe.split(" ");if(pt.length!==2||pt[1]!=="g"&&pt[1]!=="G")pt.length===5&&(pt[4]==="k"||pt[4]==="K")&&(pt=[(1-pt[0])*(1-pt[3]),(1-pt[1])*(1-pt[3]),(1-pt[2])*(1-pt[3]),"r"]);else{var lr=parseFloat(pt[0]);pt=[lr,lr,lr,"r"]}for(var gr="#",Kr=0;Kr<3;Kr++)gr+=("0"+Math.floor(255*parseFloat(pt[Kr])).toString(16)).slice(-2);return gr},_r=m.__private__.encodeColorString=function(Fe){var pt;typeof Fe=="string"&&(Fe={ch1:Fe});var lr=Fe.ch1,gr=Fe.ch2,Kr=Fe.ch3,Zr=Fe.ch4,Gn=Fe.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof lr=="string"&&lr.charAt(0)!=="#"){var Hi=new gO(lr);if(Hi.ok)lr=Hi.toHex();else if(!/^\d*\.?\d*$/.test(lr))throw new Error('Invalid color "'+lr+'" passed to jsPDF.encodeColorString.')}if(typeof lr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(lr)&&(lr="#"+lr[1]+lr[1]+lr[2]+lr[2]+lr[3]+lr[3]),typeof lr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(lr)){var ps=parseInt(lr.substr(1),16);lr=ps>>16&255,gr=ps>>8&255,Kr=255&ps}if(gr===void 0||Zr===void 0&&lr===gr&&gr===Kr)if(typeof lr=="string")pt=lr+" "+Gn[0];else switch(Fe.precision){case 2:pt=Ae(lr/255)+" "+Gn[0];break;case 3:default:pt=fe(lr/255)+" "+Gn[0]}else if(Zr===void 0||Nl(Zr)==="object"){if(Zr&&!isNaN(Zr.a)&&Zr.a===0)return pt=["1.","1.","1.",Gn[1]].join(" ");if(typeof lr=="string")pt=[lr,gr,Kr,Gn[1]].join(" ");else switch(Fe.precision){case 2:pt=[Ae(lr/255),Ae(gr/255),Ae(Kr/255),Gn[1]].join(" ");break;default:case 3:pt=[fe(lr/255),fe(gr/255),fe(Kr/255),Gn[1]].join(" ")}}else if(typeof lr=="string")pt=[lr,gr,Kr,Zr,Gn[2]].join(" ");else switch(Fe.precision){case 2:pt=[Ae(lr),Ae(gr),Ae(Kr),Ae(Zr),Gn[2]].join(" ");break;case 3:default:pt=[fe(lr),fe(gr),fe(Kr),fe(Zr),Gn[2]].join(" ")}return pt},pn=m.__private__.getFilters=function(){return l},Tn=m.__private__.putStream=function(Fe){var pt=(Fe=Fe||{}).data||"",lr=Fe.filters||pn(),gr=Fe.alreadyAppliedFilters||[],Kr=Fe.addLength1||!1,Zr=pt.length,Gn=Fe.objectId,Hi=function(Qo){return Qo};if(p!==null&&Gn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Hi=La.encryptor(Gn,0));var ps={};lr===!0&&(lr=["FlateEncode"]);var ws=Fe.additionalKeyValues||[],Ns=(ps=yo.API.processDataByFilters!==void 0?yo.API.processDataByFilters(pt,lr):{data:pt,reverseChain:[]}).reverseChain+(Array.isArray(gr)?gr.join(" "):gr.toString());if(ps.data.length!==0&&(ws.push({key:"Length",value:ps.data.length}),Kr===!0&&ws.push({key:"Length1",value:Zr})),Ns.length!=0)if(Ns.split("/").length-1==1)ws.push({key:"Filter",value:Ns});else{ws.push({key:"Filter",value:"["+Ns+"]"});for(var Ws=0;Ws<ws.length;Ws+=1)if(ws[Ws].key==="DecodeParms"){for(var vo=[],qs=0;qs<ps.reverseChain.split("/").length-1;qs+=1)vo.push("null");vo.push(ws[Ws].value),ws[Ws].value="["+vo.join(" ")+"]"}}Je("<<");for(var as=0;as<ws.length;as++)Je("/"+ws[as].key+" "+ws[as].value);Je(">>"),ps.data.length!==0&&(Je("stream"),Je(Hi(ps.data)),Je("endstream"))},Vn=m.__private__.putPage=function(Fe){var pt=Fe.number,lr=Fe.data,gr=Fe.objId,Kr=Fe.contentsObjId;Ct(gr,!0),Je("<</Type /Page"),Je("/Parent "+Fe.rootDictionaryObjId+" 0 R"),Je("/Resources "+Fe.resourceDictionaryObjId+" 0 R"),Je("/MediaBox ["+parseFloat(Q(Fe.mediaBox.bottomLeftX))+" "+parseFloat(Q(Fe.mediaBox.bottomLeftY))+" "+Q(Fe.mediaBox.topRightX)+" "+Q(Fe.mediaBox.topRightY)+"]"),Fe.cropBox!==null&&Je("/CropBox ["+Q(Fe.cropBox.bottomLeftX)+" "+Q(Fe.cropBox.bottomLeftY)+" "+Q(Fe.cropBox.topRightX)+" "+Q(Fe.cropBox.topRightY)+"]"),Fe.bleedBox!==null&&Je("/BleedBox ["+Q(Fe.bleedBox.bottomLeftX)+" "+Q(Fe.bleedBox.bottomLeftY)+" "+Q(Fe.bleedBox.topRightX)+" "+Q(Fe.bleedBox.topRightY)+"]"),Fe.trimBox!==null&&Je("/TrimBox ["+Q(Fe.trimBox.bottomLeftX)+" "+Q(Fe.trimBox.bottomLeftY)+" "+Q(Fe.trimBox.topRightX)+" "+Q(Fe.trimBox.topRightY)+"]"),Fe.artBox!==null&&Je("/ArtBox ["+Q(Fe.artBox.bottomLeftX)+" "+Q(Fe.artBox.bottomLeftY)+" "+Q(Fe.artBox.topRightX)+" "+Q(Fe.artBox.topRightY)+"]"),typeof Fe.userUnit=="number"&&Fe.userUnit!==1&&Je("/UserUnit "+Fe.userUnit),tr.publish("putPage",{objId:gr,pageContext:On[pt],pageNumber:pt,page:lr}),Je("/Contents "+Kr+" 0 R"),Je(">>"),Je("endobj");var Zr=lr.join(`
`);return F===B.ADVANCED&&(Zr+=`
Q`),Ct(Kr,!0),Tn({data:Zr,filters:pn(),objectId:Kr}),Je("endobj"),gr},Bi=m.__private__.putPages=function(){var Fe,pt,lr=[];for(Fe=1;Fe<=Bn;Fe++)On[Fe].objId=nt(),On[Fe].contentsObjId=nt();for(Fe=1;Fe<=Bn;Fe++)lr.push(Vn({number:Fe,data:He[Fe],objId:On[Fe].objId,contentsObjId:On[Fe].contentsObjId,mediaBox:On[Fe].mediaBox,cropBox:On[Fe].cropBox,bleedBox:On[Fe].bleedBox,trimBox:On[Fe].trimBox,artBox:On[Fe].artBox,userUnit:On[Fe].userUnit,rootDictionaryObjId:Et,resourceDictionaryObjId:nr}));Ct(Et,!0),Je("<</Type /Pages");var gr="/Kids [";for(pt=0;pt<Bn;pt++)gr+=lr[pt]+" 0 R ";Je(gr+"]"),Je("/Count "+Bn),Je(">>"),Je("endobj"),tr.publish("postPutPages")},Si=function(Fe){tr.publish("putFont",{font:Fe,out:Je,newObject:tt,putStream:Tn}),Fe.isAlreadyPutted!==!0&&(Fe.objectNumber=tt(),Je("<<"),Je("/Type /Font"),Je("/BaseFont /"+ay(Fe.postScriptName)),Je("/Subtype /Type1"),typeof Fe.encoding=="string"&&Je("/Encoding /"+Fe.encoding),Je("/FirstChar 32"),Je("/LastChar 255"),Je(">>"),Je("endobj"))},Di=function(){for(var Fe in Mr)Mr.hasOwnProperty(Fe)&&(_===!1||_===!0&&g.hasOwnProperty(Fe))&&Si(Mr[Fe])},ds=function(Fe){Fe.objectNumber=tt();var pt=[];pt.push({key:"Type",value:"/XObject"}),pt.push({key:"Subtype",value:"/Form"}),pt.push({key:"BBox",value:"["+[Q(Fe.x),Q(Fe.y),Q(Fe.x+Fe.width),Q(Fe.y+Fe.height)].join(" ")+"]"}),pt.push({key:"Matrix",value:"["+Fe.matrix.toString()+"]"});var lr=Fe.pages[1].join(`
`);Tn({data:lr,additionalKeyValues:pt,objectId:Fe.objectNumber}),Je("endobj")},Qi=function(){for(var Fe in Ki)Ki.hasOwnProperty(Fe)&&ds(Ki[Fe])},Zt=function(Fe,pt){var lr,gr=[],Kr=1/(pt-1);for(lr=0;lr<1;lr+=Kr)gr.push(lr);if(gr.push(1),Fe[0].offset!=0){var Zr={offset:0,color:Fe[0].color};Fe.unshift(Zr)}if(Fe[Fe.length-1].offset!=1){var Gn={offset:1,color:Fe[Fe.length-1].color};Fe.push(Gn)}for(var Hi="",ps=0,ws=0;ws<gr.length;ws++){for(lr=gr[ws];lr>Fe[ps+1].offset;)ps++;var Ns=Fe[ps].offset,Ws=(lr-Ns)/(Fe[ps+1].offset-Ns),vo=Fe[ps].color,qs=Fe[ps+1].color;Hi+=Ue(Math.round((1-Ws)*vo[0]+Ws*qs[0]).toString(16))+Ue(Math.round((1-Ws)*vo[1]+Ws*qs[1]).toString(16))+Ue(Math.round((1-Ws)*vo[2]+Ws*qs[2]).toString(16))}return Hi.trim()},$r=function(Fe,pt){pt||(pt=21);var lr=tt(),gr=Zt(Fe.colors,pt),Kr=[];Kr.push({key:"FunctionType",value:"0"}),Kr.push({key:"Domain",value:"[0.0 1.0]"}),Kr.push({key:"Size",value:"["+pt+"]"}),Kr.push({key:"BitsPerSample",value:"8"}),Kr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Kr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Tn({data:gr,additionalKeyValues:Kr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:lr}),Je("endobj"),Fe.objectNumber=tt(),Je("<< /ShadingType "+Fe.type),Je("/ColorSpace /DeviceRGB");var Zr="/Coords ["+Q(parseFloat(Fe.coords[0]))+" "+Q(parseFloat(Fe.coords[1]))+" ";Fe.type===2?Zr+=Q(parseFloat(Fe.coords[2]))+" "+Q(parseFloat(Fe.coords[3])):Zr+=Q(parseFloat(Fe.coords[2]))+" "+Q(parseFloat(Fe.coords[3]))+" "+Q(parseFloat(Fe.coords[4]))+" "+Q(parseFloat(Fe.coords[5])),Je(Zr+="]"),Fe.matrix&&Je("/Matrix ["+Fe.matrix.toString()+"]"),Je("/Function "+lr+" 0 R"),Je("/Extend [true true]"),Je(">>"),Je("endobj")},kn=function(Fe,pt){var lr=nt(),gr=tt();pt.push({resourcesOid:lr,objectOid:gr}),Fe.objectNumber=gr;var Kr=[];Kr.push({key:"Type",value:"/Pattern"}),Kr.push({key:"PatternType",value:"1"}),Kr.push({key:"PaintType",value:"1"}),Kr.push({key:"TilingType",value:"1"}),Kr.push({key:"BBox",value:"["+Fe.boundingBox.map(Q).join(" ")+"]"}),Kr.push({key:"XStep",value:Q(Fe.xStep)}),Kr.push({key:"YStep",value:Q(Fe.yStep)}),Kr.push({key:"Resources",value:lr+" 0 R"}),Fe.matrix&&Kr.push({key:"Matrix",value:"["+Fe.matrix.toString()+"]"}),Tn({data:Fe.stream,additionalKeyValues:Kr,objectId:Fe.objectNumber}),Je("endobj")},vn=function(Fe){var pt;for(pt in wn)wn.hasOwnProperty(pt)&&(wn[pt]instanceof Ig?$r(wn[pt]):wn[pt]instanceof K0&&kn(wn[pt],Fe))},si=function(Fe){for(var pt in Fe.objectNumber=tt(),Je("<<"),Fe)switch(pt){case"opacity":Je("/ca "+Ae(Fe[pt]));break;case"stroke-opacity":Je("/CA "+Ae(Fe[pt]))}Je(">>"),Je("endobj")},qn=function(){var Fe;for(Fe in ai)ai.hasOwnProperty(Fe)&&si(ai[Fe])},Yn=function(){for(var Fe in Je("/XObject <<"),Ki)Ki.hasOwnProperty(Fe)&&Ki[Fe].objectNumber>=0&&Je("/"+Fe+" "+Ki[Fe].objectNumber+" 0 R");tr.publish("putXobjectDict"),Je(">>")},Wi=function(){La.oid=tt(),Je("<<"),Je("/Filter /Standard"),Je("/V "+La.v),Je("/R "+La.r),Je("/U <"+La.toHexString(La.U)+">"),Je("/O <"+La.toHexString(La.O)+">"),Je("/P "+La.P),Je(">>"),Je("endobj")},us=function(){for(var Fe in Je("/Font <<"),Mr)Mr.hasOwnProperty(Fe)&&(_===!1||_===!0&&g.hasOwnProperty(Fe))&&Je("/"+Fe+" "+Mr[Fe].objectNumber+" 0 R");Je(">>")},xs=function(){if(Object.keys(wn).length>0){for(var Fe in Je("/Shading <<"),wn)wn.hasOwnProperty(Fe)&&wn[Fe]instanceof Ig&&wn[Fe].objectNumber>=0&&Je("/"+Fe+" "+wn[Fe].objectNumber+" 0 R");tr.publish("putShadingPatternDict"),Je(">>")}},zi=function(Fe){if(Object.keys(wn).length>0){for(var pt in Je("/Pattern <<"),wn)wn.hasOwnProperty(pt)&&wn[pt]instanceof m.TilingPattern&&wn[pt].objectNumber>=0&&wn[pt].objectNumber<Fe&&Je("/"+pt+" "+wn[pt].objectNumber+" 0 R");tr.publish("putTilingPatternDict"),Je(">>")}},uo=function(){if(Object.keys(ai).length>0){var Fe;for(Fe in Je("/ExtGState <<"),ai)ai.hasOwnProperty(Fe)&&ai[Fe].objectNumber>=0&&Je("/"+Fe+" "+ai[Fe].objectNumber+" 0 R");tr.publish("putGStateDict"),Je(">>")}},Ji=function(Fe){Ct(Fe.resourcesOid,!0),Je("<<"),Je("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),us(),xs(),zi(Fe.objectOid),uo(),Yn(),Je(">>"),Je("endobj")},ks=function(){var Fe=[];Di(),qn(),Qi(),vn(Fe),tr.publish("putResources"),Fe.forEach(Ji),Ji({resourcesOid:nr,objectOid:Number.MAX_SAFE_INTEGER}),tr.publish("postPutResources")},Co=function(){tr.publish("putAdditionalObjects");for(var Fe=0;Fe<Be.length;Fe++){var pt=Be[Fe];Ct(pt.objId,!0),Je(pt.content),Je("endobj")}tr.publish("postPutAdditionalObjects")},Do=function(Fe){sn[Fe.fontName]=sn[Fe.fontName]||{},sn[Fe.fontName][Fe.fontStyle]=Fe.id},ba=function(Fe,pt,lr,gr,Kr){var Zr={id:"F"+(Object.keys(Mr).length+1).toString(10),postScriptName:Fe,fontName:pt,fontStyle:lr,encoding:gr,isStandardFont:Kr||!1,metadata:{}};return tr.publish("addFont",{font:Zr,instance:this}),Mr[Zr.id]=Zr,Do(Zr),Zr.id},il=function(Fe){for(var pt=0,lr=yt.length;pt<lr;pt++){var gr=ba.call(this,Fe[pt][0],Fe[pt][1],Fe[pt][2],yt[pt][3],!0);_===!1&&(g[gr]=!0);var Kr=Fe[pt][0].split("-");Do({id:gr,fontName:Kr[0],fontStyle:Kr[1]||""})}tr.publish("addFonts",{fonts:Mr,dictionary:sn})},Ma=function(Fe){return Fe.foo=function(){try{return Fe.apply(this,arguments)}catch(gr){var pt=gr.stack||"";~pt.indexOf(" at ")&&(pt=pt.split(" at ")[1]);var lr="Error in function "+pt.split(`
`)[0].split("<")[0]+": "+gr.message;if(!_o.console)throw new Error(lr);_o.console.error(lr,gr),_o.alert&&alert(lr)}},Fe.foo.bar=Fe,Fe.foo},Uo=function(Fe,pt){var lr,gr,Kr,Zr,Gn,Hi,ps,ws,Ns;if(Kr=(pt=pt||{}).sourceEncoding||"Unicode",Gn=pt.outputEncoding,(pt.autoencode||Gn)&&Mr[Ft].metadata&&Mr[Ft].metadata[Kr]&&Mr[Ft].metadata[Kr].encoding&&(Zr=Mr[Ft].metadata[Kr].encoding,!Gn&&Mr[Ft].encoding&&(Gn=Mr[Ft].encoding),!Gn&&Zr.codePages&&(Gn=Zr.codePages[0]),typeof Gn=="string"&&(Gn=Zr[Gn]),Gn)){for(ps=!1,Hi=[],lr=0,gr=Fe.length;lr<gr;lr++)(ws=Gn[Fe.charCodeAt(lr)])?Hi.push(String.fromCharCode(ws)):Hi.push(Fe[lr]),Hi[lr].charCodeAt(0)>>8&&(ps=!0);Fe=Hi.join("")}for(lr=Fe.length;ps===void 0&&lr!==0;)Fe.charCodeAt(lr-1)>>8&&(ps=!0),lr--;if(!ps)return Fe;for(Hi=pt.noBOM?[]:[254,255],lr=0,gr=Fe.length;lr<gr;lr++){if((Ns=(ws=Fe.charCodeAt(lr))>>8)>>8)throw new Error("Character at position "+lr+" of string '"+Fe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Hi.push(Ns),Hi.push(ws-(Ns<<8))}return String.fromCharCode.apply(void 0,Hi)},xa=m.__private__.pdfEscape=m.pdfEscape=function(Fe,pt){return Uo(Fe,pt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gl=m.__private__.beginPage=function(Fe){He[++Bn]=[],On[Bn]={objId:0,contentsObjId:0,userUnit:Number(t),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Fe[0]),topRightY:Number(Fe[1])}},zo(Bn),ot(He[xe])},ro=function(Fe,pt){var lr,gr,Kr;switch(e=pt||e,typeof Fe=="string"&&(lr=S(Fe.toLowerCase()),Array.isArray(lr)&&(gr=lr[0],Kr=lr[1])),Array.isArray(Fe)&&(gr=Fe[0]*er,Kr=Fe[1]*er),isNaN(gr)&&(gr=o[0],Kr=o[1]),(gr>14400||Kr>14400)&&(Xl.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),gr=Math.min(14400,gr),Kr=Math.min(14400,Kr)),o=[gr,Kr],e.substr(0,1)){case"l":Kr>gr&&(o=[Kr,gr]);break;case"p":gr>Kr&&(o=[Kr,gr])}Gl(o),dh(Hc),Je(ka),ft!==0&&Je(ft+" J"),at!==0&&Je(at+" j"),tr.publish("addPage",{pageNumber:Bn})},Hs=function(Fe){Fe>0&&Fe<=Bn&&(He.splice(Fe,1),On.splice(Fe,1),Bn--,xe>Bn&&(xe=Bn),this.setPage(xe))},zo=function(Fe){Fe>0&&Fe<=Bn&&(xe=Fe)},wl=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return He.length-1},Ha=function(Fe,pt,lr){var gr,Kr=void 0;return lr=lr||{},Fe=Fe!==void 0?Fe:Mr[Ft].fontName,pt=pt!==void 0?pt:Mr[Ft].fontStyle,gr=Fe.toLowerCase(),sn[gr]!==void 0&&sn[gr][pt]!==void 0?Kr=sn[gr][pt]:sn[Fe]!==void 0&&sn[Fe][pt]!==void 0?Kr=sn[Fe][pt]:lr.disableWarning===!1&&Xl.warn("Unable to look up font label for font '"+Fe+"', '"+pt+"'. Refer to getFontList() for available fonts."),Kr||lr.noFallback||(Kr=sn.times[pt])==null&&(Kr=sn.times.normal),Kr},Fa=m.__private__.putInfo=function(){var Fe=tt(),pt=function(gr){return gr};for(var lr in p!==null&&(pt=La.encryptor(Fe,0)),Je("<<"),Je("/Producer ("+xa(pt("jsPDF "+yo.version))+")"),pr)pr.hasOwnProperty(lr)&&pr[lr]&&Je("/"+lr.substr(0,1).toUpperCase()+lr.substr(1)+" ("+xa(pt(pr[lr]))+")");Je("/CreationDate ("+xa(pt(z))+")"),Je(">>"),Je("endobj")},Pa=m.__private__.putCatalog=function(Fe){var pt=(Fe=Fe||{}).rootDictionaryObjId||Et;switch(tt(),Je("<<"),Je("/Type /Catalog"),Je("/Pages "+pt+" 0 R"),kt||(kt="fullwidth"),kt){case"fullwidth":Je("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Je("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Je("/OpenAction [3 0 R /Fit]");break;case"original":Je("/OpenAction [3 0 R /XYZ null null 1]");break;default:var lr=""+kt;lr.substr(lr.length-1)==="%"&&(kt=parseInt(kt)/100),typeof kt=="number"&&Je("/OpenAction [3 0 R /XYZ null null "+Ae(kt)+"]")}switch(Dr||(Dr="continuous"),Dr){case"continuous":Je("/PageLayout /OneColumn");break;case"single":Je("/PageLayout /SinglePage");break;case"two":case"twoleft":Je("/PageLayout /TwoColumnLeft");break;case"tworight":Je("/PageLayout /TwoColumnRight")}Tr&&Je("/PageMode /"+Tr),tr.publish("putCatalog"),Je(">>"),Je("endobj")},wa=m.__private__.putTrailer=function(){Je("trailer"),Je("<<"),Je("/Size "+(pe+1)),Je("/Root "+pe+" 0 R"),Je("/Info "+(pe-1)+" 0 R"),p!==null&&Je("/Encrypt "+La.oid+" 0 R"),Je("/ID [ <"+k+"> <"+k+"> ]"),Je(">>")},Sl=m.__private__.putHeader=function(){Je("%PDF-"+b),Je("%ÂºÃÂ¬Ã ")},Jl=m.__private__.putXRef=function(){var Fe="0000000000";Je("xref"),Je("0 "+(pe+1)),Je("0000000000 65535 f ");for(var pt=1;pt<=pe;pt++)typeof Oe[pt]=="function"?Je((Fe+Oe[pt]()).slice(-10)+" 00000 n "):Oe[pt]!==void 0?Je((Fe+Oe[pt]).slice(-10)+" 00000 n "):Je("0000000000 00000 n ")},pl=m.__private__.buildDocument=function(){st(),ot(re),tr.publish("buildDocument"),Sl(),Bi(),Co(),ks(),p!==null&&Wi(),Fa(),Pa();var Fe=ie;return Jl(),wa(),Je("startxref"),Je(""+Fe),Je("%%EOF"),ot(He[xe]),re.join(`
`)},sl=m.__private__.getBlob=function(Fe){return new Blob([bt(Fe)],{type:"application/pdf"})},hc=m.output=m.__private__.output=Ma(function(Fe,pt){switch(typeof(pt=pt||{})=="string"?pt={filename:pt}:pt.filename=pt.filename||"generated.pdf",Fe){case void 0:return pl();case"save":m.save(pt.filename);break;case"arraybuffer":return bt(pl());case"blob":return sl(pl());case"bloburi":case"bloburl":if(_o.URL!==void 0&&typeof _o.URL.createObjectURL=="function")return _o.URL&&_o.URL.createObjectURL(sl(pl()))||void 0;Xl.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var lr="",gr=pl();try{lr=tC(gr)}catch{lr=tC(unescape(encodeURIComponent(gr)))}return"data:application/pdf;filename="+pt.filename+";base64,"+lr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(_o)==="[object Window]"){var Kr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Zr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pt.pdfObjectUrl&&(Kr=pt.pdfObjectUrl,Zr="");var Gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Kr+'"'+Zr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pt)+");<\/script></body></html>",Hi=_o.open();return Hi!==null&&Hi.document.write(Gn),Hi}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(_o)==="[object Window]"){var ps='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pt.filename+'" width="500px" height="400px" /></body></html>',ws=_o.open();if(ws!==null){ws.document.write(ps);var Ns=this;ws.document.documentElement.querySelector("#pdfViewer").onload=function(){ws.document.title=pt.filename,ws.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ns.output("bloburl"))}}return ws}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(_o)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ws='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pt)+'"></iframe></body></html>',vo=_o.open();if(vo!==null&&(vo.document.write(Ws),vo.document.title=pt.filename),vo||typeof safari>"u")return vo;break;case"datauri":case"dataurl":return _o.document.location.href=this.output("datauristring",pt);default:return null}}),na=function(Fe){return Array.isArray(zn)===!0&&zn.indexOf(Fe)>-1};switch(i){case"pt":er=1;break;case"mm":er=72/25.4;break;case"cm":er=72/2.54;break;case"in":er=72;break;case"px":er=na("px_scaling")==1?.75:96/72;break;case"pc":case"em":er=12;break;case"ex":er=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);er=i}var La=null;de(),N();var zc=function(Fe){return p!==null?La.encryptor(Fe,0):function(pt){return pt}},Cc=m.__private__.getPageInfo=m.getPageInfo=function(Fe){if(isNaN(Fe)||Fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:On[Fe].objId,pageNumber:Fe,pageContext:On[Fe]}},Os=m.__private__.getPageInfoByObjId=function(Fe){if(isNaN(Fe)||Fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pt in On)if(On[pt].objId===Fe)break;return Cc(pt)},qu=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:On[xe].objId,pageNumber:xe,pageContext:On[xe]}};m.addPage=function(){return ro.apply(this,arguments),this},m.setPage=function(){return zo.apply(this,arguments),ot.call(this,He[xe]),this},m.insertPage=function(Fe){return this.addPage(),this.movePage(xe,Fe),this},m.movePage=function(Fe,pt){var lr,gr;if(Fe>pt){lr=He[Fe],gr=On[Fe];for(var Kr=Fe;Kr>pt;Kr--)He[Kr]=He[Kr-1],On[Kr]=On[Kr-1];He[pt]=lr,On[pt]=gr,this.setPage(pt)}else if(Fe<pt){lr=He[Fe],gr=On[Fe];for(var Zr=Fe;Zr<pt;Zr++)He[Zr]=He[Zr+1],On[Zr]=On[Zr+1];He[pt]=lr,On[pt]=gr,this.setPage(pt)}return this},m.deletePage=function(){return Hs.apply(this,arguments),this},m.__private__.text=m.text=function(Fe,pt,lr,gr,Kr){var Zr,Gn,Hi,ps,ws,Ns,Ws,vo,qs,as=(gr=gr||{}).scope||this;if(typeof Fe=="number"&&typeof pt=="number"&&(typeof lr=="string"||Array.isArray(lr))){var Qo=lr;lr=pt,pt=Fe,Fe=Qo}if(arguments[3]instanceof Qt?(ee("The transform parameter of text() with a Matrix value"),qs=Kr):(Hi=arguments[4],ps=arguments[5],Nl(Ws=arguments[3])==="object"&&Ws!==null||(typeof Hi=="string"&&(ps=Hi,Hi=null),typeof Ws=="string"&&(ps=Ws,Ws=null),typeof Ws=="number"&&(Hi=Ws,Ws=null),gr={flags:Ws,angle:Hi,align:ps})),isNaN(pt)||isNaN(lr)||Fe==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Fe.length===0)return as;var Vo="",Li=!1,Sn=typeof gr.lineHeightFactor=="number"?gr.lineHeightFactor:Bc,ia=as.internal.scaleFactor;function Ii(tn){return tn=tn.split("	").join(Array(gr.TabLen||9).join(" ")),xa(tn,Ws)}function As(tn){for(var Oa,gl=tn.concat(),ul=[],Tc=gl.length;Tc--;)typeof(Oa=gl.shift())=="string"?ul.push(Oa):Array.isArray(tn)&&(Oa.length===1||Oa[1]===void 0&&Oa[2]===void 0)?ul.push(Oa[0]):ul.push([Oa[0],Oa[1],Oa[2]]);return ul}function sa(tn,Oa){var gl;if(typeof tn=="string")gl=Oa(tn)[0];else if(Array.isArray(tn)){for(var ul,Tc,tc=tn.concat(),Il=[],Yh=tc.length;Yh--;)typeof(ul=tc.shift())=="string"?Il.push(Oa(ul)[0]):Array.isArray(ul)&&typeof ul[0]=="string"&&(Tc=Oa(ul[0],ul[1],ul[2]),Il.push([Tc[0],Tc[1],Tc[2]]));gl=Il}return gl}var Ai=!1,aa=!0;if(typeof Fe=="string")Ai=!0;else if(Array.isArray(Fe)){var ru=Fe.concat();Gn=[];for(var Tl,al=ru.length;al--;)(typeof(Tl=ru.shift())!="string"||Array.isArray(Tl)&&typeof Tl[0]!="string")&&(aa=!1);Ai=aa}if(Ai===!1)throw new Error('Type of text must be string or Array. "'+Fe+'" is not recognized.');typeof Fe=="string"&&(Fe=Fe.match(/[\r?\n]/)?Fe.split(/\r\n|\r|\n/g):[Fe]);var Us=Nt/as.internal.scaleFactor,Xa=Us*(Sn-1);switch(gr.baseline){case"bottom":lr-=Xa;break;case"top":lr+=Us-Xa;break;case"hanging":lr+=Us-2*Xa;break;case"middle":lr+=Us/2-Xa}if((Ns=gr.maxWidth||0)>0&&(typeof Fe=="string"?Fe=as.splitTextToSize(Fe,Ns):Object.prototype.toString.call(Fe)==="[object Array]"&&(Fe=Fe.reduce(function(tn,Oa){return tn.concat(as.splitTextToSize(Oa,Ns))},[]))),Zr={text:Fe,x:pt,y:lr,options:gr,mutex:{pdfEscape:xa,activeFontKey:Ft,fonts:Mr,activeFontSize:Nt}},tr.publish("preProcessText",Zr),Fe=Zr.text,Hi=(gr=Zr.options).angle,!(qs instanceof Qt)&&Hi&&typeof Hi=="number"){Hi*=Math.PI/180,gr.rotationDirection===0&&(Hi=-Hi),F===B.ADVANCED&&(Hi=-Hi);var jl=Math.cos(Hi),Sa=Math.sin(Hi);qs=new Qt(jl,Sa,-Sa,jl,0,0)}else Hi&&Hi instanceof Qt&&(qs=Hi);F!==B.ADVANCED||qs||(qs=et),(ws=gr.charSpace||$e)!==void 0&&(Vo+=Q(ce(ws))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(vo=gr.horizontalScale)!==void 0&&(Vo+=Q(100*vo)+` Tz
`),gr.lang;var Al=-1,Va=gr.renderingMode!==void 0?gr.renderingMode:gr.stroke,Ca=as.internal.getCurrentPageInfo().pageContext;switch(Va){case 0:case!1:case"fill":Al=0;break;case 1:case!0:case"stroke":Al=1;break;case 2:case"fillThenStroke":Al=2;break;case 3:case"invisible":Al=3;break;case 4:case"fillAndAddForClipping":Al=4;break;case 5:case"strokeAndAddPathForClipping":Al=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Al=6;break;case 7:case"addToPathForClipping":Al=7}var yu=Ca.usedRenderingMode!==void 0?Ca.usedRenderingMode:-1;Al!==-1?Vo+=Al+` Tr
`:yu!==-1&&(Vo+=`0 Tr
`),Al!==-1&&(Ca.usedRenderingMode=Al),ps=gr.align||"left";var ll,ec=Nt*Sn,Ga=as.internal.pageSize.getWidth(),bo=Mr[Ft];ws=gr.charSpace||$e,Ns=gr.maxWidth||0,Ws=Object.assign({autoencode:!0,noBOM:!0},gr.flags);var ml=[],dc=function(tn){return as.getStringUnitWidth(tn,{font:bo,charSpace:ws,fontSize:Nt,doKerning:!1})*Nt/ia};if(Object.prototype.toString.call(Fe)==="[object Array]"){var Wl;Gn=As(Fe),ps!=="left"&&(ll=Gn.map(dc));var ir,Lr=0;if(ps==="right"){pt-=ll[0],Fe=[],al=Gn.length;for(var rn=0;rn<al;rn++)rn===0?(ir=fc(pt),Wl=Pl(lr)):(ir=ce(Lr-ll[rn]),Wl=-ec),Fe.push([Gn[rn],ir,Wl]),Lr=ll[rn]}else if(ps==="center"){pt-=ll[0]/2,Fe=[],al=Gn.length;for(var fn=0;fn<al;fn++)fn===0?(ir=fc(pt),Wl=Pl(lr)):(ir=ce((Lr-ll[fn])/2),Wl=-ec),Fe.push([Gn[fn],ir,Wl]),Lr=ll[fn]}else if(ps==="left"){Fe=[],al=Gn.length;for(var Kt=0;Kt<al;Kt++)Fe.push(Gn[Kt])}else if(ps==="justify"&&bo.encoding==="Identity-H"){Fe=[],al=Gn.length,Ns=Ns!==0?Ns:Ga;for(var Pr=0,Cr=0;Cr<al;Cr++)if(Wl=Cr===0?Pl(lr):-ec,ir=Cr===0?fc(pt):Pr,Cr<al-1){var Nn=ce((Ns-ll[Cr])/(Gn[Cr].split(" ").length-1)),Qn=Gn[Cr].split(" ");Fe.push([Qn[0]+" ",ir,Wl]),Pr=0;for(var ki=1;ki<Qn.length;ki++){var es=(dc(Qn[ki-1]+" "+Qn[ki])-dc(Qn[ki]))*ia+Nn;ki==Qn.length-1?Fe.push([Qn[ki],es,0]):Fe.push([Qn[ki]+" ",es,0]),Pr-=es}}else Fe.push([Gn[Cr],ir,Wl]);Fe.push(["",Pr,0])}else{if(ps!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Fe=[],al=Gn.length,Ns=Ns!==0?Ns:Ga,Cr=0;Cr<al;Cr++)Wl=Cr===0?Pl(lr):-ec,ir=Cr===0?fc(pt):0,Cr<al-1?ml.push(Q(ce((Ns-ll[Cr])/(Gn[Cr].split(" ").length-1)))):ml.push(0),Fe.push([Gn[Cr],ir,Wl])}}var Oi=typeof gr.R2L=="boolean"?gr.R2L:fr;Oi===!0&&(Fe=sa(Fe,function(tn,Oa,gl){return[tn.split("").reverse().join(""),Oa,gl]})),Zr={text:Fe,x:pt,y:lr,options:gr,mutex:{pdfEscape:xa,activeFontKey:Ft,fonts:Mr,activeFontSize:Nt}},tr.publish("postProcessText",Zr),Fe=Zr.text,Li=Zr.mutex.isHex||!1;var Zs=Mr[Ft].encoding;Zs!=="WinAnsiEncoding"&&Zs!=="StandardEncoding"||(Fe=sa(Fe,function(tn,Oa,gl){return[Ii(tn),Oa,gl]})),Gn=As(Fe),Fe=[];for(var ms,Js,xo,Za=0,Ea=1,Wa=Array.isArray(Gn[0])?Ea:Za,Ll="",Vs=function(tn,Oa,gl){var ul="";return gl instanceof Qt?(gl=typeof gr.angle=="number"?Ve(gl,new Qt(1,0,0,1,tn,Oa)):Ve(new Qt(1,0,0,1,tn,Oa),gl),F===B.ADVANCED&&(gl=Ve(new Qt(1,0,0,-1,0,0),gl)),ul=gl.join(" ")+` Tm
`):ul=Q(tn)+" "+Q(Oa)+` Td
`,ul},cl=0;cl<Gn.length;cl++){switch(Ll="",Wa){case Ea:xo=(Li?"<":"(")+Gn[cl][0]+(Li?">":")"),ms=parseFloat(Gn[cl][1]),Js=parseFloat(Gn[cl][2]);break;case Za:xo=(Li?"<":"(")+Gn[cl]+(Li?">":")"),ms=fc(pt),Js=Pl(lr)}ml!==void 0&&ml[cl]!==void 0&&(Ll=ml[cl]+` Tw
`),cl===0?Fe.push(Ll+Vs(ms,Js,qs)+xo):Wa===Za?Fe.push(Ll+xo):Wa===Ea&&Fe.push(Ll+Vs(ms,Js,qs)+xo)}Fe=Wa===Za?Fe.join(` Tj
T* `):Fe.join(` Tj
`),Fe+=` Tj
`;var pc=`BT
/`;return pc+=Ft+" "+Nt+` Tf
`,pc+=Q(Nt*Sn)+` TL
`,pc+=we+`
`,pc+=Vo,pc+=Fe,Je(pc+="ET"),g[Ft]=!0,as};var Jc=m.__private__.clip=m.clip=function(Fe){return Je(Fe==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Jc("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Je("n"),this};var bs=m.__private__.isValidStyle=function(Fe){var pt=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Fe)!==-1&&(pt=!0),pt};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(Fe){return bs(Fe)&&(f=Fe),this};var Dh=m.__private__.getStyle=m.getStyle=function(Fe){var pt=f;switch(Fe){case"D":case"S":pt="S";break;case"F":pt="f";break;case"FD":case"DF":pt="B";break;case"f":case"f*":case"B":case"B*":pt=Fe}return pt},mu=m.close=function(){return Je("h"),this};m.stroke=function(){return Je("S"),this},m.fill=function(Fe){return Fu("f",Fe),this},m.fillEvenOdd=function(Fe){return Fu("f*",Fe),this},m.fillStroke=function(Fe){return Fu("B",Fe),this},m.fillStrokeEvenOdd=function(Fe){return Fu("B*",Fe),this};var Fu=function(Fe,pt){Nl(pt)==="object"?Pu(pt,Fe):Je(Fe)},Ec=function(Fe){Fe===null||F===B.ADVANCED&&Fe===void 0||(Fe=Dh(Fe),Je(Fe))};function fh(Fe,pt,lr,gr,Kr){var Zr=new K0(pt||this.boundingBox,lr||this.xStep,gr||this.yStep,this.gState,Kr||this.matrix);Zr.stream=this.stream;var Gn=Fe+"$$"+this.cloneIndex+++"$$";return We(Gn,Zr),Zr}var Pu=function(Fe,pt){var lr=Zi[Fe.key],gr=wn[lr];if(gr instanceof Ig)Je("q"),Je(gu(pt)),gr.gState&&m.setGState(gr.gState),Je(Fe.matrix.toString()+" cm"),Je("/"+lr+" sh"),Je("Q");else if(gr instanceof K0){var Kr=new Qt(1,0,0,-1,0,vs());Fe.matrix&&(Kr=Kr.multiply(Fe.matrix||et),lr=fh.call(gr,Fe.key,Fe.boundingBox,Fe.xStep,Fe.yStep,Kr).id),Je("q"),Je("/Pattern cs"),Je("/"+lr+" scn"),gr.gState&&m.setGState(gr.gState),Je(pt),Je("Q")}},gu=function(Fe){switch(Fe){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ho=m.moveTo=function(Fe,pt){return Je(Q(ce(Fe))+" "+Q(Z(pt))+" m"),this},Ro=m.lineTo=function(Fe,pt){return Je(Q(ce(Fe))+" "+Q(Z(pt))+" l"),this},eu=m.curveTo=function(Fe,pt,lr,gr,Kr,Zr){return Je([Q(ce(Fe)),Q(Z(pt)),Q(ce(lr)),Q(Z(gr)),Q(ce(Kr)),Q(Z(Zr)),"c"].join(" ")),this};m.__private__.line=m.line=function(Fe,pt,lr,gr,Kr){if(isNaN(Fe)||isNaN(pt)||isNaN(lr)||isNaN(gr)||!bs(Kr))throw new Error("Invalid arguments passed to jsPDF.line");return F===B.COMPAT?this.lines([[lr-Fe,gr-pt]],Fe,pt,[1,1],Kr||"S"):this.lines([[lr-Fe,gr-pt]],Fe,pt,[1,1]).stroke()},m.__private__.lines=m.lines=function(Fe,pt,lr,gr,Kr,Zr){var Gn,Hi,ps,ws,Ns,Ws,vo,qs,as,Qo,Vo,Li;if(typeof Fe=="number"&&(Li=lr,lr=pt,pt=Fe,Fe=Li),gr=gr||[1,1],Zr=Zr||!1,isNaN(pt)||isNaN(lr)||!Array.isArray(Fe)||!Array.isArray(gr)||!bs(Kr)||typeof Zr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ho(pt,lr),Gn=gr[0],Hi=gr[1],ws=Fe.length,Qo=pt,Vo=lr,ps=0;ps<ws;ps++)(Ns=Fe[ps]).length===2?(Qo=Ns[0]*Gn+Qo,Vo=Ns[1]*Hi+Vo,Ro(Qo,Vo)):(Ws=Ns[0]*Gn+Qo,vo=Ns[1]*Hi+Vo,qs=Ns[2]*Gn+Qo,as=Ns[3]*Hi+Vo,Qo=Ns[4]*Gn+Qo,Vo=Ns[5]*Hi+Vo,eu(Ws,vo,qs,as,Qo,Vo));return Zr&&mu(),Ec(Kr),this},m.path=function(Fe){for(var pt=0;pt<Fe.length;pt++){var lr=Fe[pt],gr=lr.c;switch(lr.op){case"m":Ho(gr[0],gr[1]);break;case"l":Ro(gr[0],gr[1]);break;case"c":eu.apply(this,gr);break;case"h":mu()}}return this},m.__private__.rect=m.rect=function(Fe,pt,lr,gr,Kr){if(isNaN(Fe)||isNaN(pt)||isNaN(lr)||isNaN(gr)||!bs(Kr))throw new Error("Invalid arguments passed to jsPDF.rect");return F===B.COMPAT&&(gr=-gr),Je([Q(ce(Fe)),Q(Z(pt)),Q(ce(lr)),Q(ce(gr)),"re"].join(" ")),Ec(Kr),this},m.__private__.triangle=m.triangle=function(Fe,pt,lr,gr,Kr,Zr,Gn){if(isNaN(Fe)||isNaN(pt)||isNaN(lr)||isNaN(gr)||isNaN(Kr)||isNaN(Zr)||!bs(Gn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[lr-Fe,gr-pt],[Kr-lr,Zr-gr],[Fe-Kr,pt-Zr]],Fe,pt,[1,1],Gn,!0),this},m.__private__.roundedRect=m.roundedRect=function(Fe,pt,lr,gr,Kr,Zr,Gn){if(isNaN(Fe)||isNaN(pt)||isNaN(lr)||isNaN(gr)||isNaN(Kr)||isNaN(Zr)||!bs(Gn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Hi=4/3*(Math.SQRT2-1);return Kr=Math.min(Kr,.5*lr),Zr=Math.min(Zr,.5*gr),this.lines([[lr-2*Kr,0],[Kr*Hi,0,Kr,Zr-Zr*Hi,Kr,Zr],[0,gr-2*Zr],[0,Zr*Hi,-Kr*Hi,Zr,-Kr,Zr],[2*Kr-lr,0],[-Kr*Hi,0,-Kr,-Zr*Hi,-Kr,-Zr],[0,2*Zr-gr],[0,-Zr*Hi,Kr*Hi,-Zr,Kr,-Zr]],Fe+Kr,pt,[1,1],Gn,!0),this},m.__private__.ellipse=m.ellipse=function(Fe,pt,lr,gr,Kr){if(isNaN(Fe)||isNaN(pt)||isNaN(lr)||isNaN(gr)||!bs(Kr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Zr=4/3*(Math.SQRT2-1)*lr,Gn=4/3*(Math.SQRT2-1)*gr;return Ho(Fe+lr,pt),eu(Fe+lr,pt-Gn,Fe+Zr,pt-gr,Fe,pt-gr),eu(Fe-Zr,pt-gr,Fe-lr,pt-Gn,Fe-lr,pt),eu(Fe-lr,pt+Gn,Fe-Zr,pt+gr,Fe,pt+gr),eu(Fe+Zr,pt+gr,Fe+lr,pt+Gn,Fe+lr,pt),Ec(Kr),this},m.__private__.circle=m.circle=function(Fe,pt,lr,gr){if(isNaN(Fe)||isNaN(pt)||isNaN(lr)||!bs(gr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Fe,pt,lr,lr,gr)},m.setFont=function(Fe,pt,lr){return lr&&(pt=X(pt,lr)),Ft=Ha(Fe,pt,{disableWarning:!1}),this};var Rh=m.__private__.getFont=m.getFont=function(){return Mr[Ha.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var Fe,pt,lr={};for(Fe in sn)if(sn.hasOwnProperty(Fe))for(pt in lr[Fe]=[],sn[Fe])sn[Fe].hasOwnProperty(pt)&&lr[Fe].push(pt);return lr},m.addFont=function(Fe,pt,lr,gr,Kr){var Zr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Zr.indexOf(arguments[3])!==-1?Kr=arguments[3]:arguments[3]&&Zr.indexOf(arguments[3])==-1&&(lr=X(lr,gr)),Kr=Kr||"Identity-H",ba.call(this,Fe,pt,lr,Kr)};var Bc,Hc=n.lineWidth||.200025,Yu=m.__private__.getLineWidth=m.getLineWidth=function(){return Hc},dh=m.__private__.setLineWidth=m.setLineWidth=function(Fe){return Hc=Fe,Je(Q(ce(Fe))+" w"),this};m.__private__.setLineDash=yo.API.setLineDash=yo.API.setLineDashPattern=function(Fe,pt){if(Fe=Fe||[],pt=pt||0,isNaN(pt)||!Array.isArray(Fe))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Fe=Fe.map(function(lr){return Q(ce(lr))}).join(" "),pt=Q(ce(pt)),Je("["+Fe+"] "+pt+" d"),this};var Qa=m.__private__.getLineHeight=m.getLineHeight=function(){return Nt*Bc};m.__private__.getLineHeight=m.getLineHeight=function(){return Nt*Bc};var tu=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(Fe){return typeof(Fe=Fe||1.15)=="number"&&(Bc=Fe),this},go=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Bc};tu(n.lineHeight);var fc=m.__private__.getHorizontalCoordinate=function(Fe){return ce(Fe)},Pl=m.__private__.getVerticalCoordinate=function(Fe){return F===B.ADVANCED?Fe:On[xe].mediaBox.topRightY-On[xe].mediaBox.bottomLeftY-ce(Fe)},Lu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(Fe){return Q(fc(Fe))},ol=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(Fe){return Q(Pl(Fe))},ka=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Fr(ka)},m.__private__.setStrokeColor=m.setDrawColor=function(Fe,pt,lr,gr){return ka=_r({ch1:Fe,ch2:pt,ch3:lr,ch4:gr,pdfColorType:"draw",precision:2}),Je(ka),this};var ae=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Fr(ae)},m.__private__.setFillColor=m.setFillColor=function(Fe,pt,lr,gr){return ae=_r({ch1:Fe,ch2:pt,ch3:lr,ch4:gr,pdfColorType:"fill",precision:2}),Je(ae),this};var we=n.textColor||"0 g",Le=m.__private__.getTextColor=m.getTextColor=function(){return Fr(we)};m.__private__.setTextColor=m.setTextColor=function(Fe,pt,lr,gr){return we=_r({ch1:Fe,ch2:pt,ch3:lr,ch4:gr,pdfColorType:"text",precision:3}),this};var $e=n.charSpace,ct=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat($e||0)};m.__private__.setCharSpace=m.setCharSpace=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $e=Fe,this};var ft=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(Fe){var pt=m.CapJoinStyles[Fe];if(pt===void 0)throw new Error("Line cap style of '"+Fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ft=pt,Je(pt+" J"),this};var at=0;m.__private__.setLineJoin=m.setLineJoin=function(Fe){var pt=m.CapJoinStyles[Fe];if(pt===void 0)throw new Error("Line join style of '"+Fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return at=pt,Je(pt+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(Fe){if(Fe=Fe||0,isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Je(Q(ce(Fe))+" M"),this},m.GState=Kv,m.setGState=function(Fe){(Fe=typeof Fe=="string"?ai[_i[Fe]]:Er(null,Fe)).equals(Zn)||(Je("/"+Fe.id+" gs"),Zn=Fe)};var Er=function(Fe,pt){if(!Fe||!_i[Fe]){var lr=!1;for(var gr in ai)if(ai.hasOwnProperty(gr)&&ai[gr].equals(pt)){lr=!0;break}if(lr)pt=ai[gr];else{var Kr="GS"+(Object.keys(ai).length+1).toString(10);ai[Kr]=pt,pt.id=Kr}return Fe&&(_i[Fe]=pt.id),tr.publish("addGState",pt),pt}};m.addGState=function(Fe,pt){return Er(Fe,pt),this},m.saveGraphicsState=function(){return Je("q"),Un.push({key:Ft,size:Nt,color:we}),this},m.restoreGraphicsState=function(){Je("Q");var Fe=Un.pop();return Ft=Fe.key,Nt=Fe.size,we=Fe.color,Zn=null,this},m.setCurrentTransformationMatrix=function(Fe){return Je(Fe.toString()+" cm"),this},m.comment=function(Fe){return Je("#"+Fe),this};var hr=function(Fe,pt){var lr=Fe||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return lr},set:function(Zr){isNaN(Zr)||(lr=parseFloat(Zr))}});var gr=pt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return gr},set:function(Zr){isNaN(Zr)||(gr=parseFloat(Zr))}});var Kr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Kr},set:function(Zr){Kr=Zr.toString()}}),this},Wr=function(Fe,pt,lr,gr){hr.call(this,Fe,pt),this.type="rect";var Kr=lr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Kr},set:function(Gn){isNaN(Gn)||(Kr=parseFloat(Gn))}});var Zr=gr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Zr},set:function(Gn){isNaN(Gn)||(Zr=parseFloat(Gn))}}),this},bn=function(){this.page=Bn,this.currentPage=xe,this.pages=He.slice(0),this.pagesContext=On.slice(0),this.x=ur,this.y=Yt,this.matrix=mr,this.width=ei(xe),this.height=vs(xe),this.outputDestination=Ne,this.id="",this.objectNumber=-1};bn.prototype.restore=function(){Bn=this.page,xe=this.currentPage,On=this.pagesContext,He=this.pages,ur=this.x,Yt=this.y,mr=this.matrix,Ti(xe,this.width),ma(xe,this.height),Ne=this.outputDestination};var Hn=function(Fe,pt,lr,gr,Kr){li.push(new bn),Bn=xe=0,He=[],ur=Fe,Yt=pt,mr=Kr,Gl([lr,gr])},cn=function(Fe){if(Qs[Fe])li.pop().restore();else{var pt=new bn,lr="Xo"+(Object.keys(Ki).length+1).toString(10);pt.id=lr,Qs[Fe]=lr,Ki[lr]=pt,tr.publish("addFormObject",pt),li.pop().restore()}};for(var Hr in m.beginFormObject=function(Fe,pt,lr,gr,Kr){return Hn(Fe,pt,lr,gr,Kr),this},m.endFormObject=function(Fe){return cn(Fe),this},m.doFormObject=function(Fe,pt){var lr=Ki[Qs[Fe]];return Je("q"),Je(pt.toString()+" cm"),Je("/"+lr.id+" Do"),Je("Q"),this},m.getFormObject=function(Fe){var pt=Ki[Qs[Fe]];return{x:pt.x,y:pt.y,width:pt.width,height:pt.height,matrix:pt.matrix}},m.save=function(Fe,pt){return Fe=Fe||"generated.pdf",(pt=pt||{}).returnPromise=pt.returnPromise||!1,pt.returnPromise===!1?(U0(sl(pl()),Fe),typeof U0.unload=="function"&&_o.setTimeout&&setTimeout(U0.unload,911),this):new Promise(function(lr,gr){try{var Kr=U0(sl(pl()),Fe);typeof U0.unload=="function"&&_o.setTimeout&&setTimeout(U0.unload,911),lr(Kr)}catch(Zr){gr(Zr.message)}})},yo.API)yo.API.hasOwnProperty(Hr)&&(Hr==="events"&&yo.API.events.length?function(Fe,pt){var lr,gr,Kr;for(Kr=pt.length-1;Kr!==-1;Kr--)lr=pt[Kr][0],gr=pt[Kr][1],Fe.subscribe.apply(Fe,[lr].concat(typeof gr=="function"?[gr]:gr))}(tr,yo.API.events):m[Hr]=yo.API[Hr]);var ei=m.getPageWidth=function(Fe){return(On[Fe=Fe||xe].mediaBox.topRightX-On[Fe].mediaBox.bottomLeftX)/er},Ti=m.setPageWidth=function(Fe,pt){On[Fe].mediaBox.topRightX=pt*er+On[Fe].mediaBox.bottomLeftX},vs=m.getPageHeight=function(Fe){return(On[Fe=Fe||xe].mediaBox.topRightY-On[Fe].mediaBox.bottomLeftY)/er},ma=m.setPageHeight=function(Fe,pt){On[Fe].mediaBox.topRightY=pt*er+On[Fe].mediaBox.bottomLeftY};return m.internal={pdfEscape:xa,getStyle:Dh,getFont:Rh,getFontSize:Gt,getCharSpace:ct,getTextColor:Le,getLineHeight:Qa,getLineHeightFactor:go,getLineWidth:Yu,write:Ze,getHorizontalCoordinate:fc,getVerticalCoordinate:Pl,getCoordinateString:Lu,getVerticalCoordinateString:ol,collections:{},newObject:tt,newAdditionalObject:rr,newObjectDeferred:nt,newObjectDeferredBegin:Ct,getFilters:pn,putStream:Tn,events:tr,scaleFactor:er,pageSize:{getWidth:function(){return ei(xe)},setWidth:function(Fe){Ti(xe,Fe)},getHeight:function(){return vs(xe)},setHeight:function(Fe){ma(xe,Fe)}},encryptionOptions:p,encryption:La,getEncryptor:zc,output:hc,getNumberOfPages:wl,pages:He,out:Je,f2:Ae,f3:fe,getPageInfo:Cc,getPageInfoByObjId:Os,getCurrentPageInfo:qu,getPDFVersion:x,Point:hr,Rectangle:Wr,Matrix:Qt,hasHotfix:na},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ei(xe)},set:function(Fe){Ti(xe,Fe)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return vs(xe)},set:function(Fe){ma(xe,Fe)},enumerable:!0,configurable:!0}),il.call(m,yt),Ft="F1",ro(o,e),tr.publish("initialized"),m}oy.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},oy.prototype.toHexString=function(n){return n.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},oy.prototype.hexToBytes=function(n){for(var r=[],e=0;e<n.length;e+=2)r.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return r.join("")},oy.prototype.processOwnerPassword=function(n,r){return nC(rC(r).substr(0,5),n)},oy.prototype.encryptor=function(n,r){var e=rC(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&r,r>>8&255)).substr(0,10);return function(i){return nC(e,i)}},Kv.prototype.equals=function(n){var r,e="id,objectNumber,equals";if(!n||Nl(n)!==Nl(this))return!1;var i=0;for(r in this)if(!(e.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!n.hasOwnProperty(r)||this[r]!==n[r])return!1;i++}for(r in n)n.hasOwnProperty(r)&&e.indexOf(r)<0&&i--;return i===0},yo.API={events:[]},yo.version="3.0.1";var fu=yo.API,WE=1,b1=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ey=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Xo=function(n){return n.toFixed(2)},Cg=function(n){return n.toFixed(5)};fu.__acroform__={};var Ed=function(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n},bM=function(n){return n*WE},rm=function(n){var r=new bO,e=Rs.internal.getHeight(n)||0,i=Rs.internal.getWidth(n)||0;return r.BBox=[0,0,Number(Xo(i)),Number(Xo(e))],r},L$=fu.__acroform__.setBit=function(n,r){if(n=n||0,r=r||0,isNaN(n)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<r},k$=fu.__acroform__.clearBit=function(n,r){if(n=n||0,r=r||0,isNaN(n)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<r)},O$=fu.__acroform__.getBit=function(n,r){if(isNaN(n)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<r)==0?0:1},Eu=fu.__acroform__.getBitForPdf=function(n,r){if(isNaN(n)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return O$(n,r-1)},Bu=fu.__acroform__.setBitForPdf=function(n,r){if(isNaN(n)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return L$(n,r-1)},Tu=fu.__acroform__.clearBitForPdf=function(n,r){if(isNaN(n)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return k$(n,r-1)},D$=fu.__acroform__.calculateCoordinates=function(n,r){var e=r.internal.getHorizontalCoordinate,i=r.internal.getVerticalCoordinate,o=n[0],a=n[1],l=n[2],t=n[3],h={};return h.lowerLeft_X=e(o)||0,h.lowerLeft_Y=i(a+t)||0,h.upperRight_X=e(o+l)||0,h.upperRight_Y=i(a)||0,[Number(Xo(h.lowerLeft_X)),Number(Xo(h.lowerLeft_Y)),Number(Xo(h.upperRight_X)),Number(Xo(h.upperRight_Y))]},R$=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var r=[],e=n._V||n.DV,i=iC(n,e),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(n.scope.__private__.encodeColorString(n.color)),r.push("/"+o+" "+Xo(i.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC");var a=rm(n);return a.scope=n.scope,a.stream=r.join(`
`),a}},iC=function(n,r){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},o=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");o=n.multiline?o.map(function(fe){return fe.split(`
`)}):o.map(function(fe){return[fe]});var a=e,l=Rs.internal.getHeight(n)||0;l=l<0?-l:l;var t=Rs.internal.getWidth(n)||0;t=t<0?-t:t;var h=function(fe,ce,G){if(fe+1<o.length){var Z=ce+" "+o[fe+1][0];return yx(Z,n,G).width<=t-4}return!1};a++;e:for(;a>0;){r="",a--;var f,p,_=yx("3",n,a).height,g=n.multiline?l-a:(l-_)/2,m=g+=2,b=0,x=0,v=0;if(a<=0){r=`(...) Tj
`,r+="% Width of Text: "+yx(r,n,a=12).width+", FieldWidth:"+t+`
`;break}for(var S="",B=0,F=0;F<o.length;F++)if(o.hasOwnProperty(F)){var O=!1;if(o[F].length!==1&&v!==o[F].length-1){if((_+2)*(B+2)+2>l)continue e;S+=o[F][v],O=!0,x=F,F--}else{S=(S+=o[F][v]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var V=parseInt(F),X=h(V,S,a),Q=F>=o.length-1;if(X&&!Q){S+=" ",v=0;continue}if(X||Q){if(Q)x=V;else if(n.multiline&&(_+2)*(B+2)+2>l)continue e}else{if(!n.multiline||(_+2)*(B+2)+2>l)continue e;x=V}}for(var ee="",ne=b;ne<=x;ne++){var Ae=o[ne];if(n.multiline){if(ne===x){ee+=Ae[v]+" ",v=(v+1)%Ae.length;continue}if(ne===b){ee+=Ae[Ae.length-1]+" ";continue}}ee+=Ae[0]+" "}switch(ee=ee.substr(ee.length-1)==" "?ee.substr(0,ee.length-1):ee,p=yx(ee,n,a).width,n.textAlign){case"right":f=t-p-2;break;case"center":f=(t-p)/2;break;case"left":default:f=2}r+=Xo(f)+" "+Xo(m)+` Td
`,r+="("+b1(ee)+`) Tj
`,r+=-Xo(f)+` 0 Td
`,m=-(a+2),p=0,b=O?x:x+1,B++,S=""}break}return i.text=r,i.fontSize=a,i},yx=function(n,r,e){var i=r.scope.internal.getFont(r.fontName,r.fontStyle),o=r.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:r.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:o}},N$={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},j$=function(n,r){var e={type:"reference",object:n};r.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&r.internal.getPageInfo(n.page).pageContext.annotations.push(e)},U$=function(n,r){for(var e in n)if(n.hasOwnProperty(e)){var i=e,o=n[e];r.internal.newObjectDeferredBegin(o.objId,!0),Nl(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[i]}},z$=function(n,r){if(r.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(IA.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(N$)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");WE=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new xO,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];a.objId=void 0,a.hasAnnotation&&j$(a,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,o){var a=!i;for(var l in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var t=i[l],h=[],f=t.Rect;if(t.Rect&&(t.Rect=D$(t.Rect,o)),o.internal.newObjectDeferredBegin(t.objId,!0),t.DA=Rs.createDefaultAppearanceStream(t),Nl(t)==="object"&&typeof t.getKeyValueListForStream=="function"&&(h=t.getKeyValueListForStream()),t.Rect=f,t.hasAppearanceStream&&!t.appearanceStreamContent){var p=R$(t);h.push({key:"AP",value:"<</N "+p+">>"}),o.internal.acroformPlugin.xForms.push(p)}if(t.appearanceStreamContent){var _="";for(var g in t.appearanceStreamContent)if(t.appearanceStreamContent.hasOwnProperty(g)){var m=t.appearanceStreamContent[g];if(_+="/"+g+" ",_+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var l in m)if(m.hasOwnProperty(l)){var b=m[l];typeof b=="function"&&(b=b.call(o,t)),_+="/"+l+" "+b+" ",o.internal.acroformPlugin.xForms.indexOf(b)>=0||o.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(o,t)),_+="/"+l+" "+b,o.internal.acroformPlugin.xForms.indexOf(b)>=0||o.internal.acroformPlugin.xForms.push(b);_+=">>"}h.push({key:"AP",value:`<<
`+_+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:t.objId}),o.internal.out("endobj")}a&&U$(o.internal.acroformPlugin.xForms,o)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},vO=fu.__acroform__.arrayToPdfArray=function(n,r,e){var i=function(l){return l};if(Array.isArray(n)){for(var o="[",a=0;a<n.length;a++)switch(a!==0&&(o+=" "),Nl(n[a])){case"boolean":case"number":case"object":o+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(r!==void 0&&e&&(i=e.internal.getEncryptor(r)),o+="("+b1(i(n[a].toString()))+")"):o+=n[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},B4=function(n,r,e){var i=function(o){return o};return r!==void 0&&e&&(i=e.internal.getEncryptor(r)),(n=n||"").toString(),n="("+b1(i(n))+")"},hm=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hm.prototype.toString=function(){return this.objId+" 0 R"},hm.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},hm.prototype.getKeyValueListForStream=function(){var n=[],r=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var e in r)if(Object.getOwnPropertyDescriptor(this,r[e]).configurable===!1){var i=r[e],o=this[i];o&&(Array.isArray(o)?n.push({key:i,value:vO(o,this.objId,this.scope)}):o instanceof hm?(o.scope=this.scope,n.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:i,value:o}))}return n};var bO=function(){hm.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};Ed(bO,hm);var xO=function(){hm.call(this);var n,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+b1(e(n))+")"}},set:function(e){n=e}})};Ed(xO,hm);var IA=function n(){hm.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');r=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Eu(r,3)},set:function(S){S?this.F=Bu(r,3):this.F=Tu(r,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');e=S}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(S){i=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(S){i[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(S){i[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(S){i[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(S){i[3]=S}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Fw)return;a="FieldObject"+n.FieldNum++}var S=function(B){return B};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+b1(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var t="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return t},set:function(S){t=S}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(S){h=S}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/WE:f},set:function(S){f=S}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(S){p=S}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof Fw||this instanceof Vg))return B4(_,this.objId,this.scope)},set:function(S){S=S.toString(),_=S}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ch?g:B4(g,this.objId,this.scope)},set:function(S){S=S.toString(),g=this instanceof ch?S:S.substr(0,1)==="("?ey(S.substr(1,S.length-2)):ey(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ch?ey(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof ch?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ch?m:B4(m,this.objId,this.scope)},set:function(S){S=S.toString(),m=this instanceof ch?S:S.substr(0,1)==="("?ey(S.substr(1,S.length-2)):ey(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ch?ey(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof ch?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(S){S=!!S,x=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(S){b=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,1)},set:function(S){S?this.Ff=Bu(this.Ff,1):this.Ff=Tu(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,2)},set:function(S){S?this.Ff=Bu(this.Ff,2):this.Ff=Tu(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,3)},set:function(S){S?this.Ff=Bu(this.Ff,3):this.Ff=Tu(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');v=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(v){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Ed(IA,hm);var o1=function(){IA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vO(r,this.objId,this.scope)},set:function(e){var i,o;o=[],typeof(i=e)=="string"&&(o=function(a,l,t){t||(t=1);for(var h,f=[];h=l.exec(a);)f.push(h[t]);return f}(i,/\((.*?)\)/g)),r=o}}),this.getOptions=function(){return r},this.setOptions=function(e){r=e,this.sort&&r.sort()},this.addOption=function(e){e=(e=e||"").toString(),r.push(e),this.sort&&r.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();r.indexOf(e)!==-1&&(r.splice(r.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,18)},set:function(e){e?this.Ff=Bu(this.Ff,18):this.Ff=Tu(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Bu(this.Ff,19):this.Ff=Tu(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,20)},set:function(e){e?(this.Ff=Bu(this.Ff,20),r.sort()):this.Ff=Tu(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,22)},set:function(e){e?this.Ff=Bu(this.Ff,22):this.Ff=Tu(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,23)},set:function(e){e?this.Ff=Bu(this.Ff,23):this.Ff=Tu(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,27)},set:function(e){e?this.Ff=Bu(this.Ff,27):this.Ff=Tu(this.Ff,27)}}),this.hasAppearanceStream=!1};Ed(o1,IA);var a1=function(){o1.call(this),this.fontName="helvetica",this.combo=!1};Ed(a1,o1);var l1=function(){a1.call(this),this.combo=!0};Ed(l1,a1);var xv=function(){l1.call(this),this.edit=!0};Ed(xv,l1);var ch=function(){IA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,15)},set:function(e){e?this.Ff=Bu(this.Ff,15):this.Ff=Tu(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,16)},set:function(e){e?this.Ff=Bu(this.Ff,16):this.Ff=Tu(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,17)},set:function(e){e?this.Ff=Bu(this.Ff,17):this.Ff=Tu(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,26)},set:function(e){e?this.Ff=Bu(this.Ff,26):this.Ff=Tu(this.Ff,26)}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(a){return a};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+b1(e(r[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(e){Nl(e)==="object"&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){typeof e=="string"&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};Ed(ch,IA);var wv=function(){ch.call(this),this.pushButton=!0};Ed(wv,ch);var c1=function(){ch.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(r){n=r!==void 0?r:[]}})};Ed(c1,ch);var Fw=function(){var n,r;IA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(o){r=o}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(t){return t};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,l=[];for(a in l.push("<<"),i)l.push("/"+a+" ("+b1(o(i[a]))+")");return l.push(">>"),l.join(`
`)},set:function(o){Nl(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(o){e="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rs.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ed(Fw,IA),c1.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var e=this.Kids[r];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},c1.prototype.createOption=function(n){var r=new Fw;return r.Parent=this,r.optionName=n,this.Kids.push(r),H$.call(this.scope,r),r};var Sv=function(){ch.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rs.CheckBox.createAppearanceStream()};Ed(Sv,ch);var Vg=function(){IA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,13)},set:function(r){r?this.Ff=Bu(this.Ff,13):this.Ff=Tu(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,21)},set:function(r){r?this.Ff=Bu(this.Ff,21):this.Ff=Tu(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,23)},set:function(r){r?this.Ff=Bu(this.Ff,23):this.Ff=Tu(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,24)},set:function(r){r?this.Ff=Bu(this.Ff,24):this.Ff=Tu(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,25)},set:function(r){r?this.Ff=Bu(this.Ff,25):this.Ff=Tu(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,26)},set:function(r){r?this.Ff=Bu(this.Ff,26):this.Ff=Tu(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(r){Number.isInteger(r)&&(n=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ed(Vg,IA);var Cv=function(){Vg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Eu(this.Ff,14)},set:function(n){n?this.Ff=Bu(this.Ff,14):this.Ff=Tu(this.Ff,14)}}),this.password=!0};Ed(Cv,Vg);var Rs={CheckBox:{createAppearanceStream:function(){return{N:{On:Rs.CheckBox.YesNormal},D:{On:Rs.CheckBox.YesPushDown,Off:Rs.CheckBox.OffPushDown}}},YesPushDown:function(n){var r=rm(n);r.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),a=iC(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+Xo(Rs.internal.getWidth(n))+" "+Xo(Rs.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+Xo(a.fontSize)+" Tf "+o),e.push("BT"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC"),r.stream=e.join(`
`),r},YesNormal:function(n){var r=rm(n);r.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=[],a=Rs.internal.getHeight(n),l=Rs.internal.getWidth(n),t=iC(n,n.caption);return o.push("1 g"),o.push("0 0 "+Xo(l)+" "+Xo(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Xo(l-1)+" "+Xo(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+e+" "+Xo(t.fontSize)+" Tf "+i),o.push(t.text),o.push("ET"),o.push("Q"),r.stream=o.join(`
`),r},OffPushDown:function(n){var r=rm(n);r.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Xo(Rs.internal.getWidth(n))+" "+Xo(Rs.internal.getHeight(n))+" re"),e.push("f"),r.stream=e.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(n){var r={D:{Off:Rs.RadioButton.Circle.OffPushDown},N:{}};return r.N[n]=Rs.RadioButton.Circle.YesNormal,r.D[n]=Rs.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(n){var r=rm(n);r.scope=n.scope;var e=[],i=Rs.internal.getWidth(n)<=Rs.internal.getHeight(n)?Rs.internal.getWidth(n)/4:Rs.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var o=Rs.internal.Bezier_C,a=Number((i*o).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Cg(Rs.internal.getWidth(n)/2)+" "+Cg(Rs.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),r.stream=e.join(`
`),r},YesPushDown:function(n){var r=rm(n);r.scope=n.scope;var e=[],i=Rs.internal.getWidth(n)<=Rs.internal.getHeight(n)?Rs.internal.getWidth(n)/4:Rs.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*Rs.internal.Bezier_C).toFixed(5)),l=Number((i*Rs.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Cg(Rs.internal.getWidth(n)/2)+" "+Cg(Rs.internal.getHeight(n)/2)+" cm"),e.push(o+" 0 m"),e.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),e.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),e.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),e.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Cg(Rs.internal.getWidth(n)/2)+" "+Cg(Rs.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),e.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),e.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),e.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),e.push("f"),e.push("Q"),r.stream=e.join(`
`),r},OffPushDown:function(n){var r=rm(n);r.scope=n.scope;var e=[],i=Rs.internal.getWidth(n)<=Rs.internal.getHeight(n)?Rs.internal.getWidth(n)/4:Rs.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*Rs.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Cg(Rs.internal.getWidth(n)/2)+" "+Cg(Rs.internal.getHeight(n)/2)+" cm"),e.push(o+" 0 m"),e.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),e.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),e.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),e.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),e.push("f"),e.push("Q"),r.stream=e.join(`
`),r}},Cross:{createAppearanceStream:function(n){var r={D:{Off:Rs.RadioButton.Cross.OffPushDown},N:{}};return r.N[n]=Rs.RadioButton.Cross.YesNormal,r.D[n]=Rs.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(n){var r=rm(n);r.scope=n.scope;var e=[],i=Rs.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+Xo(Rs.internal.getWidth(n)-2)+" "+Xo(Rs.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(Xo(i.x1.x)+" "+Xo(i.x1.y)+" m"),e.push(Xo(i.x2.x)+" "+Xo(i.x2.y)+" l"),e.push(Xo(i.x4.x)+" "+Xo(i.x4.y)+" m"),e.push(Xo(i.x3.x)+" "+Xo(i.x3.y)+" l"),e.push("s"),e.push("Q"),r.stream=e.join(`
`),r},YesPushDown:function(n){var r=rm(n);r.scope=n.scope;var e=Rs.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+Xo(Rs.internal.getWidth(n))+" "+Xo(Rs.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Xo(Rs.internal.getWidth(n)-2)+" "+Xo(Rs.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Xo(e.x1.x)+" "+Xo(e.x1.y)+" m"),i.push(Xo(e.x2.x)+" "+Xo(e.x2.y)+" l"),i.push(Xo(e.x4.x)+" "+Xo(e.x4.y)+" m"),i.push(Xo(e.x3.x)+" "+Xo(e.x3.y)+" l"),i.push("s"),i.push("Q"),r.stream=i.join(`
`),r},OffPushDown:function(n){var r=rm(n);r.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Xo(Rs.internal.getWidth(n))+" "+Xo(Rs.internal.getHeight(n))+" re"),e.push("f"),r.stream=e.join(`
`),r}}},createDefaultAppearanceStream:function(n){var r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+r+" "+n.fontSize+" Tf "+e}};Rs.internal={Bezier_C:.551915024494,calculateCross:function(n){var r=Rs.internal.getWidth(n),e=Rs.internal.getHeight(n),i=Math.min(r,e);return{x1:{x:(r-i)/2,y:(e-i)/2+i},x2:{x:(r-i)/2+i,y:(e-i)/2},x3:{x:(r-i)/2,y:(e-i)/2},x4:{x:(r-i)/2+i,y:(e-i)/2+i}}}},Rs.internal.getWidth=function(n){var r=0;return Nl(n)==="object"&&(r=bM(n.Rect[2])),r},Rs.internal.getHeight=function(n){var r=0;return Nl(n)==="object"&&(r=bM(n.Rect[3])),r};var H$=fu.addField=function(n){if(z$(this,n),!(n instanceof IA))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=n).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};fu.AcroFormChoiceField=o1,fu.AcroFormListBox=a1,fu.AcroFormComboBox=l1,fu.AcroFormEditBox=xv,fu.AcroFormButton=ch,fu.AcroFormPushButton=wv,fu.AcroFormRadioButton=c1,fu.AcroFormCheckBox=Sv,fu.AcroFormTextField=Vg,fu.AcroFormPasswordField=Cv,fu.AcroFormAppearance=Rs,fu.AcroForm={ChoiceField:o1,ListBox:a1,ComboBox:l1,EditBox:xv,Button:ch,PushButton:wv,RadioButton:c1,CheckBox:Sv,TextField:Vg,PasswordField:Cv,Appearance:Rs},yo.AcroForm={ChoiceField:o1,ListBox:a1,ComboBox:l1,EditBox:xv,Button:ch,PushButton:wv,RadioButton:c1,CheckBox:Sv,TextField:Vg,PasswordField:Cv,Appearance:Rs};var Q$=yo.AcroForm;function wO(n){return n.reduce(function(r,e,i){return r[e]=i,r},{})}(function(n){n.__addimage__={};var r="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(fe,ce){var G,Z,z,k,R,N=r;if((ce=ce||r)==="RGBA"||fe.data!==void 0&&fe.data instanceof Uint8ClampedArray&&"height"in fe&&"width"in fe)return"RGBA";if(X(fe))for(R in e)for(z=e[R],G=0;G<z.length;G+=1){for(k=!0,Z=0;Z<z[G].length;Z+=1)if(z[G][Z]!==void 0&&z[G][Z]!==fe[Z]){k=!1;break}if(k===!0){N=R;break}}else for(R in e)for(z=e[R],G=0;G<z.length;G+=1){for(k=!0,Z=0;Z<z[G].length;Z+=1)if(z[G][Z]!==void 0&&z[G][Z]!==fe.charCodeAt(Z)){k=!1;break}if(k===!0){N=R;break}}return N===r&&ce!==r&&(N=ce),N},o=function fe(ce){for(var G=this.internal.write,Z=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);ce.objectId=this.internal.newObject();var k=[];if(k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Image"}),k.push({key:"Width",value:ce.width}),k.push({key:"Height",value:ce.height}),ce.colorSpace===v.INDEXED?k.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ce.palette.length/3-1)+" "+("sMask"in ce&&ce.sMask!==void 0?ce.objectId+2:ce.objectId+1)+" 0 R]"}):(k.push({key:"ColorSpace",value:"/"+ce.colorSpace}),ce.colorSpace===v.DEVICE_CMYK&&k.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),k.push({key:"BitsPerComponent",value:ce.bitsPerComponent}),"decodeParameters"in ce&&ce.decodeParameters!==void 0&&k.push({key:"DecodeParms",value:"<<"+ce.decodeParameters+">>"}),"transparency"in ce&&Array.isArray(ce.transparency)){for(var R="",N=0,U=ce.transparency.length;N<U;N++)R+=ce.transparency[N]+" "+ce.transparency[N]+" ";k.push({key:"Mask",value:"["+R+"]"})}ce.sMask!==void 0&&k.push({key:"SMask",value:ce.objectId+1+" 0 R"});var Y=ce.filter!==void 0?["/"+ce.filter]:void 0;if(Z({data:ce.data,additionalKeyValues:k,alreadyAppliedFilters:Y,objectId:ce.objectId}),G("endobj"),"sMask"in ce&&ce.sMask!==void 0){var de="/Predictor "+ce.predictor+" /Colors 1 /BitsPerComponent "+ce.bitsPerComponent+" /Columns "+ce.width,J={width:ce.width,height:ce.height,colorSpace:"DeviceGray",bitsPerComponent:ce.bitsPerComponent,decodeParameters:de,data:ce.sMask};"filter"in ce&&(J.filter=ce.filter),fe.call(this,J)}if(ce.colorSpace===v.INDEXED){var xe=this.internal.newObject();Z({data:ee(new Uint8Array(ce.palette)),objectId:xe}),G("endobj")}},a=function(){var fe=this.internal.collections.addImage_images;for(var ce in fe)o.call(this,fe[ce])},l=function(){var fe,ce=this.internal.collections.addImage_images,G=this.internal.write;for(var Z in ce)G("/I"+(fe=ce[Z]).index,fe.objectId,"0","R")},t=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",l))},h=function(){var fe=this.internal.collections.addImage_images;return t.call(this),fe},f=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(fe){return typeof n["process"+fe.toUpperCase()]=="function"},_=function(fe){return Nl(fe)==="object"&&fe.nodeType===1},g=function(fe,ce){if(fe.nodeName==="IMG"&&fe.hasAttribute("src")){var G=""+fe.getAttribute("src");if(G.indexOf("data:image/")===0)return bv(unescape(G).split("base64,").pop());var Z=n.loadFile(G,!0);if(Z!==void 0)return Z}if(fe.nodeName==="CANVAS"){if(fe.width===0||fe.height===0)throw new Error("Given canvas must have data. Canvas width: "+fe.width+", height: "+fe.height);var z;switch(ce){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;case"JPEG":case"JPG":default:z="image/jpeg"}return bv(fe.toDataURL(z,1).split("base64,").pop())}},m=function(fe){var ce=this.internal.collections.addImage_images;if(ce){for(var G in ce)if(fe===ce[G].alias)return ce[G]}},b=function(fe,ce,G){return fe||ce||(fe=-96,ce=-96),fe<0&&(fe=-1*G.width*72/fe/this.internal.scaleFactor),ce<0&&(ce=-1*G.height*72/ce/this.internal.scaleFactor),fe===0&&(fe=ce*G.width/G.height),ce===0&&(ce=fe*G.height/G.width),[fe,ce]},x=function(fe,ce,G,Z,z,k){var R=b.call(this,G,Z,z),N=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,Y=h.call(this);if(G=R[0],Z=R[1],Y[z.index]=z,k){k*=Math.PI/180;var de=Math.cos(k),J=Math.sin(k),xe=function(Ue){return Ue.toFixed(4)},Te=[xe(de),xe(J),xe(-1*J),xe(de),0,0,"cm"]}this.internal.write("q"),k?(this.internal.write([1,"0","0",1,N(fe),U(ce+Z),"cm"].join(" ")),this.internal.write(Te.join(" ")),this.internal.write([N(G),"0","0",N(Z),"0","0","cm"].join(" "))):this.internal.write([N(G),"0","0",N(Z),N(fe),U(ce+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},v=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=n.__addimage__.sHashCode=function(fe){var ce,G,Z=0;if(typeof fe=="string")for(G=fe.length,ce=0;ce<G;ce++)Z=(Z<<5)-Z+fe.charCodeAt(ce),Z|=0;else if(X(fe))for(G=fe.byteLength/2,ce=0;ce<G;ce++)Z=(Z<<5)-Z+fe[ce],Z|=0;return Z},F=n.__addimage__.validateStringAsBase64=function(fe){(fe=fe||"").toString().trim();var ce=!0;return fe.length===0&&(ce=!1),fe.length%4!=0&&(ce=!1),/^[A-Za-z0-9+/]+$/.test(fe.substr(0,fe.length-2))===!1&&(ce=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(fe.substr(-2))===!1&&(ce=!1),ce},O=n.__addimage__.extractImageFromDataUrl=function(fe){if(fe==null||!(fe=fe.trim()).startsWith("data:"))return null;var ce=fe.indexOf(",");return ce<0?null:fe.substring(0,ce).trim().endsWith("base64")?fe.substring(ce+1):null},V=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(fe){return V()&&fe instanceof ArrayBuffer};var X=n.__addimage__.isArrayBufferView=function(fe){return V()&&typeof Uint32Array<"u"&&(fe instanceof Int8Array||fe instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&fe instanceof Uint8ClampedArray||fe instanceof Int16Array||fe instanceof Uint16Array||fe instanceof Int32Array||fe instanceof Uint32Array||fe instanceof Float32Array||fe instanceof Float64Array)},Q=n.__addimage__.binaryStringToUint8Array=function(fe){for(var ce=fe.length,G=new Uint8Array(ce),Z=0;Z<ce;Z++)G[Z]=fe.charCodeAt(Z);return G},ee=n.__addimage__.arrayBufferToBinaryString=function(fe){for(var ce="",G=X(fe)?fe:new Uint8Array(fe),Z=0;Z<G.length;Z+=8192)ce+=String.fromCharCode.apply(null,G.subarray(Z,Z+8192));return ce};n.addImage=function(){var fe,ce,G,Z,z,k,R,N,U;if(typeof arguments[1]=="number"?(ce=r,G=arguments[1],Z=arguments[2],z=arguments[3],k=arguments[4],R=arguments[5],N=arguments[6],U=arguments[7]):(ce=arguments[1],G=arguments[2],Z=arguments[3],z=arguments[4],k=arguments[5],R=arguments[6],N=arguments[7],U=arguments[8]),Nl(fe=arguments[0])==="object"&&!_(fe)&&"imageData"in fe){var Y=fe;fe=Y.imageData,ce=Y.format||ce||r,G=Y.x||G||0,Z=Y.y||Z||0,z=Y.w||Y.width||z,k=Y.h||Y.height||k,R=Y.alias||R,N=Y.compression||N,U=Y.rotation||Y.angle||U}var de=this.internal.getFilters();if(N===void 0&&de.indexOf("FlateEncode")!==-1&&(N="SLOW"),isNaN(G)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");t.call(this);var J=ne.call(this,fe,ce,R,N);return x.call(this,G,Z,z,k,J,U),this};var ne=function(fe,ce,G,Z){var z,k,R;if(typeof fe=="string"&&i(fe)===r){fe=unescape(fe);var N=Ae(fe,!1);(N!==""||(N=n.loadFile(fe,!0))!==void 0)&&(fe=N)}if(_(fe)&&(fe=g(fe,ce)),ce=i(fe,ce),!p(ce))throw new Error("addImage does not support files of type '"+ce+"', please ensure that a plugin for '"+ce+"' support is added.");if(((R=G)==null||R.length===0)&&(G=function(U){return typeof U=="string"||X(U)?B(U):X(U.data)?B(U.data):null}(fe)),(z=m.call(this,G))||(V()&&(fe instanceof Uint8Array||ce==="RGBA"||(k=fe,fe=Q(fe))),z=this["process"+ce.toUpperCase()](fe,f.call(this),G,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in n.image_compression?U:S.NONE}(Z),k)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},Ae=n.__addimage__.convertBase64ToBinaryString=function(fe,ce){ce=typeof ce!="boolean"||ce;var G,Z="";if(typeof fe=="string"){var z;G=(z=O(fe))!==null&&z!==void 0?z:fe;try{Z=bv(G)}catch(k){if(ce)throw F(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+k.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};n.getImageProperties=function(fe){var ce,G,Z="";if(_(fe)&&(fe=g(fe)),typeof fe=="string"&&i(fe)===r&&((Z=Ae(fe,!1))===""&&(Z=n.loadFile(fe)||""),fe=Z),G=i(fe),!p(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!V()||fe instanceof Uint8Array||(fe=Q(fe)),!(ce=this["process"+G.toUpperCase()](fe)))throw new Error("An unknown error occurred whilst processing the image");return ce.fileType=G,ce}})(yo.API),function(n){var r=function(e){if(e!==void 0&&e!="")return!0};yo.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,o,a,l=this.internal.getCoordinateString,t=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(e.objId),f=e.pageContext.annotations,p=!1,_=0;_<f.length&&!p;_++)switch((i=f[_]).type){case"link":(r(i.options.url)||r(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var g=0;g<f.length;g++){i=f[g];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(x.objId),B=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+l(i.bounds.x)+" "+t(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+t(i.bounds.y)+"] ")+"/Contents ("+m(S(i.contents))+")",a+=" /Popup "+v.objId+" 0 R",a+=" /P "+h.objId+" 0 R",a+=" /T ("+m(S(B))+") >>",x.content=a;var F=x.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+l(i.bounds.x+30)+" "+t(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+t(i.bounds.y)+"] ")+" /Parent "+F,i.open&&(a+=" /Open true"),a+=" >>",v.content=a,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":o="/Rect ["+l(i.bounds.x)+" "+t(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+t(i.bounds.y+i.bounds.h)+"] ";var O=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+m(b(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var V=this.annotations._nameMap[i.options.name];i.options.pageNumber=V.page,i.options.top=V.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var X=t(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+X+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,o,a,l){var t=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;t.pageContext.annotations.push({finalBounds:{x:h(e),y:f(i),w:h(e+o),h:f(i+a)},options:l,type:"link"})},n.textWithLink=function(e,i,o,a){var l,t,h=this.getTextWidth(e),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){t=a.maxWidth;var p=this.splitTextToSize(e,t).length;l=Math.ceil(f*p)}else t=h,l=f;return this.text(e,i,o,a),o+=.2*f,a.align==="center"&&(i-=h/2),a.align==="right"&&(i-=h),this.link(i,o-f,t,l,a),h},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(yo.API),function(n){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(x){return r[x.charCodeAt(0)]!==void 0},l=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},t=n.__arabicParser__.isArabicEndLetter=function(x){return l(x)&&a(x)&&r[x.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(x){return l(x)&&o.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return l(x)&&a(x)&&r[x.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return l(x)&&a(x)&&r[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return l(x)&&a(x)&&r[x.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return l(x)&&a(x)&&r[x.charCodeAt(0)].length==4},_=n.__arabicParser__.resolveLigatures=function(x){var v=0,S=e,B="",F=0;for(v=0;v<x.length;v+=1)S[x.charCodeAt(v)]!==void 0?(F++,typeof(S=S[x.charCodeAt(v)])=="number"&&(B+=String.fromCharCode(S),S=e,F=0),v===x.length-1&&(S=e,B+=x.charAt(v-(F-1)),v-=F-1,F=0)):(S=e,B+=x.charAt(v-F),v-=F,F=0);return B};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&i[x.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(x,v,S){return l(x)?a(x)===!1?-1:!f(x)||!l(v)&&!l(S)||!l(S)&&t(v)||t(x)&&!l(v)||t(x)&&h(v)||t(x)&&t(v)?0:p(x)&&l(v)&&!t(v)&&l(S)&&f(S)?3:t(x)||!l(S)?1:2:-1},m=function(x){var v=0,S=0,B=0,F="",O="",V="",X=(x=x||"").split("\\s+"),Q=[];for(v=0;v<X.length;v+=1){for(Q.push(""),S=0;S<X[v].length;S+=1)F=X[v][S],O=X[v][S-1],V=X[v][S+1],l(F)?(B=g(F,O,V),Q[v]+=B!==-1?String.fromCharCode(r[F.charCodeAt(0)][B]):F):Q[v]+=F;Q[v]=_(Q[v])}return Q.join(" ")},b=n.__arabicParser__.processArabic=n.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(v)){var B=0;for(S=[],B=0;B<v.length;B+=1)Array.isArray(v[B])?S.push([m(v[B][0]),v[B][1],v[B][2]]):S.push([m(v[B])]);x=S}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",b])}(yo.API),yo.API.autoPrint=function(n){var r;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})}return this},function(n){var r=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(t){i=isNaN(t)||Number.isInteger(t)===!1||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(t){o=isNaN(t)||Number.isInteger(t)===!1||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(t){a=t}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(e,i){var o;if((e=e||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])}(yo.API),function(n){var r={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(x){_=x}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(x){b=x}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return i.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){i.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),_=f.font||this.getFont(),g=f.scaleFactor||this.internal.scaleFactor,m=0,b=0,x=0,v=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var S=f.maxWidth;S>0?typeof h=="string"?h=this.splitTextToSize(h,S):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(F,O){return F.concat(v.splitTextToSize(O,S))},[])):h=Array.isArray(h)?h:[h];for(var B=0;B<h.length;B++)m<(x=this.getStringUnitWidth(h[B],{font:_})*p)&&(m=x);return m!==0&&(b=h.length),{w:m/=g,h:Math.max((b*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var h=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new a(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=n.cell=function(){var h;h=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,_=this.internal.__cell__.margins||r,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=_.top,m&&g&&(this.printHeaderRow(h.lineNumber,!0),h.y+=g[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,e===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,_,g){if(i.call(this),!p)throw new Error("No data for PDF table.");var m,b,x,v,S=[],B=[],F=[],O={},V={},X=[],Q=[],ee=(g=g||{}).autoSize||!1,ne=g.printHeaders!==!1,Ae=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,fe=g.margins||Object.assign({width:this.getPageWidth()},r),ce=typeof g.padding=="number"?g.padding:3,G=g.headerBackgroundColor||"#c8c8c8",Z=g.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=ne,this.internal.__cell__.margins=fe,this.internal.__cell__.table_font_size=Ae,this.internal.__cell__.padding=ce,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=Z,this.setFontSize(Ae),_==null)B=S=Object.keys(p[0]),F=S.map(function(){return"left"});else if(Array.isArray(_)&&Nl(_[0])==="object")for(S=_.map(function(Y){return Y.name}),B=_.map(function(Y){return Y.prompt||Y.name||""}),F=_.map(function(Y){return Y.align||"left"}),m=0;m<_.length;m+=1)V[_[m].name]=_[m].width*(19.049976/25.4);else Array.isArray(_)&&typeof _[0]=="string"&&(B=S=_,F=S.map(function(){return"left"}));if(ee||Array.isArray(_)&&typeof _[0]=="string")for(m=0;m<S.length;m+=1){for(O[v=S[m]]=p.map(function(Y){return Y[v]}),this.setFont(void 0,"bold"),X.push(this.getTextDimensions(B[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=O[v],this.setFont(void 0,"normal"),x=0;x<b.length;x+=1)X.push(this.getTextDimensions(b[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[v]=Math.max.apply(null,X)+ce+ce,X=[]}if(ne){var z={};for(m=0;m<S.length;m+=1)z[S[m]]={},z[S[m]].text=B[m],z[S[m]].align=F[m];var k=t.call(this,z,V);Q=S.map(function(Y){return new a(h,f,V[Y],k,z[Y].text,void 0,z[Y].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var R=_.reduce(function(Y,de){return Y[de.name]=de.align,Y},{});for(m=0;m<p.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:p[m]},this);var N=t.call(this,p[m],V);for(x=0;x<S.length;x+=1){var U=p[m][S[x]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:x,data:U},this),l.call(this,new a(h,f,V[S[x]],N,U,m+2,R[S[x]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var t=function(h,f){var p=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(h).map(function(m){var b=h[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,f[m]-p-p)},this).map(function(m){return this.getLineHeightFactor()*m.length*_/g+p+p},this).reduce(function(m,b){return Math.max(m,b)},0)};n.setTableHeaderRow=function(h){i.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){p=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,g.push(p)),p.lineNumber=h;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,p),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),e=!1}}(yo.API);var SO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},CO=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],sC=wO(CO),EO=[100,200,300,400,500,600,700,800,900],V$=wO(EO);function oC(n){var r=n.family.replace(/"|'/g,"").toLowerCase(),e=function(a){return SO[a=a||"normal"]?a:"normal"}(n.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),o=function(a){return typeof sC[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:r,style:e,weight:i,stretch:o,src:n.src||[],ref:n.ref||{name:r,style:[o,e,i].join(" ")}}}function xM(n,r,e,i){var o;for(o=e;o>=0&&o<r.length;o+=i)if(n[r[o]])return n[r[o]];for(o=e;o>=0&&o<r.length;o-=i)if(n[r[o]])return n[r[o]]}var G$={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wM={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function SM(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function W$(n,r,e){for(var i=(e=e||{}).defaultFontFamily||"times",o=Object.assign({},G$,e.genericFontFamilies||{}),a=null,l=null,t=0;t<r.length;++t)if(o[(a=oC(r[t])).family]&&(a.family=o[a.family]),n.hasOwnProperty(a.family)){l=n[a.family];break}if(!(l=l||n[i]))throw new Error("Could not find a font-family for the rule '"+SM(a)+"' and default family '"+i+"'.");if(l=function(h,f){if(f[h])return f[h];var p=sC[h],_=p<=sC.normal?-1:1,g=xM(f,CO,p,_);if(!g)throw new Error("Could not find a matching font-stretch value for "+h);return g}(a.stretch,l),l=function(h,f){if(f[h])return f[h];for(var p=SO[h],_=0;_<p.length;++_)if(f[p[_]])return f[p[_]];throw new Error("Could not find a matching font-style for "+h)}(a.style,l),!(l=function(h,f){if(f[h])return f[h];if(h===400&&f[500])return f[500];if(h===500&&f[400])return f[400];var p=V$[h],_=xM(f,EO,p,h<400?-1:1);if(!_)throw new Error("Could not find a matching font-weight for value "+h);return _}(a.weight,l)))throw new Error("Failed to resolve a font for the rule '"+SM(a)+"'.");return l}function CM(n){return n.trimLeft()}function $$(n,r){for(var e=0;e<n.length;){if(n.charAt(e)===r)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function K$(n){var r=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],n.substring(r[0].length)]}var _x,EM,BM,T4=["times"];(function(n){var r,e,i,o,a,l,t,h,f,p=function(J){return J=J||{},this.isStrokeTransparent=J.isStrokeTransparent||!1,this.strokeOpacity=J.strokeOpacity||1,this.strokeStyle=J.strokeStyle||"#000000",this.fillStyle=J.fillStyle||"#000000",this.isFillTransparent=J.isFillTransparent||!1,this.fillOpacity=J.fillOpacity||1,this.font=J.font||"10px sans-serif",this.textBaseline=J.textBaseline||"alphabetic",this.textAlign=J.textAlign||"left",this.lineWidth=J.lineWidth||1,this.lineJoin=J.lineJoin||"miter",this.lineCap=J.lineCap||"butt",this.path=J.path||[],this.transform=J.transform!==void 0?J.transform.clone():new h,this.globalCompositeOperation=J.globalCompositeOperation||"normal",this.globalAlpha=J.globalAlpha||1,this.clip_path=J.clip_path||[],this.currentPoint=J.currentPoint||new l,this.miterLimit=J.miterLimit||10,this.lastPoint=J.lastPoint||new l,this.lineDashOffset=J.lineDashOffset||0,this.lineDash=J.lineDash||[],this.margin=J.margin||[0,0,0,0],this.prevPageLastElemOffset=J.prevPageLastElemOffset||0,this.ignoreClearRect=typeof J.ignoreClearRect!="boolean"||J.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new _(this),r=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,l=this.internal.Point,t=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var _=function(J){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var xe=J;Object.defineProperty(this,"pdf",{get:function(){return xe}});var Te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Te},set:function(ot){Te=!!ot}});var Ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ue},set:function(ot){Ue=!!ot}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(ot){isNaN(ot)||(pe=ot)}});var Oe=0;Object.defineProperty(this,"posY",{get:function(){return Oe},set:function(ot){isNaN(ot)||(Oe=ot)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ot){var Je;typeof ot=="number"?Je=[ot,ot,ot,ot]:((Je=new Array(4))[0]=ot[0],Je[1]=ot.length>=2?ot[1]:Je[0],Je[2]=ot.length>=3?ot[2]:Je[0],Je[3]=ot.length>=4?ot[3]:Je[1]),f.margin=Je}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(ot){re=ot}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(ot){ie=ot}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(ot){Be=ot}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ot){ot instanceof p&&(f=ot)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ot){f.path=ot}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(ot){He=ot}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ot){var Je;Je=g(ot),this.ctx.fillStyle=Je.style,this.ctx.isFillTransparent=Je.a===0,this.ctx.fillOpacity=Je.a,this.pdf.setFillColor(Je.r,Je.g,Je.b,{a:Je.a}),this.pdf.setTextColor(Je.r,Je.g,Je.b,{a:Je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ot){var Je=g(ot);this.ctx.strokeStyle=Je.style,this.ctx.isStrokeTransparent=Je.a===0,this.ctx.strokeOpacity=Je.a,Je.a===0?this.pdf.setDrawColor(255,255,255):(Je.a,this.pdf.setDrawColor(Je.r,Je.g,Je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ot){["butt","round","square"].indexOf(ot)!==-1&&(this.ctx.lineCap=ot,this.pdf.setLineCap(ot))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ot){isNaN(ot)||(this.ctx.lineWidth=ot,this.pdf.setLineWidth(ot))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ot){["bevel","round","miter"].indexOf(ot)!==-1&&(this.ctx.lineJoin=ot,this.pdf.setLineJoin(ot))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ot){isNaN(ot)||(this.ctx.miterLimit=ot,this.pdf.setMiterLimit(ot))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ot){this.ctx.textBaseline=ot}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ot){["right","end","center","left","start"].indexOf(ot)!==-1&&(this.ctx.textAlign=ot)}});var Ge=null;function Ne(ot,Je){if(Ge===null){var Ze=function(bt){var yt=[];return Object.keys(bt).forEach(function(Nt){bt[Nt].forEach(function(kt){var Gt=null;switch(kt){case"bold":Gt={family:Nt,weight:"bold"};break;case"italic":Gt={family:Nt,style:"italic"};break;case"bolditalic":Gt={family:Nt,weight:"bold",style:"italic"};break;case"":case"normal":Gt={family:Nt}}Gt!==null&&(Gt.ref={name:Nt,style:kt},yt.push(Gt))})}),yt}(ot.getFontList());Ge=function(bt){for(var yt={},Nt=0;Nt<bt.length;++Nt){var kt=oC(bt[Nt]),Gt=kt.family,fr=kt.stretch,Tr=kt.style,yr=kt.weight;yt[Gt]=yt[Gt]||{},yt[Gt][fr]=yt[Gt][fr]||{},yt[Gt][fr][Tr]=yt[Gt][fr][Tr]||{},yt[Gt][fr][Tr][yr]=kt}return yt}(Ze.concat(Je))}return Ge}var st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(ot){Ge=null,st=ot}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ot){var Je;if(this.ctx.font=ot,(Je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ot))!==null){var Ze=Je[1];Je[2];var bt=Je[3],yt=Je[4];Je[5];var Nt=Je[6],kt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(yt)[2];yt=Math.floor(kt==="px"?parseFloat(yt)*this.pdf.internal.scaleFactor:kt==="em"?parseFloat(yt)*this.pdf.getFontSize():parseFloat(yt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(yt);var Gt=function(pr){var Ft,er,ur=[],Yt=pr.trim();if(Yt==="")return T4;if(Yt in wM)return[wM[Yt]];for(;Yt!=="";){switch(er=null,Ft=(Yt=CM(Yt)).charAt(0)){case'"':case"'":er=$$(Yt.substring(1),Ft);break;default:er=K$(Yt)}if(er===null||(ur.push(er[0]),(Yt=CM(er[1]))!==""&&Yt.charAt(0)!==","))return T4;Yt=Yt.replace(/^,/,"")}return ur}(Nt);if(this.fontFaces){var fr=W$(Ne(this.pdf,this.fontFaces),Gt.map(function(pr){return{family:pr,stretch:"normal",weight:bt,style:Ze}}));this.pdf.setFont(fr.ref.name,fr.ref.style)}else{var Tr="";(bt==="bold"||parseInt(bt,10)>=700||Ze==="bold")&&(Tr="bold"),Ze==="italic"&&(Tr+="italic"),Tr.length===0&&(Tr="normal");for(var yr="",Dr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jt=0;jt<Gt.length;jt++){if(this.pdf.internal.getFont(Gt[jt],Tr,{noFallback:!0,disableWarning:!0})!==void 0){yr=Gt[jt];break}if(Tr==="bolditalic"&&this.pdf.internal.getFont(Gt[jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)yr=Gt[jt],Tr="bold";else if(this.pdf.internal.getFont(Gt[jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){yr=Gt[jt],Tr="normal";break}}if(yr===""){for(var Jt=0;Jt<Gt.length;Jt++)if(Dr[Gt[Jt]]){yr=Dr[Gt[Jt]];break}}yr=yr===""?"Times":yr,this.pdf.setFont(yr,Tr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ot){this.ctx.globalCompositeOperation=ot}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ot){this.ctx.globalAlpha=ot}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ot){this.ctx.lineDashOffset=ot,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ot){this.ctx.lineDash=ot,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ot){this.ctx.ignoreClearRect=!!ot}})};_.prototype.setLineDash=function(J){this.lineDash=J},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){O.call(this,"fill",!1)},_.prototype.stroke=function(){O.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(J,xe){if(isNaN(J)||isNaN(xe))throw Xl.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Te=this.ctx.transform.applyToPoint(new l(J,xe));this.path.push({type:"mt",x:Te.x,y:Te.y}),this.ctx.lastPoint=new l(J,xe)},_.prototype.closePath=function(){var J=new l(0,0),xe=0;for(xe=this.path.length-1;xe!==-1;xe--)if(this.path[xe].type==="begin"&&Nl(this.path[xe+1])==="object"&&typeof this.path[xe+1].x=="number"){J=new l(this.path[xe+1].x,this.path[xe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(J.x,J.y)},_.prototype.lineTo=function(J,xe){if(isNaN(J)||isNaN(xe))throw Xl.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Te=this.ctx.transform.applyToPoint(new l(J,xe));this.path.push({type:"lt",x:Te.x,y:Te.y}),this.ctx.lastPoint=new l(Te.x,Te.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},_.prototype.quadraticCurveTo=function(J,xe,Te,Ue){if(isNaN(Te)||isNaN(Ue)||isNaN(J)||isNaN(xe))throw Xl.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new l(Te,Ue)),Oe=this.ctx.transform.applyToPoint(new l(J,xe));this.path.push({type:"qct",x1:Oe.x,y1:Oe.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new l(pe.x,pe.y)},_.prototype.bezierCurveTo=function(J,xe,Te,Ue,pe,Oe){if(isNaN(pe)||isNaN(Oe)||isNaN(J)||isNaN(xe)||isNaN(Te)||isNaN(Ue))throw Xl.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new l(pe,Oe)),ie=this.ctx.transform.applyToPoint(new l(J,xe)),Be=this.ctx.transform.applyToPoint(new l(Te,Ue));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:Be.x,y2:Be.y,x:re.x,y:re.y}),this.ctx.lastPoint=new l(re.x,re.y)},_.prototype.arc=function(J,xe,Te,Ue,pe,Oe){if(isNaN(J)||isNaN(xe)||isNaN(Te)||isNaN(Ue)||isNaN(pe))throw Xl.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Oe=!!Oe,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new l(J,xe));J=re.x,xe=re.y;var ie=this.ctx.transform.applyToPoint(new l(0,Te)),Be=this.ctx.transform.applyToPoint(new l(0,0));Te=Math.sqrt(Math.pow(ie.x-Be.x,2)+Math.pow(ie.y-Be.y,2))}Math.abs(pe-Ue)>=2*Math.PI&&(Ue=0,pe=2*Math.PI),this.path.push({type:"arc",x:J,y:xe,radius:Te,startAngle:Ue,endAngle:pe,counterclockwise:Oe})},_.prototype.arcTo=function(J,xe,Te,Ue,pe){throw new Error("arcTo not implemented.")},_.prototype.rect=function(J,xe,Te,Ue){if(isNaN(J)||isNaN(xe)||isNaN(Te)||isNaN(Ue))throw Xl.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(J,xe),this.lineTo(J+Te,xe),this.lineTo(J+Te,xe+Ue),this.lineTo(J,xe+Ue),this.lineTo(J,xe),this.lineTo(J+Te,xe),this.lineTo(J,xe)},_.prototype.fillRect=function(J,xe,Te,Ue){if(isNaN(J)||isNaN(xe)||isNaN(Te)||isNaN(Ue))throw Xl.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(J,xe,Te,Ue),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},_.prototype.strokeRect=function(J,xe,Te,Ue){if(isNaN(J)||isNaN(xe)||isNaN(Te)||isNaN(Ue))throw Xl.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(J,xe,Te,Ue),this.stroke())},_.prototype.clearRect=function(J,xe,Te,Ue){if(isNaN(J)||isNaN(xe)||isNaN(Te)||isNaN(Ue))throw Xl.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(J,xe,Te,Ue))},_.prototype.save=function(J){J=typeof J!="boolean"||J;for(var xe=this.pdf.internal.getCurrentPageInfo().pageNumber,Te=0;Te<this.pdf.internal.getNumberOfPages();Te++)this.pdf.setPage(Te+1),this.pdf.internal.out("q");if(this.pdf.setPage(xe),J){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ue=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ue}},_.prototype.restore=function(J){J=typeof J!="boolean"||J;for(var xe=this.pdf.internal.getCurrentPageInfo().pageNumber,Te=0;Te<this.pdf.internal.getNumberOfPages();Te++)this.pdf.setPage(Te+1),this.pdf.internal.out("Q");this.pdf.setPage(xe),J&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(J){var xe,Te,Ue,pe;if(J.isCanvasGradient===!0&&(J=J.getColor()),!J)return{r:0,g:0,b:0,a:0,style:J};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(J))xe=0,Te=0,Ue=0,pe=0;else{var Oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(J);if(Oe!==null)xe=parseInt(Oe[1]),Te=parseInt(Oe[2]),Ue=parseInt(Oe[3]),pe=1;else if((Oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(J))!==null)xe=parseInt(Oe[1]),Te=parseInt(Oe[2]),Ue=parseInt(Oe[3]),pe=parseFloat(Oe[4]);else{if(pe=1,typeof J=="string"&&J.charAt(0)!=="#"){var re=new gO(J);J=re.ok?re.toHex():"#000000"}J.length===4?(xe=J.substring(1,2),xe+=xe,Te=J.substring(2,3),Te+=Te,Ue=J.substring(3,4),Ue+=Ue):(xe=J.substring(1,3),Te=J.substring(3,5),Ue=J.substring(5,7)),xe=parseInt(xe,16),Te=parseInt(Te,16),Ue=parseInt(Ue,16)}}return{r:xe,g:Te,b:Ue,a:pe,style:J}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(J,xe,Te,Ue){if(isNaN(xe)||isNaN(Te)||typeof J!="string")throw Xl.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ue=isNaN(Ue)?void 0:Ue,!m.call(this)){var pe=N(this.ctx.transform.rotation),Oe=this.ctx.transform.scaleX;ce.call(this,{text:J,x:xe,y:Te,scale:Oe,angle:pe,align:this.textAlign,maxWidth:Ue})}},_.prototype.strokeText=function(J,xe,Te,Ue){if(isNaN(xe)||isNaN(Te)||typeof J!="string")throw Xl.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){Ue=isNaN(Ue)?void 0:Ue;var pe=N(this.ctx.transform.rotation),Oe=this.ctx.transform.scaleX;ce.call(this,{text:J,x:xe,y:Te,scale:Oe,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:Ue})}},_.prototype.measureText=function(J){if(typeof J!="string")throw Xl.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var xe=this.pdf,Te=this.pdf.internal.scaleFactor,Ue=xe.internal.getFontSize(),pe=xe.getStringUnitWidth(J)*Ue/xe.internal.scaleFactor,Oe=function(re){var ie=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new Oe({width:pe*=Math.round(96*Te/72*1e4)/1e4})},_.prototype.scale=function(J,xe){if(isNaN(J)||isNaN(xe))throw Xl.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Te=new h(J,0,0,xe,0,0);this.ctx.transform=this.ctx.transform.multiply(Te)},_.prototype.rotate=function(J){if(isNaN(J))throw Xl.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var xe=new h(Math.cos(J),Math.sin(J),-Math.sin(J),Math.cos(J),0,0);this.ctx.transform=this.ctx.transform.multiply(xe)},_.prototype.translate=function(J,xe){if(isNaN(J)||isNaN(xe))throw Xl.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Te=new h(1,0,0,1,J,xe);this.ctx.transform=this.ctx.transform.multiply(Te)},_.prototype.transform=function(J,xe,Te,Ue,pe,Oe){if(isNaN(J)||isNaN(xe)||isNaN(Te)||isNaN(Ue)||isNaN(pe)||isNaN(Oe))throw Xl.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new h(J,xe,Te,Ue,pe,Oe);this.ctx.transform=this.ctx.transform.multiply(re)},_.prototype.setTransform=function(J,xe,Te,Ue,pe,Oe){J=isNaN(J)?1:J,xe=isNaN(xe)?0:xe,Te=isNaN(Te)?0:Te,Ue=isNaN(Ue)?1:Ue,pe=isNaN(pe)?0:pe,Oe=isNaN(Oe)?0:Oe,this.ctx.transform=new h(J,xe,Te,Ue,pe,Oe)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(J,xe,Te,Ue,pe,Oe,re,ie,Be){var He=this.pdf.getImageProperties(J),Ge=1,Ne=1,st=1,ot=1;Ue!==void 0&&ie!==void 0&&(st=ie/Ue,ot=Be/pe,Ge=He.width/Ue*ie/Ue,Ne=He.height/pe*Be/pe),Oe===void 0&&(Oe=xe,re=Te,xe=0,Te=0),Ue!==void 0&&ie===void 0&&(ie=Ue,Be=pe),Ue===void 0&&ie===void 0&&(ie=He.width,Be=He.height);for(var Je,Ze=this.ctx.transform.decompose(),bt=N(Ze.rotate.shx),yt=new h,Nt=(yt=(yt=(yt=yt.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new t(Oe-xe*st,re-Te*ot,Ue*Ge,pe*Ne)),kt=v.call(this,Nt),Gt=[],fr=0;fr<kt.length;fr+=1)Gt.indexOf(kt[fr])===-1&&Gt.push(kt[fr]);if(F(Gt),this.autoPaging)for(var Tr=Gt[0],yr=Gt[Gt.length-1],Dr=Tr;Dr<yr+1;Dr++){this.pdf.setPage(Dr);var jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Jt=Dr===1?this.posY+this.margin[0]:this.margin[0],pr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],er=Dr===1?0:pr+(Dr-2)*Ft;if(this.ctx.clip_path.length!==0){var ur=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Je,this.posX+this.margin[3],-er+Jt+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=ur}var Yt=JSON.parse(JSON.stringify(Nt));Yt=B([Yt],this.posX+this.margin[3],-er+Jt+this.ctx.prevPageLastElemOffset)[0];var mr=(Dr>Tr||Dr<yr)&&x.call(this);mr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,Ft,null).clip().discardPath()),this.pdf.addImage(J,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,bt),mr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(J,"JPEG",Nt.x,Nt.y,Nt.w,Nt.h,null,null,bt)};var v=function(J,xe,Te){var Ue=[];xe=xe||this.pdf.internal.pageSize.width,Te=Te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(J.type){default:case"mt":case"lt":Ue.push(Math.floor((J.y+pe)/Te)+1);break;case"arc":Ue.push(Math.floor((J.y+pe-J.radius)/Te)+1),Ue.push(Math.floor((J.y+pe+J.radius)/Te)+1);break;case"qct":var Oe=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x,J.y);Ue.push(Math.floor((Oe.y+pe)/Te)+1),Ue.push(Math.floor((Oe.y+Oe.h+pe)/Te)+1);break;case"bct":var re=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x2,J.y2,J.x,J.y);Ue.push(Math.floor((re.y+pe)/Te)+1),Ue.push(Math.floor((re.y+re.h+pe)/Te)+1);break;case"rect":Ue.push(Math.floor((J.y+pe)/Te)+1),Ue.push(Math.floor((J.y+J.h+pe)/Te)+1)}for(var ie=0;ie<Ue.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<Ue[ie];)S.call(this);return Ue},S=function(){var J=this.fillStyle,xe=this.strokeStyle,Te=this.font,Ue=this.lineCap,pe=this.lineWidth,Oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=J,this.strokeStyle=xe,this.font=Te,this.lineCap=Ue,this.lineWidth=pe,this.lineJoin=Oe},B=function(J,xe,Te){for(var Ue=0;Ue<J.length;Ue++)switch(J[Ue].type){case"bct":J[Ue].x2+=xe,J[Ue].y2+=Te;case"qct":J[Ue].x1+=xe,J[Ue].y1+=Te;case"mt":case"lt":case"arc":default:J[Ue].x+=xe,J[Ue].y+=Te}return J},F=function(J){return J.sort(function(xe,Te){return xe-Te})},O=function(J,xe){for(var Te,Ue,pe=this.fillStyle,Oe=this.strokeStyle,re=this.lineCap,ie=this.lineWidth,Be=Math.abs(ie*this.ctx.transform.scaleX),He=this.lineJoin,Ge=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),st=[],ot=0;ot<Ne.length;ot++)if(Ne[ot].x!==void 0)for(var Je=v.call(this,Ne[ot]),Ze=0;Ze<Je.length;Ze+=1)st.indexOf(Je[Ze])===-1&&st.push(Je[Ze]);for(var bt=0;bt<st.length;bt++)for(;this.pdf.internal.getNumberOfPages()<st[bt];)S.call(this);if(F(st),this.autoPaging)for(var yt=st[0],Nt=st[st.length-1],kt=yt;kt<Nt+1;kt++){this.pdf.setPage(kt),this.fillStyle=pe,this.strokeStyle=Oe,this.lineCap=re,this.lineWidth=Be,this.lineJoin=He;var Gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],fr=kt===1?this.posY+this.margin[0]:this.margin[0],Tr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dr=kt===1?0:Tr+(kt-2)*yr;if(this.ctx.clip_path.length!==0){var jt=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Te,this.posX+this.margin[3],-Dr+fr+this.ctx.prevPageLastElemOffset),V.call(this,J,!0),this.path=jt}if(Ue=JSON.parse(JSON.stringify(Ge)),this.path=B(Ue,this.posX+this.margin[3],-Dr+fr+this.ctx.prevPageLastElemOffset),xe===!1||kt===0){var Jt=(kt>yt||kt<Nt)&&x.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,yr,null).clip().discardPath()),V.call(this,J,xe),Jt&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=Be,V.call(this,J,xe),this.lineWidth=ie;this.path=Ge},V=function(J,xe){if((J!=="stroke"||xe||!b.call(this))&&(J==="stroke"||xe||!m.call(this))){for(var Te,Ue,pe=[],Oe=this.path,re=0;re<Oe.length;re++){var ie=Oe[re];switch(ie.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:ie,deltas:[],abs:[]});break;case"lt":var Be=pe.length;if(Oe[re-1]&&!isNaN(Oe[re-1].x)&&(Te=[ie.x-Oe[re-1].x,ie.y-Oe[re-1].y],Be>0)){for(;Be>=0;Be--)if(pe[Be-1].close!==!0&&pe[Be-1].begin!==!0){pe[Be-1].deltas.push(Te),pe[Be-1].abs.push(ie);break}}break;case"bct":Te=[ie.x1-Oe[re-1].x,ie.y1-Oe[re-1].y,ie.x2-Oe[re-1].x,ie.y2-Oe[re-1].y,ie.x-Oe[re-1].x,ie.y-Oe[re-1].y],pe[pe.length-1].deltas.push(Te);break;case"qct":var He=Oe[re-1].x+2/3*(ie.x1-Oe[re-1].x),Ge=Oe[re-1].y+2/3*(ie.y1-Oe[re-1].y),Ne=ie.x+2/3*(ie.x1-ie.x),st=ie.y+2/3*(ie.y1-ie.y),ot=ie.x,Je=ie.y;Te=[He-Oe[re-1].x,Ge-Oe[re-1].y,Ne-Oe[re-1].x,st-Oe[re-1].y,ot-Oe[re-1].x,Je-Oe[re-1].y],pe[pe.length-1].deltas.push(Te);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(ie)}}Ue=xe?null:J==="stroke"?"stroke":"fill";for(var Ze=!1,bt=0;bt<pe.length;bt++)if(pe[bt].arc)for(var yt=pe[bt].abs,Nt=0;Nt<yt.length;Nt++){var kt=yt[Nt];kt.type==="arc"?ee.call(this,kt.x,kt.y,kt.radius,kt.startAngle,kt.endAngle,kt.counterclockwise,void 0,xe,!Ze):G.call(this,kt.x,kt.y),Ze=!0}else if(pe[bt].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(pe[bt].begin!==!0){var Gt=pe[bt].start.x,fr=pe[bt].start.y;Z.call(this,pe[bt].deltas,Gt,fr),Ze=!0}Ue&&ne.call(this,Ue),xe&&Ae.call(this)}},X=function(J){var xe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Te=xe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return J-Te;case"top":return J+xe-Te;case"hanging":return J+xe-2*Te;case"middle":return J+xe/2-Te;case"ideographic":return J;case"alphabetic":default:return J}},Q=function(J){return J+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var J=function(){};return J.colorStops=[],J.addColorStop=function(xe,Te){this.colorStops.push([xe,Te])},J.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},J.isCanvasGradient=!0,J},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ee=function(J,xe,Te,Ue,pe,Oe,re,ie,Be){for(var He=k.call(this,Te,Ue,pe,Oe),Ge=0;Ge<He.length;Ge++){var Ne=He[Ge];Ge===0&&(Be?fe.call(this,Ne.x1+J,Ne.y1+xe):G.call(this,Ne.x1+J,Ne.y1+xe)),z.call(this,J,xe,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}ie?Ae.call(this):ne.call(this,re)},ne=function(J){switch(J){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ae=function(){this.pdf.clip(),this.pdf.discardPath()},fe=function(J,xe){this.pdf.internal.out(e(J)+" "+i(xe)+" m")},ce=function(J){var xe;switch(J.align){case"right":case"end":xe="right";break;case"center":xe="center";break;case"left":case"start":default:xe="left"}var Te=this.pdf.getTextDimensions(J.text),Ue=X.call(this,J.y),pe=Q.call(this,Ue)-Te.h,Oe=this.ctx.transform.applyToPoint(new l(J.x,Ue)),re=this.ctx.transform.decompose(),ie=new h;ie=(ie=(ie=ie.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var Be,He,Ge,Ne=this.ctx.transform.applyToRectangle(new t(J.x,Ue,Te.w,Te.h)),st=ie.applyToRectangle(new t(J.x,pe,Te.w,Te.h)),ot=v.call(this,st),Je=[],Ze=0;Ze<ot.length;Ze+=1)Je.indexOf(ot[Ze])===-1&&Je.push(ot[Ze]);if(F(Je),this.autoPaging)for(var bt=Je[0],yt=Je[Je.length-1],Nt=bt;Nt<yt+1;Nt++){this.pdf.setPage(Nt);var kt=Nt===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fr=this.pdf.internal.pageSize.height-this.margin[2],Tr=fr-this.margin[0],yr=this.pdf.internal.pageSize.width-this.margin[1],Dr=yr-this.margin[3],jt=Nt===1?0:Gt+(Nt-2)*Tr;if(this.ctx.clip_path.length!==0){var Jt=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Be,this.posX+this.margin[3],-1*jt+kt),V.call(this,"fill",!0),this.path=Jt}var pr=B([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-jt+kt+this.ctx.prevPageLastElemOffset)[0];J.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*J.scale),Ge=this.lineWidth,this.lineWidth=Ge*J.scale);var Ft=this.autoPaging!=="text";if(Ft||pr.y+pr.h<=fr){if(Ft||pr.y>=kt&&pr.x<=yr){var er=Ft?J.text:this.pdf.splitTextToSize(J.text,J.maxWidth||yr-pr.x)[0],ur=B([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-jt+kt+this.ctx.prevPageLastElemOffset)[0],Yt=Ft&&(Nt>bt||Nt<yt)&&x.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dr,Tr,null).clip().discardPath()),this.pdf.text(er,ur.x,ur.y,{angle:J.angle,align:xe,renderingMode:J.renderingMode}),Yt&&this.pdf.restoreGraphicsState()}}else pr.y<fr&&(this.ctx.prevPageLastElemOffset+=fr-pr.y);J.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ge)}else J.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*J.scale),Ge=this.lineWidth,this.lineWidth=Ge*J.scale),this.pdf.text(J.text,Oe.x+this.posX,Oe.y+this.posY,{angle:J.angle,align:xe,renderingMode:J.renderingMode,maxWidth:J.maxWidth}),J.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ge)},G=function(J,xe,Te,Ue){Te=Te||0,Ue=Ue||0,this.pdf.internal.out(e(J+Te)+" "+i(xe+Ue)+" l")},Z=function(J,xe,Te){return this.pdf.lines(J,xe,Te,null,null)},z=function(J,xe,Te,Ue,pe,Oe,re,ie){this.pdf.internal.out([r(o(Te+J)),r(a(Ue+xe)),r(o(pe+J)),r(a(Oe+xe)),r(o(re+J)),r(a(ie+xe)),"c"].join(" "))},k=function(J,xe,Te,Ue){for(var pe=2*Math.PI,Oe=Math.PI/2;xe>Te;)xe-=pe;var re=Math.abs(Te-xe);re<pe&&Ue&&(re=pe-re);for(var ie=[],Be=Ue?-1:1,He=xe;re>1e-5;){var Ge=He+Be*Math.min(re,Oe);ie.push(R.call(this,J,He,Ge)),re-=Math.abs(Ge-He),He=Ge}return ie},R=function(J,xe,Te){var Ue=(Te-xe)/2,pe=J*Math.cos(Ue),Oe=J*Math.sin(Ue),re=pe,ie=-Oe,Be=re*re+ie*ie,He=Be+re*pe+ie*Oe,Ge=4/3*(Math.sqrt(2*Be*He)-He)/(re*Oe-ie*pe),Ne=re-Ge*ie,st=ie+Ge*re,ot=Ne,Je=-st,Ze=Ue+xe,bt=Math.cos(Ze),yt=Math.sin(Ze);return{x1:J*Math.cos(xe),y1:J*Math.sin(xe),x2:Ne*bt-st*yt,y2:Ne*yt+st*bt,x3:ot*bt-Je*yt,y3:ot*yt+Je*bt,x4:J*Math.cos(Te),y4:J*Math.sin(Te)}},N=function(J){return 180*J/Math.PI},U=function(J,xe,Te,Ue,pe,Oe){var re=J+.5*(Te-J),ie=xe+.5*(Ue-xe),Be=pe+.5*(Te-pe),He=Oe+.5*(Ue-Oe),Ge=Math.min(J,pe,re,Be),Ne=Math.max(J,pe,re,Be),st=Math.min(xe,Oe,ie,He),ot=Math.max(xe,Oe,ie,He);return new t(Ge,st,Ne-Ge,ot-st)},Y=function(J,xe,Te,Ue,pe,Oe,re,ie){var Be,He,Ge,Ne,st,ot,Je,Ze,bt,yt,Nt,kt,Gt,fr,Tr=Te-J,yr=Ue-xe,Dr=pe-Te,jt=Oe-Ue,Jt=re-pe,pr=ie-Oe;for(He=0;He<41;He++)bt=(Je=(Ge=J+(Be=He/40)*Tr)+Be*((st=Te+Be*Dr)-Ge))+Be*(st+Be*(pe+Be*Jt-st)-Je),yt=(Ze=(Ne=xe+Be*yr)+Be*((ot=Ue+Be*jt)-Ne))+Be*(ot+Be*(Oe+Be*pr-ot)-Ze),He==0?(Nt=bt,kt=yt,Gt=bt,fr=yt):(Nt=Math.min(Nt,bt),kt=Math.min(kt,yt),Gt=Math.max(Gt,bt),fr=Math.max(fr,yt));return new t(Math.round(Nt),Math.round(kt),Math.round(Gt-Nt),Math.round(fr-kt))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var J,xe,Te=(J=this.ctx.lineDash,xe=this.ctx.lineDashOffset,JSON.stringify({lineDash:J,lineDashOffset:xe}));this.prevLineDash!==Te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Te)}}})(yo.API),function(n){var r=function(a){var l,t,h,f,p,_,g,m,b,x;for(t=[],h=0,f=(a+=l="\0\0\0\0".slice(a.length%4||4)).length;f>h;h+=4)(p=(a.charCodeAt(h)<<24)+(a.charCodeAt(h+1)<<16)+(a.charCodeAt(h+2)<<8)+a.charCodeAt(h+3))!==0?(_=(p=((p=((p=((p=(p-(x=p%85))/85)-(b=p%85))/85)-(m=p%85))/85)-(g=p%85))/85)%85,t.push(_+33,g+33,m+33,b+33,x+33)):t.push(122);return function(v,S){for(var B=S;B>0;B--)v.pop()}(t,l.length),String.fromCharCode.apply(String,t)+"~>"},e=function(a){var l,t,h,f,p,_=String,g="length",m=255,b="charCodeAt",x="slice",v="replace";for(a[x](-2),a=a[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),h=[],f=0,p=(a+=l="uuuuu"[x](a[g]%5||5))[g];p>f;f+=5)t=52200625*(a[b](f)-33)+614125*(a[b](f+1)-33)+7225*(a[b](f+2)-33)+85*(a[b](f+3)-33)+(a[b](f+4)-33),h.push(m&t>>24,m&t>>16,m&t>>8,m&t);return function(S,B){for(var F=B;F>0;F--)S.pop()}(h,l[g]),_.fromCharCode.apply(_,h)},i=function(a){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),l.test(a)===!1)return"";for(var t="",h=0;h<a.length;h+=2)t+=String.fromCharCode("0x"+(a[h]+a[h+1]));return t},o=function(a){for(var l=new Uint8Array(a.length),t=a.length;t--;)l[t]=a.charCodeAt(t);return a=(l=eC(l)).reduce(function(h,f){return h+String.fromCharCode(f)},"")};n.processDataByFilters=function(a,l){var t=0,h=a||"",f=[];for(typeof(l=l||[])=="string"&&(l=[l]),t=0;t<l.length;t+=1)switch(l[t]){case"ASCII85Decode":case"/ASCII85Decode":h=e(h),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=r(h),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=o(h),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[t]+'" is not implemented')}return{data:h,reverseChain:f.reverse().join(" ")}}}(yo.API),function(n){n.loadFile=function(r,e,i){return function(o,a,l){a=a!==!1,l=typeof l=="function"?l:function(){};var t=void 0;try{t=function(h,f,p){var _=new XMLHttpRequest,g=0,m=function(b){var x=b.length,v=[],S=String.fromCharCode;for(g=0;g<x;g+=1)v.push(S(255&b.charCodeAt(g)));return v.join("")};if(_.open("GET",h,!f),_.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(_.onload=function(){_.status===200?p(m(this.responseText)):p(void 0)}),_.send(null),f&&_.status===200)return m(_.responseText)}(o,a,l)}catch{}return t}(r,e,i)},n.loadImageFile=n.loadFile}(yo.API),function(n){function r(){return(_o.html2canvas?Promise.resolve(_o.html2canvas):qS(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function e(){return(_o.DOMPurify?Promise.resolve(_o.DOMPurify):qS(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var t=Nl(l);return t==="undefined"?"undefined":t==="string"||l instanceof String?"string":t==="number"||l instanceof Number?"number":t==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":t==="object"?"object":"unknown"},o=function(l,t){var h=document.createElement(l);for(var f in t.className&&(h.className=t.className),t.innerHTML&&t.dompurify&&(h.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)h.style[f]=t.style[f];return h},a=function l(t){var h=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),f=l.convert(Promise.resolve(),h);return f=(f=f.setProgress(1,l,1,[l])).set(t)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(l,t){return l.__proto__=t||a.prototype,l},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(l,t){return this.then(function(){switch(t=t||function(h){switch(i(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(e).then(function(h){return this.set({src:o("div",{innerHTML:l,dompurify:h})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},a.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function h(f,p){for(var _=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),g=f.firstChild;g;g=g.nextSibling)p!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||_.appendChild(h(g,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(_.width=f.width,_.height=f.height,_.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(_.value=f.value),_.addEventListener("load",function(){_.scrollTop=f.scrollTop,_.scrollLeft=f.scrollLeft},!0)),_}(this.prop.src,this.opt.html2canvas.javascriptEnabled);t.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(r).then(function(t){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,t(this.prop.container,h)}).then(function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(r).then(function(t){var h=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var m=f[g],b=m.src.find(function(x){return x.format==="truetype"});b&&h.addFont(b.url,m.ref.name,m.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,h.context2d.save(!0),t(this.prop.container,_)}).then(function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(l,t,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(l,t):this.outputPdf(l,t)},a.prototype.outputPdf=function(l,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,t)})},a.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},a.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(l){if(i(l)!=="object")return this;var t=Object.keys(l||{}).map(function(h){if(h in a.template.prop)return function(){this.prop[h]=l[h]};switch(h){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[h]=l[h]}}},this);return this.then(function(){return this.thenList(t)})},a.prototype.get=function(l,t){return this.then(function(){var h=l in a.template.prop?this.prop[l]:this.opt[l];return t?t(h):h})},a.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},a.prototype.setPageSize=function(l){function t(h,f){return Math.floor(h*f/72*96)}return this.then(function(){(l=l||yo.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:t(l.inner.width,l.k),height:t(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},a.prototype.setProgress=function(l,t,h,f){return l!=null&&(this.progress.val=l),t!=null&&(this.progress.state=t),h!=null&&(this.progress.n=h),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(l,t,h,f){return this.setProgress(l?this.progress.val+l:null,t||null,h?this.progress.n+h:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(l,t){var h=this;return this.thenCore(l,t,function(f,p){return h.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(_){return h.updateProgress(null,f),_}).then(f,p).then(function(_){return h.updateProgress(1),_})})},a.prototype.thenCore=function(l,t,h){h=h||Promise.prototype.then,l&&(l=l.bind(this)),t&&(t=t.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),p=h.call(f,l,t);return a.convert(p,this.__proto__)},a.prototype.thenExternal=function(l,t){return Promise.prototype.then.call(this,l,t)},a.prototype.thenList=function(l){var t=this;return l.forEach(function(h){t=t.thenCore(h)}),t},a.prototype.catch=function(l){l&&(l=l.bind(this));var t=Promise.prototype.catch.call(this,l);return a.convert(t,this)},a.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},a.prototype.error=function(l){return this.then(function(){throw new Error(l)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,yo.getPageSize=function(l,t,h){if(Nl(l)==="object"){var f=l;l=f.orientation,t=f.unit||t,h=f.format||h}t=t||"mm",h=h||"a4",l=(""+(l||"P")).toLowerCase();var p,_=(""+h).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+t}var m,b=0,x=0;if(g.hasOwnProperty(_))b=g[_][1]/p,x=g[_][0]/p;else try{b=h[1],x=h[0]}catch{throw new Error("Invalid format: "+h)}if(l==="p"||l==="portrait")l="p",x>b&&(m=x,x=b,b=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",b>x&&(m=x,x=b,b=m)}return{width:x,height:b,unit:t,k:p,orientation:l}},n.html=function(l,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(oC):null;var h=new a(t);return t.worker?h:h.from(l).doCallback()}}(yo.API),yo.API.addJS=function(n){return BM=n,this.internal.events.subscribe("postPutResources",function(){_x=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_x+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),EM=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+BM+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_x!==void 0&&EM!==void 0&&this.internal.out("/Names <</JavaScript "+_x+" 0 R>>")}),this},function(n){var r;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=e.outline.render().split(/\r\n/),a=0;a<o.length;a++){var l=o[a],t=i.exec(l);if(t!=null){var h=t[1];e.internal.newObjectDeferredBegin(h,!1)}e.internal.write(l)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(a=0;a<f;a++){var _=e.internal.newObject();p.push(_);var g=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<p.length;a++)e.internal.write("(page_"+(a+1)+")"+p[a]+" 0 R");e.internal.write(" ] >>","endobj"),r=e.internal.newObject(),e.internal.write("<< /Dests "+m+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+r+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,o,a){var l={title:o,options:a,children:[]};return i==null&&(i=this.root),i.children.push(l),l},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var l=i.children[a];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var t=this.count=this.count_r({count:0},l);if(t>0&&this.line("/Count "+t),l.options&&l.options.pageNumber){var h=e.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var f=0;f<i.children.length;f++)this.renderItems(i.children[f])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,o){for(var a=0;a<o.children.length;a++)i.count++,this.count_r(i,o.children[a]);return i.count}}])}(yo.API),function(n){var r=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,o,a,l,t){var h,f=this.decode.DCT_DECODE,p=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=l||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(h=function(_){for(var g,m=256*_.charCodeAt(4)+_.charCodeAt(5),b=_.length,x={width:0,height:0,numcomponents:1},v=4;v<b;v+=2){if(v+=m,r.indexOf(_.charCodeAt(v+1))!==-1){g=256*_.charCodeAt(v+5)+_.charCodeAt(v+6),x={width:256*_.charCodeAt(v+7)+_.charCodeAt(v+8),height:g,numcomponents:_.charCodeAt(v+9)};break}m=256*_.charCodeAt(v+2)+_.charCodeAt(v+3)}return x}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:t=this.color_spaces.DEVICE_GRAY;break;case 4:t=this.color_spaces.DEVICE_CMYK;break;case 3:t=this.color_spaces.DEVICE_RGB}p={data:e,width:h.width,height:h.height,colorSpace:t,bitsPerComponent:8,filter:f,index:i,alias:o}}return p}}(yo.API);var ty,vx,TM,IM,MM,q$=function(){var n,r,e;function i(a){var l,t,h,f,p,_,g,m,b,x,v,S,B,F;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},_=null;;){switch(l=this.readUInt32(),b=(function(){var O,V;for(V=[],O=0;O<4;++O)V.push(String.fromCharCode(this.data[this.pos++]));return V}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":_&&this.animation.frames.push(_),this.pos+=4,_={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),f=this.readUInt16()||100,_.delay=1e3*p/f,_.disposeOp=this.data[this.pos++],_.blendOp=this.data[this.pos++],_.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,l-=4),a=(_!=null?_.data:void 0)||this.imgData,S=0;0<=l?S<l:S>l;0<=l?++S:--S)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((x=h-this.transparency.indexed.length)>0)for(B=0;0<=x?B<x:B>x;0<=x?++B:--B)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":g=(v=this.read(l)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,v.slice(g+1));break;case"IEND":return _&&this.animation.frames.push(_),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,t=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*t,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var l,t;for(t=[],l=0;0<=a?l<a:l>a;0<=a?++l:--l)t.push(this.data[this.pos++]);return t},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var l=this.pixelBitlength/8,t=new Uint8Array(this.width*this.height*l),h=0,f=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function p(_,g,m,b){var x,v,S,B,F,O,V,X,Q,ee,ne,Ae,fe,ce,G,Z,z,k,R,N,U,Y=Math.ceil((f.width-_)/m),de=Math.ceil((f.height-g)/b),J=f.width==Y&&f.height==de;for(ce=l*Y,Ae=J?t:new Uint8Array(ce*de),O=a.length,fe=0,v=0;fe<de&&h<O;){switch(a[h++]){case 0:for(B=z=0;z<ce;B=z+=1)Ae[v++]=a[h++];break;case 1:for(B=k=0;k<ce;B=k+=1)x=a[h++],F=B<l?0:Ae[v-l],Ae[v++]=(x+F)%256;break;case 2:for(B=R=0;R<ce;B=R+=1)x=a[h++],S=(B-B%l)/l,G=fe&&Ae[(fe-1)*ce+S*l+B%l],Ae[v++]=(G+x)%256;break;case 3:for(B=N=0;N<ce;B=N+=1)x=a[h++],S=(B-B%l)/l,F=B<l?0:Ae[v-l],G=fe&&Ae[(fe-1)*ce+S*l+B%l],Ae[v++]=(x+Math.floor((F+G)/2))%256;break;case 4:for(B=U=0;U<ce;B=U+=1)x=a[h++],S=(B-B%l)/l,F=B<l?0:Ae[v-l],fe===0?G=Z=0:(G=Ae[(fe-1)*ce+S*l+B%l],Z=S&&Ae[(fe-1)*ce+(S-1)*l+B%l]),V=F+G-Z,X=Math.abs(V-F),ee=Math.abs(V-G),ne=Math.abs(V-Z),Q=X<=ee&&X<=ne?F:ee<=ne?G:Z,Ae[v++]=(x+Q)%256;break;default:throw new Error("Invalid filter algorithm: "+a[h-1])}if(!J){var xe=((g+fe*b)*f.width+_)*l,Te=fe*ce;for(B=0;B<Y;B+=1){for(var Ue=0;Ue<l;Ue+=1)t[xe++]=Ae[Te++];xe+=(m-1)*l}}fe++}}return a=E$(a),f.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),t},i.prototype.decodePalette=function(){var a,l,t,h,f,p,_,g,m;for(t=this.palette,p=this.transparency.indexed||[],f=new Uint8Array((p.length||0)+t.length),h=0,a=0,l=_=0,g=t.length;_<g;l=_+=3)f[h++]=t[l],f[h++]=t[l+1],f[h++]=t[l+2],f[h++]=(m=p[a++])!=null?m:255;return f},i.prototype.copyToImageData=function(a,l){var t,h,f,p,_,g,m,b,x,v,S;if(h=this.colors,x=null,t=this.hasAlphaChannel,this.palette.length&&(x=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),h=4,t=!0),b=(f=a.data||a).length,_=x||l,p=g=0,h===1)for(;p<b;)m=x?4*l[p/4]:g,v=_[m++],f[p++]=v,f[p++]=v,f[p++]=v,f[p++]=t?_[m++]:255,g=m;else for(;p<b;)m=x?4*l[p/4]:g,f[p++]=_[m++],f[p++]=_[m++],f[p++]=_[m++],f[p++]=t?_[m++]:255,g=m},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(_o)==="[object Window]"){try{r=_o.document.createElement("canvas"),e=r.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(a){var l;if(o()===!0)return e.width=a.width,e.height=a.height,e.clearRect(0,0,a.width,a.height),e.putImageData(a,0,0),(l=new Image).src=r.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var l,t,h,f,p,_,g,m;if(this.animation){for(m=[],t=p=0,_=(g=this.animation.frames).length;p<_;t=++p)l=g[t],h=a.createImageData(l.width,l.height),f=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(h,f),l.imageData=h,m.push(l.image=n(h));return m}},i.prototype.renderFrame=function(a,l){var t,h,f;return t=(h=this.animation.frames)[l],f=h[l-1],l===0&&a.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?a.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&a.putImageData(f.imageData,f.xOffset,f.yOffset),t.blendOp===0&&a.clearRect(t.xOffset,t.yOffset,t.width,t.height),a.drawImage(t.image,t.xOffset,t.yOffset)},i.prototype.animate=function(a){var l,t,h,f,p,_,g=this;return t=0,_=this.animation,f=_.numFrames,h=_.frames,p=_.numPlays,(l=function(){var m,b;if(m=t++%f,b=h[m],g.renderFrame(a,m),f>1&&t/f<p)return g.animation._timeout=setTimeout(l,b.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var l,t;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,l=a.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(t=l.createImageData(this.width,this.height),this.copyToImageData(t,this.decodePixels()),l.putImageData(t,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Y$(n){var r=0;if(n[r++]!==71||n[r++]!==73||n[r++]!==70||n[r++]!==56||(n[r++]+1&253)!=56||n[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[r++]|n[r++]<<8,i=n[r++]|n[r++]<<8,o=n[r++],a=o>>7,l=1<<(7&o)+1;n[r++],n[r++];var t=null,h=null;a&&(t=r,h=l,r+=3*l);var f=!0,p=[],_=0,g=null,m=0,b=null;for(this.width=e,this.height=i;f&&r<n.length;)switch(n[r++]){case 33:switch(n[r++]){case 255:if(n[r]!==11||n[r+1]==78&&n[r+2]==69&&n[r+3]==84&&n[r+4]==83&&n[r+5]==67&&n[r+6]==65&&n[r+7]==80&&n[r+8]==69&&n[r+9]==50&&n[r+10]==46&&n[r+11]==48&&n[r+12]==3&&n[r+13]==1&&n[r+16]==0)r+=14,b=n[r++]|n[r++]<<8,r++;else for(r+=12;;){if(!((fe=n[r++])>=0))throw Error("Invalid block size");if(fe===0)break;r+=fe}break;case 249:if(n[r++]!==4||n[r+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[r++];_=n[r++]|n[r++]<<8,g=n[r++],(1&x)==0&&(g=null),m=x>>2&7,r++;break;case 254:for(;;){if(!((fe=n[r++])>=0))throw Error("Invalid block size");if(fe===0)break;r+=fe}break;default:throw new Error("Unknown graphic control label: 0x"+n[r-1].toString(16))}break;case 44:var v=n[r++]|n[r++]<<8,S=n[r++]|n[r++]<<8,B=n[r++]|n[r++]<<8,F=n[r++]|n[r++]<<8,O=n[r++],V=O>>6&1,X=1<<(7&O)+1,Q=t,ee=h,ne=!1;O>>7&&(ne=!0,Q=r,ee=X,r+=3*X);var Ae=r;for(r++;;){var fe;if(!((fe=n[r++])>=0))throw Error("Invalid block size");if(fe===0)break;r+=fe}p.push({x:v,y:S,width:B,height:F,has_local_palette:ne,palette_offset:Q,palette_size:ee,data_offset:Ae,data_length:r-Ae,transparent_index:g,interlaced:!!V,delay:_,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[r-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return b},this.frameInfo=function(ce){if(ce<0||ce>=p.length)throw new Error("Frame index out of range.");return p[ce]},this.decodeAndBlitFrameBGRA=function(ce,G){var Z=this.frameInfo(ce),z=Z.width*Z.height,k=new Uint8Array(z);FM(n,Z.data_offset,k,z);var R=Z.palette_offset,N=Z.transparent_index;N===null&&(N=256);var U=Z.width,Y=e-U,de=U,J=4*(Z.y*e+Z.x),xe=4*((Z.y+Z.height)*e+Z.x),Te=J,Ue=4*Y;Z.interlaced===!0&&(Ue+=4*e*7);for(var pe=8,Oe=0,re=k.length;Oe<re;++Oe){var ie=k[Oe];if(de===0&&(de=U,(Te+=Ue)>=xe&&(Ue=4*Y+4*e*(pe-1),Te=J+(U+Y)*(pe<<1),pe>>=1)),ie===N)Te+=4;else{var Be=n[R+3*ie],He=n[R+3*ie+1],Ge=n[R+3*ie+2];G[Te++]=Ge,G[Te++]=He,G[Te++]=Be,G[Te++]=255}--de}},this.decodeAndBlitFrameRGBA=function(ce,G){var Z=this.frameInfo(ce),z=Z.width*Z.height,k=new Uint8Array(z);FM(n,Z.data_offset,k,z);var R=Z.palette_offset,N=Z.transparent_index;N===null&&(N=256);var U=Z.width,Y=e-U,de=U,J=4*(Z.y*e+Z.x),xe=4*((Z.y+Z.height)*e+Z.x),Te=J,Ue=4*Y;Z.interlaced===!0&&(Ue+=4*e*7);for(var pe=8,Oe=0,re=k.length;Oe<re;++Oe){var ie=k[Oe];if(de===0&&(de=U,(Te+=Ue)>=xe&&(Ue=4*Y+4*e*(pe-1),Te=J+(U+Y)*(pe<<1),pe>>=1)),ie===N)Te+=4;else{var Be=n[R+3*ie],He=n[R+3*ie+1],Ge=n[R+3*ie+2];G[Te++]=Be,G[Te++]=He,G[Te++]=Ge,G[Te++]=255}--de}}}function FM(n,r,e,i){for(var o=n[r++],a=1<<o,l=a+1,t=l+1,h=o+1,f=(1<<h)-1,p=0,_=0,g=0,m=n[r++],b=new Int32Array(4096),x=null;;){for(;p<16&&m!==0;)_|=n[r++]<<p,p+=8,m===1?m=n[r++]:--m;if(p<h)break;var v=_&f;if(_>>=h,p-=h,v!==a){if(v===l)break;for(var S=v<t?v:x,B=0,F=S;F>a;)F=b[F]>>8,++B;var O=F;if(g+B+(S!==v?1:0)>i)return void Xl.log("Warning, gif stream longer than expected.");e[g++]=O;var V=g+=B;for(S!==v&&(e[g++]=O),F=S;B--;)F=b[F],e[--V]=255&F,F>>=8;x!==null&&t<4096&&(b[t++]=x<<8|O,t>=f+1&&h<12&&(++h,f=f<<1|1)),x=v}else t=l+1,f=(1<<(h=o+1))-1,x=null}return g!==i&&Xl.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function I4(n){var r,e,i,o,a,l=Math.floor,t=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),_=new Array(65535),g=new Array(65535),m=new Array(64),b=new Array(64),x=[],v=0,S=7,B=new Array(64),F=new Array(64),O=new Array(64),V=new Array(256),X=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ee=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ne=[0,1,2,3,4,5,6,7,8,9,10,11],Ae=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],fe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ce=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function k(J,xe){for(var Te=0,Ue=0,pe=new Array,Oe=1;Oe<=16;Oe++){for(var re=1;re<=J[Oe];re++)pe[xe[Ue]]=[],pe[xe[Ue]][0]=Te,pe[xe[Ue]][1]=Oe,Ue++,Te++;Te*=2}return pe}function R(J){for(var xe=J[0],Te=J[1]-1;Te>=0;)xe&1<<Te&&(v|=1<<S),Te--,--S<0&&(v==255?(N(255),N(0)):N(v),S=7,v=0)}function N(J){x.push(J)}function U(J){N(J>>8&255),N(255&J)}function Y(J,xe,Te,Ue,pe){for(var Oe,re=pe[0],ie=pe[240],Be=function(yt,Nt){var kt,Gt,fr,Tr,yr,Dr,jt,Jt,pr,Ft,er=0;for(pr=0;pr<8;++pr){kt=yt[er],Gt=yt[er+1],fr=yt[er+2],Tr=yt[er+3],yr=yt[er+4],Dr=yt[er+5],jt=yt[er+6];var ur=kt+(Jt=yt[er+7]),Yt=kt-Jt,mr=Gt+jt,Mr=Gt-jt,sn=fr+Dr,Un=fr-Dr,wn=Tr+yr,Zi=Tr-yr,ai=ur+wn,_i=ur-wn,Zn=mr+sn,Bn=mr-sn;yt[er]=ai+Zn,yt[er+4]=ai-Zn;var On=.707106781*(Bn+_i);yt[er+2]=_i+On,yt[er+6]=_i-On;var tr=.382683433*((ai=Zi+Un)-(Bn=Mr+Yt)),zn=.5411961*ai+tr,Ki=1.306562965*Bn+tr,Qs=.707106781*(Zn=Un+Mr),li=Yt+Qs,Qt=Yt-Qs;yt[er+5]=Qt+zn,yt[er+3]=Qt-zn,yt[er+1]=li+Ki,yt[er+7]=li-Ki,er+=8}for(er=0,pr=0;pr<8;++pr){kt=yt[er],Gt=yt[er+8],fr=yt[er+16],Tr=yt[er+24],yr=yt[er+32],Dr=yt[er+40],jt=yt[er+48];var Ve=kt+(Jt=yt[er+56]),et=kt-Jt,We=Gt+jt,tt=Gt-jt,nt=fr+Dr,Ct=fr-Dr,rr=Tr+yr,Et=Tr-yr,nr=Ve+rr,Fr=Ve-rr,_r=We+nt,pn=We-nt;yt[er]=nr+_r,yt[er+32]=nr-_r;var Tn=.707106781*(pn+Fr);yt[er+16]=Fr+Tn,yt[er+48]=Fr-Tn;var Vn=.382683433*((nr=Et+Ct)-(pn=tt+et)),Bi=.5411961*nr+Vn,Si=1.306562965*pn+Vn,Di=.707106781*(_r=Ct+tt),ds=et+Di,Qi=et-Di;yt[er+40]=Qi+Bi,yt[er+24]=Qi-Bi,yt[er+8]=ds+Si,yt[er+56]=ds-Si,er++}for(pr=0;pr<64;++pr)Ft=yt[pr]*Nt[pr],m[pr]=Ft>0?Ft+.5|0:Ft-.5|0;return m}(J,xe),He=0;He<64;++He)b[Q[He]]=Be[He];var Ge=b[0]-Te;Te=b[0],Ge==0?R(Ue[0]):(R(Ue[g[Oe=32767+Ge]]),R(_[Oe]));for(var Ne=63;Ne>0&&b[Ne]==0;)Ne--;if(Ne==0)return R(re),Te;for(var st,ot=1;ot<=Ne;){for(var Je=ot;b[ot]==0&&ot<=Ne;)++ot;var Ze=ot-Je;if(Ze>=16){st=Ze>>4;for(var bt=1;bt<=st;++bt)R(ie);Ze&=15}Oe=32767+b[ot],R(pe[(Ze<<4)+g[Oe]]),R(_[Oe]),ot++}return Ne!=63&&R(re),Te}function de(J){J=Math.min(Math.max(J,1),100),a!=J&&(function(xe){for(var Te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ue=0;Ue<64;Ue++){var pe=l((Te[Ue]*xe+50)/100);pe=Math.min(Math.max(pe,1),255),t[Q[Ue]]=pe}for(var Oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var ie=l((Oe[re]*xe+50)/100);ie=Math.min(Math.max(ie,1),255),h[Q[re]]=ie}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Ge=0;Ge<8;Ge++)for(var Ne=0;Ne<8;Ne++)f[He]=1/(t[Q[He]]*Be[Ge]*Be[Ne]*8),p[He]=1/(h[Q[He]]*Be[Ge]*Be[Ne]*8),He++}(J<50?Math.floor(5e3/J):Math.floor(200-2*J)),a=J)}this.encode=function(J,xe){xe&&de(xe),x=new Array,v=0,S=7,U(65496),U(65504),U(16),N(74),N(70),N(73),N(70),N(0),N(1),N(1),N(0),U(1),U(1),N(0),N(0),function(){U(65499),U(132),N(0);for(var Gt=0;Gt<64;Gt++)N(t[Gt]);N(1);for(var fr=0;fr<64;fr++)N(h[fr])}(),function(Gt,fr){U(65472),U(17),N(8),U(fr),U(Gt),N(3),N(1),N(17),N(0),N(2),N(17),N(1),N(3),N(17),N(1)}(J.width,J.height),function(){U(65476),U(418),N(0);for(var Gt=0;Gt<16;Gt++)N(ee[Gt+1]);for(var fr=0;fr<=11;fr++)N(ne[fr]);N(16);for(var Tr=0;Tr<16;Tr++)N(Ae[Tr+1]);for(var yr=0;yr<=161;yr++)N(fe[yr]);N(1);for(var Dr=0;Dr<16;Dr++)N(ce[Dr+1]);for(var jt=0;jt<=11;jt++)N(G[jt]);N(17);for(var Jt=0;Jt<16;Jt++)N(Z[Jt+1]);for(var pr=0;pr<=161;pr++)N(z[pr])}(),U(65498),U(12),N(3),N(1),N(0),N(2),N(17),N(3),N(17),N(0),N(63),N(0);var Te=0,Ue=0,pe=0;v=0,S=7,this.encode.displayName="_encode_";for(var Oe,re,ie,Be,He,Ge,Ne,st,ot,Je=J.data,Ze=J.width,bt=J.height,yt=4*Ze,Nt=0;Nt<bt;){for(Oe=0;Oe<yt;){for(He=yt*Nt+Oe,Ne=-1,st=0,ot=0;ot<64;ot++)Ge=He+(st=ot>>3)*yt+(Ne=4*(7&ot)),Nt+st>=bt&&(Ge-=yt*(Nt+1+st-bt)),Oe+Ne>=yt&&(Ge-=Oe+Ne-yt+4),re=Je[Ge++],ie=Je[Ge++],Be=Je[Ge++],B[ot]=(X[re]+X[ie+256>>0]+X[Be+512>>0]>>16)-128,F[ot]=(X[re+768>>0]+X[ie+1024>>0]+X[Be+1280>>0]>>16)-128,O[ot]=(X[re+1280>>0]+X[ie+1536>>0]+X[Be+1792>>0]>>16)-128;Te=Y(B,f,Te,r,i),Ue=Y(F,p,Ue,e,o),pe=Y(O,p,pe,e,o),Oe+=32}Nt+=8}if(S>=0){var kt=[];kt[1]=S+1,kt[0]=(1<<S+1)-1,R(kt)}return U(65497),new Uint8Array(x)},n=n||50,function(){for(var J=String.fromCharCode,xe=0;xe<256;xe++)V[xe]=J(xe)}(),r=k(ee,ne),e=k(ce,G),i=k(Ae,fe),o=k(Z,z),function(){for(var J=1,xe=2,Te=1;Te<=15;Te++){for(var Ue=J;Ue<xe;Ue++)g[32767+Ue]=Te,_[32767+Ue]=[],_[32767+Ue][1]=Te,_[32767+Ue][0]=Ue;for(var pe=-(xe-1);pe<=-J;pe++)g[32767+pe]=Te,_[32767+pe]=[],_[32767+pe][1]=Te,_[32767+pe][0]=xe-1+pe;J<<=1,xe<<=1}}(),function(){for(var J=0;J<256;J++)X[J]=19595*J,X[J+256>>0]=38470*J,X[J+512>>0]=7471*J+32768,X[J+768>>0]=-11059*J,X[J+1024>>0]=-21709*J,X[J+1280>>0]=32768*J+8421375,X[J+1536>>0]=-27439*J,X[J+1792>>0]=-5329*J}(),de(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function gA(n,r){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function PM(n){function r(ee){if(!ee)throw Error("assert :P")}function e(ee,ne,Ae){for(var fe=0;4>fe;fe++)if(ee[ne+fe]!=Ae.charCodeAt(fe))return!0;return!1}function i(ee,ne,Ae,fe,ce){for(var G=0;G<ce;G++)ee[ne+G]=Ae[fe+G]}function o(ee,ne,Ae,fe){for(var ce=0;ce<fe;ce++)ee[ne+ce]=Ae}function a(ee){return new Int32Array(ee)}function l(ee,ne){for(var Ae=[],fe=0;fe<ee;fe++)Ae.push(new ne);return Ae}function t(ee,ne){var Ae=[];return function fe(ce,G,Z){for(var z=Z[G],k=0;k<z&&(ce.push(Z.length>G+1?[]:new ne),!(Z.length<G+1));k++)fe(ce[k],G+1,Z)}(Ae,0,ee),Ae}var h=function(){var ee=this;function ne(oe,be){for(var ke=1<<be-1>>>0;oe&ke;)ke>>>=1;return ke?(oe&ke-1)+ke:oe}function Ae(oe,be,ke,rt,gt){r(!(rt%ke));do oe[be+(rt-=ke)]=gt;while(0<rt)}function fe(oe,be,ke,rt,gt){if(r(2328>=gt),512>=gt)var xt=a(512);else if((xt=a(gt))==null)return 0;return function(Bt,Lt,Wt,ar,jr,un){var hn,en,jn=Lt,Dn=1<<Wt,Nr=a(16),qr=a(16);for(r(jr!=0),r(ar!=null),r(Bt!=null),r(0<Wt),en=0;en<jr;++en){if(15<ar[en])return 0;++Nr[ar[en]]}if(Nr[0]==jr)return 0;for(qr[1]=0,hn=1;15>hn;++hn){if(Nr[hn]>1<<hn)return 0;qr[hn+1]=qr[hn]+Nr[hn]}for(en=0;en<jr;++en)hn=ar[en],0<ar[en]&&(un[qr[hn]++]=en);if(qr[15]==1)return(ar=new ce).g=0,ar.value=un[0],Ae(Bt,jn,1,Dn,ar),Dn;var ri,ci=-1,ni=Dn-1,Ni=0,Fi=1,Ss=1,Pi=1<<Wt;for(en=0,hn=1,jr=2;hn<=Wt;++hn,jr<<=1){if(Fi+=Ss<<=1,0>(Ss-=Nr[hn]))return 0;for(;0<Nr[hn];--Nr[hn])(ar=new ce).g=hn,ar.value=un[en++],Ae(Bt,jn+Ni,jr,Pi,ar),Ni=ne(Ni,hn)}for(hn=Wt+1,jr=2;15>=hn;++hn,jr<<=1){if(Fi+=Ss<<=1,0>(Ss-=Nr[hn]))return 0;for(;0<Nr[hn];--Nr[hn]){if(ar=new ce,(Ni&ni)!=ci){for(jn+=Pi,ri=1<<(ci=hn)-Wt;15>ci&&!(0>=(ri-=Nr[ci]));)++ci,ri<<=1;Dn+=Pi=1<<(ri=ci-Wt),Bt[Lt+(ci=Ni&ni)].g=ri+Wt,Bt[Lt+ci].value=jn-Lt-ci}ar.g=hn-Wt,ar.value=un[en++],Ae(Bt,jn+(Ni>>Wt),jr,Pi,ar),Ni=ne(Ni,hn)}}return Fi!=2*qr[15]-1?0:Dn}(oe,be,ke,rt,gt,xt)}function ce(){this.value=this.g=0}function G(){this.value=this.g=0}function Z(){this.G=l(5,ce),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(al,G)}function z(oe,be,ke,rt){r(oe!=null),r(be!=null),r(2147483648>rt),oe.Ca=254,oe.I=0,oe.b=-8,oe.Ka=0,oe.oa=be,oe.pa=ke,oe.Jd=be,oe.Yc=ke+rt,oe.Zc=4<=rt?ke+rt-4+1:ke,Oe(oe)}function k(oe,be){for(var ke=0;0<be--;)ke|=ie(oe,128)<<be;return ke}function R(oe,be){var ke=k(oe,be);return re(oe)?-ke:ke}function N(oe,be,ke,rt){var gt,xt=0;for(r(oe!=null),r(be!=null),r(4294967288>rt),oe.Sb=rt,oe.Ra=0,oe.u=0,oe.h=0,4<rt&&(rt=4),gt=0;gt<rt;++gt)xt+=be[ke+gt]<<8*gt;oe.Ra=xt,oe.bb=rt,oe.oa=be,oe.pa=ke}function U(oe){for(;8<=oe.u&&oe.bb<oe.Sb;)oe.Ra>>>=8,oe.Ra+=oe.oa[oe.pa+oe.bb]<<jl-8>>>0,++oe.bb,oe.u-=8;Te(oe)&&(oe.h=1,oe.u=0)}function Y(oe,be){if(r(0<=be),!oe.h&&be<=Xa){var ke=xe(oe)&Us[be];return oe.u+=be,U(oe),ke}return oe.h=1,oe.u=0}function de(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function xe(oe){return oe.Ra>>>(oe.u&jl-1)>>>0}function Te(oe){return r(oe.bb<=oe.Sb),oe.h||oe.bb==oe.Sb&&oe.u>jl}function Ue(oe,be){oe.u=be,oe.h=Te(oe)}function pe(oe){oe.u>=Sa&&(r(oe.u>=Sa),U(oe))}function Oe(oe){r(oe!=null&&oe.oa!=null),oe.pa<oe.Zc?(oe.I=(oe.oa[oe.pa++]|oe.I<<8)>>>0,oe.b+=8):(r(oe!=null&&oe.oa!=null),oe.pa<oe.Yc?(oe.b+=8,oe.I=oe.oa[oe.pa++]|oe.I<<8):oe.Ka?oe.b=0:(oe.I<<=8,oe.b+=8,oe.Ka=1))}function re(oe){return k(oe,1)}function ie(oe,be){var ke=oe.Ca;0>oe.b&&Oe(oe);var rt=oe.b,gt=ke*be>>>8,xt=(oe.I>>>rt>gt)+0;for(xt?(ke-=gt,oe.I-=gt+1<<rt>>>0):ke=gt+1,rt=ke,gt=0;256<=rt;)gt+=8,rt>>=8;return rt=7^gt+Al[rt],oe.b-=rt,oe.Ca=(ke<<rt)-1,xt}function Be(oe,be,ke){oe[be+0]=ke>>24&255,oe[be+1]=ke>>16&255,oe[be+2]=ke>>8&255,oe[be+3]=ke>>0&255}function He(oe,be){return oe[be+0]<<0|oe[be+1]<<8}function Ge(oe,be){return He(oe,be)|oe[be+2]<<16}function Ne(oe,be){return He(oe,be)|He(oe,be+2)<<16}function st(oe,be){var ke=1<<be;return r(oe!=null),r(0<be),oe.X=a(ke),oe.X==null?0:(oe.Mb=32-be,oe.Xa=be,1)}function ot(oe,be){r(oe!=null),r(be!=null),r(oe.Xa==be.Xa),i(be.X,0,oe.X,0,1<<be.Xa)}function Je(){this.X=[],this.Xa=this.Mb=0}function Ze(oe,be,ke,rt){r(ke!=null),r(rt!=null);var gt=ke[0],xt=rt[0];return gt==0&&(gt=(oe*xt+be/2)/be),xt==0&&(xt=(be*gt+oe/2)/oe),0>=gt||0>=xt?0:(ke[0]=gt,rt[0]=xt,1)}function bt(oe,be){return oe+(1<<be)-1>>>be}function yt(oe,be){return((4278255360&oe)+(4278255360&be)>>>0&4278255360)+((16711935&oe)+(16711935&be)>>>0&16711935)>>>0}function Nt(oe,be){ee[be]=function(ke,rt,gt,xt,Bt,Lt,Wt){var ar;for(ar=0;ar<Bt;++ar){var jr=ee[oe](Lt[Wt+ar-1],gt,xt+ar);Lt[Wt+ar]=yt(ke[rt+ar],jr)}}}function kt(){this.ud=this.hd=this.jd=0}function Gt(oe,be){return((4278124286&(oe^be))>>>1)+(oe&be)>>>0}function fr(oe){return 0<=oe&&256>oe?oe:0>oe?0:255<oe?255:void 0}function Tr(oe,be){return fr(oe+(oe-be+.5>>1))}function yr(oe,be,ke){return Math.abs(be-ke)-Math.abs(oe-ke)}function Dr(oe,be,ke,rt,gt,xt,Bt){for(rt=xt[Bt-1],ke=0;ke<gt;++ke)xt[Bt+ke]=rt=yt(oe[be+ke],rt)}function jt(oe,be,ke,rt,gt){var xt;for(xt=0;xt<ke;++xt){var Bt=oe[be+xt],Lt=Bt>>8&255,Wt=16711935&(Wt=(Wt=16711935&Bt)+((Lt<<16)+Lt));rt[gt+xt]=(4278255360&Bt)+Wt>>>0}}function Jt(oe,be){be.jd=oe>>0&255,be.hd=oe>>8&255,be.ud=oe>>16&255}function pr(oe,be,ke,rt,gt,xt){var Bt;for(Bt=0;Bt<rt;++Bt){var Lt=be[ke+Bt],Wt=Lt>>>8,ar=Lt,jr=255&(jr=(jr=Lt>>>16)+((oe.jd<<24>>24)*(Wt<<24>>24)>>>5));ar=255&(ar=(ar=ar+((oe.hd<<24>>24)*(Wt<<24>>24)>>>5))+((oe.ud<<24>>24)*(jr<<24>>24)>>>5)),gt[xt+Bt]=(4278255360&Lt)+(jr<<16)+ar}}function Ft(oe,be,ke,rt,gt){ee[be]=function(xt,Bt,Lt,Wt,ar,jr,un,hn,en){for(Wt=un;Wt<hn;++Wt)for(un=0;un<en;++un)ar[jr++]=gt(Lt[rt(xt[Bt++])])},ee[oe]=function(xt,Bt,Lt,Wt,ar,jr,un){var hn=8>>xt.b,en=xt.Ea,jn=xt.K[0],Dn=xt.w;if(8>hn)for(xt=(1<<xt.b)-1,Dn=(1<<hn)-1;Bt<Lt;++Bt){var Nr,qr=0;for(Nr=0;Nr<en;++Nr)Nr&xt||(qr=rt(Wt[ar++])),jr[un++]=gt(jn[qr&Dn]),qr>>=hn}else ee["VP8LMapColor"+ke](Wt,ar,jn,Dn,jr,un,Bt,Lt,en)}}function er(oe,be,ke,rt,gt){for(ke=be+ke;be<ke;){var xt=oe[be++];rt[gt++]=xt>>16&255,rt[gt++]=xt>>8&255,rt[gt++]=xt>>0&255}}function ur(oe,be,ke,rt,gt){for(ke=be+ke;be<ke;){var xt=oe[be++];rt[gt++]=xt>>16&255,rt[gt++]=xt>>8&255,rt[gt++]=xt>>0&255,rt[gt++]=xt>>24&255}}function Yt(oe,be,ke,rt,gt){for(ke=be+ke;be<ke;){var xt=(Bt=oe[be++])>>16&240|Bt>>12&15,Bt=Bt>>0&240|Bt>>28&15;rt[gt++]=xt,rt[gt++]=Bt}}function mr(oe,be,ke,rt,gt){for(ke=be+ke;be<ke;){var xt=(Bt=oe[be++])>>16&248|Bt>>13&7,Bt=Bt>>5&224|Bt>>3&31;rt[gt++]=xt,rt[gt++]=Bt}}function Mr(oe,be,ke,rt,gt){for(ke=be+ke;be<ke;){var xt=oe[be++];rt[gt++]=xt>>0&255,rt[gt++]=xt>>8&255,rt[gt++]=xt>>16&255}}function sn(oe,be,ke,rt,gt,xt){if(xt==0)for(ke=be+ke;be<ke;)Be(rt,((xt=oe[be++])[0]>>24|xt[1]>>8&65280|xt[2]<<8&16711680|xt[3]<<24)>>>0),gt+=32;else i(rt,gt,oe,be,ke)}function Un(oe,be){ee[be][0]=ee[oe+"0"],ee[be][1]=ee[oe+"1"],ee[be][2]=ee[oe+"2"],ee[be][3]=ee[oe+"3"],ee[be][4]=ee[oe+"4"],ee[be][5]=ee[oe+"5"],ee[be][6]=ee[oe+"6"],ee[be][7]=ee[oe+"7"],ee[be][8]=ee[oe+"8"],ee[be][9]=ee[oe+"9"],ee[be][10]=ee[oe+"10"],ee[be][11]=ee[oe+"11"],ee[be][12]=ee[oe+"12"],ee[be][13]=ee[oe+"13"],ee[be][14]=ee[oe+"0"],ee[be][15]=ee[oe+"0"]}function wn(oe){return oe==Xf||oe==Zf||oe==Jf||oe==Pf}function Zi(){this.eb=[],this.size=this.A=this.fb=0}function ai(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _i(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zi,this.f.kb=new ai,this.sd=null}function Zn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Bn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function On(oe){return alert("todo:WebPSamplerProcessPlane"),oe.T}function tr(oe,be){var ke=oe.T,rt=be.ba.f.RGBA,gt=rt.eb,xt=rt.fb+oe.ka*rt.A,Bt=rc[be.ba.S],Lt=oe.y,Wt=oe.O,ar=oe.f,jr=oe.N,un=oe.ea,hn=oe.W,en=be.cc,jn=be.dc,Dn=be.Mc,Nr=be.Nc,qr=oe.ka,ri=oe.ka+oe.T,ci=oe.U,ni=ci+1>>1;for(qr==0?Bt(Lt,Wt,null,null,ar,jr,un,hn,ar,jr,un,hn,gt,xt,null,null,ci):(Bt(be.ec,be.fc,Lt,Wt,en,jn,Dn,Nr,ar,jr,un,hn,gt,xt-rt.A,gt,xt,ci),++ke);qr+2<ri;qr+=2)en=ar,jn=jr,Dn=un,Nr=hn,jr+=oe.Rc,hn+=oe.Rc,xt+=2*rt.A,Bt(Lt,(Wt+=2*oe.fa)-oe.fa,Lt,Wt,en,jn,Dn,Nr,ar,jr,un,hn,gt,xt-rt.A,gt,xt,ci);return Wt+=oe.fa,oe.j+ri<oe.o?(i(be.ec,be.fc,Lt,Wt,ci),i(be.cc,be.dc,ar,jr,ni),i(be.Mc,be.Nc,un,hn,ni),ke--):1&ri||Bt(Lt,Wt,null,null,ar,jr,un,hn,ar,jr,un,hn,gt,xt+rt.A,null,null,ci),ke}function zn(oe,be,ke){var rt=oe.F,gt=[oe.J];if(rt!=null){var xt=oe.U,Bt=be.ba.S,Lt=Bt==Td||Bt==Jf;be=be.ba.f.RGBA;var Wt=[0],ar=oe.ka;Wt[0]=oe.T,oe.Kb&&(ar==0?--Wt[0]:(--ar,gt[0]-=oe.width),oe.j+oe.ka+oe.T==oe.o&&(Wt[0]=oe.o-oe.j-ar));var jr=be.eb;ar=be.fb+ar*be.A,oe=Oa(rt,gt[0],oe.width,xt,Wt,jr,ar+(Lt?0:3),be.A),r(ke==Wt),oe&&wn(Bt)&&pc(jr,ar,Lt,xt,Wt,be.A)}return 0}function Ki(oe){var be=oe.ma,ke=be.ba.S,rt=11>ke,gt=ke==ph||ke==jh||ke==Td||ke==Eo||ke==12||wn(ke);if(be.memory=null,be.Ib=null,be.Jb=null,be.Nd=null,!aa(be.Oa,oe,gt?11:12))return 0;if(gt&&wn(ke)&&Gn(),oe.da)alert("todo:use_scaling");else{if(rt){if(be.Ib=On,oe.Kb){if(ke=oe.U+1>>1,be.memory=a(oe.U+2*ke),be.memory==null)return 0;be.ec=be.memory,be.fc=0,be.cc=be.ec,be.dc=be.fc+oe.U,be.Mc=be.cc,be.Nc=be.dc+ke,be.Ib=tr,Gn()}}else alert("todo:EmitYUV");gt&&(be.Jb=zn,rt&&Kr())}if(rt&&!nd){for(oe=0;256>oe;++oe)dp[oe]=89858*(oe-128)+Ou>>kf,pp[oe]=-22014*(oe-128)+Ou,$p[oe]=-45773*(oe-128),Cl[oe]=113618*(oe-128)+Ou>>kf;for(oe=au;oe<fp;++oe)be=76283*(oe-16)+Ou>>kf,Id[oe-au]=Sn(be,255),Ap[oe-au]=Sn(be+8>>4,15);nd=1}return 1}function Qs(oe){var be=oe.ma,ke=oe.U,rt=oe.T;return r(!(1&oe.ka)),0>=ke||0>=rt?0:(ke=be.Ib(oe,be),be.Jb!=null&&be.Jb(oe,be,ke),be.Dc+=ke,1)}function li(oe){oe.ma.memory=null}function Qt(oe,be,ke,rt){return Y(oe,8)!=47?0:(be[0]=Y(oe,14)+1,ke[0]=Y(oe,14)+1,rt[0]=Y(oe,1),Y(oe,3)!=0?0:!oe.h)}function Ve(oe,be){if(4>oe)return oe+1;var ke=oe-2>>1;return(2+(1&oe)<<ke)+Y(be,ke)+1}function et(oe,be){return 120<be?be-120:1<=(ke=((ke=cp[be-1])>>4)*oe+(8-(15&ke)))?ke:1;var ke}function We(oe,be,ke){var rt=xe(ke),gt=oe[be+=255&rt].g-8;return 0<gt&&(Ue(ke,ke.u+8),rt=xe(ke),be+=oe[be].value,be+=rt&(1<<gt)-1),Ue(ke,ke.u+oe[be].g),oe[be].value}function tt(oe,be,ke){return ke.g+=oe.g,ke.value+=oe.value<<be>>>0,r(8>=ke.g),oe.g}function nt(oe,be,ke){var rt=oe.xc;return r((be=rt==0?0:oe.vc[oe.md*(ke>>rt)+(be>>rt)])<oe.Wb),oe.Ya[be]}function Ct(oe,be,ke,rt){var gt=oe.ab,xt=oe.c*be,Bt=oe.C;be=Bt+be;var Lt=ke,Wt=rt;for(rt=oe.Ta,ke=oe.Ua;0<gt--;){var ar=oe.gc[gt],jr=Bt,un=be,hn=Lt,en=Wt,jn=(Wt=rt,Lt=ke,ar.Ea);switch(r(jr<un),r(un<=ar.nc),ar.hc){case 2:yu(hn,en,(un-jr)*jn,Wt,Lt);break;case 0:var Dn=jr,Nr=un,qr=Wt,ri=Lt,ci=(Pi=ar).Ea;Dn==0&&(Va(hn,en,null,null,1,qr,ri),Dr(hn,en+1,0,0,ci-1,qr,ri+1),en+=ci,ri+=ci,++Dn);for(var ni=1<<Pi.b,Ni=ni-1,Fi=bt(ci,Pi.b),Ss=Pi.K,Pi=Pi.w+(Dn>>Pi.b)*Fi;Dn<Nr;){var pa=Ss,la=Pi,Fo=1;for(Ca(hn,en,qr,ri-ci,1,qr,ri);Fo<ci;){var fi=(Fo&~Ni)+ni;fi>ci&&(fi=ci),(0,ml[pa[la++]>>8&15])(hn,en+ +Fo,qr,ri+Fo-ci,fi-Fo,qr,ri+Fo),Fo=fi}en+=ci,ri+=ci,++Dn&Ni||(Pi+=Fi)}un!=ar.nc&&i(Wt,Lt-jn,Wt,Lt+(un-jr-1)*jn,jn);break;case 1:for(jn=hn,Nr=en,ci=(hn=ar.Ea)-(ri=hn&~(qr=(en=1<<ar.b)-1)),Dn=bt(hn,ar.b),ni=ar.K,ar=ar.w+(jr>>ar.b)*Dn;jr<un;){for(Ni=ni,Fi=ar,Ss=new kt,Pi=Nr+ri,pa=Nr+hn;Nr<Pi;)Jt(Ni[Fi++],Ss),dc(Ss,jn,Nr,en,Wt,Lt),Nr+=en,Lt+=en;Nr<pa&&(Jt(Ni[Fi++],Ss),dc(Ss,jn,Nr,ci,Wt,Lt),Nr+=ci,Lt+=ci),++jr&qr||(ar+=Dn)}break;case 3:if(hn==Wt&&en==Lt&&0<ar.b){for(Nr=Wt,hn=jn=Lt+(un-jr)*jn-(ri=(un-jr)*bt(ar.Ea,ar.b)),en=Wt,qr=Lt,Dn=[],ri=(ci=ri)-1;0<=ri;--ri)Dn[ri]=en[qr+ri];for(ri=ci-1;0<=ri;--ri)Nr[hn+ri]=Dn[ri];ll(ar,jr,un,Wt,jn,Wt,Lt)}else ll(ar,jr,un,hn,en,Wt,Lt)}Lt=rt,Wt=ke}Wt!=ke&&i(rt,ke,Lt,Wt,xt)}function rr(oe,be){var ke=oe.V,rt=oe.Ba+oe.c*oe.C,gt=be-oe.C;if(r(be<=oe.l.o),r(16>=gt),0<gt){var xt=oe.l,Bt=oe.Ta,Lt=oe.Ua,Wt=xt.width;if(Ct(oe,gt,ke,rt),gt=Lt=[Lt],r((ke=oe.C)<(rt=be)),r(xt.v<xt.va),rt>xt.o&&(rt=xt.o),ke<xt.j){var ar=xt.j-ke;ke=xt.j,gt[0]+=ar*Wt}if(ke>=rt?ke=0:(gt[0]+=4*xt.v,xt.ka=ke-xt.j,xt.U=xt.va-xt.v,xt.T=rt-ke,ke=1),ke){if(Lt=Lt[0],11>(ke=oe.ca).S){var jr=ke.f.RGBA,un=(rt=ke.S,gt=xt.U,xt=xt.T,ar=jr.eb,jr.A),hn=xt;for(jr=jr.fb+oe.Ma*jr.A;0<hn--;){var en=Bt,jn=Lt,Dn=gt,Nr=ar,qr=jr;switch(rt){case Bd:Wl(en,jn,Dn,Nr,qr);break;case ph:ir(en,jn,Dn,Nr,qr);break;case Xf:ir(en,jn,Dn,Nr,qr),pc(Nr,qr,0,Dn,1,0);break;case _u:fn(en,jn,Dn,Nr,qr);break;case jh:sn(en,jn,Dn,Nr,qr,1);break;case Zf:sn(en,jn,Dn,Nr,qr,1),pc(Nr,qr,0,Dn,1,0);break;case Td:sn(en,jn,Dn,Nr,qr,0);break;case Jf:sn(en,jn,Dn,Nr,qr,0),pc(Nr,qr,1,Dn,1,0);break;case Eo:Lr(en,jn,Dn,Nr,qr);break;case Pf:Lr(en,jn,Dn,Nr,qr),tn(Nr,qr,Dn,1,0);break;case FA:rn(en,jn,Dn,Nr,qr);break;default:r(0)}Lt+=Wt,jr+=un}oe.Ma+=xt}else alert("todo:EmitRescaledRowsYUVA");r(oe.Ma<=ke.height)}}oe.C=be,r(oe.C<=oe.i)}function Et(oe){var be;if(0<oe.ua)return 0;for(be=0;be<oe.Wb;++be){var ke=oe.Ya[be].G,rt=oe.Ya[be].H;if(0<ke[1][rt[1]+0].g||0<ke[2][rt[2]+0].g||0<ke[3][rt[3]+0].g)return 0}return 1}function nr(oe,be,ke,rt,gt,xt){if(oe.Z!=0){var Bt=oe.qd,Lt=oe.rd;for(r(su[oe.Z]!=null);be<ke;++be)su[oe.Z](Bt,Lt,rt,gt,rt,gt,xt),Bt=rt,Lt=gt,gt+=xt;oe.qd=Bt,oe.rd=Lt}}function Fr(oe,be){var ke=oe.l.ma,rt=ke.Z==0||ke.Z==1?oe.l.j:oe.C;if(rt=oe.C<rt?rt:oe.C,r(be<=oe.l.o),be>rt){var gt=oe.l.width,xt=ke.ca,Bt=ke.tb+gt*rt,Lt=oe.V,Wt=oe.Ba+oe.c*rt,ar=oe.gc;r(oe.ab==1),r(ar[0].hc==3),Ga(ar[0],rt,be,Lt,Wt,xt,Bt),nr(ke,rt,be,xt,Bt,gt)}oe.C=oe.Ma=be}function _r(oe,be,ke,rt,gt,xt,Bt){var Lt=oe.$/rt,Wt=oe.$%rt,ar=oe.m,jr=oe.s,un=ke+oe.$,hn=un;gt=ke+rt*gt;var en=ke+rt*xt,jn=280+jr.ua,Dn=oe.Pb?Lt:16777216,Nr=0<jr.ua?jr.Wa:null,qr=jr.wc,ri=un<en?nt(jr,Wt,Lt):null;r(oe.C<xt),r(en<=gt);var ci=!1;e:for(;;){for(;ci||un<en;){var ni=0;if(Lt>=Dn){var Ni=un-ke;r((Dn=oe).Pb),Dn.wd=Dn.m,Dn.xd=Ni,0<Dn.s.ua&&ot(Dn.s.Wa,Dn.s.vb),Dn=Lt+Xh}if(Wt&qr||(ri=nt(jr,Wt,Lt)),r(ri!=null),ri.Qb&&(be[un]=ri.qb,ci=!0),!ci)if(pe(ar),ri.jc){ni=ar,Ni=be;var Fi=un,Ss=ri.pd[xe(ni)&al-1];r(ri.jc),256>Ss.g?(Ue(ni,ni.u+Ss.g),Ni[Fi]=Ss.value,ni=0):(Ue(ni,ni.u+Ss.g-256),r(256<=Ss.value),ni=Ss.value),ni==0&&(ci=!0)}else ni=We(ri.G[0],ri.H[0],ar);if(ar.h)break;if(ci||256>ni){if(!ci)if(ri.nd)be[un]=(ri.qb|ni<<8)>>>0;else{if(pe(ar),ci=We(ri.G[1],ri.H[1],ar),pe(ar),Ni=We(ri.G[2],ri.H[2],ar),Fi=We(ri.G[3],ri.H[3],ar),ar.h)break;be[un]=(Fi<<24|ci<<16|ni<<8|Ni)>>>0}if(ci=!1,++un,++Wt>=rt&&(Wt=0,++Lt,Bt!=null&&Lt<=xt&&!(Lt%16)&&Bt(oe,Lt),Nr!=null))for(;hn<un;)ni=be[hn++],Nr.X[(506832829*ni&4294967295)>>>Nr.Mb]=ni}else if(280>ni){if(ni=Ve(ni-256,ar),Ni=We(ri.G[4],ri.H[4],ar),pe(ar),Ni=et(rt,Ni=Ve(Ni,ar)),ar.h)break;if(un-ke<Ni||gt-un<ni)break e;for(Fi=0;Fi<ni;++Fi)be[un+Fi]=be[un+Fi-Ni];for(un+=ni,Wt+=ni;Wt>=rt;)Wt-=rt,++Lt,Bt!=null&&Lt<=xt&&!(Lt%16)&&Bt(oe,Lt);if(r(un<=gt),Wt&qr&&(ri=nt(jr,Wt,Lt)),Nr!=null)for(;hn<un;)ni=be[hn++],Nr.X[(506832829*ni&4294967295)>>>Nr.Mb]=ni}else{if(!(ni<jn))break e;for(ci=ni-280,r(Nr!=null);hn<un;)ni=be[hn++],Nr.X[(506832829*ni&4294967295)>>>Nr.Mb]=ni;ni=un,r(!(ci>>>(Ni=Nr).Xa)),be[ni]=Ni.X[ci],ci=!0}ci||r(ar.h==Te(ar))}if(oe.Pb&&ar.h&&un<gt)r(oe.m.h),oe.a=5,oe.m=oe.wd,oe.$=oe.xd,0<oe.s.ua&&ot(oe.s.vb,oe.s.Wa);else{if(ar.h)break e;Bt!=null&&Bt(oe,Lt>xt?xt:Lt),oe.a=0,oe.$=un-ke}return 1}return oe.a=3,0}function pn(oe){r(oe!=null),oe.vc=null,oe.yc=null,oe.Ya=null;var be=oe.Wa;be!=null&&(be.X=null),oe.vb=null,r(oe!=null)}function Tn(){var oe=new cn;return oe==null?null:(oe.a=0,oe.xb=td,Un("Predictor","VP8LPredictors"),Un("Predictor","VP8LPredictors_C"),Un("PredictorAdd","VP8LPredictorsAdd"),Un("PredictorAdd","VP8LPredictorsAdd_C"),yu=jt,dc=pr,Wl=er,ir=ur,Lr=Yt,rn=mr,fn=Mr,ee.VP8LMapColor32b=ec,ee.VP8LMapColor8b=bo,oe)}function Vn(oe,be,ke,rt,gt){var xt=1,Bt=[oe],Lt=[be],Wt=rt.m,ar=rt.s,jr=null,un=0;e:for(;;){if(ke)for(;xt&&Y(Wt,1);){var hn=Bt,en=Lt,jn=rt,Dn=1,Nr=jn.m,qr=jn.gc[jn.ab],ri=Y(Nr,2);if(jn.Oc&1<<ri)xt=0;else{switch(jn.Oc|=1<<ri,qr.hc=ri,qr.Ea=hn[0],qr.nc=en[0],qr.K=[null],++jn.ab,r(4>=jn.ab),ri){case 0:case 1:qr.b=Y(Nr,3)+2,Dn=Vn(bt(qr.Ea,qr.b),bt(qr.nc,qr.b),0,jn,qr.K),qr.K=qr.K[0];break;case 3:var ci,ni=Y(Nr,8)+1,Ni=16<ni?0:4<ni?1:2<ni?2:3;if(hn[0]=bt(qr.Ea,Ni),qr.b=Ni,ci=Dn=Vn(ni,1,0,jn,qr.K)){var Fi,Ss=ni,Pi=qr,pa=1<<(8>>Pi.b),la=a(pa);if(la==null)ci=0;else{var Fo=Pi.K[0],fi=Pi.w;for(la[0]=Pi.K[0][0],Fi=1;Fi<1*Ss;++Fi)la[Fi]=yt(Fo[fi+Fi],la[Fi-1]);for(;Fi<4*pa;++Fi)la[Fi]=0;Pi.K[0]=null,Pi.K[0]=la,ci=1}}Dn=ci;break;case 2:break;default:r(0)}xt=Dn}}if(Bt=Bt[0],Lt=Lt[0],xt&&Y(Wt,1)&&!(xt=1<=(un=Y(Wt,4))&&11>=un)){rt.a=3;break e}var Go;if(Go=xt)t:{var Jo,ho,ca,Qc=rt,Da=Bt,Wo=Lt,$o=un,zl=ke,hl=Qc.m,$a=Qc.s,ja=[null],Ra=1,$l=0,Ja=Gp[$o];r:for(;;){if(zl&&Y(hl,1)){var Ml=Y(hl,3)+2,Zu=bt(Da,Ml),Mc=bt(Wo,Ml),gh=Zu*Mc;if(!Vn(Zu,Mc,0,Qc,ja))break r;for(ja=ja[0],$a.xc=Ml,Jo=0;Jo<gh;++Jo){var Xn=ja[Jo]>>8&65535;ja[Jo]=Xn,Xn>=Ra&&(Ra=Xn+1)}}if(hl.h)break r;for(ho=0;5>ho;++ho){var fl=LA[ho];!ho&&0<$o&&(fl+=1<<$o),$l<fl&&($l=fl)}var Ju=l(Ra*Ja,ce),eh=Ra,Fc=l(eh,Z);if(Fc==null)var Mi=null;else r(65536>=eh),Mi=Fc;var th=a($l);if(Mi==null||th==null||Ju==null){Qc.a=1;break r}var Pd=Ju;for(Jo=ca=0;Jo<Ra;++Jo){var rh=Mi[Jo],nh=rh.G,yh=rh.H,yp=0,Of=1,Ld=0;for(ho=0;5>ho;++ho){fl=LA[ho],nh[ho]=Pd,yh[ho]=ca,!ho&&0<$o&&(fl+=1<<$o);i:{var kd,Hl=fl,rf=Qc,El=th,_h=Pd,Kp=ca,Df=0,Vc=rf.m,Od=Y(Vc,1);if(o(El,0,0,Hl),Od){var _p=Y(Vc,1)+1,Du=Y(Vc,1),Ao=Y(Vc,Du==0?1:8);El[Ao]=1,_p==2&&(El[Ao=Y(Vc,8)]=1);var vh=1}else{var Rf=a(19),nf=Y(Vc,4)+4;if(19<nf){rf.a=3;var id=0;break i}for(kd=0;kd<nf;++kd)Rf[kl[kd]]=Y(Vc,3);var sd=void 0,Bl=void 0,Ru=rf,eo=Rf,mn=Hl,Jn=El,Nu=0,Po=Ru.m,Ar=8,qp=l(128,ce);n:for(;fe(qp,0,7,eo,19);){if(Y(Po,1)){var Pc=2+2*Y(Po,3);if((sd=2+Y(Po,Pc))>mn)break n}else sd=mn;for(Bl=0;Bl<mn&&sd--;){pe(Po);var od=qp[0+(127&xe(Po))];Ue(Po,Po.u+od.g);var Gc=od.value;if(16>Gc)Jn[Bl++]=Gc,Gc!=0&&(Ar=Gc);else{var Dd=Gc==16,sf=Gc-16,of=lp[sf],To=Y(Po,PA[sf])+of;if(Bl+To>mn)break n;for(var ju=Dd?Ar:0;0<To--;)Jn[Bl++]=ju}}Nu=1;break n}Nu||(Ru.a=3),vh=Nu}(vh=vh&&!Vc.h)&&(Df=fe(_h,Kp,8,El,Hl)),vh&&Df!=0?id=Df:(rf.a=3,id=0)}if(id==0)break r;if(Of&&Ul[ho]==1&&(Of=Pd[ca].g==0),yp+=Pd[ca].g,ca+=id,3>=ho){var Hh,Nf=th[0];for(Hh=1;Hh<fl;++Hh)th[Hh]>Nf&&(Nf=th[Hh]);Ld+=Nf}}if(rh.nd=Of,rh.Qb=0,Of&&(rh.qb=(nh[3][yh[3]+0].value<<24|nh[1][yh[1]+0].value<<16|nh[2][yh[2]+0].value)>>>0,yp==0&&256>nh[0][yh[0]+0].value&&(rh.Qb=1,rh.qb+=nh[0][yh[0]+0].value<<8)),rh.jc=!rh.Qb&&6>Ld,rh.jc){var bh,vu=rh;for(bh=0;bh<al;++bh){var ih=bh,Uu=vu.pd[ih],xh=vu.G[0][vu.H[0]+ih];256<=xh.value?(Uu.g=xh.g+256,Uu.value=xh.value):(Uu.g=0,Uu.value=0,ih>>=tt(xh,8,Uu),ih>>=tt(vu.G[1][vu.H[1]+ih],16,Uu),ih>>=tt(vu.G[2][vu.H[2]+ih],0,Uu),tt(vu.G[3][vu.H[3]+ih],24,Uu))}}}$a.vc=ja,$a.Wb=Ra,$a.Ya=Mi,$a.yc=Ju,Go=1;break t}Go=0}if(!(xt=Go)){rt.a=3;break e}if(0<un){if(ar.ua=1<<un,!st(ar.Wa,un)){rt.a=1,xt=0;break e}}else ar.ua=0;var wh=rt,Sh=Bt,bm=Lt,el=wh.s,vp=el.xc;if(wh.c=Sh,wh.i=bm,el.md=bt(Sh,vp),el.wc=vp==0?-1:(1<<vp)-1,ke){rt.xb=kA;break e}if((jr=a(Bt*Lt))==null){rt.a=1,xt=0;break e}xt=(xt=_r(rt,jr,0,Bt,Lt,Lt,null))&&!Wt.h;break e}return xt?(gt!=null?gt[0]=jr:(r(jr==null),r(ke)),rt.$=0,ke||pn(ar)):pn(ar),xt}function Bi(oe,be){var ke=oe.c*oe.i,rt=ke+be+16*be;return r(oe.c<=be),oe.V=a(rt),oe.V==null?(oe.Ta=null,oe.Ua=0,oe.a=1,0):(oe.Ta=oe.V,oe.Ua=oe.Ba+ke+be,1)}function Si(oe,be){var ke=oe.C,rt=be-ke,gt=oe.V,xt=oe.Ba+oe.c*ke;for(r(be<=oe.l.o);0<rt;){var Bt=16<rt?16:rt,Lt=oe.l.ma,Wt=oe.l.width,ar=Wt*Bt,jr=Lt.ca,un=Lt.tb+Wt*ke,hn=oe.Ta,en=oe.Ua;Ct(oe,Bt,gt,xt),gl(hn,en,jr,un,ar),nr(Lt,ke,ke+Bt,jr,un,Wt),rt-=Bt,gt+=Bt*oe.c,ke+=Bt}r(ke==be),oe.C=oe.Ma=be}function Di(){this.ub=this.yd=this.td=this.Rb=0}function ds(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qi(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Zt(){this.Yb=function(){var oe=[];return function be(ke,rt,gt){for(var xt=gt[rt],Bt=0;Bt<xt&&(ke.push(gt.length>rt+1?[]:0),!(gt.length<rt+1));Bt++)be(ke[Bt],rt+1,gt)}(oe,0,[3,11]),oe}()}function $r(){this.jb=a(3),this.Wc=t([4,8],Zt),this.Xc=t([4,17],Zt)}function kn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function vn(){this.ld=this.La=this.dd=this.tc=0}function si(){this.Na=this.la=0}function qn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Yn(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Wi(){this.uc=this.M=this.Nb=0,this.wa=Array(new vn),this.Y=0,this.ya=Array(new Yn),this.aa=0,this.l=new zi}function us(){this.y=a(16),this.f=a(8),this.ea=a(8)}function xs(){this.cb=this.a=0,this.sc="",this.m=new de,this.Od=new Di,this.Kc=new ds,this.ed=new kn,this.Qa=new Qi,this.Ic=this.$c=this.Aa=0,this.D=new Wi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,de),this.ia=0,this.pb=l(4,qn),this.Pa=new $r,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new us),this.Hd=0,this.rb=Array(new si),this.sb=0,this.wa=Array(new vn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Yn),this.L=this.aa=0,this.gd=t([4,2],vn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function uo(){var oe=new xs;return oe!=null&&(oe.a=0,oe.sc="OK",oe.cb=0,oe.Xb=0,ku||(ku=Do)),oe}function Ji(oe,be,ke){return oe.a==0&&(oe.a=be,oe.sc=ke,oe.cb=0),0}function ks(oe,be,ke){return 3<=ke&&oe[be+0]==157&&oe[be+1]==1&&oe[be+2]==42}function Co(oe,be){if(oe==null)return 0;if(oe.a=0,oe.sc="OK",be==null)return Ji(oe,2,"null VP8Io passed to VP8GetHeaders()");var ke=be.data,rt=be.w,gt=be.ha;if(4>gt)return Ji(oe,7,"Truncated header.");var xt=ke[rt+0]|ke[rt+1]<<8|ke[rt+2]<<16,Bt=oe.Od;if(Bt.Rb=!(1&xt),Bt.td=xt>>1&7,Bt.yd=xt>>4&1,Bt.ub=xt>>5,3<Bt.td)return Ji(oe,3,"Incorrect keyframe parameters.");if(!Bt.yd)return Ji(oe,4,"Frame not displayable.");rt+=3,gt-=3;var Lt=oe.Kc;if(Bt.Rb){if(7>gt)return Ji(oe,7,"cannot parse picture header");if(!ks(ke,rt,gt))return Ji(oe,3,"Bad code word");Lt.c=16383&(ke[rt+4]<<8|ke[rt+3]),Lt.Td=ke[rt+4]>>6,Lt.i=16383&(ke[rt+6]<<8|ke[rt+5]),Lt.Ud=ke[rt+6]>>6,rt+=7,gt-=7,oe.za=Lt.c+15>>4,oe.Ub=Lt.i+15>>4,be.width=Lt.c,be.height=Lt.i,be.Da=0,be.j=0,be.v=0,be.va=be.width,be.o=be.height,be.da=0,be.ib=be.width,be.hb=be.height,be.U=be.width,be.T=be.height,o((xt=oe.Pa).jb,0,255,xt.jb.length),r((xt=oe.Qa)!=null),xt.Cb=0,xt.Bb=0,xt.Fb=1,o(xt.Zb,0,0,xt.Zb.length),o(xt.Lb,0,0,xt.Lb)}if(Bt.ub>gt)return Ji(oe,7,"bad partition length");z(xt=oe.m,ke,rt,Bt.ub),rt+=Bt.ub,gt-=Bt.ub,Bt.Rb&&(Lt.Ld=re(xt),Lt.Kd=re(xt)),Lt=oe.Qa;var Wt,ar=oe.Pa;if(r(xt!=null),r(Lt!=null),Lt.Cb=re(xt),Lt.Cb){if(Lt.Bb=re(xt),re(xt)){for(Lt.Fb=re(xt),Wt=0;4>Wt;++Wt)Lt.Zb[Wt]=re(xt)?R(xt,7):0;for(Wt=0;4>Wt;++Wt)Lt.Lb[Wt]=re(xt)?R(xt,6):0}if(Lt.Bb)for(Wt=0;3>Wt;++Wt)ar.jb[Wt]=re(xt)?k(xt,8):255}else Lt.Bb=0;if(xt.Ka)return Ji(oe,3,"cannot parse segment header");if((Lt=oe.ed).zd=re(xt),Lt.Tb=k(xt,6),Lt.wb=k(xt,3),Lt.Pc=re(xt),Lt.Pc&&re(xt)){for(ar=0;4>ar;++ar)re(xt)&&(Lt.vd[ar]=R(xt,6));for(ar=0;4>ar;++ar)re(xt)&&(Lt.od[ar]=R(xt,6))}if(oe.L=Lt.Tb==0?0:Lt.zd?1:2,xt.Ka)return Ji(oe,3,"cannot parse filter header");var jr=gt;if(gt=Wt=rt,rt=Wt+jr,Lt=jr,oe.Xb=(1<<k(oe.m,2))-1,jr<3*(ar=oe.Xb))ke=7;else{for(Wt+=3*ar,Lt-=3*ar,jr=0;jr<ar;++jr){var un=ke[gt+0]|ke[gt+1]<<8|ke[gt+2]<<16;un>Lt&&(un=Lt),z(oe.Jc[+jr],ke,Wt,un),Wt+=un,Lt-=un,gt+=3}z(oe.Jc[+ar],ke,Wt,Lt),ke=Wt<rt?0:5}if(ke!=0)return Ji(oe,ke,"cannot parse partitions");for(ke=k(Wt=oe.m,7),gt=re(Wt)?R(Wt,4):0,rt=re(Wt)?R(Wt,4):0,Lt=re(Wt)?R(Wt,4):0,ar=re(Wt)?R(Wt,4):0,Wt=re(Wt)?R(Wt,4):0,jr=oe.Qa,un=0;4>un;++un){if(jr.Cb){var hn=jr.Zb[un];jr.Fb||(hn+=ke)}else{if(0<un){oe.pb[un]=oe.pb[0];continue}hn=ke}var en=oe.pb[un];en.Sc[0]=Zh[Sn(hn+gt,127)],en.Sc[1]=Xu[Sn(hn+0,127)],en.Eb[0]=2*Zh[Sn(hn+rt,127)],en.Eb[1]=101581*Xu[Sn(hn+Lt,127)]>>16,8>en.Eb[1]&&(en.Eb[1]=8),en.Qc[0]=Zh[Sn(hn+ar,117)],en.Qc[1]=Xu[Sn(hn+Wt,127)],en.lc=hn+Wt}if(!Bt.Rb)return Ji(oe,4,"Not a key frame.");for(re(xt),Bt=oe.Pa,ke=0;4>ke;++ke){for(gt=0;8>gt;++gt)for(rt=0;3>rt;++rt)for(Lt=0;11>Lt;++Lt)ar=ie(xt,zh[ke][gt][rt][Lt])?k(xt,8):ed[ke][gt][rt][Lt],Bt.Wc[ke][gt].Yb[rt][Lt]=ar;for(gt=0;17>gt;++gt)Bt.Xc[ke][gt]=Bt.Wc[ke][up[gt]]}return oe.kc=re(xt),oe.kc&&(oe.Bd=k(xt,8)),oe.cb=1}function Do(oe,be,ke,rt,gt,xt,Bt){var Lt=be[gt].Yb[ke];for(ke=0;16>gt;++gt){if(!ie(oe,Lt[ke+0]))return gt;for(;!ie(oe,Lt[ke+1]);)if(Lt=be[++gt].Yb[0],ke=0,gt==16)return 16;var Wt=be[gt+1].Yb;if(ie(oe,Lt[ke+2])){var ar=oe,jr=0;if(ie(ar,(hn=Lt)[(un=ke)+3]))if(ie(ar,hn[un+6])){for(Lt=0,un=2*(jr=ie(ar,hn[un+8]))+(hn=ie(ar,hn[un+9+jr])),jr=0,hn=Jh[un];hn[Lt];++Lt)jr+=jr+ie(ar,hn[Lt]);jr+=3+(8<<un)}else ie(ar,hn[un+7])?(jr=7+2*ie(ar,165),jr+=ie(ar,145)):jr=5+ie(ar,159);else jr=ie(ar,hn[un+4])?3+ie(ar,hn[un+5]):2;Lt=Wt[2]}else jr=1,Lt=Wt[1];Wt=Bt+Lf[gt],0>(ar=oe).b&&Oe(ar);var un,hn=ar.b,en=(un=ar.Ca>>1)-(ar.I>>hn)>>31;--ar.b,ar.Ca+=en,ar.Ca|=1,ar.I-=(un+1&en)<<hn,xt[Wt]=((jr^en)-en)*rt[(0<gt)+0]}return 16}function ba(oe){var be=oe.rb[oe.sb-1];be.la=0,be.Na=0,o(oe.zc,0,0,oe.zc.length),oe.ja=0}function il(oe,be){if(oe==null)return 0;if(be==null)return Ji(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!Co(oe,be))return 0;if(r(oe.cb),be.ac==null||be.ac(be)){be.ob&&(oe.L=0);var ke=lu[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=be.v-ke>>4,oe.zb=be.j-ke>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=be.o+15+ke>>4,oe.Hb=be.va+15+ke>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var rt=oe.ed;for(ke=0;4>ke;++ke){var gt;if(oe.Qa.Cb){var xt=oe.Qa.Lb[ke];oe.Qa.Fb||(xt+=rt.Tb)}else xt=rt.Tb;for(gt=0;1>=gt;++gt){var Bt=oe.gd[ke][gt],Lt=xt;if(rt.Pc&&(Lt+=rt.vd[0],gt&&(Lt+=rt.od[0])),0<(Lt=0>Lt?0:63<Lt?63:Lt)){var Wt=Lt;0<rt.wb&&(Wt=4<rt.wb?Wt>>2:Wt>>1)>9-rt.wb&&(Wt=9-rt.wb),1>Wt&&(Wt=1),Bt.dd=Wt,Bt.tc=2*Lt+Wt,Bt.ld=40<=Lt?2:15<=Lt?1:0}else Bt.tc=0;Bt.La=gt}}}ke=0}else Ji(oe,6,"Frame setup failed"),ke=oe.a;if(ke=ke==0){if(ke){oe.$c=0,0<oe.Aa||(oe.Ic=Md);e:{ke=oe.Ic,rt=4*(Wt=oe.za);var ar=32*Wt,jr=Wt+1,un=0<oe.L?Wt*(0<oe.Aa?2:1):0,hn=(oe.Aa==2?2:1)*Wt;if((Bt=rt+832+(gt=3*(16*ke+lu[oe.L])/2*ar)+(xt=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=Bt)ke=0;else{if(Bt>oe.Vb){if(oe.Vb=0,oe.Ec=a(Bt),oe.Fc=0,oe.Ec==null){ke=Ji(oe,1,"no memory during frame initialization.");break e}oe.Vb=Bt}Bt=oe.Ec,Lt=oe.Fc,oe.Ac=Bt,oe.Bc=Lt,Lt+=rt,oe.Gd=l(ar,us),oe.Hd=0,oe.rb=l(jr+1,si),oe.sb=1,oe.wa=un?l(un,vn):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=Wt),r(!0),oe.oc=Bt,oe.pc=Lt,Lt+=832,oe.ya=l(hn,Yn),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=Wt),oe.R=16*Wt,oe.B=8*Wt,Wt=(ar=lu[oe.L])*oe.R,ar=ar/2*oe.B,oe.sa=Bt,oe.ta=Lt+Wt,oe.qa=oe.sa,oe.ra=oe.ta+16*ke*oe.R+ar,oe.Ha=oe.qa,oe.Ia=oe.ra+8*ke*oe.B+ar,oe.$c=0,Lt+=gt,oe.mb=xt?Bt:null,oe.nb=xt?Lt:null,r(Lt+xt<=oe.Fc+oe.Vb),ba(oe),o(oe.Ac,oe.Bc,0,rt),ke=1}}if(ke){if(be.ka=0,be.y=oe.sa,be.O=oe.ta,be.f=oe.qa,be.N=oe.ra,be.ea=oe.Ha,be.Vd=oe.Ia,be.fa=oe.R,be.Rc=oe.B,be.F=null,be.J=0,!Yh){for(ke=-255;255>=ke;++ke)ul[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)Tc[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)tc[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)Il[255+ke]=0>ke?0:255<ke?255:ke;Yh=1}Kt=Fa,Pr=Hs,Nn=zo,Qn=wl,ki=Ha,Cr=ro,es=ae,Oi=we,Zs=ct,ms=ft,Js=Le,xo=$e,Za=at,Ea=Er,Wa=go,Ll=fc,Vs=Pl,cl=Lu,iu[0]=bs,iu[1]=wa,iu[2]=qu,iu[3]=Jc,iu[4]=Dh,iu[5]=Fu,iu[6]=mu,iu[7]=Ec,iu[8]=Pu,iu[9]=fh,Ah[0]=na,Ah[1]=Jl,Ah[2]=pl,Ah[3]=sl,Ah[4]=La,Ah[5]=zc,Ah[6]=Cc,Ic[0]=eu,Ic[1]=Sl,Ic[2]=gu,Ic[3]=Ho,Ic[4]=Bc,Ic[5]=Rh,Ic[6]=Hc,ke=1}else ke=0}ke&&(ke=function(en,jn){for(en.M=0;en.M<en.Va;++en.M){var Dn,Nr=en.Jc[en.M&en.Xb],qr=en.m,ri=en;for(Dn=0;Dn<ri.za;++Dn){var ci=qr,ni=ri,Ni=ni.Ac,Fi=ni.Bc+4*Dn,Ss=ni.zc,Pi=ni.ya[ni.aa+Dn];if(ni.Qa.Bb?Pi.$b=ie(ci,ni.Pa.jb[0])?2+ie(ci,ni.Pa.jb[2]):ie(ci,ni.Pa.jb[1]):Pi.$b=0,ni.kc&&(Pi.Ad=ie(ci,ni.Bd)),Pi.Za=!ie(ci,145)+0,Pi.Za){var pa=Pi.Ob,la=0;for(ni=0;4>ni;++ni){var Fo,fi=Ss[0+ni];for(Fo=0;4>Fo;++Fo){fi=Uh[Ni[Fi+Fo]][fi];for(var Go=ef[ie(ci,fi[0])];0<Go;)Go=ef[2*Go+ie(ci,fi[Go])];fi=-Go,Ni[Fi+Fo]=fi}i(pa,la,Ni,Fi,4),la+=4,Ss[0+ni]=fi}}else fi=ie(ci,156)?ie(ci,128)?1:3:ie(ci,163)?2:0,Pi.Ob[0]=fi,o(Ni,Fi,fi,4),o(Ss,0,fi,4);Pi.Dd=ie(ci,142)?ie(ci,114)?ie(ci,183)?1:3:2:0}if(ri.m.Ka)return Ji(en,7,"Premature end-of-partition0 encountered.");for(;en.ja<en.za;++en.ja){if(ri=Nr,ci=(qr=en).rb[qr.sb-1],Ni=qr.rb[qr.sb+qr.ja],Dn=qr.ya[qr.aa+qr.ja],Fi=qr.kc?Dn.Ad:0)ci.la=Ni.la=0,Dn.Za||(ci.Na=Ni.Na=0),Dn.Hc=0,Dn.Gc=0,Dn.ia=0;else{var Jo,ho;if(ci=Ni,Ni=ri,Fi=qr.Pa.Xc,Ss=qr.ya[qr.aa+qr.ja],Pi=qr.pb[Ss.$b],ni=Ss.ad,pa=0,la=qr.rb[qr.sb-1],fi=Fo=0,o(ni,pa,0,384),Ss.Za)var ca=0,Qc=Fi[3];else{Go=a(16);var Da=ci.Na+la.Na;if(Da=ku(Ni,Fi[1],Da,Pi.Eb,0,Go,0),ci.Na=la.Na=(0<Da)+0,1<Da)Kt(Go,0,ni,pa);else{var Wo=Go[0]+3>>3;for(Go=0;256>Go;Go+=16)ni[pa+Go]=Wo}ca=1,Qc=Fi[0]}var $o=15&ci.la,zl=15&la.la;for(Go=0;4>Go;++Go){var hl=1&zl;for(Wo=ho=0;4>Wo;++Wo)$o=$o>>1|(hl=(Da=ku(Ni,Qc,Da=hl+(1&$o),Pi.Sc,ca,ni,pa))>ca)<<7,ho=ho<<2|(3<Da?3:1<Da?2:ni[pa+0]!=0),pa+=16;$o>>=4,zl=zl>>1|hl<<7,Fo=(Fo<<8|ho)>>>0}for(Qc=$o,ca=zl>>4,Jo=0;4>Jo;Jo+=2){for(ho=0,$o=ci.la>>4+Jo,zl=la.la>>4+Jo,Go=0;2>Go;++Go){for(hl=1&zl,Wo=0;2>Wo;++Wo)Da=hl+(1&$o),$o=$o>>1|(hl=0<(Da=ku(Ni,Fi[2],Da,Pi.Qc,0,ni,pa)))<<3,ho=ho<<2|(3<Da?3:1<Da?2:ni[pa+0]!=0),pa+=16;$o>>=2,zl=zl>>1|hl<<5}fi|=ho<<4*Jo,Qc|=$o<<4<<Jo,ca|=(240&zl)<<Jo}ci.la=Qc,la.la=ca,Ss.Hc=Fo,Ss.Gc=fi,Ss.ia=43690&fi?0:Pi.ia,Fi=!(Fo|fi)}if(0<qr.L&&(qr.wa[qr.Y+qr.ja]=qr.gd[Dn.$b][Dn.Za],qr.wa[qr.Y+qr.ja].La|=!Fi),ri.Ka)return Ji(en,7,"Premature end-of-file encountered.")}if(ba(en),qr=jn,ri=1,Dn=(Nr=en).D,ci=0<Nr.L&&Nr.M>=Nr.zb&&Nr.M<=Nr.Va,Nr.Aa==0)e:{if(Dn.M=Nr.M,Dn.uc=ci,sa(Nr,Dn),ri=1,Dn=(ho=Nr.D).Nb,ci=(fi=lu[Nr.L])*Nr.R,Ni=fi/2*Nr.B,Go=16*Dn*Nr.R,Wo=8*Dn*Nr.B,Fi=Nr.sa,Ss=Nr.ta-ci+Go,Pi=Nr.qa,ni=Nr.ra-Ni+Wo,pa=Nr.Ha,la=Nr.Ia-Ni+Wo,zl=($o=ho.M)==0,Fo=$o>=Nr.Va-1,Nr.Aa==2&&sa(Nr,ho),ho.uc)for(hl=(Da=Nr).D.M,r(Da.D.uc),ho=Da.yb;ho<Da.Hb;++ho){ca=ho,Qc=hl;var $a=(ja=(fl=Da).D).Nb;Jo=fl.R;var ja=ja.wa[ja.Y+ca],Ra=fl.sa,$l=fl.ta+16*$a*Jo+16*ca,Ja=ja.dd,Ml=ja.tc;if(Ml!=0)if(r(3<=Ml),fl.L==1)0<ca&&Ll(Ra,$l,Jo,Ml+4),ja.La&&cl(Ra,$l,Jo,Ml),0<Qc&&Wa(Ra,$l,Jo,Ml+4),ja.La&&Vs(Ra,$l,Jo,Ml);else{var Zu=fl.B,Mc=fl.qa,gh=fl.ra+8*$a*Zu+8*ca,Xn=fl.Ha,fl=fl.Ia+8*$a*Zu+8*ca;$a=ja.ld,0<ca&&(Oi(Ra,$l,Jo,Ml+4,Ja,$a),ms(Mc,gh,Xn,fl,Zu,Ml+4,Ja,$a)),ja.La&&(xo(Ra,$l,Jo,Ml,Ja,$a),Ea(Mc,gh,Xn,fl,Zu,Ml,Ja,$a)),0<Qc&&(es(Ra,$l,Jo,Ml+4,Ja,$a),Zs(Mc,gh,Xn,fl,Zu,Ml+4,Ja,$a)),ja.La&&(Js(Ra,$l,Jo,Ml,Ja,$a),Za(Mc,gh,Xn,fl,Zu,Ml,Ja,$a))}}if(Nr.ia&&alert("todo:DitherRow"),qr.put!=null){if(ho=16*$o,$o=16*($o+1),zl?(qr.y=Nr.sa,qr.O=Nr.ta+Go,qr.f=Nr.qa,qr.N=Nr.ra+Wo,qr.ea=Nr.Ha,qr.W=Nr.Ia+Wo):(ho-=fi,qr.y=Fi,qr.O=Ss,qr.f=Pi,qr.N=ni,qr.ea=pa,qr.W=la),Fo||($o-=fi),$o>qr.o&&($o=qr.o),qr.F=null,qr.J=null,Nr.Fa!=null&&0<Nr.Fa.length&&ho<$o&&(qr.J=ma(Nr,qr,ho,$o-ho),qr.F=Nr.mb,qr.F==null&&qr.F.length==0)){ri=Ji(Nr,3,"Could not decode alpha data.");break e}ho<qr.j&&(fi=qr.j-ho,ho=qr.j,r(!(1&fi)),qr.O+=Nr.R*fi,qr.N+=Nr.B*(fi>>1),qr.W+=Nr.B*(fi>>1),qr.F!=null&&(qr.J+=qr.width*fi)),ho<$o&&(qr.O+=qr.v,qr.N+=qr.v>>1,qr.W+=qr.v>>1,qr.F!=null&&(qr.J+=qr.v),qr.ka=ho-qr.j,qr.U=qr.va-qr.v,qr.T=$o-ho,ri=qr.put(qr))}Dn+1!=Nr.Ic||Fo||(i(Nr.sa,Nr.ta-ci,Fi,Ss+16*Nr.R,ci),i(Nr.qa,Nr.ra-Ni,Pi,ni+8*Nr.B,Ni),i(Nr.Ha,Nr.Ia-Ni,pa,la+8*Nr.B,Ni))}if(!ri)return Ji(en,6,"Output aborted.")}return 1}(oe,be)),be.bc!=null&&be.bc(be),ke&=1}return ke?(oe.cb=0,ke):0}function Ma(oe,be,ke,rt,gt){gt=oe[be+ke+32*rt]+(gt>>3),oe[be+ke+32*rt]=-256&gt?0>gt?0:255:gt}function Uo(oe,be,ke,rt,gt,xt){Ma(oe,be,0,ke,rt+gt),Ma(oe,be,1,ke,rt+xt),Ma(oe,be,2,ke,rt-xt),Ma(oe,be,3,ke,rt-gt)}function xa(oe){return(20091*oe>>16)+oe}function Gl(oe,be,ke,rt){var gt,xt=0,Bt=a(16);for(gt=0;4>gt;++gt){var Lt=oe[be+0]+oe[be+8],Wt=oe[be+0]-oe[be+8],ar=(35468*oe[be+4]>>16)-xa(oe[be+12]),jr=xa(oe[be+4])+(35468*oe[be+12]>>16);Bt[xt+0]=Lt+jr,Bt[xt+1]=Wt+ar,Bt[xt+2]=Wt-ar,Bt[xt+3]=Lt-jr,xt+=4,be++}for(gt=xt=0;4>gt;++gt)Lt=(oe=Bt[xt+0]+4)+Bt[xt+8],Wt=oe-Bt[xt+8],ar=(35468*Bt[xt+4]>>16)-xa(Bt[xt+12]),Ma(ke,rt,0,0,Lt+(jr=xa(Bt[xt+4])+(35468*Bt[xt+12]>>16))),Ma(ke,rt,1,0,Wt+ar),Ma(ke,rt,2,0,Wt-ar),Ma(ke,rt,3,0,Lt-jr),xt++,rt+=32}function ro(oe,be,ke,rt){var gt=oe[be+0]+4,xt=35468*oe[be+4]>>16,Bt=xa(oe[be+4]),Lt=35468*oe[be+1]>>16;Uo(ke,rt,0,gt+Bt,oe=xa(oe[be+1]),Lt),Uo(ke,rt,1,gt+xt,oe,Lt),Uo(ke,rt,2,gt-xt,oe,Lt),Uo(ke,rt,3,gt-Bt,oe,Lt)}function Hs(oe,be,ke,rt,gt){Gl(oe,be,ke,rt),gt&&Gl(oe,be+16,ke,rt+4)}function zo(oe,be,ke,rt){Pr(oe,be+0,ke,rt,1),Pr(oe,be+32,ke,rt+128,1)}function wl(oe,be,ke,rt){var gt;for(oe=oe[be+0]+4,gt=0;4>gt;++gt)for(be=0;4>be;++be)Ma(ke,rt,be,gt,oe)}function Ha(oe,be,ke,rt){oe[be+0]&&Qn(oe,be+0,ke,rt),oe[be+16]&&Qn(oe,be+16,ke,rt+4),oe[be+32]&&Qn(oe,be+32,ke,rt+128),oe[be+48]&&Qn(oe,be+48,ke,rt+128+4)}function Fa(oe,be,ke,rt){var gt,xt=a(16);for(gt=0;4>gt;++gt){var Bt=oe[be+0+gt]+oe[be+12+gt],Lt=oe[be+4+gt]+oe[be+8+gt],Wt=oe[be+4+gt]-oe[be+8+gt],ar=oe[be+0+gt]-oe[be+12+gt];xt[0+gt]=Bt+Lt,xt[8+gt]=Bt-Lt,xt[4+gt]=ar+Wt,xt[12+gt]=ar-Wt}for(gt=0;4>gt;++gt)Bt=(oe=xt[0+4*gt]+3)+xt[3+4*gt],Lt=xt[1+4*gt]+xt[2+4*gt],Wt=xt[1+4*gt]-xt[2+4*gt],ar=oe-xt[3+4*gt],ke[rt+0]=Bt+Lt>>3,ke[rt+16]=ar+Wt>>3,ke[rt+32]=Bt-Lt>>3,ke[rt+48]=ar-Wt>>3,rt+=64}function Pa(oe,be,ke){var rt,gt=be-32,xt=yl,Bt=255-oe[gt-1];for(rt=0;rt<ke;++rt){var Lt,Wt=xt,ar=Bt+oe[be-1];for(Lt=0;Lt<ke;++Lt)oe[be+Lt]=Wt[ar+oe[gt+Lt]];be+=32}}function wa(oe,be){Pa(oe,be,4)}function Sl(oe,be){Pa(oe,be,8)}function Jl(oe,be){Pa(oe,be,16)}function pl(oe,be){var ke;for(ke=0;16>ke;++ke)i(oe,be+32*ke,oe,be-32,16)}function sl(oe,be){var ke;for(ke=16;0<ke;--ke)o(oe,be,oe[be-1],16),be+=32}function hc(oe,be,ke){var rt;for(rt=0;16>rt;++rt)o(be,ke+32*rt,oe,16)}function na(oe,be){var ke,rt=16;for(ke=0;16>ke;++ke)rt+=oe[be-1+32*ke]+oe[be+ke-32];hc(rt>>5,oe,be)}function La(oe,be){var ke,rt=8;for(ke=0;16>ke;++ke)rt+=oe[be-1+32*ke];hc(rt>>4,oe,be)}function zc(oe,be){var ke,rt=8;for(ke=0;16>ke;++ke)rt+=oe[be+ke-32];hc(rt>>4,oe,be)}function Cc(oe,be){hc(128,oe,be)}function Os(oe,be,ke){return oe+2*be+ke+2>>2}function qu(oe,be){var ke,rt=be-32;for(rt=new Uint8Array([Os(oe[rt-1],oe[rt+0],oe[rt+1]),Os(oe[rt+0],oe[rt+1],oe[rt+2]),Os(oe[rt+1],oe[rt+2],oe[rt+3]),Os(oe[rt+2],oe[rt+3],oe[rt+4])]),ke=0;4>ke;++ke)i(oe,be+32*ke,rt,0,rt.length)}function Jc(oe,be){var ke=oe[be-1],rt=oe[be-1+32],gt=oe[be-1+64],xt=oe[be-1+96];Be(oe,be+0,16843009*Os(oe[be-1-32],ke,rt)),Be(oe,be+32,16843009*Os(ke,rt,gt)),Be(oe,be+64,16843009*Os(rt,gt,xt)),Be(oe,be+96,16843009*Os(gt,xt,xt))}function bs(oe,be){var ke,rt=4;for(ke=0;4>ke;++ke)rt+=oe[be+ke-32]+oe[be-1+32*ke];for(rt>>=3,ke=0;4>ke;++ke)o(oe,be+32*ke,rt,4)}function Dh(oe,be){var ke=oe[be-1+0],rt=oe[be-1+32],gt=oe[be-1+64],xt=oe[be-1-32],Bt=oe[be+0-32],Lt=oe[be+1-32],Wt=oe[be+2-32],ar=oe[be+3-32];oe[be+0+96]=Os(rt,gt,oe[be-1+96]),oe[be+1+96]=oe[be+0+64]=Os(ke,rt,gt),oe[be+2+96]=oe[be+1+64]=oe[be+0+32]=Os(xt,ke,rt),oe[be+3+96]=oe[be+2+64]=oe[be+1+32]=oe[be+0+0]=Os(Bt,xt,ke),oe[be+3+64]=oe[be+2+32]=oe[be+1+0]=Os(Lt,Bt,xt),oe[be+3+32]=oe[be+2+0]=Os(Wt,Lt,Bt),oe[be+3+0]=Os(ar,Wt,Lt)}function mu(oe,be){var ke=oe[be+1-32],rt=oe[be+2-32],gt=oe[be+3-32],xt=oe[be+4-32],Bt=oe[be+5-32],Lt=oe[be+6-32],Wt=oe[be+7-32];oe[be+0+0]=Os(oe[be+0-32],ke,rt),oe[be+1+0]=oe[be+0+32]=Os(ke,rt,gt),oe[be+2+0]=oe[be+1+32]=oe[be+0+64]=Os(rt,gt,xt),oe[be+3+0]=oe[be+2+32]=oe[be+1+64]=oe[be+0+96]=Os(gt,xt,Bt),oe[be+3+32]=oe[be+2+64]=oe[be+1+96]=Os(xt,Bt,Lt),oe[be+3+64]=oe[be+2+96]=Os(Bt,Lt,Wt),oe[be+3+96]=Os(Lt,Wt,Wt)}function Fu(oe,be){var ke=oe[be-1+0],rt=oe[be-1+32],gt=oe[be-1+64],xt=oe[be-1-32],Bt=oe[be+0-32],Lt=oe[be+1-32],Wt=oe[be+2-32],ar=oe[be+3-32];oe[be+0+0]=oe[be+1+64]=xt+Bt+1>>1,oe[be+1+0]=oe[be+2+64]=Bt+Lt+1>>1,oe[be+2+0]=oe[be+3+64]=Lt+Wt+1>>1,oe[be+3+0]=Wt+ar+1>>1,oe[be+0+96]=Os(gt,rt,ke),oe[be+0+64]=Os(rt,ke,xt),oe[be+0+32]=oe[be+1+96]=Os(ke,xt,Bt),oe[be+1+32]=oe[be+2+96]=Os(xt,Bt,Lt),oe[be+2+32]=oe[be+3+96]=Os(Bt,Lt,Wt),oe[be+3+32]=Os(Lt,Wt,ar)}function Ec(oe,be){var ke=oe[be+0-32],rt=oe[be+1-32],gt=oe[be+2-32],xt=oe[be+3-32],Bt=oe[be+4-32],Lt=oe[be+5-32],Wt=oe[be+6-32],ar=oe[be+7-32];oe[be+0+0]=ke+rt+1>>1,oe[be+1+0]=oe[be+0+64]=rt+gt+1>>1,oe[be+2+0]=oe[be+1+64]=gt+xt+1>>1,oe[be+3+0]=oe[be+2+64]=xt+Bt+1>>1,oe[be+0+32]=Os(ke,rt,gt),oe[be+1+32]=oe[be+0+96]=Os(rt,gt,xt),oe[be+2+32]=oe[be+1+96]=Os(gt,xt,Bt),oe[be+3+32]=oe[be+2+96]=Os(xt,Bt,Lt),oe[be+3+64]=Os(Bt,Lt,Wt),oe[be+3+96]=Os(Lt,Wt,ar)}function fh(oe,be){var ke=oe[be-1+0],rt=oe[be-1+32],gt=oe[be-1+64],xt=oe[be-1+96];oe[be+0+0]=ke+rt+1>>1,oe[be+2+0]=oe[be+0+32]=rt+gt+1>>1,oe[be+2+32]=oe[be+0+64]=gt+xt+1>>1,oe[be+1+0]=Os(ke,rt,gt),oe[be+3+0]=oe[be+1+32]=Os(rt,gt,xt),oe[be+3+32]=oe[be+1+64]=Os(gt,xt,xt),oe[be+3+64]=oe[be+2+64]=oe[be+0+96]=oe[be+1+96]=oe[be+2+96]=oe[be+3+96]=xt}function Pu(oe,be){var ke=oe[be-1+0],rt=oe[be-1+32],gt=oe[be-1+64],xt=oe[be-1+96],Bt=oe[be-1-32],Lt=oe[be+0-32],Wt=oe[be+1-32],ar=oe[be+2-32];oe[be+0+0]=oe[be+2+32]=ke+Bt+1>>1,oe[be+0+32]=oe[be+2+64]=rt+ke+1>>1,oe[be+0+64]=oe[be+2+96]=gt+rt+1>>1,oe[be+0+96]=xt+gt+1>>1,oe[be+3+0]=Os(Lt,Wt,ar),oe[be+2+0]=Os(Bt,Lt,Wt),oe[be+1+0]=oe[be+3+32]=Os(ke,Bt,Lt),oe[be+1+32]=oe[be+3+64]=Os(rt,ke,Bt),oe[be+1+64]=oe[be+3+96]=Os(gt,rt,ke),oe[be+1+96]=Os(xt,gt,rt)}function gu(oe,be){var ke;for(ke=0;8>ke;++ke)i(oe,be+32*ke,oe,be-32,8)}function Ho(oe,be){var ke;for(ke=0;8>ke;++ke)o(oe,be,oe[be-1],8),be+=32}function Ro(oe,be,ke){var rt;for(rt=0;8>rt;++rt)o(be,ke+32*rt,oe,8)}function eu(oe,be){var ke,rt=8;for(ke=0;8>ke;++ke)rt+=oe[be+ke-32]+oe[be-1+32*ke];Ro(rt>>4,oe,be)}function Rh(oe,be){var ke,rt=4;for(ke=0;8>ke;++ke)rt+=oe[be+ke-32];Ro(rt>>3,oe,be)}function Bc(oe,be){var ke,rt=4;for(ke=0;8>ke;++ke)rt+=oe[be-1+32*ke];Ro(rt>>3,oe,be)}function Hc(oe,be){Ro(128,oe,be)}function Yu(oe,be,ke){var rt=oe[be-ke],gt=oe[be+0],xt=3*(gt-rt)+nu[1020+oe[be-2*ke]-oe[be+ke]],Bt=Nh[112+(xt+4>>3)];oe[be-ke]=yl[255+rt+Nh[112+(xt+3>>3)]],oe[be+0]=yl[255+gt-Bt]}function dh(oe,be,ke,rt){var gt=oe[be+0],xt=oe[be+ke];return hs[255+oe[be-2*ke]-oe[be-ke]]>rt||hs[255+xt-gt]>rt}function Qa(oe,be,ke,rt){return 4*hs[255+oe[be-ke]-oe[be+0]]+hs[255+oe[be-2*ke]-oe[be+ke]]<=rt}function tu(oe,be,ke,rt,gt){var xt=oe[be-3*ke],Bt=oe[be-2*ke],Lt=oe[be-ke],Wt=oe[be+0],ar=oe[be+ke],jr=oe[be+2*ke],un=oe[be+3*ke];return 4*hs[255+Lt-Wt]+hs[255+Bt-ar]>rt?0:hs[255+oe[be-4*ke]-xt]<=gt&&hs[255+xt-Bt]<=gt&&hs[255+Bt-Lt]<=gt&&hs[255+un-jr]<=gt&&hs[255+jr-ar]<=gt&&hs[255+ar-Wt]<=gt}function go(oe,be,ke,rt){var gt=2*rt+1;for(rt=0;16>rt;++rt)Qa(oe,be+rt,ke,gt)&&Yu(oe,be+rt,ke)}function fc(oe,be,ke,rt){var gt=2*rt+1;for(rt=0;16>rt;++rt)Qa(oe,be+rt*ke,1,gt)&&Yu(oe,be+rt*ke,1)}function Pl(oe,be,ke,rt){var gt;for(gt=3;0<gt;--gt)go(oe,be+=4*ke,ke,rt)}function Lu(oe,be,ke,rt){var gt;for(gt=3;0<gt;--gt)fc(oe,be+=4,ke,rt)}function ol(oe,be,ke,rt,gt,xt,Bt,Lt){for(xt=2*xt+1;0<gt--;){if(tu(oe,be,ke,xt,Bt))if(dh(oe,be,ke,Lt))Yu(oe,be,ke);else{var Wt=oe,ar=be,jr=ke,un=Wt[ar-2*jr],hn=Wt[ar-jr],en=Wt[ar+0],jn=Wt[ar+jr],Dn=Wt[ar+2*jr],Nr=27*(ri=nu[1020+3*(en-hn)+nu[1020+un-jn]])+63>>7,qr=18*ri+63>>7,ri=9*ri+63>>7;Wt[ar-3*jr]=yl[255+Wt[ar-3*jr]+ri],Wt[ar-2*jr]=yl[255+un+qr],Wt[ar-jr]=yl[255+hn+Nr],Wt[ar+0]=yl[255+en-Nr],Wt[ar+jr]=yl[255+jn-qr],Wt[ar+2*jr]=yl[255+Dn-ri]}be+=rt}}function ka(oe,be,ke,rt,gt,xt,Bt,Lt){for(xt=2*xt+1;0<gt--;){if(tu(oe,be,ke,xt,Bt))if(dh(oe,be,ke,Lt))Yu(oe,be,ke);else{var Wt=oe,ar=be,jr=ke,un=Wt[ar-jr],hn=Wt[ar+0],en=Wt[ar+jr],jn=Nh[112+((Dn=3*(hn-un))+4>>3)],Dn=Nh[112+(Dn+3>>3)],Nr=jn+1>>1;Wt[ar-2*jr]=yl[255+Wt[ar-2*jr]+Nr],Wt[ar-jr]=yl[255+un+Dn],Wt[ar+0]=yl[255+hn-jn],Wt[ar+jr]=yl[255+en-Nr]}be+=rt}}function ae(oe,be,ke,rt,gt,xt){ol(oe,be,ke,1,16,rt,gt,xt)}function we(oe,be,ke,rt,gt,xt){ol(oe,be,1,ke,16,rt,gt,xt)}function Le(oe,be,ke,rt,gt,xt){var Bt;for(Bt=3;0<Bt;--Bt)ka(oe,be+=4*ke,ke,1,16,rt,gt,xt)}function $e(oe,be,ke,rt,gt,xt){var Bt;for(Bt=3;0<Bt;--Bt)ka(oe,be+=4,1,ke,16,rt,gt,xt)}function ct(oe,be,ke,rt,gt,xt,Bt,Lt){ol(oe,be,gt,1,8,xt,Bt,Lt),ol(ke,rt,gt,1,8,xt,Bt,Lt)}function ft(oe,be,ke,rt,gt,xt,Bt,Lt){ol(oe,be,1,gt,8,xt,Bt,Lt),ol(ke,rt,1,gt,8,xt,Bt,Lt)}function at(oe,be,ke,rt,gt,xt,Bt,Lt){ka(oe,be+4*gt,gt,1,8,xt,Bt,Lt),ka(ke,rt+4*gt,gt,1,8,xt,Bt,Lt)}function Er(oe,be,ke,rt,gt,xt,Bt,Lt){ka(oe,be+4,1,gt,8,xt,Bt,Lt),ka(ke,rt+4,1,gt,8,xt,Bt,Lt)}function hr(){this.ba=new _i,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Bn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Wr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hn(){this.ua=0,this.Wa=new Je,this.vb=new Je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new ce}function cn(){this.xb=this.a=0,this.l=new zi,this.ca=new _i,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hn,this.ab=0,this.gc=l(4,bn),this.Oc=0}function Hr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new zi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ei(oe,be,ke,rt,gt,xt,Bt){for(oe=oe==null?0:oe[be+0],be=0;be<Bt;++be)gt[xt+be]=oe+ke[rt+be]&255,oe=gt[xt+be]}function Ti(oe,be,ke,rt,gt,xt,Bt){var Lt;if(oe==null)ei(null,null,ke,rt,gt,xt,Bt);else for(Lt=0;Lt<Bt;++Lt)gt[xt+Lt]=oe[be+Lt]+ke[rt+Lt]&255}function vs(oe,be,ke,rt,gt,xt,Bt){if(oe==null)ei(null,null,ke,rt,gt,xt,Bt);else{var Lt,Wt=oe[be+0],ar=Wt,jr=Wt;for(Lt=0;Lt<Bt;++Lt)ar=jr+(Wt=oe[be+Lt])-ar,jr=ke[rt+Lt]+(-256&ar?0>ar?0:255:ar)&255,ar=Wt,gt[xt+Lt]=jr}}function ma(oe,be,ke,rt){var gt=be.width,xt=be.o;if(r(oe!=null&&be!=null),0>ke||0>=rt||ke+rt>xt)return null;if(!oe.Cc){if(oe.ga==null){var Bt;if(oe.ga=new Hr,(Bt=oe.ga==null)||(Bt=be.width*be.o,r(oe.Gb.length==0),oe.Gb=a(Bt),oe.Uc=0,oe.Gb==null?Bt=0:(oe.mb=oe.Gb,oe.nb=oe.Uc,oe.rc=null,Bt=1),Bt=!Bt),!Bt){Bt=oe.ga;var Lt=oe.Fa,Wt=oe.P,ar=oe.qc,jr=oe.mb,un=oe.nb,hn=Wt+1,en=ar-1,jn=Bt.l;if(r(Lt!=null&&jr!=null&&be!=null),su[0]=null,su[1]=ei,su[2]=Ti,su[3]=vs,Bt.ca=jr,Bt.tb=un,Bt.c=be.width,Bt.i=be.height,r(0<Bt.c&&0<Bt.i),1>=ar)be=0;else if(Bt.$a=Lt[Wt+0]>>0&3,Bt.Z=Lt[Wt+0]>>2&3,Bt.Lc=Lt[Wt+0]>>4&3,Wt=Lt[Wt+0]>>6&3,0>Bt.$a||1<Bt.$a||4<=Bt.Z||1<Bt.Lc||Wt)be=0;else if(jn.put=Qs,jn.ac=Ki,jn.bc=li,jn.ma=Bt,jn.width=be.width,jn.height=be.height,jn.Da=be.Da,jn.v=be.v,jn.va=be.va,jn.j=be.j,jn.o=be.o,Bt.$a)e:{r(Bt.$a==1),be=Tn();t:for(;;){if(be==null){be=0;break e}if(r(Bt!=null),Bt.mc=be,be.c=Bt.c,be.i=Bt.i,be.l=Bt.l,be.l.ma=Bt,be.l.width=Bt.c,be.l.height=Bt.i,be.a=0,N(be.m,Lt,hn,en),!Vn(Bt.c,Bt.i,1,be,null)||(be.ab==1&&be.gc[0].hc==3&&Et(be.s)?(Bt.ic=1,Lt=be.c*be.i,be.Ta=null,be.Ua=0,be.V=a(Lt),be.Ba=0,be.V==null?(be.a=1,be=0):be=1):(Bt.ic=0,be=Bi(be,Bt.c)),!be))break t;be=1;break e}Bt.mc=null,be=0}else be=en>=Bt.c*Bt.i;Bt=!be}if(Bt)return null;oe.ga.Lc!=1?oe.Ga=0:rt=xt-ke}r(oe.ga!=null),r(ke+rt<=xt);e:{if(be=(Lt=oe.ga).c,xt=Lt.l.o,Lt.$a==0){if(hn=oe.rc,en=oe.Vc,jn=oe.Fa,Wt=oe.P+1+ke*be,ar=oe.mb,jr=oe.nb+ke*be,r(Wt<=oe.P+oe.qc),Lt.Z!=0)for(r(su[Lt.Z]!=null),Bt=0;Bt<rt;++Bt)su[Lt.Z](hn,en,jn,Wt,ar,jr,be),hn=ar,en=jr,jr+=be,Wt+=be;else for(Bt=0;Bt<rt;++Bt)i(ar,jr,jn,Wt,be),hn=ar,en=jr,jr+=be,Wt+=be;oe.rc=hn,oe.Vc=en}else{if(r(Lt.mc!=null),be=ke+rt,r((Bt=Lt.mc)!=null),r(be<=Bt.i),Bt.C>=be)be=1;else if(Lt.ic||Kr(),Lt.ic){Lt=Bt.V,hn=Bt.Ba,en=Bt.c;var Dn=Bt.i,Nr=(jn=1,Wt=Bt.$/en,ar=Bt.$%en,jr=Bt.m,un=Bt.s,Bt.$),qr=en*Dn,ri=en*be,ci=un.wc,ni=Nr<ri?nt(un,ar,Wt):null;r(Nr<=qr),r(be<=Dn),r(Et(un));t:for(;;){for(;!jr.h&&Nr<ri;){if(ar&ci||(ni=nt(un,ar,Wt)),r(ni!=null),pe(jr),256>(Dn=We(ni.G[0],ni.H[0],jr)))Lt[hn+Nr]=Dn,++Nr,++ar>=en&&(ar=0,++Wt<=be&&!(Wt%16)&&Fr(Bt,Wt));else{if(!(280>Dn)){jn=0;break t}Dn=Ve(Dn-256,jr);var Ni,Fi=We(ni.G[4],ni.H[4],jr);if(pe(jr),!(Nr>=(Fi=et(en,Fi=Ve(Fi,jr)))&&qr-Nr>=Dn)){jn=0;break t}for(Ni=0;Ni<Dn;++Ni)Lt[hn+Nr+Ni]=Lt[hn+Nr+Ni-Fi];for(Nr+=Dn,ar+=Dn;ar>=en;)ar-=en,++Wt<=be&&!(Wt%16)&&Fr(Bt,Wt);Nr<ri&&ar&ci&&(ni=nt(un,ar,Wt))}r(jr.h==Te(jr))}Fr(Bt,Wt>be?be:Wt);break t}!jn||jr.h&&Nr<qr?(jn=0,Bt.a=jr.h?5:3):Bt.$=Nr,be=jn}else be=_r(Bt,Bt.V,Bt.Ba,Bt.c,Bt.i,be,Si);if(!be){rt=0;break e}}ke+rt>=xt&&(oe.Cc=1),rt=1}if(!rt)return null;if(oe.Cc&&((rt=oe.ga)!=null&&(rt.mc=null),oe.ga=null,0<oe.Ga))return alert("todo:WebPDequantizeLevels"),null}return oe.nb+ke*gt}function Fe(oe,be,ke,rt,gt,xt){for(;0<gt--;){var Bt,Lt=oe,Wt=be+(ke?1:0),ar=oe,jr=be+(ke?0:3);for(Bt=0;Bt<rt;++Bt){var un=ar[jr+4*Bt];un!=255&&(un*=32897,Lt[Wt+4*Bt+0]=Lt[Wt+4*Bt+0]*un>>23,Lt[Wt+4*Bt+1]=Lt[Wt+4*Bt+1]*un>>23,Lt[Wt+4*Bt+2]=Lt[Wt+4*Bt+2]*un>>23)}be+=xt}}function pt(oe,be,ke,rt,gt){for(;0<rt--;){var xt;for(xt=0;xt<ke;++xt){var Bt=oe[be+2*xt+0],Lt=15&(ar=oe[be+2*xt+1]),Wt=4369*Lt,ar=(240&ar|ar>>4)*Wt>>16;oe[be+2*xt+0]=(240&Bt|Bt>>4)*Wt>>16&240|(15&Bt|Bt<<4)*Wt>>16>>4&15,oe[be+2*xt+1]=240&ar|Lt}be+=gt}}function lr(oe,be,ke,rt,gt,xt,Bt,Lt){var Wt,ar,jr=255;for(ar=0;ar<gt;++ar){for(Wt=0;Wt<rt;++Wt){var un=oe[be+Wt];xt[Bt+4*Wt]=un,jr&=un}be+=ke,Bt+=Lt}return jr!=255}function gr(oe,be,ke,rt,gt){var xt;for(xt=0;xt<gt;++xt)ke[rt+xt]=oe[be+xt]>>8}function Kr(){pc=Fe,tn=pt,Oa=lr,gl=gr}function Zr(oe,be,ke){ee[oe]=function(rt,gt,xt,Bt,Lt,Wt,ar,jr,un,hn,en,jn,Dn,Nr,qr,ri,ci){var ni,Ni=ci-1>>1,Fi=Lt[Wt+0]|ar[jr+0]<<16,Ss=un[hn+0]|en[jn+0]<<16;r(rt!=null);var Pi=3*Fi+Ss+131074>>2;for(be(rt[gt+0],255&Pi,Pi>>16,Dn,Nr),xt!=null&&(Pi=3*Ss+Fi+131074>>2,be(xt[Bt+0],255&Pi,Pi>>16,qr,ri)),ni=1;ni<=Ni;++ni){var pa=Lt[Wt+ni]|ar[jr+ni]<<16,la=un[hn+ni]|en[jn+ni]<<16,Fo=Fi+pa+Ss+la+524296,fi=Fo+2*(pa+Ss)>>3;Pi=fi+Fi>>1,Fi=(Fo=Fo+2*(Fi+la)>>3)+pa>>1,be(rt[gt+2*ni-1],255&Pi,Pi>>16,Dn,Nr+(2*ni-1)*ke),be(rt[gt+2*ni-0],255&Fi,Fi>>16,Dn,Nr+(2*ni-0)*ke),xt!=null&&(Pi=Fo+Ss>>1,Fi=fi+la>>1,be(xt[Bt+2*ni-1],255&Pi,Pi>>16,qr,ri+(2*ni-1)*ke),be(xt[Bt+2*ni+0],255&Fi,Fi>>16,qr,ri+(2*ni+0)*ke)),Fi=pa,Ss=la}1&ci||(Pi=3*Fi+Ss+131074>>2,be(rt[gt+ci-1],255&Pi,Pi>>16,Dn,Nr+(ci-1)*ke),xt!=null&&(Pi=3*Ss+Fi+131074>>2,be(xt[Bt+ci-1],255&Pi,Pi>>16,qr,ri+(ci-1)*ke)))}}function Gn(){rc[Bd]=Ot,rc[ph]=tf,rc[_u]=mh,rc[jh]=ou,rc[Td]=Bo,rc[Eo]=hp,rc[FA]=Wp,rc[Xf]=tf,rc[Zf]=ou,rc[Jf]=Bo,rc[Pf]=hp}function Hi(oe){return oe&-16384?0>oe?0:255:oe>>rd}function ps(oe,be){return Hi((19077*oe>>8)+(26149*be>>8)-14234)}function ws(oe,be,ke){return Hi((19077*oe>>8)-(6419*be>>8)-(13320*ke>>8)+8708)}function Ns(oe,be){return Hi((19077*oe>>8)+(33050*be>>8)-17685)}function Ws(oe,be,ke,rt,gt){rt[gt+0]=ps(oe,ke),rt[gt+1]=ws(oe,be,ke),rt[gt+2]=Ns(oe,be)}function vo(oe,be,ke,rt,gt){rt[gt+0]=Ns(oe,be),rt[gt+1]=ws(oe,be,ke),rt[gt+2]=ps(oe,ke)}function qs(oe,be,ke,rt,gt){var xt=ws(oe,be,ke);be=xt<<3&224|Ns(oe,be)>>3,rt[gt+0]=248&ps(oe,ke)|xt>>5,rt[gt+1]=be}function as(oe,be,ke,rt,gt){var xt=240&Ns(oe,be)|15;rt[gt+0]=240&ps(oe,ke)|ws(oe,be,ke)>>4,rt[gt+1]=xt}function Qo(oe,be,ke,rt,gt){rt[gt+0]=255,Ws(oe,be,ke,rt,gt+1)}function Vo(oe,be,ke,rt,gt){vo(oe,be,ke,rt,gt),rt[gt+3]=255}function Li(oe,be,ke,rt,gt){Ws(oe,be,ke,rt,gt),rt[gt+3]=255}function Sn(oe,be){return 0>oe?0:oe>be?be:oe}function ia(oe,be,ke){ee[oe]=function(rt,gt,xt,Bt,Lt,Wt,ar,jr,un){for(var hn=jr+(-2&un)*ke;jr!=hn;)be(rt[gt+0],xt[Bt+0],Lt[Wt+0],ar,jr),be(rt[gt+1],xt[Bt+0],Lt[Wt+0],ar,jr+ke),gt+=2,++Bt,++Wt,jr+=2*ke;1&un&&be(rt[gt+0],xt[Bt+0],Lt[Wt+0],ar,jr)}}function Ii(oe,be,ke){return ke==0?oe==0?be==0?6:5:be==0?4:0:ke}function As(oe,be,ke,rt,gt){switch(oe>>>30){case 3:Pr(be,ke,rt,gt,0);break;case 2:Cr(be,ke,rt,gt);break;case 1:Qn(be,ke,rt,gt)}}function sa(oe,be){var ke,rt,gt=be.M,xt=be.Nb,Bt=oe.oc,Lt=oe.pc+40,Wt=oe.oc,ar=oe.pc+584,jr=oe.oc,un=oe.pc+600;for(ke=0;16>ke;++ke)Bt[Lt+32*ke-1]=129;for(ke=0;8>ke;++ke)Wt[ar+32*ke-1]=129,jr[un+32*ke-1]=129;for(0<gt?Bt[Lt-1-32]=Wt[ar-1-32]=jr[un-1-32]=129:(o(Bt,Lt-32-1,127,21),o(Wt,ar-32-1,127,9),o(jr,un-32-1,127,9)),rt=0;rt<oe.za;++rt){var hn=be.ya[be.aa+rt];if(0<rt){for(ke=-1;16>ke;++ke)i(Bt,Lt+32*ke-4,Bt,Lt+32*ke+12,4);for(ke=-1;8>ke;++ke)i(Wt,ar+32*ke-4,Wt,ar+32*ke+4,4),i(jr,un+32*ke-4,jr,un+32*ke+4,4)}var en=oe.Gd,jn=oe.Hd+rt,Dn=hn.ad,Nr=hn.Hc;if(0<gt&&(i(Bt,Lt-32,en[jn].y,0,16),i(Wt,ar-32,en[jn].f,0,8),i(jr,un-32,en[jn].ea,0,8)),hn.Za){var qr=Bt,ri=Lt-32+16;for(0<gt&&(rt>=oe.za-1?o(qr,ri,en[jn].y[15],4):i(qr,ri,en[jn+1].y,0,4)),ke=0;4>ke;ke++)qr[ri+128+ke]=qr[ri+256+ke]=qr[ri+384+ke]=qr[ri+0+ke];for(ke=0;16>ke;++ke,Nr<<=2)qr=Bt,ri=Lt+mp[ke],iu[hn.Ob[ke]](qr,ri),As(Nr,Dn,16*+ke,qr,ri)}else if(qr=Ii(rt,gt,hn.Ob[0]),Ah[qr](Bt,Lt),Nr!=0)for(ke=0;16>ke;++ke,Nr<<=2)As(Nr,Dn,16*+ke,Bt,Lt+mp[ke]);for(ke=hn.Gc,qr=Ii(rt,gt,hn.Dd),Ic[qr](Wt,ar),Ic[qr](jr,un),Nr=Dn,qr=Wt,ri=ar,255&(hn=ke>>0)&&(170&hn?Nn(Nr,256,qr,ri):ki(Nr,256,qr,ri)),hn=jr,Nr=un,255&(ke>>=8)&&(170&ke?Nn(Dn,320,hn,Nr):ki(Dn,320,hn,Nr)),gt<oe.Ub-1&&(i(en[jn].y,0,Bt,Lt+480,16),i(en[jn].f,0,Wt,ar+224,8),i(en[jn].ea,0,jr,un+224,8)),ke=8*xt*oe.B,en=oe.sa,jn=oe.ta+16*rt+16*xt*oe.R,Dn=oe.qa,hn=oe.ra+8*rt+ke,Nr=oe.Ha,qr=oe.Ia+8*rt+ke,ke=0;16>ke;++ke)i(en,jn+ke*oe.R,Bt,Lt+32*ke,16);for(ke=0;8>ke;++ke)i(Dn,hn+ke*oe.B,Wt,ar+32*ke,8),i(Nr,qr+ke*oe.B,jr,un+32*ke,8)}}function Ai(oe,be,ke,rt,gt,xt,Bt,Lt,Wt){var ar=[0],jr=[0],un=0,hn=Wt!=null?Wt.kd:0,en=Wt??new Wr;if(oe==null||12>ke)return 7;en.data=oe,en.w=be,en.ha=ke,be=[be],ke=[ke],en.gb=[en.gb];e:{var jn=be,Dn=ke,Nr=en.gb;if(r(oe!=null),r(Dn!=null),r(Nr!=null),Nr[0]=0,12<=Dn[0]&&!e(oe,jn[0],"RIFF")){if(e(oe,jn[0]+8,"WEBP")){Nr=3;break e}var qr=Ne(oe,jn[0]+4);if(12>qr||4294967286<qr){Nr=3;break e}if(hn&&qr>Dn[0]-8){Nr=7;break e}Nr[0]=qr,jn[0]+=12,Dn[0]-=12}Nr=0}if(Nr!=0)return Nr;for(qr=0<en.gb[0],ke=ke[0];;){e:{var ri=oe;Dn=be,Nr=ke;var ci=ar,ni=jr,Ni=jn=[0];if((Pi=un=[un])[0]=0,8>Nr[0])Nr=7;else{if(!e(ri,Dn[0],"VP8X")){if(Ne(ri,Dn[0]+4)!=10){Nr=3;break e}if(18>Nr[0]){Nr=7;break e}var Fi=Ne(ri,Dn[0]+8),Ss=1+Ge(ri,Dn[0]+12);if(2147483648<=Ss*(ri=1+Ge(ri,Dn[0]+15))){Nr=3;break e}Ni!=null&&(Ni[0]=Fi),ci!=null&&(ci[0]=Ss),ni!=null&&(ni[0]=ri),Dn[0]+=18,Nr[0]-=18,Pi[0]=1}Nr=0}}if(un=un[0],jn=jn[0],Nr!=0)return Nr;if(Dn=!!(2&jn),!qr&&un)return 3;if(xt!=null&&(xt[0]=!!(16&jn)),Bt!=null&&(Bt[0]=Dn),Lt!=null&&(Lt[0]=0),Bt=ar[0],jn=jr[0],un&&Dn&&Wt==null){Nr=0;break}if(4>ke){Nr=7;break}if(qr&&un||!qr&&!un&&!e(oe,be[0],"ALPH")){ke=[ke],en.na=[en.na],en.P=[en.P],en.Sa=[en.Sa];e:{Fi=oe,Nr=be,qr=ke;var Pi=en.gb;ci=en.na,ni=en.P,Ni=en.Sa,Ss=22,r(Fi!=null),r(qr!=null),ri=Nr[0];var pa=qr[0];for(r(ci!=null),r(Ni!=null),ci[0]=null,ni[0]=null,Ni[0]=0;;){if(Nr[0]=ri,qr[0]=pa,8>pa){Nr=7;break e}var la=Ne(Fi,ri+4);if(4294967286<la){Nr=3;break e}var Fo=8+la+1&-2;if(Ss+=Fo,0<Pi&&Ss>Pi){Nr=3;break e}if(!e(Fi,ri,"VP8 ")||!e(Fi,ri,"VP8L")){Nr=0;break e}if(pa[0]<Fo){Nr=7;break e}e(Fi,ri,"ALPH")||(ci[0]=Fi,ni[0]=ri+8,Ni[0]=la),ri+=Fo,pa-=Fo}}if(ke=ke[0],en.na=en.na[0],en.P=en.P[0],en.Sa=en.Sa[0],Nr!=0)break}ke=[ke],en.Ja=[en.Ja],en.xa=[en.xa];e:if(Pi=oe,Nr=be,qr=ke,ci=en.gb[0],ni=en.Ja,Ni=en.xa,Fi=Nr[0],ri=!e(Pi,Fi,"VP8 "),Ss=!e(Pi,Fi,"VP8L"),r(Pi!=null),r(qr!=null),r(ni!=null),r(Ni!=null),8>qr[0])Nr=7;else{if(ri||Ss){if(Pi=Ne(Pi,Fi+4),12<=ci&&Pi>ci-12){Nr=3;break e}if(hn&&Pi>qr[0]-8){Nr=7;break e}ni[0]=Pi,Nr[0]+=8,qr[0]-=8,Ni[0]=Ss}else Ni[0]=5<=qr[0]&&Pi[Fi+0]==47&&!(Pi[Fi+4]>>5),ni[0]=qr[0];Nr=0}if(ke=ke[0],en.Ja=en.Ja[0],en.xa=en.xa[0],be=be[0],Nr!=0)break;if(4294967286<en.Ja)return 3;if(Lt==null||Dn||(Lt[0]=en.xa?2:1),Bt=[Bt],jn=[jn],en.xa){if(5>ke){Nr=7;break}Lt=Bt,hn=jn,Dn=xt,oe==null||5>ke?oe=0:5<=ke&&oe[be+0]==47&&!(oe[be+4]>>5)?(qr=[0],Pi=[0],ci=[0],N(ni=new J,oe,be,ke),Qt(ni,qr,Pi,ci)?(Lt!=null&&(Lt[0]=qr[0]),hn!=null&&(hn[0]=Pi[0]),Dn!=null&&(Dn[0]=ci[0]),oe=1):oe=0):oe=0}else{if(10>ke){Nr=7;break}Lt=jn,oe==null||10>ke||!ks(oe,be+3,ke-3)?oe=0:(hn=oe[be+0]|oe[be+1]<<8|oe[be+2]<<16,Dn=16383&(oe[be+7]<<8|oe[be+6]),oe=16383&(oe[be+9]<<8|oe[be+8]),1&hn||3<(hn>>1&7)||!(hn>>4&1)||hn>>5>=en.Ja||!Dn||!oe?oe=0:(Bt&&(Bt[0]=Dn),Lt&&(Lt[0]=oe),oe=1))}if(!oe||(Bt=Bt[0],jn=jn[0],un&&(ar[0]!=Bt||jr[0]!=jn)))return 3;Wt!=null&&(Wt[0]=en,Wt.offset=be-Wt.w,r(4294967286>be-Wt.w),r(Wt.offset==Wt.ha-ke));break}return Nr==0||Nr==7&&un&&Wt==null?(xt!=null&&(xt[0]|=en.na!=null&&0<en.na.length),rt!=null&&(rt[0]=Bt),gt!=null&&(gt[0]=jn),0):Nr}function aa(oe,be,ke){var rt=be.width,gt=be.height,xt=0,Bt=0,Lt=rt,Wt=gt;if(be.Da=oe!=null&&0<oe.Da,be.Da&&(Lt=oe.cd,Wt=oe.bd,xt=oe.v,Bt=oe.j,11>ke||(xt&=-2,Bt&=-2),0>xt||0>Bt||0>=Lt||0>=Wt||xt+Lt>rt||Bt+Wt>gt))return 0;if(be.v=xt,be.j=Bt,be.va=xt+Lt,be.o=Bt+Wt,be.U=Lt,be.T=Wt,be.da=oe!=null&&0<oe.da,be.da){if(!Ze(Lt,Wt,ke=[oe.ib],xt=[oe.hb]))return 0;be.ib=ke[0],be.hb=xt[0]}return be.ob=oe!=null&&oe.ob,be.Kb=oe==null||!oe.Sd,be.da&&(be.ob=be.ib<3*rt/4&&be.hb<3*gt/4,be.Kb=0),1}function ru(oe){if(oe==null)return 2;if(11>oe.S){var be=oe.f.RGBA;be.fb+=(oe.height-1)*be.A,be.A=-be.A}else be=oe.f.kb,oe=oe.height,be.O+=(oe-1)*be.fa,be.fa=-be.fa,be.N+=(oe-1>>1)*be.Ab,be.Ab=-be.Ab,be.W+=(oe-1>>1)*be.Db,be.Db=-be.Db,be.F!=null&&(be.J+=(oe-1)*be.lb,be.lb=-be.lb);return 0}function Tl(oe,be,ke,rt){if(rt==null||0>=oe||0>=be)return 2;if(ke!=null){if(ke.Da){var gt=ke.cd,xt=ke.bd,Bt=-2&ke.v,Lt=-2&ke.j;if(0>Bt||0>Lt||0>=gt||0>=xt||Bt+gt>oe||Lt+xt>be)return 2;oe=gt,be=xt}if(ke.da){if(!Ze(oe,be,gt=[ke.ib],xt=[ke.hb]))return 2;oe=gt[0],be=xt[0]}}rt.width=oe,rt.height=be;e:{var Wt=rt.width,ar=rt.height;if(oe=rt.S,0>=Wt||0>=ar||!(oe>=Bd&&13>oe))oe=2;else{if(0>=rt.Rd&&rt.sd==null){Bt=xt=gt=be=0;var jr=(Lt=Wt*Fd[oe])*ar;if(11>oe||(xt=(ar+1)/2*(be=(Wt+1)/2),oe==12&&(Bt=(gt=Wt)*ar)),(ar=a(jr+2*xt+Bt))==null){oe=1;break e}rt.sd=ar,11>oe?((Wt=rt.f.RGBA).eb=ar,Wt.fb=0,Wt.A=Lt,Wt.size=jr):((Wt=rt.f.kb).y=ar,Wt.O=0,Wt.fa=Lt,Wt.Fd=jr,Wt.f=ar,Wt.N=0+jr,Wt.Ab=be,Wt.Cd=xt,Wt.ea=ar,Wt.W=0+jr+xt,Wt.Db=be,Wt.Ed=xt,oe==12&&(Wt.F=ar,Wt.J=0+jr+2*xt),Wt.Tc=Bt,Wt.lb=gt)}if(be=1,gt=rt.S,xt=rt.width,Bt=rt.height,gt>=Bd&&13>gt)if(11>gt)oe=rt.f.RGBA,be&=(Lt=Math.abs(oe.A))*(Bt-1)+xt<=oe.size,be&=Lt>=xt*Fd[gt],be&=oe.eb!=null;else{oe=rt.f.kb,Lt=(xt+1)/2,jr=(Bt+1)/2,Wt=Math.abs(oe.fa),ar=Math.abs(oe.Ab);var un=Math.abs(oe.Db),hn=Math.abs(oe.lb),en=hn*(Bt-1)+xt;be&=Wt*(Bt-1)+xt<=oe.Fd,be&=ar*(jr-1)+Lt<=oe.Cd,be=(be&=un*(jr-1)+Lt<=oe.Ed)&Wt>=xt&ar>=Lt&un>=Lt,be&=oe.y!=null,be&=oe.f!=null,be&=oe.ea!=null,gt==12&&(be&=hn>=xt,be&=en<=oe.Tc,be&=oe.F!=null)}else be=0;oe=be?0:2}}return oe!=0||ke!=null&&ke.fd&&(oe=ru(rt)),oe}var al=64,Us=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xa=24,jl=32,Sa=8,Al=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Nt("Predictor0","PredictorAdd0"),ee.Predictor0=function(){return 4278190080},ee.Predictor1=function(oe){return oe},ee.Predictor2=function(oe,be,ke){return be[ke+0]},ee.Predictor3=function(oe,be,ke){return be[ke+1]},ee.Predictor4=function(oe,be,ke){return be[ke-1]},ee.Predictor5=function(oe,be,ke){return Gt(Gt(oe,be[ke+1]),be[ke+0])},ee.Predictor6=function(oe,be,ke){return Gt(oe,be[ke-1])},ee.Predictor7=function(oe,be,ke){return Gt(oe,be[ke+0])},ee.Predictor8=function(oe,be,ke){return Gt(be[ke-1],be[ke+0])},ee.Predictor9=function(oe,be,ke){return Gt(be[ke+0],be[ke+1])},ee.Predictor10=function(oe,be,ke){return Gt(Gt(oe,be[ke-1]),Gt(be[ke+0],be[ke+1]))},ee.Predictor11=function(oe,be,ke){var rt=be[ke+0];return 0>=yr(rt>>24&255,oe>>24&255,(be=be[ke-1])>>24&255)+yr(rt>>16&255,oe>>16&255,be>>16&255)+yr(rt>>8&255,oe>>8&255,be>>8&255)+yr(255&rt,255&oe,255&be)?rt:oe},ee.Predictor12=function(oe,be,ke){var rt=be[ke+0];return(fr((oe>>24&255)+(rt>>24&255)-((be=be[ke-1])>>24&255))<<24|fr((oe>>16&255)+(rt>>16&255)-(be>>16&255))<<16|fr((oe>>8&255)+(rt>>8&255)-(be>>8&255))<<8|fr((255&oe)+(255&rt)-(255&be)))>>>0},ee.Predictor13=function(oe,be,ke){var rt=be[ke-1];return(Tr((oe=Gt(oe,be[ke+0]))>>24&255,rt>>24&255)<<24|Tr(oe>>16&255,rt>>16&255)<<16|Tr(oe>>8&255,rt>>8&255)<<8|Tr(oe>>0&255,rt>>0&255))>>>0};var Va=ee.PredictorAdd0;ee.PredictorAdd1=Dr,Nt("Predictor2","PredictorAdd2"),Nt("Predictor3","PredictorAdd3"),Nt("Predictor4","PredictorAdd4"),Nt("Predictor5","PredictorAdd5"),Nt("Predictor6","PredictorAdd6"),Nt("Predictor7","PredictorAdd7"),Nt("Predictor8","PredictorAdd8"),Nt("Predictor9","PredictorAdd9"),Nt("Predictor10","PredictorAdd10"),Nt("Predictor11","PredictorAdd11"),Nt("Predictor12","PredictorAdd12"),Nt("Predictor13","PredictorAdd13");var Ca=ee.PredictorAdd2;Ft("ColorIndexInverseTransform","MapARGB","32b",function(oe){return oe>>8&255},function(oe){return oe}),Ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(oe){return oe},function(oe){return oe>>8&255});var yu,ll=ee.ColorIndexInverseTransform,ec=ee.MapARGB,Ga=ee.VP8LColorIndexInverseTransformAlpha,bo=ee.MapAlpha,ml=ee.VP8LPredictorsAdd=[];ml.length=16,(ee.VP8LPredictors=[]).length=16,(ee.VP8LPredictorsAdd_C=[]).length=16,(ee.VP8LPredictors_C=[]).length=16;var dc,Wl,ir,Lr,rn,fn,Kt,Pr,Cr,Nn,Qn,ki,es,Oi,Zs,ms,Js,xo,Za,Ea,Wa,Ll,Vs,cl,pc,tn,Oa,gl,ul=a(511),Tc=a(2041),tc=a(225),Il=a(767),Yh=0,nu=Tc,Nh=tc,yl=Il,hs=ul,Bd=0,ph=1,_u=2,jh=3,Td=4,Eo=5,FA=6,Xf=7,Zf=8,Jf=9,Pf=10,PA=[2,3,7],lp=[3,3,11],LA=[280,256,256,256,40],Ul=[0,1,1,1,0],kl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],cp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xh=8,Zh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ku=null,Jh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ef=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ed=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Uh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],zh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],up=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ah=[],iu=[],Ic=[],kA=1,td=2,su=[],rc=[];Zr("UpsampleRgbLinePair",Ws,3),Zr("UpsampleBgrLinePair",vo,3),Zr("UpsampleRgbaLinePair",Li,4),Zr("UpsampleBgraLinePair",Vo,4),Zr("UpsampleArgbLinePair",Qo,4),Zr("UpsampleRgba4444LinePair",as,2),Zr("UpsampleRgb565LinePair",qs,2);var Ot=ee.UpsampleRgbLinePair,mh=ee.UpsampleBgrLinePair,tf=ee.UpsampleRgbaLinePair,ou=ee.UpsampleBgraLinePair,Bo=ee.UpsampleArgbLinePair,hp=ee.UpsampleRgba4444LinePair,Wp=ee.UpsampleRgb565LinePair,kf=16,Ou=1<<kf-1,au=-227,fp=482,rd=6,nd=0,dp=a(256),Cl=a(256),$p=a(256),pp=a(256),Id=a(fp-au),Ap=a(fp-au);ia("YuvToRgbRow",Ws,3),ia("YuvToBgrRow",vo,3),ia("YuvToRgbaRow",Li,4),ia("YuvToBgraRow",Vo,4),ia("YuvToArgbRow",Qo,4),ia("YuvToRgba4444Row",as,2),ia("YuvToRgb565Row",qs,2);var mp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],lu=[0,2,8],gp=[8,7,6,4,4,2,2,2,1,1,1,1],Md=1;this.WebPDecodeRGBA=function(oe,be,ke,rt,gt){var xt=ph,Bt=new hr,Lt=new _i;Bt.ba=Lt,Lt.S=xt,Lt.width=[Lt.width],Lt.height=[Lt.height];var Wt=Lt.width,ar=Lt.height,jr=new Zn;if(jr==null||oe==null)var un=2;else r(jr!=null),un=Ai(oe,be,ke,jr.width,jr.height,jr.Pd,jr.Qd,jr.format,null);if(un!=0?Wt=0:(Wt!=null&&(Wt[0]=jr.width[0]),ar!=null&&(ar[0]=jr.height[0]),Wt=1),Wt){Lt.width=Lt.width[0],Lt.height=Lt.height[0],rt!=null&&(rt[0]=Lt.width),gt!=null&&(gt[0]=Lt.height);e:{if(rt=new zi,(gt=new Wr).data=oe,gt.w=be,gt.ha=ke,gt.kd=1,be=[0],r(gt!=null),((oe=Ai(gt.data,gt.w,gt.ha,null,null,null,be,null,gt))==0||oe==7)&&be[0]&&(oe=4),(be=oe)==0){if(r(Bt!=null),rt.data=gt.data,rt.w=gt.w+gt.offset,rt.ha=gt.ha-gt.offset,rt.put=Qs,rt.ac=Ki,rt.bc=li,rt.ma=Bt,gt.xa){if((oe=Tn())==null){Bt=1;break e}if(function(hn,en){var jn=[0],Dn=[0],Nr=[0];t:for(;;){if(hn==null)return 0;if(en==null)return hn.a=2,0;if(hn.l=en,hn.a=0,N(hn.m,en.data,en.w,en.ha),!Qt(hn.m,jn,Dn,Nr)){hn.a=3;break t}if(hn.xb=td,en.width=jn[0],en.height=Dn[0],!Vn(jn[0],Dn[0],1,hn,null))break t;return 1}return r(hn.a!=0),0}(oe,rt)){if(rt=(be=Tl(rt.width,rt.height,Bt.Oa,Bt.ba))==0){t:{rt=oe;r:for(;;){if(rt==null){rt=0;break t}if(r(rt.s.yc!=null),r(rt.s.Ya!=null),r(0<rt.s.Wb),r((ke=rt.l)!=null),r((gt=ke.ma)!=null),rt.xb!=0){if(rt.ca=gt.ba,rt.tb=gt.tb,r(rt.ca!=null),!aa(gt.Oa,ke,jh)){rt.a=2;break r}if(!Bi(rt,ke.width)||ke.da)break r;if((ke.da||wn(rt.ca.S))&&Kr(),11>rt.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),rt.ca.f.kb.F!=null&&Kr()),rt.Pb&&0<rt.s.ua&&rt.s.vb.X==null&&!st(rt.s.vb,rt.s.Wa.Xa)){rt.a=1;break r}rt.xb=0}if(!_r(rt,rt.V,rt.Ba,rt.c,rt.i,ke.o,rr))break r;gt.Dc=rt.Ma,rt=1;break t}r(rt.a!=0),rt=0}rt=!rt}rt&&(be=oe.a)}else be=oe.a}else{if((oe=new uo)==null){Bt=1;break e}if(oe.Fa=gt.na,oe.P=gt.P,oe.qc=gt.Sa,Co(oe,rt)){if((be=Tl(rt.width,rt.height,Bt.Oa,Bt.ba))==0){if(oe.Aa=0,ke=Bt.Oa,r((gt=oe)!=null),ke!=null){if(0<(Wt=0>(Wt=ke.Md)?0:100<Wt?255:255*Wt/100)){for(ar=jr=0;4>ar;++ar)12>(un=gt.pb[ar]).lc&&(un.ia=Wt*gp[0>un.lc?0:un.lc]>>3),jr|=un.ia;jr&&(alert("todo:VP8InitRandom"),gt.ia=1)}gt.Ga=ke.Id,100<gt.Ga?gt.Ga=100:0>gt.Ga&&(gt.Ga=0)}il(oe,rt)||(be=oe.a)}}else be=oe.a}be==0&&Bt.Oa!=null&&Bt.Oa.fd&&(be=ru(Bt.ba))}Bt=be}xt=Bt!=0?null:11>xt?Lt.f.RGBA.eb:Lt.f.kb.y}else xt=null;return xt};var Fd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(ee,ne){for(var Ae="",fe=0;fe<4;fe++)Ae+=String.fromCharCode(ee[ne++]);return Ae}function p(ee,ne){return(ee[ne+0]<<0|ee[ne+1]<<8|ee[ne+2]<<16)>>>0}function _(ee,ne){return(ee[ne+0]<<0|ee[ne+1]<<8|ee[ne+2]<<16|ee[ne+3]<<24)>>>0}new h;var g=[0],m=[0],b=[],x=new h,v=n,S=function(ee,ne){var Ae={},fe=0,ce=!1,G=0,Z=0;if(Ae.frames=[],!function(xe,Te,Ue,pe){for(var Oe=0;Oe<pe;Oe++)if(xe[Te+Oe]!=Ue.charCodeAt(Oe))return!0;return!1}(ee,ne,"RIFF",4)){for(_(ee,ne+=4),ne+=8;ne<ee.length;){var z=f(ee,ne),k=_(ee,ne+=4);ne+=4;var R=k+(1&k);switch(z){case"VP8 ":case"VP8L":Ae.frames[fe]===void 0&&(Ae.frames[fe]={}),(Y=Ae.frames[fe]).src_off=ce?Z:ne-8,Y.src_size=G+k+8,fe++,ce&&(ce=!1,G=0,Z=0);break;case"VP8X":(Y=Ae.header={}).feature_flags=ee[ne];var N=ne+4;Y.canvas_width=1+p(ee,N),N+=3,Y.canvas_height=1+p(ee,N),N+=3;break;case"ALPH":ce=!0,G=R+8,Z=ne-8;break;case"ANIM":(Y=Ae.header).bgcolor=_(ee,ne),N=ne+4,Y.loop_count=(de=ee)[(J=N)+0]<<0|de[J+1]<<8,N+=2;break;case"ANMF":var U,Y;(Y=Ae.frames[fe]={}).offset_x=2*p(ee,ne),ne+=3,Y.offset_y=2*p(ee,ne),ne+=3,Y.width=1+p(ee,ne),ne+=3,Y.height=1+p(ee,ne),ne+=3,Y.duration=p(ee,ne),ne+=3,U=ee[ne++],Y.dispose=1&U,Y.blend=U>>1&1}z!="ANMF"&&(ne+=R)}var de,J;return Ae}}(v,0);S.response=v,S.rgbaoutput=!0,S.dataurl=!1;var B=S.header?S.header:null,F=S.frames?S.frames:null;if(B){B.loop_counter=B.loop_count,g=[B.canvas_height],m=[B.canvas_width];for(var O=0;O<F.length&&F[O].blend!=0;O++);}var V=F[0],X=x.WebPDecodeRGBA(v,V.src_off,V.src_size,m,g);V.rgba=X,V.imgwidth=m[0],V.imgheight=g[0];for(var Q=0;Q<m[0]*g[0]*4;Q++)b[Q]=X[Q];return this.width=m,this.height=g,this.data=b,this}(function(n){var r=function(){return typeof eC=="function"},e=function(g,m,b,x){var v=4,S=l;switch(x){case n.image_compression.FAST:v=1,S=a;break;case n.image_compression.MEDIUM:v=6,S=t;break;case n.image_compression.SLOW:v=9,S=h}g=i(g,m,b,S);var B=eC(g,{level:v});return n.__addimage__.arrayBufferToBinaryString(B)},i=function(g,m,b,x){for(var v,S,B,F=g.length/m,O=new Uint8Array(g.length+F),V=p(),X=0;X<F;X+=1){if(B=X*m,v=g.subarray(B,B+m),x)O.set(x(v,b,S),B+X);else{for(var Q,ee=V.length,ne=[];Q<ee;Q+=1)ne[Q]=V[Q](v,b,S);var Ae=_(ne.concat());O.set(ne[Ae],B+X)}S=v}return O},o=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var b,x=[],v=g.length;x[0]=1;for(var S=0;S<v;S+=1)b=g[S-m]||0,x[S+1]=g[S]-b+256&255;return x},l=function(g,m,b){var x,v=[],S=g.length;v[0]=2;for(var B=0;B<S;B+=1)x=b&&b[B]||0,v[B+1]=g[B]-x+256&255;return v},t=function(g,m,b){var x,v,S=[],B=g.length;S[0]=3;for(var F=0;F<B;F+=1)x=g[F-m]||0,v=b&&b[F]||0,S[F+1]=g[F]+256-(x+v>>>1)&255;return S},h=function(g,m,b){var x,v,S,B,F=[],O=g.length;F[0]=4;for(var V=0;V<O;V+=1)x=g[V-m]||0,v=b&&b[V]||0,S=b&&b[V-m]||0,B=f(x,v,S),F[V+1]=g[V]-B+256&255;return F},f=function(g,m,b){if(g===m&&m===b)return g;var x=Math.abs(m-b),v=Math.abs(g-b),S=Math.abs(g+m-b-b);return x<=v&&x<=S?g:v<=S?m:b},p=function(){return[o,a,l,t,h]},_=function(g){var m=g.map(function(b){return b.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(g,m,b,x){var v,S,B,F,O,V,X,Q,ee,ne,Ae,fe,ce,G,Z,z=this.decode.FLATE_DECODE,k="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(B=new q$(g)).imgData,S=B.bits,v=B.colorSpace,O=B.colors,[4,6].indexOf(B.colorType)!==-1){if(B.bits===8){ee=(Q=B.pixelBitlength==32?new Uint32Array(B.decodePixels().buffer):B.pixelBitlength==16?new Uint16Array(B.decodePixels().buffer):new Uint8Array(B.decodePixels().buffer)).length,Ae=new Uint8Array(ee*B.colors),ne=new Uint8Array(ee);var R,N=B.pixelBitlength-B.bits;for(G=0,Z=0;G<ee;G++){for(ce=Q[G],R=0;R<N;)Ae[Z++]=ce>>>R&255,R+=B.bits;ne[G]=ce>>>R&255}}if(B.bits===16){ee=(Q=new Uint32Array(B.decodePixels().buffer)).length,Ae=new Uint8Array(ee*(32/B.pixelBitlength)*B.colors),ne=new Uint8Array(ee*(32/B.pixelBitlength)),fe=B.colors>1,G=0,Z=0;for(var U=0;G<ee;)ce=Q[G++],Ae[Z++]=ce>>>0&255,fe&&(Ae[Z++]=ce>>>16&255,ce=Q[G++],Ae[Z++]=ce>>>0&255),ne[U++]=ce>>>16&255;S=8}x!==n.image_compression.NONE&&r()?(g=e(Ae,B.width*B.colors,B.colors,x),X=e(ne,B.width,1,x)):(g=Ae,X=ne,z=void 0)}if(B.colorType===3&&(v=this.color_spaces.INDEXED,V=B.palette,B.transparency.indexed)){var Y=B.transparency.indexed,de=0;for(G=0,ee=Y.length;G<ee;++G)de+=Y[G];if((de/=255)===ee-1&&Y.indexOf(0)!==-1)F=[Y.indexOf(0)];else if(de!==ee){for(Q=B.decodePixels(),ne=new Uint8Array(Q.length),G=0,ee=Q.length;G<ee;G++)ne[G]=Y[Q[G]];X=e(ne,B.width,1)}}var J=function(xe){var Te;switch(xe){case n.image_compression.FAST:Te=11;break;case n.image_compression.MEDIUM:Te=13;break;case n.image_compression.SLOW:Te=14;break;default:Te=12}return Te}(x);return z===this.decode.FLATE_DECODE&&(k="/Predictor "+J+" "),k+="/Colors "+O+" /BitsPerComponent "+S+" /Columns "+B.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(X&&this.__addimage__.isArrayBuffer(X)||this.__addimage__.isArrayBufferView(X))&&(X=this.__addimage__.arrayBufferToBinaryString(X)),{alias:b,data:g,index:m,filter:z,decodeParameters:k,transparency:F,palette:V,sMask:X,predictor:J,width:B.width,height:B.height,bitsPerComponent:S,colorSpace:v}}}})(yo.API),function(n){n.processGIF89A=function(r,e,i,o){var a=new Y$(r),l=a.width,t=a.height,h=[];a.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:l,height:t},p=new I4(100).encode(f,100);return n.processJPEG.call(this,p,e,i,o)},n.processGIF87A=n.processGIF89A}(yo.API),gA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var r=0;r<n;r++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:o,green:i,blue:e,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},gA.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[n]()}catch(e){Xl.log("bit decode error:"+e)}},gA.prototype.bit1=function(){var n,r=Math.ceil(this.width/8),e=r%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<r;o++)for(var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*o*4,t=0;t<8&&8*o+t<this.width;t++){var h=this.palette[a>>7-t&1];this.data[l+4*t]=h.blue,this.data[l+4*t+1]=h.green,this.data[l+4*t+2]=h.red,this.data[l+4*t+3]=255}e!==0&&(this.pos+=4-e)}},gA.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),r=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,o=0;o<n;o++){var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*o*4,t=a>>4,h=15&a,f=this.palette[t];if(this.data[l]=f.blue,this.data[l+1]=f.green,this.data[l+2]=f.red,this.data[l+3]=255,2*o+1>=this.width)break;f=this.palette[h],this.data[l+4]=f.blue,this.data[l+4+1]=f.green,this.data[l+4+2]=f.red,this.data[l+4+3]=255}r!==0&&(this.pos+=4-r)}},gA.prototype.bit8=function(){for(var n=this.width%4,r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*i;if(o<this.palette.length){var l=this.palette[o];this.data[a]=l.red,this.data[a+1]=l.green,this.data[a+2]=l.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},gA.prototype.bit15=function(){for(var n=this.width%3,r=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&r)/r*255|0,t=(a>>5&r)/r*255|0,h=(a>>10&r)/r*255|0,f=a>>15?255:0,p=i*this.width*4+4*o;this.data[p]=h,this.data[p+1]=t,this.data[p+2]=l,this.data[p+3]=f}this.pos+=n}},gA.prototype.bit16=function(){for(var n=this.width%3,r=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var t=(l&r)/r*255|0,h=(l>>5&e)/e*255|0,f=(l>>11)/r*255|0,p=o*this.width*4+4*a;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=t,this.data[p+3]=255}this.pos+=n}},gA.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*e;this.data[l]=a,this.data[l+1]=o,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},gA.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var r=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),t=r*this.width*4+4*e;this.data[t]=a,this.data[t+1]=o,this.data[t+2]=i,this.data[t+3]=l}},gA.prototype.getData=function(){return this.data},function(n){n.processBMP=function(r,e,i,o){var a=new gA(r,!1),l=a.width,t=a.height,h={data:a.getData(),width:l,height:t},f=new I4(100).encode(h,100);return n.processJPEG.call(this,f,e,i,o)}}(yo.API),PM.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(r,e,i,o){var a=new PM(r),l=a.width,t=a.height,h={data:a.getData(),width:l,height:t},f=new I4(100).encode(h,100);return n.processJPEG.call(this,f,e,i,o)}}(yo.API),yo.API.processRGBA=function(n,r,e){for(var i=n.data,o=i.length,a=new Uint8Array(o/4*3),l=new Uint8Array(o/4),t=0,h=0,f=0;f<o;f+=4){var p=i[f],_=i[f+1],g=i[f+2],m=i[f+3];a[t++]=p,a[t++]=_,a[t++]=g,l[h++]=m}var b=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:b,index:r,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},yo.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ty=yo.API,vx=ty.getCharWidthsArray=function(n,r){var e,i,o=(r=r||{}).font||this.internal.getFont(),a=r.fontSize||this.internal.getFontSize(),l=r.charSpace||this.internal.getCharSpace(),t=r.widths?r.widths:o.metadata.Unicode.widths,h=t.fof?t.fof:1,f=r.kerning?r.kerning:o.metadata.Unicode.kerning,p=f.fof?f.fof:1,_=r.doKerning!==!1,g=0,m=n.length,b=0,x=t[0]||h,v=[];for(e=0;e<m;e++)i=n.charCodeAt(e),typeof o.metadata.widthOfString=="function"?v.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+l*(1e3/a)||0)/1e3):(g=_&&Nl(f[i])==="object"&&!isNaN(parseInt(f[i][b],10))?f[i][b]/p:0,v.push((t[i]||x)/h+g)),b=i;return v},TM=ty.getStringUnitWidth=function(n,r){var e=(r=r||{}).fontSize||this.internal.getFontSize(),i=r.font||this.internal.getFont(),o=r.charSpace||this.internal.getCharSpace();return ty.processArabic&&(n=ty.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,o)/e:vx.apply(this,arguments).reduce(function(a,l){return a+l},0)},IM=function(n,r,e,i){for(var o=[],a=0,l=n.length,t=0;a!==l&&t+r[a]<e;)t+=r[a],a++;o.push(n.slice(0,a));var h=a;for(t=0;a!==l;)t+r[a]>i&&(o.push(n.slice(h,a)),t=0,h=a),t+=r[a],a++;return h!==a&&o.push(n.slice(h,a)),o},MM=function(n,r,e){e||(e={});var i,o,a,l,t,h,f,p=[],_=[p],g=e.textIndent||0,m=0,b=0,x=n.split(" "),v=vx.apply(this,[" ",e])[0];if(h=e.lineIndent===-1?x[0].length+2:e.lineIndent||0){var S=Array(h).join(" "),B=[];x.map(function(O){(O=O.split(/\s*\n/)).length>1?B=B.concat(O.map(function(V,X){return(X&&V.length?`
`:"")+V})):B.push(O[0])}),x=B,h=TM.apply(this,[S,e])}for(a=0,l=x.length;a<l;a++){var F=0;if(i=x[a],h&&i[0]==`
`&&(i=i.substr(1),F=1),g+m+(b=(o=vx.apply(this,[i,e])).reduce(function(O,V){return O+V},0))>r||F){if(b>r){for(t=IM.apply(this,[i,o,r-(g+m),r]),p.push(t.shift()),p=[t.pop()];t.length;)_.push([t.shift()]);b=o.slice(i.length-(p[0]?p[0].length:0)).reduce(function(O,V){return O+V},0)}else p=[i];_.push(p),g=b+h,m=v}else p.push(i),g+=m+b,m=v}return f=h?function(O,V){return(V?S:"")+O.join(" ")}:function(O){return O.join(" ")},_.map(f)},ty.splitTextToSize=function(n,r,e){var i,o=(e=e||{}).fontSize||this.internal.getFontSize(),a=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var _=this.internal.getFont(p.fontName,p.fontStyle);return _.metadata.Unicode?{widths:_.metadata.Unicode.widths||{0:1},kerning:_.metadata.Unicode.kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var l=1*this.internal.scaleFactor*r/o;a.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=e.lineIndent;var t,h,f=[];for(t=0,h=i.length;t<h;t++)f=f.concat(MM.apply(this,[i[t],l,a]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var r="klmnopqrstuvwxyz",e={},i={},o=0;o<r.length;o++)e[r[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=r[o];var a=function(_){return"0x"+parseInt(_,10).toString(16)},l=n.__fontmetrics__.compress=function(_){var g,m,b,x,v=["{"];for(var S in _){if(g=_[S],isNaN(parseInt(S,10))?m="'"+S+"'":(S=parseInt(S,10),m=(m=a(S).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof g=="number")g<0?(b=a(g).slice(3),x="-"):(b=a(g).slice(2),x=""),b=x+b.slice(0,-1)+i[b.slice(-1)];else{if(Nl(g)!=="object")throw new Error("Don't know what to do with value type "+Nl(g)+".");b=l(g)}v.push(m+b)}return v.push("}"),v.join("")},t=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,b,x,v={},S=1,B=v,F=[],O="",V="",X=_.length-1,Q=1;Q<X;Q+=1)(x=_[Q])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(x):x=="{"?(F.push([B,b]),B={},b=void 0):x=="}"?((m=F.pop())[0][m[1]]=B,b=void 0,B=m[0]):x=="-"?S=-1:b===void 0?e.hasOwnProperty(x)?(O+=e[x],b=parseInt(O,16)*S,S=1,O=""):O+=x:e.hasOwnProperty(x)?(V+=e[x],B[b]=parseInt(V,16)*S,S=1,b=void 0,V=""):V+=x;return v},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:t("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},p={Unicode:{"Courier-Oblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":t("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":t("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:t("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:t("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":t("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":t("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var g=_.font,m=p.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var b=f.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])}(yo.API),function(n){var r=function(e){for(var i=e.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=e.charCodeAt(a);return o};n.API.events.push(["addFont",function(e){var i=void 0,o=e.font,a=e.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(l,t){t=/^\x00\x01\x00\x00/.test(t)?r(t):r(bv(t)),l.metadata=n.API.TTFFont.open(t),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(o,i)}}])}(yo),function(n){function r(){return(_o.canvg?Promise.resolve(_o.canvg):qS(()=>import("./index.es-BMIiEXq1.js"),[])).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}yo.API.addSvgAsImage=function(e,i,o,a,l,t,h,f){if(isNaN(i)||isNaN(o))throw Xl.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(l))throw Xl.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=a,p.height=l;var _=p.getContext("2d");_.fillStyle="#fff",_.fillRect(0,0,p.width,p.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return r().then(function(b){return b.fromString(_,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(g)}).then(function(){m.addImage(p.toDataURL("image/jpeg",1),i,o,a,l,h,f)})}}(),yo.API.putTotalPages=function(n){var r,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(r,e);return this},yo.API.viewerPreferences=function(n,r){var e;n=n||{},r=r||!1;var i,o,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},t=Object.keys(l),h=[],f=0,p=0,_=0;function g(b,x){var v,S=!1;for(v=0;v<b.length;v+=1)b[v]===x&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||r===!0){var m=t.length;for(_=0;_<m;_+=1)e[t[_]].value=e[t[_]].defaultValue,e[t[_]].explicitSet=!1}if(Nl(n)==="object"){for(o in n)if(a=n[o],g(t,o)&&a!==void 0){if(e[o].type==="boolean"&&typeof a=="boolean")e[o].value=a;else if(e[o].type==="name"&&g(e[o].valueSet,a))e[o].value=a;else if(e[o].type==="integer"&&Number.isInteger(a))e[o].value=a;else if(e[o].type==="array"){for(f=0;f<a.length;f+=1)if(i=!0,a[f].length===1&&typeof a[f][0]=="number")h.push(String(a[f]-1));else if(a[f].length>1){for(p=0;p<a[f].length;p+=1)typeof a[f][p]!="number"&&(i=!1);i===!0&&h.push([a[f][0]-1,a[f][1]-1].join(" "))}e[o].value="["+h.join(" ")+"]"}else e[o].value=e[o].defaultValue;e[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,x=[];for(b in e)e[b].explicitSet===!0&&(e[b].type==="name"?x.push("/"+b+" /"+e[b].value):x.push("/"+b+" "+e[b].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var r=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),t=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+l.length+t.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(o+a+l+t+h),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",r)),this}}(yo.API),function(n){var r=n.API,e=r.pdfEscape16=function(a,l){for(var t,h=l.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],_=0,g=a.length;_<g;++_){if(t=l.metadata.characterToGlyph(a.charCodeAt(_)),l.metadata.glyIdsUsed.push(t),l.metadata.toUnicode[t]=a.charCodeAt(_),h.indexOf(t)==-1&&(h.push(t),h.push([parseInt(l.metadata.widthOfGlyph(t),10)])),t=="0")return p.join("");t=t.toString(16),p.push(f[4-t.length],t)}return p.join("")},i=function(a){var l,t,h,f,p,_,g;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],_=0,g=(t=Object.keys(a).sort(function(m,b){return m-b})).length;_<g;_++)l=t[_],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),a[l]!==void 0&&a[l]!==null&&typeof a[l].toString=="function"&&(f=("0000"+a[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(a){(function(l){var t=l.font,h=l.out,f=l.newObject,p=l.putStream;if(t.metadata instanceof n.API.TTFFont&&t.encoding==="Identity-H"){for(var _=t.metadata.Unicode.widths,g=t.metadata.subset.encode(t.metadata.glyIdsUsed,1),m="",b=0;b<g.length;b++)m+=String.fromCharCode(g[b]);var x=f();p({data:m,addLength1:!0,objectId:x}),h("endobj");var v=f();p({data:i(t.metadata.toUnicode),addLength1:!0,objectId:v}),h("endobj");var S=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+ay(t.fontName)),h("/FontFile2 "+x+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(t.metadata.bbox)),h("/Flags "+t.metadata.flags),h("/StemV "+t.metadata.stemV),h("/ItalicAngle "+t.metadata.italicAngle),h("/Ascent "+t.metadata.ascender),h("/Descent "+t.metadata.decender),h("/CapHeight "+t.metadata.capHeight),h(">>"),h("endobj");var B=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+ay(t.fontName)),h("/FontDescriptor "+S+" 0 R"),h("/W "+n.API.PDFObject.convert(_)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+t.encoding+")"),h(">>"),h(">>"),h("endobj"),t.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+v+" 0 R"),h("/BaseFont /"+ay(t.fontName)),h("/Encoding /"+t.encoding),h("/DescendantFonts ["+B+" 0 R]"),h(">>"),h("endobj"),t.isAlreadyPutted=!0}})(a)}]),r.events.push(["putFont",function(a){(function(l){var t=l.font,h=l.out,f=l.newObject,p=l.putStream;if(t.metadata instanceof n.API.TTFFont&&t.encoding==="WinAnsiEncoding"){for(var _=t.metadata.rawData,g="",m=0;m<_.length;m++)g+=String.fromCharCode(_[m]);var b=f();p({data:g,addLength1:!0,objectId:b}),h("endobj");var x=f();p({data:i(t.metadata.toUnicode),addLength1:!0,objectId:x}),h("endobj");var v=f();h("<<"),h("/Descent "+t.metadata.decender),h("/CapHeight "+t.metadata.capHeight),h("/StemV "+t.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+b+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(t.metadata.bbox)),h("/FontName /"+ay(t.fontName)),h("/ItalicAngle "+t.metadata.italicAngle),h("/Ascent "+t.metadata.ascender),h(">>"),h("endobj"),t.objectNumber=f();for(var S=0;S<t.metadata.hmtx.widths.length;S++)t.metadata.hmtx.widths[S]=parseInt(t.metadata.hmtx.widths[S]*(1e3/t.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+ay(t.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+t.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(t.metadata.hmtx.widths)+">>"),h("endobj"),t.isAlreadyPutted=!0}})(a)}]);var o=function(a){var l,t=a.text||"",h=a.x,f=a.y,p=a.options||{},_=a.mutex||{},g=_.pdfEscape,m=_.activeFontKey,b=_.fonts,x=m,v="",S=0,B="",F=b[x].encoding;if(b[x].encoding!=="Identity-H")return{text:t,x:h,y:f,options:p,mutex:_};for(B=t,x=m,Array.isArray(t)&&(B=t[0]),S=0;S<B.length;S+=1)b[x].metadata.hasOwnProperty("cmap")&&(l=b[x].metadata.cmap.unicode.codeMap[B[S].charCodeAt(0)]),l||B[S].charCodeAt(0)<256&&b[x].metadata.hasOwnProperty("Unicode")?v+=B[S]:v+="";var O="";return parseInt(x.slice(1))<14||F==="WinAnsiEncoding"?O=g(v,x).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(O=e(v,b[x])),_.isHex=!0,{text:O,x:h,y:f,options:p,mutex:_}};r.events.push(["postProcessText",function(a){var l=a.text||"",t=[],h={text:l,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(l)){var f=0;for(f=0;f<l.length;f+=1)Array.isArray(l[f])&&l[f].length===3?t.push([o(Object.assign({},h,{text:l[f][0]})).text,l[f][1],l[f][2]]):t.push(o(Object.assign({},h,{text:l[f]})).text);a.text=t}else a.text=o(Object.assign({},h,{text:l})).text}])}(yo),function(n){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return r.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return r.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return r.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(yo.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var o,a,l,t,h,f,p,_=r,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","Â«","Â»","Â«","â¹","âº","â¹","â","â","â","â½","â¾","â½","â","â","â","â¤","â¥","â¤","â©","âª","â©","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹¤","ï¹¥","ï¹¤"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,F=0;this.__bidiEngine__={};var O=function(fe){var ce=fe.charCodeAt(),G=ce>>8,Z=x[G];return Z!==void 0?_[256*Z+(255&ce)]:G===252||G===253?"AL":S.test(G)?"L":G===8?"R":"N"},V=function(fe){for(var ce,G=0;G<fe.length;G++){if((ce=O(fe.charAt(G)))==="L")return!1;if(ce==="R")return!0}return!1},X=function(fe,ce,G,Z){var z,k,R,N,U=ce[Z];switch(U){case"L":case"R":B=!1;break;case"N":case"AN":break;case"EN":B&&(U="AN");break;case"AL":B=!0,U="R";break;case"WS":U="N";break;case"CS":Z<1||Z+1>=ce.length||(z=G[Z-1])!=="EN"&&z!=="AN"||(k=ce[Z+1])!=="EN"&&k!=="AN"?U="N":B&&(k="AN"),U=k===z?k:"N";break;case"ES":U=(z=Z>0?G[Z-1]:"B")==="EN"&&Z+1<ce.length&&ce[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&G[Z-1]==="EN"){U="EN";break}if(B){U="N";break}for(R=Z+1,N=ce.length;R<N&&ce[R]==="ET";)R++;U=R<N&&ce[R]==="EN"?"EN":"N";break;case"NSM":if(l&&!t){for(N=ce.length,R=Z+1;R<N&&ce[R]==="NSM";)R++;if(R<N){var Y=fe[Z],de=Y>=1425&&Y<=2303||Y===64286;if(z=ce[R],de&&(z==="R"||z==="AL")){U="R";break}}}U=Z<1||(z=ce[Z-1])==="B"?"N":G[Z-1];break;case"B":B=!1,o=!0,U=F;break;case"S":a=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"BN":U="N"}return U},Q=function(fe,ce,G){var Z=fe.split("");return G&&ee(Z,G,{hiLevel:F}),Z.reverse(),ce&&ce.reverse(),Z.join("")},ee=function(fe,ce,G){var Z,z,k,R,N,U=-1,Y=fe.length,de=0,J=[],xe=F?m:g,Te=[];for(B=!1,o=!1,a=!1,z=0;z<Y;z++)Te[z]=O(fe[z]);for(k=0;k<Y;k++){if(N=de,J[k]=X(fe,Te,J,k),Z=240&(de=xe[N][b[J[k]]]),de&=15,ce[k]=R=xe[de][5],Z>0)if(Z===16){for(z=U;z<k;z++)ce[z]=1;U=-1}else U=-1;if(xe[de][6])U===-1&&(U=k);else if(U>-1){for(z=U;z<k;z++)ce[z]=R;U=-1}Te[k]==="B"&&(ce[k]=0),G.hiLevel|=R}a&&function(Ue,pe,Oe){for(var re=0;re<Oe;re++)if(Ue[re]==="S"){pe[re]=F;for(var ie=re-1;ie>=0&&Ue[ie]==="WS";ie--)pe[ie]=F}}(Te,ce,Y)},ne=function(fe,ce,G,Z,z){if(!(z.hiLevel<fe)){if(fe===1&&F===1&&!o)return ce.reverse(),void(G&&G.reverse());for(var k,R,N,U,Y=ce.length,de=0;de<Y;){if(Z[de]>=fe){for(N=de+1;N<Y&&Z[N]>=fe;)N++;for(U=de,R=N-1;U<R;U++,R--)k=ce[U],ce[U]=ce[R],ce[R]=k,G&&(k=G[U],G[U]=G[R],G[R]=k);de=N}de++}}},Ae=function(fe,ce,G){var Z=fe.split(""),z={hiLevel:F};return G||(G=[]),ee(Z,G,z),function(k,R,N){if(N.hiLevel!==0&&p)for(var U,Y=0;Y<k.length;Y++)R[Y]===1&&(U=v.indexOf(k[Y]))>=0&&(k[Y]=v[U+1])}(Z,G,z),ne(2,Z,ce,G,z),ne(1,Z,ce,G,z),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(fe,ce,G){if(function(z,k){if(k)for(var R=0;R<z.length;R++)k[R]=R;t===void 0&&(t=V(z)),f===void 0&&(f=V(z))}(fe,ce),l||!h||f)if(l&&h&&t^f)F=t?1:0,fe=Q(fe,ce,G);else if(!l&&h&&f)F=t?1:0,fe=Ae(fe,ce,G),fe=Q(fe,ce);else if(!l||t||h||f){if(l&&!h&&t^f)fe=Q(fe,ce),t?(F=0,fe=Ae(fe,ce,G)):(F=1,fe=Ae(fe,ce,G),fe=Q(fe,ce));else if(l&&t&&!h&&f)F=1,fe=Ae(fe,ce,G),fe=Q(fe,ce);else if(!l&&!h&&t^f){var Z=p;t?(F=1,fe=Ae(fe,ce,G),F=0,p=!1,fe=Ae(fe,ce,G),p=Z):(F=0,fe=Ae(fe,ce,G),fe=Q(fe,ce),F=1,p=!1,fe=Ae(fe,ce,G),p=Z,fe=Q(fe,ce))}}else F=0,fe=Ae(fe,ce,G);else F=t?1:0,fe=Ae(fe,ce,G);return fe},this.__bidiEngine__.setOptions=function(fe){fe&&(l=fe.isInputVisual,h=fe.isOutputVisual,t=fe.isInputRtl,f=fe.isOutputRtl,p=fe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var o=i.text;i.x,i.y;var a=i.options||{};i.mutex,a.lang;var l=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,e.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var t=0;for(l=[],t=0;t<o.length;t+=1)Object.prototype.toString.call(o[t])==="[object Array]"?l.push([e.doBidiReorder(o[t][0]),o[t][1],o[t][2]]):l.push([e.doBidiReorder(o[t])]);i.text=l}else i.text=e.doBidiReorder(o);e.setOptions({isInputVisual:!0})}])}(yo),yo.API.TTFFont=function(){function n(r){var e;if(this.rawData=r,e=this.contents=new e0(r),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new hK(this),this.registerTTF()}return n.open=function(r){return new n(r)},n.prototype.parse=function(){return this.directory=new X$(this.contents),this.head=new J$(this),this.name=new iK(this),this.cmap=new BO(this),this.toUnicode={},this.hhea=new eK(this),this.maxp=new sK(this),this.hmtx=new oK(this),this.post=new rK(this),this.os2=new tK(this),this.loca=new uK(this),this.glyf=new aK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var r,e,i,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,t,h,f;for(f=[],l=0,t=(h=this.bbox).length;l<t;l++)r=h[l],f.push(Math.round(r*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),(32768&(e=o>>16))!=0&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(r){var e;return((e=this.cmap.unicode)!=null?e.codeMap[r]:void 0)||0},n.prototype.widthOfGlyph=function(r){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*e},n.prototype.widthOfString=function(r,e,i){var o,a,l,t;for(l=0,a=0,t=(r=""+r).length;0<=t?a<t:a>t;a=0<=t?++a:--a)o=r.charCodeAt(a),l+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/e)||0;return l*(e/1e3)},n.prototype.lineHeight=function(r,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*r},n}();var MA,e0=function(){function n(r){this.data=r??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(r){return this.data[this.pos++]=r},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},n.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},n.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},n.prototype.readString=function(r){var e,i;for(i=[],e=0;0<=r?e<r:e>r;e=0<=r?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(r){var e,i,o;for(o=[],e=0,i=r.length;0<=i?e<i:e>i;e=0<=i?++e:--e)o.push(this.writeByte(r.charCodeAt(e)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(r){return this.writeInt16(r)},n.prototype.readLongLong=function(){var r,e,i,o,a,l,t,h;return r=this.readByte(),e=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),t=this.readByte(),h=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^a)+65536*(255^l)+256*(255^t)+(255^h)+1):72057594037927940*r+281474976710656*e+1099511627776*i+4294967296*o+16777216*a+65536*l+256*t+h},n.prototype.writeLongLong=function(r){var e,i;return e=Math.floor(r/4294967296),i=4294967295&r,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(r){return this.writeInt32(r)},n.prototype.read=function(r){var e,i;for(e=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(r){var e,i,o,a;for(a=[],i=0,o=r.length;i<o;i++)e=r[i],a.push(this.writeByte(e));return a},n}(),X$=function(){var n;function r(e){var i,o,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return r.prototype.encode=function(e){var i,o,a,l,t,h,f,p,_,g,m,b,x;for(x in m=Object.keys(e).length,h=Math.log(2),_=16*Math.floor(Math.log(m)/h),l=Math.floor(_/h),p=16*m-_,(o=new e0).writeInt(this.scalarType),o.writeShort(m),o.writeShort(_),o.writeShort(l),o.writeShort(p),a=16*m,f=o.pos+a,t=null,b=[],e)for(g=e[x],o.writeString(x),o.writeInt(n(g)),o.writeInt(f),o.writeInt(g.length),b=b.concat(g),x==="head"&&(t=f),f+=g.length;f%4;)b.push(0),f++;return o.write(b),i=2981146554-n(o.data),o.pos=t+8,o.writeUInt32(i),o.data},n=function(e){var i,o,a,l;for(e=TO.call(e);e.length%4;)e.push(0);for(a=new e0(e),o=0,i=0,l=e.length;i<l;i=i+=4)o+=a.readUInt32();return 4294967295&o},r}(),Z$={}.hasOwnProperty,vm=function(n,r){for(var e in r)Z$.call(r,e)&&(n[e]=r[e]);function i(){this.constructor=n}return i.prototype=r.prototype,n.prototype=new i,n.__super__=r.prototype,n};MA=function(){function n(r){var e;this.file=r,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var J$=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var i;return(i=new e0).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},r}(),LM=function(){function n(r,e){var i,o,a,l,t,h,f,p,_,g,m,b,x,v,S,B,F;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=e+r.readInt(),_=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=r.readByte();break;case 4:for(m=r.readUInt16(),g=m/2,r.pos+=6,a=function(){var O,V;for(V=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)V.push(r.readUInt16());return V}(),r.pos+=2,x=function(){var O,V;for(V=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)V.push(r.readUInt16());return V}(),f=function(){var O,V;for(V=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)V.push(r.readUInt16());return V}(),p=function(){var O,V;for(V=[],h=O=0;0<=g?O<g:O>g;h=0<=g?++O:--O)V.push(r.readUInt16());return V}(),o=(this.length-r.pos+this.offset)/2,t=function(){var O,V;for(V=[],h=O=0;0<=o?O<o:O>o;h=0<=o?++O:--O)V.push(r.readUInt16());return V}(),h=S=0,F=a.length;S<F;h=++S)for(v=a[h],i=B=b=x[h];b<=v?B<=v:B>=v;i=b<=v?++B:--B)p[h]===0?l=i+f[h]:(l=t[p[h]/2+(i-b)-(g-h)]||0)!==0&&(l+=f[h]),this.codeMap[i]=65535&l}r.pos=_}return n.encode=function(r,e){var i,o,a,l,t,h,f,p,_,g,m,b,x,v,S,B,F,O,V,X,Q,ee,ne,Ae,fe,ce,G,Z,z,k,R,N,U,Y,de,J,xe,Te,Ue,pe,Oe,re,ie,Be,He,Ge;switch(Z=new e0,l=Object.keys(r).sort(function(Ne,st){return Ne-st}),e){case"macroman":for(x=0,v=function(){var Ne=[];for(b=0;b<256;++b)Ne.push(0);return Ne}(),B={0:0},a={},z=0,U=l.length;z<U;z++)B[ie=r[o=l[z]]]==null&&(B[ie]=++x),a[o]={old:r[o],new:B[r[o]]},v[o]=B[r[o]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(v),{charMap:a,subtable:Z.data,maxGlyphID:x+1};case"unicode":for(ce=[],_=[],F=0,B={},i={},S=f=null,k=0,Y=l.length;k<Y;k++)B[V=r[o=l[k]]]==null&&(B[V]=++F),i[o]={old:V,new:B[V]},t=B[V]-o,S!=null&&t===f||(S&&_.push(S),ce.push(o),f=t),S=o;for(S&&_.push(S),_.push(65535),ce.push(65535),Ae=2*(ne=ce.length),ee=2*Math.pow(Math.log(ne)/Math.LN2,2),g=Math.log(ee/2)/Math.LN2,Q=2*ne-ee,h=[],X=[],m=[],b=R=0,de=ce.length;R<de;b=++R){if(fe=ce[b],p=_[b],fe===65535){h.push(0),X.push(0);break}if(fe-(G=i[fe].new)>=32768)for(h.push(0),X.push(2*(m.length+ne-b)),o=N=fe;fe<=p?N<=p:N>=p;o=fe<=p?++N:--N)m.push(i[o].new);else h.push(G-fe),X.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*ne+2*m.length),Z.writeUInt16(0),Z.writeUInt16(Ae),Z.writeUInt16(ee),Z.writeUInt16(g),Z.writeUInt16(Q),Oe=0,J=_.length;Oe<J;Oe++)o=_[Oe],Z.writeUInt16(o);for(Z.writeUInt16(0),re=0,xe=ce.length;re<xe;re++)o=ce[re],Z.writeUInt16(o);for(Be=0,Te=h.length;Be<Te;Be++)t=h[Be],Z.writeUInt16(t);for(He=0,Ue=X.length;He<Ue;He++)O=X[He],Z.writeUInt16(O);for(Ge=0,pe=m.length;Ge<pe;Ge++)x=m[Ge],Z.writeUInt16(x);return{charMap:i,subtable:Z.data,maxGlyphID:F+1}}},n}(),BO=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="cmap",r.prototype.parse=function(e){var i,o,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)i=new LM(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},r.encode=function(e,i){var o,a;return i==null&&(i="macroman"),o=LM.encode(e,i),(a=new e0).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},r}(),eK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r}(),tK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(e.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(e.readInt());return o}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(e.readInt());return o}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r}(),rK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="post",r.prototype.parse=function(e){var i,o,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var l;for(o=e.readUInt16(),this.glyphNameIndex=[],l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)i=e.readByte(),a.push(this.names.push(e.readString(i)));return a;case 151552:return o=e.readUInt16(),this.offsets=e.read(o);case 196608:break;case 262144:return this.map=(function(){var t,h,f;for(f=[],l=t=0,h=this.file.maxp.numGlyphs;0<=h?t<h:t>h;l=0<=h?++t:--t)f.push(e.readUInt32());return f}).call(this)}},r}(),nK=function(n,r){this.raw=n,this.length=n.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},iK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="name",r.prototype.parse=function(e){var i,o,a,l,t,h,f,p,_,g,m;for(e.pos=this.offset,e.readShort(),i=e.readShort(),h=e.readShort(),o=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)o.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+h+e.readShort()});for(f={},l=_=0,g=o.length;_<g;l=++_)a=o[l],e.pos=a.offset,p=e.readString(a.length),t=new nK(p,a),f[m=a.nameID]==null&&(f[m]=[]),f[a.nameID].push(t);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},r}(),sK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r}(),oK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="hmtx",r.prototype.parse=function(e){var i,o,a,l,t,h,f;for(e.pos=this.offset,this.metrics=[],i=0,h=this.file.hhea.numberOfMetrics;0<=h?i<h:i>h;i=0<=h?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,_;for(_=[],i=p=0;0<=a?p<a:p>a;i=0<=a?++p:--p)_.push(e.readInt16());return _}(),this.widths=(function(){var p,_,g,m;for(m=[],p=0,_=(g=this.metrics).length;p<_;p++)l=g[p],m.push(l.advance);return m}).call(this),o=this.widths[this.widths.length-1],f=[],i=t=0;0<=a?t<a:t>a;i=0<=a?++t:--t)f.push(this.widths.push(o));return f},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r}(),TO=[].slice,aK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var i,o,a,l,t,h,f,p,_,g;return e in this.cache?this.cache[e]:(l=this.file.loca,i=this.file.contents,o=l.indexOf(e),(a=l.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+o,t=(h=new e0(i.read(a))).readShort(),p=h.readShort(),g=h.readShort(),f=h.readShort(),_=h.readShort(),this.cache[e]=t===-1?new cK(h,p,g,f,_):new lK(h,t,p,g,f,_),this.cache[e]))},r.prototype.encode=function(e,i,o){var a,l,t,h,f;for(t=[],l=[],h=0,f=i.length;h<f;h++)a=e[i[h]],l.push(t.length),a&&(t=t.concat(a.encode(o)));return l.push(t.length),{table:t,offsets:l}},r}(),lK=function(){function n(r,e,i,o,a,l){this.raw=r,this.numberOfContours=e,this.xMin=i,this.yMin=o,this.xMax=a,this.yMax=l,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),cK=function(){function n(r,e,i,o,a){var l,t;for(this.raw=r,this.xMin=e,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;t=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&t;)l.pos+=1&t?4:2,128&t?l.pos+=8:64&t?l.pos+=4:8&t&&(l.pos+=2)}return n.prototype.encode=function(){var r,e,i;for(e=new e0(TO.call(this.raw.data)),r=0,i=this.glyphIDs.length;r<i;++r)e.pos=this.glyphOffsets[r];return e.data},n}(),uK=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return vm(r,MA),r.prototype.tag="loca",r.prototype.parse=function(e){var i,o;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var a,l;for(l=[],o=0,a=this.length;o<a;o+=2)l.push(2*e.readUInt16());return l}).call(this):(function(){var a,l;for(l=[],o=0,a=this.length;o<a;o+=4)l.push(e.readUInt32());return l}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,i){for(var o=new Uint32Array(this.offsets.length),a=0,l=0,t=0;t<o.length;++t)if(o[t]=a,l<i.length&&i[l]==t){++l,o[t]=a;var h=this.offsets[t],f=this.offsets[t+1]-h;f>0&&(a+=f)}for(var p=new Array(4*o.length),_=0;_<o.length;++_)p[4*_+3]=255&o[_],p[4*_+2]=(65280&o[_])>>8,p[4*_+1]=(16711680&o[_])>>16,p[4*_]=(4278190080&o[_])>>24;return p},r}(),hK=function(){function n(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var r,e,i,o,a;for(e in o=this.font.cmap.tables[0].codeMap,r={},a=this.subset)i=a[e],r[e]=o[i];return r},n.prototype.glyphsFor=function(r){var e,i,o,a,l,t,h;for(o={},l=0,t=r.length;l<t;l++)o[a=r[l]]=this.font.glyf.glyphFor(a);for(a in e=[],o)(i=o[a])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(a in h=this.glyphsFor(e))i=h[a],o[a]=i;return o},n.prototype.encode=function(r,e){var i,o,a,l,t,h,f,p,_,g,m,b,x,v,S;for(o in i=BO.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(r),m={0:0},S=i.charMap)m[(h=S[o]).old]=h.new;for(b in g=i.maxGlyphID,l)b in m||(m[b]=g++);return p=function(B){var F,O;for(F in O={},B)O[B[F]]=F;return O}(m),_=Object.keys(p).sort(function(B,F){return B-F}),x=function(){var B,F,O;for(O=[],B=0,F=_.length;B<F;B++)t=_[B],O.push(p[t]);return O}(),a=this.font.glyf.encode(l,x,m),f=this.font.loca.encode(a.offsets,x),v={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},n}();yo.API.PDFObject=function(){var n;function r(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},r.convert=function(e){var i,o,a,l;if(Array.isArray(e))return"["+function(){var t,h,f;for(f=[],t=0,h=e.length;t<h;t++)i=e[t],f.push(r.convert(i));return f}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(o in a=["<<"],e)l=e[o],a.push("/"+o+" "+r.convert(l));return a.push(">>"),a.join(`
`)}return""+e},r}();const fK=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Q$,AcroFormAppearance:Rs,AcroFormButton:ch,AcroFormCheckBox:Sv,AcroFormChoiceField:o1,AcroFormComboBox:l1,AcroFormEditBox:xv,AcroFormListBox:a1,AcroFormPasswordField:Cv,AcroFormPushButton:wv,AcroFormRadioButton:c1,AcroFormTextField:Vg,GState:Kv,ShadingPattern:Ig,TilingPattern:K0,default:yo,jsPDF:yo},Symbol.toStringTag,{value:"Module"})),dK=CF(fK);var Xx={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var pK=Xx.exports,kM;function AK(){return kM||(kM=1,function(n,r){(function(e,i){n.exports=i()})(pK,function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var e=function(he,le){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,_e){ye.__proto__=_e}||function(ye,_e){for(var De in _e)Object.prototype.hasOwnProperty.call(_e,De)&&(ye[De]=_e[De])},e(he,le)};function i(he,le){if(typeof le!="function"&&le!==null)throw new TypeError("Class extends value "+String(le)+" is not a constructor or null");e(he,le);function ye(){this.constructor=he}he.prototype=le===null?Object.create(le):(ye.prototype=le.prototype,new ye)}var o=function(){return o=Object.assign||function(le){for(var ye,_e=1,De=arguments.length;_e<De;_e++){ye=arguments[_e];for(var it in ye)Object.prototype.hasOwnProperty.call(ye,it)&&(le[it]=ye[it])}return le},o.apply(this,arguments)};function a(he,le,ye,_e){function De(it){return it instanceof ye?it:new ye(function(At){At(it)})}return new(ye||(ye=Promise))(function(it,At){function Rt(Or){try{Ir(_e.next(Or))}catch(Xr){At(Xr)}}function zt(Or){try{Ir(_e.throw(Or))}catch(Xr){At(Xr)}}function Ir(Or){Or.done?it(Or.value):De(Or.value).then(Rt,zt)}Ir((_e=_e.apply(he,[])).next())})}function l(he,le){var ye={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},_e,De,it,At;return At={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(At[Symbol.iterator]=function(){return this}),At;function Rt(Ir){return function(Or){return zt([Ir,Or])}}function zt(Ir){if(_e)throw new TypeError("Generator is already executing.");for(;ye;)try{if(_e=1,De&&(it=Ir[0]&2?De.return:Ir[0]?De.throw||((it=De.return)&&it.call(De),0):De.next)&&!(it=it.call(De,Ir[1])).done)return it;switch(De=0,it&&(Ir=[Ir[0]&2,it.value]),Ir[0]){case 0:case 1:it=Ir;break;case 4:return ye.label++,{value:Ir[1],done:!1};case 5:ye.label++,De=Ir[1],Ir=[0];continue;case 7:Ir=ye.ops.pop(),ye.trys.pop();continue;default:if(it=ye.trys,!(it=it.length>0&&it[it.length-1])&&(Ir[0]===6||Ir[0]===2)){ye=0;continue}if(Ir[0]===3&&(!it||Ir[1]>it[0]&&Ir[1]<it[3])){ye.label=Ir[1];break}if(Ir[0]===6&&ye.label<it[1]){ye.label=it[1],it=Ir;break}if(it&&ye.label<it[2]){ye.label=it[2],ye.ops.push(Ir);break}it[2]&&ye.ops.pop(),ye.trys.pop();continue}Ir=le.call(he,ye)}catch(Or){Ir=[6,Or],De=0}finally{_e=it=0}if(Ir[0]&5)throw Ir[1];return{value:Ir[0]?Ir[1]:void 0,done:!0}}}function t(he,le,ye){if(arguments.length===2)for(var _e=0,De=le.length,it;_e<De;_e++)(it||!(_e in le))&&(it||(it=Array.prototype.slice.call(le,0,_e)),it[_e]=le[_e]);return he.concat(it||le)}for(var h=function(){function he(le,ye,_e,De){this.left=le,this.top=ye,this.width=_e,this.height=De}return he.prototype.add=function(le,ye,_e,De){return new he(this.left+le,this.top+ye,this.width+_e,this.height+De)},he.fromClientRect=function(le,ye){return new he(ye.left+le.windowBounds.left,ye.top+le.windowBounds.top,ye.width,ye.height)},he.fromDOMRectList=function(le,ye){var _e=Array.from(ye).find(function(De){return De.width!==0});return _e?new he(_e.left+le.windowBounds.left,_e.top+le.windowBounds.top,_e.width,_e.height):he.EMPTY},he.EMPTY=new he(0,0,0,0),he}(),f=function(he,le){return h.fromClientRect(he,le.getBoundingClientRect())},p=function(he){var le=he.body,ye=he.documentElement;if(!le||!ye)throw new Error("Unable to get document size");var _e=Math.max(Math.max(le.scrollWidth,ye.scrollWidth),Math.max(le.offsetWidth,ye.offsetWidth),Math.max(le.clientWidth,ye.clientWidth)),De=Math.max(Math.max(le.scrollHeight,ye.scrollHeight),Math.max(le.offsetHeight,ye.offsetHeight),Math.max(le.clientHeight,ye.clientHeight));return new h(0,0,_e,De)},_=function(he){for(var le=[],ye=0,_e=he.length;ye<_e;){var De=he.charCodeAt(ye++);if(De>=55296&&De<=56319&&ye<_e){var it=he.charCodeAt(ye++);(it&64512)===56320?le.push(((De&1023)<<10)+(it&1023)+65536):(le.push(De),ye--)}else le.push(De)}return le},g=function(){for(var he=[],le=0;le<arguments.length;le++)he[le]=arguments[le];if(String.fromCodePoint)return String.fromCodePoint.apply(String,he);var ye=he.length;if(!ye)return"";for(var _e=[],De=-1,it="";++De<ye;){var At=he[De];At<=65535?_e.push(At):(At-=65536,_e.push((At>>10)+55296,At%1024+56320)),(De+1===ye||_e.length>16384)&&(it+=String.fromCharCode.apply(String,_e),_e.length=0)}return it},m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=typeof Uint8Array>"u"?[]:new Uint8Array(256),x=0;x<m.length;x++)b[m.charCodeAt(x)]=x;for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=typeof Uint8Array>"u"?[]:new Uint8Array(256),B=0;B<v.length;B++)S[v.charCodeAt(B)]=B;for(var F=function(he){var le=he.length*.75,ye=he.length,_e,De=0,it,At,Rt,zt;he[he.length-1]==="="&&(le--,he[he.length-2]==="="&&le--);var Ir=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(le):new Array(le),Or=Array.isArray(Ir)?Ir:new Uint8Array(Ir);for(_e=0;_e<ye;_e+=4)it=S[he.charCodeAt(_e)],At=S[he.charCodeAt(_e+1)],Rt=S[he.charCodeAt(_e+2)],zt=S[he.charCodeAt(_e+3)],Or[De++]=it<<2|At>>4,Or[De++]=(At&15)<<4|Rt>>2,Or[De++]=(Rt&3)<<6|zt&63;return Ir},O=function(he){for(var le=he.length,ye=[],_e=0;_e<le;_e+=2)ye.push(he[_e+1]<<8|he[_e]);return ye},V=function(he){for(var le=he.length,ye=[],_e=0;_e<le;_e+=4)ye.push(he[_e+3]<<24|he[_e+2]<<16|he[_e+1]<<8|he[_e]);return ye},X=5,Q=11,ee=2,ne=Q-X,Ae=65536>>X,fe=1<<X,ce=fe-1,G=1024>>X,Z=Ae+G,z=Z,k=32,R=z+k,N=65536>>Q,U=1<<ne,Y=U-1,de=function(he,le,ye){return he.slice?he.slice(le,ye):new Uint16Array(Array.prototype.slice.call(he,le,ye))},J=function(he,le,ye){return he.slice?he.slice(le,ye):new Uint32Array(Array.prototype.slice.call(he,le,ye))},xe=function(he,le){var ye=F(he),_e=Array.isArray(ye)?V(ye):new Uint32Array(ye),De=Array.isArray(ye)?O(ye):new Uint16Array(ye),it=24,At=de(De,it/2,_e[4]/2),Rt=_e[5]===2?de(De,(it+_e[4])/2):J(_e,Math.ceil((it+_e[4])/4));return new Te(_e[0],_e[1],_e[2],_e[3],At,Rt)},Te=function(){function he(le,ye,_e,De,it,At){this.initialValue=le,this.errorValue=ye,this.highStart=_e,this.highValueIndex=De,this.index=it,this.data=At}return he.prototype.get=function(le){var ye;if(le>=0){if(le<55296||le>56319&&le<=65535)return ye=this.index[le>>X],ye=(ye<<ee)+(le&ce),this.data[ye];if(le<=65535)return ye=this.index[Ae+(le-55296>>X)],ye=(ye<<ee)+(le&ce),this.data[ye];if(le<this.highStart)return ye=R-N+(le>>Q),ye=this.index[ye],ye+=le>>X&Y,ye=this.index[ye],ye=(ye<<ee)+(le&ce),this.data[ye];if(le<=1114111)return this.data[this.highValueIndex]}return this.errorValue},he}(),Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pe=typeof Uint8Array>"u"?[]:new Uint8Array(256),Oe=0;Oe<Ue.length;Oe++)pe[Ue.charCodeAt(Oe)]=Oe;var re="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ie=50,Be=1,He=2,Ge=3,Ne=4,st=5,ot=7,Je=8,Ze=9,bt=10,yt=11,Nt=12,kt=13,Gt=14,fr=15,Tr=16,yr=17,Dr=18,jt=19,Jt=20,pr=21,Ft=22,er=23,ur=24,Yt=25,mr=26,Mr=27,sn=28,Un=29,wn=30,Zi=31,ai=32,_i=33,Zn=34,Bn=35,On=36,tr=37,zn=38,Ki=39,Qs=40,li=41,Qt=42,Ve=43,et=[9001,65288],We="!",tt="Ã",nt="Ã·",Ct=xe(re),rr=[wn,On],Et=[Be,He,Ge,st],nr=[bt,Je],Fr=[Mr,mr],_r=Et.concat(nr),pn=[zn,Ki,Qs,Zn,Bn],Tn=[fr,kt],Vn=function(he,le){le===void 0&&(le="strict");var ye=[],_e=[],De=[];return he.forEach(function(it,At){var Rt=Ct.get(it);if(Rt>ie?(De.push(!0),Rt-=ie):De.push(!1),["normal","auto","loose"].indexOf(le)!==-1&&[8208,8211,12316,12448].indexOf(it)!==-1)return _e.push(At),ye.push(Tr);if(Rt===Ne||Rt===yt){if(At===0)return _e.push(At),ye.push(wn);var zt=ye[At-1];return _r.indexOf(zt)===-1?(_e.push(_e[At-1]),ye.push(zt)):(_e.push(At),ye.push(wn))}if(_e.push(At),Rt===Zi)return ye.push(le==="strict"?pr:tr);if(Rt===Qt||Rt===Un)return ye.push(wn);if(Rt===Ve)return it>=131072&&it<=196605||it>=196608&&it<=262141?ye.push(tr):ye.push(wn);ye.push(Rt)}),[_e,ye,De]},Bi=function(he,le,ye,_e){var De=_e[ye];if(Array.isArray(he)?he.indexOf(De)!==-1:he===De)for(var it=ye;it<=_e.length;){it++;var At=_e[it];if(At===le)return!0;if(At!==bt)break}if(De===bt)for(var it=ye;it>0;){it--;var Rt=_e[it];if(Array.isArray(he)?he.indexOf(Rt)!==-1:he===Rt)for(var zt=ye;zt<=_e.length;){zt++;var At=_e[zt];if(At===le)return!0;if(At!==bt)break}if(Rt!==bt)break}return!1},Si=function(he,le){for(var ye=he;ye>=0;){var _e=le[ye];if(_e===bt)ye--;else return _e}return 0},Di=function(he,le,ye,_e,De){if(ye[_e]===0)return tt;var it=_e-1;if(Array.isArray(De)&&De[it]===!0)return tt;var At=it-1,Rt=it+1,zt=le[it],Ir=At>=0?le[At]:0,Or=le[Rt];if(zt===He&&Or===Ge)return tt;if(Et.indexOf(zt)!==-1)return We;if(Et.indexOf(Or)!==-1||nr.indexOf(Or)!==-1)return tt;if(Si(it,le)===Je)return nt;if(Ct.get(he[it])===yt||(zt===ai||zt===_i)&&Ct.get(he[Rt])===yt||zt===ot||Or===ot||zt===Ze||[bt,kt,fr].indexOf(zt)===-1&&Or===Ze||[yr,Dr,jt,ur,sn].indexOf(Or)!==-1||Si(it,le)===Ft||Bi(er,Ft,it,le)||Bi([yr,Dr],pr,it,le)||Bi(Nt,Nt,it,le))return tt;if(zt===bt)return nt;if(zt===er||Or===er)return tt;if(Or===Tr||zt===Tr)return nt;if([kt,fr,pr].indexOf(Or)!==-1||zt===Gt||Ir===On&&Tn.indexOf(zt)!==-1||zt===sn&&Or===On||Or===Jt||rr.indexOf(Or)!==-1&&zt===Yt||rr.indexOf(zt)!==-1&&Or===Yt||zt===Mr&&[tr,ai,_i].indexOf(Or)!==-1||[tr,ai,_i].indexOf(zt)!==-1&&Or===mr||rr.indexOf(zt)!==-1&&Fr.indexOf(Or)!==-1||Fr.indexOf(zt)!==-1&&rr.indexOf(Or)!==-1||[Mr,mr].indexOf(zt)!==-1&&(Or===Yt||[Ft,fr].indexOf(Or)!==-1&&le[Rt+1]===Yt)||[Ft,fr].indexOf(zt)!==-1&&Or===Yt||zt===Yt&&[Yt,sn,ur].indexOf(Or)!==-1)return tt;if([Yt,sn,ur,yr,Dr].indexOf(Or)!==-1)for(var Xr=it;Xr>=0;){var Fn=le[Xr];if(Fn===Yt)return tt;if([sn,ur].indexOf(Fn)!==-1)Xr--;else break}if([Mr,mr].indexOf(Or)!==-1)for(var Xr=[yr,Dr].indexOf(zt)!==-1?At:it;Xr>=0;){var Fn=le[Xr];if(Fn===Yt)return tt;if([sn,ur].indexOf(Fn)!==-1)Xr--;else break}if(zn===zt&&[zn,Ki,Zn,Bn].indexOf(Or)!==-1||[Ki,Zn].indexOf(zt)!==-1&&[Ki,Qs].indexOf(Or)!==-1||[Qs,Bn].indexOf(zt)!==-1&&Or===Qs||pn.indexOf(zt)!==-1&&[Jt,mr].indexOf(Or)!==-1||pn.indexOf(Or)!==-1&&zt===Mr||rr.indexOf(zt)!==-1&&rr.indexOf(Or)!==-1||zt===ur&&rr.indexOf(Or)!==-1||rr.concat(Yt).indexOf(zt)!==-1&&Or===Ft&&et.indexOf(he[Rt])===-1||rr.concat(Yt).indexOf(Or)!==-1&&zt===Dr)return tt;if(zt===li&&Or===li){for(var Vi=ye[it],wi=1;Vi>0&&(Vi--,le[Vi]===li);)wi++;if(wi%2!==0)return tt}return zt===ai&&Or===_i?tt:nt},ds=function(he,le){le||(le={lineBreak:"normal",wordBreak:"normal"});var ye=Vn(he,le.lineBreak),_e=ye[0],De=ye[1],it=ye[2];(le.wordBreak==="break-all"||le.wordBreak==="break-word")&&(De=De.map(function(Rt){return[Yt,wn,Qt].indexOf(Rt)!==-1?tr:Rt}));var At=le.wordBreak==="keep-all"?it.map(function(Rt,zt){return Rt&&he[zt]>=19968&&he[zt]<=40959}):void 0;return[_e,De,At]},Qi=function(){function he(le,ye,_e,De){this.codePoints=le,this.required=ye===We,this.start=_e,this.end=De}return he.prototype.slice=function(){return g.apply(void 0,this.codePoints.slice(this.start,this.end))},he}(),Zt=function(he,le){var ye=_(he),_e=ds(ye,le),De=_e[0],it=_e[1],At=_e[2],Rt=ye.length,zt=0,Ir=0;return{next:function(){if(Ir>=Rt)return{done:!0,value:null};for(var Or=tt;Ir<Rt&&(Or=Di(ye,it,De,++Ir,At))===tt;);if(Or!==tt||Ir===Rt){var Xr=new Qi(ye,Or,zt,Ir);return zt=Ir,{value:Xr,done:!1}}return{done:!0,value:null}}}},$r=1,kn=2,vn=4,si=8,qn=10,Yn=47,Wi=92,us=9,xs=32,zi=34,uo=61,Ji=35,ks=36,Co=37,Do=39,ba=40,il=41,Ma=95,Uo=45,xa=33,Gl=60,ro=62,Hs=64,zo=91,wl=93,Ha=61,Fa=123,Pa=63,wa=125,Sl=124,Jl=126,pl=128,sl=65533,hc=42,na=43,La=44,zc=58,Cc=59,Os=46,qu=0,Jc=8,bs=11,Dh=14,mu=31,Fu=127,Ec=-1,fh=48,Pu=97,gu=101,Ho=102,Ro=117,eu=122,Rh=65,Bc=69,Hc=70,Yu=85,dh=90,Qa=function(he){return he>=fh&&he<=57},tu=function(he){return he>=55296&&he<=57343},go=function(he){return Qa(he)||he>=Rh&&he<=Hc||he>=Pu&&he<=Ho},fc=function(he){return he>=Pu&&he<=eu},Pl=function(he){return he>=Rh&&he<=dh},Lu=function(he){return fc(he)||Pl(he)},ol=function(he){return he>=pl},ka=function(he){return he===qn||he===us||he===xs},ae=function(he){return Lu(he)||ol(he)||he===Ma},we=function(he){return ae(he)||Qa(he)||he===Uo},Le=function(he){return he>=qu&&he<=Jc||he===bs||he>=Dh&&he<=mu||he===Fu},$e=function(he,le){return he!==Wi?!1:le!==qn},ct=function(he,le,ye){return he===Uo?ae(le)||$e(le,ye):ae(he)?!0:!!(he===Wi&&$e(he,le))},ft=function(he,le,ye){return he===na||he===Uo?Qa(le)?!0:le===Os&&Qa(ye):Qa(he===Os?le:he)},at=function(he){var le=0,ye=1;(he[le]===na||he[le]===Uo)&&(he[le]===Uo&&(ye=-1),le++);for(var _e=[];Qa(he[le]);)_e.push(he[le++]);var De=_e.length?parseInt(g.apply(void 0,_e),10):0;he[le]===Os&&le++;for(var it=[];Qa(he[le]);)it.push(he[le++]);var At=it.length,Rt=At?parseInt(g.apply(void 0,it),10):0;(he[le]===Bc||he[le]===gu)&&le++;var zt=1;(he[le]===na||he[le]===Uo)&&(he[le]===Uo&&(zt=-1),le++);for(var Ir=[];Qa(he[le]);)Ir.push(he[le++]);var Or=Ir.length?parseInt(g.apply(void 0,Ir),10):0;return ye*(De+Rt*Math.pow(10,-At))*Math.pow(10,zt*Or)},Er={type:2},hr={type:3},Wr={type:4},bn={type:13},Hn={type:8},cn={type:21},Hr={type:9},ei={type:10},Ti={type:11},vs={type:12},ma={type:14},Fe={type:23},pt={type:1},lr={type:25},gr={type:24},Kr={type:26},Zr={type:27},Gn={type:28},Hi={type:29},ps={type:31},ws={type:32},Ns=function(){function he(){this._value=[]}return he.prototype.write=function(le){this._value=this._value.concat(_(le))},he.prototype.read=function(){for(var le=[],ye=this.consumeToken();ye!==ws;)le.push(ye),ye=this.consumeToken();return le},he.prototype.consumeToken=function(){var le=this.consumeCodePoint();switch(le){case zi:return this.consumeStringToken(zi);case Ji:var ye=this.peekCodePoint(0),_e=this.peekCodePoint(1),De=this.peekCodePoint(2);if(we(ye)||$e(_e,De)){var it=ct(ye,_e,De)?kn:$r,At=this.consumeName();return{type:5,value:At,flags:it}}break;case ks:if(this.peekCodePoint(0)===uo)return this.consumeCodePoint(),bn;break;case Do:return this.consumeStringToken(Do);case ba:return Er;case il:return hr;case hc:if(this.peekCodePoint(0)===uo)return this.consumeCodePoint(),ma;break;case na:if(ft(le,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(le),this.consumeNumericToken();break;case La:return Wr;case Uo:var Rt=le,zt=this.peekCodePoint(0),Ir=this.peekCodePoint(1);if(ft(Rt,zt,Ir))return this.reconsumeCodePoint(le),this.consumeNumericToken();if(ct(Rt,zt,Ir))return this.reconsumeCodePoint(le),this.consumeIdentLikeToken();if(zt===Uo&&Ir===ro)return this.consumeCodePoint(),this.consumeCodePoint(),gr;break;case Os:if(ft(le,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(le),this.consumeNumericToken();break;case Yn:if(this.peekCodePoint(0)===hc)for(this.consumeCodePoint();;){var Or=this.consumeCodePoint();if(Or===hc&&(Or=this.consumeCodePoint(),Or===Yn))return this.consumeToken();if(Or===Ec)return this.consumeToken()}break;case zc:return Kr;case Cc:return Zr;case Gl:if(this.peekCodePoint(0)===xa&&this.peekCodePoint(1)===Uo&&this.peekCodePoint(2)===Uo)return this.consumeCodePoint(),this.consumeCodePoint(),lr;break;case Hs:var Xr=this.peekCodePoint(0),Fn=this.peekCodePoint(1),Vi=this.peekCodePoint(2);if(ct(Xr,Fn,Vi)){var At=this.consumeName();return{type:7,value:At}}break;case zo:return Gn;case Wi:if($e(le,this.peekCodePoint(0)))return this.reconsumeCodePoint(le),this.consumeIdentLikeToken();break;case wl:return Hi;case Ha:if(this.peekCodePoint(0)===uo)return this.consumeCodePoint(),Hn;break;case Fa:return Ti;case wa:return vs;case Ro:case Yu:var wi=this.peekCodePoint(0),Ri=this.peekCodePoint(1);return wi===na&&(go(Ri)||Ri===Pa)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(le),this.consumeIdentLikeToken();case Sl:if(this.peekCodePoint(0)===uo)return this.consumeCodePoint(),Hr;if(this.peekCodePoint(0)===Sl)return this.consumeCodePoint(),cn;break;case Jl:if(this.peekCodePoint(0)===uo)return this.consumeCodePoint(),ei;break;case Ec:return ws}return ka(le)?(this.consumeWhiteSpace(),ps):Qa(le)?(this.reconsumeCodePoint(le),this.consumeNumericToken()):ae(le)?(this.reconsumeCodePoint(le),this.consumeIdentLikeToken()):{type:6,value:g(le)}},he.prototype.consumeCodePoint=function(){var le=this._value.shift();return typeof le>"u"?-1:le},he.prototype.reconsumeCodePoint=function(le){this._value.unshift(le)},he.prototype.peekCodePoint=function(le){return le>=this._value.length?-1:this._value[le]},he.prototype.consumeUnicodeRangeToken=function(){for(var le=[],ye=this.consumeCodePoint();go(ye)&&le.length<6;)le.push(ye),ye=this.consumeCodePoint();for(var _e=!1;ye===Pa&&le.length<6;)le.push(ye),ye=this.consumeCodePoint(),_e=!0;if(_e){var De=parseInt(g.apply(void 0,le.map(function(zt){return zt===Pa?fh:zt})),16),it=parseInt(g.apply(void 0,le.map(function(zt){return zt===Pa?Hc:zt})),16);return{type:30,start:De,end:it}}var At=parseInt(g.apply(void 0,le),16);if(this.peekCodePoint(0)===Uo&&go(this.peekCodePoint(1))){this.consumeCodePoint(),ye=this.consumeCodePoint();for(var Rt=[];go(ye)&&Rt.length<6;)Rt.push(ye),ye=this.consumeCodePoint();var it=parseInt(g.apply(void 0,Rt),16);return{type:30,start:At,end:it}}else return{type:30,start:At,end:At}},he.prototype.consumeIdentLikeToken=function(){var le=this.consumeName();return le.toLowerCase()==="url"&&this.peekCodePoint(0)===ba?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ba?(this.consumeCodePoint(),{type:19,value:le}):{type:20,value:le}},he.prototype.consumeUrlToken=function(){var le=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ec)return{type:22,value:""};var ye=this.peekCodePoint(0);if(ye===Do||ye===zi){var _e=this.consumeStringToken(this.consumeCodePoint());return _e.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ec||this.peekCodePoint(0)===il)?(this.consumeCodePoint(),{type:22,value:_e.value}):(this.consumeBadUrlRemnants(),Fe)}for(;;){var De=this.consumeCodePoint();if(De===Ec||De===il)return{type:22,value:g.apply(void 0,le)};if(ka(De))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ec||this.peekCodePoint(0)===il?(this.consumeCodePoint(),{type:22,value:g.apply(void 0,le)}):(this.consumeBadUrlRemnants(),Fe);if(De===zi||De===Do||De===ba||Le(De))return this.consumeBadUrlRemnants(),Fe;if(De===Wi)if($e(De,this.peekCodePoint(0)))le.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Fe;else le.push(De)}},he.prototype.consumeWhiteSpace=function(){for(;ka(this.peekCodePoint(0));)this.consumeCodePoint()},he.prototype.consumeBadUrlRemnants=function(){for(;;){var le=this.consumeCodePoint();if(le===il||le===Ec)return;$e(le,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},he.prototype.consumeStringSlice=function(le){for(var ye=5e4,_e="";le>0;){var De=Math.min(ye,le);_e+=g.apply(void 0,this._value.splice(0,De)),le-=De}return this._value.shift(),_e},he.prototype.consumeStringToken=function(le){var ye="",_e=0;do{var De=this._value[_e];if(De===Ec||De===void 0||De===le)return ye+=this.consumeStringSlice(_e),{type:0,value:ye};if(De===qn)return this._value.splice(0,_e),pt;if(De===Wi){var it=this._value[_e+1];it!==Ec&&it!==void 0&&(it===qn?(ye+=this.consumeStringSlice(_e),_e=-1,this._value.shift()):$e(De,it)&&(ye+=this.consumeStringSlice(_e),ye+=g(this.consumeEscapedCodePoint()),_e=-1))}_e++}while(!0)},he.prototype.consumeNumber=function(){var le=[],ye=vn,_e=this.peekCodePoint(0);for((_e===na||_e===Uo)&&le.push(this.consumeCodePoint());Qa(this.peekCodePoint(0));)le.push(this.consumeCodePoint());_e=this.peekCodePoint(0);var De=this.peekCodePoint(1);if(_e===Os&&Qa(De))for(le.push(this.consumeCodePoint(),this.consumeCodePoint()),ye=si;Qa(this.peekCodePoint(0));)le.push(this.consumeCodePoint());_e=this.peekCodePoint(0),De=this.peekCodePoint(1);var it=this.peekCodePoint(2);if((_e===Bc||_e===gu)&&((De===na||De===Uo)&&Qa(it)||Qa(De)))for(le.push(this.consumeCodePoint(),this.consumeCodePoint()),ye=si;Qa(this.peekCodePoint(0));)le.push(this.consumeCodePoint());return[at(le),ye]},he.prototype.consumeNumericToken=function(){var le=this.consumeNumber(),ye=le[0],_e=le[1],De=this.peekCodePoint(0),it=this.peekCodePoint(1),At=this.peekCodePoint(2);if(ct(De,it,At)){var Rt=this.consumeName();return{type:15,number:ye,flags:_e,unit:Rt}}return De===Co?(this.consumeCodePoint(),{type:16,number:ye,flags:_e}):{type:17,number:ye,flags:_e}},he.prototype.consumeEscapedCodePoint=function(){var le=this.consumeCodePoint();if(go(le)){for(var ye=g(le);go(this.peekCodePoint(0))&&ye.length<6;)ye+=g(this.consumeCodePoint());ka(this.peekCodePoint(0))&&this.consumeCodePoint();var _e=parseInt(ye,16);return _e===0||tu(_e)||_e>1114111?sl:_e}return le===Ec?sl:le},he.prototype.consumeName=function(){for(var le="";;){var ye=this.consumeCodePoint();if(we(ye))le+=g(ye);else if($e(ye,this.peekCodePoint(0)))le+=g(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(ye),le}},he}(),Ws=function(){function he(le){this._tokens=le}return he.create=function(le){var ye=new Ns;return ye.write(le),new he(ye.read())},he.parseValue=function(le){return he.create(le).parseComponentValue()},he.parseValues=function(le){return he.create(le).parseComponentValues()},he.prototype.parseComponentValue=function(){for(var le=this.consumeToken();le.type===31;)le=this.consumeToken();if(le.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(le);var ye=this.consumeComponentValue();do le=this.consumeToken();while(le.type===31);if(le.type===32)return ye;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},he.prototype.parseComponentValues=function(){for(var le=[];;){var ye=this.consumeComponentValue();if(ye.type===32)return le;le.push(ye),le.push()}},he.prototype.consumeComponentValue=function(){var le=this.consumeToken();switch(le.type){case 11:case 28:case 2:return this.consumeSimpleBlock(le.type);case 19:return this.consumeFunction(le)}return le},he.prototype.consumeSimpleBlock=function(le){for(var ye={type:le,values:[]},_e=this.consumeToken();;){if(_e.type===32||Ii(_e,le))return ye;this.reconsumeToken(_e),ye.values.push(this.consumeComponentValue()),_e=this.consumeToken()}},he.prototype.consumeFunction=function(le){for(var ye={name:le.value,values:[],type:18};;){var _e=this.consumeToken();if(_e.type===32||_e.type===3)return ye;this.reconsumeToken(_e),ye.values.push(this.consumeComponentValue())}},he.prototype.consumeToken=function(){var le=this._tokens.shift();return typeof le>"u"?ws:le},he.prototype.reconsumeToken=function(le){this._tokens.unshift(le)},he}(),vo=function(he){return he.type===15},qs=function(he){return he.type===17},as=function(he){return he.type===20},Qo=function(he){return he.type===0},Vo=function(he,le){return as(he)&&he.value===le},Li=function(he){return he.type!==31},Sn=function(he){return he.type!==31&&he.type!==4},ia=function(he){var le=[],ye=[];return he.forEach(function(_e){if(_e.type===4){if(ye.length===0)throw new Error("Error parsing function args, zero tokens for arg");le.push(ye),ye=[];return}_e.type!==31&&ye.push(_e)}),ye.length&&le.push(ye),le},Ii=function(he,le){return le===11&&he.type===12||le===28&&he.type===29?!0:le===2&&he.type===3},As=function(he){return he.type===17||he.type===15},sa=function(he){return he.type===16||As(he)},Ai=function(he){return he.length>1?[he[0],he[1]]:[he[0]]},aa={type:17,number:0,flags:vn},ru={type:16,number:50,flags:vn},Tl={type:16,number:100,flags:vn},al=function(he,le,ye){var _e=he[0],De=he[1];return[Us(_e,le),Us(typeof De<"u"?De:_e,ye)]},Us=function(he,le){if(he.type===16)return he.number/100*le;if(vo(he))switch(he.unit){case"rem":case"em":return 16*he.number;case"px":default:return he.number}return he.number},Xa="deg",jl="grad",Sa="rad",Al="turn",Va={name:"angle",parse:function(he,le){if(le.type===15)switch(le.unit){case Xa:return Math.PI*le.number/180;case jl:return Math.PI/200*le.number;case Sa:return le.number;case Al:return Math.PI*2*le.number}throw new Error("Unsupported angle type")}},Ca=function(he){return he.type===15&&(he.unit===Xa||he.unit===jl||he.unit===Sa||he.unit===Al)},yu=function(he){var le=he.filter(as).map(function(ye){return ye.value}).join(" ");switch(le){case"to bottom right":case"to right bottom":case"left top":case"top left":return[aa,aa];case"to top":case"bottom":return ll(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[aa,Tl];case"to right":case"left":return ll(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Tl,Tl];case"to bottom":case"top":return ll(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Tl,aa];case"to left":case"right":return ll(270)}return 0},ll=function(he){return Math.PI*he/180},ec={name:"color",parse:function(he,le){if(le.type===18){var ye=rn[le.name];if(typeof ye>"u")throw new Error('Attempting to parse an unsupported color function "'+le.name+'"');return ye(he,le.values)}if(le.type===5){if(le.value.length===3){var _e=le.value.substring(0,1),De=le.value.substring(1,2),it=le.value.substring(2,3);return ml(parseInt(_e+_e,16),parseInt(De+De,16),parseInt(it+it,16),1)}if(le.value.length===4){var _e=le.value.substring(0,1),De=le.value.substring(1,2),it=le.value.substring(2,3),At=le.value.substring(3,4);return ml(parseInt(_e+_e,16),parseInt(De+De,16),parseInt(it+it,16),parseInt(At+At,16)/255)}if(le.value.length===6){var _e=le.value.substring(0,2),De=le.value.substring(2,4),it=le.value.substring(4,6);return ml(parseInt(_e,16),parseInt(De,16),parseInt(it,16),1)}if(le.value.length===8){var _e=le.value.substring(0,2),De=le.value.substring(2,4),it=le.value.substring(4,6),At=le.value.substring(6,8);return ml(parseInt(_e,16),parseInt(De,16),parseInt(it,16),parseInt(At,16)/255)}}if(le.type===20){var Rt=Kt[le.value.toUpperCase()];if(typeof Rt<"u")return Rt}return Kt.TRANSPARENT}},Ga=function(he){return(255&he)===0},bo=function(he){var le=255&he,ye=255&he>>8,_e=255&he>>16,De=255&he>>24;return le<255?"rgba("+De+","+_e+","+ye+","+le/255+")":"rgb("+De+","+_e+","+ye+")"},ml=function(he,le,ye,_e){return(he<<24|le<<16|ye<<8|Math.round(_e*255)<<0)>>>0},dc=function(he,le){if(he.type===17)return he.number;if(he.type===16){var ye=le===3?1:255;return le===3?he.number/100*ye:Math.round(he.number/100*ye)}return 0},Wl=function(he,le){var ye=le.filter(Sn);if(ye.length===3){var _e=ye.map(dc),De=_e[0],it=_e[1],At=_e[2];return ml(De,it,At,1)}if(ye.length===4){var Rt=ye.map(dc),De=Rt[0],it=Rt[1],At=Rt[2],zt=Rt[3];return ml(De,it,At,zt)}return 0};function ir(he,le,ye){return ye<0&&(ye+=1),ye>=1&&(ye-=1),ye<1/6?(le-he)*ye*6+he:ye<1/2?le:ye<2/3?(le-he)*6*(2/3-ye)+he:he}var Lr=function(he,le){var ye=le.filter(Sn),_e=ye[0],De=ye[1],it=ye[2],At=ye[3],Rt=(_e.type===17?ll(_e.number):Va.parse(he,_e))/(Math.PI*2),zt=sa(De)?De.number/100:0,Ir=sa(it)?it.number/100:0,Or=typeof At<"u"&&sa(At)?Us(At,1):1;if(zt===0)return ml(Ir*255,Ir*255,Ir*255,1);var Xr=Ir<=.5?Ir*(zt+1):Ir+zt-Ir*zt,Fn=Ir*2-Xr,Vi=ir(Fn,Xr,Rt+1/3),wi=ir(Fn,Xr,Rt),Ri=ir(Fn,Xr,Rt-1/3);return ml(Vi*255,wi*255,Ri*255,Or)},rn={hsl:Lr,hsla:Lr,rgb:Wl,rgba:Wl},fn=function(he,le){return ec.parse(he,Ws.create(le).parseComponentValue())},Kt={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Pr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(he,le){return le.map(function(ye){if(as(ye))switch(ye.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Cr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Nn=function(he,le){var ye=ec.parse(he,le[0]),_e=le[1];return _e&&sa(_e)?{color:ye,stop:_e}:{color:ye,stop:null}},Qn=function(he,le){var ye=he[0],_e=he[he.length-1];ye.stop===null&&(ye.stop=aa),_e.stop===null&&(_e.stop=Tl);for(var De=[],it=0,At=0;At<he.length;At++){var Rt=he[At].stop;if(Rt!==null){var zt=Us(Rt,le);zt>it?De.push(zt):De.push(it),it=zt}else De.push(null)}for(var Ir=null,At=0;At<De.length;At++){var Or=De[At];if(Or===null)Ir===null&&(Ir=At);else if(Ir!==null){for(var Xr=At-Ir,Fn=De[Ir-1],Vi=(Or-Fn)/(Xr+1),wi=1;wi<=Xr;wi++)De[Ir+wi-1]=Vi*wi;Ir=null}}return he.map(function(Ri,js){var os=Ri.color;return{color:os,stop:Math.max(Math.min(1,De[js]/le),0)}})},ki=function(he,le,ye){var _e=le/2,De=ye/2,it=Us(he[0],le)-_e,At=De-Us(he[1],ye);return(Math.atan2(At,it)+Math.PI*2)%(Math.PI*2)},es=function(he,le,ye){var _e=typeof he=="number"?he:ki(he,le,ye),De=Math.abs(le*Math.sin(_e))+Math.abs(ye*Math.cos(_e)),it=le/2,At=ye/2,Rt=De/2,zt=Math.sin(_e-Math.PI/2)*Rt,Ir=Math.cos(_e-Math.PI/2)*Rt;return[De,it-Ir,it+Ir,At-zt,At+zt]},Oi=function(he,le){return Math.sqrt(he*he+le*le)},Zs=function(he,le,ye,_e,De){var it=[[0,0],[0,le],[he,0],[he,le]];return it.reduce(function(At,Rt){var zt=Rt[0],Ir=Rt[1],Or=Oi(ye-zt,_e-Ir);return(De?Or<At.optimumDistance:Or>At.optimumDistance)?{optimumCorner:Rt,optimumDistance:Or}:At},{optimumDistance:De?1/0:-1/0,optimumCorner:null}).optimumCorner},ms=function(he,le,ye,_e,De){var it=0,At=0;switch(he.size){case 0:he.shape===0?it=At=Math.min(Math.abs(le),Math.abs(le-_e),Math.abs(ye),Math.abs(ye-De)):he.shape===1&&(it=Math.min(Math.abs(le),Math.abs(le-_e)),At=Math.min(Math.abs(ye),Math.abs(ye-De)));break;case 2:if(he.shape===0)it=At=Math.min(Oi(le,ye),Oi(le,ye-De),Oi(le-_e,ye),Oi(le-_e,ye-De));else if(he.shape===1){var Rt=Math.min(Math.abs(ye),Math.abs(ye-De))/Math.min(Math.abs(le),Math.abs(le-_e)),zt=Zs(_e,De,le,ye,!0),Ir=zt[0],Or=zt[1];it=Oi(Ir-le,(Or-ye)/Rt),At=Rt*it}break;case 1:he.shape===0?it=At=Math.max(Math.abs(le),Math.abs(le-_e),Math.abs(ye),Math.abs(ye-De)):he.shape===1&&(it=Math.max(Math.abs(le),Math.abs(le-_e)),At=Math.max(Math.abs(ye),Math.abs(ye-De)));break;case 3:if(he.shape===0)it=At=Math.max(Oi(le,ye),Oi(le,ye-De),Oi(le-_e,ye),Oi(le-_e,ye-De));else if(he.shape===1){var Rt=Math.max(Math.abs(ye),Math.abs(ye-De))/Math.max(Math.abs(le),Math.abs(le-_e)),Xr=Zs(_e,De,le,ye,!1),Ir=Xr[0],Or=Xr[1];it=Oi(Ir-le,(Or-ye)/Rt),At=Rt*it}break}return Array.isArray(he.size)&&(it=Us(he.size[0],_e),At=he.size.length===2?Us(he.size[1],De):it),[it,At]},Js=function(he,le){var ye=ll(180),_e=[];return ia(le).forEach(function(De,it){if(it===0){var At=De[0];if(At.type===20&&At.value==="to"){ye=yu(De);return}else if(Ca(At)){ye=Va.parse(he,At);return}}var Rt=Nn(he,De);_e.push(Rt)}),{angle:ye,stops:_e,type:1}},xo=function(he,le){var ye=ll(180),_e=[];return ia(le).forEach(function(De,it){if(it===0){var At=De[0];if(At.type===20&&["top","left","right","bottom"].indexOf(At.value)!==-1){ye=yu(De);return}else if(Ca(At)){ye=(Va.parse(he,At)+ll(270))%ll(360);return}}var Rt=Nn(he,De);_e.push(Rt)}),{angle:ye,stops:_e,type:1}},Za=function(he,le){var ye=ll(180),_e=[],De=1,it=0,At=3,Rt=[];return ia(le).forEach(function(zt,Ir){var Or=zt[0];if(Ir===0){if(as(Or)&&Or.value==="linear"){De=1;return}else if(as(Or)&&Or.value==="radial"){De=2;return}}if(Or.type===18){if(Or.name==="from"){var Xr=ec.parse(he,Or.values[0]);_e.push({stop:aa,color:Xr})}else if(Or.name==="to"){var Xr=ec.parse(he,Or.values[0]);_e.push({stop:Tl,color:Xr})}else if(Or.name==="color-stop"){var Fn=Or.values.filter(Sn);if(Fn.length===2){var Xr=ec.parse(he,Fn[1]),Vi=Fn[0];qs(Vi)&&_e.push({stop:{type:16,number:Vi.number*100,flags:Vi.flags},color:Xr})}}}}),De===1?{angle:(ye+ll(180))%ll(360),stops:_e,type:De}:{size:At,shape:it,stops:_e,position:Rt,type:De}},Ea="closest-side",Wa="farthest-side",Ll="closest-corner",Vs="farthest-corner",cl="circle",pc="ellipse",tn="cover",Oa="contain",gl=function(he,le){var ye=0,_e=3,De=[],it=[];return ia(le).forEach(function(At,Rt){var zt=!0;if(Rt===0){var Ir=!1;zt=At.reduce(function(Xr,Fn){if(Ir)if(as(Fn))switch(Fn.value){case"center":return it.push(ru),Xr;case"top":case"left":return it.push(aa),Xr;case"right":case"bottom":return it.push(Tl),Xr}else(sa(Fn)||As(Fn))&&it.push(Fn);else if(as(Fn))switch(Fn.value){case cl:return ye=0,!1;case pc:return ye=1,!1;case"at":return Ir=!0,!1;case Ea:return _e=0,!1;case tn:case Wa:return _e=1,!1;case Oa:case Ll:return _e=2,!1;case Vs:return _e=3,!1}else if(As(Fn)||sa(Fn))return Array.isArray(_e)||(_e=[]),_e.push(Fn),!1;return Xr},zt)}if(zt){var Or=Nn(he,At);De.push(Or)}}),{size:_e,shape:ye,stops:De,position:it,type:2}},ul=function(he,le){var ye=0,_e=3,De=[],it=[];return ia(le).forEach(function(At,Rt){var zt=!0;if(Rt===0?zt=At.reduce(function(Or,Xr){if(as(Xr))switch(Xr.value){case"center":return it.push(ru),!1;case"top":case"left":return it.push(aa),!1;case"right":case"bottom":return it.push(Tl),!1}else if(sa(Xr)||As(Xr))return it.push(Xr),!1;return Or},zt):Rt===1&&(zt=At.reduce(function(Or,Xr){if(as(Xr))switch(Xr.value){case cl:return ye=0,!1;case pc:return ye=1,!1;case Oa:case Ea:return _e=0,!1;case Wa:return _e=1,!1;case Ll:return _e=2,!1;case tn:case Vs:return _e=3,!1}else if(As(Xr)||sa(Xr))return Array.isArray(_e)||(_e=[]),_e.push(Xr),!1;return Or},zt)),zt){var Ir=Nn(he,At);De.push(Ir)}}),{size:_e,shape:ye,stops:De,position:it,type:2}},Tc=function(he){return he.type===1},tc=function(he){return he.type===2},Il={name:"image",parse:function(he,le){if(le.type===22){var ye={url:le.value,type:0};return he.cache.addImage(le.value),ye}if(le.type===18){var _e=nu[le.name];if(typeof _e>"u")throw new Error('Attempting to parse an unsupported image function "'+le.name+'"');return _e(he,le.values)}throw new Error("Unsupported image type "+le.type)}};function Yh(he){return!(he.type===20&&he.value==="none")&&(he.type!==18||!!nu[he.name])}var nu={"linear-gradient":Js,"-moz-linear-gradient":xo,"-ms-linear-gradient":xo,"-o-linear-gradient":xo,"-webkit-linear-gradient":xo,"radial-gradient":gl,"-moz-radial-gradient":ul,"-ms-radial-gradient":ul,"-o-radial-gradient":ul,"-webkit-radial-gradient":ul,"-webkit-gradient":Za},Nh={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(he,le){if(le.length===0)return[];var ye=le[0];return ye.type===20&&ye.value==="none"?[]:le.filter(function(_e){return Sn(_e)&&Yh(_e)}).map(function(_e){return Il.parse(he,_e)})}},yl={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(he,le){return le.map(function(ye){if(as(ye))switch(ye.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},hs={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(he,le){return ia(le).map(function(ye){return ye.filter(sa)}).map(Ai)}},Bd={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(he,le){return ia(le).map(function(ye){return ye.filter(as).map(function(_e){return _e.value}).join(" ")}).map(ph)}},ph=function(he){switch(he){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},_u;(function(he){he.AUTO="auto",he.CONTAIN="contain",he.COVER="cover"})(_u||(_u={}));var jh={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(he,le){return ia(le).map(function(ye){return ye.filter(Td)})}},Td=function(he){return as(he)||sa(he)},Eo=function(he){return{name:"border-"+he+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},FA=Eo("top"),Xf=Eo("right"),Zf=Eo("bottom"),Jf=Eo("left"),Pf=function(he){return{name:"border-radius-"+he,initialValue:"0 0",prefix:!1,type:1,parse:function(le,ye){return Ai(ye.filter(sa))}}},PA=Pf("top-left"),lp=Pf("top-right"),LA=Pf("bottom-right"),Ul=Pf("bottom-left"),kl=function(he){return{name:"border-"+he+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(le,ye){switch(ye){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},cp=kl("top"),Gp=kl("right"),Xh=kl("bottom"),Zh=kl("left"),Xu=function(he){return{name:"border-"+he+"-width",initialValue:"0",type:0,prefix:!1,parse:function(le,ye){return vo(ye)?ye.number:0}}},ku=Xu("top"),Jh=Xu("right"),Lf=Xu("bottom"),ef=Xu("left"),ed={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Uh={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(he,le){switch(le){case"rtl":return 1;case"ltr":default:return 0}}},zh={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(he,le){return le.filter(as).reduce(function(ye,_e){return ye|up(_e.value)},0)}},up=function(he){switch(he){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ah={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(he,le){switch(le){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},iu={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(he,le){return le.type===20&&le.value==="normal"?0:le.type===17||le.type===15?le.number:0}},Ic;(function(he){he.NORMAL="normal",he.STRICT="strict"})(Ic||(Ic={}));var kA={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(he,le){switch(le){case"strict":return Ic.STRICT;case"normal":default:return Ic.NORMAL}}},td={name:"line-height",initialValue:"normal",prefix:!1,type:4},su=function(he,le){return as(he)&&he.value==="normal"?1.2*le:he.type===17?le*he.number:sa(he)?Us(he,le):le},rc={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(he,le){return le.type===20&&le.value==="none"?null:Il.parse(he,le)}},Ot={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(he,le){switch(le){case"inside":return 0;case"outside":default:return 1}}},mh={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(he,le){switch(le){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},tf=function(he){return{name:"margin-"+he,initialValue:"0",prefix:!1,type:4}},ou=tf("top"),Bo=tf("right"),hp=tf("bottom"),Wp=tf("left"),kf={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(he,le){return le.filter(as).map(function(ye){switch(ye.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Ou={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(he,le){switch(le){case"break-word":return"break-word";case"normal":default:return"normal"}}},au=function(he){return{name:"padding-"+he,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},fp=au("top"),rd=au("right"),nd=au("bottom"),dp=au("left"),Cl={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(he,le){switch(le){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},$p={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(he,le){switch(le){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},pp={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(he,le){return le.length===1&&Vo(le[0],"none")?[]:ia(le).map(function(ye){for(var _e={color:Kt.TRANSPARENT,offsetX:aa,offsetY:aa,blur:aa},De=0,it=0;it<ye.length;it++){var At=ye[it];As(At)?(De===0?_e.offsetX=At:De===1?_e.offsetY=At:_e.blur=At,De++):_e.color=ec.parse(he,At)}return _e})}},Id={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(he,le){switch(le){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ap={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(he,le){if(le.type===20&&le.value==="none")return null;if(le.type===18){var ye=gp[le.name];if(typeof ye>"u")throw new Error('Attempting to parse an unsupported transform function "'+le.name+'"');return ye(le.values)}return null}},mp=function(he){var le=he.filter(function(ye){return ye.type===17}).map(function(ye){return ye.number});return le.length===6?le:null},lu=function(he){var le=he.filter(function(zt){return zt.type===17}).map(function(zt){return zt.number}),ye=le[0],_e=le[1];le[2],le[3];var De=le[4],it=le[5];le[6],le[7],le[8],le[9],le[10],le[11];var At=le[12],Rt=le[13];return le[14],le[15],le.length===16?[ye,_e,De,it,At,Rt]:null},gp={matrix:mp,matrix3d:lu},Md={type:16,number:50,flags:vn},Fd=[Md,Md],oe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(he,le){var ye=le.filter(sa);return ye.length!==2?Fd:[ye[0],ye[1]]}},be={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(he,le){switch(le){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ke;(function(he){he.NORMAL="normal",he.BREAK_ALL="break-all",he.KEEP_ALL="keep-all"})(ke||(ke={}));for(var rt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(he,le){switch(le){case"break-all":return ke.BREAK_ALL;case"keep-all":return ke.KEEP_ALL;case"normal":default:return ke.NORMAL}}},gt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(he,le){if(le.type===20)return{auto:!0,order:0};if(qs(le))return{auto:!1,order:le.number};throw new Error("Invalid z-index number parsed")}},xt={name:"time",parse:function(he,le){if(le.type===15)switch(le.unit.toLowerCase()){case"s":return 1e3*le.number;case"ms":return le.number}throw new Error("Unsupported time type")}},Bt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(he,le){return qs(le)?le.number:1}},Lt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Wt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(he,le){return le.filter(as).map(function(ye){switch(ye.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(ye){return ye!==0})}},ar={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(he,le){var ye=[],_e=[];return le.forEach(function(De){switch(De.type){case 20:case 0:ye.push(De.value);break;case 17:ye.push(De.number.toString());break;case 4:_e.push(ye.join(" ")),ye.length=0;break}}),ye.length&&_e.push(ye.join(" ")),_e.map(function(De){return De.indexOf(" ")===-1?De:"'"+De+"'"})}},jr={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},un={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(he,le){if(qs(le))return le.number;if(as(le))switch(le.value){case"bold":return 700;case"normal":default:return 400}return 400}},hn={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(he,le){return le.filter(as).map(function(ye){return ye.value})}},en={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(he,le){switch(le){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},jn=function(he,le){return(he&le)!==0},Dn={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(he,le){if(le.length===0)return[];var ye=le[0];return ye.type===20&&ye.value==="none"?[]:le}},Nr={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(he,le){if(le.length===0)return null;var ye=le[0];if(ye.type===20&&ye.value==="none")return null;for(var _e=[],De=le.filter(Li),it=0;it<De.length;it++){var At=De[it],Rt=De[it+1];if(At.type===20){var zt=Rt&&qs(Rt)?Rt.number:1;_e.push({counter:At.value,increment:zt})}}return _e}},qr={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(he,le){if(le.length===0)return[];for(var ye=[],_e=le.filter(Li),De=0;De<_e.length;De++){var it=_e[De],At=_e[De+1];if(as(it)&&it.value!=="none"){var Rt=At&&qs(At)?At.number:0;ye.push({counter:it.value,reset:Rt})}}return ye}},ri={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(he,le){return le.filter(vo).map(function(ye){return xt.parse(he,ye)})}},ci={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(he,le){if(le.length===0)return null;var ye=le[0];if(ye.type===20&&ye.value==="none")return null;var _e=[],De=le.filter(Qo);if(De.length%2!==0)return null;for(var it=0;it<De.length;it+=2){var At=De[it].value,Rt=De[it+1].value;_e.push({open:At,close:Rt})}return _e}},ni=function(he,le,ye){if(!he)return"";var _e=he[Math.min(le,he.length-1)];return _e?ye?_e.open:_e.close:""},Ni={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(he,le){return le.length===1&&Vo(le[0],"none")?[]:ia(le).map(function(ye){for(var _e={color:255,offsetX:aa,offsetY:aa,blur:aa,spread:aa,inset:!1},De=0,it=0;it<ye.length;it++){var At=ye[it];Vo(At,"inset")?_e.inset=!0:As(At)?(De===0?_e.offsetX=At:De===1?_e.offsetY=At:De===2?_e.blur=At:_e.spread=At,De++):_e.color=ec.parse(he,At)}return _e})}},Fi={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(he,le){var ye=[0,1,2],_e=[];return le.filter(as).forEach(function(De){switch(De.value){case"stroke":_e.push(1);break;case"fill":_e.push(0);break;case"markers":_e.push(2);break}}),ye.forEach(function(De){_e.indexOf(De)===-1&&_e.push(De)}),_e}},Ss={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Pi={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(he,le){return vo(le)?le.number:0}},pa=function(){function he(le,ye){var _e,De;this.animationDuration=fi(le,ri,ye.animationDuration),this.backgroundClip=fi(le,Pr,ye.backgroundClip),this.backgroundColor=fi(le,Cr,ye.backgroundColor),this.backgroundImage=fi(le,Nh,ye.backgroundImage),this.backgroundOrigin=fi(le,yl,ye.backgroundOrigin),this.backgroundPosition=fi(le,hs,ye.backgroundPosition),this.backgroundRepeat=fi(le,Bd,ye.backgroundRepeat),this.backgroundSize=fi(le,jh,ye.backgroundSize),this.borderTopColor=fi(le,FA,ye.borderTopColor),this.borderRightColor=fi(le,Xf,ye.borderRightColor),this.borderBottomColor=fi(le,Zf,ye.borderBottomColor),this.borderLeftColor=fi(le,Jf,ye.borderLeftColor),this.borderTopLeftRadius=fi(le,PA,ye.borderTopLeftRadius),this.borderTopRightRadius=fi(le,lp,ye.borderTopRightRadius),this.borderBottomRightRadius=fi(le,LA,ye.borderBottomRightRadius),this.borderBottomLeftRadius=fi(le,Ul,ye.borderBottomLeftRadius),this.borderTopStyle=fi(le,cp,ye.borderTopStyle),this.borderRightStyle=fi(le,Gp,ye.borderRightStyle),this.borderBottomStyle=fi(le,Xh,ye.borderBottomStyle),this.borderLeftStyle=fi(le,Zh,ye.borderLeftStyle),this.borderTopWidth=fi(le,ku,ye.borderTopWidth),this.borderRightWidth=fi(le,Jh,ye.borderRightWidth),this.borderBottomWidth=fi(le,Lf,ye.borderBottomWidth),this.borderLeftWidth=fi(le,ef,ye.borderLeftWidth),this.boxShadow=fi(le,Ni,ye.boxShadow),this.color=fi(le,ed,ye.color),this.direction=fi(le,Uh,ye.direction),this.display=fi(le,zh,ye.display),this.float=fi(le,Ah,ye.cssFloat),this.fontFamily=fi(le,ar,ye.fontFamily),this.fontSize=fi(le,jr,ye.fontSize),this.fontStyle=fi(le,en,ye.fontStyle),this.fontVariant=fi(le,hn,ye.fontVariant),this.fontWeight=fi(le,un,ye.fontWeight),this.letterSpacing=fi(le,iu,ye.letterSpacing),this.lineBreak=fi(le,kA,ye.lineBreak),this.lineHeight=fi(le,td,ye.lineHeight),this.listStyleImage=fi(le,rc,ye.listStyleImage),this.listStylePosition=fi(le,Ot,ye.listStylePosition),this.listStyleType=fi(le,mh,ye.listStyleType),this.marginTop=fi(le,ou,ye.marginTop),this.marginRight=fi(le,Bo,ye.marginRight),this.marginBottom=fi(le,hp,ye.marginBottom),this.marginLeft=fi(le,Wp,ye.marginLeft),this.opacity=fi(le,Bt,ye.opacity);var it=fi(le,kf,ye.overflow);this.overflowX=it[0],this.overflowY=it[it.length>1?1:0],this.overflowWrap=fi(le,Ou,ye.overflowWrap),this.paddingTop=fi(le,fp,ye.paddingTop),this.paddingRight=fi(le,rd,ye.paddingRight),this.paddingBottom=fi(le,nd,ye.paddingBottom),this.paddingLeft=fi(le,dp,ye.paddingLeft),this.paintOrder=fi(le,Fi,ye.paintOrder),this.position=fi(le,$p,ye.position),this.textAlign=fi(le,Cl,ye.textAlign),this.textDecorationColor=fi(le,Lt,(_e=ye.textDecorationColor)!==null&&_e!==void 0?_e:ye.color),this.textDecorationLine=fi(le,Wt,(De=ye.textDecorationLine)!==null&&De!==void 0?De:ye.textDecoration),this.textShadow=fi(le,pp,ye.textShadow),this.textTransform=fi(le,Id,ye.textTransform),this.transform=fi(le,Ap,ye.transform),this.transformOrigin=fi(le,oe,ye.transformOrigin),this.visibility=fi(le,be,ye.visibility),this.webkitTextStrokeColor=fi(le,Ss,ye.webkitTextStrokeColor),this.webkitTextStrokeWidth=fi(le,Pi,ye.webkitTextStrokeWidth),this.wordBreak=fi(le,rt,ye.wordBreak),this.zIndex=fi(le,gt,ye.zIndex)}return he.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},he.prototype.isTransparent=function(){return Ga(this.backgroundColor)},he.prototype.isTransformed=function(){return this.transform!==null},he.prototype.isPositioned=function(){return this.position!==0},he.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},he.prototype.isFloating=function(){return this.float!==0},he.prototype.isInlineLevel=function(){return jn(this.display,4)||jn(this.display,33554432)||jn(this.display,268435456)||jn(this.display,536870912)||jn(this.display,67108864)||jn(this.display,134217728)},he}(),la=function(){function he(le,ye){this.content=fi(le,Dn,ye.content),this.quotes=fi(le,ci,ye.quotes)}return he}(),Fo=function(){function he(le,ye){this.counterIncrement=fi(le,Nr,ye.counterIncrement),this.counterReset=fi(le,qr,ye.counterReset)}return he}(),fi=function(he,le,ye){var _e=new Ns,De=ye!==null&&typeof ye<"u"?ye.toString():le.initialValue;_e.write(De);var it=new Ws(_e.read());switch(le.type){case 2:var At=it.parseComponentValue();return le.parse(he,as(At)?At.value:le.initialValue);case 0:return le.parse(he,it.parseComponentValue());case 1:return le.parse(he,it.parseComponentValues());case 4:return it.parseComponentValue();case 3:switch(le.format){case"angle":return Va.parse(he,it.parseComponentValue());case"color":return ec.parse(he,it.parseComponentValue());case"image":return Il.parse(he,it.parseComponentValue());case"length":var Rt=it.parseComponentValue();return As(Rt)?Rt:aa;case"length-percentage":var zt=it.parseComponentValue();return sa(zt)?zt:aa;case"time":return xt.parse(he,it.parseComponentValue())}break}},Go="data-html2canvas-debug",Jo=function(he){var le=he.getAttribute(Go);switch(le){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ho=function(he,le){var ye=Jo(he);return ye===1||le===ye},ca=function(){function he(le,ye){if(this.context=le,this.textNodes=[],this.elements=[],this.flags=0,ho(ye,3))debugger;this.styles=new pa(le,window.getComputedStyle(ye,null)),Lo(ye)&&(this.styles.animationDuration.some(function(_e){return _e>0})&&(ye.style.animationDuration="0s"),this.styles.transform!==null&&(ye.style.transform="none")),this.bounds=f(this.context,ye),ho(ye,4)&&(this.flags|=16)}return he}(),Qc="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wo=typeof Uint8Array>"u"?[]:new Uint8Array(256),$o=0;$o<Da.length;$o++)Wo[Da.charCodeAt($o)]=$o;for(var zl=function(he){var le=he.length*.75,ye=he.length,_e,De=0,it,At,Rt,zt;he[he.length-1]==="="&&(le--,he[he.length-2]==="="&&le--);var Ir=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(le):new Array(le),Or=Array.isArray(Ir)?Ir:new Uint8Array(Ir);for(_e=0;_e<ye;_e+=4)it=Wo[he.charCodeAt(_e)],At=Wo[he.charCodeAt(_e+1)],Rt=Wo[he.charCodeAt(_e+2)],zt=Wo[he.charCodeAt(_e+3)],Or[De++]=it<<2|At>>4,Or[De++]=(At&15)<<4|Rt>>2,Or[De++]=(Rt&3)<<6|zt&63;return Ir},hl=function(he){for(var le=he.length,ye=[],_e=0;_e<le;_e+=2)ye.push(he[_e+1]<<8|he[_e]);return ye},$a=function(he){for(var le=he.length,ye=[],_e=0;_e<le;_e+=4)ye.push(he[_e+3]<<24|he[_e+2]<<16|he[_e+1]<<8|he[_e]);return ye},ja=5,Ra=11,$l=2,Ja=Ra-ja,Ml=65536>>ja,Zu=1<<ja,Mc=Zu-1,gh=1024>>ja,Xn=Ml+gh,fl=Xn,Ju=32,eh=fl+Ju,Fc=65536>>Ra,Mi=1<<Ja,th=Mi-1,Pd=function(he,le,ye){return he.slice?he.slice(le,ye):new Uint16Array(Array.prototype.slice.call(he,le,ye))},rh=function(he,le,ye){return he.slice?he.slice(le,ye):new Uint32Array(Array.prototype.slice.call(he,le,ye))},nh=function(he,le){var ye=zl(he),_e=Array.isArray(ye)?$a(ye):new Uint32Array(ye),De=Array.isArray(ye)?hl(ye):new Uint16Array(ye),it=24,At=Pd(De,it/2,_e[4]/2),Rt=_e[5]===2?Pd(De,(it+_e[4])/2):rh(_e,Math.ceil((it+_e[4])/4));return new yh(_e[0],_e[1],_e[2],_e[3],At,Rt)},yh=function(){function he(le,ye,_e,De,it,At){this.initialValue=le,this.errorValue=ye,this.highStart=_e,this.highValueIndex=De,this.index=it,this.data=At}return he.prototype.get=function(le){var ye;if(le>=0){if(le<55296||le>56319&&le<=65535)return ye=this.index[le>>ja],ye=(ye<<$l)+(le&Mc),this.data[ye];if(le<=65535)return ye=this.index[Ml+(le-55296>>ja)],ye=(ye<<$l)+(le&Mc),this.data[ye];if(le<this.highStart)return ye=eh-Fc+(le>>Ra),ye=this.index[ye],ye+=le>>ja&th,ye=this.index[ye],ye=(ye<<$l)+(le&Mc),this.data[ye];if(le<=1114111)return this.data[this.highValueIndex]}return this.errorValue},he}(),yp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Of=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ld=0;Ld<yp.length;Ld++)Of[yp.charCodeAt(Ld)]=Ld;var kd=1,Hl=2,rf=3,El=4,_h=5,Kp=7,Df=8,Vc=9,Od=10,_p=11,Du=12,Ao=13,vh=14,Rf=15,nf=function(he){for(var le=[],ye=0,_e=he.length;ye<_e;){var De=he.charCodeAt(ye++);if(De>=55296&&De<=56319&&ye<_e){var it=he.charCodeAt(ye++);(it&64512)===56320?le.push(((De&1023)<<10)+(it&1023)+65536):(le.push(De),ye--)}else le.push(De)}return le},id=function(){for(var he=[],le=0;le<arguments.length;le++)he[le]=arguments[le];if(String.fromCodePoint)return String.fromCodePoint.apply(String,he);var ye=he.length;if(!ye)return"";for(var _e=[],De=-1,it="";++De<ye;){var At=he[De];At<=65535?_e.push(At):(At-=65536,_e.push((At>>10)+55296,At%1024+56320)),(De+1===ye||_e.length>16384)&&(it+=String.fromCharCode.apply(String,_e),_e.length=0)}return it},sd=nh(Qc),Bl="Ã",Ru="Ã·",eo=function(he){return sd.get(he)},mn=function(he,le,ye){var _e=ye-2,De=le[_e],it=le[ye-1],At=le[ye];if(it===Hl&&At===rf)return Bl;if(it===Hl||it===rf||it===El||At===Hl||At===rf||At===El)return Ru;if(it===Df&&[Df,Vc,_p,Du].indexOf(At)!==-1||(it===_p||it===Vc)&&(At===Vc||At===Od)||(it===Du||it===Od)&&At===Od||At===Ao||At===_h||At===Kp||it===kd)return Bl;if(it===Ao&&At===vh){for(;De===_h;)De=le[--_e];if(De===vh)return Bl}if(it===Rf&&At===Rf){for(var Rt=0;De===Rf;)Rt++,De=le[--_e];if(Rt%2===0)return Bl}return Ru},Jn=function(he){var le=nf(he),ye=le.length,_e=0,De=0,it=le.map(eo);return{next:function(){if(_e>=ye)return{done:!0,value:null};for(var At=Bl;_e<ye&&(At=mn(le,it,++_e))===Bl;);if(At!==Bl||_e===ye){var Rt=id.apply(null,le.slice(De,_e));return De=_e,{value:Rt,done:!1}}return{done:!0,value:null}}}},Nu=function(he){for(var le=Jn(he),ye=[],_e;!(_e=le.next()).done;)_e.value&&ye.push(_e.value.slice());return ye},Po=function(he){var le=123;if(he.createRange){var ye=he.createRange();if(ye.getBoundingClientRect){var _e=he.createElement("boundtest");_e.style.height=le+"px",_e.style.display="block",he.body.appendChild(_e),ye.selectNode(_e);var De=ye.getBoundingClientRect(),it=Math.round(De.height);if(he.body.removeChild(_e),it===le)return!0}}return!1},Ar=function(he){var le=he.createElement("boundtest");le.style.width="50px",le.style.display="block",le.style.fontSize="12px",le.style.letterSpacing="0px",le.style.wordSpacing="0px",he.body.appendChild(le);var ye=he.createRange();le.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var _e=le.firstChild,De=_(_e.data).map(function(zt){return g(zt)}),it=0,At={},Rt=De.every(function(zt,Ir){ye.setStart(_e,it),ye.setEnd(_e,it+zt.length);var Or=ye.getBoundingClientRect();it+=zt.length;var Xr=Or.x>At.x||Or.y>At.y;return At=Or,Ir===0?!0:Xr});return he.body.removeChild(le),Rt},qp=function(){return typeof new Image().crossOrigin<"u"},Pc=function(){return typeof new XMLHttpRequest().responseType=="string"},od=function(he){var le=new Image,ye=he.createElement("canvas"),_e=ye.getContext("2d");if(!_e)return!1;le.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{_e.drawImage(le,0,0),ye.toDataURL()}catch{return!1}return!0},Gc=function(he){return he[0]===0&&he[1]===255&&he[2]===0&&he[3]===255},Dd=function(he){var le=he.createElement("canvas"),ye=100;le.width=ye,le.height=ye;var _e=le.getContext("2d");if(!_e)return Promise.reject(!1);_e.fillStyle="rgb(0, 255, 0)",_e.fillRect(0,0,ye,ye);var De=new Image,it=le.toDataURL();De.src=it;var At=sf(ye,ye,0,0,De);return _e.fillStyle="red",_e.fillRect(0,0,ye,ye),of(At).then(function(Rt){_e.drawImage(Rt,0,0);var zt=_e.getImageData(0,0,ye,ye).data;_e.fillStyle="red",_e.fillRect(0,0,ye,ye);var Ir=he.createElement("div");return Ir.style.backgroundImage="url("+it+")",Ir.style.height=ye+"px",Gc(zt)?of(sf(ye,ye,0,0,Ir)):Promise.reject(!1)}).then(function(Rt){return _e.drawImage(Rt,0,0),Gc(_e.getImageData(0,0,ye,ye).data)}).catch(function(){return!1})},sf=function(he,le,ye,_e,De){var it="http://www.w3.org/2000/svg",At=document.createElementNS(it,"svg"),Rt=document.createElementNS(it,"foreignObject");return At.setAttributeNS(null,"width",he.toString()),At.setAttributeNS(null,"height",le.toString()),Rt.setAttributeNS(null,"width","100%"),Rt.setAttributeNS(null,"height","100%"),Rt.setAttributeNS(null,"x",ye.toString()),Rt.setAttributeNS(null,"y",_e.toString()),Rt.setAttributeNS(null,"externalResourcesRequired","true"),At.appendChild(Rt),Rt.appendChild(De),At},of=function(he){return new Promise(function(le,ye){var _e=new Image;_e.onload=function(){return le(_e)},_e.onerror=ye,_e.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(he))})},To={get SUPPORT_RANGE_BOUNDS(){var he=Po(document);return Object.defineProperty(To,"SUPPORT_RANGE_BOUNDS",{value:he}),he},get SUPPORT_WORD_BREAKING(){var he=To.SUPPORT_RANGE_BOUNDS&&Ar(document);return Object.defineProperty(To,"SUPPORT_WORD_BREAKING",{value:he}),he},get SUPPORT_SVG_DRAWING(){var he=od(document);return Object.defineProperty(To,"SUPPORT_SVG_DRAWING",{value:he}),he},get SUPPORT_FOREIGNOBJECT_DRAWING(){var he=typeof Array.from=="function"&&typeof window.fetch=="function"?Dd(document):Promise.resolve(!1);return Object.defineProperty(To,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:he}),he},get SUPPORT_CORS_IMAGES(){var he=qp();return Object.defineProperty(To,"SUPPORT_CORS_IMAGES",{value:he}),he},get SUPPORT_RESPONSE_TYPE(){var he=Pc();return Object.defineProperty(To,"SUPPORT_RESPONSE_TYPE",{value:he}),he},get SUPPORT_CORS_XHR(){var he="withCredentials"in new XMLHttpRequest;return Object.defineProperty(To,"SUPPORT_CORS_XHR",{value:he}),he},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var he=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(To,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:he}),he}},ju=function(){function he(le,ye){this.text=le,this.bounds=ye}return he}(),Hh=function(he,le,ye,_e){var De=Uu(le,ye),it=[],At=0;return De.forEach(function(Rt){if(ye.textDecorationLine.length||Rt.trim().length>0)if(To.SUPPORT_RANGE_BOUNDS){var zt=bh(_e,At,Rt.length).getClientRects();if(zt.length>1){var Ir=vu(Rt),Or=0;Ir.forEach(function(Fn){it.push(new ju(Fn,h.fromDOMRectList(he,bh(_e,Or+At,Fn.length).getClientRects()))),Or+=Fn.length})}else it.push(new ju(Rt,h.fromDOMRectList(he,zt)))}else{var Xr=_e.splitText(Rt.length);it.push(new ju(Rt,Nf(he,_e))),_e=Xr}else To.SUPPORT_RANGE_BOUNDS||(_e=_e.splitText(Rt.length));At+=Rt.length}),it},Nf=function(he,le){var ye=le.ownerDocument;if(ye){var _e=ye.createElement("html2canvaswrapper");_e.appendChild(le.cloneNode(!0));var De=le.parentNode;if(De){De.replaceChild(_e,le);var it=f(he,_e);return _e.firstChild&&De.replaceChild(_e.firstChild,_e),it}}return h.EMPTY},bh=function(he,le,ye){var _e=he.ownerDocument;if(!_e)throw new Error("Node has no owner document");var De=_e.createRange();return De.setStart(he,le),De.setEnd(he,le+ye),De},vu=function(he){if(To.SUPPORT_NATIVE_TEXT_SEGMENTATION){var le=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(le.segment(he)).map(function(ye){return ye.segment})}return Nu(he)},ih=function(he,le){if(To.SUPPORT_NATIVE_TEXT_SEGMENTATION){var ye=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(ye.segment(he)).map(function(_e){return _e.segment})}return wh(he,le)},Uu=function(he,le){return le.letterSpacing!==0?vu(he):ih(he,le)},xh=[32,160,4961,65792,65793,4153,4241],wh=function(he,le){for(var ye=Zt(he,{lineBreak:le.lineBreak,wordBreak:le.overflowWrap==="break-word"?"break-word":le.wordBreak}),_e=[],De,it=function(){if(De.value){var At=De.value.slice(),Rt=_(At),zt="";Rt.forEach(function(Ir){xh.indexOf(Ir)===-1?zt+=g(Ir):(zt.length&&_e.push(zt),_e.push(g(Ir)),zt="")}),zt.length&&_e.push(zt)}};!(De=ye.next()).done;)it();return _e},Sh=function(){function he(le,ye,_e){this.text=bm(ye.data,_e.textTransform),this.textBounds=Hh(le,this.text,_e,ye)}return he}(),bm=function(he,le){switch(le){case 1:return he.toLowerCase();case 3:return he.replace(el,vp);case 2:return he.toUpperCase();default:return he}},el=/(^|\s|:|-|\(|\))([a-z])/g,vp=function(he,le,ye){return he.length>0?le+ye.toUpperCase():he},Rd=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;return De.src=_e.currentSrc||_e.src,De.intrinsicWidth=_e.naturalWidth,De.intrinsicHeight=_e.naturalHeight,De.context.cache.addImage(De.src),De}return le}(ca),No=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;return De.canvas=_e,De.intrinsicWidth=_e.width,De.intrinsicHeight=_e.height,De}return le}(ca),Gs=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this,it=new XMLSerializer,At=f(ye,_e);return _e.setAttribute("width",At.width+"px"),_e.setAttribute("height",At.height+"px"),De.svg="data:image/svg+xml,"+encodeURIComponent(it.serializeToString(_e)),De.intrinsicWidth=_e.width.baseVal.value,De.intrinsicHeight=_e.height.baseVal.value,De.context.cache.addImage(De.svg),De}return le}(ca),OA=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;return De.value=_e.value,De}return le}(ca),Wc=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;return De.start=_e.start,De.reversed=typeof _e.reversed=="boolean"&&_e.reversed===!0,De}return le}(ca),Nd=[{type:15,flags:0,unit:"px",number:3}],jd=[{type:16,flags:0,number:50}],Ud=function(he){return he.width>he.height?new h(he.left+(he.width-he.height)/2,he.top,he.height,he.height):he.width<he.height?new h(he.left,he.top+(he.height-he.width)/2,he.width,he.width):he},DA=function(he){var le=he.type===sh?new Array(he.value.length+1).join("â¢"):he.value;return le.length===0?he.placeholder||"":le},zd="checkbox",nc="radio",sh="password",zu=707406591,af=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;switch(De.type=_e.type.toLowerCase(),De.checked=_e.checked,De.value=DA(_e),(De.type===zd||De.type===nc)&&(De.styles.backgroundColor=3739148031,De.styles.borderTopColor=De.styles.borderRightColor=De.styles.borderBottomColor=De.styles.borderLeftColor=2779096575,De.styles.borderTopWidth=De.styles.borderRightWidth=De.styles.borderBottomWidth=De.styles.borderLeftWidth=1,De.styles.borderTopStyle=De.styles.borderRightStyle=De.styles.borderBottomStyle=De.styles.borderLeftStyle=1,De.styles.backgroundClip=[0],De.styles.backgroundOrigin=[0],De.bounds=Ud(De.bounds)),De.type){case zd:De.styles.borderTopRightRadius=De.styles.borderTopLeftRadius=De.styles.borderBottomRightRadius=De.styles.borderBottomLeftRadius=Nd;break;case nc:De.styles.borderTopRightRadius=De.styles.borderTopLeftRadius=De.styles.borderBottomRightRadius=De.styles.borderBottomLeftRadius=jd;break}return De}return le}(ca),lf=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this,it=_e.options[_e.selectedIndex||0];return De.value=it&&it.text||"",De}return le}(ca),cf=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;return De.value=_e.value,De}return le}(ca),bp=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;De.src=_e.src,De.width=parseInt(_e.width,10)||0,De.height=parseInt(_e.height,10)||0,De.backgroundColor=De.styles.backgroundColor;try{if(_e.contentWindow&&_e.contentWindow.document&&_e.contentWindow.document.documentElement){De.tree=cu(ye,_e.contentWindow.document.documentElement);var it=_e.contentWindow.document.documentElement?fn(ye,getComputedStyle(_e.contentWindow.document.documentElement).backgroundColor):Kt.TRANSPARENT,At=_e.contentWindow.document.body?fn(ye,getComputedStyle(_e.contentWindow.document.body).backgroundColor):Kt.TRANSPARENT;De.backgroundColor=Ga(it)?Ga(At)?De.styles.backgroundColor:At:it}}catch{}return De}return le}(ca),Hd=["OL","UL","MENU"],Qh=function(he,le,ye,_e){for(var De=le.firstChild,it=void 0;De;De=it)if(it=De.nextSibling,ad(De)&&De.data.trim().length>0)ye.textNodes.push(new Sh(he,De,ye.styles));else if(Ch(De))if(jA(De)&&De.assignedNodes)De.assignedNodes().forEach(function(Rt){return Qh(he,Rt,ye,_e)});else{var At=Yp(he,De);At.styles.isVisible()&&(Qd(De,At,_e)?At.flags|=4:RA(At.styles)&&(At.flags|=2),Hd.indexOf(De.tagName)!==-1&&(At.flags|=8),ye.elements.push(At),De.slot,De.shadowRoot?Qh(he,De.shadowRoot,At,_e):!cd(De)&&!Vd(De)&&!Cp(De)&&Qh(he,De,At,_e))}},Yp=function(he,le){return Zp(le)?new Rd(he,le):ff(le)?new No(he,le):Vd(le)?new Gs(he,le):xp(le)?new OA(he,le):Xp(le)?new Wc(he,le):hf(le)?new af(he,le):Cp(le)?new lf(he,le):cd(le)?new cf(he,le):Sp(le)?new bp(he,le):new ca(he,le)},cu=function(he,le){var ye=Yp(he,le);return ye.flags|=4,Qh(he,le,ye,ye),ye},Qd=function(he,le,ye){return le.styles.isPositionedWithZIndex()||le.styles.opacity<1||le.styles.isTransformed()||ld(he)&&ye.styles.isTransparent()},RA=function(he){return he.isPositioned()||he.isFloating()},ad=function(he){return he.nodeType===Node.TEXT_NODE},Ch=function(he){return he.nodeType===Node.ELEMENT_NODE},Lo=function(he){return Ch(he)&&typeof he.style<"u"&&!uf(he)},uf=function(he){return typeof he.className=="object"},xp=function(he){return he.tagName==="LI"},Xp=function(he){return he.tagName==="OL"},hf=function(he){return he.tagName==="INPUT"},xm=function(he){return he.tagName==="HTML"},Vd=function(he){return he.tagName==="svg"},ld=function(he){return he.tagName==="BODY"},ff=function(he){return he.tagName==="CANVAS"},wp=function(he){return he.tagName==="VIDEO"},Zp=function(he){return he.tagName==="IMG"},Sp=function(he){return he.tagName==="IFRAME"},bu=function(he){return he.tagName==="STYLE"},NA=function(he){return he.tagName==="SCRIPT"},cd=function(he){return he.tagName==="TEXTAREA"},Cp=function(he){return he.tagName==="SELECT"},jA=function(he){return he.tagName==="SLOT"},Jp=function(he){return he.tagName.indexOf("-")>0},eA=function(){function he(){this.counters={}}return he.prototype.getCounterValue=function(le){var ye=this.counters[le];return ye&&ye.length?ye[ye.length-1]:1},he.prototype.getCounterValues=function(le){var ye=this.counters[le];return ye||[]},he.prototype.pop=function(le){var ye=this;le.forEach(function(_e){return ye.counters[_e].pop()})},he.prototype.parse=function(le){var ye=this,_e=le.counterIncrement,De=le.counterReset,it=!0;_e!==null&&_e.forEach(function(Rt){var zt=ye.counters[Rt.counter];zt&&Rt.increment!==0&&(it=!1,zt.length||zt.push(1),zt[Math.max(0,zt.length-1)]+=Rt.increment)});var At=[];return it&&De.forEach(function(Rt){var zt=ye.counters[Rt.counter];At.push(Rt.counter),zt||(zt=ye.counters[Rt.counter]=[]),zt.push(Rt.reset)}),At},he}(),Eh={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},tA={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Ô¿","Ô¾","Ô½","Ô¼","Ô»","Ôº","Ô¹","Ô¸","Ô·","Ô¶","Ôµ","Ô´","Ô³","Ô²","Ô±"]},rA={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["××³","××³","××³","××³","××³","××³","××³","××³","××³","××³","×ª","×©","×¨","×§","×¦","×¤","×¢","×¡","× ","×","×","×","××","××","××","××","××","×","×","×","×","×","×","×","×","×","×"]},UA={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["áµ","á°","á¯","á´","á®","á­","á¬","á«","áª","á©","á¨","á§","á¦","á¥","á¤","á³","á¢","á¡","á ","á","á","á","á²","á","á","á","á","á","á","á±","á","á","á","á","á","á","á"]},Bh=function(he,le,ye,_e,De,it){return he<le||he>ye?Uf(he,De,it.length>0):_e.integers.reduce(function(At,Rt,zt){for(;he>=Rt;)he-=Rt,At+=_e.values[zt];return At},"")+it},ud=function(he,le,ye,_e){var De="";do ye||he--,De=_e(he)+De,he/=le;while(he*le>=le);return De},ls=function(he,le,ye,_e,De){var it=ye-le+1;return(he<0?"-":"")+(ud(Math.abs(he),it,_e,function(At){return g(Math.floor(At%it)+le)})+De)},Vh=function(he,le,ye){ye===void 0&&(ye=". ");var _e=le.length;return ud(Math.abs(he),_e,!1,function(De){return le[Math.floor(De%_e)]})+ye},jf=1,xu=2,hd=4,Gd=8,wo=function(he,le,ye,_e,De,it){if(he<-9999||he>9999)return Uf(he,4,De.length>0);var At=Math.abs(he),Rt=De;if(At===0)return le[0]+Rt;for(var zt=0;At>0&&zt<=4;zt++){var Ir=At%10;Ir===0&&jn(it,jf)&&Rt!==""?Rt=le[Ir]+Rt:Ir>1||Ir===1&&zt===0||Ir===1&&zt===1&&jn(it,xu)||Ir===1&&zt===1&&jn(it,hd)&&he>100||Ir===1&&zt>1&&jn(it,Gd)?Rt=le[Ir]+(zt>0?ye[zt-1]:"")+Rt:Ir===1&&zt>0&&(Rt=ye[zt-1]+Rt),At=Math.floor(At/10)}return(he<0?_e:"")+Rt},Lc="åç¾åè¬",ig="æ¾ä½°ä»è¬",zA="ãã¤ãã¹",HA="ë§ì´ëì¤",Uf=function(he,le,ye){var _e=ye?". ":"",De=ye?"ã":"",it=ye?", ":"",At=ye?" ":"";switch(le){case 0:return"â¢"+At;case 1:return"â¦"+At;case 2:return"â¾"+At;case 5:var Rt=ls(he,48,57,!0,_e);return Rt.length<4?"0"+Rt:Rt;case 4:return Vh(he,"ãä¸äºä¸åäºå­ä¸å«ä¹",De);case 6:return Bh(he,1,3999,Eh,3,_e).toLowerCase();case 7:return Bh(he,1,3999,Eh,3,_e);case 8:return ls(he,945,969,!1,_e);case 9:return ls(he,97,122,!1,_e);case 10:return ls(he,65,90,!1,_e);case 11:return ls(he,1632,1641,!0,_e);case 12:case 49:return Bh(he,1,9999,tA,3,_e);case 35:return Bh(he,1,9999,tA,3,_e).toLowerCase();case 13:return ls(he,2534,2543,!0,_e);case 14:case 30:return ls(he,6112,6121,!0,_e);case 15:return Vh(he,"å­ä¸å¯å¯è¾°å·³åæªç³éæäº¥",De);case 16:return Vh(he,"ç²ä¹ä¸ä¸æå·±åºè¾å£¬ç¸",De);case 17:case 48:return wo(he,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",Lc,"è² ",De,xu|hd|Gd);case 47:return wo(he,"é¶å£¹è²³åèä¼é¸ææç",ig,"è² ",De,jf|xu|hd|Gd);case 42:return wo(he,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",Lc,"è´",De,xu|hd|Gd);case 41:return wo(he,"é¶å£¹è´°åèä¼éææç",ig,"è´",De,jf|xu|hd|Gd);case 26:return wo(he,"ãä¸äºä¸åäºå­ä¸å«ä¹","åç¾åä¸",zA,De,0);case 25:return wo(he,"é¶å£±å¼ååä¼å­ä¸å«ä¹","æ¾ç¾åä¸",zA,De,jf|xu|hd);case 31:return wo(he,"ìì¼ì´ì¼ì¬ì¤ì¡ì¹ íêµ¬","ì­ë°±ì²ë§",HA,it,jf|xu|hd);case 33:return wo(he,"é¶ä¸äºä¸åäºå­ä¸å«ä¹","åç¾åè¬",HA,it,0);case 32:return wo(he,"é¶å£¹è²³ååäºå­ä¸å«ä¹","æ¾ç¾å",HA,it,jf|xu|hd);case 18:return ls(he,2406,2415,!0,_e);case 20:return Bh(he,1,19999,UA,3,_e);case 21:return ls(he,2790,2799,!0,_e);case 22:return ls(he,2662,2671,!0,_e);case 22:return Bh(he,1,10999,rA,3,_e);case 23:return Vh(he,"ããããããããããããããããã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ãããããããããããããããã");case 24:return Vh(he,"ããã¯ã«ã»ã¸ã¨ã¡ãã¬ããããããããã¤ã­ãªããããã®ãããã¾ããµããã¦ãããããã¿ããã²ããã");case 27:return ls(he,3302,3311,!0,_e);case 28:return Vh(he,"ã¢ã¤ã¦ã¨ãªã«ã­ã¯ã±ã³ãµã·ã¹ã»ã½ã¿ããããããããããããããããã ã¡ã¢ã¤ã¦ã¨ã©ãªã«ã¬ã­ã¯ã°ã±ã²ã³",De);case 29:return Vh(he,"ã¤ã­ãããããããªãã«ã²ã¯ã«ã¨ã¿ã¬ã½ãããã©ã ã¦ã°ããªã¯ã¤ãã±ãã³ã¨ãã¢ãµã­ã¦ã¡ãã·ã±ãã¢ã»ã¹",De);case 34:return ls(he,3792,3801,!0,_e);case 37:return ls(he,6160,6169,!0,_e);case 38:return ls(he,4160,4169,!0,_e);case 39:return ls(he,2918,2927,!0,_e);case 40:return ls(he,1776,1785,!0,_e);case 43:return ls(he,3046,3055,!0,_e);case 44:return ls(he,3174,3183,!0,_e);case 45:return ls(he,3664,3673,!0,_e);case 46:return ls(he,3872,3881,!0,_e);case 3:default:return ls(he,48,57,!0,_e)}},Wd="data-html2canvas-ignore",QA=function(){function he(le,ye,_e){if(this.context=le,this.options=_e,this.scrolledElements=[],this.referenceElement=ye,this.counters=new eA,this.quoteDepth=0,!ye.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(ye.ownerDocument.documentElement,!1)}return he.prototype.toIFrame=function(le,ye){var _e=this,De=Th(le,ye);if(!De.contentWindow)return Promise.reject("Unable to find iframe window");var it=le.defaultView.pageXOffset,At=le.defaultView.pageYOffset,Rt=De.contentWindow,zt=Rt.document,Ir=Mh(De).then(function(){return a(_e,void 0,void 0,function(){var Or,Xr;return l(this,function(Fn){switch(Fn.label){case 0:return this.scrolledElements.forEach(Hf),Rt&&(Rt.scrollTo(ye.left,ye.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Rt.scrollY!==ye.top||Rt.scrollX!==ye.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Rt.scrollX-ye.left,Rt.scrollY-ye.top,0,0))),Or=this.options.onclone,Xr=this.clonedReferenceElement,typeof Xr>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:zt.fonts&&zt.fonts.ready?[4,zt.fonts.ready]:[3,2];case 1:Fn.sent(),Fn.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Io(zt)]:[3,4];case 3:Fn.sent(),Fn.label=4;case 4:return typeof Or=="function"?[2,Promise.resolve().then(function(){return Or(zt,Xr)}).then(function(){return De})]:[2,De]}})})});return zt.open(),zt.write(wm(document.doctype)+"<html></html>"),sg(this.referenceElement.ownerDocument,it,At),zt.replaceChild(zt.adoptNode(this.documentElement),zt.documentElement),zt.close(),Ir},he.prototype.createElementClone=function(le){if(ho(le,2))debugger;if(ff(le))return this.createCanvasClone(le);if(wp(le))return this.createVideoClone(le);if(bu(le))return this.createStyleClone(le);var ye=le.cloneNode(!1);return Zp(ye)&&(Zp(le)&&le.currentSrc&&le.currentSrc!==le.src&&(ye.src=le.currentSrc,ye.srcset=""),ye.loading==="lazy"&&(ye.loading="eager")),Jp(ye)?this.createCustomElementClone(ye):ye},he.prototype.createCustomElementClone=function(le){var ye=document.createElement("html2canvascustomelement");return zf(le.style,ye),ye},he.prototype.createStyleClone=function(le){try{var ye=le.sheet;if(ye&&ye.cssRules){var _e=[].slice.call(ye.cssRules,0).reduce(function(it,At){return At&&typeof At.cssText=="string"?it+At.cssText:it},""),De=le.cloneNode(!1);return De.textContent=_e,De}}catch(it){if(this.context.logger.error("Unable to access cssRules property",it),it.name!=="SecurityError")throw it}return le.cloneNode(!1)},he.prototype.createCanvasClone=function(le){var ye;if(this.options.inlineImages&&le.ownerDocument){var _e=le.ownerDocument.createElement("img");try{return _e.src=le.toDataURL(),_e}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",le)}}var De=le.cloneNode(!1);try{De.width=le.width,De.height=le.height;var it=le.getContext("2d"),At=De.getContext("2d");if(At)if(!this.options.allowTaint&&it)At.putImageData(it.getImageData(0,0,le.width,le.height),0,0);else{var Rt=(ye=le.getContext("webgl2"))!==null&&ye!==void 0?ye:le.getContext("webgl");if(Rt){var zt=Rt.getContextAttributes();(zt==null?void 0:zt.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",le)}At.drawImage(le,0,0)}return De}catch{this.context.logger.info("Unable to clone canvas as it is tainted",le)}return De},he.prototype.createVideoClone=function(le){var ye=le.ownerDocument.createElement("canvas");ye.width=le.offsetWidth,ye.height=le.offsetHeight;var _e=ye.getContext("2d");try{return _e&&(_e.drawImage(le,0,0,ye.width,ye.height),this.options.allowTaint||_e.getImageData(0,0,ye.width,ye.height)),ye}catch{this.context.logger.info("Unable to clone video as it is tainted",le)}var De=le.ownerDocument.createElement("canvas");return De.width=le.offsetWidth,De.height=le.offsetHeight,De},he.prototype.appendChildNode=function(le,ye,_e){(!Ch(ye)||!NA(ye)&&!ye.hasAttribute(Wd)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(ye)))&&(!this.options.copyStyles||!Ch(ye)||!bu(ye))&&le.appendChild(this.cloneNode(ye,_e))},he.prototype.cloneChildNodes=function(le,ye,_e){for(var De=this,it=le.shadowRoot?le.shadowRoot.firstChild:le.firstChild;it;it=it.nextSibling)if(Ch(it)&&jA(it)&&typeof it.assignedNodes=="function"){var At=it.assignedNodes();At.length&&At.forEach(function(Rt){return De.appendChildNode(ye,Rt,_e)})}else this.appendChildNode(ye,it,_e)},he.prototype.cloneNode=function(le,ye){if(ad(le))return document.createTextNode(le.data);if(!le.ownerDocument)return le.cloneNode(!1);var _e=le.ownerDocument.defaultView;if(_e&&Ch(le)&&(Lo(le)||uf(le))){var De=this.createElementClone(le);De.style.transitionProperty="none";var it=_e.getComputedStyle(le),At=_e.getComputedStyle(le,":before"),Rt=_e.getComputedStyle(le,":after");this.referenceElement===le&&Lo(De)&&(this.clonedReferenceElement=De),ld(De)&&Tp(De);var zt=this.counters.parse(new Fo(this.context,it)),Ir=this.resolvePseudoContent(le,De,At,fd.BEFORE);Jp(le)&&(ye=!0),wp(le)||this.cloneChildNodes(le,De,ye),Ir&&De.insertBefore(Ir,De.firstChild);var Or=this.resolvePseudoContent(le,De,Rt,fd.AFTER);return Or&&De.appendChild(Or),this.counters.pop(zt),(it&&(this.options.copyStyles||uf(le))&&!Sp(le)||ye)&&zf(it,De),(le.scrollTop!==0||le.scrollLeft!==0)&&this.scrolledElements.push([De,le.scrollLeft,le.scrollTop]),(cd(le)||Cp(le))&&(cd(De)||Cp(De))&&(De.value=le.value),De}return le.cloneNode(!1)},he.prototype.resolvePseudoContent=function(le,ye,_e,De){var it=this;if(_e){var At=_e.content,Rt=ye.ownerDocument;if(!(!Rt||!At||At==="none"||At==="-moz-alt-content"||_e.display==="none")){this.counters.parse(new Fo(this.context,_e));var zt=new la(this.context,_e),Ir=Rt.createElement("html2canvaspseudoelement");zf(_e,Ir),zt.content.forEach(function(Xr){if(Xr.type===0)Ir.appendChild(Rt.createTextNode(Xr.value));else if(Xr.type===22){var Fn=Rt.createElement("img");Fn.src=Xr.value,Fn.style.opacity="1",Ir.appendChild(Fn)}else if(Xr.type===18){if(Xr.name==="attr"){var Vi=Xr.values.filter(as);Vi.length&&Ir.appendChild(Rt.createTextNode(le.getAttribute(Vi[0].value)||""))}else if(Xr.name==="counter"){var wi=Xr.values.filter(Sn),Ri=wi[0],js=wi[1];if(Ri&&as(Ri)){var os=it.counters.getCounterValue(Ri.value),ns=js&&as(js)?mh.parse(it.context,js.value):3;Ir.appendChild(Rt.createTextNode(Uf(os,ns,!1)))}}else if(Xr.name==="counters"){var oo=Xr.values.filter(Sn),Ri=oo[0],ys=oo[1],js=oo[2];if(Ri&&as(Ri)){var Xi=it.counters.getCounterValues(Ri.value),mi=js&&as(js)?mh.parse(it.context,js.value):3,zs=ys&&ys.type===0?ys.value:"",Ys=Xi.map(function(ic){return Uf(ic,mi,!1)}).join(zs);Ir.appendChild(Rt.createTextNode(Ys))}}}else if(Xr.type===20)switch(Xr.value){case"open-quote":Ir.appendChild(Rt.createTextNode(ni(zt.quotes,it.quoteDepth++,!0)));break;case"close-quote":Ir.appendChild(Rt.createTextNode(ni(zt.quotes,--it.quoteDepth,!1)));break;default:Ir.appendChild(Rt.createTextNode(Xr.value))}}),Ir.className=nA+" "+iA;var Or=De===fd.BEFORE?" "+nA:" "+iA;return uf(ye)?ye.className.baseValue+=Or:ye.className+=Or,Ir}}},he.destroy=function(le){return le.parentNode?(le.parentNode.removeChild(le),!0):!1},he}(),fd;(function(he){he[he.BEFORE=0]="BEFORE",he[he.AFTER=1]="AFTER"})(fd||(fd={}));var Th=function(he,le){var ye=he.createElement("iframe");return ye.className="html2canvas-container",ye.style.visibility="hidden",ye.style.position="fixed",ye.style.left="-10000px",ye.style.top="0px",ye.style.border="0",ye.width=le.width.toString(),ye.height=le.height.toString(),ye.scrolling="no",ye.setAttribute(Wd,"true"),he.body.appendChild(ye),ye},Ih=function(he){return new Promise(function(le){if(he.complete){le();return}if(!he.src){le();return}he.onload=le,he.onerror=le})},Io=function(he){return Promise.all([].slice.call(he.images,0).map(Ih))},Mh=function(he){return new Promise(function(le,ye){var _e=he.contentWindow;if(!_e)return ye("No window assigned for iframe");var De=_e.document;_e.onload=he.onload=function(){_e.onload=he.onload=null;var it=setInterval(function(){De.body.childNodes.length>0&&De.readyState==="complete"&&(clearInterval(it),le(he))},50)}})},Ep=["all","d","content"],zf=function(he,le){for(var ye=he.length-1;ye>=0;ye--){var _e=he.item(ye);Ep.indexOf(_e)===-1&&le.style.setProperty(_e,he.getPropertyValue(_e))}return le},wm=function(he){var le="";return he&&(le+="<!DOCTYPE ",he.name&&(le+=he.name),he.internalSubset&&(le+=he.internalSubset),he.publicId&&(le+='"'+he.publicId+'"'),he.systemId&&(le+='"'+he.systemId+'"'),le+=">"),le},sg=function(he,le,ye){he&&he.defaultView&&(le!==he.defaultView.pageXOffset||ye!==he.defaultView.pageYOffset)&&he.defaultView.scrollTo(le,ye)},Hf=function(he){var le=he[0],ye=he[1],_e=he[2];le.scrollLeft=ye,le.scrollTop=_e},og=":before",Sm=":after",nA="___html2canvas___pseudoelement_before",iA="___html2canvas___pseudoelement_after",Bp=`{
    content: "" !important;
    display: none !important;
}`,Tp=function(he){df(he,"."+nA+og+Bp+`
         .`+iA+Sm+Bp)},df=function(he,le){var ye=he.ownerDocument;if(ye){var _e=ye.createElement("style");_e.textContent=le,he.appendChild(_e)}},Hu=function(){function he(){}return he.getOrigin=function(le){var ye=he._link;return ye?(ye.href=le,ye.href=ye.href,ye.protocol+ye.hostname+ye.port):"about:blank"},he.isSameOrigin=function(le){return he.getOrigin(le)===he._origin},he.setContext=function(le){he._link=le.document.createElement("a"),he._origin=he.getOrigin(le.location.href)},he._origin="about:blank",he}(),oh=function(){function he(le,ye){this.context=le,this._options=ye,this._cache={}}return he.prototype.addImage=function(le){var ye=Promise.resolve();return this.has(le)||($d(le)||Cm(le))&&(this._cache[le]=this.loadImage(le)).catch(function(){}),ye},he.prototype.match=function(le){return this._cache[le]},he.prototype.loadImage=function(le){return a(this,void 0,void 0,function(){var ye,_e,De,it,At=this;return l(this,function(Rt){switch(Rt.label){case 0:return ye=Hu.isSameOrigin(le),_e=!VA(le)&&this._options.useCORS===!0&&To.SUPPORT_CORS_IMAGES&&!ye,De=!VA(le)&&!ye&&!$d(le)&&typeof this._options.proxy=="string"&&To.SUPPORT_CORS_XHR&&!_e,!ye&&this._options.allowTaint===!1&&!VA(le)&&!$d(le)&&!De&&!_e?[2]:(it=le,De?[4,this.proxy(it)]:[3,2]);case 1:it=Rt.sent(),Rt.label=2;case 2:return this.context.logger.debug("Added image "+le.substring(0,256)),[4,new Promise(function(zt,Ir){var Or=new Image;Or.onload=function(){return zt(Or)},Or.onerror=Ir,(ag(it)||_e)&&(Or.crossOrigin="anonymous"),Or.src=it,Or.complete===!0&&setTimeout(function(){return zt(Or)},500),At._options.imageTimeout>0&&setTimeout(function(){return Ir("Timed out ("+At._options.imageTimeout+"ms) loading image")},At._options.imageTimeout)})];case 3:return[2,Rt.sent()]}})})},he.prototype.has=function(le){return typeof this._cache[le]<"u"},he.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},he.prototype.proxy=function(le){var ye=this,_e=this._options.proxy;if(!_e)throw new Error("No proxy defined");var De=le.substring(0,256);return new Promise(function(it,At){var Rt=To.SUPPORT_RESPONSE_TYPE?"blob":"text",zt=new XMLHttpRequest;zt.onload=function(){if(zt.status===200)if(Rt==="text")it(zt.response);else{var Xr=new FileReader;Xr.addEventListener("load",function(){return it(Xr.result)},!1),Xr.addEventListener("error",function(Fn){return At(Fn)},!1),Xr.readAsDataURL(zt.response)}else At("Failed to proxy resource "+De+" with status code "+zt.status)},zt.onerror=At;var Ir=_e.indexOf("?")>-1?"&":"?";if(zt.open("GET",""+_e+Ir+"url="+encodeURIComponent(le)+"&responseType="+Rt),Rt!=="text"&&zt instanceof XMLHttpRequest&&(zt.responseType=Rt),ye._options.imageTimeout){var Or=ye._options.imageTimeout;zt.timeout=Or,zt.ontimeout=function(){return At("Timed out ("+Or+"ms) proxying "+De)}}zt.send()})},he}(),kc=/^data:image\/svg\+xml/i,Qu=/^data:image\/.*;base64,/i,sA=/^data:image\/.*/i,Cm=function(he){return To.SUPPORT_SVG_DRAWING||!Oc(he)},VA=function(he){return sA.test(he)},ag=function(he){return Qu.test(he)},$d=function(he){return he.substr(0,4)==="blob"},Oc=function(he){return he.substr(-3).toLowerCase()==="svg"||kc.test(he)},Gi=function(){function he(le,ye){this.type=0,this.x=le,this.y=ye}return he.prototype.add=function(le,ye){return new he(this.x+le,this.y+ye)},he}(),C=function(he,le,ye){return new Gi(he.x+(le.x-he.x)*ye,he.y+(le.y-he.y)*ye)},c=function(){function he(le,ye,_e,De){this.type=1,this.start=le,this.startControl=ye,this.endControl=_e,this.end=De}return he.prototype.subdivide=function(le,ye){var _e=C(this.start,this.startControl,le),De=C(this.startControl,this.endControl,le),it=C(this.endControl,this.end,le),At=C(_e,De,le),Rt=C(De,it,le),zt=C(At,Rt,le);return ye?new he(this.start,_e,At,zt):new he(zt,Rt,it,this.end)},he.prototype.add=function(le,ye){return new he(this.start.add(le,ye),this.startControl.add(le,ye),this.endControl.add(le,ye),this.end.add(le,ye))},he.prototype.reverse=function(){return new he(this.end,this.endControl,this.startControl,this.start)},he}(),A=function(he){return he.type===1},E=function(){function he(le){var ye=le.styles,_e=le.bounds,De=al(ye.borderTopLeftRadius,_e.width,_e.height),it=De[0],At=De[1],Rt=al(ye.borderTopRightRadius,_e.width,_e.height),zt=Rt[0],Ir=Rt[1],Or=al(ye.borderBottomRightRadius,_e.width,_e.height),Xr=Or[0],Fn=Or[1],Vi=al(ye.borderBottomLeftRadius,_e.width,_e.height),wi=Vi[0],Ri=Vi[1],js=[];js.push((it+zt)/_e.width),js.push((wi+Xr)/_e.width),js.push((At+Ri)/_e.height),js.push((Ir+Fn)/_e.height);var os=Math.max.apply(Math,js);os>1&&(it/=os,At/=os,zt/=os,Ir/=os,Xr/=os,Fn/=os,wi/=os,Ri/=os);var ns=_e.width-zt,oo=_e.height-Fn,ys=_e.width-Xr,Xi=_e.height-Ri,mi=ye.borderTopWidth,zs=ye.borderRightWidth,Ys=ye.borderBottomWidth,ss=ye.borderLeftWidth,Ba=Us(ye.paddingTop,le.bounds.width),ic=Us(ye.paddingRight,le.bounds.width),sc=Us(ye.paddingBottom,le.bounds.width),ga=Us(ye.paddingLeft,le.bounds.width);this.topLeftBorderDoubleOuterBox=it>0||At>0?P(_e.left+ss/3,_e.top+mi/3,it-ss/3,At-mi/3,M.TOP_LEFT):new Gi(_e.left+ss/3,_e.top+mi/3),this.topRightBorderDoubleOuterBox=it>0||At>0?P(_e.left+ns,_e.top+mi/3,zt-zs/3,Ir-mi/3,M.TOP_RIGHT):new Gi(_e.left+_e.width-zs/3,_e.top+mi/3),this.bottomRightBorderDoubleOuterBox=Xr>0||Fn>0?P(_e.left+ys,_e.top+oo,Xr-zs/3,Fn-Ys/3,M.BOTTOM_RIGHT):new Gi(_e.left+_e.width-zs/3,_e.top+_e.height-Ys/3),this.bottomLeftBorderDoubleOuterBox=wi>0||Ri>0?P(_e.left+ss/3,_e.top+Xi,wi-ss/3,Ri-Ys/3,M.BOTTOM_LEFT):new Gi(_e.left+ss/3,_e.top+_e.height-Ys/3),this.topLeftBorderDoubleInnerBox=it>0||At>0?P(_e.left+ss*2/3,_e.top+mi*2/3,it-ss*2/3,At-mi*2/3,M.TOP_LEFT):new Gi(_e.left+ss*2/3,_e.top+mi*2/3),this.topRightBorderDoubleInnerBox=it>0||At>0?P(_e.left+ns,_e.top+mi*2/3,zt-zs*2/3,Ir-mi*2/3,M.TOP_RIGHT):new Gi(_e.left+_e.width-zs*2/3,_e.top+mi*2/3),this.bottomRightBorderDoubleInnerBox=Xr>0||Fn>0?P(_e.left+ys,_e.top+oo,Xr-zs*2/3,Fn-Ys*2/3,M.BOTTOM_RIGHT):new Gi(_e.left+_e.width-zs*2/3,_e.top+_e.height-Ys*2/3),this.bottomLeftBorderDoubleInnerBox=wi>0||Ri>0?P(_e.left+ss*2/3,_e.top+Xi,wi-ss*2/3,Ri-Ys*2/3,M.BOTTOM_LEFT):new Gi(_e.left+ss*2/3,_e.top+_e.height-Ys*2/3),this.topLeftBorderStroke=it>0||At>0?P(_e.left+ss/2,_e.top+mi/2,it-ss/2,At-mi/2,M.TOP_LEFT):new Gi(_e.left+ss/2,_e.top+mi/2),this.topRightBorderStroke=it>0||At>0?P(_e.left+ns,_e.top+mi/2,zt-zs/2,Ir-mi/2,M.TOP_RIGHT):new Gi(_e.left+_e.width-zs/2,_e.top+mi/2),this.bottomRightBorderStroke=Xr>0||Fn>0?P(_e.left+ys,_e.top+oo,Xr-zs/2,Fn-Ys/2,M.BOTTOM_RIGHT):new Gi(_e.left+_e.width-zs/2,_e.top+_e.height-Ys/2),this.bottomLeftBorderStroke=wi>0||Ri>0?P(_e.left+ss/2,_e.top+Xi,wi-ss/2,Ri-Ys/2,M.BOTTOM_LEFT):new Gi(_e.left+ss/2,_e.top+_e.height-Ys/2),this.topLeftBorderBox=it>0||At>0?P(_e.left,_e.top,it,At,M.TOP_LEFT):new Gi(_e.left,_e.top),this.topRightBorderBox=zt>0||Ir>0?P(_e.left+ns,_e.top,zt,Ir,M.TOP_RIGHT):new Gi(_e.left+_e.width,_e.top),this.bottomRightBorderBox=Xr>0||Fn>0?P(_e.left+ys,_e.top+oo,Xr,Fn,M.BOTTOM_RIGHT):new Gi(_e.left+_e.width,_e.top+_e.height),this.bottomLeftBorderBox=wi>0||Ri>0?P(_e.left,_e.top+Xi,wi,Ri,M.BOTTOM_LEFT):new Gi(_e.left,_e.top+_e.height),this.topLeftPaddingBox=it>0||At>0?P(_e.left+ss,_e.top+mi,Math.max(0,it-ss),Math.max(0,At-mi),M.TOP_LEFT):new Gi(_e.left+ss,_e.top+mi),this.topRightPaddingBox=zt>0||Ir>0?P(_e.left+Math.min(ns,_e.width-zs),_e.top+mi,ns>_e.width+zs?0:Math.max(0,zt-zs),Math.max(0,Ir-mi),M.TOP_RIGHT):new Gi(_e.left+_e.width-zs,_e.top+mi),this.bottomRightPaddingBox=Xr>0||Fn>0?P(_e.left+Math.min(ys,_e.width-ss),_e.top+Math.min(oo,_e.height-Ys),Math.max(0,Xr-zs),Math.max(0,Fn-Ys),M.BOTTOM_RIGHT):new Gi(_e.left+_e.width-zs,_e.top+_e.height-Ys),this.bottomLeftPaddingBox=wi>0||Ri>0?P(_e.left+ss,_e.top+Math.min(Xi,_e.height-Ys),Math.max(0,wi-ss),Math.max(0,Ri-Ys),M.BOTTOM_LEFT):new Gi(_e.left+ss,_e.top+_e.height-Ys),this.topLeftContentBox=it>0||At>0?P(_e.left+ss+ga,_e.top+mi+Ba,Math.max(0,it-(ss+ga)),Math.max(0,At-(mi+Ba)),M.TOP_LEFT):new Gi(_e.left+ss+ga,_e.top+mi+Ba),this.topRightContentBox=zt>0||Ir>0?P(_e.left+Math.min(ns,_e.width+ss+ga),_e.top+mi+Ba,ns>_e.width+ss+ga?0:zt-ss+ga,Ir-(mi+Ba),M.TOP_RIGHT):new Gi(_e.left+_e.width-(zs+ic),_e.top+mi+Ba),this.bottomRightContentBox=Xr>0||Fn>0?P(_e.left+Math.min(ys,_e.width-(ss+ga)),_e.top+Math.min(oo,_e.height+mi+Ba),Math.max(0,Xr-(zs+ic)),Fn-(Ys+sc),M.BOTTOM_RIGHT):new Gi(_e.left+_e.width-(zs+ic),_e.top+_e.height-(Ys+sc)),this.bottomLeftContentBox=wi>0||Ri>0?P(_e.left+ss+ga,_e.top+Xi,Math.max(0,wi-(ss+ga)),Ri-(Ys+sc),M.BOTTOM_LEFT):new Gi(_e.left+ss+ga,_e.top+_e.height-(Ys+sc))}return he}(),M;(function(he){he[he.TOP_LEFT=0]="TOP_LEFT",he[he.TOP_RIGHT=1]="TOP_RIGHT",he[he.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",he[he.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(M||(M={}));var P=function(he,le,ye,_e,De){var it=4*((Math.sqrt(2)-1)/3),At=ye*it,Rt=_e*it,zt=he+ye,Ir=le+_e;switch(De){case M.TOP_LEFT:return new c(new Gi(he,Ir),new Gi(he,Ir-Rt),new Gi(zt-At,le),new Gi(zt,le));case M.TOP_RIGHT:return new c(new Gi(he,le),new Gi(he+At,le),new Gi(zt,Ir-Rt),new Gi(zt,Ir));case M.BOTTOM_RIGHT:return new c(new Gi(zt,le),new Gi(zt,le+Rt),new Gi(he+At,Ir),new Gi(he,Ir));case M.BOTTOM_LEFT:default:return new c(new Gi(zt,Ir),new Gi(zt-At,Ir),new Gi(he,le+Rt),new Gi(he,le))}},j=function(he){return[he.topLeftBorderBox,he.topRightBorderBox,he.bottomRightBorderBox,he.bottomLeftBorderBox]},K=function(he){return[he.topLeftContentBox,he.topRightContentBox,he.bottomRightContentBox,he.bottomLeftContentBox]},te=function(he){return[he.topLeftPaddingBox,he.topRightPaddingBox,he.bottomRightPaddingBox,he.bottomLeftPaddingBox]},ge=function(){function he(le,ye,_e){this.offsetX=le,this.offsetY=ye,this.matrix=_e,this.type=0,this.target=6}return he}(),ve=function(){function he(le,ye){this.path=le,this.target=ye,this.type=1}return he}(),Me=function(){function he(le){this.opacity=le,this.type=2,this.target=6}return he}(),Ce=function(he){return he.type===0},Pe=function(he){return he.type===1},Qe=function(he){return he.type===2},je=function(he,le){return he.length===le.length?he.some(function(ye,_e){return ye===le[_e]}):!1},qe=function(he,le,ye,_e,De){return he.map(function(it,At){switch(At){case 0:return it.add(le,ye);case 1:return it.add(le+_e,ye);case 2:return it.add(le+_e,ye+De);case 3:return it.add(le,ye+De)}return it})},Ke=function(){function he(le){this.element=le,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return he}(),lt=function(){function he(le,ye){if(this.container=le,this.parent=ye,this.effects=[],this.curves=new E(this.container),this.container.styles.opacity<1&&this.effects.push(new Me(this.container.styles.opacity)),this.container.styles.transform!==null){var _e=this.container.bounds.left+this.container.styles.transformOrigin[0].number,De=this.container.bounds.top+this.container.styles.transformOrigin[1].number,it=this.container.styles.transform;this.effects.push(new ge(_e,De,it))}if(this.container.styles.overflowX!==0){var At=j(this.curves),Rt=te(this.curves);je(At,Rt)?this.effects.push(new ve(At,6)):(this.effects.push(new ve(At,2)),this.effects.push(new ve(Rt,4)))}}return he.prototype.getEffects=function(le){for(var ye=[2,3].indexOf(this.container.styles.position)===-1,_e=this.parent,De=this.effects.slice(0);_e;){var it=_e.effects.filter(function(zt){return!Pe(zt)});if(ye||_e.container.styles.position!==0||!_e.parent){if(De.unshift.apply(De,it),ye=[2,3].indexOf(_e.container.styles.position)===-1,_e.container.styles.overflowX!==0){var At=j(_e.curves),Rt=te(_e.curves);je(At,Rt)||De.unshift(new ve(Rt,6))}}else De.unshift.apply(De,it);_e=_e.parent}return De.filter(function(zt){return jn(zt.target,le)})},he}(),dt=function(he,le,ye,_e){he.container.elements.forEach(function(De){var it=jn(De.flags,4),At=jn(De.flags,2),Rt=new lt(De,he);jn(De.styles.display,2048)&&_e.push(Rt);var zt=jn(De.flags,8)?[]:_e;if(it||At){var Ir=it||De.styles.isPositioned()?ye:le,Or=new Ke(Rt);if(De.styles.isPositioned()||De.styles.opacity<1||De.styles.isTransformed()){var Xr=De.styles.zIndex.order;if(Xr<0){var Fn=0;Ir.negativeZIndex.some(function(wi,Ri){return Xr>wi.element.container.styles.zIndex.order?(Fn=Ri,!1):Fn>0}),Ir.negativeZIndex.splice(Fn,0,Or)}else if(Xr>0){var Vi=0;Ir.positiveZIndex.some(function(wi,Ri){return Xr>=wi.element.container.styles.zIndex.order?(Vi=Ri+1,!1):Vi>0}),Ir.positiveZIndex.splice(Vi,0,Or)}else Ir.zeroOrAutoZIndexOrTransformedOrOpacity.push(Or)}else De.styles.isFloating()?Ir.nonPositionedFloats.push(Or):Ir.nonPositionedInlineLevel.push(Or);dt(Rt,Or,it?Or:ye,zt)}else De.styles.isInlineLevel()?le.inlineLevel.push(Rt):le.nonInlineLevel.push(Rt),dt(Rt,le,ye,zt);jn(De.flags,8)&&vt(De,zt)})},vt=function(he,le){for(var ye=he instanceof Wc?he.start:1,_e=he instanceof Wc?he.reversed:!1,De=0;De<le.length;De++){var it=le[De];it.container instanceof OA&&typeof it.container.value=="number"&&it.container.value!==0&&(ye=it.container.value),it.listValue=Uf(ye,it.container.styles.listStyleType,!0),ye+=_e?-1:1}},Tt=function(he){var le=new lt(he,null),ye=new Ke(le),_e=[];return dt(le,ye,ye,_e),vt(le.container,_e),ye},Dt=function(he,le){switch(le){case 0:return dr(he.topLeftBorderBox,he.topLeftPaddingBox,he.topRightBorderBox,he.topRightPaddingBox);case 1:return dr(he.topRightBorderBox,he.topRightPaddingBox,he.bottomRightBorderBox,he.bottomRightPaddingBox);case 2:return dr(he.bottomRightBorderBox,he.bottomRightPaddingBox,he.bottomLeftBorderBox,he.bottomLeftPaddingBox);case 3:default:return dr(he.bottomLeftBorderBox,he.bottomLeftPaddingBox,he.topLeftBorderBox,he.topLeftPaddingBox)}},Vt=function(he,le){switch(le){case 0:return dr(he.topLeftBorderBox,he.topLeftBorderDoubleOuterBox,he.topRightBorderBox,he.topRightBorderDoubleOuterBox);case 1:return dr(he.topRightBorderBox,he.topRightBorderDoubleOuterBox,he.bottomRightBorderBox,he.bottomRightBorderDoubleOuterBox);case 2:return dr(he.bottomRightBorderBox,he.bottomRightBorderDoubleOuterBox,he.bottomLeftBorderBox,he.bottomLeftBorderDoubleOuterBox);case 3:default:return dr(he.bottomLeftBorderBox,he.bottomLeftBorderDoubleOuterBox,he.topLeftBorderBox,he.topLeftBorderDoubleOuterBox)}},It=function(he,le){switch(le){case 0:return dr(he.topLeftBorderDoubleInnerBox,he.topLeftPaddingBox,he.topRightBorderDoubleInnerBox,he.topRightPaddingBox);case 1:return dr(he.topRightBorderDoubleInnerBox,he.topRightPaddingBox,he.bottomRightBorderDoubleInnerBox,he.bottomRightPaddingBox);case 2:return dr(he.bottomRightBorderDoubleInnerBox,he.bottomRightPaddingBox,he.bottomLeftBorderDoubleInnerBox,he.bottomLeftPaddingBox);case 3:default:return dr(he.bottomLeftBorderDoubleInnerBox,he.bottomLeftPaddingBox,he.topLeftBorderDoubleInnerBox,he.topLeftPaddingBox)}},Mt=function(he,le){switch(le){case 0:return Pt(he.topLeftBorderStroke,he.topRightBorderStroke);case 1:return Pt(he.topRightBorderStroke,he.bottomRightBorderStroke);case 2:return Pt(he.bottomRightBorderStroke,he.bottomLeftBorderStroke);case 3:default:return Pt(he.bottomLeftBorderStroke,he.topLeftBorderStroke)}},Pt=function(he,le){var ye=[];return A(he)?ye.push(he.subdivide(.5,!1)):ye.push(he),A(le)?ye.push(le.subdivide(.5,!0)):ye.push(le),ye},dr=function(he,le,ye,_e){var De=[];return A(he)?De.push(he.subdivide(.5,!1)):De.push(he),A(ye)?De.push(ye.subdivide(.5,!0)):De.push(ye),A(_e)?De.push(_e.subdivide(.5,!0).reverse()):De.push(_e),A(le)?De.push(le.subdivide(.5,!1).reverse()):De.push(le),De},sr=function(he){var le=he.bounds,ye=he.styles;return le.add(ye.borderLeftWidth,ye.borderTopWidth,-(ye.borderRightWidth+ye.borderLeftWidth),-(ye.borderTopWidth+ye.borderBottomWidth))},Qr=function(he){var le=he.styles,ye=he.bounds,_e=Us(le.paddingLeft,ye.width),De=Us(le.paddingRight,ye.width),it=Us(le.paddingTop,ye.width),At=Us(le.paddingBottom,ye.width);return ye.add(_e+le.borderLeftWidth,it+le.borderTopWidth,-(le.borderRightWidth+le.borderLeftWidth+_e+De),-(le.borderTopWidth+le.borderBottomWidth+it+At))},Br=function(he,le){return he===0?le.bounds:he===2?Qr(le):sr(le)},Jr=function(he,le){return he===0?le.bounds:he===2?Qr(le):sr(le)},yn=function(he,le,ye){var _e=Br(br(he.styles.backgroundOrigin,le),he),De=Jr(br(he.styles.backgroundClip,le),he),it=kr(br(he.styles.backgroundSize,le),ye,_e),At=it[0],Rt=it[1],zt=al(br(he.styles.backgroundPosition,le),_e.width-At,_e.height-Rt),Ir=an(br(he.styles.backgroundRepeat,le),zt,it,_e,De),Or=Math.round(_e.left+zt[0]),Xr=Math.round(_e.top+zt[1]);return[Ir,Or,Xr,At,Rt]},vr=function(he){return as(he)&&he.value===_u.AUTO},qt=function(he){return typeof he=="number"},kr=function(he,le,ye){var _e=le[0],De=le[1],it=le[2],At=he[0],Rt=he[1];if(!At)return[0,0];if(sa(At)&&Rt&&sa(Rt))return[Us(At,ye.width),Us(Rt,ye.height)];var zt=qt(it);if(as(At)&&(At.value===_u.CONTAIN||At.value===_u.COVER)){if(qt(it)){var Ir=ye.width/ye.height;return Ir<it!=(At.value===_u.COVER)?[ye.width,ye.width/it]:[ye.height*it,ye.height]}return[ye.width,ye.height]}var Or=qt(_e),Xr=qt(De),Fn=Or||Xr;if(vr(At)&&(!Rt||vr(Rt))){if(Or&&Xr)return[_e,De];if(!zt&&!Fn)return[ye.width,ye.height];if(Fn&&zt){var Vi=Or?_e:De*it,wi=Xr?De:_e/it;return[Vi,wi]}var Ri=Or?_e:ye.width,js=Xr?De:ye.height;return[Ri,js]}if(zt){var os=0,ns=0;return sa(At)?os=Us(At,ye.width):sa(Rt)&&(ns=Us(Rt,ye.height)),vr(At)?os=ns*it:(!Rt||vr(Rt))&&(ns=os/it),[os,ns]}var oo=null,ys=null;if(sa(At)?oo=Us(At,ye.width):Rt&&sa(Rt)&&(ys=Us(Rt,ye.height)),oo!==null&&(!Rt||vr(Rt))&&(ys=Or&&Xr?oo/_e*De:ye.height),ys!==null&&vr(At)&&(oo=Or&&Xr?ys/De*_e:ye.width),oo!==null&&ys!==null)return[oo,ys];throw new Error("Unable to calculate background-size for element")},br=function(he,le){var ye=he[le];return typeof ye>"u"?he[0]:ye},an=function(he,le,ye,_e,De){var it=le[0],At=le[1],Rt=ye[0],zt=ye[1];switch(he){case 2:return[new Gi(Math.round(_e.left),Math.round(_e.top+At)),new Gi(Math.round(_e.left+_e.width),Math.round(_e.top+At)),new Gi(Math.round(_e.left+_e.width),Math.round(zt+_e.top+At)),new Gi(Math.round(_e.left),Math.round(zt+_e.top+At))];case 3:return[new Gi(Math.round(_e.left+it),Math.round(_e.top)),new Gi(Math.round(_e.left+it+Rt),Math.round(_e.top)),new Gi(Math.round(_e.left+it+Rt),Math.round(_e.height+_e.top)),new Gi(Math.round(_e.left+it),Math.round(_e.height+_e.top))];case 1:return[new Gi(Math.round(_e.left+it),Math.round(_e.top+At)),new Gi(Math.round(_e.left+it+Rt),Math.round(_e.top+At)),new Gi(Math.round(_e.left+it+Rt),Math.round(_e.top+At+zt)),new Gi(Math.round(_e.left+it),Math.round(_e.top+At+zt))];default:return[new Gi(Math.round(De.left),Math.round(De.top)),new Gi(Math.round(De.left+De.width),Math.round(De.top)),new Gi(Math.round(De.left+De.width),Math.round(De.height+De.top)),new Gi(Math.round(De.left),Math.round(De.height+De.top))]}},ln="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",dn="Hidden Text",Mn=function(){function he(le){this._data={},this._document=le}return he.prototype.parseMetrics=function(le,ye){var _e=this._document.createElement("div"),De=this._document.createElement("img"),it=this._document.createElement("span"),At=this._document.body;_e.style.visibility="hidden",_e.style.fontFamily=le,_e.style.fontSize=ye,_e.style.margin="0",_e.style.padding="0",_e.style.whiteSpace="nowrap",At.appendChild(_e),De.src=ln,De.width=1,De.height=1,De.style.margin="0",De.style.padding="0",De.style.verticalAlign="baseline",it.style.fontFamily=le,it.style.fontSize=ye,it.style.margin="0",it.style.padding="0",it.appendChild(this._document.createTextNode(dn)),_e.appendChild(it),_e.appendChild(De);var Rt=De.offsetTop-it.offsetTop+2;_e.removeChild(it),_e.appendChild(this._document.createTextNode(dn)),_e.style.lineHeight="normal",De.style.verticalAlign="super";var zt=De.offsetTop-_e.offsetTop+2;return At.removeChild(_e),{baseline:Rt,middle:zt}},he.prototype.getMetrics=function(le,ye){var _e=le+" "+ye;return typeof this._data[_e]>"u"&&(this._data[_e]=this.parseMetrics(le,ye)),this._data[_e]},he}(),di=function(){function he(le,ye){this.context=le,this.options=ye}return he}(),Ci=1e4,ti=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;return De._activeEffects=[],De.canvas=_e.canvas?_e.canvas:document.createElement("canvas"),De.ctx=De.canvas.getContext("2d"),_e.canvas||(De.canvas.width=Math.floor(_e.width*_e.scale),De.canvas.height=Math.floor(_e.height*_e.scale),De.canvas.style.width=_e.width+"px",De.canvas.style.height=_e.height+"px"),De.fontMetrics=new Mn(document),De.ctx.scale(De.options.scale,De.options.scale),De.ctx.translate(-_e.x,-_e.y),De.ctx.textBaseline="bottom",De._activeEffects=[],De.context.logger.debug("Canvas renderer initialized ("+_e.width+"x"+_e.height+") with scale "+_e.scale),De}return le.prototype.applyEffects=function(ye){for(var _e=this;this._activeEffects.length;)this.popEffect();ye.forEach(function(De){return _e.applyEffect(De)})},le.prototype.applyEffect=function(ye){this.ctx.save(),Qe(ye)&&(this.ctx.globalAlpha=ye.opacity),Ce(ye)&&(this.ctx.translate(ye.offsetX,ye.offsetY),this.ctx.transform(ye.matrix[0],ye.matrix[1],ye.matrix[2],ye.matrix[3],ye.matrix[4],ye.matrix[5]),this.ctx.translate(-ye.offsetX,-ye.offsetY)),Pe(ye)&&(this.path(ye.path),this.ctx.clip()),this._activeEffects.push(ye)},le.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},le.prototype.renderStack=function(ye){return a(this,void 0,void 0,function(){var _e;return l(this,function(De){switch(De.label){case 0:return _e=ye.element.container.styles,_e.isVisible()?[4,this.renderStackContent(ye)]:[3,2];case 1:De.sent(),De.label=2;case 2:return[2]}})})},le.prototype.renderNode=function(ye){return a(this,void 0,void 0,function(){return l(this,function(_e){switch(_e.label){case 0:if(jn(ye.container.flags,16))debugger;return ye.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(ye)]:[3,3];case 1:return _e.sent(),[4,this.renderNodeContent(ye)];case 2:_e.sent(),_e.label=3;case 3:return[2]}})})},le.prototype.renderTextWithLetterSpacing=function(ye,_e,De){var it=this;if(_e===0)this.ctx.fillText(ye.text,ye.bounds.left,ye.bounds.top+De);else{var At=vu(ye.text);At.reduce(function(Rt,zt){return it.ctx.fillText(zt,Rt,ye.bounds.top+De),Rt+it.ctx.measureText(zt).width},ye.bounds.left)}},le.prototype.createFontStyle=function(ye){var _e=ye.fontVariant.filter(function(At){return At==="normal"||At==="small-caps"}).join(""),De=Bs(ye.fontFamily).join(", "),it=vo(ye.fontSize)?""+ye.fontSize.number+ye.fontSize.unit:ye.fontSize.number+"px";return[[ye.fontStyle,_e,ye.fontWeight,it,De].join(" "),De,it]},le.prototype.renderTextNode=function(ye,_e){return a(this,void 0,void 0,function(){var De,it,At,Rt,zt,Ir,Or,Xr,Fn=this;return l(this,function(Vi){return De=this.createFontStyle(_e),it=De[0],At=De[1],Rt=De[2],this.ctx.font=it,this.ctx.direction=_e.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",zt=this.fontMetrics.getMetrics(At,Rt),Ir=zt.baseline,Or=zt.middle,Xr=_e.paintOrder,ye.textBounds.forEach(function(wi){Xr.forEach(function(Ri){switch(Ri){case 0:Fn.ctx.fillStyle=bo(_e.color),Fn.renderTextWithLetterSpacing(wi,_e.letterSpacing,Ir);var js=_e.textShadow;js.length&&wi.text.trim().length&&(js.slice(0).reverse().forEach(function(os){Fn.ctx.shadowColor=bo(os.color),Fn.ctx.shadowOffsetX=os.offsetX.number*Fn.options.scale,Fn.ctx.shadowOffsetY=os.offsetY.number*Fn.options.scale,Fn.ctx.shadowBlur=os.blur.number,Fn.renderTextWithLetterSpacing(wi,_e.letterSpacing,Ir)}),Fn.ctx.shadowColor="",Fn.ctx.shadowOffsetX=0,Fn.ctx.shadowOffsetY=0,Fn.ctx.shadowBlur=0),_e.textDecorationLine.length&&(Fn.ctx.fillStyle=bo(_e.textDecorationColor||_e.color),_e.textDecorationLine.forEach(function(os){switch(os){case 1:Fn.ctx.fillRect(wi.bounds.left,Math.round(wi.bounds.top+Ir),wi.bounds.width,1);break;case 2:Fn.ctx.fillRect(wi.bounds.left,Math.round(wi.bounds.top),wi.bounds.width,1);break;case 3:Fn.ctx.fillRect(wi.bounds.left,Math.ceil(wi.bounds.top+Or),wi.bounds.width,1);break}}));break;case 1:_e.webkitTextStrokeWidth&&wi.text.trim().length&&(Fn.ctx.strokeStyle=bo(_e.webkitTextStrokeColor),Fn.ctx.lineWidth=_e.webkitTextStrokeWidth,Fn.ctx.lineJoin=window.chrome?"miter":"round",Fn.ctx.strokeText(wi.text,wi.bounds.left,wi.bounds.top+Ir)),Fn.ctx.strokeStyle="",Fn.ctx.lineWidth=0,Fn.ctx.lineJoin="miter";break}})}),[2]})})},le.prototype.renderReplacedElement=function(ye,_e,De){if(De&&ye.intrinsicWidth>0&&ye.intrinsicHeight>0){var it=Qr(ye),At=te(_e);this.path(At),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(De,0,0,ye.intrinsicWidth,ye.intrinsicHeight,it.left,it.top,it.width,it.height),this.ctx.restore()}},le.prototype.renderNodeContent=function(ye){return a(this,void 0,void 0,function(){var _e,De,it,At,Rt,zt,ns,ns,Ir,Or,Xr,Fn,ys,Vi,wi,Xi,Ri,js,os,ns,oo,ys,Xi;return l(this,function(mi){switch(mi.label){case 0:this.applyEffects(ye.getEffects(4)),_e=ye.container,De=ye.curves,it=_e.styles,At=0,Rt=_e.textNodes,mi.label=1;case 1:return At<Rt.length?(zt=Rt[At],[4,this.renderTextNode(zt,it)]):[3,4];case 2:mi.sent(),mi.label=3;case 3:return At++,[3,1];case 4:if(!(_e instanceof Rd))return[3,8];mi.label=5;case 5:return mi.trys.push([5,7,,8]),[4,this.context.cache.match(_e.src)];case 6:return ns=mi.sent(),this.renderReplacedElement(_e,De,ns),[3,8];case 7:return mi.sent(),this.context.logger.error("Error loading image "+_e.src),[3,8];case 8:if(_e instanceof No&&this.renderReplacedElement(_e,De,_e.canvas),!(_e instanceof Gs))return[3,12];mi.label=9;case 9:return mi.trys.push([9,11,,12]),[4,this.context.cache.match(_e.svg)];case 10:return ns=mi.sent(),this.renderReplacedElement(_e,De,ns),[3,12];case 11:return mi.sent(),this.context.logger.error("Error loading svg "+_e.svg.substring(0,255)),[3,12];case 12:return _e instanceof bp&&_e.tree?(Ir=new le(this.context,{scale:this.options.scale,backgroundColor:_e.backgroundColor,x:0,y:0,width:_e.width,height:_e.height}),[4,Ir.render(_e.tree)]):[3,14];case 13:Or=mi.sent(),_e.width&&_e.height&&this.ctx.drawImage(Or,0,0,_e.width,_e.height,_e.bounds.left,_e.bounds.top,_e.bounds.width,_e.bounds.height),mi.label=14;case 14:if(_e instanceof af&&(Xr=Math.min(_e.bounds.width,_e.bounds.height),_e.type===zd?_e.checked&&(this.ctx.save(),this.path([new Gi(_e.bounds.left+Xr*.39363,_e.bounds.top+Xr*.79),new Gi(_e.bounds.left+Xr*.16,_e.bounds.top+Xr*.5549),new Gi(_e.bounds.left+Xr*.27347,_e.bounds.top+Xr*.44071),new Gi(_e.bounds.left+Xr*.39694,_e.bounds.top+Xr*.5649),new Gi(_e.bounds.left+Xr*.72983,_e.bounds.top+Xr*.23),new Gi(_e.bounds.left+Xr*.84,_e.bounds.top+Xr*.34085),new Gi(_e.bounds.left+Xr*.39363,_e.bounds.top+Xr*.79)]),this.ctx.fillStyle=bo(zu),this.ctx.fill(),this.ctx.restore()):_e.type===nc&&_e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(_e.bounds.left+Xr/2,_e.bounds.top+Xr/2,Xr/4,0,Math.PI*2,!0),this.ctx.fillStyle=bo(zu),this.ctx.fill(),this.ctx.restore())),xi(_e)&&_e.value.length){switch(Fn=this.createFontStyle(it),ys=Fn[0],Vi=Fn[1],wi=this.fontMetrics.getMetrics(ys,Vi).baseline,this.ctx.font=ys,this.ctx.fillStyle=bo(it.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qi(_e.styles.textAlign),Xi=Qr(_e),Ri=0,_e.styles.textAlign){case 1:Ri+=Xi.width/2;break;case 2:Ri+=Xi.width;break}js=Xi.add(Ri,0,0,-Xi.height/2+1),this.ctx.save(),this.path([new Gi(Xi.left,Xi.top),new Gi(Xi.left+Xi.width,Xi.top),new Gi(Xi.left+Xi.width,Xi.top+Xi.height),new Gi(Xi.left,Xi.top+Xi.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ju(_e.value,js),it.letterSpacing,wi),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!jn(_e.styles.display,2048))return[3,20];if(_e.styles.listStyleImage===null)return[3,19];if(os=_e.styles.listStyleImage,os.type!==0)return[3,18];ns=void 0,oo=os.url,mi.label=15;case 15:return mi.trys.push([15,17,,18]),[4,this.context.cache.match(oo)];case 16:return ns=mi.sent(),this.ctx.drawImage(ns,_e.bounds.left-(ns.width+10),_e.bounds.top),[3,18];case 17:return mi.sent(),this.context.logger.error("Error loading list-style-image "+oo),[3,18];case 18:return[3,20];case 19:ye.listValue&&_e.styles.listStyleType!==-1&&(ys=this.createFontStyle(it)[0],this.ctx.font=ys,this.ctx.fillStyle=bo(it.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Xi=new h(_e.bounds.left,_e.bounds.top+Us(_e.styles.paddingTop,_e.bounds.width),_e.bounds.width,su(it.lineHeight,it.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ju(ye.listValue,Xi),it.letterSpacing,su(it.lineHeight,it.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),mi.label=20;case 20:return[2]}})})},le.prototype.renderStackContent=function(ye){return a(this,void 0,void 0,function(){var _e,De,os,it,At,os,Rt,zt,os,Ir,Or,os,Xr,Fn,os,Vi,wi,os,Ri,js,os;return l(this,function(ns){switch(ns.label){case 0:if(jn(ye.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(ye.element)];case 1:ns.sent(),_e=0,De=ye.negativeZIndex,ns.label=2;case 2:return _e<De.length?(os=De[_e],[4,this.renderStack(os)]):[3,5];case 3:ns.sent(),ns.label=4;case 4:return _e++,[3,2];case 5:return[4,this.renderNodeContent(ye.element)];case 6:ns.sent(),it=0,At=ye.nonInlineLevel,ns.label=7;case 7:return it<At.length?(os=At[it],[4,this.renderNode(os)]):[3,10];case 8:ns.sent(),ns.label=9;case 9:return it++,[3,7];case 10:Rt=0,zt=ye.nonPositionedFloats,ns.label=11;case 11:return Rt<zt.length?(os=zt[Rt],[4,this.renderStack(os)]):[3,14];case 12:ns.sent(),ns.label=13;case 13:return Rt++,[3,11];case 14:Ir=0,Or=ye.nonPositionedInlineLevel,ns.label=15;case 15:return Ir<Or.length?(os=Or[Ir],[4,this.renderStack(os)]):[3,18];case 16:ns.sent(),ns.label=17;case 17:return Ir++,[3,15];case 18:Xr=0,Fn=ye.inlineLevel,ns.label=19;case 19:return Xr<Fn.length?(os=Fn[Xr],[4,this.renderNode(os)]):[3,22];case 20:ns.sent(),ns.label=21;case 21:return Xr++,[3,19];case 22:Vi=0,wi=ye.zeroOrAutoZIndexOrTransformedOrOpacity,ns.label=23;case 23:return Vi<wi.length?(os=wi[Vi],[4,this.renderStack(os)]):[3,26];case 24:ns.sent(),ns.label=25;case 25:return Vi++,[3,23];case 26:Ri=0,js=ye.positiveZIndex,ns.label=27;case 27:return Ri<js.length?(os=js[Ri],[4,this.renderStack(os)]):[3,30];case 28:ns.sent(),ns.label=29;case 29:return Ri++,[3,27];case 30:return[2]}})})},le.prototype.mask=function(ye){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(ye.slice(0).reverse()),this.ctx.closePath()},le.prototype.path=function(ye){this.ctx.beginPath(),this.formatPath(ye),this.ctx.closePath()},le.prototype.formatPath=function(ye){var _e=this;ye.forEach(function(De,it){var At=A(De)?De.start:De;it===0?_e.ctx.moveTo(At.x,At.y):_e.ctx.lineTo(At.x,At.y),A(De)&&_e.ctx.bezierCurveTo(De.startControl.x,De.startControl.y,De.endControl.x,De.endControl.y,De.end.x,De.end.y)})},le.prototype.renderRepeat=function(ye,_e,De,it){this.path(ye),this.ctx.fillStyle=_e,this.ctx.translate(De,it),this.ctx.fill(),this.ctx.translate(-De,-it)},le.prototype.resizeImage=function(ye,_e,De){var it;if(ye.width===_e&&ye.height===De)return ye;var At=(it=this.canvas.ownerDocument)!==null&&it!==void 0?it:document,Rt=At.createElement("canvas");Rt.width=Math.max(1,_e),Rt.height=Math.max(1,De);var zt=Rt.getContext("2d");return zt.drawImage(ye,0,0,ye.width,ye.height,0,0,_e,De),Rt},le.prototype.renderBackgroundImage=function(ye){return a(this,void 0,void 0,function(){var _e,De,it,At,Rt,zt;return l(this,function(Ir){switch(Ir.label){case 0:_e=ye.styles.backgroundImage.length-1,De=function(Or){var Xr,Fn,Vi,Ba,Dl,ea,ga,Ol,Ys,wi,Ba,Dl,ea,ga,Ol,Ri,js,os,ns,oo,ys,Xi,mi,zs,Ys,ss,Ba,ic,sc,ga,Ol,Kl,Dl,ea,Ac,uu,Qf,dd,oA,pd,Ad,Kd;return l(this,function(aA){switch(aA.label){case 0:if(Or.type!==0)return[3,5];Xr=void 0,Fn=Or.url,aA.label=1;case 1:return aA.trys.push([1,3,,4]),[4,it.context.cache.match(Fn)];case 2:return Xr=aA.sent(),[3,4];case 3:return aA.sent(),it.context.logger.error("Error loading background-image "+Fn),[3,4];case 4:return Xr&&(Vi=yn(ye,_e,[Xr.width,Xr.height,Xr.width/Xr.height]),Ba=Vi[0],Dl=Vi[1],ea=Vi[2],ga=Vi[3],Ol=Vi[4],Ys=it.ctx.createPattern(it.resizeImage(Xr,ga,Ol),"repeat"),it.renderRepeat(Ba,Ys,Dl,ea)),[3,6];case 5:Tc(Or)?(wi=yn(ye,_e,[null,null,null]),Ba=wi[0],Dl=wi[1],ea=wi[2],ga=wi[3],Ol=wi[4],Ri=es(Or.angle,ga,Ol),js=Ri[0],os=Ri[1],ns=Ri[2],oo=Ri[3],ys=Ri[4],Xi=document.createElement("canvas"),Xi.width=ga,Xi.height=Ol,mi=Xi.getContext("2d"),zs=mi.createLinearGradient(os,oo,ns,ys),Qn(Or.stops,js).forEach(function(Em){return zs.addColorStop(Em.stop,bo(Em.color))}),mi.fillStyle=zs,mi.fillRect(0,0,ga,Ol),ga>0&&Ol>0&&(Ys=it.ctx.createPattern(Xi,"repeat"),it.renderRepeat(Ba,Ys,Dl,ea))):tc(Or)&&(ss=yn(ye,_e,[null,null,null]),Ba=ss[0],ic=ss[1],sc=ss[2],ga=ss[3],Ol=ss[4],Kl=Or.position.length===0?[ru]:Or.position,Dl=Us(Kl[0],ga),ea=Us(Kl[Kl.length-1],Ol),Ac=ms(Or,Dl,ea,ga,Ol),uu=Ac[0],Qf=Ac[1],uu>0&&Qf>0&&(dd=it.ctx.createRadialGradient(ic+Dl,sc+ea,0,ic+Dl,sc+ea,uu),Qn(Or.stops,uu*2).forEach(function(Em){return dd.addColorStop(Em.stop,bo(Em.color))}),it.path(Ba),it.ctx.fillStyle=dd,uu!==Qf?(oA=ye.bounds.left+.5*ye.bounds.width,pd=ye.bounds.top+.5*ye.bounds.height,Ad=Qf/uu,Kd=1/Ad,it.ctx.save(),it.ctx.translate(oA,pd),it.ctx.transform(1,0,0,Ad,0,0),it.ctx.translate(-oA,-pd),it.ctx.fillRect(ic,Kd*(sc-pd)+pd,ga,Ol*Kd),it.ctx.restore()):it.ctx.fill())),aA.label=6;case 6:return _e--,[2]}})},it=this,At=0,Rt=ye.styles.backgroundImage.slice(0).reverse(),Ir.label=1;case 1:return At<Rt.length?(zt=Rt[At],[5,De(zt)]):[3,4];case 2:Ir.sent(),Ir.label=3;case 3:return At++,[3,1];case 4:return[2]}})})},le.prototype.renderSolidBorder=function(ye,_e,De){return a(this,void 0,void 0,function(){return l(this,function(it){return this.path(Dt(De,_e)),this.ctx.fillStyle=bo(ye),this.ctx.fill(),[2]})})},le.prototype.renderDoubleBorder=function(ye,_e,De,it){return a(this,void 0,void 0,function(){var At,Rt;return l(this,function(zt){switch(zt.label){case 0:return _e<3?[4,this.renderSolidBorder(ye,De,it)]:[3,2];case 1:return zt.sent(),[2];case 2:return At=Vt(it,De),this.path(At),this.ctx.fillStyle=bo(ye),this.ctx.fill(),Rt=It(it,De),this.path(Rt),this.ctx.fill(),[2]}})})},le.prototype.renderNodeBackgroundAndBorders=function(ye){return a(this,void 0,void 0,function(){var _e,De,it,At,Rt,zt,Ir,Or,Xr=this;return l(this,function(Fn){switch(Fn.label){case 0:return this.applyEffects(ye.getEffects(2)),_e=ye.container.styles,De=!Ga(_e.backgroundColor)||_e.backgroundImage.length,it=[{style:_e.borderTopStyle,color:_e.borderTopColor,width:_e.borderTopWidth},{style:_e.borderRightStyle,color:_e.borderRightColor,width:_e.borderRightWidth},{style:_e.borderBottomStyle,color:_e.borderBottomColor,width:_e.borderBottomWidth},{style:_e.borderLeftStyle,color:_e.borderLeftColor,width:_e.borderLeftWidth}],At=vi(br(_e.backgroundClip,0),ye.curves),De||_e.boxShadow.length?(this.ctx.save(),this.path(At),this.ctx.clip(),Ga(_e.backgroundColor)||(this.ctx.fillStyle=bo(_e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(ye.container)]):[3,2];case 1:Fn.sent(),this.ctx.restore(),_e.boxShadow.slice(0).reverse().forEach(function(Vi){Xr.ctx.save();var wi=j(ye.curves),Ri=Vi.inset?0:Ci,js=qe(wi,-Ri+(Vi.inset?1:-1)*Vi.spread.number,(Vi.inset?1:-1)*Vi.spread.number,Vi.spread.number*(Vi.inset?-2:2),Vi.spread.number*(Vi.inset?-2:2));Vi.inset?(Xr.path(wi),Xr.ctx.clip(),Xr.mask(js)):(Xr.mask(wi),Xr.ctx.clip(),Xr.path(js)),Xr.ctx.shadowOffsetX=Vi.offsetX.number+Ri,Xr.ctx.shadowOffsetY=Vi.offsetY.number,Xr.ctx.shadowColor=bo(Vi.color),Xr.ctx.shadowBlur=Vi.blur.number,Xr.ctx.fillStyle=Vi.inset?bo(Vi.color):"rgba(0,0,0,1)",Xr.ctx.fill(),Xr.ctx.restore()}),Fn.label=2;case 2:Rt=0,zt=0,Ir=it,Fn.label=3;case 3:return zt<Ir.length?(Or=Ir[zt],Or.style!==0&&!Ga(Or.color)&&Or.width>0?Or.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Or.color,Or.width,Rt,ye.curves,2)]:[3,11]):[3,13];case 4:return Fn.sent(),[3,11];case 5:return Or.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Or.color,Or.width,Rt,ye.curves,3)];case 6:return Fn.sent(),[3,11];case 7:return Or.style!==4?[3,9]:[4,this.renderDoubleBorder(Or.color,Or.width,Rt,ye.curves)];case 8:return Fn.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Or.color,Rt,ye.curves)];case 10:Fn.sent(),Fn.label=11;case 11:Rt++,Fn.label=12;case 12:return zt++,[3,3];case 13:return[2]}})})},le.prototype.renderDashedDottedBorder=function(ye,_e,De,it,At){return a(this,void 0,void 0,function(){var Rt,zt,Ir,Or,Xr,Fn,Vi,wi,Ri,js,os,ns,oo,ys,Xi,mi,Xi,mi;return l(this,function(zs){return this.ctx.save(),Rt=Mt(it,De),zt=Dt(it,De),At===2&&(this.path(zt),this.ctx.clip()),A(zt[0])?(Ir=zt[0].start.x,Or=zt[0].start.y):(Ir=zt[0].x,Or=zt[0].y),A(zt[1])?(Xr=zt[1].end.x,Fn=zt[1].end.y):(Xr=zt[1].x,Fn=zt[1].y),De===0||De===2?Vi=Math.abs(Ir-Xr):Vi=Math.abs(Or-Fn),this.ctx.beginPath(),At===3?this.formatPath(Rt):this.formatPath(zt.slice(0,2)),wi=_e<3?_e*3:_e*2,Ri=_e<3?_e*2:_e,At===3&&(wi=_e,Ri=_e),js=!0,Vi<=wi*2?js=!1:Vi<=wi*2+Ri?(os=Vi/(2*wi+Ri),wi*=os,Ri*=os):(ns=Math.floor((Vi+Ri)/(wi+Ri)),oo=(Vi-ns*wi)/(ns-1),ys=(Vi-(ns+1)*wi)/ns,Ri=ys<=0||Math.abs(Ri-oo)<Math.abs(Ri-ys)?oo:ys),js&&(At===3?this.ctx.setLineDash([0,wi+Ri]):this.ctx.setLineDash([wi,Ri])),At===3?(this.ctx.lineCap="round",this.ctx.lineWidth=_e):this.ctx.lineWidth=_e*2+1.1,this.ctx.strokeStyle=bo(ye),this.ctx.stroke(),this.ctx.setLineDash([]),At===2&&(A(zt[0])&&(Xi=zt[3],mi=zt[0],this.ctx.beginPath(),this.formatPath([new Gi(Xi.end.x,Xi.end.y),new Gi(mi.start.x,mi.start.y)]),this.ctx.stroke()),A(zt[1])&&(Xi=zt[1],mi=zt[2],this.ctx.beginPath(),this.formatPath([new Gi(Xi.end.x,Xi.end.y),new Gi(mi.start.x,mi.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},le.prototype.render=function(ye){return a(this,void 0,void 0,function(){var _e;return l(this,function(De){switch(De.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=bo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),_e=Tt(ye),[4,this.renderStack(_e)];case 1:return De.sent(),this.applyEffects([]),[2,this.canvas]}})})},le}(di),xi=function(he){return he instanceof cf||he instanceof lf?!0:he instanceof af&&he.type!==nc&&he.type!==zd},vi=function(he,le){switch(he){case 0:return j(le);case 2:return K(le);case 1:default:return te(le)}},qi=function(he){switch(he){case 1:return"center";case 2:return"right";case 0:default:return"left"}},fs=["-apple-system","system-ui"],Bs=function(he){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?he.filter(function(le){return fs.indexOf(le)===-1}):he},no=function(he){i(le,he);function le(ye,_e){var De=he.call(this,ye,_e)||this;return De.canvas=_e.canvas?_e.canvas:document.createElement("canvas"),De.ctx=De.canvas.getContext("2d"),De.options=_e,De.canvas.width=Math.floor(_e.width*_e.scale),De.canvas.height=Math.floor(_e.height*_e.scale),De.canvas.style.width=_e.width+"px",De.canvas.style.height=_e.height+"px",De.ctx.scale(De.options.scale,De.options.scale),De.ctx.translate(-_e.x,-_e.y),De.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+_e.width+"x"+_e.height+" at "+_e.x+","+_e.y+") with scale "+_e.scale),De}return le.prototype.render=function(ye){return a(this,void 0,void 0,function(){var _e,De;return l(this,function(it){switch(it.label){case 0:return _e=sf(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,ye),[4,rs(_e)];case 1:return De=it.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=bo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(De,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},le}(di),rs=function(he){return new Promise(function(le,ye){var _e=new Image;_e.onload=function(){le(_e)},_e.onerror=ye,_e.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(he))})},io=function(){function he(le){var ye=le.id,_e=le.enabled;this.id=ye,this.enabled=_e,this.start=Date.now()}return he.prototype.debug=function(){for(var le=[],ye=0;ye<arguments.length;ye++)le[ye]=arguments[ye];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,t([this.id,this.getTime()+"ms"],le)):this.info.apply(this,le))},he.prototype.getTime=function(){return Date.now()-this.start},he.prototype.info=function(){for(var le=[],ye=0;ye<arguments.length;ye++)le[ye]=arguments[ye];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,t([this.id,this.getTime()+"ms"],le))},he.prototype.warn=function(){for(var le=[],ye=0;ye<arguments.length;ye++)le[ye]=arguments[ye];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,t([this.id,this.getTime()+"ms"],le)):this.info.apply(this,le))},he.prototype.error=function(){for(var le=[],ye=0;ye<arguments.length;ye++)le[ye]=arguments[ye];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,t([this.id,this.getTime()+"ms"],le)):this.info.apply(this,le))},he.instances={},he}(),fo=function(){function he(le,ye){var _e;this.windowBounds=ye,this.instanceName="#"+he.instanceCount++,this.logger=new io({id:this.instanceName,enabled:le.logging}),this.cache=(_e=le.cache)!==null&&_e!==void 0?_e:new oh(this,le)}return he.instanceCount=1,he}(),ko=function(he,le){return le===void 0&&(le={}),Cs(he,le)};typeof window<"u"&&Hu.setContext(window);var Cs=function(he,le){return a(void 0,void 0,void 0,function(){var ye,_e,De,it,At,Rt,zt,Ir,Or,Xr,Fn,Vi,wi,Ri,js,os,ns,oo,ys,Xi,zs,mi,zs,Ys,ss,Ba,ic,sc,ga,Ol,Kl,Dl,ea,Ac,uu,Qf,dd,oA,pd,Ad;return l(this,function(Kd){switch(Kd.label){case 0:if(!he||typeof he!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(ye=he.ownerDocument,!ye)throw new Error("Element is not attached to a Document");if(_e=ye.defaultView,!_e)throw new Error("Document is not attached to a Window");return De={allowTaint:(Ys=le.allowTaint)!==null&&Ys!==void 0?Ys:!1,imageTimeout:(ss=le.imageTimeout)!==null&&ss!==void 0?ss:15e3,proxy:le.proxy,useCORS:(Ba=le.useCORS)!==null&&Ba!==void 0?Ba:!1},it=o({logging:(ic=le.logging)!==null&&ic!==void 0?ic:!0,cache:le.cache},De),At={windowWidth:(sc=le.windowWidth)!==null&&sc!==void 0?sc:_e.innerWidth,windowHeight:(ga=le.windowHeight)!==null&&ga!==void 0?ga:_e.innerHeight,scrollX:(Ol=le.scrollX)!==null&&Ol!==void 0?Ol:_e.pageXOffset,scrollY:(Kl=le.scrollY)!==null&&Kl!==void 0?Kl:_e.pageYOffset},Rt=new h(At.scrollX,At.scrollY,At.windowWidth,At.windowHeight),zt=new fo(it,Rt),Ir=(Dl=le.foreignObjectRendering)!==null&&Dl!==void 0?Dl:!1,Or={allowTaint:(ea=le.allowTaint)!==null&&ea!==void 0?ea:!1,onclone:le.onclone,ignoreElements:le.ignoreElements,inlineImages:Ir,copyStyles:Ir},zt.logger.debug("Starting document clone with size "+Rt.width+"x"+Rt.height+" scrolled to "+-Rt.left+","+-Rt.top),Xr=new QA(zt,he,Or),Fn=Xr.clonedReferenceElement,Fn?[4,Xr.toIFrame(ye,Rt)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Vi=Kd.sent(),wi=ld(Fn)||xm(Fn)?p(Fn.ownerDocument):f(zt,Fn),Ri=wi.width,js=wi.height,os=wi.left,ns=wi.top,oo=so(zt,Fn,le.backgroundColor),ys={canvas:le.canvas,backgroundColor:oo,scale:(uu=(Ac=le.scale)!==null&&Ac!==void 0?Ac:_e.devicePixelRatio)!==null&&uu!==void 0?uu:1,x:((Qf=le.x)!==null&&Qf!==void 0?Qf:0)+os,y:((dd=le.y)!==null&&dd!==void 0?dd:0)+ns,width:(oA=le.width)!==null&&oA!==void 0?oA:Math.ceil(Ri),height:(pd=le.height)!==null&&pd!==void 0?pd:Math.ceil(js)},Ir?(zt.logger.debug("Document cloned, using foreign object rendering"),zs=new no(zt,ys),[4,zs.render(Fn)]):[3,3];case 2:return Xi=Kd.sent(),[3,5];case 3:return zt.logger.debug("Document cloned, element located at "+os+","+ns+" with size "+Ri+"x"+js+" using computed rendering"),zt.logger.debug("Starting DOM parsing"),mi=cu(zt,Fn),oo===mi.styles.backgroundColor&&(mi.styles.backgroundColor=Kt.TRANSPARENT),zt.logger.debug("Starting renderer for element at "+ys.x+","+ys.y+" with size "+ys.width+"x"+ys.height),zs=new ti(zt,ys),[4,zs.render(mi)];case 4:Xi=Kd.sent(),Kd.label=5;case 5:return(!((Ad=le.removeContainer)!==null&&Ad!==void 0)||Ad)&&(QA.destroy(Vi)||zt.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),zt.logger.debug("Finished rendering"),[2,Xi]}})})},so=function(he,le,ye){var _e=le.ownerDocument,De=_e.documentElement?fn(he,getComputedStyle(_e.documentElement).backgroundColor):Kt.TRANSPARENT,it=_e.body?fn(he,getComputedStyle(_e.body).backgroundColor):Kt.TRANSPARENT,At=typeof ye=="string"?fn(he,ye):ye===null?Kt.TRANSPARENT:4294967295;return le===_e.documentElement?Ga(De)?Ga(it)?At:it:De:At};return ko})}(Xx)),Xx.exports}/*!
 * html2pdf.js v0.10.3
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */var OM;function mK(){return OM||(OM=1,function(n,r){(function(i,o){n.exports=o(dK,AK())})(self,function(e,i){return function(){var o={"./src/plugin/hyperlinks.js":function(h,f,p){p.r(f),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.string.link.js");var _=p("./src/worker.js"),g=p("./src/utils.js"),m=[],b={toContainer:_.default.prototype.toContainer,toPdf:_.default.prototype.toPdf};_.default.prototype.toContainer=function(){return b.toContainer.call(this).then(function(){if(this.opt.enableLinks){var S=this.prop.container,B=S.querySelectorAll("a"),F=(0,g.unitConvert)(S.getBoundingClientRect(),this.prop.pageSize.k);m=[],Array.prototype.forEach.call(B,function(O){for(var V=O.getClientRects(),X=0;X<V.length;X++){var Q=(0,g.unitConvert)(V[X],this.prop.pageSize.k);Q.left-=F.left,Q.top-=F.top;var ee=Math.floor(Q.top/this.prop.pageSize.inner.height)+1,ne=this.opt.margin[0]+Q.top%this.prop.pageSize.inner.height,Ae=this.opt.margin[1]+Q.left;m.push({page:ee,top:ne,left:Ae,clientRect:Q,link:O})}},this)}})},_.default.prototype.toPdf=function(){return b.toPdf.call(this).then(function(){if(this.opt.enableLinks){m.forEach(function(B){this.prop.pdf.setPage(B.page),this.prop.pdf.link(B.left,B.top,B.clientRect.width,B.clientRect.height,{url:B.link.href})},this);var S=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(S)}})}},"./src/plugin/jspdf-plugin.js":function(h,f,p){p.r(f),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");var _=p("jspdf");function g(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(x){return typeof x}:g=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},g(m)}_.jsPDF.getPageSize=function(m,b,x){if(g(m)==="object"){var v=m;m=v.orientation,b=v.unit||b,x=v.format||x}b=b||"mm",x=x||"a4",m=(""+(m||"P")).toLowerCase();var S=(""+x).toLowerCase(),B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(b){case"pt":var F=1;break;case"mm":var F=72/25.4;break;case"cm":var F=72/2.54;break;case"in":var F=72;break;case"px":var F=72/96;break;case"pc":var F=12;break;case"em":var F=12;break;case"ex":var F=6;break;default:throw"Invalid unit: "+b}if(B.hasOwnProperty(S))var O=B[S][1]/F,V=B[S][0]/F;else try{var O=x[1],V=x[0]}catch{throw new Error("Invalid format: "+x)}if(m==="p"||m==="portrait"){if(m="p",V>O){var X=V;V=O,O=X}}else if(m==="l"||m==="landscape"){if(m="l",O>V){var X=V;V=O,O=X}}else throw"Invalid orientation: "+m;var Q={width:V,height:O,unit:b,k:F};return Q},f.default=_.jsPDF},"./src/plugin/pagebreaks.js":function(h,f,p){p.r(f),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.array.slice.js"),p("./node_modules/core-js/modules/es.array.join.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.object.keys.js");var _=p("./src/worker.js"),g=p("./src/utils.js"),m={toContainer:_.default.prototype.toContainer};_.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},_.default.prototype.toContainer=function(){return m.toContainer.call(this).then(function(){var v=this.prop.container,S=this.prop.pageSize.inner.px.height,B=[].concat(this.opt.pagebreak.mode),F={avoidAll:B.indexOf("avoid-all")!==-1,css:B.indexOf("css")!==-1,legacy:B.indexOf("legacy")!==-1},O={},V=this;["before","after","avoid"].forEach(function(ee){var ne=F.avoidAll&&ee==="avoid";O[ee]=ne?[]:[].concat(V.opt.pagebreak[ee]||[]),O[ee].length>0&&(O[ee]=Array.prototype.slice.call(v.querySelectorAll(O[ee].join(", "))))});var X=v.querySelectorAll(".html2pdf__page-break");X=Array.prototype.slice.call(X);var Q=v.querySelectorAll("*");Array.prototype.forEach.call(Q,function(ne){var Ae={before:!1,after:F.legacy&&X.indexOf(ne)!==-1,avoid:F.avoidAll};if(F.css){var fe=window.getComputedStyle(ne),ce=["always","page","left","right"],G=["avoid","avoid-page"];Ae={before:Ae.before||ce.indexOf(fe.breakBefore||fe.pageBreakBefore)!==-1,after:Ae.after||ce.indexOf(fe.breakAfter||fe.pageBreakAfter)!==-1,avoid:Ae.avoid||G.indexOf(fe.breakInside||fe.pageBreakInside)!==-1}}Object.keys(Ae).forEach(function(U){Ae[U]=Ae[U]||O[U].indexOf(ne)!==-1});var Z=ne.getBoundingClientRect();if(Ae.avoid&&!Ae.before){var z=Math.floor(Z.top/S),k=Math.floor(Z.bottom/S),R=Math.abs(Z.bottom-Z.top)/S;k!==z&&R<=1&&(Ae.before=!0)}if(Ae.before){var N=(0,g.createElement)("div",{style:{display:"block",height:S-Z.top%S+"px"}});ne.parentNode.insertBefore(N,ne)}if(Ae.after){var N=(0,g.createElement)("div",{style:{display:"block",height:S-Z.bottom%S+"px"}});ne.parentNode.insertBefore(N,ne.nextSibling)}})})}},"./src/utils.js":function(h,f,p){p.r(f),p.d(f,{objType:function(){return g},createElement:function(){return m},cloneNode:function(){return b},unitConvert:function(){return x},toPx:function(){return v}}),p("./node_modules/core-js/modules/es.number.constructor.js"),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");function _(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_=function(F){return typeof F}:_=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},_(S)}var g=function(B){var F=_(B);return F==="undefined"?"undefined":F==="string"||B instanceof String?"string":F==="number"||B instanceof Number?"number":F==="function"||B instanceof Function?"function":B&&B.constructor===Array?"array":B&&B.nodeType===1?"element":F==="object"?"object":"unknown"},m=function(B,F){var O=document.createElement(B);if(F.className&&(O.className=F.className),F.innerHTML){O.innerHTML=F.innerHTML;for(var V=O.getElementsByTagName("script"),X=V.length;X-- >0;null)V[X].parentNode.removeChild(V[X])}for(var Q in F.style)O.style[Q]=F.style[Q];return O},b=function S(B,F){for(var O=B.nodeType===3?document.createTextNode(B.nodeValue):B.cloneNode(!1),V=B.firstChild;V;V=V.nextSibling)(F===!0||V.nodeType!==1||V.nodeName!=="SCRIPT")&&O.appendChild(S(V,F));return B.nodeType===1&&(B.nodeName==="CANVAS"?(O.width=B.width,O.height=B.height,O.getContext("2d").drawImage(B,0,0)):(B.nodeName==="TEXTAREA"||B.nodeName==="SELECT")&&(O.value=B.value),O.addEventListener("load",function(){O.scrollTop=B.scrollTop,O.scrollLeft=B.scrollLeft},!0)),O},x=function(B,F){if(g(B)==="number")return B*72/96/F;var O={};for(var V in B)O[V]=B[V]*72/96/F;return O},v=function(B,F){return Math.floor(B*F/72*96)}},"./src/worker.js":function(h,f,p){p.r(f),p("./node_modules/core-js/modules/es.object.assign.js"),p("./node_modules/core-js/modules/es.array.map.js"),p("./node_modules/core-js/modules/es.object.keys.js"),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.regexp.to-string.js"),p("./node_modules/core-js/modules/es.function.name.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js");var _=p("jspdf"),g=p("html2canvas"),m=p("./src/utils.js"),b=p("./node_modules/es6-promise/dist/es6-promise.js"),x=p.n(b),v=x().Promise,S=function B(F){var O=Object.assign(B.convert(v.resolve()),JSON.parse(JSON.stringify(B.template))),V=B.convert(v.resolve(),O);return V=V.setProgress(1,B,1,[B]),V=V.set(F),V};S.prototype=Object.create(v.prototype),S.prototype.constructor=S,S.convert=function(F,O){return F.__proto__=O||S.prototype,F},S.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},S.prototype.from=function(F,O){function V(X){switch((0,m.objType)(X)){case"string":return"string";case"element":return X.nodeName.toLowerCase&&X.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(O=O||V(F),O){case"string":return this.set({src:(0,m.createElement)("div",{innerHTML:F})});case"element":return this.set({src:F});case"canvas":return this.set({canvas:F});case"img":return this.set({img:F});default:return this.error("Unknown source type.")}})},S.prototype.to=function(F){switch(F){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},S.prototype.toContainer=function(){var F=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(F).then(function(){var V={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},X={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};V.opacity=0;var Q=(0,m.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,m.createElement)("div",{className:"html2pdf__overlay",style:V}),this.prop.container=(0,m.createElement)("div",{className:"html2pdf__container",style:X}),this.prop.container.appendChild(Q),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},S.prototype.toCanvas=function(){var F=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(F).then(function(){var V=Object.assign({},this.opt.html2canvas);return delete V.onrendered,g(this.prop.container,V)}).then(function(V){var X=this.opt.html2canvas.onrendered||function(){};X(V),this.prop.canvas=V,document.body.removeChild(this.prop.overlay)})},S.prototype.toImg=function(){var F=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(F).then(function(){var V=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=V})},S.prototype.toPdf=function(){var F=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(F).then(function(){var V=this.prop.canvas,X=this.opt,Q=V.height,ee=Math.floor(V.width*this.prop.pageSize.inner.ratio),ne=Math.ceil(Q/ee),Ae=this.prop.pageSize.inner.height,fe=document.createElement("canvas"),ce=fe.getContext("2d");fe.width=V.width,fe.height=ee,this.prop.pdf=this.prop.pdf||new _.jsPDF(X.jsPDF);for(var G=0;G<ne;G++){G===ne-1&&Q%ee!==0&&(fe.height=Q%ee,Ae=fe.height*this.prop.pageSize.inner.width/fe.width);var Z=fe.width,z=fe.height;ce.fillStyle="white",ce.fillRect(0,0,Z,z),ce.drawImage(V,0,G*ee,Z,z,0,0,Z,z),G&&this.prop.pdf.addPage();var k=fe.toDataURL("image/"+X.image.type,X.image.quality);this.prop.pdf.addImage(k,X.image.type,X.margin[1],X.margin[0],this.prop.pageSize.inner.width,Ae)}})},S.prototype.output=function(F,O,V){return V=V||"pdf",V.toLowerCase()==="img"||V.toLowerCase()==="image"?this.outputImg(F,O):this.outputPdf(F,O)},S.prototype.outputPdf=function(F,O){var V=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(V).then(function(){return this.prop.pdf.output(F,O)})},S.prototype.outputImg=function(F,O){var V=[function(){return this.prop.img||this.toImg()}];return this.thenList(V).then(function(){switch(F){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+F+'" is not supported.'}})},S.prototype.save=function(F){var O=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(O).set(F?{filename:F}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},S.prototype.set=function(F){if((0,m.objType)(F)!=="object")return this;var O=Object.keys(F||{}).map(function(V){switch(V){case"margin":return this.setMargin.bind(this,F.margin);case"jsPDF":return function(){return this.opt.jsPDF=F.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,F.pageSize);default:return V in S.template.prop?function(){this.prop[V]=F[V]}:function(){this.opt[V]=F[V]}}},this);return this.then(function(){return this.thenList(O)})},S.prototype.get=function(F,O){return this.then(function(){var X=F in S.template.prop?this.prop[F]:this.opt[F];return O?O(X):X})},S.prototype.setMargin=function(F){return this.then(function(){switch((0,m.objType)(F)){case"number":F=[F,F,F,F];case"array":if(F.length===2&&(F=[F[0],F[1],F[0],F[1]]),F.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=F}).then(this.setPageSize)},S.prototype.setPageSize=function(F){return this.then(function(){F=F||_.jsPDF.getPageSize(this.opt.jsPDF),F.hasOwnProperty("inner")||(F.inner={width:F.width-this.opt.margin[1]-this.opt.margin[3],height:F.height-this.opt.margin[0]-this.opt.margin[2]},F.inner.px={width:(0,m.toPx)(F.inner.width,F.k),height:(0,m.toPx)(F.inner.height,F.k)},F.inner.ratio=F.inner.height/F.inner.width),this.prop.pageSize=F})},S.prototype.setProgress=function(F,O,V,X){return F!=null&&(this.progress.val=F),O!=null&&(this.progress.state=O),V!=null&&(this.progress.n=V),X!=null&&(this.progress.stack=X),this.progress.ratio=this.progress.val/this.progress.state,this},S.prototype.updateProgress=function(F,O,V,X){return this.setProgress(F?this.progress.val+F:null,O||null,V?this.progress.n+V:null,X?this.progress.stack.concat(X):null)},S.prototype.then=function(F,O){var V=this;return this.thenCore(F,O,function(Q,ee){return V.updateProgress(null,null,1,[Q]),v.prototype.then.call(this,function(Ae){return V.updateProgress(null,Q),Ae}).then(Q,ee).then(function(Ae){return V.updateProgress(1),Ae})})},S.prototype.thenCore=function(F,O,V){V=V||v.prototype.then;var X=this;F&&(F=F.bind(X)),O&&(O=O.bind(X));var Q=v.toString().indexOf("[native code]")!==-1&&v.name==="Promise",ee=Q?X:S.convert(Object.assign({},X),v.prototype),ne=V.call(ee,F,O);return S.convert(ne,X.__proto__)},S.prototype.thenExternal=function(F,O){return v.prototype.then.call(this,F,O)},S.prototype.thenList=function(F){var O=this;return F.forEach(function(X){O=O.thenCore(X)}),O},S.prototype.catch=function(B){B&&(B=B.bind(this));var F=v.prototype.catch.call(this,B);return S.convert(F,this)},S.prototype.catchExternal=function(F){return v.prototype.catch.call(this,F)},S.prototype.error=function(F){return this.then(function(){throw new Error(F)})},S.prototype.using=S.prototype.set,S.prototype.saveAs=S.prototype.save,S.prototype.export=S.prototype.output,S.prototype.run=S.prototype.then,f.default=S},"./node_modules/core-js/internals/a-function.js":function(h){h.exports=function(f){if(typeof f!="function")throw TypeError(String(f)+" is not a function");return f}},"./node_modules/core-js/internals/a-possible-prototype.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-object.js");h.exports=function(g){if(!_(g)&&g!==null)throw TypeError("Can't set "+String(g)+" as a prototype");return g}},"./node_modules/core-js/internals/add-to-unscopables.js":function(h,f,p){var _=p("./node_modules/core-js/internals/well-known-symbol.js"),g=p("./node_modules/core-js/internals/object-create.js"),m=p("./node_modules/core-js/internals/object-define-property.js"),b=_("unscopables"),x=Array.prototype;x[b]==null&&m.f(x,b,{configurable:!0,value:g(null)}),h.exports=function(v){x[b][v]=!0}},"./node_modules/core-js/internals/an-object.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-object.js");h.exports=function(g){if(!_(g))throw TypeError(String(g)+" is not an object");return g}},"./node_modules/core-js/internals/array-for-each.js":function(h,f,p){var _=p("./node_modules/core-js/internals/array-iteration.js").forEach,g=p("./node_modules/core-js/internals/array-method-is-strict.js"),m=g("forEach");h.exports=m?[].forEach:function(x){return _(this,x,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-indexed-object.js"),g=p("./node_modules/core-js/internals/to-length.js"),m=p("./node_modules/core-js/internals/to-absolute-index.js"),b=function(x){return function(v,S,B){var F=_(v),O=g(F.length),V=m(B,O),X;if(x&&S!=S){for(;O>V;)if(X=F[V++],X!=X)return!0}else for(;O>V;V++)if((x||V in F)&&F[V]===S)return x||V||0;return!x&&-1}};h.exports={includes:b(!0),indexOf:b(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(h,f,p){var _=p("./node_modules/core-js/internals/function-bind-context.js"),g=p("./node_modules/core-js/internals/indexed-object.js"),m=p("./node_modules/core-js/internals/to-object.js"),b=p("./node_modules/core-js/internals/to-length.js"),x=p("./node_modules/core-js/internals/array-species-create.js"),v=[].push,S=function(B){var F=B==1,O=B==2,V=B==3,X=B==4,Q=B==6,ee=B==7,ne=B==5||Q;return function(Ae,fe,ce,G){for(var Z=m(Ae),z=g(Z),k=_(fe,ce,3),R=b(z.length),N=0,U=G||x,Y=F?U(Ae,R):O||ee?U(Ae,0):void 0,de,J;R>N;N++)if((ne||N in z)&&(de=z[N],J=k(de,N,Z),B))if(F)Y[N]=J;else if(J)switch(B){case 3:return!0;case 5:return de;case 6:return N;case 2:v.call(Y,de)}else switch(B){case 4:return!1;case 7:v.call(Y,de)}return Q?-1:V||X?X:Y}};h.exports={forEach:S(0),map:S(1),filter:S(2),some:S(3),every:S(4),find:S(5),findIndex:S(6),filterReject:S(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js"),g=p("./node_modules/core-js/internals/well-known-symbol.js"),m=p("./node_modules/core-js/internals/engine-v8-version.js"),b=g("species");h.exports=function(x){return m>=51||!_(function(){var v=[],S=v.constructor={};return S[b]=function(){return{foo:1}},v[x](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js");h.exports=function(g,m){var b=[][g];return!!b&&_(function(){b.call(null,m||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-object.js"),g=p("./node_modules/core-js/internals/is-array.js"),m=p("./node_modules/core-js/internals/well-known-symbol.js"),b=m("species");h.exports=function(x){var v;return g(x)&&(v=x.constructor,typeof v=="function"&&(v===Array||g(v.prototype))?v=void 0:_(v)&&(v=v[b],v===null&&(v=void 0))),v===void 0?Array:v}},"./node_modules/core-js/internals/array-species-create.js":function(h,f,p){var _=p("./node_modules/core-js/internals/array-species-constructor.js");h.exports=function(g,m){return new(_(g))(m===0?0:m)}},"./node_modules/core-js/internals/classof-raw.js":function(h){var f={}.toString;h.exports=function(p){return f.call(p).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-string-tag-support.js"),g=p("./node_modules/core-js/internals/classof-raw.js"),m=p("./node_modules/core-js/internals/well-known-symbol.js"),b=m("toStringTag"),x=g(function(){return arguments}())=="Arguments",v=function(S,B){try{return S[B]}catch{}};h.exports=_?g:function(S){var B,F,O;return S===void 0?"Undefined":S===null?"Null":typeof(F=v(B=Object(S),b))=="string"?F:x?g(B):(O=g(B))=="Object"&&typeof B.callee=="function"?"Arguments":O}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(h,f,p){var _=p("./node_modules/core-js/internals/has.js"),g=p("./node_modules/core-js/internals/own-keys.js"),m=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),b=p("./node_modules/core-js/internals/object-define-property.js");h.exports=function(x,v){for(var S=g(v),B=b.f,F=m.f,O=0;O<S.length;O++){var V=S[O];_(x,V)||B(x,V,F(v,V))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js");h.exports=!_(function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})},"./node_modules/core-js/internals/create-html.js":function(h,f,p){var _=p("./node_modules/core-js/internals/require-object-coercible.js"),g=p("./node_modules/core-js/internals/to-string.js"),m=/"/g;h.exports=function(b,x,v,S){var B=g(_(b)),F="<"+x;return v!==""&&(F+=" "+v+'="'+g(S).replace(m,"&quot;")+'"'),F+">"+B+"</"+x+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(h,f,p){var _=p("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,g=p("./node_modules/core-js/internals/object-create.js"),m=p("./node_modules/core-js/internals/create-property-descriptor.js"),b=p("./node_modules/core-js/internals/set-to-string-tag.js"),x=p("./node_modules/core-js/internals/iterators.js"),v=function(){return this};h.exports=function(S,B,F){var O=B+" Iterator";return S.prototype=g(_,{next:m(1,F)}),b(S,O,!1,!0),x[O]=v,S}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/object-define-property.js"),m=p("./node_modules/core-js/internals/create-property-descriptor.js");h.exports=_?function(b,x,v){return g.f(b,x,m(1,v))}:function(b,x,v){return b[x]=v,b}},"./node_modules/core-js/internals/create-property-descriptor.js":function(h){h.exports=function(f,p){return{enumerable:!(f&1),configurable:!(f&2),writable:!(f&4),value:p}}},"./node_modules/core-js/internals/create-property.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-property-key.js"),g=p("./node_modules/core-js/internals/object-define-property.js"),m=p("./node_modules/core-js/internals/create-property-descriptor.js");h.exports=function(b,x,v){var S=_(x);S in b?g.f(b,S,m(0,v)):b[S]=v}},"./node_modules/core-js/internals/define-iterator.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/create-iterator-constructor.js"),m=p("./node_modules/core-js/internals/object-get-prototype-of.js"),b=p("./node_modules/core-js/internals/object-set-prototype-of.js"),x=p("./node_modules/core-js/internals/set-to-string-tag.js"),v=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),S=p("./node_modules/core-js/internals/redefine.js"),B=p("./node_modules/core-js/internals/well-known-symbol.js"),F=p("./node_modules/core-js/internals/is-pure.js"),O=p("./node_modules/core-js/internals/iterators.js"),V=p("./node_modules/core-js/internals/iterators-core.js"),X=V.IteratorPrototype,Q=V.BUGGY_SAFARI_ITERATORS,ee=B("iterator"),ne="keys",Ae="values",fe="entries",ce=function(){return this};h.exports=function(G,Z,z,k,R,N,U){g(z,Z,k);var Y=function(Be){if(Be===R&&Ue)return Ue;if(!Q&&Be in xe)return xe[Be];switch(Be){case ne:return function(){return new z(this,Be)};case Ae:return function(){return new z(this,Be)};case fe:return function(){return new z(this,Be)}}return function(){return new z(this)}},de=Z+" Iterator",J=!1,xe=G.prototype,Te=xe[ee]||xe["@@iterator"]||R&&xe[R],Ue=!Q&&Te||Y(R),pe=Z=="Array"&&xe.entries||Te,Oe,re,ie;if(pe&&(Oe=m(pe.call(new G)),X!==Object.prototype&&Oe.next&&(!F&&m(Oe)!==X&&(b?b(Oe,X):typeof Oe[ee]!="function"&&v(Oe,ee,ce)),x(Oe,de,!0,!0),F&&(O[de]=ce))),R==Ae&&Te&&Te.name!==Ae&&(J=!0,Ue=function(){return Te.call(this)}),(!F||U)&&xe[ee]!==Ue&&v(xe,ee,Ue),O[Z]=Ue,R)if(re={values:Y(Ae),keys:N?Ue:Y(ne),entries:Y(fe)},U)for(ie in re)(Q||J||!(ie in xe))&&S(xe,ie,re[ie]);else _({target:Z,proto:!0,forced:Q||J},re);return re}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(h,f,p){var _=p("./node_modules/core-js/internals/path.js"),g=p("./node_modules/core-js/internals/has.js"),m=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),b=p("./node_modules/core-js/internals/object-define-property.js").f;h.exports=function(x){var v=_.Symbol||(_.Symbol={});g(v,x)||b(v,x,{value:m.f(x)})}},"./node_modules/core-js/internals/descriptors.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js");h.exports=!_(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/is-object.js"),m=_.document,b=g(m)&&g(m.createElement);h.exports=function(x){return b?m.createElement(x):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(h){h.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(h,f,p){var _=p("./node_modules/core-js/internals/get-built-in.js");h.exports=_("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/engine-user-agent.js"),m=_.process,b=_.Deno,x=m&&m.versions||b&&b.version,v=x&&x.v8,S,B;v?(S=v.split("."),B=S[0]<4?1:S[0]+S[1]):g&&(S=g.match(/Edge\/(\d+)/),(!S||S[1]>=74)&&(S=g.match(/Chrome\/(\d+)/),S&&(B=S[1]))),h.exports=B&&+B},"./node_modules/core-js/internals/enum-bug-keys.js":function(h){h.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),b=p("./node_modules/core-js/internals/redefine.js"),x=p("./node_modules/core-js/internals/set-global.js"),v=p("./node_modules/core-js/internals/copy-constructor-properties.js"),S=p("./node_modules/core-js/internals/is-forced.js");h.exports=function(B,F){var O=B.target,V=B.global,X=B.stat,Q,ee,ne,Ae,fe,ce;if(V?ee=_:X?ee=_[O]||x(O,{}):ee=(_[O]||{}).prototype,ee)for(ne in F){if(fe=F[ne],B.noTargetGet?(ce=g(ee,ne),Ae=ce&&ce.value):Ae=ee[ne],Q=S(V?ne:O+(X?".":"#")+ne,B.forced),!Q&&Ae!==void 0){if(typeof fe==typeof Ae)continue;v(fe,Ae)}(B.sham||Ae&&Ae.sham)&&m(fe,"sham",!0),b(ee,ne,fe,B)}}},"./node_modules/core-js/internals/fails.js":function(h){h.exports=function(f){try{return!!f()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(h,f,p){var _=p("./node_modules/core-js/internals/a-function.js");h.exports=function(g,m,b){if(_(g),m===void 0)return g;switch(b){case 0:return function(){return g.call(m)};case 1:return function(x){return g.call(m,x)};case 2:return function(x,v){return g.call(m,x,v)};case 3:return function(x,v,S){return g.call(m,x,v,S)}}return function(){return g.apply(m,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=function(m){return typeof m=="function"?m:void 0};h.exports=function(m,b){return arguments.length<2?g(_[m]):_[m]&&_[m][b]}},"./node_modules/core-js/internals/global.js":function(h){var f=function(p){return p&&p.Math==Math&&p};h.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof So=="object"&&So)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-object.js"),g={}.hasOwnProperty;h.exports=Object.hasOwn||function(b,x){return g.call(_(b),x)}},"./node_modules/core-js/internals/hidden-keys.js":function(h){h.exports={}},"./node_modules/core-js/internals/html.js":function(h,f,p){var _=p("./node_modules/core-js/internals/get-built-in.js");h.exports=_("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/fails.js"),m=p("./node_modules/core-js/internals/document-create-element.js");h.exports=!_&&!g(function(){return Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js"),g=p("./node_modules/core-js/internals/classof-raw.js"),m="".split;h.exports=_(function(){return!Object("z").propertyIsEnumerable(0)})?function(b){return g(b)=="String"?m.call(b,""):Object(b)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-object.js"),g=p("./node_modules/core-js/internals/object-set-prototype-of.js");h.exports=function(m,b,x){var v,S;return g&&typeof(v=b.constructor)=="function"&&v!==x&&_(S=v.prototype)&&S!==x.prototype&&g(m,S),m}},"./node_modules/core-js/internals/inspect-source.js":function(h,f,p){var _=p("./node_modules/core-js/internals/shared-store.js"),g=Function.toString;typeof _.inspectSource!="function"&&(_.inspectSource=function(m){return g.call(m)}),h.exports=_.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(h,f,p){var _=p("./node_modules/core-js/internals/native-weak-map.js"),g=p("./node_modules/core-js/internals/global.js"),m=p("./node_modules/core-js/internals/is-object.js"),b=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=p("./node_modules/core-js/internals/has.js"),v=p("./node_modules/core-js/internals/shared-store.js"),S=p("./node_modules/core-js/internals/shared-key.js"),B=p("./node_modules/core-js/internals/hidden-keys.js"),F="Object already initialized",O=g.WeakMap,V,X,Q,ee=function(z){return Q(z)?X(z):V(z,{})},ne=function(z){return function(k){var R;if(!m(k)||(R=X(k)).type!==z)throw TypeError("Incompatible receiver, "+z+" required");return R}};if(_||v.state){var Ae=v.state||(v.state=new O),fe=Ae.get,ce=Ae.has,G=Ae.set;V=function(z,k){if(ce.call(Ae,z))throw new TypeError(F);return k.facade=z,G.call(Ae,z,k),k},X=function(z){return fe.call(Ae,z)||{}},Q=function(z){return ce.call(Ae,z)}}else{var Z=S("state");B[Z]=!0,V=function(z,k){if(x(z,Z))throw new TypeError(F);return k.facade=z,b(z,Z,k),k},X=function(z){return x(z,Z)?z[Z]:{}},Q=function(z){return x(z,Z)}}h.exports={set:V,get:X,has:Q,enforce:ee,getterFor:ne}},"./node_modules/core-js/internals/is-array.js":function(h,f,p){var _=p("./node_modules/core-js/internals/classof-raw.js");h.exports=Array.isArray||function(m){return _(m)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js"),g=/#|\.prototype\./,m=function(B,F){var O=x[b(B)];return O==S?!0:O==v?!1:typeof F=="function"?_(F):!!F},b=m.normalize=function(B){return String(B).replace(g,".").toLowerCase()},x=m.data={},v=m.NATIVE="N",S=m.POLYFILL="P";h.exports=m},"./node_modules/core-js/internals/is-object.js":function(h){h.exports=function(f){return typeof f=="object"?f!==null:typeof f=="function"}},"./node_modules/core-js/internals/is-pure.js":function(h){h.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(h,f,p){var _=p("./node_modules/core-js/internals/get-built-in.js"),g=p("./node_modules/core-js/internals/use-symbol-as-uid.js");h.exports=g?function(m){return typeof m=="symbol"}:function(m){var b=_("Symbol");return typeof b=="function"&&Object(m)instanceof b}},"./node_modules/core-js/internals/iterators-core.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js"),g=p("./node_modules/core-js/internals/object-get-prototype-of.js"),m=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),b=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),v=p("./node_modules/core-js/internals/is-pure.js"),S=x("iterator"),B=!1,F=function(){return this},O,V,X;[].keys&&(X=[].keys(),"next"in X?(V=g(g(X)),V!==Object.prototype&&(O=V)):B=!0);var Q=O==null||_(function(){var ee={};return O[S].call(ee)!==ee});Q&&(O={}),(!v||Q)&&!b(O,S)&&m(O,S,F),h.exports={IteratorPrototype:O,BUGGY_SAFARI_ITERATORS:B}},"./node_modules/core-js/internals/iterators.js":function(h){h.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(h,f,p){var _=p("./node_modules/core-js/internals/engine-v8-version.js"),g=p("./node_modules/core-js/internals/fails.js");h.exports=!!Object.getOwnPropertySymbols&&!g(function(){var m=Symbol();return!String(m)||!(Object(m)instanceof Symbol)||!Symbol.sham&&_&&_<41})},"./node_modules/core-js/internals/native-weak-map.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/inspect-source.js"),m=_.WeakMap;h.exports=typeof m=="function"&&/native code/.test(g(m))},"./node_modules/core-js/internals/object-assign.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/fails.js"),m=p("./node_modules/core-js/internals/object-keys.js"),b=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),x=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),v=p("./node_modules/core-js/internals/to-object.js"),S=p("./node_modules/core-js/internals/indexed-object.js"),B=Object.assign,F=Object.defineProperty;h.exports=!B||g(function(){if(_&&B({b:1},B(F({},"a",{enumerable:!0,get:function(){F(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var O={},V={},X=Symbol(),Q="abcdefghijklmnopqrst";return O[X]=7,Q.split("").forEach(function(ee){V[ee]=ee}),B({},O)[X]!=7||m(B({},V)).join("")!=Q})?function(V,X){for(var Q=v(V),ee=arguments.length,ne=1,Ae=b.f,fe=x.f;ee>ne;)for(var ce=S(arguments[ne++]),G=Ae?m(ce).concat(Ae(ce)):m(ce),Z=G.length,z=0,k;Z>z;)k=G[z++],(!_||fe.call(ce,k))&&(Q[k]=ce[k]);return Q}:B},"./node_modules/core-js/internals/object-create.js":function(h,f,p){var _=p("./node_modules/core-js/internals/an-object.js"),g=p("./node_modules/core-js/internals/object-define-properties.js"),m=p("./node_modules/core-js/internals/enum-bug-keys.js"),b=p("./node_modules/core-js/internals/hidden-keys.js"),x=p("./node_modules/core-js/internals/html.js"),v=p("./node_modules/core-js/internals/document-create-element.js"),S=p("./node_modules/core-js/internals/shared-key.js"),B=">",F="<",O="prototype",V="script",X=S("IE_PROTO"),Q=function(){},ee=function(G){return F+V+B+G+F+"/"+V+B},ne=function(G){G.write(ee("")),G.close();var Z=G.parentWindow.Object;return G=null,Z},Ae=function(){var G=v("iframe"),Z="java"+V+":",z;if(G.style)return G.style.display="none",x.appendChild(G),G.src=String(Z),z=G.contentWindow.document,z.open(),z.write(ee("document.F=Object")),z.close(),z.F},fe,ce=function(){try{fe=new ActiveXObject("htmlfile")}catch{}ce=document.domain&&fe?ne(fe):Ae()||ne(fe);for(var G=m.length;G--;)delete ce[O][m[G]];return ce()};b[X]=!0,h.exports=Object.create||function(Z,z){var k;return Z!==null?(Q[O]=_(Z),k=new Q,Q[O]=null,k[X]=Z):k=ce(),z===void 0?k:g(k,z)}},"./node_modules/core-js/internals/object-define-properties.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/object-define-property.js"),m=p("./node_modules/core-js/internals/an-object.js"),b=p("./node_modules/core-js/internals/object-keys.js");h.exports=_?Object.defineProperties:function(v,S){m(v);for(var B=b(S),F=B.length,O=0,V;F>O;)g.f(v,V=B[O++],S[V]);return v}},"./node_modules/core-js/internals/object-define-property.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/ie8-dom-define.js"),m=p("./node_modules/core-js/internals/an-object.js"),b=p("./node_modules/core-js/internals/to-property-key.js"),x=Object.defineProperty;f.f=_?x:function(S,B,F){if(m(S),B=b(B),m(F),g)try{return x(S,B,F)}catch{}if("get"in F||"set"in F)throw TypeError("Accessors not supported");return"value"in F&&(S[B]=F.value),S}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),m=p("./node_modules/core-js/internals/create-property-descriptor.js"),b=p("./node_modules/core-js/internals/to-indexed-object.js"),x=p("./node_modules/core-js/internals/to-property-key.js"),v=p("./node_modules/core-js/internals/has.js"),S=p("./node_modules/core-js/internals/ie8-dom-define.js"),B=Object.getOwnPropertyDescriptor;f.f=_?B:function(O,V){if(O=b(O),V=x(V),S)try{return B(O,V)}catch{}if(v(O,V))return m(!g.f.call(O,V),O[V])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-indexed-object.js"),g=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,m={}.toString,b=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],x=function(v){try{return g(v)}catch{return b.slice()}};h.exports.f=function(S){return b&&m.call(S)=="[object Window]"?x(S):g(_(S))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(h,f,p){var _=p("./node_modules/core-js/internals/object-keys-internal.js"),g=p("./node_modules/core-js/internals/enum-bug-keys.js"),m=g.concat("length","prototype");f.f=Object.getOwnPropertyNames||function(x){return _(x,m)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(h,f){f.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(h,f,p){var _=p("./node_modules/core-js/internals/has.js"),g=p("./node_modules/core-js/internals/to-object.js"),m=p("./node_modules/core-js/internals/shared-key.js"),b=p("./node_modules/core-js/internals/correct-prototype-getter.js"),x=m("IE_PROTO"),v=Object.prototype;h.exports=b?Object.getPrototypeOf:function(S){return S=g(S),_(S,x)?S[x]:typeof S.constructor=="function"&&S instanceof S.constructor?S.constructor.prototype:S instanceof Object?v:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(h,f,p){var _=p("./node_modules/core-js/internals/has.js"),g=p("./node_modules/core-js/internals/to-indexed-object.js"),m=p("./node_modules/core-js/internals/array-includes.js").indexOf,b=p("./node_modules/core-js/internals/hidden-keys.js");h.exports=function(x,v){var S=g(x),B=0,F=[],O;for(O in S)!_(b,O)&&_(S,O)&&F.push(O);for(;v.length>B;)_(S,O=v[B++])&&(~m(F,O)||F.push(O));return F}},"./node_modules/core-js/internals/object-keys.js":function(h,f,p){var _=p("./node_modules/core-js/internals/object-keys-internal.js"),g=p("./node_modules/core-js/internals/enum-bug-keys.js");h.exports=Object.keys||function(b){return _(b,g)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(h,f){var p={}.propertyIsEnumerable,_=Object.getOwnPropertyDescriptor,g=_&&!p.call({1:2},1);f.f=g?function(b){var x=_(this,b);return!!x&&x.enumerable}:p},"./node_modules/core-js/internals/object-set-prototype-of.js":function(h,f,p){var _=p("./node_modules/core-js/internals/an-object.js"),g=p("./node_modules/core-js/internals/a-possible-prototype.js");h.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m=!1,b={},x;try{x=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,x.call(b,[]),m=b instanceof Array}catch{}return function(S,B){return _(S),g(B),m?x.call(S,B):S.__proto__=B,S}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-string-tag-support.js"),g=p("./node_modules/core-js/internals/classof.js");h.exports=_?{}.toString:function(){return"[object "+g(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-object.js");h.exports=function(g,m){var b,x;if(m==="string"&&typeof(b=g.toString)=="function"&&!_(x=b.call(g))||typeof(b=g.valueOf)=="function"&&!_(x=b.call(g))||m!=="string"&&typeof(b=g.toString)=="function"&&!_(x=b.call(g)))return x;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(h,f,p){var _=p("./node_modules/core-js/internals/get-built-in.js"),g=p("./node_modules/core-js/internals/object-get-own-property-names.js"),m=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),b=p("./node_modules/core-js/internals/an-object.js");h.exports=_("Reflect","ownKeys")||function(v){var S=g.f(b(v)),B=m.f;return B?S.concat(B(v)):S}},"./node_modules/core-js/internals/path.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js");h.exports=_},"./node_modules/core-js/internals/redefine.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),m=p("./node_modules/core-js/internals/has.js"),b=p("./node_modules/core-js/internals/set-global.js"),x=p("./node_modules/core-js/internals/inspect-source.js"),v=p("./node_modules/core-js/internals/internal-state.js"),S=v.get,B=v.enforce,F=String(String).split("String");(h.exports=function(O,V,X,Q){var ee=Q?!!Q.unsafe:!1,ne=Q?!!Q.enumerable:!1,Ae=Q?!!Q.noTargetGet:!1,fe;if(typeof X=="function"&&(typeof V=="string"&&!m(X,"name")&&g(X,"name",V),fe=B(X),fe.source||(fe.source=F.join(typeof V=="string"?V:""))),O===_){ne?O[V]=X:b(V,X);return}else ee?!Ae&&O[V]&&(ne=!0):delete O[V];ne?O[V]=X:g(O,V,X)})(Function.prototype,"toString",function(){return typeof this=="function"&&S(this).source||x(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(h,f,p){var _=p("./node_modules/core-js/internals/an-object.js");h.exports=function(){var g=_(this),m="";return g.global&&(m+="g"),g.ignoreCase&&(m+="i"),g.multiline&&(m+="m"),g.dotAll&&(m+="s"),g.unicode&&(m+="u"),g.sticky&&(m+="y"),m}},"./node_modules/core-js/internals/require-object-coercible.js":function(h){h.exports=function(f){if(f==null)throw TypeError("Can't call method on "+f);return f}},"./node_modules/core-js/internals/set-global.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js");h.exports=function(g,m){try{Object.defineProperty(_,g,{value:m,configurable:!0,writable:!0})}catch{_[g]=m}return m}},"./node_modules/core-js/internals/set-to-string-tag.js":function(h,f,p){var _=p("./node_modules/core-js/internals/object-define-property.js").f,g=p("./node_modules/core-js/internals/has.js"),m=p("./node_modules/core-js/internals/well-known-symbol.js"),b=m("toStringTag");h.exports=function(x,v,S){x&&!g(x=S?x:x.prototype,b)&&_(x,b,{configurable:!0,value:v})}},"./node_modules/core-js/internals/shared-key.js":function(h,f,p){var _=p("./node_modules/core-js/internals/shared.js"),g=p("./node_modules/core-js/internals/uid.js"),m=_("keys");h.exports=function(b){return m[b]||(m[b]=g(b))}},"./node_modules/core-js/internals/shared-store.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/set-global.js"),m="__core-js_shared__",b=_[m]||g(m,{});h.exports=b},"./node_modules/core-js/internals/shared.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-pure.js"),g=p("./node_modules/core-js/internals/shared-store.js");(h.exports=function(m,b){return g[m]||(g[m]=b!==void 0?b:{})})("versions",[]).push({version:"3.16.0",mode:_?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(h,f,p){var _=p("./node_modules/core-js/internals/fails.js");h.exports=function(g){return _(function(){var m=""[g]('"');return m!==m.toLowerCase()||m.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-integer.js"),g=p("./node_modules/core-js/internals/to-string.js"),m=p("./node_modules/core-js/internals/require-object-coercible.js"),b=function(x){return function(v,S){var B=g(m(v)),F=_(S),O=B.length,V,X;return F<0||F>=O?x?"":void 0:(V=B.charCodeAt(F),V<55296||V>56319||F+1===O||(X=B.charCodeAt(F+1))<56320||X>57343?x?B.charAt(F):V:x?B.slice(F,F+2):(V-55296<<10)+(X-56320)+65536)}};h.exports={codeAt:b(!1),charAt:b(!0)}},"./node_modules/core-js/internals/string-trim.js":function(h,f,p){var _=p("./node_modules/core-js/internals/require-object-coercible.js"),g=p("./node_modules/core-js/internals/to-string.js"),m=p("./node_modules/core-js/internals/whitespaces.js"),b="["+m+"]",x=RegExp("^"+b+b+"*"),v=RegExp(b+b+"*$"),S=function(B){return function(F){var O=g(_(F));return B&1&&(O=O.replace(x,"")),B&2&&(O=O.replace(v,"")),O}};h.exports={start:S(1),end:S(2),trim:S(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-integer.js"),g=Math.max,m=Math.min;h.exports=function(b,x){var v=_(b);return v<0?g(v+x,0):m(v,x)}},"./node_modules/core-js/internals/to-indexed-object.js":function(h,f,p){var _=p("./node_modules/core-js/internals/indexed-object.js"),g=p("./node_modules/core-js/internals/require-object-coercible.js");h.exports=function(m){return _(g(m))}},"./node_modules/core-js/internals/to-integer.js":function(h){var f=Math.ceil,p=Math.floor;h.exports=function(_){return isNaN(_=+_)?0:(_>0?p:f)(_)}},"./node_modules/core-js/internals/to-length.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-integer.js"),g=Math.min;h.exports=function(m){return m>0?g(_(m),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(h,f,p){var _=p("./node_modules/core-js/internals/require-object-coercible.js");h.exports=function(g){return Object(_(g))}},"./node_modules/core-js/internals/to-primitive.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-object.js"),g=p("./node_modules/core-js/internals/is-symbol.js"),m=p("./node_modules/core-js/internals/ordinary-to-primitive.js"),b=p("./node_modules/core-js/internals/well-known-symbol.js"),x=b("toPrimitive");h.exports=function(v,S){if(!_(v)||g(v))return v;var B=v[x],F;if(B!==void 0){if(S===void 0&&(S="default"),F=B.call(v,S),!_(F)||g(F))return F;throw TypeError("Can't convert object to primitive value")}return S===void 0&&(S="number"),m(v,S)}},"./node_modules/core-js/internals/to-property-key.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-primitive.js"),g=p("./node_modules/core-js/internals/is-symbol.js");h.exports=function(m){var b=_(m,"string");return g(b)?b:String(b)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(h,f,p){var _=p("./node_modules/core-js/internals/well-known-symbol.js"),g=_("toStringTag"),m={};m[g]="z",h.exports=String(m)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(h,f,p){var _=p("./node_modules/core-js/internals/is-symbol.js");h.exports=function(g){if(_(g))throw TypeError("Cannot convert a Symbol value to a string");return String(g)}},"./node_modules/core-js/internals/uid.js":function(h){var f=0,p=Math.random();h.exports=function(_){return"Symbol("+String(_===void 0?"":_)+")_"+(++f+p).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(h,f,p){var _=p("./node_modules/core-js/internals/native-symbol.js");h.exports=_&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(h,f,p){var _=p("./node_modules/core-js/internals/well-known-symbol.js");f.f=_},"./node_modules/core-js/internals/well-known-symbol.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/shared.js"),m=p("./node_modules/core-js/internals/has.js"),b=p("./node_modules/core-js/internals/uid.js"),x=p("./node_modules/core-js/internals/native-symbol.js"),v=p("./node_modules/core-js/internals/use-symbol-as-uid.js"),S=g("wks"),B=_.Symbol,F=v?B:B&&B.withoutSetter||b;h.exports=function(O){return(!m(S,O)||!(x||typeof S[O]=="string"))&&(x&&m(B,O)?S[O]=B[O]:S[O]=F("Symbol."+O)),S[O]}},"./node_modules/core-js/internals/whitespaces.js":function(h){h.exports=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/fails.js"),m=p("./node_modules/core-js/internals/is-array.js"),b=p("./node_modules/core-js/internals/is-object.js"),x=p("./node_modules/core-js/internals/to-object.js"),v=p("./node_modules/core-js/internals/to-length.js"),S=p("./node_modules/core-js/internals/create-property.js"),B=p("./node_modules/core-js/internals/array-species-create.js"),F=p("./node_modules/core-js/internals/array-method-has-species-support.js"),O=p("./node_modules/core-js/internals/well-known-symbol.js"),V=p("./node_modules/core-js/internals/engine-v8-version.js"),X=O("isConcatSpreadable"),Q=9007199254740991,ee="Maximum allowed index exceeded",ne=V>=51||!g(function(){var G=[];return G[X]=!1,G.concat()[0]!==G}),Ae=F("concat"),fe=function(G){if(!b(G))return!1;var Z=G[X];return Z!==void 0?!!Z:m(G)},ce=!ne||!Ae;_({target:"Array",proto:!0,forced:ce},{concat:function(Z){var z=x(this),k=B(z,0),R=0,N,U,Y,de,J;for(N=-1,Y=arguments.length;N<Y;N++)if(J=N===-1?z:arguments[N],fe(J)){if(de=v(J.length),R+de>Q)throw TypeError(ee);for(U=0;U<de;U++,R++)U in J&&S(k,R,J[U])}else{if(R>=Q)throw TypeError(ee);S(k,R++,J)}return k.length=R,k}})},"./node_modules/core-js/modules/es.array.iterator.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-indexed-object.js"),g=p("./node_modules/core-js/internals/add-to-unscopables.js"),m=p("./node_modules/core-js/internals/iterators.js"),b=p("./node_modules/core-js/internals/internal-state.js"),x=p("./node_modules/core-js/internals/define-iterator.js"),v="Array Iterator",S=b.set,B=b.getterFor(v);h.exports=x(Array,"Array",function(F,O){S(this,{type:v,target:_(F),index:0,kind:O})},function(){var F=B(this),O=F.target,V=F.kind,X=F.index++;return!O||X>=O.length?(F.target=void 0,{value:void 0,done:!0}):V=="keys"?{value:X,done:!1}:V=="values"?{value:O[X],done:!1}:{value:[X,O[X]],done:!1}},"values"),m.Arguments=m.Array,g("keys"),g("values"),g("entries")},"./node_modules/core-js/modules/es.array.join.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/indexed-object.js"),m=p("./node_modules/core-js/internals/to-indexed-object.js"),b=p("./node_modules/core-js/internals/array-method-is-strict.js"),x=[].join,v=g!=Object,S=b("join",",");_({target:"Array",proto:!0,forced:v||!S},{join:function(F){return x.call(m(this),F===void 0?",":F)}})},"./node_modules/core-js/modules/es.array.map.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/array-iteration.js").map,m=p("./node_modules/core-js/internals/array-method-has-species-support.js"),b=m("map");_({target:"Array",proto:!0,forced:!b},{map:function(v){return g(this,v,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/is-object.js"),m=p("./node_modules/core-js/internals/is-array.js"),b=p("./node_modules/core-js/internals/to-absolute-index.js"),x=p("./node_modules/core-js/internals/to-length.js"),v=p("./node_modules/core-js/internals/to-indexed-object.js"),S=p("./node_modules/core-js/internals/create-property.js"),B=p("./node_modules/core-js/internals/well-known-symbol.js"),F=p("./node_modules/core-js/internals/array-method-has-species-support.js"),O=F("slice"),V=B("species"),X=[].slice,Q=Math.max;_({target:"Array",proto:!0,forced:!O},{slice:function(ne,Ae){var fe=v(this),ce=x(fe.length),G=b(ne,ce),Z=b(Ae===void 0?ce:Ae,ce),z,k,R;if(m(fe)&&(z=fe.constructor,typeof z=="function"&&(z===Array||m(z.prototype))?z=void 0:g(z)&&(z=z[V],z===null&&(z=void 0)),z===Array||z===void 0))return X.call(fe,G,Z);for(k=new(z===void 0?Array:z)(Q(Z-G,0)),R=0;G<Z;G++,R++)G in fe&&S(k,R,fe[G]);return k.length=R,k}})},"./node_modules/core-js/modules/es.function.name.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/object-define-property.js").f,m=Function.prototype,b=m.toString,x=/^\s*function ([^ (]*)/,v="name";_&&!(v in m)&&g(m,v,{configurable:!0,get:function(){try{return b.call(this).match(x)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(h,f,p){var _=p("./node_modules/core-js/internals/descriptors.js"),g=p("./node_modules/core-js/internals/global.js"),m=p("./node_modules/core-js/internals/is-forced.js"),b=p("./node_modules/core-js/internals/redefine.js"),x=p("./node_modules/core-js/internals/has.js"),v=p("./node_modules/core-js/internals/classof-raw.js"),S=p("./node_modules/core-js/internals/inherit-if-required.js"),B=p("./node_modules/core-js/internals/is-symbol.js"),F=p("./node_modules/core-js/internals/to-primitive.js"),O=p("./node_modules/core-js/internals/fails.js"),V=p("./node_modules/core-js/internals/object-create.js"),X=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,Q=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,ee=p("./node_modules/core-js/internals/object-define-property.js").f,ne=p("./node_modules/core-js/internals/string-trim.js").trim,Ae="Number",fe=g[Ae],ce=fe.prototype,G=v(V(ce))==Ae,Z=function(U){if(B(U))throw TypeError("Cannot convert a Symbol value to a number");var Y=F(U,"number"),de,J,xe,Te,Ue,pe,Oe,re;if(typeof Y=="string"&&Y.length>2){if(Y=ne(Y),de=Y.charCodeAt(0),de===43||de===45){if(J=Y.charCodeAt(2),J===88||J===120)return NaN}else if(de===48){switch(Y.charCodeAt(1)){case 66:case 98:xe=2,Te=49;break;case 79:case 111:xe=8,Te=55;break;default:return+Y}for(Ue=Y.slice(2),pe=Ue.length,Oe=0;Oe<pe;Oe++)if(re=Ue.charCodeAt(Oe),re<48||re>Te)return NaN;return parseInt(Ue,xe)}}return+Y};if(m(Ae,!fe(" 0o1")||!fe("0b1")||fe("+0x1"))){for(var z=function(Y){var de=arguments.length<1?0:Y,J=this;return J instanceof z&&(G?O(function(){ce.valueOf.call(J)}):v(J)!=Ae)?S(new fe(Z(de)),J,z):Z(de)},k=_?X(fe):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),R=0,N;k.length>R;R++)x(fe,N=k[R])&&!x(z,N)&&ee(z,N,Q(fe,N));z.prototype=ce,ce.constructor=z,b(g,Ae,z)}},"./node_modules/core-js/modules/es.object.assign.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/object-assign.js");_({target:"Object",stat:!0,forced:Object.assign!==g},{assign:g})},"./node_modules/core-js/modules/es.object.keys.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/to-object.js"),m=p("./node_modules/core-js/internals/object-keys.js"),b=p("./node_modules/core-js/internals/fails.js"),x=b(function(){m(1)});_({target:"Object",stat:!0,forced:x},{keys:function(S){return m(g(S))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(h,f,p){var _=p("./node_modules/core-js/internals/to-string-tag-support.js"),g=p("./node_modules/core-js/internals/redefine.js"),m=p("./node_modules/core-js/internals/object-to-string.js");_||g(Object.prototype,"toString",m,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(h,f,p){var _=p("./node_modules/core-js/internals/redefine.js"),g=p("./node_modules/core-js/internals/an-object.js"),m=p("./node_modules/core-js/internals/to-string.js"),b=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/regexp-flags.js"),v="toString",S=RegExp.prototype,B=S[v],F=b(function(){return B.call({source:"a",flags:"b"})!="/a/b"}),O=B.name!=v;(F||O)&&_(RegExp.prototype,v,function(){var X=g(this),Q=m(X.source),ee=X.flags,ne=m(ee===void 0&&X instanceof RegExp&&!("flags"in S)?x.call(X):ee);return"/"+Q+"/"+ne},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(h,f,p){var _=p("./node_modules/core-js/internals/string-multibyte.js").charAt,g=p("./node_modules/core-js/internals/to-string.js"),m=p("./node_modules/core-js/internals/internal-state.js"),b=p("./node_modules/core-js/internals/define-iterator.js"),x="String Iterator",v=m.set,S=m.getterFor(x);b(String,"String",function(B){v(this,{type:x,string:g(B),index:0})},function(){var F=S(this),O=F.string,V=F.index,X;return V>=O.length?{value:void 0,done:!0}:(X=_(O,V),F.index+=X.length,{value:X,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/create-html.js"),m=p("./node_modules/core-js/internals/string-html-forced.js");_({target:"String",proto:!0,forced:m("link")},{link:function(x){return g(this,"a","href",x)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/descriptors.js"),m=p("./node_modules/core-js/internals/global.js"),b=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/is-object.js"),v=p("./node_modules/core-js/internals/object-define-property.js").f,S=p("./node_modules/core-js/internals/copy-constructor-properties.js"),B=m.Symbol;if(g&&typeof B=="function"&&(!("description"in B.prototype)||B().description!==void 0)){var F={},O=function(){var Ae=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),fe=this instanceof O?new B(Ae):Ae===void 0?B():B(Ae);return Ae===""&&(F[fe]=!0),fe};S(O,B);var V=O.prototype=B.prototype;V.constructor=O;var X=V.toString,Q=String(B("test"))=="Symbol(test)",ee=/^Symbol\((.*)\)[^)]+$/;v(V,"description",{configurable:!0,get:function(){var Ae=x(this)?this.valueOf():this,fe=X.call(Ae);if(b(F,Ae))return"";var ce=Q?fe.slice(7,-1):fe.replace(ee,"$1");return ce===""?void 0:ce}}),_({global:!0,forced:!0},{Symbol:O})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(h,f,p){var _=p("./node_modules/core-js/internals/define-well-known-symbol.js");_("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(h,f,p){var _=p("./node_modules/core-js/internals/export.js"),g=p("./node_modules/core-js/internals/global.js"),m=p("./node_modules/core-js/internals/get-built-in.js"),b=p("./node_modules/core-js/internals/is-pure.js"),x=p("./node_modules/core-js/internals/descriptors.js"),v=p("./node_modules/core-js/internals/native-symbol.js"),S=p("./node_modules/core-js/internals/fails.js"),B=p("./node_modules/core-js/internals/has.js"),F=p("./node_modules/core-js/internals/is-array.js"),O=p("./node_modules/core-js/internals/is-object.js"),V=p("./node_modules/core-js/internals/is-symbol.js"),X=p("./node_modules/core-js/internals/an-object.js"),Q=p("./node_modules/core-js/internals/to-object.js"),ee=p("./node_modules/core-js/internals/to-indexed-object.js"),ne=p("./node_modules/core-js/internals/to-property-key.js"),Ae=p("./node_modules/core-js/internals/to-string.js"),fe=p("./node_modules/core-js/internals/create-property-descriptor.js"),ce=p("./node_modules/core-js/internals/object-create.js"),G=p("./node_modules/core-js/internals/object-keys.js"),Z=p("./node_modules/core-js/internals/object-get-own-property-names.js"),z=p("./node_modules/core-js/internals/object-get-own-property-names-external.js"),k=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),R=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),N=p("./node_modules/core-js/internals/object-define-property.js"),U=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),Y=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),de=p("./node_modules/core-js/internals/redefine.js"),J=p("./node_modules/core-js/internals/shared.js"),xe=p("./node_modules/core-js/internals/shared-key.js"),Te=p("./node_modules/core-js/internals/hidden-keys.js"),Ue=p("./node_modules/core-js/internals/uid.js"),pe=p("./node_modules/core-js/internals/well-known-symbol.js"),Oe=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),re=p("./node_modules/core-js/internals/define-well-known-symbol.js"),ie=p("./node_modules/core-js/internals/set-to-string-tag.js"),Be=p("./node_modules/core-js/internals/internal-state.js"),He=p("./node_modules/core-js/internals/array-iteration.js").forEach,Ge=xe("hidden"),Ne="Symbol",st="prototype",ot=pe("toPrimitive"),Je=Be.set,Ze=Be.getterFor(Ne),bt=Object[st],yt=g.Symbol,Nt=m("JSON","stringify"),kt=R.f,Gt=N.f,fr=z.f,Tr=U.f,yr=J("symbols"),Dr=J("op-symbols"),jt=J("string-to-symbol-registry"),Jt=J("symbol-to-string-registry"),pr=J("wks"),Ft=g.QObject,er=!Ft||!Ft[st]||!Ft[st].findChild,ur=x&&S(function(){return ce(Gt({},"a",{get:function(){return Gt(this,"a",{value:7}).a}})).a!=7})?function(Zn,Bn,On){var tr=kt(bt,Bn);tr&&delete bt[Bn],Gt(Zn,Bn,On),tr&&Zn!==bt&&Gt(bt,Bn,tr)}:Gt,Yt=function(Zn,Bn){var On=yr[Zn]=ce(yt[st]);return Je(On,{type:Ne,tag:Zn,description:Bn}),x||(On.description=Bn),On},mr=function(Bn,On,tr){Bn===bt&&mr(Dr,On,tr),X(Bn);var zn=ne(On);return X(tr),B(yr,zn)?(tr.enumerable?(B(Bn,Ge)&&Bn[Ge][zn]&&(Bn[Ge][zn]=!1),tr=ce(tr,{enumerable:fe(0,!1)})):(B(Bn,Ge)||Gt(Bn,Ge,fe(1,{})),Bn[Ge][zn]=!0),ur(Bn,zn,tr)):Gt(Bn,zn,tr)},Mr=function(Bn,On){X(Bn);var tr=ee(On),zn=G(tr).concat(ai(tr));return He(zn,function(Ki){(!x||Un.call(tr,Ki))&&mr(Bn,Ki,tr[Ki])}),Bn},sn=function(Bn,On){return On===void 0?ce(Bn):Mr(ce(Bn),On)},Un=function(Bn){var On=ne(Bn),tr=Tr.call(this,On);return this===bt&&B(yr,On)&&!B(Dr,On)?!1:tr||!B(this,On)||!B(yr,On)||B(this,Ge)&&this[Ge][On]?tr:!0},wn=function(Bn,On){var tr=ee(Bn),zn=ne(On);if(!(tr===bt&&B(yr,zn)&&!B(Dr,zn))){var Ki=kt(tr,zn);return Ki&&B(yr,zn)&&!(B(tr,Ge)&&tr[Ge][zn])&&(Ki.enumerable=!0),Ki}},Zi=function(Bn){var On=fr(ee(Bn)),tr=[];return He(On,function(zn){!B(yr,zn)&&!B(Te,zn)&&tr.push(zn)}),tr},ai=function(Bn){var On=Bn===bt,tr=fr(On?Dr:ee(Bn)),zn=[];return He(tr,function(Ki){B(yr,Ki)&&(!On||B(bt,Ki))&&zn.push(yr[Ki])}),zn};if(v||(yt=function(){if(this instanceof yt)throw TypeError("Symbol is not a constructor");var Bn=!arguments.length||arguments[0]===void 0?void 0:Ae(arguments[0]),On=Ue(Bn),tr=function(zn){this===bt&&tr.call(Dr,zn),B(this,Ge)&&B(this[Ge],On)&&(this[Ge][On]=!1),ur(this,On,fe(1,zn))};return x&&er&&ur(bt,On,{configurable:!0,set:tr}),Yt(On,Bn)},de(yt[st],"toString",function(){return Ze(this).tag}),de(yt,"withoutSetter",function(Zn){return Yt(Ue(Zn),Zn)}),U.f=Un,N.f=mr,R.f=wn,Z.f=z.f=Zi,k.f=ai,Oe.f=function(Zn){return Yt(pe(Zn),Zn)},x&&(Gt(yt[st],"description",{configurable:!0,get:function(){return Ze(this).description}}),b||de(bt,"propertyIsEnumerable",Un,{unsafe:!0}))),_({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:yt}),He(G(pr),function(Zn){re(Zn)}),_({target:Ne,stat:!0,forced:!v},{for:function(Zn){var Bn=Ae(Zn);if(B(jt,Bn))return jt[Bn];var On=yt(Bn);return jt[Bn]=On,Jt[On]=Bn,On},keyFor:function(Bn){if(!V(Bn))throw TypeError(Bn+" is not a symbol");if(B(Jt,Bn))return Jt[Bn]},useSetter:function(){er=!0},useSimple:function(){er=!1}}),_({target:"Object",stat:!0,forced:!v,sham:!x},{create:sn,defineProperty:mr,defineProperties:Mr,getOwnPropertyDescriptor:wn}),_({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:Zi,getOwnPropertySymbols:ai}),_({target:"Object",stat:!0,forced:S(function(){k.f(1)})},{getOwnPropertySymbols:function(Bn){return k.f(Q(Bn))}}),Nt){var _i=!v||S(function(){var Zn=yt();return Nt([Zn])!="[null]"||Nt({a:Zn})!="{}"||Nt(Object(Zn))!="{}"});_({target:"JSON",stat:!0,forced:_i},{stringify:function(Bn,On,tr){for(var zn=[Bn],Ki=1,Qs;arguments.length>Ki;)zn.push(arguments[Ki++]);if(Qs=On,!(!O(On)&&Bn===void 0||V(Bn)))return F(On)||(On=function(li,Qt){if(typeof Qs=="function"&&(Qt=Qs.call(this,li,Qt)),!V(Qt))return Qt}),zn[1]=On,Nt.apply(null,zn)}})}yt[st][ot]||Y(yt[st],ot,yt[st].valueOf),ie(yt,Ne),Te[Ge]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/dom-iterables.js"),m=p("./node_modules/core-js/internals/array-for-each.js"),b=p("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var x in g){var v=_[x],S=v&&v.prototype;if(S&&S.forEach!==m)try{b(S,"forEach",m)}catch{S.forEach=m}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(h,f,p){var _=p("./node_modules/core-js/internals/global.js"),g=p("./node_modules/core-js/internals/dom-iterables.js"),m=p("./node_modules/core-js/modules/es.array.iterator.js"),b=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),v=x("iterator"),S=x("toStringTag"),B=m.values;for(var F in g){var O=_[F],V=O&&O.prototype;if(V){if(V[v]!==B)try{b(V,v,B)}catch{V[v]=B}if(V[S]||b(V,S,F),g[F]){for(var X in m)if(V[X]!==m[X])try{b(V,X,m[X])}catch{V[X]=m[X]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(h){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(f,p){h.exports=p()})(this,function(){function f(Ft){var er=typeof Ft;return Ft!==null&&(er==="object"||er==="function")}function p(Ft){return typeof Ft=="function"}var _=void 0;Array.isArray?_=Array.isArray:_=function(Ft){return Object.prototype.toString.call(Ft)==="[object Array]"};var g=_,m=0,b=void 0,x=void 0,v=function(er,ur){G[m]=er,G[m+1]=ur,m+=2,m===2&&(x?x(Z):k())};function S(Ft){x=Ft}function B(Ft){v=Ft}var F=typeof window<"u"?window:void 0,O=F||{},V=O.MutationObserver||O.WebKitMutationObserver,X=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",Q=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ee(){return function(){return process.nextTick(Z)}}function ne(){return typeof b<"u"?function(){b(Z)}:ce()}function Ae(){var Ft=0,er=new V(Z),ur=document.createTextNode("");return er.observe(ur,{characterData:!0}),function(){ur.data=Ft=++Ft%2}}function fe(){var Ft=new MessageChannel;return Ft.port1.onmessage=Z,function(){return Ft.port2.postMessage(0)}}function ce(){var Ft=setTimeout;return function(){return Ft(Z,1)}}var G=new Array(1e3);function Z(){for(var Ft=0;Ft<m;Ft+=2){var er=G[Ft],ur=G[Ft+1];er(ur),G[Ft]=void 0,G[Ft+1]=void 0}m=0}function z(){try{var Ft=Function("return this")().require("vertx");return b=Ft.runOnLoop||Ft.runOnContext,ne()}catch{return ce()}}var k=void 0;X?k=ee():V?k=Ae():Q?k=fe():F===void 0?k=z():k=ce();function R(Ft,er){var ur=this,Yt=new this.constructor(Y);Yt[U]===void 0&&Nt(Yt);var mr=ur._state;if(mr){var Mr=arguments[mr-1];v(function(){return Je(mr,Yt,Mr,ur._result)})}else st(ur,Yt,Ft,er);return Yt}function N(Ft){var er=this;if(Ft&&typeof Ft=="object"&&Ft.constructor===er)return Ft;var ur=new er(Y);return Be(ur,Ft),ur}var U=Math.random().toString(36).substring(2);function Y(){}var de=void 0,J=1,xe=2;function Te(){return new TypeError("You cannot resolve a promise with itself")}function Ue(){return new TypeError("A promises callback cannot return that same promise.")}function pe(Ft,er,ur,Yt){try{Ft.call(er,ur,Yt)}catch(mr){return mr}}function Oe(Ft,er,ur){v(function(Yt){var mr=!1,Mr=pe(ur,er,function(sn){mr||(mr=!0,er!==sn?Be(Yt,sn):Ge(Yt,sn))},function(sn){mr||(mr=!0,Ne(Yt,sn))},"Settle: "+(Yt._label||" unknown promise"));!mr&&Mr&&(mr=!0,Ne(Yt,Mr))},Ft)}function re(Ft,er){er._state===J?Ge(Ft,er._result):er._state===xe?Ne(Ft,er._result):st(er,void 0,function(ur){return Be(Ft,ur)},function(ur){return Ne(Ft,ur)})}function ie(Ft,er,ur){er.constructor===Ft.constructor&&ur===R&&er.constructor.resolve===N?re(Ft,er):ur===void 0?Ge(Ft,er):p(ur)?Oe(Ft,er,ur):Ge(Ft,er)}function Be(Ft,er){if(Ft===er)Ne(Ft,Te());else if(f(er)){var ur=void 0;try{ur=er.then}catch(Yt){Ne(Ft,Yt);return}ie(Ft,er,ur)}else Ge(Ft,er)}function He(Ft){Ft._onerror&&Ft._onerror(Ft._result),ot(Ft)}function Ge(Ft,er){Ft._state===de&&(Ft._result=er,Ft._state=J,Ft._subscribers.length!==0&&v(ot,Ft))}function Ne(Ft,er){Ft._state===de&&(Ft._state=xe,Ft._result=er,v(He,Ft))}function st(Ft,er,ur,Yt){var mr=Ft._subscribers,Mr=mr.length;Ft._onerror=null,mr[Mr]=er,mr[Mr+J]=ur,mr[Mr+xe]=Yt,Mr===0&&Ft._state&&v(ot,Ft)}function ot(Ft){var er=Ft._subscribers,ur=Ft._state;if(er.length!==0){for(var Yt=void 0,mr=void 0,Mr=Ft._result,sn=0;sn<er.length;sn+=3)Yt=er[sn],mr=er[sn+ur],Yt?Je(ur,Yt,mr,Mr):mr(Mr);Ft._subscribers.length=0}}function Je(Ft,er,ur,Yt){var mr=p(ur),Mr=void 0,sn=void 0,Un=!0;if(mr){try{Mr=ur(Yt)}catch(wn){Un=!1,sn=wn}if(er===Mr){Ne(er,Ue());return}}else Mr=Yt;er._state!==de||(mr&&Un?Be(er,Mr):Un===!1?Ne(er,sn):Ft===J?Ge(er,Mr):Ft===xe&&Ne(er,Mr))}function Ze(Ft,er){try{er(function(Yt){Be(Ft,Yt)},function(Yt){Ne(Ft,Yt)})}catch(ur){Ne(Ft,ur)}}var bt=0;function yt(){return bt++}function Nt(Ft){Ft[U]=bt++,Ft._state=void 0,Ft._result=void 0,Ft._subscribers=[]}function kt(){return new Error("Array Methods must be provided an Array")}var Gt=function(){function Ft(er,ur){this._instanceConstructor=er,this.promise=new er(Y),this.promise[U]||Nt(this.promise),g(ur)?(this.length=ur.length,this._remaining=ur.length,this._result=new Array(this.length),this.length===0?Ge(this.promise,this._result):(this.length=this.length||0,this._enumerate(ur),this._remaining===0&&Ge(this.promise,this._result))):Ne(this.promise,kt())}return Ft.prototype._enumerate=function(ur){for(var Yt=0;this._state===de&&Yt<ur.length;Yt++)this._eachEntry(ur[Yt],Yt)},Ft.prototype._eachEntry=function(ur,Yt){var mr=this._instanceConstructor,Mr=mr.resolve;if(Mr===N){var sn=void 0,Un=void 0,wn=!1;try{sn=ur.then}catch(ai){wn=!0,Un=ai}if(sn===R&&ur._state!==de)this._settledAt(ur._state,Yt,ur._result);else if(typeof sn!="function")this._remaining--,this._result[Yt]=ur;else if(mr===Jt){var Zi=new mr(Y);wn?Ne(Zi,Un):ie(Zi,ur,sn),this._willSettleAt(Zi,Yt)}else this._willSettleAt(new mr(function(ai){return ai(ur)}),Yt)}else this._willSettleAt(Mr(ur),Yt)},Ft.prototype._settledAt=function(ur,Yt,mr){var Mr=this.promise;Mr._state===de&&(this._remaining--,ur===xe?Ne(Mr,mr):this._result[Yt]=mr),this._remaining===0&&Ge(Mr,this._result)},Ft.prototype._willSettleAt=function(ur,Yt){var mr=this;st(ur,void 0,function(Mr){return mr._settledAt(J,Yt,Mr)},function(Mr){return mr._settledAt(xe,Yt,Mr)})},Ft}();function fr(Ft){return new Gt(this,Ft).promise}function Tr(Ft){var er=this;return g(Ft)?new er(function(ur,Yt){for(var mr=Ft.length,Mr=0;Mr<mr;Mr++)er.resolve(Ft[Mr]).then(ur,Yt)}):new er(function(ur,Yt){return Yt(new TypeError("You must pass an array to race."))})}function yr(Ft){var er=this,ur=new er(Y);return Ne(ur,Ft),ur}function Dr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function jt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Jt=function(){function Ft(er){this[U]=yt(),this._result=this._state=void 0,this._subscribers=[],Y!==er&&(typeof er!="function"&&Dr(),this instanceof Ft?Ze(this,er):jt())}return Ft.prototype.catch=function(ur){return this.then(null,ur)},Ft.prototype.finally=function(ur){var Yt=this,mr=Yt.constructor;return p(ur)?Yt.then(function(Mr){return mr.resolve(ur()).then(function(){return Mr})},function(Mr){return mr.resolve(ur()).then(function(){throw Mr})}):Yt.then(ur,ur)},Ft}();Jt.prototype.then=R,Jt.all=fr,Jt.race=Tr,Jt.resolve=N,Jt.reject=yr,Jt._setScheduler=S,Jt._setAsap=B,Jt._asap=v;function pr(){var Ft=void 0;if(typeof So<"u")Ft=So;else if(typeof self<"u")Ft=self;else try{Ft=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var er=Ft.Promise;if(er){var ur=null;try{ur=Object.prototype.toString.call(er.resolve())}catch{}if(ur==="[object Promise]"&&!er.cast)return}Ft.Promise=Jt}return Jt.polyfill=pr,Jt.Promise=Jt,Jt})},html2canvas:function(h){h.exports=i},jspdf:function(h){h.exports=e}},a={};function l(h){var f=a[h];if(f!==void 0)return f.exports;var p=a[h]={exports:{}};return o[h].call(p.exports,p,p.exports,l),p.exports}(function(){l.n=function(h){var f=h&&h.__esModule?function(){return h.default}:function(){return h};return l.d(f,{a:f}),f}})(),function(){l.d=function(h,f){for(var p in f)l.o(f,p)&&!l.o(h,p)&&Object.defineProperty(h,p,{enumerable:!0,get:f[p]})}}(),function(){l.o=function(h,f){return Object.prototype.hasOwnProperty.call(h,f)}}(),function(){l.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})}}();var t={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/l.r(t);var h=l("./src/worker.js");l("./src/plugin/jspdf-plugin.js"),l("./src/plugin/pagebreaks.js"),l("./src/plugin/hyperlinks.js");var f=function p(_,g){var m=new p.Worker(g);return _?m.from(_).save():m};f.Worker=h.default,t.default=f}(),t=t.default,t}()})}(v4)),v4.exports}var gK=mK();const yK=s0(gK);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function yb(n){return n+.5|0}const Rg=(n,r,e)=>Math.max(Math.min(n,e),r);function lv(n){return Rg(yb(n*2.55),0,255)}function Gg(n){return Rg(yb(n*255),0,255)}function Um(n){return Rg(yb(n/2.55)/100,0,1)}function DM(n){return Rg(yb(n*100),0,100)}const kp={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},aC=[..."0123456789ABCDEF"],_K=n=>aC[n&15],vK=n=>aC[(n&240)>>4]+aC[n&15],bx=n=>(n&240)>>4===(n&15),bK=n=>bx(n.r)&&bx(n.g)&&bx(n.b)&&bx(n.a);function xK(n){var r=n.length,e;return n[0]==="#"&&(r===4||r===5?e={r:255&kp[n[1]]*17,g:255&kp[n[2]]*17,b:255&kp[n[3]]*17,a:r===5?kp[n[4]]*17:255}:(r===7||r===9)&&(e={r:kp[n[1]]<<4|kp[n[2]],g:kp[n[3]]<<4|kp[n[4]],b:kp[n[5]]<<4|kp[n[6]],a:r===9?kp[n[7]]<<4|kp[n[8]]:255})),e}const wK=(n,r)=>n<255?r(n):"";function SK(n){var r=bK(n)?_K:vK;return n?"#"+r(n.r)+r(n.g)+r(n.b)+wK(n.a,r):void 0}const CK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IO(n,r,e){const i=r*Math.min(e,1-e),o=(a,l=(a+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[o(0),o(8),o(4)]}function EK(n,r,e){const i=(o,a=(o+n/60)%6)=>e-e*r*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function BK(n,r,e){const i=IO(n,1,.5);let o;for(r+e>1&&(o=1/(r+e),r*=o,e*=o),o=0;o<3;o++)i[o]*=1-r-e,i[o]+=r;return i}function TK(n,r,e,i,o){return n===o?(r-e)/i+(r<e?6:0):r===o?(e-n)/i+2:(n-r)/i+4}function $E(n){const e=n.r/255,i=n.g/255,o=n.b/255,a=Math.max(e,i,o),l=Math.min(e,i,o),t=(a+l)/2;let h,f,p;return a!==l&&(p=a-l,f=t>.5?p/(2-a-l):p/(a+l),h=TK(e,i,o,p,a),h=h*60+.5),[h|0,f||0,t]}function KE(n,r,e,i){return(Array.isArray(r)?n(r[0],r[1],r[2]):n(r,e,i)).map(Gg)}function qE(n,r,e){return KE(IO,n,r,e)}function IK(n,r,e){return KE(BK,n,r,e)}function MK(n,r,e){return KE(EK,n,r,e)}function MO(n){return(n%360+360)%360}function FK(n){const r=CK.exec(n);let e=255,i;if(!r)return;r[5]!==i&&(e=r[6]?lv(+r[5]):Gg(+r[5]));const o=MO(+r[2]),a=+r[3]/100,l=+r[4]/100;return r[1]==="hwb"?i=IK(o,a,l):r[1]==="hsv"?i=MK(o,a,l):i=qE(o,a,l),{r:i[0],g:i[1],b:i[2],a:e}}function PK(n,r){var e=$E(n);e[0]=MO(e[0]+r),e=qE(e),n.r=e[0],n.g=e[1],n.b=e[2]}function LK(n){if(!n)return;const r=$E(n),e=r[0],i=DM(r[1]),o=DM(r[2]);return n.a<255?`hsla(${e}, ${i}%, ${o}%, ${Um(n.a)})`:`hsl(${e}, ${i}%, ${o}%)`}const RM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NM={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kK(){const n={},r=Object.keys(NM),e=Object.keys(RM);let i,o,a,l,t;for(i=0;i<r.length;i++){for(l=t=r[i],o=0;o<e.length;o++)a=e[o],t=t.replace(a,RM[a]);a=parseInt(NM[l],16),n[t]=[a>>16&255,a>>8&255,a&255]}return n}let xx;function OK(n){xx||(xx=kK(),xx.transparent=[0,0,0,0]);const r=xx[n.toLowerCase()];return r&&{r:r[0],g:r[1],b:r[2],a:r.length===4?r[3]:255}}const DK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function RK(n){const r=DK.exec(n);let e=255,i,o,a;if(r){if(r[7]!==i){const l=+r[7];e=r[8]?lv(l):Rg(l*255,0,255)}return i=+r[1],o=+r[3],a=+r[5],i=255&(r[2]?lv(i):Rg(i,0,255)),o=255&(r[4]?lv(o):Rg(o,0,255)),a=255&(r[6]?lv(a):Rg(a,0,255)),{r:i,g:o,b:a,a:e}}}function NK(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Um(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const M4=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ry=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function jK(n,r,e){const i=ry(Um(n.r)),o=ry(Um(n.g)),a=ry(Um(n.b));return{r:Gg(M4(i+e*(ry(Um(r.r))-i))),g:Gg(M4(o+e*(ry(Um(r.g))-o))),b:Gg(M4(a+e*(ry(Um(r.b))-a))),a:n.a+e*(r.a-n.a)}}function wx(n,r,e){if(n){let i=$E(n);i[r]=Math.max(0,Math.min(i[r]+i[r]*e,r===0?360:1)),i=qE(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function FO(n,r){return n&&Object.assign(r||{},n)}function jM(n){var r={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(r={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(r.a=Gg(n[3]))):(r=FO(n,{r:0,g:0,b:0,a:1}),r.a=Gg(r.a)),r}function UK(n){return n.charAt(0)==="r"?RK(n):FK(n)}class qv{constructor(r){if(r instanceof qv)return r;const e=typeof r;let i;e==="object"?i=jM(r):e==="string"&&(i=xK(r)||OK(r)||UK(r)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var r=FO(this._rgb);return r&&(r.a=Um(r.a)),r}set rgb(r){this._rgb=jM(r)}rgbString(){return this._valid?NK(this._rgb):void 0}hexString(){return this._valid?SK(this._rgb):void 0}hslString(){return this._valid?LK(this._rgb):void 0}mix(r,e){if(r){const i=this.rgb,o=r.rgb;let a;const l=e===a?.5:e,t=2*l-1,h=i.a-o.a,f=((t*h===-1?t:(t+h)/(1+t*h))+1)/2;a=1-f,i.r=255&f*i.r+a*o.r+.5,i.g=255&f*i.g+a*o.g+.5,i.b=255&f*i.b+a*o.b+.5,i.a=l*i.a+(1-l)*o.a,this.rgb=i}return this}interpolate(r,e){return r&&(this._rgb=jK(this._rgb,r._rgb,e)),this}clone(){return new qv(this.rgb)}alpha(r){return this._rgb.a=Gg(r),this}clearer(r){const e=this._rgb;return e.a*=1-r,this}greyscale(){const r=this._rgb,e=yb(r.r*.3+r.g*.59+r.b*.11);return r.r=r.g=r.b=e,this}opaquer(r){const e=this._rgb;return e.a*=1+r,this}negate(){const r=this._rgb;return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,this}lighten(r){return wx(this._rgb,2,r),this}darken(r){return wx(this._rgb,2,-r),this}saturate(r){return wx(this._rgb,1,r),this}desaturate(r){return wx(this._rgb,1,-r),this}rotate(r){return PK(this._rgb,r),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Lm(){}const zK=(()=>{let n=0;return()=>n++})();function Na(n){return n==null}function jc(n){if(Array.isArray&&Array.isArray(n))return!0;const r=Object.prototype.toString.call(n);return r.slice(0,7)==="[object"&&r.slice(-6)==="Array]"}function za(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function pu(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Zd(n,r){return pu(n)?n:r}function Zo(n,r){return typeof n>"u"?r:n}const HK=(n,r)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/r,PO=(n,r)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*r:+n;function cc(n,r,e){if(n&&typeof n.call=="function")return n.apply(e,r)}function Rl(n,r,e,i){let o,a,l;if(jc(n))for(a=n.length,o=0;o<a;o++)r.call(e,n[o],o);else if(za(n))for(l=Object.keys(n),a=l.length,o=0;o<a;o++)r.call(e,n[l[o]],l[o])}function Pw(n,r){let e,i,o,a;if(!n||!r||n.length!==r.length)return!1;for(e=0,i=n.length;e<i;++e)if(o=n[e],a=r[e],o.datasetIndex!==a.datasetIndex||o.index!==a.index)return!1;return!0}function Lw(n){if(jc(n))return n.map(Lw);if(za(n)){const r=Object.create(null),e=Object.keys(n),i=e.length;let o=0;for(;o<i;++o)r[e[o]]=Lw(n[e[o]]);return r}return n}function LO(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function QK(n,r,e,i){if(!LO(n))return;const o=r[n],a=e[n];za(o)&&za(a)?Yv(o,a,i):r[n]=Lw(a)}function Yv(n,r,e){const i=jc(r)?r:[r],o=i.length;if(!za(n))return n;e=e||{};const a=e.merger||QK;let l;for(let t=0;t<o;++t){if(l=i[t],!za(l))continue;const h=Object.keys(l);for(let f=0,p=h.length;f<p;++f)a(h[f],n,l,e)}return n}function Ev(n,r){return Yv(n,r,{merger:VK})}function VK(n,r,e){if(!LO(n))return;const i=r[n],o=e[n];za(i)&&za(o)?Ev(i,o):Object.prototype.hasOwnProperty.call(r,n)||(r[n]=Lw(o))}const UM={"":n=>n,x:n=>n.x,y:n=>n.y};function GK(n){const r=n.split("."),e=[];let i="";for(const o of r)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function WK(n){const r=GK(n);return e=>{for(const i of r){if(i==="")break;e=e&&e[i]}return e}}function t0(n,r){return(UM[r]||(UM[r]=WK(r)))(n)}function YE(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Xv=n=>typeof n<"u",r0=n=>typeof n=="function",zM=(n,r)=>{if(n.size!==r.size)return!1;for(const e of n)if(!r.has(e))return!1;return!0};function $K(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const vl=Math.PI,bc=2*vl,KK=bc+vl,kw=Number.POSITIVE_INFINITY,qK=vl/180,Iu=vl/2,L0=vl/4,HM=vl*2/3,Ng=Math.log10,Am=Math.sign;function Bv(n,r,e){return Math.abs(n-r)<e}function QM(n){const r=Math.round(n);n=Bv(n,r,n/1e3)?r:n;const e=Math.pow(10,Math.floor(Ng(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function YK(n){const r=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(r.push(i),r.push(n/i));return e===(e|0)&&r.push(e),r.sort((o,a)=>o-a).pop(),r}function XK(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Iy(n){return!XK(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function ZK(n,r){const e=Math.round(n);return e-r<=n&&e+r>=n}function kO(n,r,e){let i,o,a;for(i=0,o=n.length;i<o;i++)a=n[i][e],isNaN(a)||(r.min=Math.min(r.min,a),r.max=Math.max(r.max,a))}function bA(n){return n*(vl/180)}function XE(n){return n*(180/vl)}function VM(n){if(!pu(n))return;let r=1,e=0;for(;Math.round(n*r)/r!==n;)r*=10,e++;return e}function OO(n,r){const e=r.x-n.x,i=r.y-n.y,o=Math.sqrt(e*e+i*i);let a=Math.atan2(i,e);return a<-.5*vl&&(a+=bc),{angle:a,distance:o}}function lC(n,r){return Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))}function JK(n,r){return(n-r+KK)%bc-vl}function wf(n){return(n%bc+bc)%bc}function Zv(n,r,e,i){const o=wf(n),a=wf(r),l=wf(e),t=wf(a-o),h=wf(l-o),f=wf(o-a),p=wf(o-l);return o===a||o===l||i&&a===l||t>h&&f<p}function kh(n,r,e){return Math.max(r,Math.min(e,n))}function eq(n){return kh(n,-32768,32767)}function Vm(n,r,e,i=1e-6){return n>=Math.min(r,e)-i&&n<=Math.max(r,e)+i}function ZE(n,r,e){e=e||(l=>n[l]<r);let i=n.length-1,o=0,a;for(;i-o>1;)a=o+i>>1,e(a)?o=a:i=a;return{lo:o,hi:i}}const Gm=(n,r,e,i)=>ZE(n,e,i?o=>{const a=n[o][r];return a<e||a===e&&n[o+1][r]===e}:o=>n[o][r]<e),tq=(n,r,e)=>ZE(n,e,i=>n[i][r]>=e);function rq(n,r,e){let i=0,o=n.length;for(;i<o&&n[i]<r;)i++;for(;o>i&&n[o-1]>e;)o--;return i>0||o<n.length?n.slice(i,o):n}const DO=["push","pop","shift","splice","unshift"];function nq(n,r){if(n._chartjs){n._chartjs.listeners.push(r);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),DO.forEach(e=>{const i="_onData"+YE(e),o=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const l=o.apply(this,a);return n._chartjs.listeners.forEach(t=>{typeof t[i]=="function"&&t[i](...a)}),l}})})}function GM(n,r){const e=n._chartjs;if(!e)return;const i=e.listeners,o=i.indexOf(r);o!==-1&&i.splice(o,1),!(i.length>0)&&(DO.forEach(a=>{delete n[a]}),delete n._chartjs)}function RO(n){const r=new Set(n);return r.size===n.length?n:Array.from(r)}const NO=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function jO(n,r){let e=[],i=!1;return function(...o){e=o,i||(i=!0,NO.call(window,()=>{i=!1,n.apply(r,e)}))}}function iq(n,r){let e;return function(...i){return r?(clearTimeout(e),e=setTimeout(n,r,i)):n.apply(this,i),r}}const JE=n=>n==="start"?"left":n==="end"?"right":"center",xf=(n,r,e)=>n==="start"?r:n==="end"?e:(r+e)/2,sq=(n,r,e,i)=>n===(i?"left":"right")?e:n==="center"?(r+e)/2:r;function UO(n,r,e){const i=r.length;let o=0,a=i;if(n._sorted){const{iScale:l,vScale:t,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,p=l.axis,{min:_,max:g,minDefined:m,maxDefined:b}=l.getUserBounds();if(m){if(o=Math.min(Gm(h,p,_).lo,e?i:Gm(r,p,l.getPixelForValue(_)).lo),f){const x=h.slice(0,o+1).reverse().findIndex(v=>!Na(v[t.axis]));o-=Math.max(0,x)}o=kh(o,0,i-1)}if(b){let x=Math.max(Gm(h,l.axis,g,!0).hi+1,e?0:Gm(r,p,l.getPixelForValue(g),!0).hi+1);if(f){const v=h.slice(x-1).findIndex(S=>!Na(S[t.axis]));x+=Math.max(0,v)}a=kh(x,o,i)-o}else a=i-o}return{start:o,count:a}}function zO(n){const{xScale:r,yScale:e,_scaleRanges:i}=n,o={xmin:r.min,xmax:r.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=o,!0;const a=i.xmin!==r.min||i.xmax!==r.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,o),a}const Sx=n=>n===0||n===1,WM=(n,r,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-r)*bc/e)),$M=(n,r,e)=>Math.pow(2,-10*n)*Math.sin((n-r)*bc/e)+1,Tv={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Iu)+1,easeOutSine:n=>Math.sin(n*Iu),easeInOutSine:n=>-.5*(Math.cos(vl*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Sx(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Sx(n)?n:WM(n,.075,.3),easeOutElastic:n=>Sx(n)?n:$M(n,.075,.3),easeInOutElastic(n){return Sx(n)?n:n<.5?.5*WM(n*2,.1125,.45):.5+.5*$M(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let r=1.70158;return(n/=.5)<1?.5*(n*n*(((r*=1.525)+1)*n-r)):.5*((n-=2)*n*(((r*=1.525)+1)*n+r)+2)},easeInBounce:n=>1-Tv.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Tv.easeInBounce(n*2)*.5:Tv.easeOutBounce(n*2-1)*.5+.5};function eB(n){if(n&&typeof n=="object"){const r=n.toString();return r==="[object CanvasPattern]"||r==="[object CanvasGradient]"}return!1}function KM(n){return eB(n)?n:new qv(n)}function F4(n){return eB(n)?n:new qv(n).saturate(.5).darken(.1).hexString()}const oq=["x","y","borderWidth","radius","tension"],aq=["color","borderColor","backgroundColor"];function lq(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:r=>r!=="onProgress"&&r!=="onComplete"&&r!=="fn"}),n.set("animations",{colors:{type:"color",properties:aq},numbers:{type:"number",properties:oq}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:r=>r|0}}}})}function cq(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const qM=new Map;function uq(n,r){r=r||{};const e=n+JSON.stringify(r);let i=qM.get(e);return i||(i=new Intl.NumberFormat(n,r),qM.set(e,i)),i}function _b(n,r,e){return uq(r,e).format(n)}const HO={values(n){return jc(n)?n:""+n},numeric(n,r,e){if(n===0)return"0";const i=this.chart.options.locale;let o,a=n;if(e.length>1){const f=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(f<1e-4||f>1e15)&&(o="scientific"),a=hq(n,e)}const l=Ng(Math.abs(a)),t=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:o,minimumFractionDigits:t,maximumFractionDigits:t};return Object.assign(h,this.options.ticks.format),_b(n,i,h)},logarithmic(n,r,e){if(n===0)return"0";const i=e[r].significand||n/Math.pow(10,Math.floor(Ng(n)));return[1,2,3,5,10,15].includes(i)||r>.8*e.length?HO.numeric.call(this,n,r,e):""}};function hq(n,r){let e=r.length>3?r[2].value-r[1].value:r[1].value-r[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var v5={formatters:HO};function fq(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(r,e)=>e.lineWidth,tickColor:(r,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:v5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:r=>!r.startsWith("before")&&!r.startsWith("after")&&r!=="callback"&&r!=="parser",_indexable:r=>r!=="borderDash"&&r!=="tickBorderDash"&&r!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:r=>r!=="backdropPadding"&&r!=="callback",_indexable:r=>r!=="backdropPadding"})}const m1=Object.create(null),cC=Object.create(null);function Iv(n,r){if(!r)return n;const e=r.split(".");for(let i=0,o=e.length;i<o;++i){const a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function P4(n,r,e){return typeof r=="string"?Yv(Iv(n,r),e):Yv(Iv(n,""),r)}class dq{constructor(r,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>F4(o.backgroundColor),this.hoverBorderColor=(i,o)=>F4(o.borderColor),this.hoverColor=(i,o)=>F4(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(r),this.apply(e)}set(r,e){return P4(this,r,e)}get(r){return Iv(this,r)}describe(r,e){return P4(cC,r,e)}override(r,e){return P4(m1,r,e)}route(r,e,i,o){const a=Iv(this,r),l=Iv(this,i),t="_"+e;Object.defineProperties(a,{[t]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[t],f=l[o];return za(h)?Object.assign({},f,h):Zo(h,f)},set(h){this[t]=h}}})}apply(r){r.forEach(e=>e(this))}}var Uc=new dq({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[lq,cq,fq]);function pq(n){return!n||Na(n.size)||Na(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ow(n,r,e,i,o){let a=r[o];return a||(a=r[o]=n.measureText(o).width,e.push(o)),a>i&&(i=a),i}function Aq(n,r,e,i){i=i||{};let o=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==r&&(o=i.data={},a=i.garbageCollect=[],i.font=r),n.save(),n.font=r;let l=0;const t=e.length;let h,f,p,_,g;for(h=0;h<t;h++)if(_=e[h],_!=null&&!jc(_))l=Ow(n,o,a,l,_);else if(jc(_))for(f=0,p=_.length;f<p;f++)g=_[f],g!=null&&!jc(g)&&(l=Ow(n,o,a,l,g));n.restore();const m=a.length/2;if(m>e.length){for(h=0;h<m;h++)delete o[a[h]];a.splice(0,m)}return l}function k0(n,r,e){const i=n.currentDevicePixelRatio,o=e!==0?Math.max(e/2,.5):0;return Math.round((r-o)*i)/i+o}function YM(n,r){!r&&!n||(r=r||n.getContext("2d"),r.save(),r.resetTransform(),r.clearRect(0,0,n.width,n.height),r.restore())}function uC(n,r,e,i){QO(n,r,e,i,null)}function QO(n,r,e,i,o){let a,l,t,h,f,p,_,g;const m=r.pointStyle,b=r.rotation,x=r.radius;let v=(b||0)*qK;if(m&&typeof m=="object"&&(a=m.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(v),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(x)||x<=0)){switch(n.beginPath(),m){default:o?n.ellipse(e,i,o/2,x,0,0,bc):n.arc(e,i,x,0,bc),n.closePath();break;case"triangle":p=o?o/2:x,n.moveTo(e+Math.sin(v)*p,i-Math.cos(v)*x),v+=HM,n.lineTo(e+Math.sin(v)*p,i-Math.cos(v)*x),v+=HM,n.lineTo(e+Math.sin(v)*p,i-Math.cos(v)*x),n.closePath();break;case"rectRounded":f=x*.516,h=x-f,l=Math.cos(v+L0)*h,_=Math.cos(v+L0)*(o?o/2-f:h),t=Math.sin(v+L0)*h,g=Math.sin(v+L0)*(o?o/2-f:h),n.arc(e-_,i-t,f,v-vl,v-Iu),n.arc(e+g,i-l,f,v-Iu,v),n.arc(e+_,i+t,f,v,v+Iu),n.arc(e-g,i+l,f,v+Iu,v+vl),n.closePath();break;case"rect":if(!b){h=Math.SQRT1_2*x,p=o?o/2:h,n.rect(e-p,i-h,2*p,2*h);break}v+=L0;case"rectRot":_=Math.cos(v)*(o?o/2:x),l=Math.cos(v)*x,t=Math.sin(v)*x,g=Math.sin(v)*(o?o/2:x),n.moveTo(e-_,i-t),n.lineTo(e+g,i-l),n.lineTo(e+_,i+t),n.lineTo(e-g,i+l),n.closePath();break;case"crossRot":v+=L0;case"cross":_=Math.cos(v)*(o?o/2:x),l=Math.cos(v)*x,t=Math.sin(v)*x,g=Math.sin(v)*(o?o/2:x),n.moveTo(e-_,i-t),n.lineTo(e+_,i+t),n.moveTo(e+g,i-l),n.lineTo(e-g,i+l);break;case"star":_=Math.cos(v)*(o?o/2:x),l=Math.cos(v)*x,t=Math.sin(v)*x,g=Math.sin(v)*(o?o/2:x),n.moveTo(e-_,i-t),n.lineTo(e+_,i+t),n.moveTo(e+g,i-l),n.lineTo(e-g,i+l),v+=L0,_=Math.cos(v)*(o?o/2:x),l=Math.cos(v)*x,t=Math.sin(v)*x,g=Math.sin(v)*(o?o/2:x),n.moveTo(e-_,i-t),n.lineTo(e+_,i+t),n.moveTo(e+g,i-l),n.lineTo(e-g,i+l);break;case"line":l=o?o/2:Math.cos(v)*x,t=Math.sin(v)*x,n.moveTo(e-l,i-t),n.lineTo(e+l,i+t);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(v)*(o?o/2:x),i+Math.sin(v)*x);break;case!1:n.closePath();break}n.fill(),r.borderWidth>0&&n.stroke()}}function Wm(n,r,e){return e=e||.5,!r||n&&n.x>r.left-e&&n.x<r.right+e&&n.y>r.top-e&&n.y<r.bottom+e}function b5(n,r){n.save(),n.beginPath(),n.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),n.clip()}function x5(n){n.restore()}function mq(n,r,e,i,o){if(!r)return n.lineTo(e.x,e.y);if(o==="middle"){const a=(r.x+e.x)/2;n.lineTo(a,r.y),n.lineTo(a,e.y)}else o==="after"!=!!i?n.lineTo(r.x,e.y):n.lineTo(e.x,r.y);n.lineTo(e.x,e.y)}function gq(n,r,e,i){if(!r)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?r.cp1x:r.cp2x,i?r.cp1y:r.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function yq(n,r){r.translation&&n.translate(r.translation[0],r.translation[1]),Na(r.rotation)||n.rotate(r.rotation),r.color&&(n.fillStyle=r.color),r.textAlign&&(n.textAlign=r.textAlign),r.textBaseline&&(n.textBaseline=r.textBaseline)}function _q(n,r,e,i,o){if(o.strikethrough||o.underline){const a=n.measureText(i),l=r-a.actualBoundingBoxLeft,t=r+a.actualBoundingBoxRight,h=e-a.actualBoundingBoxAscent,f=e+a.actualBoundingBoxDescent,p=o.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=o.decorationWidth||2,n.moveTo(l,p),n.lineTo(t,p),n.stroke()}}function vq(n,r){const e=n.fillStyle;n.fillStyle=r.color,n.fillRect(r.left,r.top,r.width,r.height),n.fillStyle=e}function g1(n,r,e,i,o,a={}){const l=jc(r)?r:[r],t=a.strokeWidth>0&&a.strokeColor!=="";let h,f;for(n.save(),n.font=o.string,yq(n,a),h=0;h<l.length;++h)f=l[h],a.backdrop&&vq(n,a.backdrop),t&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),Na(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(f,e,i,a.maxWidth)),n.fillText(f,e,i,a.maxWidth),_q(n,e,i,f,a),i+=Number(o.lineHeight);n.restore()}function Jv(n,r){const{x:e,y:i,w:o,h:a,radius:l}=r;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*vl,vl,!0),n.lineTo(e,i+a-l.bottomLeft),n.arc(e+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,vl,Iu,!0),n.lineTo(e+o-l.bottomRight,i+a),n.arc(e+o-l.bottomRight,i+a-l.bottomRight,l.bottomRight,Iu,0,!0),n.lineTo(e+o,i+l.topRight),n.arc(e+o-l.topRight,i+l.topRight,l.topRight,0,-Iu,!0),n.lineTo(e+l.topLeft,i)}const bq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function wq(n,r){const e=(""+n).match(bq);if(!e||e[1]==="normal")return r*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return r*n}const Sq=n=>+n||0;function tB(n,r){const e={},i=za(r),o=i?Object.keys(r):r,a=za(n)?i?l=>Zo(n[l],n[r[l]]):l=>n[l]:()=>n;for(const l of o)e[l]=Sq(a(l));return e}function VO(n){return tB(n,{top:"y",right:"x",bottom:"y",left:"x"})}function u1(n){return tB(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ff(n){const r=VO(n);return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function hh(n,r){n=n||{},r=r||Uc.font;let e=Zo(n.size,r.size);typeof e=="string"&&(e=parseInt(e,10));let i=Zo(n.style,r.style);i&&!(""+i).match(xq)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:Zo(n.family,r.family),lineHeight:wq(Zo(n.lineHeight,r.lineHeight),e),size:e,style:i,weight:Zo(n.weight,r.weight),string:""};return o.string=pq(o),o}function cv(n,r,e,i){let o,a,l;for(o=0,a=n.length;o<a;++o)if(l=n[o],l!==void 0&&l!==void 0)return l}function Cq(n,r,e){const{min:i,max:o}=n,a=PO(r,(o-i)/2),l=(t,h)=>e&&t===0?0:t+h;return{min:l(i,-Math.abs(a)),max:l(o,a)}}function l0(n,r){return Object.assign(Object.create(n),r)}function rB(n,r=[""],e,i,o=()=>n[0]){const a=e||n;typeof i>"u"&&(i=KO("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:o,override:t=>rB([t,...n],r,a,i)};return new Proxy(l,{deleteProperty(t,h){return delete t[h],delete t._keys,delete n[0][h],!0},get(t,h){return WO(t,h,()=>Lq(h,r,n,t))},getOwnPropertyDescriptor(t,h){return Reflect.getOwnPropertyDescriptor(t._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(t,h){return ZM(t).includes(h)},ownKeys(t){return ZM(t)},set(t,h,f){const p=t._storage||(t._storage=o());return t[h]=p[h]=f,delete t._keys,!0}})}function My(n,r,e,i){const o={_cacheable:!1,_proxy:n,_context:r,_subProxy:e,_stack:new Set,_descriptors:GO(n,i),setContext:a=>My(n,a,e,i),override:a=>My(n.override(a),r,e,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,t){return WO(a,l,()=>Bq(a,l,t))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,t){return n[l]=t,delete a[l],!0}})}function GO(n,r={scriptable:!0,indexable:!0}){const{_scriptable:e=r.scriptable,_indexable:i=r.indexable,_allKeys:o=r.allKeys}=n;return{allKeys:o,scriptable:e,indexable:i,isScriptable:r0(e)?e:()=>e,isIndexable:r0(i)?i:()=>i}}const Eq=(n,r)=>n?n+YE(r):r,nB=(n,r)=>za(r)&&n!=="adapters"&&(Object.getPrototypeOf(r)===null||r.constructor===Object);function WO(n,r,e){if(Object.prototype.hasOwnProperty.call(n,r)||r==="constructor")return n[r];const i=e();return n[r]=i,i}function Bq(n,r,e){const{_proxy:i,_context:o,_subProxy:a,_descriptors:l}=n;let t=i[r];return r0(t)&&l.isScriptable(r)&&(t=Tq(r,t,n,e)),jc(t)&&t.length&&(t=Iq(r,t,n,l.isIndexable)),nB(r,t)&&(t=My(t,o,a&&a[r],l)),t}function Tq(n,r,e,i){const{_proxy:o,_context:a,_subProxy:l,_stack:t}=e;if(t.has(n))throw new Error("Recursion detected: "+Array.from(t).join("->")+"->"+n);t.add(n);let h=r(a,l||i);return t.delete(n),nB(n,h)&&(h=iB(o._scopes,o,n,h)),h}function Iq(n,r,e,i){const{_proxy:o,_context:a,_subProxy:l,_descriptors:t}=e;if(typeof a.index<"u"&&i(n))return r[a.index%r.length];if(za(r[0])){const h=r,f=o._scopes.filter(p=>p!==h);r=[];for(const p of h){const _=iB(f,o,n,p);r.push(My(_,a,l&&l[n],t))}}return r}function $O(n,r,e){return r0(n)?n(r,e):n}const Mq=(n,r)=>n===!0?r:typeof n=="string"?t0(r,n):void 0;function Fq(n,r,e,i,o){for(const a of r){const l=Mq(e,a);if(l){n.add(l);const t=$O(l._fallback,e,o);if(typeof t<"u"&&t!==e&&t!==i)return t}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function iB(n,r,e,i){const o=r._rootScopes,a=$O(r._fallback,e,i),l=[...n,...o],t=new Set;t.add(i);let h=XM(t,l,e,a||e,i);return h===null||typeof a<"u"&&a!==e&&(h=XM(t,l,a,h,i),h===null)?!1:rB(Array.from(t),[""],o,a,()=>Pq(r,e,i))}function XM(n,r,e,i,o){for(;e;)e=Fq(n,r,e,i,o);return e}function Pq(n,r,e){const i=n._getTarget();r in i||(i[r]={});const o=i[r];return jc(o)&&za(e)?e:o||{}}function Lq(n,r,e,i){let o;for(const a of r)if(o=KO(Eq(a,n),e),typeof o<"u")return nB(n,o)?iB(e,i,n,o):o}function KO(n,r){for(const e of r){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function ZM(n){let r=n._keys;return r||(r=n._keys=kq(n._scopes)),r}function kq(n){const r=new Set;for(const e of n)for(const i of Object.keys(e).filter(o=>!o.startsWith("_")))r.add(i);return Array.from(r)}function qO(n,r,e,i){const{iScale:o}=n,{key:a="r"}=this._parsing,l=new Array(i);let t,h,f,p;for(t=0,h=i;t<h;++t)f=t+e,p=r[f],l[t]={r:o.parse(t0(p,a),f)};return l}const Oq=Number.EPSILON||1e-14,Fy=(n,r)=>r<n.length&&!n[r].skip&&n[r],YO=n=>n==="x"?"y":"x";function Dq(n,r,e,i){const o=n.skip?r:n,a=r,l=e.skip?r:e,t=lC(a,o),h=lC(l,a);let f=t/(t+h),p=h/(t+h);f=isNaN(f)?0:f,p=isNaN(p)?0:p;const _=i*f,g=i*p;return{previous:{x:a.x-_*(l.x-o.x),y:a.y-_*(l.y-o.y)},next:{x:a.x+g*(l.x-o.x),y:a.y+g*(l.y-o.y)}}}function Rq(n,r,e){const i=n.length;let o,a,l,t,h,f=Fy(n,0);for(let p=0;p<i-1;++p)if(h=f,f=Fy(n,p+1),!(!h||!f)){if(Bv(r[p],0,Oq)){e[p]=e[p+1]=0;continue}o=e[p]/r[p],a=e[p+1]/r[p],t=Math.pow(o,2)+Math.pow(a,2),!(t<=9)&&(l=3/Math.sqrt(t),e[p]=o*l*r[p],e[p+1]=a*l*r[p])}}function Nq(n,r,e="x"){const i=YO(e),o=n.length;let a,l,t,h=Fy(n,0);for(let f=0;f<o;++f){if(l=t,t=h,h=Fy(n,f+1),!t)continue;const p=t[e],_=t[i];l&&(a=(p-l[e])/3,t[`cp1${e}`]=p-a,t[`cp1${i}`]=_-a*r[f]),h&&(a=(h[e]-p)/3,t[`cp2${e}`]=p+a,t[`cp2${i}`]=_+a*r[f])}}function jq(n,r="x"){const e=YO(r),i=n.length,o=Array(i).fill(0),a=Array(i);let l,t,h,f=Fy(n,0);for(l=0;l<i;++l)if(t=h,h=f,f=Fy(n,l+1),!!h){if(f){const p=f[r]-h[r];o[l]=p!==0?(f[e]-h[e])/p:0}a[l]=t?f?Am(o[l-1])!==Am(o[l])?0:(o[l-1]+o[l])/2:o[l-1]:o[l]}Rq(n,o,a),Nq(n,a,r)}function Cx(n,r,e){return Math.max(Math.min(n,e),r)}function Uq(n,r){let e,i,o,a,l,t=Wm(n[0],r);for(e=0,i=n.length;e<i;++e)l=a,a=t,t=e<i-1&&Wm(n[e+1],r),a&&(o=n[e],l&&(o.cp1x=Cx(o.cp1x,r.left,r.right),o.cp1y=Cx(o.cp1y,r.top,r.bottom)),t&&(o.cp2x=Cx(o.cp2x,r.left,r.right),o.cp2y=Cx(o.cp2y,r.top,r.bottom)))}function zq(n,r,e,i,o){let a,l,t,h;if(r.spanGaps&&(n=n.filter(f=>!f.skip)),r.cubicInterpolationMode==="monotone")jq(n,o);else{let f=i?n[n.length-1]:n[0];for(a=0,l=n.length;a<l;++a)t=n[a],h=Dq(f,t,n[Math.min(a+1,l-(i?0:1))%l],r.tension),t.cp1x=h.previous.x,t.cp1y=h.previous.y,t.cp2x=h.next.x,t.cp2y=h.next.y,f=t}r.capBezierPoints&&Uq(n,e)}function sB(){return typeof window<"u"&&typeof document<"u"}function oB(n){let r=n.parentNode;return r&&r.toString()==="[object ShadowRoot]"&&(r=r.host),r}function Dw(n,r,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*r.parentNode[e])):i=n,i}const w5=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Hq(n,r){return w5(n).getPropertyValue(r)}const Qq=["top","right","bottom","left"];function h1(n,r,e){const i={};e=e?"-"+e:"";for(let o=0;o<4;o++){const a=Qq[o];i[a]=parseFloat(n[r+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Vq=(n,r,e)=>(n>0||r>0)&&(!e||!e.shadowRoot);function Gq(n,r){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:o,offsetY:a}=i;let l=!1,t,h;if(Vq(o,a,n.target))t=o,h=a;else{const f=r.getBoundingClientRect();t=i.clientX-f.left,h=i.clientY-f.top,l=!0}return{x:t,y:h,box:l}}function z0(n,r){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=r,o=w5(e),a=o.boxSizing==="border-box",l=h1(o,"padding"),t=h1(o,"border","width"),{x:h,y:f,box:p}=Gq(n,e),_=l.left+(p&&t.left),g=l.top+(p&&t.top);let{width:m,height:b}=r;return a&&(m-=l.width+t.width,b-=l.height+t.height),{x:Math.round((h-_)/m*e.width/i),y:Math.round((f-g)/b*e.height/i)}}function Wq(n,r,e){let i,o;if(r===void 0||e===void 0){const a=n&&oB(n);if(!a)r=n.clientWidth,e=n.clientHeight;else{const l=a.getBoundingClientRect(),t=w5(a),h=h1(t,"border","width"),f=h1(t,"padding");r=l.width-f.width-h.width,e=l.height-f.height-h.height,i=Dw(t.maxWidth,a,"clientWidth"),o=Dw(t.maxHeight,a,"clientHeight")}}return{width:r,height:e,maxWidth:i||kw,maxHeight:o||kw}}const Ex=n=>Math.round(n*10)/10;function $q(n,r,e,i){const o=w5(n),a=h1(o,"margin"),l=Dw(o.maxWidth,n,"clientWidth")||kw,t=Dw(o.maxHeight,n,"clientHeight")||kw,h=Wq(n,r,e);let{width:f,height:p}=h;if(o.boxSizing==="content-box"){const g=h1(o,"border","width"),m=h1(o,"padding");f-=m.width+g.width,p-=m.height+g.height}return f=Math.max(0,f-a.width),p=Math.max(0,i?f/i:p-a.height),f=Ex(Math.min(f,l,h.maxWidth)),p=Ex(Math.min(p,t,h.maxHeight)),f&&!p&&(p=Ex(f/2)),(r!==void 0||e!==void 0)&&i&&h.height&&p>h.height&&(p=h.height,f=Ex(Math.floor(p*i))),{width:f,height:p}}function JM(n,r,e){const i=r||1,o=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==o||l.width!==a?(n.currentDevicePixelRatio=i,l.height=o,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Kq=function(){let n=!1;try{const r={get passive(){return n=!0,!1}};sB()&&(window.addEventListener("test",null,r),window.removeEventListener("test",null,r))}catch{}return n}();function e8(n,r){const e=Hq(n,r),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function H0(n,r,e,i){return{x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)}}function qq(n,r,e,i){return{x:n.x+e*(r.x-n.x),y:i==="middle"?e<.5?n.y:r.y:i==="after"?e<1?n.y:r.y:e>0?r.y:n.y}}function Yq(n,r,e,i){const o={x:n.cp2x,y:n.cp2y},a={x:r.cp1x,y:r.cp1y},l=H0(n,o,e),t=H0(o,a,e),h=H0(a,r,e),f=H0(l,t,e),p=H0(t,h,e);return H0(f,p,e)}const Xq=function(n,r){return{x(e){return n+n+r-e},setWidth(e){r=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Zq=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,r){return n+r},leftForLtr(n,r){return n}}};function vy(n,r,e){return n?Xq(r,e):Zq()}function XO(n,r){let e,i;(r==="ltr"||r==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",r,"important"),n.prevTextDirection=i)}function ZO(n,r){r!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",r[0],r[1]))}function JO(n){return n==="angle"?{between:Zv,compare:JK,normalize:wf}:{between:Vm,compare:(r,e)=>r-e,normalize:r=>r}}function t8({start:n,end:r,count:e,loop:i,style:o}){return{start:n%e,end:r%e,loop:i&&(r-n+1)%e===0,style:o}}function Jq(n,r,e){const{property:i,start:o,end:a}=e,{between:l,normalize:t}=JO(i),h=r.length;let{start:f,end:p,loop:_}=n,g,m;if(_){for(f+=h,p+=h,g=0,m=h;g<m&&l(t(r[f%h][i]),o,a);++g)f--,p--;f%=h,p%=h}return p<f&&(p+=h),{start:f,end:p,loop:_,style:n.style}}function eD(n,r,e){if(!e)return[n];const{property:i,start:o,end:a}=e,l=r.length,{compare:t,between:h,normalize:f}=JO(i),{start:p,end:_,loop:g,style:m}=Jq(n,r,e),b=[];let x=!1,v=null,S,B,F;const O=()=>h(o,F,S)&&t(o,F)!==0,V=()=>t(a,S)===0||h(a,F,S),X=()=>x||O(),Q=()=>!x||V();for(let ee=p,ne=p;ee<=_;++ee)B=r[ee%l],!B.skip&&(S=f(B[i]),S!==F&&(x=h(S,o,a),v===null&&X()&&(v=t(S,o)===0?ee:ne),v!==null&&Q()&&(b.push(t8({start:v,end:ee,loop:g,count:l,style:m})),v=null),ne=ee,F=S));return v!==null&&b.push(t8({start:v,end:_,loop:g,count:l,style:m})),b}function tD(n,r){const e=[],i=n.segments;for(let o=0;o<i.length;o++){const a=eD(i[o],n.points,r);a.length&&e.push(...a)}return e}function eY(n,r,e,i){let o=0,a=r-1;if(e&&!i)for(;o<r&&!n[o].skip;)o++;for(;o<r&&n[o].skip;)o++;for(o%=r,e&&(a+=o);a>o&&n[a%r].skip;)a--;return a%=r,{start:o,end:a}}function tY(n,r,e,i){const o=n.length,a=[];let l=r,t=n[r],h;for(h=r+1;h<=e;++h){const f=n[h%o];f.skip||f.stop?t.skip||(i=!1,a.push({start:r%o,end:(h-1)%o,loop:i}),r=l=f.stop?h:null):(l=h,t.skip&&(r=h)),t=f}return l!==null&&a.push({start:r%o,end:l%o,loop:i}),a}function rY(n,r){const e=n.points,i=n.options.spanGaps,o=e.length;if(!o)return[];const a=!!n._loop,{start:l,end:t}=eY(e,o,a,i);if(i===!0)return r8(n,[{start:l,end:t,loop:a}],e,r);const h=t<l?t+o:t,f=!!n._fullLoop&&l===0&&t===o-1;return r8(n,tY(e,l,h,f),e,r)}function r8(n,r,e,i){return!i||!i.setContext||!e?r:nY(n,r,e,i)}function nY(n,r,e,i){const o=n._chart.getContext(),a=n8(n.options),{_datasetIndex:l,options:{spanGaps:t}}=n,h=e.length,f=[];let p=a,_=r[0].start,g=_;function m(b,x,v,S){const B=t?-1:1;if(b!==x){for(b+=h;e[b%h].skip;)b-=B;for(;e[x%h].skip;)x+=B;b%h!==x%h&&(f.push({start:b%h,end:x%h,loop:v,style:S}),p=S,_=x%h)}}for(const b of r){_=t?_:b.start;let x=e[_%h],v;for(g=_+1;g<=b.end;g++){const S=e[g%h];v=n8(i.setContext(l0(o,{type:"segment",p0:x,p1:S,p0DataIndex:(g-1)%h,p1DataIndex:g%h,datasetIndex:l}))),iY(v,p)&&m(_,g-1,b.loop,p),x=S,p=v}_<g-1&&m(_,g-1,b.loop,p)}return f}function n8(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function iY(n,r){if(!r)return!1;const e=[],i=function(o,a){return eB(a)?(e.includes(a)||e.push(a),e.indexOf(a)):a};return JSON.stringify(n,i)!==JSON.stringify(r,i)}function Bx(n,r,e){return n.options.clip?n[e]:r[e]}function sY(n,r){const{xScale:e,yScale:i}=n;return e&&i?{left:Bx(e,r,"left"),right:Bx(e,r,"right"),top:Bx(i,r,"top"),bottom:Bx(i,r,"bottom")}:r}function rD(n,r){const e=r._clip;if(e.disabled)return!1;const i=sY(r,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class oY{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(r,e,i,o){const a=e.listeners[o],l=e.duration;a.forEach(t=>t({chart:r,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=NO.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(r=Date.now()){let e=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,t=!1,h;for(;l>=0;--l)h=a[l],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(r),t=!0):(a[l]=a[a.length-1],a.pop());t&&(o.draw(),this._notify(o,i,r,"progress")),a.length||(i.running=!1,this._notify(o,i,r,"complete"),i.initial=!1),e+=a.length}),this._lastDate=r,e===0&&(this._running=!1)}_getAnims(r){const e=this._charts;let i=e.get(r);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(r,i)),i}listen(r,e,i){this._getAnims(r).listeners[e].push(i)}add(r,e){!e||!e.length||this._getAnims(r).items.push(...e)}has(r){return this._getAnims(r).items.length>0}start(r){const e=this._charts.get(r);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(r){if(!this._running)return!1;const e=this._charts.get(r);return!(!e||!e.running||!e.items.length)}stop(r){const e=this._charts.get(r);if(!e||!e.items.length)return;const i=e.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();e.items=[],this._notify(r,e,Date.now(),"complete")}remove(r){return this._charts.delete(r)}}var km=new oY;const i8="transparent",aY={boolean(n,r,e){return e>.5?r:n},color(n,r,e){const i=KM(n||i8),o=i.valid&&KM(r||i8);return o&&o.valid?o.mix(i,e).hexString():r},number(n,r,e){return n+(r-n)*e}};class lY{constructor(r,e,i,o){const a=e[i];o=cv([r.to,o,a,r.from]);const l=cv([r.from,a,o]);this._active=!0,this._fn=r.fn||aY[r.type||typeof l],this._easing=Tv[r.easing]||Tv.linear,this._start=Math.floor(Date.now()+(r.delay||0)),this._duration=this._total=Math.floor(r.duration),this._loop=!!r.loop,this._target=e,this._prop=i,this._from=l,this._to=o,this._promises=void 0}active(){return this._active}update(r,e,i){if(this._active){this._notify(!1);const o=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,r.duration)),this._total+=a,this._loop=!!r.loop,this._to=cv([r.to,e,o,r.from]),this._from=cv([r.from,o,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(r){const e=r-this._start,i=this._duration,o=this._prop,a=this._from,l=this._loop,t=this._to;let h;if(this._active=a!==t&&(l||e<i),!this._active){this._target[o]=t,this._notify(!0);return}if(e<0){this._target[o]=a;return}h=e/i%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[o]=this._fn(a,t,h)}wait(){const r=this._promises||(this._promises=[]);return new Promise((e,i)=>{r.push({res:e,rej:i})})}_notify(r){const e=r?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][e]()}}class nD{constructor(r,e){this._chart=r,this._properties=new Map,this.configure(e)}configure(r){if(!za(r))return;const e=Object.keys(Uc.animation),i=this._properties;Object.getOwnPropertyNames(r).forEach(o=>{const a=r[o];if(!za(a))return;const l={};for(const t of e)l[t]=a[t];(jc(a.properties)&&a.properties||[o]).forEach(t=>{(t===o||!i.has(t))&&i.set(t,l)})})}_animateOptions(r,e){const i=e.options,o=uY(r,i);if(!o)return[];const a=this._createAnimations(o,i);return i.$shared&&cY(r.options.$animations,i).then(()=>{r.options=i},()=>{}),a}_createAnimations(r,e){const i=this._properties,o=[],a=r.$animations||(r.$animations={}),l=Object.keys(e),t=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){o.push(...this._animateOptions(r,e));continue}const p=e[f];let _=a[f];const g=i.get(f);if(_)if(g&&_.active()){_.update(g,p,t);continue}else _.cancel();if(!g||!g.duration){r[f]=p;continue}a[f]=_=new lY(g,r,f,p),o.push(_)}return o}update(r,e){if(this._properties.size===0){Object.assign(r,e);return}const i=this._createAnimations(r,e);if(i.length)return km.add(this._chart,i),!0}}function cY(n,r){const e=[],i=Object.keys(r);for(let o=0;o<i.length;o++){const a=n[i[o]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function uY(n,r){if(!r)return;let e=n.options;if(!e){n.options=r;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function s8(n,r){const e=n&&n.options||{},i=e.reverse,o=e.min===void 0?r:0,a=e.max===void 0?r:0;return{start:i?a:o,end:i?o:a}}function hY(n,r,e){if(e===!1)return!1;const i=s8(n,e),o=s8(r,e);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function fY(n){let r,e,i,o;return za(n)?(r=n.top,e=n.right,i=n.bottom,o=n.left):r=e=i=o=n,{top:r,right:e,bottom:i,left:o,disabled:n===!1}}function iD(n,r){const e=[],i=n._getSortedDatasetMetas(r);let o,a;for(o=0,a=i.length;o<a;++o)e.push(i[o].index);return e}function o8(n,r,e,i={}){const o=n.keys,a=i.mode==="single";let l,t,h,f;if(r===null)return;let p=!1;for(l=0,t=o.length;l<t;++l){if(h=+o[l],h===e){if(p=!0,i.all)continue;break}f=n.values[h],pu(f)&&(a||r===0||Am(r)===Am(f))&&(r+=f)}return!p&&!i.all?0:r}function dY(n,r){const{iScale:e,vScale:i}=r,o=e.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),t=new Array(l.length);let h,f,p;for(h=0,f=l.length;h<f;++h)p=l[h],t[h]={[o]:p,[a]:n[p]};return t}function L4(n,r){const e=n&&n.options.stacked;return e||e===void 0&&r.stack!==void 0}function pY(n,r,e){return`${n.id}.${r.id}.${e.stack||e.type}`}function AY(n){const{min:r,max:e,minDefined:i,maxDefined:o}=n.getUserBounds();return{min:i?r:Number.NEGATIVE_INFINITY,max:o?e:Number.POSITIVE_INFINITY}}function mY(n,r,e){const i=n[r]||(n[r]={});return i[e]||(i[e]={})}function a8(n,r,e,i){for(const o of r.getMatchingVisibleMetas(i).reverse()){const a=n[o.index];if(e&&a>0||!e&&a<0)return o.index}return null}function l8(n,r){const{chart:e,_cachedMeta:i}=n,o=e._stacks||(e._stacks={}),{iScale:a,vScale:l,index:t}=i,h=a.axis,f=l.axis,p=pY(a,l,i),_=r.length;let g;for(let m=0;m<_;++m){const b=r[m],{[h]:x,[f]:v}=b,S=b._stacks||(b._stacks={});g=S[f]=mY(o,p,x),g[t]=v,g._top=a8(g,l,!0,i.type),g._bottom=a8(g,l,!1,i.type);const B=g._visualValues||(g._visualValues={});B[t]=v}}function k4(n,r){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===r).shift()}function gY(n,r){return l0(n,{active:!1,dataset:void 0,datasetIndex:r,index:r,mode:"default",type:"dataset"})}function yY(n,r,e){return l0(n,{active:!1,dataIndex:r,parsed:void 0,raw:void 0,element:e,index:r,mode:"default",type:"data"})}function Y_(n,r){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){r=r||n._parsed;for(const o of r){const a=o._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}const O4=n=>n==="reset"||n==="none",c8=(n,r)=>r?n:Object.assign({},n),_Y=(n,r,e)=>n&&!r.hidden&&r._stacked&&{keys:iD(e,!0),values:null};class xA{constructor(r,e){this.chart=r,this._ctx=r.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const r=this._cachedMeta;this.configure(),this.linkScales(),r._stacked=L4(r.vScale,r),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(r){this.index!==r&&Y_(this._cachedMeta),this.index=r}linkScales(){const r=this.chart,e=this._cachedMeta,i=this.getDataset(),o=(_,g,m,b)=>_==="x"?g:_==="r"?b:m,a=e.xAxisID=Zo(i.xAxisID,k4(r,"x")),l=e.yAxisID=Zo(i.yAxisID,k4(r,"y")),t=e.rAxisID=Zo(i.rAxisID,k4(r,"r")),h=e.indexAxis,f=e.iAxisID=o(h,a,l,t),p=e.vAxisID=o(h,l,a,t);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(t),e.iScale=this.getScaleForId(f),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(r){return this.chart.scales[r]}_getOtherScale(r){const e=this._cachedMeta;return r===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const r=this._cachedMeta;this._data&&GM(this._data,this),r._stacked&&Y_(r)}_dataCheck(){const r=this.getDataset(),e=r.data||(r.data=[]),i=this._data;if(za(e)){const o=this._cachedMeta;this._data=dY(e,o)}else if(i!==e){if(i){GM(i,this);const o=this._cachedMeta;Y_(o),o._parsed=[]}e&&Object.isExtensible(e)&&nq(e,this),this._syncList=[],this._data=e}}addElements(){const r=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(r.dataset=new this.datasetElementType)}buildOrUpdateElements(r){const e=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const a=e._stacked;e._stacked=L4(e.vScale,e),e.stack!==i.stack&&(o=!0,Y_(e),e.stack=i.stack),this._resyncElements(r),(o||a!==e._stacked)&&(l8(this,e._parsed),e._stacked=L4(e.vScale,e))}configure(){const r=this.chart.config,e=r.datasetScopeKeys(this._type),i=r.getOptionScopes(this.getDataset(),e,!0);this.options=r.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(r,e){const{_cachedMeta:i,_data:o}=this,{iScale:a,_stacked:l}=i,t=a.axis;let h=r===0&&e===o.length?!0:i._sorted,f=r>0&&i._parsed[r-1],p,_,g;if(this._parsing===!1)i._parsed=o,i._sorted=!0,g=o;else{jc(o[r])?g=this.parseArrayData(i,o,r,e):za(o[r])?g=this.parseObjectData(i,o,r,e):g=this.parsePrimitiveData(i,o,r,e);const m=()=>_[t]===null||f&&_[t]<f[t];for(p=0;p<e;++p)i._parsed[p+r]=_=g[p],h&&(m()&&(h=!1),f=_);i._sorted=h}l&&l8(this,g)}parsePrimitiveData(r,e,i,o){const{iScale:a,vScale:l}=r,t=a.axis,h=l.axis,f=a.getLabels(),p=a===l,_=new Array(o);let g,m,b;for(g=0,m=o;g<m;++g)b=g+i,_[g]={[t]:p||a.parse(f[b],b),[h]:l.parse(e[b],b)};return _}parseArrayData(r,e,i,o){const{xScale:a,yScale:l}=r,t=new Array(o);let h,f,p,_;for(h=0,f=o;h<f;++h)p=h+i,_=e[p],t[h]={x:a.parse(_[0],p),y:l.parse(_[1],p)};return t}parseObjectData(r,e,i,o){const{xScale:a,yScale:l}=r,{xAxisKey:t="x",yAxisKey:h="y"}=this._parsing,f=new Array(o);let p,_,g,m;for(p=0,_=o;p<_;++p)g=p+i,m=e[g],f[p]={x:a.parse(t0(m,t),g),y:l.parse(t0(m,h),g)};return f}getParsed(r){return this._cachedMeta._parsed[r]}getDataElement(r){return this._cachedMeta.data[r]}applyStack(r,e,i){const o=this.chart,a=this._cachedMeta,l=e[r.axis],t={keys:iD(o,!0),values:e._stacks[r.axis]._visualValues};return o8(t,l,a.index,{mode:i})}updateRangeFromParsed(r,e,i,o){const a=i[e.axis];let l=a===null?NaN:a;const t=o&&i._stacks[e.axis];o&&t&&(o.values=t,l=o8(o,a,this._cachedMeta.index)),r.min=Math.min(r.min,l),r.max=Math.max(r.max,l)}getMinMax(r,e){const i=this._cachedMeta,o=i._parsed,a=i._sorted&&r===i.iScale,l=o.length,t=this._getOtherScale(r),h=_Y(e,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:_}=AY(t);let g,m;function b(){m=o[g];const x=m[t.axis];return!pu(m[r.axis])||p>x||_<x}for(g=0;g<l&&!(!b()&&(this.updateRangeFromParsed(f,r,m,h),a));++g);if(a){for(g=l-1;g>=0;--g)if(!b()){this.updateRangeFromParsed(f,r,m,h);break}}return f}getAllParsedValues(r){const e=this._cachedMeta._parsed,i=[];let o,a,l;for(o=0,a=e.length;o<a;++o)l=e[o][r.axis],pu(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(r){const e=this._cachedMeta,i=e.iScale,o=e.vScale,a=this.getParsed(r);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:o?""+o.getLabelForValue(a[o.axis]):""}}_update(r){const e=this._cachedMeta;this.update(r||"default"),e._clip=fY(Zo(this.options.clip,hY(e.xScale,e.yScale,this.getMaxOverflow())))}update(r){}draw(){const r=this._ctx,e=this.chart,i=this._cachedMeta,o=i.data||[],a=e.chartArea,l=[],t=this._drawStart||0,h=this._drawCount||o.length-t,f=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(r,a,t,h),p=t;p<t+h;++p){const _=o[p];_.hidden||(_.active&&f?l.push(_):_.draw(r,a))}for(p=0;p<l.length;++p)l[p].draw(r,a)}getStyle(r,e){const i=e?"active":"default";return r===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(r||0,i)}getContext(r,e,i){const o=this.getDataset();let a;if(r>=0&&r<this._cachedMeta.data.length){const l=this._cachedMeta.data[r];a=l.$context||(l.$context=yY(this.getContext(),r,l)),a.parsed=this.getParsed(r),a.raw=o.data[r],a.index=a.dataIndex=r}else a=this.$context||(this.$context=gY(this.chart.getContext(),this.index)),a.dataset=o,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(r){return this._resolveElementOptions(this.datasetElementType.id,r)}resolveDataElementOptions(r,e){return this._resolveElementOptions(this.dataElementType.id,e,r)}_resolveElementOptions(r,e="default",i){const o=e==="active",a=this._cachedDataOpts,l=r+"-"+e,t=a[l],h=this.enableOptionSharing&&Xv(i);if(t)return c8(t,h);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,r),_=o?[`${r}Hover`,"hover",r,""]:[r,""],g=f.getOptionScopes(this.getDataset(),p),m=Object.keys(Uc.elements[r]),b=()=>this.getContext(i,o,e),x=f.resolveNamedOptions(g,m,b,_);return x.$shared&&(x.$shared=h,a[l]=Object.freeze(c8(x,h))),x}_resolveAnimations(r,e,i){const o=this.chart,a=this._cachedDataOpts,l=`animation-${e}`,t=a[l];if(t)return t;let h;if(o.options.animation!==!1){const p=this.chart.config,_=p.datasetAnimationScopeKeys(this._type,e),g=p.getOptionScopes(this.getDataset(),_);h=p.createResolver(g,this.getContext(r,i,e))}const f=new nD(o,h&&h.animations);return h&&h._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(r){if(r.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},r))}includeOptions(r,e){return!e||O4(r)||this.chart._animationsDisabled}_getSharedOptions(r,e){const i=this.resolveDataElementOptions(r,e),o=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(e,a)||a!==o;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:l}}updateElement(r,e,i,o){O4(o)?Object.assign(r,i):this._resolveAnimations(e,o).update(r,i)}updateSharedOptions(r,e,i){r&&!O4(e)&&this._resolveAnimations(void 0,e).update(r,i)}_setStyle(r,e,i,o){r.active=o;const a=this.getStyle(e,o);this._resolveAnimations(e,i,o).update(r,{options:!o&&this.getSharedOptions(a)||a})}removeHoverStyle(r,e,i){this._setStyle(r,i,"active",!1)}setHoverStyle(r,e,i){this._setStyle(r,i,"active",!0)}_removeDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!1)}_setDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!0)}_resyncElements(r){const e=this._data,i=this._cachedMeta.data;for(const[t,h,f]of this._syncList)this[t](h,f);this._syncList=[];const o=i.length,a=e.length,l=Math.min(a,o);l&&this.parse(0,l),a>o?this._insertElements(o,a-o,r):a<o&&this._removeElements(a,o-a)}_insertElements(r,e,i=!0){const o=this._cachedMeta,a=o.data,l=r+e;let t;const h=f=>{for(f.length+=e,t=f.length-1;t>=l;t--)f[t]=f[t-e]};for(h(a),t=r;t<l;++t)a[t]=new this.dataElementType;this._parsing&&h(o._parsed),this.parse(r,e),i&&this.updateElements(a,r,e,"reset")}updateElements(r,e,i,o){}_removeElements(r,e){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(r,e);i._stacked&&Y_(i,o)}i.data.splice(r,e)}_sync(r){if(this._parsing)this._syncList.push(r);else{const[e,i,o]=r;this[e](i,o)}this.chart._dataChanges.push([this.index,...r])}_onDataPush(){const r=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-r,r])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(r,e){e&&this._sync(["_removeElements",r,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",r,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}is(xA,"defaults",{}),is(xA,"datasetElementType",null),is(xA,"dataElementType",null);function vY(n,r){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(r);let i=[];for(let o=0,a=e.length;o<a;o++)i=i.concat(e[o].controller.getAllParsedValues(n));n._cache.$bar=RO(i.sort((o,a)=>o-a))}return n._cache.$bar}function bY(n){const r=n.iScale,e=vY(r,n.type);let i=r._length,o,a,l,t;const h=()=>{l===32767||l===-32768||(Xv(t)&&(i=Math.min(i,Math.abs(l-t)||i)),t=l)};for(o=0,a=e.length;o<a;++o)l=r.getPixelForValue(e[o]),h();for(t=void 0,o=0,a=r.ticks.length;o<a;++o)l=r.getPixelForTick(o),h();return i}function xY(n,r,e,i){const o=e.barThickness;let a,l;return Na(o)?(a=r.min*e.categoryPercentage,l=e.barPercentage):(a=o*i,l=1),{chunk:a/i,ratio:l,start:r.pixels[n]-a/2}}function wY(n,r,e,i){const o=r.pixels,a=o[n];let l=n>0?o[n-1]:null,t=n<o.length-1?o[n+1]:null;const h=e.categoryPercentage;l===null&&(l=a-(t===null?r.end-r.start:t-a)),t===null&&(t=a+a-l);const f=a-(a-Math.min(l,t))/2*h;return{chunk:Math.abs(t-l)/2*h/i,ratio:e.barPercentage,start:f}}function SY(n,r,e,i){const o=e.parse(n[0],i),a=e.parse(n[1],i),l=Math.min(o,a),t=Math.max(o,a);let h=l,f=t;Math.abs(l)>Math.abs(t)&&(h=t,f=l),r[e.axis]=f,r._custom={barStart:h,barEnd:f,start:o,end:a,min:l,max:t}}function sD(n,r,e,i){return jc(n)?SY(n,r,e,i):r[e.axis]=e.parse(n,i),r}function u8(n,r,e,i){const o=n.iScale,a=n.vScale,l=o.getLabels(),t=o===a,h=[];let f,p,_,g;for(f=e,p=e+i;f<p;++f)g=r[f],_={},_[o.axis]=t||o.parse(l[f],f),h.push(sD(g,_,a,f));return h}function D4(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function CY(n,r,e){return n!==0?Am(n):(r.isHorizontal()?1:-1)*(r.min>=e?1:-1)}function EY(n){let r,e,i,o,a;return n.horizontal?(r=n.base>n.x,e="left",i="right"):(r=n.base<n.y,e="bottom",i="top"),r?(o="end",a="start"):(o="start",a="end"),{start:e,end:i,reverse:r,top:o,bottom:a}}function BY(n,r,e,i){let o=r.borderSkipped;const a={};if(!o){n.borderSkipped=a;return}if(o===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:t,reverse:h,top:f,bottom:p}=EY(n);o==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?o=f:(e._bottom||0)===i?o=p:(a[h8(p,l,t,h)]=!0,o=f)),a[h8(o,l,t,h)]=!0,n.borderSkipped=a}function h8(n,r,e,i){return i?(n=TY(n,r,e),n=f8(n,e,r)):n=f8(n,r,e),n}function TY(n,r,e){return n===r?e:n===e?r:n}function f8(n,r,e){return n==="start"?r:n==="end"?e:n}function IY(n,{inflateAmount:r},e){n.inflateAmount=r==="auto"?e===1?.33:0:r}class Zx extends xA{parsePrimitiveData(r,e,i,o){return u8(r,e,i,o)}parseArrayData(r,e,i,o){return u8(r,e,i,o)}parseObjectData(r,e,i,o){const{iScale:a,vScale:l}=r,{xAxisKey:t="x",yAxisKey:h="y"}=this._parsing,f=a.axis==="x"?t:h,p=l.axis==="x"?t:h,_=[];let g,m,b,x;for(g=i,m=i+o;g<m;++g)x=e[g],b={},b[a.axis]=a.parse(t0(x,f),g),_.push(sD(t0(x,p),b,l,g));return _}updateRangeFromParsed(r,e,i,o){super.updateRangeFromParsed(r,e,i,o);const a=i._custom;a&&e===this._cachedMeta.vScale&&(r.min=Math.min(r.min,a.min),r.max=Math.max(r.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(r){const e=this._cachedMeta,{iScale:i,vScale:o}=e,a=this.getParsed(r),l=a._custom,t=D4(l)?"["+l.start+", "+l.end+"]":""+o.getLabelForValue(a[o.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:t}}initialize(){this.enableOptionSharing=!0,super.initialize();const r=this._cachedMeta;r.stack=this.getDataset().stack}update(r){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,r)}updateElements(r,e,i,o){const a=o==="reset",{index:l,_cachedMeta:{vScale:t}}=this,h=t.getBasePixel(),f=t.isHorizontal(),p=this._getRuler(),{sharedOptions:_,includeOptions:g}=this._getSharedOptions(e,o);for(let m=e;m<e+i;m++){const b=this.getParsed(m),x=a||Na(b[t.axis])?{base:h,head:h}:this._calculateBarValuePixels(m),v=this._calculateBarIndexPixels(m,p),S=(b._stacks||{})[t.axis],B={horizontal:f,base:x.base,enableBorderRadius:!S||D4(b._custom)||l===S._top||l===S._bottom,x:f?x.head:v.center,y:f?v.center:x.head,height:f?v.size:Math.abs(x.size),width:f?Math.abs(x.size):v.size};g&&(B.options=_||this.resolveDataElementOptions(m,r[m].active?"active":o));const F=B.options||r[m].options;BY(B,F,S,l),IY(B,F,p.ratio),this.updateElement(r[m],m,B,o)}}_getStacks(r,e){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),a=i.options.stacked,l=[],t=this._cachedMeta.controller.getParsed(e),h=t&&t[i.axis],f=p=>{const _=p._parsed.find(m=>m[i.axis]===h),g=_&&_[p.vScale.axis];if(Na(g)||isNaN(g))return!0};for(const p of o)if(!(e!==void 0&&f(p))&&((a===!1||l.indexOf(p.stack)===-1||a===void 0&&p.stack===void 0)&&l.push(p.stack),p.index===r))break;return l.length||l.push(void 0),l}_getStackCount(r){return this._getStacks(void 0,r).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const r=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(r).filter(i=>r[i].axis===e).shift()}_getAxis(){const r={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)r[Zo(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(r)}_getStackIndex(r,e,i){const o=this._getStacks(r,i),a=e!==void 0?o.indexOf(e):-1;return a===-1?o.length-1:a}_getRuler(){const r=this.options,e=this._cachedMeta,i=e.iScale,o=[];let a,l;for(a=0,l=e.data.length;a<l;++a)o.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const t=r.barThickness;return{min:t||bY(e),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:r.grouped,ratio:t?1:r.categoryPercentage*r.barPercentage}}_calculateBarValuePixels(r){const{_cachedMeta:{vScale:e,_stacked:i,index:o},options:{base:a,minBarLength:l}}=this,t=a||0,h=this.getParsed(r),f=h._custom,p=D4(f);let _=h[e.axis],g=0,m=i?this.applyStack(e,h,i):_,b,x;m!==_&&(g=m-_,m=_),p&&(_=f.barStart,m=f.barEnd-f.barStart,_!==0&&Am(_)!==Am(f.barEnd)&&(g=0),g+=_);const v=!Na(a)&&!p?a:g;let S=e.getPixelForValue(v);if(this.chart.getDataVisibility(r)?b=e.getPixelForValue(g+m):b=S,x=b-S,Math.abs(x)<l){x=CY(x,e,t)*l,_===t&&(S-=x/2);const B=e.getPixelForDecimal(0),F=e.getPixelForDecimal(1),O=Math.min(B,F),V=Math.max(B,F);S=Math.max(Math.min(S,V),O),b=S+x,i&&!p&&(h._stacks[e.axis]._visualValues[o]=e.getValueForPixel(b)-e.getValueForPixel(S))}if(S===e.getPixelForValue(t)){const B=Am(x)*e.getLineWidthForValue(t)/2;S+=B,x-=B}return{size:x,base:S,head:b,center:b+x/2}}_calculateBarIndexPixels(r,e){const i=e.scale,o=this.options,a=o.skipNull,l=Zo(o.maxBarThickness,1/0);let t,h;const f=this._getAxisCount();if(e.grouped){const p=a?this._getStackCount(r):e.stackCount,_=o.barThickness==="flex"?wY(r,e,o,p*f):xY(r,e,o,p*f),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(Zo(g,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,a?r:void 0)+m;t=_.start+_.chunk*b+_.chunk/2,h=Math.min(l,_.chunk*_.ratio)}else t=i.getPixelForValue(this.getParsed(r)[i.axis],r),h=Math.min(l,e.min*e.ratio);return{base:t-h/2,head:t+h/2,center:t,size:h}}draw(){const r=this._cachedMeta,e=r.vScale,i=r.data,o=i.length;let a=0;for(;a<o;++a)this.getParsed(a)[e.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}is(Zx,"id","bar"),is(Zx,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),is(Zx,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Jx extends xA{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(r,e,i,o){const a=super.parsePrimitiveData(r,e,i,o);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+i).radius;return a}parseArrayData(r,e,i,o){const a=super.parseArrayData(r,e,i,o);for(let l=0;l<a.length;l++){const t=e[i+l];a[l]._custom=Zo(t[2],this.resolveDataElementOptions(l+i).radius)}return a}parseObjectData(r,e,i,o){const a=super.parseObjectData(r,e,i,o);for(let l=0;l<a.length;l++){const t=e[i+l];a[l]._custom=Zo(t&&t.r&&+t.r,this.resolveDataElementOptions(l+i).radius)}return a}getMaxOverflow(){const r=this._cachedMeta.data;let e=0;for(let i=r.length-1;i>=0;--i)e=Math.max(e,r[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(r){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:a}=e,l=this.getParsed(r),t=o.getLabelForValue(l.x),h=a.getLabelForValue(l.y),f=l._custom;return{label:i[r]||"",value:"("+t+", "+h+(f?", "+f:"")+")"}}update(r){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,r)}updateElements(r,e,i,o){const a=o==="reset",{iScale:l,vScale:t}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(e,o),p=l.axis,_=t.axis;for(let g=e;g<e+i;g++){const m=r[g],b=!a&&this.getParsed(g),x={},v=x[p]=a?l.getPixelForDecimal(.5):l.getPixelForValue(b[p]),S=x[_]=a?t.getBasePixel():t.getPixelForValue(b[_]);x.skip=isNaN(v)||isNaN(S),f&&(x.options=h||this.resolveDataElementOptions(g,m.active?"active":o),a&&(x.options.radius=0)),this.updateElement(m,g,x,o)}}resolveDataElementOptions(r,e){const i=this.getParsed(r);let o=super.resolveDataElementOptions(r,e);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const a=o.radius;return e!=="active"&&(o.radius=0),o.radius+=Zo(i&&i._custom,a),o}}is(Jx,"id","bubble"),is(Jx,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),is(Jx,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function MY(n,r,e){let i=1,o=1,a=0,l=0;if(r<bc){const t=n,h=t+r,f=Math.cos(t),p=Math.sin(t),_=Math.cos(h),g=Math.sin(h),m=(F,O,V)=>Zv(F,t,h,!0)?1:Math.max(O,O*e,V,V*e),b=(F,O,V)=>Zv(F,t,h,!0)?-1:Math.min(O,O*e,V,V*e),x=m(0,f,_),v=m(Iu,p,g),S=b(vl,f,_),B=b(vl+Iu,p,g);i=(x-S)/2,o=(v-B)/2,a=-(x+S)/2,l=-(v+B)/2}return{ratioX:i,ratioY:o,offsetX:a,offsetY:l}}class q0 extends xA{constructor(r,e){super(r,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(r,e){const i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let a=h=>+i[h];if(za(i[r])){const{key:h="value"}=this._parsing;a=f=>+t0(i[f],h)}let l,t;for(l=r,t=r+e;l<t;++l)o._parsed[l]=a(l)}}_getRotation(){return bA(this.options.rotation-90)}_getCircumference(){return bA(this.options.circumference)}_getRotationExtents(){let r=bc,e=-bc;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const o=this.chart.getDatasetMeta(i).controller,a=o._getRotation(),l=o._getCircumference();r=Math.min(r,a),e=Math.max(e,a+l)}return{rotation:r,circumference:e-r}}update(r){const e=this.chart,{chartArea:i}=e,o=this._cachedMeta,a=o.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,t=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(HK(this.options.cutout,t),1),f=this._getRingWeight(this.index),{circumference:p,rotation:_}=this._getRotationExtents(),{ratioX:g,ratioY:m,offsetX:b,offsetY:x}=MY(_,p,h),v=(i.width-l)/g,S=(i.height-l)/m,B=Math.max(Math.min(v,S)/2,0),F=PO(this.options.radius,B),O=Math.max(F*h,0),V=(F-O)/this._getVisibleDatasetWeightTotal();this.offsetX=b*F,this.offsetY=x*F,o.total=this.calculateTotal(),this.outerRadius=F-V*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-V*f,0),this.updateElements(a,0,a.length,r)}_circumference(r,e){const i=this.options,o=this._cachedMeta,a=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(r)||o._parsed[r]===null||o.data[r].hidden?0:this.calculateCircumference(o._parsed[r]*a/bc)}updateElements(r,e,i,o){const a=o==="reset",l=this.chart,t=l.chartArea,f=l.options.animation,p=(t.left+t.right)/2,_=(t.top+t.bottom)/2,g=a&&f.animateScale,m=g?0:this.innerRadius,b=g?0:this.outerRadius,{sharedOptions:x,includeOptions:v}=this._getSharedOptions(e,o);let S=this._getRotation(),B;for(B=0;B<e;++B)S+=this._circumference(B,a);for(B=e;B<e+i;++B){const F=this._circumference(B,a),O=r[B],V={x:p+this.offsetX,y:_+this.offsetY,startAngle:S,endAngle:S+F,circumference:F,outerRadius:b,innerRadius:m};v&&(V.options=x||this.resolveDataElementOptions(B,O.active?"active":o)),S+=F,this.updateElement(O,B,V,o)}}calculateTotal(){const r=this._cachedMeta,e=r.data;let i=0,o;for(o=0;o<e.length;o++){const a=r._parsed[o];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(o)&&!e[o].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(r){const e=this._cachedMeta.total;return e>0&&!isNaN(r)?bc*(Math.abs(r)/e):0}getLabelAndValue(r){const e=this._cachedMeta,i=this.chart,o=i.data.labels||[],a=_b(e._parsed[r],i.options.locale);return{label:o[r]||"",value:a}}getMaxBorderWidth(r){let e=0;const i=this.chart;let o,a,l,t,h;if(!r){for(o=0,a=i.data.datasets.length;o<a;++o)if(i.isDatasetVisible(o)){l=i.getDatasetMeta(o),r=l.data,t=l.controller;break}}if(!r)return 0;for(o=0,a=r.length;o<a;++o)h=t.resolveDataElementOptions(o),h.borderAlign!=="inner"&&(e=Math.max(e,h.borderWidth||0,h.hoverBorderWidth||0));return e}getMaxOffset(r){let e=0;for(let i=0,o=r.length;i<o;++i){const a=this.resolveDataElementOptions(i);e=Math.max(e,a.offset||0,a.hoverOffset||0)}return e}_getRingWeightOffset(r){let e=0;for(let i=0;i<r;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(r){return Math.max(Zo(this.chart.data.datasets[r].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}is(q0,"id","doughnut"),is(q0,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),is(q0,"descriptors",{_scriptable:r=>r!=="spacing",_indexable:r=>r!=="spacing"&&!r.startsWith("borderDash")&&!r.startsWith("hoverBorderDash")}),is(q0,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(r){const e=r.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:o}}=r.legend.options;return e.labels.map((a,l)=>{const h=r.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:i,hidden:!r.getDataVisibility(l),index:l}})}return[]}},onClick(r,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class ew extends xA{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(r){const e=this._cachedMeta,{dataset:i,data:o=[],_dataset:a}=e,l=this.chart._animationsDisabled;let{start:t,count:h}=UO(e,o,l);this._drawStart=t,this._drawCount=h,zO(e)&&(t=0,h=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=o;const f=this.resolveDatasetElementOptions(r);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},r),this.updateElements(o,t,h,r)}updateElements(r,e,i,o){const a=o==="reset",{iScale:l,vScale:t,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:p,includeOptions:_}=this._getSharedOptions(e,o),g=l.axis,m=t.axis,{spanGaps:b,segment:x}=this.options,v=Iy(b)?b:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||a||o==="none",B=e+i,F=r.length;let O=e>0&&this.getParsed(e-1);for(let V=0;V<F;++V){const X=r[V],Q=S?X:{};if(V<e||V>=B){Q.skip=!0;continue}const ee=this.getParsed(V),ne=Na(ee[m]),Ae=Q[g]=l.getPixelForValue(ee[g],V),fe=Q[m]=a||ne?t.getBasePixel():t.getPixelForValue(h?this.applyStack(t,ee,h):ee[m],V);Q.skip=isNaN(Ae)||isNaN(fe)||ne,Q.stop=V>0&&Math.abs(ee[g]-O[g])>v,x&&(Q.parsed=ee,Q.raw=f.data[V]),_&&(Q.options=p||this.resolveDataElementOptions(V,X.active?"active":o)),S||this.updateElement(X,V,Q,o),O=ee}}getMaxOverflow(){const r=this._cachedMeta,e=r.dataset,i=e.options&&e.options.borderWidth||0,o=r.data||[];if(!o.length)return i;const a=o[0].size(this.resolveDataElementOptions(0)),l=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,a,l)/2}draw(){const r=this._cachedMeta;r.dataset.updateControlPoints(this.chart.chartArea,r.iScale.axis),super.draw()}}is(ew,"id","line"),is(ew,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),is(ew,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Mv extends xA{constructor(r,e){super(r,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(r){const e=this._cachedMeta,i=this.chart,o=i.data.labels||[],a=_b(e._parsed[r].r,i.options.locale);return{label:o[r]||"",value:a}}parseObjectData(r,e,i,o){return qO.bind(this)(r,e,i,o)}update(r){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,r)}getMinMax(){const r=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return r.data.forEach((i,o)=>{const a=this.getParsed(o).r;!isNaN(a)&&this.chart.getDataVisibility(o)&&(a<e.min&&(e.min=a),a>e.max&&(e.max=a))}),e}_updateRadius(){const r=this.chart,e=r.chartArea,i=r.options,o=Math.min(e.right-e.left,e.bottom-e.top),a=Math.max(o/2,0),l=Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0),t=(a-l)/r.getVisibleDatasetCount();this.outerRadius=a-t*this.index,this.innerRadius=this.outerRadius-t}updateElements(r,e,i,o){const a=o==="reset",l=this.chart,h=l.options.animation,f=this._cachedMeta.rScale,p=f.xCenter,_=f.yCenter,g=f.getIndexAngle(0)-.5*vl;let m=g,b;const x=360/this.countVisibleElements();for(b=0;b<e;++b)m+=this._computeAngle(b,o,x);for(b=e;b<e+i;b++){const v=r[b];let S=m,B=m+this._computeAngle(b,o,x),F=l.getDataVisibility(b)?f.getDistanceFromCenterForValue(this.getParsed(b).r):0;m=B,a&&(h.animateScale&&(F=0),h.animateRotate&&(S=B=g));const O={x:p,y:_,innerRadius:0,outerRadius:F,startAngle:S,endAngle:B,options:this.resolveDataElementOptions(b,v.active?"active":o)};this.updateElement(v,b,O,o)}}countVisibleElements(){const r=this._cachedMeta;let e=0;return r.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&e++}),e}_computeAngle(r,e,i){return this.chart.getDataVisibility(r)?bA(this.resolveDataElementOptions(r,e).angle||i):0}}is(Mv,"id","polarArea"),is(Mv,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),is(Mv,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(r){const e=r.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:o}}=r.legend.options;return e.labels.map((a,l)=>{const h=r.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:i,hidden:!r.getDataVisibility(l),index:l}})}return[]}},onClick(r,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class hC extends q0{}is(hC,"id","pie"),is(hC,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class tw extends xA{getLabelAndValue(r){const e=this._cachedMeta.vScale,i=this.getParsed(r);return{label:e.getLabels()[r],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(r,e,i,o){return qO.bind(this)(r,e,i,o)}update(r){const e=this._cachedMeta,i=e.dataset,o=e.data||[],a=e.iScale.getLabels();if(i.points=o,r!=="resize"){const l=this.resolveDatasetElementOptions(r);this.options.showLine||(l.borderWidth=0);const t={_loop:!0,_fullLoop:a.length===o.length,options:l};this.updateElement(i,void 0,t,r)}this.updateElements(o,0,o.length,r)}updateElements(r,e,i,o){const a=this._cachedMeta.rScale,l=o==="reset";for(let t=e;t<e+i;t++){const h=r[t],f=this.resolveDataElementOptions(t,h.active?"active":o),p=a.getPointPositionForValue(t,this.getParsed(t).r),_=l?a.xCenter:p.x,g=l?a.yCenter:p.y,m={x:_,y:g,angle:p.angle,skip:isNaN(_)||isNaN(g),options:f};this.updateElement(h,t,m,o)}}}is(tw,"id","radar"),is(tw,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),is(tw,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class rw extends xA{getLabelAndValue(r){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:a}=e,l=this.getParsed(r),t=o.getLabelForValue(l.x),h=a.getLabelForValue(l.y);return{label:i[r]||"",value:"("+t+", "+h+")"}}update(r){const e=this._cachedMeta,{data:i=[]}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=UO(e,i,o);if(this._drawStart=a,this._drawCount=l,zO(e)&&(a=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:t,_dataset:h}=e;t._chart=this.chart,t._datasetIndex=this.index,t._decimated=!!h._decimated,t.points=i;const f=this.resolveDatasetElementOptions(r);f.segment=this.options.segment,this.updateElement(t,void 0,{animated:!o,options:f},r)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,a,l,r)}addElements(){const{showLine:r}=this.options;!this.datasetElementType&&r&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(r,e,i,o){const a=o==="reset",{iScale:l,vScale:t,_stacked:h,_dataset:f}=this._cachedMeta,p=this.resolveDataElementOptions(e,o),_=this.getSharedOptions(p),g=this.includeOptions(o,_),m=l.axis,b=t.axis,{spanGaps:x,segment:v}=this.options,S=Iy(x)?x:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||a||o==="none";let F=e>0&&this.getParsed(e-1);for(let O=e;O<e+i;++O){const V=r[O],X=this.getParsed(O),Q=B?V:{},ee=Na(X[b]),ne=Q[m]=l.getPixelForValue(X[m],O),Ae=Q[b]=a||ee?t.getBasePixel():t.getPixelForValue(h?this.applyStack(t,X,h):X[b],O);Q.skip=isNaN(ne)||isNaN(Ae)||ee,Q.stop=O>0&&Math.abs(X[m]-F[m])>S,v&&(Q.parsed=X,Q.raw=f.data[O]),g&&(Q.options=_||this.resolveDataElementOptions(O,V.active?"active":o)),B||this.updateElement(V,O,Q,o),F=X}this.updateSharedOptions(_,o,p)}getMaxOverflow(){const r=this._cachedMeta,e=r.data||[];if(!this.options.showLine){let t=0;for(let h=e.length-1;h>=0;--h)t=Math.max(t,e[h].size(this.resolveDataElementOptions(h))/2);return t>0&&t}const i=r.dataset,o=i.options&&i.options.borderWidth||0;if(!e.length)return o;const a=e[0].size(this.resolveDataElementOptions(0)),l=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(o,a,l)/2}}is(rw,"id","scatter"),is(rw,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),is(rw,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var FY=Object.freeze({__proto__:null,BarController:Zx,BubbleController:Jx,DoughnutController:q0,LineController:ew,PieController:hC,PolarAreaController:Mv,RadarController:tw,ScatterController:rw});function O0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class aB{constructor(r){is(this,"options");this.options=r||{}}static override(r){Object.assign(aB.prototype,r)}init(){}formats(){return O0()}parse(){return O0()}format(){return O0()}add(){return O0()}diff(){return O0()}startOf(){return O0()}endOf(){return O0()}}var PY={_date:aB};function LY(n,r,e,i){const{controller:o,data:a,_sorted:l}=n,t=o._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(t&&r===t.axis&&r!=="r"&&l&&a.length){const f=t._reversePixels?tq:Gm;if(i){if(o._sharedOptions){const p=a[0],_=typeof p.getRange=="function"&&p.getRange(r);if(_){const g=f(a,r,e-_),m=f(a,r,e+_);return{lo:g.lo,hi:m.hi}}}}else{const p=f(a,r,e);if(h){const{vScale:_}=o._cachedMeta,{_parsed:g}=n,m=g.slice(0,p.lo+1).reverse().findIndex(x=>!Na(x[_.axis]));p.lo-=Math.max(0,m);const b=g.slice(p.hi).findIndex(x=>!Na(x[_.axis]));p.hi+=Math.max(0,b)}return p}}return{lo:0,hi:a.length-1}}function S5(n,r,e,i,o){const a=n.getSortedVisibleDatasetMetas(),l=e[r];for(let t=0,h=a.length;t<h;++t){const{index:f,data:p}=a[t],{lo:_,hi:g}=LY(a[t],r,l,o);for(let m=_;m<=g;++m){const b=p[m];b.skip||i(b,f,m)}}}function kY(n){const r=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,o){const a=r?Math.abs(i.x-o.x):0,l=e?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function R4(n,r,e,i,o){const a=[];return!o&&!n.isPointInArea(r)||S5(n,e,r,function(t,h,f){!o&&!Wm(t,n.chartArea,0)||t.inRange(r.x,r.y,i)&&a.push({element:t,datasetIndex:h,index:f})},!0),a}function OY(n,r,e,i){let o=[];function a(l,t,h){const{startAngle:f,endAngle:p}=l.getProps(["startAngle","endAngle"],i),{angle:_}=OO(l,{x:r.x,y:r.y});Zv(_,f,p)&&o.push({element:l,datasetIndex:t,index:h})}return S5(n,e,r,a),o}function DY(n,r,e,i,o,a){let l=[];const t=kY(e);let h=Number.POSITIVE_INFINITY;function f(p,_,g){const m=p.inRange(r.x,r.y,o);if(i&&!m)return;const b=p.getCenterPoint(o);if(!(!!a||n.isPointInArea(b))&&!m)return;const v=t(r,b);v<h?(l=[{element:p,datasetIndex:_,index:g}],h=v):v===h&&l.push({element:p,datasetIndex:_,index:g})}return S5(n,e,r,f),l}function N4(n,r,e,i,o,a){return!a&&!n.isPointInArea(r)?[]:e==="r"&&!i?OY(n,r,e,o):DY(n,r,e,i,o,a)}function d8(n,r,e,i,o){const a=[],l=e==="x"?"inXRange":"inYRange";let t=!1;return S5(n,e,r,(h,f,p)=>{h[l]&&h[l](r[e],o)&&(a.push({element:h,datasetIndex:f,index:p}),t=t||h.inRange(r.x,r.y,o))}),i&&!t?[]:a}var RY={modes:{index(n,r,e,i){const o=z0(r,n),a=e.axis||"x",l=e.includeInvisible||!1,t=e.intersect?R4(n,o,a,i,l):N4(n,o,a,!1,i,l),h=[];return t.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const p=t[0].index,_=f.data[p];_&&!_.skip&&h.push({element:_,datasetIndex:f.index,index:p})}),h):[]},dataset(n,r,e,i){const o=z0(r,n),a=e.axis||"xy",l=e.includeInvisible||!1;let t=e.intersect?R4(n,o,a,i,l):N4(n,o,a,!1,i,l);if(t.length>0){const h=t[0].datasetIndex,f=n.getDatasetMeta(h).data;t=[];for(let p=0;p<f.length;++p)t.push({element:f[p],datasetIndex:h,index:p})}return t},point(n,r,e,i){const o=z0(r,n),a=e.axis||"xy",l=e.includeInvisible||!1;return R4(n,o,a,i,l)},nearest(n,r,e,i){const o=z0(r,n),a=e.axis||"xy",l=e.includeInvisible||!1;return N4(n,o,a,e.intersect,i,l)},x(n,r,e,i){const o=z0(r,n);return d8(n,o,"x",e.intersect,i)},y(n,r,e,i){const o=z0(r,n);return d8(n,o,"y",e.intersect,i)}}};const oD=["left","top","right","bottom"];function X_(n,r){return n.filter(e=>e.pos===r)}function p8(n,r){return n.filter(e=>oD.indexOf(e.pos)===-1&&e.box.axis===r)}function Z_(n,r){return n.sort((e,i)=>{const o=r?i:e,a=r?e:i;return o.weight===a.weight?o.index-a.index:o.weight-a.weight})}function NY(n){const r=[];let e,i,o,a,l,t;for(e=0,i=(n||[]).length;e<i;++e)o=n[e],{position:a,options:{stack:l,stackWeight:t=1}}=o,r.push({index:e,box:o,pos:a,horizontal:o.isHorizontal(),weight:o.weight,stack:l&&a+l,stackWeight:t});return r}function jY(n){const r={};for(const e of n){const{stack:i,pos:o,stackWeight:a}=e;if(!i||!oD.includes(o))continue;const l=r[i]||(r[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return r}function UY(n,r){const e=jY(n),{vBoxMaxWidth:i,hBoxMaxHeight:o}=r;let a,l,t;for(a=0,l=n.length;a<l;++a){t=n[a];const{fullSize:h}=t.box,f=e[t.stack],p=f&&t.stackWeight/f.weight;t.horizontal?(t.width=p?p*i:h&&r.availableWidth,t.height=o):(t.width=i,t.height=p?p*o:h&&r.availableHeight)}return e}function zY(n){const r=NY(n),e=Z_(r.filter(f=>f.box.fullSize),!0),i=Z_(X_(r,"left"),!0),o=Z_(X_(r,"right")),a=Z_(X_(r,"top"),!0),l=Z_(X_(r,"bottom")),t=p8(r,"x"),h=p8(r,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:o.concat(h).concat(l).concat(t),chartArea:X_(r,"chartArea"),vertical:i.concat(o).concat(h),horizontal:a.concat(l).concat(t)}}function A8(n,r,e,i){return Math.max(n[e],r[e])+Math.max(n[i],r[i])}function aD(n,r){n.top=Math.max(n.top,r.top),n.left=Math.max(n.left,r.left),n.bottom=Math.max(n.bottom,r.bottom),n.right=Math.max(n.right,r.right)}function HY(n,r,e,i){const{pos:o,box:a}=e,l=n.maxPadding;if(!za(o)){e.size&&(n[o]-=e.size);const _=i[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?a.height:a.width),e.size=_.size/_.count,n[o]+=e.size}a.getPadding&&aD(l,a.getPadding());const t=Math.max(0,r.outerWidth-A8(l,n,"left","right")),h=Math.max(0,r.outerHeight-A8(l,n,"top","bottom")),f=t!==n.w,p=h!==n.h;return n.w=t,n.h=h,e.horizontal?{same:f,other:p}:{same:p,other:f}}function QY(n){const r=n.maxPadding;function e(i){const o=Math.max(r[i]-n[i],0);return n[i]+=o,o}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function VY(n,r){const e=r.maxPadding;function i(o){const a={left:0,top:0,right:0,bottom:0};return o.forEach(l=>{a[l]=Math.max(r[l],e[l])}),a}return i(n?["left","right"]:["top","bottom"])}function uv(n,r,e,i){const o=[];let a,l,t,h,f,p;for(a=0,l=n.length,f=0;a<l;++a){t=n[a],h=t.box,h.update(t.width||r.w,t.height||r.h,VY(t.horizontal,r));const{same:_,other:g}=HY(r,e,t,i);f|=_&&o.length,p=p||g,h.fullSize||o.push(t)}return f&&uv(o,r,e,i)||p}function Tx(n,r,e,i,o){n.top=e,n.left=r,n.right=r+i,n.bottom=e+o,n.width=i,n.height=o}function m8(n,r,e,i){const o=e.padding;let{x:a,y:l}=r;for(const t of n){const h=t.box,f=i[t.stack]||{placed:0,weight:1},p=t.stackWeight/f.weight||1;if(t.horizontal){const _=r.w*p,g=f.size||h.height;Xv(f.start)&&(l=f.start),h.fullSize?Tx(h,o.left,l,e.outerWidth-o.right-o.left,g):Tx(h,r.left+f.placed,l,_,g),f.start=l,f.placed+=_,l=h.bottom}else{const _=r.h*p,g=f.size||h.width;Xv(f.start)&&(a=f.start),h.fullSize?Tx(h,a,o.top,g,e.outerHeight-o.bottom-o.top):Tx(h,a,r.top+f.placed,g,_),f.start=a,f.placed+=_,a=h.right}}r.x=a,r.y=l}var Bf={addBox(n,r){n.boxes||(n.boxes=[]),r.fullSize=r.fullSize||!1,r.position=r.position||"top",r.weight=r.weight||0,r._layers=r._layers||function(){return[{z:0,draw(e){r.draw(e)}}]},n.boxes.push(r)},removeBox(n,r){const e=n.boxes?n.boxes.indexOf(r):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,r,e){r.fullSize=e.fullSize,r.position=e.position,r.weight=e.weight},update(n,r,e,i){if(!n)return;const o=Ff(n.options.layout.padding),a=Math.max(r-o.width,0),l=Math.max(e-o.height,0),t=zY(n.boxes),h=t.vertical,f=t.horizontal;Rl(n.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const p=h.reduce((x,v)=>v.box.options&&v.box.options.display===!1?x:x+1,0)||1,_=Object.freeze({outerWidth:r,outerHeight:e,padding:o,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/p,hBoxMaxHeight:l/2}),g=Object.assign({},o);aD(g,Ff(i));const m=Object.assign({maxPadding:g,w:a,h:l,x:o.left,y:o.top},o),b=UY(h.concat(f),_);uv(t.fullSize,m,_,b),uv(h,m,_,b),uv(f,m,_,b)&&uv(h,m,_,b),QY(m),m8(t.leftAndTop,m,_,b),m.x+=m.w,m.y+=m.h,m8(t.rightAndBottom,m,_,b),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Rl(t.chartArea,x=>{const v=x.box;Object.assign(v,n.chartArea),v.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class lD{acquireContext(r,e){}releaseContext(r){return!1}addEventListener(r,e,i){}removeEventListener(r,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(r,e,i,o){return e=Math.max(0,e||r.width),i=i||r.height,{width:e,height:Math.max(0,o?Math.floor(e/o):i)}}isAttached(r){return!0}updateConfig(r){}}class GY extends lD{acquireContext(r){return r&&r.getContext&&r.getContext("2d")||null}updateConfig(r){r.options.animation=!1}}const nw="$chartjs",WY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},g8=n=>n===null||n==="";function $Y(n,r){const e=n.style,i=n.getAttribute("height"),o=n.getAttribute("width");if(n[nw]={initial:{height:i,width:o,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",g8(o)){const a=e8(n,"width");a!==void 0&&(n.width=a)}if(g8(i))if(n.style.height==="")n.height=n.width/(r||2);else{const a=e8(n,"height");a!==void 0&&(n.height=a)}return n}const cD=Kq?{passive:!0}:!1;function KY(n,r,e){n&&n.addEventListener(r,e,cD)}function qY(n,r,e){n&&n.canvas&&n.canvas.removeEventListener(r,e,cD)}function YY(n,r){const e=WY[n.type]||n.type,{x:i,y:o}=z0(n,r);return{type:e,chart:r,native:n,x:i!==void 0?i:null,y:o!==void 0?o:null}}function Rw(n,r){for(const e of n)if(e===r||e.contains(r))return!0}function XY(n,r,e){const i=n.canvas,o=new MutationObserver(a=>{let l=!1;for(const t of a)l=l||Rw(t.addedNodes,i),l=l&&!Rw(t.removedNodes,i);l&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}function ZY(n,r,e){const i=n.canvas,o=new MutationObserver(a=>{let l=!1;for(const t of a)l=l||Rw(t.removedNodes,i),l=l&&!Rw(t.addedNodes,i);l&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}const eb=new Map;let y8=0;function uD(){const n=window.devicePixelRatio;n!==y8&&(y8=n,eb.forEach((r,e)=>{e.currentDevicePixelRatio!==n&&r()}))}function JY(n,r){eb.size||window.addEventListener("resize",uD),eb.set(n,r)}function eX(n){eb.delete(n),eb.size||window.removeEventListener("resize",uD)}function tX(n,r,e){const i=n.canvas,o=i&&oB(i);if(!o)return;const a=jO((t,h)=>{const f=o.clientWidth;e(t,h),f<o.clientWidth&&e()},window),l=new ResizeObserver(t=>{const h=t[0],f=h.contentRect.width,p=h.contentRect.height;f===0&&p===0||a(f,p)});return l.observe(o),JY(n,a),l}function j4(n,r,e){e&&e.disconnect(),r==="resize"&&eX(n)}function rX(n,r,e){const i=n.canvas,o=jO(a=>{n.ctx!==null&&e(YY(a,n))},n);return KY(i,r,o),o}class nX extends lD{acquireContext(r,e){const i=r&&r.getContext&&r.getContext("2d");return i&&i.canvas===r?($Y(r,e),i):null}releaseContext(r){const e=r.canvas;if(!e[nw])return!1;const i=e[nw].initial;["height","width"].forEach(a=>{const l=i[a];Na(l)?e.removeAttribute(a):e.setAttribute(a,l)});const o=i.style||{};return Object.keys(o).forEach(a=>{e.style[a]=o[a]}),e.width=e.width,delete e[nw],!0}addEventListener(r,e,i){this.removeEventListener(r,e);const o=r.$proxies||(r.$proxies={}),l={attach:XY,detach:ZY,resize:tX}[e]||rX;o[e]=l(r,e,i)}removeEventListener(r,e){const i=r.$proxies||(r.$proxies={}),o=i[e];if(!o)return;({attach:j4,detach:j4,resize:j4}[e]||qY)(r,e,o),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(r,e,i,o){return $q(r,e,i,o)}isAttached(r){const e=r&&oB(r);return!!(e&&e.isConnected)}}function iX(n){return!sB()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?GY:nX}var Dx;let ng=(Dx=class{constructor(){is(this,"x");is(this,"y");is(this,"active",!1);is(this,"options");is(this,"$animations")}tooltipPosition(r){const{x:e,y:i}=this.getProps(["x","y"],r);return{x:e,y:i}}hasValue(){return Iy(this.x)&&Iy(this.y)}getProps(r,e){const i=this.$animations;if(!e||!i)return this;const o={};return r.forEach(a=>{o[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),o}},is(Dx,"defaults",{}),is(Dx,"defaultRoutes"),Dx);function sX(n,r){const e=n.options.ticks,i=oX(n),o=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?lX(r):[],l=a.length,t=a[0],h=a[l-1],f=[];if(l>o)return cX(r,f,a,l/o),f;const p=aX(a,r,o);if(l>0){let _,g;const m=l>1?Math.round((h-t)/(l-1)):null;for(Ix(r,f,p,Na(m)?0:t-m,t),_=0,g=l-1;_<g;_++)Ix(r,f,p,a[_],a[_+1]);return Ix(r,f,p,h,Na(m)?r.length:h+m),f}return Ix(r,f,p),f}function oX(n){const r=n.options.offset,e=n._tickSize(),i=n._length/e+(r?0:1),o=n._maxLength/e;return Math.floor(Math.min(i,o))}function aX(n,r,e){const i=uX(n),o=r.length/e;if(!i)return Math.max(o,1);const a=YK(i);for(let l=0,t=a.length-1;l<t;l++){const h=a[l];if(h>o)return h}return Math.max(o,1)}function lX(n){const r=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&r.push(e);return r}function cX(n,r,e,i){let o=0,a=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(r.push(n[l]),o++,a=e[o*i])}function Ix(n,r,e,i,o){const a=Zo(i,0),l=Math.min(Zo(o,n.length),n.length);let t=0,h,f,p;for(e=Math.ceil(e),o&&(h=o-i,e=h/Math.floor(h/e)),p=a;p<0;)t++,p=Math.round(a+t*e);for(f=Math.max(a,0);f<l;f++)f===p&&(r.push(n[f]),t++,p=Math.round(a+t*e))}function uX(n){const r=n.length;let e,i;if(r<2)return!1;for(i=n[0],e=1;e<r;++e)if(n[e]-n[e-1]!==i)return!1;return i}const hX=n=>n==="left"?"right":n==="right"?"left":n,_8=(n,r,e)=>r==="top"||r==="left"?n[r]+e:n[r]-e,v8=(n,r)=>Math.min(r||n,n);function b8(n,r){const e=[],i=n.length/r,o=n.length;let a=0;for(;a<o;a+=i)e.push(n[Math.floor(a)]);return e}function fX(n,r,e){const i=n.ticks.length,o=Math.min(r,i-1),a=n._startPixel,l=n._endPixel,t=1e-6;let h=n.getPixelForTick(o),f;if(!(e&&(i===1?f=Math.max(h-a,l-h):r===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(o-1))/2,h+=o<r?f:-f,h<a-t||h>l+t)))return h}function dX(n,r){Rl(n,e=>{const i=e.gc,o=i.length/2;let a;if(o>r){for(a=0;a<o;++a)delete e.data[i[a]];i.splice(0,o)}})}function J_(n){return n.drawTicks?n.tickLength:0}function x8(n,r){if(!n.display)return 0;const e=hh(n.font,r),i=Ff(n.padding);return(jc(n.text)?n.text.length:1)*e.lineHeight+i.height}function pX(n,r){return l0(n,{scale:r,type:"scale"})}function AX(n,r,e){return l0(n,{tick:e,index:r,type:"tick"})}function mX(n,r,e){let i=JE(n);return(e&&r!=="right"||!e&&r==="right")&&(i=hX(i)),i}function gX(n,r,e,i){const{top:o,left:a,bottom:l,right:t,chart:h}=n,{chartArea:f,scales:p}=h;let _=0,g,m,b;const x=l-o,v=t-a;if(n.isHorizontal()){if(m=xf(i,a,t),za(e)){const S=Object.keys(e)[0],B=e[S];b=p[S].getPixelForValue(B)+x-r}else e==="center"?b=(f.bottom+f.top)/2+x-r:b=_8(n,e,r);g=t-a}else{if(za(e)){const S=Object.keys(e)[0],B=e[S];m=p[S].getPixelForValue(B)-v+r}else e==="center"?m=(f.left+f.right)/2-v+r:m=_8(n,e,r);b=xf(i,l,o),_=e==="left"?-Iu:Iu}return{titleX:m,titleY:b,maxWidth:g,rotation:_}}class x1 extends ng{constructor(r){super(),this.id=r.id,this.type=r.type,this.options=void 0,this.ctx=r.ctx,this.chart=r.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(r){this.options=r.setContext(this.getContext()),this.axis=r.axis,this._userMin=this.parse(r.min),this._userMax=this.parse(r.max),this._suggestedMin=this.parse(r.suggestedMin),this._suggestedMax=this.parse(r.suggestedMax)}parse(r,e){return r}getUserBounds(){let{_userMin:r,_userMax:e,_suggestedMin:i,_suggestedMax:o}=this;return r=Zd(r,Number.POSITIVE_INFINITY),e=Zd(e,Number.NEGATIVE_INFINITY),i=Zd(i,Number.POSITIVE_INFINITY),o=Zd(o,Number.NEGATIVE_INFINITY),{min:Zd(r,i),max:Zd(e,o),minDefined:pu(r),maxDefined:pu(e)}}getMinMax(r){let{min:e,max:i,minDefined:o,maxDefined:a}=this.getUserBounds(),l;if(o&&a)return{min:e,max:i};const t=this.getMatchingVisibleMetas();for(let h=0,f=t.length;h<f;++h)l=t[h].controller.getMinMax(this,r),o||(e=Math.min(e,l.min)),a||(i=Math.max(i,l.max));return e=a&&e>i?i:e,i=o&&e>i?e:i,{min:Zd(e,Zd(i,e)),max:Zd(i,Zd(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const r=this.chart.data;return this.options.labels||(this.isHorizontal()?r.xLabels:r.yLabels)||r.labels||[]}getLabelItems(r=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(r))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){cc(this.options.beforeUpdate,[this])}update(r,e,i){const{beginAtZero:o,grace:a,ticks:l}=this.options,t=l.sampleSize;this.beforeUpdate(),this.maxWidth=r,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Cq(this,a,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=t<this.ticks.length;this._convertTicksToLabels(h?b8(this.ticks,t):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=sX(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let r=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,r=!r),this._startPixel=e,this._endPixel=i,this._reversePixels=r,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){cc(this.options.afterUpdate,[this])}beforeSetDimensions(){cc(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){cc(this.options.afterSetDimensions,[this])}_callHooks(r){this.chart.notifyPlugins(r,this.getContext()),cc(this.options[r],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){cc(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(r){const e=this.options.ticks;let i,o,a;for(i=0,o=r.length;i<o;i++)a=r[i],a.label=cc(e.callback,[a.value,i,r],this)}afterTickToLabelConversion(){cc(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){cc(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const r=this.options,e=r.ticks,i=v8(this.ticks.length,r.ticks.maxTicksLimit),o=e.minRotation||0,a=e.maxRotation;let l=o,t,h,f;if(!this._isVisible()||!e.display||o>=a||i<=1||!this.isHorizontal()){this.labelRotation=o;return}const p=this._getLabelSizes(),_=p.widest.width,g=p.highest.height,m=kh(this.chart.width-_,0,this.maxWidth);t=r.offset?this.maxWidth/i:m/(i-1),_+6>t&&(t=m/(i-(r.offset?.5:1)),h=this.maxHeight-J_(r.grid)-e.padding-x8(r.title,this.chart.options.font),f=Math.sqrt(_*_+g*g),l=XE(Math.min(Math.asin(kh((p.highest.height+6)/t,-1,1)),Math.asin(kh(h/f,-1,1))-Math.asin(kh(g/f,-1,1)))),l=Math.max(o,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){cc(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){cc(this.options.beforeFit,[this])}fit(){const r={width:0,height:0},{chart:e,options:{ticks:i,title:o,grid:a}}=this,l=this._isVisible(),t=this.isHorizontal();if(l){const h=x8(o,e.options.font);if(t?(r.width=this.maxWidth,r.height=J_(a)+h):(r.height=this.maxHeight,r.width=J_(a)+h),i.display&&this.ticks.length){const{first:f,last:p,widest:_,highest:g}=this._getLabelSizes(),m=i.padding*2,b=bA(this.labelRotation),x=Math.cos(b),v=Math.sin(b);if(t){const S=i.mirror?0:v*_.width+x*g.height;r.height=Math.min(this.maxHeight,r.height+S+m)}else{const S=i.mirror?0:x*_.width+v*g.height;r.width=Math.min(this.maxWidth,r.width+S+m)}this._calculatePadding(f,p,v,x)}}this._handleMargins(),t?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=r.height):(this.width=r.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(r,e,i,o){const{ticks:{align:a,padding:l},position:t}=this.options,h=this.labelRotation!==0,f=t!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,m=0;h?f?(g=o*r.width,m=i*e.height):(g=i*r.height,m=o*e.width):a==="start"?m=e.width:a==="end"?g=r.width:a!=="inner"&&(g=r.width/2,m=e.width/2),this.paddingLeft=Math.max((g-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((m-_+l)*this.width/(this.width-_),0)}else{let p=e.height/2,_=r.height/2;a==="start"?(p=0,_=r.height):a==="end"&&(p=e.height,_=0),this.paddingTop=p+l,this.paddingBottom=_+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){cc(this.options.afterFit,[this])}isHorizontal(){const{axis:r,position:e}=this.options;return e==="top"||e==="bottom"||r==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(r){this.beforeTickToLabelConversion(),this.generateTickLabels(r);let e,i;for(e=0,i=r.length;e<i;e++)Na(r[e].label)&&(r.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let r=this._labelSizes;if(!r){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=b8(i,e)),this._labelSizes=r=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return r}_computeLabelSizes(r,e,i){const{ctx:o,_longestTextCache:a}=this,l=[],t=[],h=Math.floor(e/v8(e,i));let f=0,p=0,_,g,m,b,x,v,S,B,F,O,V;for(_=0;_<e;_+=h){if(b=r[_].label,x=this._resolveTickFontOptions(_),o.font=v=x.string,S=a[v]=a[v]||{data:{},gc:[]},B=x.lineHeight,F=O=0,!Na(b)&&!jc(b))F=Ow(o,S.data,S.gc,F,b),O=B;else if(jc(b))for(g=0,m=b.length;g<m;++g)V=b[g],!Na(V)&&!jc(V)&&(F=Ow(o,S.data,S.gc,F,V),O+=B);l.push(F),t.push(O),f=Math.max(F,f),p=Math.max(O,p)}dX(a,e);const X=l.indexOf(f),Q=t.indexOf(p),ee=ne=>({width:l[ne]||0,height:t[ne]||0});return{first:ee(0),last:ee(e-1),widest:ee(X),highest:ee(Q),widths:l,heights:t}}getLabelForValue(r){return r}getPixelForValue(r,e){return NaN}getValueForPixel(r){}getPixelForTick(r){const e=this.ticks;return r<0||r>e.length-1?null:this.getPixelForValue(e[r].value)}getPixelForDecimal(r){this._reversePixels&&(r=1-r);const e=this._startPixel+r*this._length;return eq(this._alignToPixels?k0(this.chart,e,0):e)}getDecimalForPixel(r){const e=(r-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:r,max:e}=this;return r<0&&e<0?e:r>0&&e>0?r:0}getContext(r){const e=this.ticks||[];if(r>=0&&r<e.length){const i=e[r];return i.$context||(i.$context=AX(this.getContext(),r,i))}return this.$context||(this.$context=pX(this.chart.getContext(),this))}_tickSize(){const r=this.options.ticks,e=bA(this.labelRotation),i=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),a=this._getLabelSizes(),l=r.autoSkipPadding||0,t=a?a.widest.width+l:0,h=a?a.highest.height+l:0;return this.isHorizontal()?h*i>t*o?t/i:h/o:h*o<t*i?h/i:t/o}_isVisible(){const r=this.options.display;return r!=="auto"?!!r:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(r){const e=this.axis,i=this.chart,o=this.options,{grid:a,position:l,border:t}=o,h=a.offset,f=this.isHorizontal(),_=this.ticks.length+(h?1:0),g=J_(a),m=[],b=t.setContext(this.getContext()),x=b.display?b.width:0,v=x/2,S=function(k){return k0(i,k,x)};let B,F,O,V,X,Q,ee,ne,Ae,fe,ce,G;if(l==="top")B=S(this.bottom),Q=this.bottom-g,ne=B-v,fe=S(r.top)+v,G=r.bottom;else if(l==="bottom")B=S(this.top),fe=r.top,G=S(r.bottom)-v,Q=B+v,ne=this.top+g;else if(l==="left")B=S(this.right),X=this.right-g,ee=B-v,Ae=S(r.left)+v,ce=r.right;else if(l==="right")B=S(this.left),Ae=r.left,ce=S(r.right)-v,X=B+v,ee=this.left+g;else if(e==="x"){if(l==="center")B=S((r.top+r.bottom)/2+.5);else if(za(l)){const k=Object.keys(l)[0],R=l[k];B=S(this.chart.scales[k].getPixelForValue(R))}fe=r.top,G=r.bottom,Q=B+v,ne=Q+g}else if(e==="y"){if(l==="center")B=S((r.left+r.right)/2);else if(za(l)){const k=Object.keys(l)[0],R=l[k];B=S(this.chart.scales[k].getPixelForValue(R))}X=B-v,ee=X-g,Ae=r.left,ce=r.right}const Z=Zo(o.ticks.maxTicksLimit,_),z=Math.max(1,Math.ceil(_/Z));for(F=0;F<_;F+=z){const k=this.getContext(F),R=a.setContext(k),N=t.setContext(k),U=R.lineWidth,Y=R.color,de=N.dash||[],J=N.dashOffset,xe=R.tickWidth,Te=R.tickColor,Ue=R.tickBorderDash||[],pe=R.tickBorderDashOffset;O=fX(this,F,h),O!==void 0&&(V=k0(i,O,U),f?X=ee=Ae=ce=V:Q=ne=fe=G=V,m.push({tx1:X,ty1:Q,tx2:ee,ty2:ne,x1:Ae,y1:fe,x2:ce,y2:G,width:U,color:Y,borderDash:de,borderDashOffset:J,tickWidth:xe,tickColor:Te,tickBorderDash:Ue,tickBorderDashOffset:pe}))}return this._ticksLength=_,this._borderValue=B,m}_computeLabelItems(r){const e=this.axis,i=this.options,{position:o,ticks:a}=i,l=this.isHorizontal(),t=this.ticks,{align:h,crossAlign:f,padding:p,mirror:_}=a,g=J_(i.grid),m=g+p,b=_?-p:m,x=-bA(this.labelRotation),v=[];let S,B,F,O,V,X,Q,ee,ne,Ae,fe,ce,G="middle";if(o==="top")X=this.bottom-b,Q=this._getXAxisLabelAlignment();else if(o==="bottom")X=this.top+b,Q=this._getXAxisLabelAlignment();else if(o==="left"){const z=this._getYAxisLabelAlignment(g);Q=z.textAlign,V=z.x}else if(o==="right"){const z=this._getYAxisLabelAlignment(g);Q=z.textAlign,V=z.x}else if(e==="x"){if(o==="center")X=(r.top+r.bottom)/2+m;else if(za(o)){const z=Object.keys(o)[0],k=o[z];X=this.chart.scales[z].getPixelForValue(k)+m}Q=this._getXAxisLabelAlignment()}else if(e==="y"){if(o==="center")V=(r.left+r.right)/2-m;else if(za(o)){const z=Object.keys(o)[0],k=o[z];V=this.chart.scales[z].getPixelForValue(k)}Q=this._getYAxisLabelAlignment(g).textAlign}e==="y"&&(h==="start"?G="top":h==="end"&&(G="bottom"));const Z=this._getLabelSizes();for(S=0,B=t.length;S<B;++S){F=t[S],O=F.label;const z=a.setContext(this.getContext(S));ee=this.getPixelForTick(S)+a.labelOffset,ne=this._resolveTickFontOptions(S),Ae=ne.lineHeight,fe=jc(O)?O.length:1;const k=fe/2,R=z.color,N=z.textStrokeColor,U=z.textStrokeWidth;let Y=Q;l?(V=ee,Q==="inner"&&(S===B-1?Y=this.options.reverse?"left":"right":S===0?Y=this.options.reverse?"right":"left":Y="center"),o==="top"?f==="near"||x!==0?ce=-fe*Ae+Ae/2:f==="center"?ce=-Z.highest.height/2-k*Ae+Ae:ce=-Z.highest.height+Ae/2:f==="near"||x!==0?ce=Ae/2:f==="center"?ce=Z.highest.height/2-k*Ae:ce=Z.highest.height-fe*Ae,_&&(ce*=-1),x!==0&&!z.showLabelBackdrop&&(V+=Ae/2*Math.sin(x))):(X=ee,ce=(1-fe)*Ae/2);let de;if(z.showLabelBackdrop){const J=Ff(z.backdropPadding),xe=Z.heights[S],Te=Z.widths[S];let Ue=ce-J.top,pe=0-J.left;switch(G){case"middle":Ue-=xe/2;break;case"bottom":Ue-=xe;break}switch(Q){case"center":pe-=Te/2;break;case"right":pe-=Te;break;case"inner":S===B-1?pe-=Te:S>0&&(pe-=Te/2);break}de={left:pe,top:Ue,width:Te+J.width,height:xe+J.height,color:z.backdropColor}}v.push({label:O,font:ne,textOffset:ce,options:{rotation:x,color:R,strokeColor:N,strokeWidth:U,textAlign:Y,textBaseline:G,translation:[V,X],backdrop:de}})}return v}_getXAxisLabelAlignment(){const{position:r,ticks:e}=this.options;if(-bA(this.labelRotation))return r==="top"?"left":"right";let o="center";return e.align==="start"?o="left":e.align==="end"?o="right":e.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(r){const{position:e,ticks:{crossAlign:i,mirror:o,padding:a}}=this.options,l=this._getLabelSizes(),t=r+a,h=l.widest.width;let f,p;return e==="left"?o?(p=this.right+a,i==="near"?f="left":i==="center"?(f="center",p+=h/2):(f="right",p+=h)):(p=this.right-t,i==="near"?f="right":i==="center"?(f="center",p-=h/2):(f="left",p=this.left)):e==="right"?o?(p=this.left+a,i==="near"?f="right":i==="center"?(f="center",p-=h/2):(f="left",p-=h)):(p=this.left+t,i==="near"?f="left":i==="center"?(f="center",p+=h/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const r=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:r.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:r.width}}drawBackground(){const{ctx:r,options:{backgroundColor:e},left:i,top:o,width:a,height:l}=this;e&&(r.save(),r.fillStyle=e,r.fillRect(i,o,a,l),r.restore())}getLineWidthForValue(r){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const o=this.ticks.findIndex(a=>a.value===r);return o>=0?e.setContext(this.getContext(o)).lineWidth:0}drawGrid(r){const e=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(r));let a,l;const t=(h,f,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(e.display)for(a=0,l=o.length;a<l;++a){const h=o[a];e.drawOnChartArea&&t({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&t({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:r,ctx:e,options:{border:i,grid:o}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const t=o.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,p,_,g;this.isHorizontal()?(f=k0(r,this.left,l)-l/2,p=k0(r,this.right,t)+t/2,_=g=h):(_=k0(r,this.top,l)-l/2,g=k0(r,this.bottom,t)+t/2,f=p=h),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(f,_),e.lineTo(p,g),e.stroke(),e.restore()}drawLabels(r){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&b5(i,o);const a=this.getLabelItems(r);for(const l of a){const t=l.options,h=l.font,f=l.label,p=l.textOffset;g1(i,f,0,p,h,t)}o&&x5(i)}drawTitle(){const{ctx:r,options:{position:e,title:i,reverse:o}}=this;if(!i.display)return;const a=hh(i.font),l=Ff(i.padding),t=i.align;let h=a.lineHeight/2;e==="bottom"||e==="center"||za(e)?(h+=l.bottom,jc(i.text)&&(h+=a.lineHeight*(i.text.length-1))):h+=l.top;const{titleX:f,titleY:p,maxWidth:_,rotation:g}=gX(this,h,e,t);g1(r,i.text,0,0,a,{color:i.color,maxWidth:_,rotation:g,textAlign:mX(t,e,o),textBaseline:"middle",translation:[f,p]})}draw(r){this._isVisible()&&(this.drawBackground(),this.drawGrid(r),this.drawBorder(),this.drawTitle(),this.drawLabels(r))}_layers(){const r=this.options,e=r.ticks&&r.ticks.z||0,i=Zo(r.grid&&r.grid.z,-1),o=Zo(r.border&&r.border.z,0);return!this._isVisible()||this.draw!==x1.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(r){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let a,l;for(a=0,l=e.length;a<l;++a){const t=e[a];t[i]===this.id&&(!r||t.type===r)&&o.push(t)}return o}_resolveTickFontOptions(r){const e=this.options.ticks.setContext(this.getContext(r));return hh(e.font)}_maxDigits(){const r=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/r}}class Mx{constructor(r,e,i){this.type=r,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(r){return Object.prototype.isPrototypeOf.call(this.type.prototype,r.prototype)}register(r){const e=Object.getPrototypeOf(r);let i;vX(e)&&(i=this.register(e));const o=this.items,a=r.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+r);return a in o||(o[a]=r,yX(r,l,i),this.override&&Uc.override(r.id,r.overrides)),l}get(r){return this.items[r]}unregister(r){const e=this.items,i=r.id,o=this.scope;i in e&&delete e[i],o&&i in Uc[o]&&(delete Uc[o][i],this.override&&delete m1[i])}}function yX(n,r,e){const i=Yv(Object.create(null),[e?Uc.get(e):{},Uc.get(r),n.defaults]);Uc.set(r,i),n.defaultRoutes&&_X(r,n.defaultRoutes),n.descriptors&&Uc.describe(r,n.descriptors)}function _X(n,r){Object.keys(r).forEach(e=>{const i=e.split("."),o=i.pop(),a=[n].concat(i).join("."),l=r[e].split("."),t=l.pop(),h=l.join(".");Uc.route(a,o,h,t)})}function vX(n){return"id"in n&&"defaults"in n}class bX{constructor(){this.controllers=new Mx(xA,"datasets",!0),this.elements=new Mx(ng,"elements"),this.plugins=new Mx(Object,"plugins"),this.scales=new Mx(x1,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...r){this._each("register",r)}remove(...r){this._each("unregister",r)}addControllers(...r){this._each("register",r,this.controllers)}addElements(...r){this._each("register",r,this.elements)}addPlugins(...r){this._each("register",r,this.plugins)}addScales(...r){this._each("register",r,this.scales)}getController(r){return this._get(r,this.controllers,"controller")}getElement(r){return this._get(r,this.elements,"element")}getPlugin(r){return this._get(r,this.plugins,"plugin")}getScale(r){return this._get(r,this.scales,"scale")}removeControllers(...r){this._each("unregister",r,this.controllers)}removeElements(...r){this._each("unregister",r,this.elements)}removePlugins(...r){this._each("unregister",r,this.plugins)}removeScales(...r){this._each("unregister",r,this.scales)}_each(r,e,i){[...e].forEach(o=>{const a=i||this._getRegistryForType(o);i||a.isForType(o)||a===this.plugins&&o.id?this._exec(r,a,o):Rl(o,l=>{const t=i||this._getRegistryForType(l);this._exec(r,t,l)})})}_exec(r,e,i){const o=YE(r);cc(i["before"+o],[],i),e[r](i),cc(i["after"+o],[],i)}_getRegistryForType(r){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(r))return i}return this.plugins}_get(r,e,i){const o=e.get(r);if(o===void 0)throw new Error('"'+r+'" is not a registered '+i+".");return o}}var im=new bX;class xX{constructor(){this._init=[]}notify(r,e,i,o){e==="beforeInit"&&(this._init=this._createDescriptors(r,!0),this._notify(this._init,r,"install"));const a=o?this._descriptors(r).filter(o):this._descriptors(r),l=this._notify(a,r,e,i);return e==="afterDestroy"&&(this._notify(a,r,"stop"),this._notify(this._init,r,"uninstall")),l}_notify(r,e,i,o){o=o||{};for(const a of r){const l=a.plugin,t=l[i],h=[e,o,a.options];if(cc(t,h,l)===!1&&o.cancelable)return!1}return!0}invalidate(){Na(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(r){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(r);return this._notifyStateChanges(r),e}_createDescriptors(r,e){const i=r&&r.config,o=Zo(i.options&&i.options.plugins,{}),a=wX(i);return o===!1&&!e?[]:CX(r,a,o,e)}_notifyStateChanges(r){const e=this._oldCache||[],i=this._cache,o=(a,l)=>a.filter(t=>!l.some(h=>t.plugin.id===h.plugin.id));this._notify(o(e,i),r,"stop"),this._notify(o(i,e),r,"start")}}function wX(n){const r={},e=[],i=Object.keys(im.plugins.items);for(let a=0;a<i.length;a++)e.push(im.getPlugin(i[a]));const o=n.plugins||[];for(let a=0;a<o.length;a++){const l=o[a];e.indexOf(l)===-1&&(e.push(l),r[l.id]=!0)}return{plugins:e,localIds:r}}function SX(n,r){return!r&&n===!1?null:n===!0?{}:n}function CX(n,{plugins:r,localIds:e},i,o){const a=[],l=n.getContext();for(const t of r){const h=t.id,f=SX(i[h],o);f!==null&&a.push({plugin:t,options:EX(n.config,{plugin:t,local:e[h]},f,l)})}return a}function EX(n,{plugin:r,local:e},i,o){const a=n.pluginScopeKeys(r),l=n.getOptionScopes(i,a);return e&&r.defaults&&l.push(r.defaults),n.createResolver(l,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fC(n,r){const e=Uc.datasets[n]||{};return((r.datasets||{})[n]||{}).indexAxis||r.indexAxis||e.indexAxis||"x"}function BX(n,r){let e=n;return n==="_index_"?e=r:n==="_value_"&&(e=r==="x"?"y":"x"),e}function TX(n,r){return n===r?"_index_":"_value_"}function w8(n){if(n==="x"||n==="y"||n==="r")return n}function IX(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function dC(n,...r){if(w8(n))return n;for(const e of r){const i=e.axis||IX(e.position)||n.length>1&&w8(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function S8(n,r,e){if(e[r+"AxisID"]===n)return{axis:r}}function MX(n,r){if(r.data&&r.data.datasets){const e=r.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return S8(n,"x",e[0])||S8(n,"y",e[0])}return{}}function FX(n,r){const e=m1[n.type]||{scales:{}},i=r.scales||{},o=fC(n.type,r),a=Object.create(null);return Object.keys(i).forEach(l=>{const t=i[l];if(!za(t))return console.error(`Invalid scale configuration for scale: ${l}`);if(t._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=dC(l,t,MX(l,n),Uc.scales[t.type]),f=TX(h,o),p=e.scales||{};a[l]=Ev(Object.create(null),[{axis:h},t,p[h],p[f]])}),n.data.datasets.forEach(l=>{const t=l.type||n.type,h=l.indexAxis||fC(t,r),p=(m1[t]||{}).scales||{};Object.keys(p).forEach(_=>{const g=BX(_,h),m=l[g+"AxisID"]||g;a[m]=a[m]||Object.create(null),Ev(a[m],[{axis:g},i[m],p[_]])})}),Object.keys(a).forEach(l=>{const t=a[l];Ev(t,[Uc.scales[t.type],Uc.scale])}),a}function hD(n){const r=n.options||(n.options={});r.plugins=Zo(r.plugins,{}),r.scales=FX(n,r)}function fD(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function PX(n){return n=n||{},n.data=fD(n.data),hD(n),n}const C8=new Map,dD=new Set;function Fx(n,r){let e=C8.get(n);return e||(e=r(),C8.set(n,e),dD.add(e)),e}const ev=(n,r,e)=>{const i=t0(r,e);i!==void 0&&n.add(i)};class LX{constructor(r){this._config=PX(r),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(r){this._config.type=r}get data(){return this._config.data}set data(r){this._config.data=fD(r)}get options(){return this._config.options}set options(r){this._config.options=r}get plugins(){return this._config.plugins}update(){const r=this._config;this.clearCache(),hD(r)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(r){return Fx(r,()=>[[`datasets.${r}`,""]])}datasetAnimationScopeKeys(r,e){return Fx(`${r}.transition.${e}`,()=>[[`datasets.${r}.transitions.${e}`,`transitions.${e}`],[`datasets.${r}`,""]])}datasetElementScopeKeys(r,e){return Fx(`${r}-${e}`,()=>[[`datasets.${r}.elements.${e}`,`datasets.${r}`,`elements.${e}`,""]])}pluginScopeKeys(r){const e=r.id,i=this.type;return Fx(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...r.additionalOptionScopes||[]]])}_cachedScopes(r,e){const i=this._scopeCache;let o=i.get(r);return(!o||e)&&(o=new Map,i.set(r,o)),o}getOptionScopes(r,e,i){const{options:o,type:a}=this,l=this._cachedScopes(r,i),t=l.get(e);if(t)return t;const h=new Set;e.forEach(p=>{r&&(h.add(r),p.forEach(_=>ev(h,r,_))),p.forEach(_=>ev(h,o,_)),p.forEach(_=>ev(h,m1[a]||{},_)),p.forEach(_=>ev(h,Uc,_)),p.forEach(_=>ev(h,cC,_))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),dD.has(e)&&l.set(e,f),f}chartOptionScopes(){const{options:r,type:e}=this;return[r,m1[e]||{},Uc.datasets[e]||{},{type:e},Uc,cC]}resolveNamedOptions(r,e,i,o=[""]){const a={$shared:!0},{resolver:l,subPrefixes:t}=E8(this._resolverCache,r,o);let h=l;if(OX(l,e)){a.$shared=!1,i=r0(i)?i():i;const f=this.createResolver(r,i,t);h=My(l,i,f)}for(const f of e)a[f]=h[f];return a}createResolver(r,e,i=[""],o){const{resolver:a}=E8(this._resolverCache,r,i);return za(e)?My(a,e,void 0,o):a}}function E8(n,r,e){let i=n.get(r);i||(i=new Map,n.set(r,i));const o=e.join();let a=i.get(o);return a||(a={resolver:rB(r,e),subPrefixes:e.filter(t=>!t.toLowerCase().includes("hover"))},i.set(o,a)),a}const kX=n=>za(n)&&Object.getOwnPropertyNames(n).some(r=>r0(n[r]));function OX(n,r){const{isScriptable:e,isIndexable:i}=GO(n);for(const o of r){const a=e(o),l=i(o),t=(l||a)&&n[o];if(a&&(r0(t)||kX(t))||l&&jc(t))return!0}return!1}var DX="4.5.0";const RX=["top","bottom","left","right","chartArea"];function B8(n,r){return n==="top"||n==="bottom"||RX.indexOf(n)===-1&&r==="x"}function T8(n,r){return function(e,i){return e[n]===i[n]?e[r]-i[r]:e[n]-i[n]}}function I8(n){const r=n.chart,e=r.options.animation;r.notifyPlugins("afterRender"),cc(e&&e.onComplete,[n],r)}function NX(n){const r=n.chart,e=r.options.animation;cc(e&&e.onProgress,[n],r)}function pD(n){return sB()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const iw={},M8=n=>{const r=pD(n);return Object.values(iw).filter(e=>e.canvas===r).pop()};function jX(n,r,e){const i=Object.keys(n);for(const o of i){const a=+o;if(a>=r){const l=n[o];delete n[o],(e>0||a>r)&&(n[a+e]=l)}}}function UX(n,r,e,i){return!e||n.type==="mouseout"?null:i?r:n}class zm{static register(...r){im.add(...r),F8()}static unregister(...r){im.remove(...r),F8()}constructor(r,e){const i=this.config=new LX(e),o=pD(r),a=M8(o);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||iX(o)),this.platform.updateConfig(i);const t=this.platform.acquireContext(o,l.aspectRatio),h=t&&t.canvas,f=h&&h.height,p=h&&h.width;if(this.id=zK(),this.ctx=t,this.canvas=h,this.width=p,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xX,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=iq(_=>this.update(_),l.resizeDelay||0),this._dataChanges=[],iw[this.id]=this,!t||!h){console.error("Failed to create chart: can't acquire context from the given item");return}km.listen(this,"complete",I8),km.listen(this,"progress",NX),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:r,maintainAspectRatio:e},width:i,height:o,_aspectRatio:a}=this;return Na(r)?e&&a?a:o?i/o:null:r}get data(){return this.config.data}set data(r){this.config.data=r}get options(){return this._options}set options(r){this.config.options=r}get registry(){return im}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():JM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return YM(this.canvas,this.ctx),this}stop(){return km.stop(this),this}resize(r,e){km.running(this)?this._resizeBeforeDraw={width:r,height:e}:this._resize(r,e)}_resize(r,e){const i=this.options,o=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(o,r,e,a),t=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,JM(this,t,!0)&&(this.notifyPlugins("resize",{size:l}),cc(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Rl(e,(i,o)=>{i.id=o})}buildOrUpdateScales(){const r=this.options,e=r.scales,i=this.scales,o=Object.keys(i).reduce((l,t)=>(l[t]=!1,l),{});let a=[];e&&(a=a.concat(Object.keys(e).map(l=>{const t=e[l],h=dC(l,t),f=h==="r",p=h==="x";return{options:t,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),Rl(a,l=>{const t=l.options,h=t.id,f=dC(h,t),p=Zo(t.type,l.dtype);(t.position===void 0||B8(t.position,f)!==B8(l.dposition))&&(t.position=l.dposition),o[h]=!0;let _=null;if(h in i&&i[h].type===p)_=i[h];else{const g=im.getScale(p);_=new g({id:h,type:p,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(t,r)}),Rl(o,(l,t)=>{l||delete i[t]}),Rl(i,l=>{Bf.configure(this,l,l.options),Bf.addBox(this,l)})}_updateMetasets(){const r=this._metasets,e=this.data.datasets.length,i=r.length;if(r.sort((o,a)=>o.index-a.index),i>e){for(let o=e;o<i;++o)this._destroyDatasetMeta(o);r.splice(e,i-e)}this._sortedMetasets=r.slice(0).sort(T8("order","index"))}_removeUnreferencedMetasets(){const{_metasets:r,data:{datasets:e}}=this;r.length>e.length&&delete this._stacks,r.forEach((i,o)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const r=[],e=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=e.length;i<o;i++){const a=e[i];let l=this.getDatasetMeta(i);const t=a.type||this.config.type;if(l.type&&l.type!==t&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=t,l.indexAxis=a.indexAxis||fC(t,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=im.getController(t),{datasetElementType:f,dataElementType:p}=Uc.datasets[t];Object.assign(h,{dataElementType:im.getElement(p),datasetElementType:f&&im.getElement(f)}),l.controller=new h(this,i),r.push(l.controller)}}return this._updateMetasets(),r}_resetElements(){Rl(this.data.datasets,(r,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(r){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:r,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:_}=this.getDatasetMeta(f),g=!o&&a.indexOf(_)===-1;_.buildOrUpdateElements(g),l=Math.max(+_.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),o||Rl(a,f=>{f.reset()}),this._updateDatasets(r),this.notifyPlugins("afterUpdate",{mode:r}),this._layers.sort(T8("z","_idx"));const{_active:t,_lastEvent:h}=this;h?this._eventHandler(h,!0):t.length&&this._updateHoverStyles(t,t,!0),this.render()}_updateScales(){Rl(this.scales,r=>{Bf.removeBox(this,r)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const r=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(r.events);(!zM(e,i)||!!this._responsiveListeners!==r.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:r}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:a}of e){const l=i==="_removeElements"?-a:a;jX(r,o,l)}}_getUniformDataChanges(){const r=this._dataChanges;if(!r||!r.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=a=>new Set(r.filter(l=>l[0]===a).map((l,t)=>t+","+l.splice(1).join(","))),o=i(0);for(let a=1;a<e;a++)if(!zM(o,i(a)))return;return Array.from(o).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(r){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bf.update(this,this.width,this.height,r);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Rl(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,a)=>{o._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(r){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:r,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,r0(r)?r({datasetIndex:e}):r);this.notifyPlugins("afterDatasetsUpdate",{mode:r})}}_updateDataset(r,e){const i=this.getDatasetMeta(r),o={meta:i,index:r,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(e),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(km.has(this)?this.attached&&!km.running(this)&&km.start(this):(this.draw(),I8({chart:this})))}draw(){let r;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(r=0;r<e.length&&e[r].z<=0;++r)e[r].draw(this.chartArea);for(this._drawDatasets();r<e.length;++r)e[r].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(r){const e=this._sortedMetasets,i=[];let o,a;for(o=0,a=e.length;o<a;++o){const l=e[o];(!r||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const r=this.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e)this._drawDataset(r[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(r){const e=this.ctx,i={meta:r,index:r.index,cancelable:!0},o=rD(this,r);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&b5(e,o),r.controller.draw(),o&&x5(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(r){return Wm(r,this.chartArea,this._minPadding)}getElementsAtEventForMode(r,e,i,o){const a=RY.modes[e];return typeof a=="function"?a(this,r,i,o):[]}getDatasetMeta(r){const e=this.data.datasets[r],i=this._metasets;let o=i.filter(a=>a&&a._dataset===e).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:r,_dataset:e,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=l0(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(r){const e=this.data.datasets[r];if(!e)return!1;const i=this.getDatasetMeta(r);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(r,e){const i=this.getDatasetMeta(r);i.hidden=!e}toggleDataVisibility(r){this._hiddenIndices[r]=!this._hiddenIndices[r]}getDataVisibility(r){return!this._hiddenIndices[r]}_updateVisibility(r,e,i){const o=i?"show":"hide",a=this.getDatasetMeta(r),l=a.controller._resolveAnimations(void 0,o);Xv(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(r,i),l.update(a,{visible:i}),this.update(t=>t.datasetIndex===r?o:void 0))}hide(r,e){this._updateVisibility(r,e,!1)}show(r,e){this._updateVisibility(r,e,!0)}_destroyDatasetMeta(r){const e=this._metasets[r];e&&e.controller&&e.controller._destroy(),delete this._metasets[r]}_stop(){let r,e;for(this.stop(),km.remove(this),r=0,e=this.data.datasets.length;r<e;++r)this._destroyDatasetMeta(r)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:r,ctx:e}=this;this._stop(),this.config.clearCache(),r&&(this.unbindEvents(),YM(r,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete iw[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...r){return this.canvas.toDataURL(...r)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const r=this._listeners,e=this.platform,i=(a,l)=>{e.addEventListener(this,a,l),r[a]=l},o=(a,l,t)=>{a.offsetX=l,a.offsetY=t,this._eventHandler(a)};Rl(this.options.events,a=>i(a,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const r=this._responsiveListeners,e=this.platform,i=(h,f)=>{e.addEventListener(this,h,f),r[h]=f},o=(h,f)=>{r[h]&&(e.removeEventListener(this,h,f),delete r[h])},a=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const t=()=>{o("attach",t),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,o("resize",a),this._stop(),this._resize(0,0),i("attach",t)},e.isAttached(this.canvas)?t():l()}unbindEvents(){Rl(this._listeners,(r,e)=>{this.platform.removeEventListener(this,e,r)}),this._listeners={},Rl(this._responsiveListeners,(r,e)=>{this.platform.removeEventListener(this,e,r)}),this._responsiveListeners=void 0}updateHoverStyle(r,e,i){const o=i?"set":"remove";let a,l,t,h;for(e==="dataset"&&(a=this.getDatasetMeta(r[0].datasetIndex),a.controller["_"+o+"DatasetHoverStyle"]()),t=0,h=r.length;t<h;++t){l=r[t];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[o+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(r){const e=this._active||[],i=r.map(({datasetIndex:a,index:l})=>{const t=this.getDatasetMeta(a);if(!t)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:t.data[l],index:l}});!Pw(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(r,e,i){return this._plugins.notify(this,r,e,i)}isPluginEnabled(r){return this._plugins._cache.filter(e=>e.plugin.id===r).length===1}_updateHoverStyles(r,e,i){const o=this.options.hover,a=(h,f)=>h.filter(p=>!f.some(_=>p.datasetIndex===_.datasetIndex&&p.index===_.index)),l=a(e,r),t=i?r:a(r,e);l.length&&this.updateHoverStyle(l,o.mode,!1),t.length&&o.mode&&this.updateHoverStyle(t,o.mode,!0)}_eventHandler(r,e){const i={event:r,replay:e,cancelable:!0,inChartArea:this.isPointInArea(r)},o=l=>(l.options.events||this.options.events).includes(r.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;const a=this._handleEvent(r,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(a||i.changed)&&this.render(),this}_handleEvent(r,e,i){const{_active:o=[],options:a}=this,l=e,t=this._getActiveElements(r,o,i,l),h=$K(r),f=UX(r,this._lastEvent,i,h);i&&(this._lastEvent=null,cc(a.onHover,[r,t,this],this),h&&cc(a.onClick,[r,t,this],this));const p=!Pw(t,o);return(p||e)&&(this._active=t,this._updateHoverStyles(t,o,e)),this._lastEvent=f,p}_getActiveElements(r,e,i,o){if(r.type==="mouseout")return[];if(!i)return e;const a=this.options.hover;return this.getElementsAtEventForMode(r,a.mode,a,o)}}is(zm,"defaults",Uc),is(zm,"instances",iw),is(zm,"overrides",m1),is(zm,"registry",im),is(zm,"version",DX),is(zm,"getChart",M8);function F8(){return Rl(zm.instances,n=>n._plugins.invalidate())}function zX(n,r,e){const{startAngle:i,x:o,y:a,outerRadius:l,innerRadius:t,options:h}=r,{borderWidth:f,borderJoinStyle:p}=h,_=Math.min(f/l,wf(i-e));if(n.beginPath(),n.arc(o,a,l-f/2,i+_/2,e-_/2),t>0){const g=Math.min(f/t,wf(i-e));n.arc(o,a,t+f/2,e-g/2,i+g/2,!0)}else{const g=Math.min(f/2,l*wf(i-e));if(p==="round")n.arc(o,a,g,e-vl/2,i+vl/2,!0);else if(p==="bevel"){const m=2*g*g,b=-m*Math.cos(e+vl/2)+o,x=-m*Math.sin(e+vl/2)+a,v=m*Math.cos(i+vl/2)+o,S=m*Math.sin(i+vl/2)+a;n.lineTo(b,x),n.lineTo(v,S)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function HX(n,r,e){const{startAngle:i,pixelMargin:o,x:a,y:l,outerRadius:t,innerRadius:h}=r;let f=o/t;n.beginPath(),n.arc(a,l,t,i-f,e+f),h>o?(f=o/h,n.arc(a,l,h,e+f,i-f,!0)):n.arc(a,l,o,e+Iu,i-Iu),n.closePath(),n.clip()}function QX(n){return tB(n,["outerStart","outerEnd","innerStart","innerEnd"])}function VX(n,r,e,i){const o=QX(n.options.borderRadius),a=(e-r)/2,l=Math.min(a,i*r/2),t=h=>{const f=(e-Math.min(a,h))*i/2;return kh(h,0,Math.min(a,f))};return{outerStart:t(o.outerStart),outerEnd:t(o.outerEnd),innerStart:kh(o.innerStart,0,l),innerEnd:kh(o.innerEnd,0,l)}}function ny(n,r,e,i){return{x:e+n*Math.cos(r),y:i+n*Math.sin(r)}}function Nw(n,r,e,i,o,a){const{x:l,y:t,startAngle:h,pixelMargin:f,innerRadius:p}=r,_=Math.max(r.outerRadius+i+e-f,0),g=p>0?p+i+e+f:0;let m=0;const b=o-h;if(i){const z=p>0?p-i:0,k=_>0?_-i:0,R=(z+k)/2,N=R!==0?b*R/(R+i):b;m=(b-N)/2}const x=Math.max(.001,b*_-e/vl)/_,v=(b-x)/2,S=h+v+m,B=o-v-m,{outerStart:F,outerEnd:O,innerStart:V,innerEnd:X}=VX(r,g,_,B-S),Q=_-F,ee=_-O,ne=S+F/Q,Ae=B-O/ee,fe=g+V,ce=g+X,G=S+V/fe,Z=B-X/ce;if(n.beginPath(),a){const z=(ne+Ae)/2;if(n.arc(l,t,_,ne,z),n.arc(l,t,_,z,Ae),O>0){const U=ny(ee,Ae,l,t);n.arc(U.x,U.y,O,Ae,B+Iu)}const k=ny(ce,B,l,t);if(n.lineTo(k.x,k.y),X>0){const U=ny(ce,Z,l,t);n.arc(U.x,U.y,X,B+Iu,Z+Math.PI)}const R=(B-X/g+(S+V/g))/2;if(n.arc(l,t,g,B-X/g,R,!0),n.arc(l,t,g,R,S+V/g,!0),V>0){const U=ny(fe,G,l,t);n.arc(U.x,U.y,V,G+Math.PI,S-Iu)}const N=ny(Q,S,l,t);if(n.lineTo(N.x,N.y),F>0){const U=ny(Q,ne,l,t);n.arc(U.x,U.y,F,S-Iu,ne)}}else{n.moveTo(l,t);const z=Math.cos(ne)*_+l,k=Math.sin(ne)*_+t;n.lineTo(z,k);const R=Math.cos(Ae)*_+l,N=Math.sin(Ae)*_+t;n.lineTo(R,N)}n.closePath()}function GX(n,r,e,i,o){const{fullCircles:a,startAngle:l,circumference:t}=r;let h=r.endAngle;if(a){Nw(n,r,e,i,h,o);for(let f=0;f<a;++f)n.fill();isNaN(t)||(h=l+(t%bc||bc))}return Nw(n,r,e,i,h,o),n.fill(),h}function WX(n,r,e,i,o){const{fullCircles:a,startAngle:l,circumference:t,options:h}=r,{borderWidth:f,borderJoinStyle:p,borderDash:_,borderDashOffset:g,borderRadius:m}=h,b=h.borderAlign==="inner";if(!f)return;n.setLineDash(_||[]),n.lineDashOffset=g,b?(n.lineWidth=f*2,n.lineJoin=p||"round"):(n.lineWidth=f,n.lineJoin=p||"bevel");let x=r.endAngle;if(a){Nw(n,r,e,i,x,o);for(let v=0;v<a;++v)n.stroke();isNaN(t)||(x=l+(t%bc||bc))}b&&HX(n,r,x),h.selfJoin&&x-l>=vl&&m===0&&p!=="miter"&&zX(n,r,x),a||(Nw(n,r,e,i,x,o),n.stroke())}class hv extends ng{constructor(e){super();is(this,"circumference");is(this,"endAngle");is(this,"fullCircles");is(this,"innerRadius");is(this,"outerRadius");is(this,"pixelMargin");is(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,o){const a=this.getProps(["x","y"],o),{angle:l,distance:t}=OO(a,{x:e,y:i}),{startAngle:h,endAngle:f,innerRadius:p,outerRadius:_,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),m=(this.options.spacing+this.options.borderWidth)/2,b=Zo(g,f-h),x=Zv(l,h,f)&&h!==f,v=b>=bc||x,S=Vm(t,p+m,_+m);return v&&S}getCenterPoint(e){const{x:i,y:o,startAngle:a,endAngle:l,innerRadius:t,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:f,spacing:p}=this.options,_=(a+l)/2,g=(t+h+p+f)/2;return{x:i+Math.cos(_)*g,y:o+Math.sin(_)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:o}=this,a=(i.offset||0)/4,l=(i.spacing||0)/2,t=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=o>bc?Math.floor(o/bc):0,o===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const h=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(h)*a,Math.sin(h)*a);const f=1-Math.sin(Math.min(vl,o||0)),p=a*f;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,GX(e,this,p,l,t),WX(e,this,p,l,t),e.restore()}}is(hv,"id","arc"),is(hv,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),is(hv,"defaultRoutes",{backgroundColor:"backgroundColor"}),is(hv,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function AD(n,r,e=r){n.lineCap=Zo(e.borderCapStyle,r.borderCapStyle),n.setLineDash(Zo(e.borderDash,r.borderDash)),n.lineDashOffset=Zo(e.borderDashOffset,r.borderDashOffset),n.lineJoin=Zo(e.borderJoinStyle,r.borderJoinStyle),n.lineWidth=Zo(e.borderWidth,r.borderWidth),n.strokeStyle=Zo(e.borderColor,r.borderColor)}function $X(n,r,e){n.lineTo(e.x,e.y)}function KX(n){return n.stepped?mq:n.tension||n.cubicInterpolationMode==="monotone"?gq:$X}function mD(n,r,e={}){const i=n.length,{start:o=0,end:a=i-1}=e,{start:l,end:t}=r,h=Math.max(o,l),f=Math.min(a,t),p=o<l&&a<l||o>t&&a>t;return{count:i,start:h,loop:r.loop,ilen:f<h&&!p?i+f-h:f-h}}function qX(n,r,e,i){const{points:o,options:a}=r,{count:l,start:t,loop:h,ilen:f}=mD(o,e,i),p=KX(a);let{move:_=!0,reverse:g}=i||{},m,b,x;for(m=0;m<=f;++m)b=o[(t+(g?f-m:m))%l],!b.skip&&(_?(n.moveTo(b.x,b.y),_=!1):p(n,x,b,g,a.stepped),x=b);return h&&(b=o[(t+(g?f:0))%l],p(n,x,b,g,a.stepped)),!!h}function YX(n,r,e,i){const o=r.points,{count:a,start:l,ilen:t}=mD(o,e,i),{move:h=!0,reverse:f}=i||{};let p=0,_=0,g,m,b,x,v,S;const B=O=>(l+(f?t-O:O))%a,F=()=>{x!==v&&(n.lineTo(p,v),n.lineTo(p,x),n.lineTo(p,S))};for(h&&(m=o[B(0)],n.moveTo(m.x,m.y)),g=0;g<=t;++g){if(m=o[B(g)],m.skip)continue;const O=m.x,V=m.y,X=O|0;X===b?(V<x?x=V:V>v&&(v=V),p=(_*p+O)/++_):(F(),n.lineTo(O,V),b=X,_=0,x=v=V),S=V}F()}function pC(n){const r=n.options,e=r.borderDash&&r.borderDash.length;return!n._decimated&&!n._loop&&!r.tension&&r.cubicInterpolationMode!=="monotone"&&!r.stepped&&!e?YX:qX}function XX(n){return n.stepped?qq:n.tension||n.cubicInterpolationMode==="monotone"?Yq:H0}function ZX(n,r,e,i){let o=r._path;o||(o=r._path=new Path2D,r.path(o,e,i)&&o.closePath()),AD(n,r.options),n.stroke(o)}function JX(n,r,e,i){const{segments:o,options:a}=r,l=pC(r);for(const t of o)AD(n,a,t.style),n.beginPath(),l(n,r,t,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const eZ=typeof Path2D=="function";function tZ(n,r,e,i){eZ&&!r.options.segment?ZX(n,r,e,i):JX(n,r,e,i)}class jg extends ng{constructor(r){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,r&&Object.assign(this,r)}updateControlPoints(r,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const o=i.spanGaps?this._loop:this._fullLoop;zq(this._points,i,r,o,e),this._pointsUpdated=!0}}set points(r){this._points=r,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rY(this,this.options.segment))}first(){const r=this.segments,e=this.points;return r.length&&e[r[0].start]}last(){const r=this.segments,e=this.points,i=r.length;return i&&e[r[i-1].end]}interpolate(r,e){const i=this.options,o=r[e],a=this.points,l=tD(this,{property:e,start:o,end:o});if(!l.length)return;const t=[],h=XX(i);let f,p;for(f=0,p=l.length;f<p;++f){const{start:_,end:g}=l[f],m=a[_],b=a[g];if(m===b){t.push(m);continue}const x=Math.abs((o-m[e])/(b[e]-m[e])),v=h(m,b,x,i.stepped);v[e]=r[e],t.push(v)}return t.length===1?t[0]:t}pathSegment(r,e,i){return pC(this)(r,this,e,i)}path(r,e,i){const o=this.segments,a=pC(this);let l=this._loop;e=e||0,i=i||this.points.length-e;for(const t of o)l&=a(r,this,t,{start:e,end:e+i-1});return!!l}draw(r,e,i,o){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(r.save(),tZ(r,this,i,o),r.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}is(jg,"id","line"),is(jg,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),is(jg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),is(jg,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"&&r!=="fill"});function P8(n,r,e,i){const o=n.options,{[e]:a}=n.getProps([e],i);return Math.abs(r-a)<o.radius+o.hitRadius}class sw extends ng{constructor(e){super();is(this,"parsed");is(this,"skip");is(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,o){const a=this.options,{x:l,y:t}=this.getProps(["x","y"],o);return Math.pow(e-l,2)+Math.pow(i-t,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,i){return P8(this,e,"x",i)}inYRange(e,i){return P8(this,e,"y",i)}getCenterPoint(e){const{x:i,y:o}=this.getProps(["x","y"],e);return{x:i,y:o}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const o=i&&e.borderWidth||0;return(i+o)*2}draw(e,i){const o=this.options;this.skip||o.radius<.1||!Wm(this,i,this.size(o)/2)||(e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.fillStyle=o.backgroundColor,uC(e,o,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}is(sw,"id","point"),is(sw,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),is(sw,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function gD(n,r){const{x:e,y:i,base:o,width:a,height:l}=n.getProps(["x","y","base","width","height"],r);let t,h,f,p,_;return n.horizontal?(_=l/2,t=Math.min(e,o),h=Math.max(e,o),f=i-_,p=i+_):(_=a/2,t=e-_,h=e+_,f=Math.min(i,o),p=Math.max(i,o)),{left:t,top:f,right:h,bottom:p}}function Ug(n,r,e,i){return n?0:kh(r,e,i)}function rZ(n,r,e){const i=n.options.borderWidth,o=n.borderSkipped,a=VO(i);return{t:Ug(o.top,a.top,0,e),r:Ug(o.right,a.right,0,r),b:Ug(o.bottom,a.bottom,0,e),l:Ug(o.left,a.left,0,r)}}function nZ(n,r,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),o=n.options.borderRadius,a=u1(o),l=Math.min(r,e),t=n.borderSkipped,h=i||za(o);return{topLeft:Ug(!h||t.top||t.left,a.topLeft,0,l),topRight:Ug(!h||t.top||t.right,a.topRight,0,l),bottomLeft:Ug(!h||t.bottom||t.left,a.bottomLeft,0,l),bottomRight:Ug(!h||t.bottom||t.right,a.bottomRight,0,l)}}function iZ(n){const r=gD(n),e=r.right-r.left,i=r.bottom-r.top,o=rZ(n,e/2,i/2),a=nZ(n,e/2,i/2);return{outer:{x:r.left,y:r.top,w:e,h:i,radius:a},inner:{x:r.left+o.l,y:r.top+o.t,w:e-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,a.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(o.b,o.r))}}}}function U4(n,r,e,i){const o=r===null,a=e===null,t=n&&!(o&&a)&&gD(n,i);return t&&(o||Vm(r,t.left,t.right))&&(a||Vm(e,t.top,t.bottom))}function sZ(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function oZ(n,r){n.rect(r.x,r.y,r.w,r.h)}function z4(n,r,e={}){const i=n.x!==e.x?-r:0,o=n.y!==e.y?-r:0,a=(n.x+n.w!==e.x+e.w?r:0)-i,l=(n.y+n.h!==e.y+e.h?r:0)-o;return{x:n.x+i,y:n.y+o,w:n.w+a,h:n.h+l,radius:n.radius}}class ow extends ng{constructor(r){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,r&&Object.assign(this,r)}draw(r){const{inflateAmount:e,options:{borderColor:i,backgroundColor:o}}=this,{inner:a,outer:l}=iZ(this),t=sZ(l.radius)?Jv:oZ;r.save(),(l.w!==a.w||l.h!==a.h)&&(r.beginPath(),t(r,z4(l,e,a)),r.clip(),t(r,z4(a,-e,l)),r.fillStyle=i,r.fill("evenodd")),r.beginPath(),t(r,z4(a,e)),r.fillStyle=o,r.fill(),r.restore()}inRange(r,e,i){return U4(this,r,e,i)}inXRange(r,e){return U4(this,r,null,e)}inYRange(r,e){return U4(this,null,r,e)}getCenterPoint(r){const{x:e,y:i,base:o,horizontal:a}=this.getProps(["x","y","base","horizontal"],r);return{x:a?(e+o)/2:e,y:a?i:(i+o)/2}}getRange(r){return r==="x"?this.width/2:this.height/2}}is(ow,"id","bar"),is(ow,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),is(ow,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var aZ=Object.freeze({__proto__:null,ArcElement:hv,BarElement:ow,LineElement:jg,PointElement:sw});const AC=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],L8=AC.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function yD(n){return AC[n%AC.length]}function _D(n){return L8[n%L8.length]}function lZ(n,r){return n.borderColor=yD(r),n.backgroundColor=_D(r),++r}function cZ(n,r){return n.backgroundColor=n.data.map(()=>yD(r++)),r}function uZ(n,r){return n.backgroundColor=n.data.map(()=>_D(r++)),r}function hZ(n){let r=0;return(e,i)=>{const o=n.getDatasetMeta(i).controller;o instanceof q0?r=cZ(e,r):o instanceof Mv?r=uZ(e,r):o&&(r=lZ(e,r))}}function k8(n){let r;for(r in n)if(n[r].borderColor||n[r].backgroundColor)return!0;return!1}function fZ(n){return n&&(n.borderColor||n.backgroundColor)}function dZ(){return Uc.borderColor!=="rgba(0,0,0,0.1)"||Uc.backgroundColor!=="rgba(0,0,0,0.1)"}var pZ={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,r,e){if(!e.enabled)return;const{data:{datasets:i},options:o}=n.config,{elements:a}=o,l=k8(i)||fZ(o)||a&&k8(a)||dZ();if(!e.forceOverride&&l)return;const t=hZ(n);i.forEach(t)}};function AZ(n,r,e,i,o){const a=o.samples||i;if(a>=e)return n.slice(r,r+e);const l=[],t=(e-2)/(a-2);let h=0;const f=r+e-1;let p=r,_,g,m,b,x;for(l[h++]=n[p],_=0;_<a-2;_++){let v=0,S=0,B;const F=Math.floor((_+1)*t)+1+r,O=Math.min(Math.floor((_+2)*t)+1,e)+r,V=O-F;for(B=F;B<O;B++)v+=n[B].x,S+=n[B].y;v/=V,S/=V;const X=Math.floor(_*t)+1+r,Q=Math.min(Math.floor((_+1)*t)+1,e)+r,{x:ee,y:ne}=n[p];for(m=b=-1,B=X;B<Q;B++)b=.5*Math.abs((ee-v)*(n[B].y-ne)-(ee-n[B].x)*(S-ne)),b>m&&(m=b,g=n[B],x=B);l[h++]=g,p=x}return l[h++]=n[f],l}function mZ(n,r,e,i){let o=0,a=0,l,t,h,f,p,_,g,m,b,x;const v=[],S=r+e-1,B=n[r].x,O=n[S].x-B;for(l=r;l<r+e;++l){t=n[l],h=(t.x-B)/O*i,f=t.y;const V=h|0;if(V===p)f<b?(b=f,_=l):f>x&&(x=f,g=l),o=(a*o+t.x)/++a;else{const X=l-1;if(!Na(_)&&!Na(g)){const Q=Math.min(_,g),ee=Math.max(_,g);Q!==m&&Q!==X&&v.push({...n[Q],x:o}),ee!==m&&ee!==X&&v.push({...n[ee],x:o})}l>0&&X!==m&&v.push(n[X]),v.push(t),p=V,a=0,b=x=f,_=g=m=l}}return v}function vD(n){if(n._decimated){const r=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:r})}}function O8(n){n.data.datasets.forEach(r=>{vD(r)})}function gZ(n,r){const e=r.length;let i=0,o;const{iScale:a}=n,{min:l,max:t,minDefined:h,maxDefined:f}=a.getUserBounds();return h&&(i=kh(Gm(r,a.axis,l).lo,0,e-1)),f?o=kh(Gm(r,a.axis,t).hi+1,i,e)-i:o=e-i,{start:i,count:o}}var yZ={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,r,e)=>{if(!e.enabled){O8(n);return}const i=n.width;n.data.datasets.forEach((o,a)=>{const{_data:l,indexAxis:t}=o,h=n.getDatasetMeta(a),f=l||o.data;if(cv([t,n.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;const p=n.scales[h.xAxisID];if(p.type!=="linear"&&p.type!=="time"||n.options.parsing)return;let{start:_,count:g}=gZ(h,f);const m=e.threshold||4*i;if(g<=m){vD(o);return}Na(l)&&(o._data=f,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let b;switch(e.algorithm){case"lttb":b=AZ(f,_,g,i,e);break;case"min-max":b=mZ(f,_,g,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}o._decimated=b})},destroy(n){O8(n)}};function _Z(n,r,e){const i=n.segments,o=n.points,a=r.points,l=[];for(const t of i){let{start:h,end:f}=t;f=C5(h,f,o);const p=mC(e,o[h],o[f],t.loop);if(!r.segments){l.push({source:t,target:p,start:o[h],end:o[f]});continue}const _=tD(r,p);for(const g of _){const m=mC(e,a[g.start],a[g.end],g.loop),b=eD(t,o,m);for(const x of b)l.push({source:x,target:g,start:{[e]:D8(p,m,"start",Math.max)},end:{[e]:D8(p,m,"end",Math.min)}})}}return l}function mC(n,r,e,i){if(i)return;let o=r[n],a=e[n];return n==="angle"&&(o=wf(o),a=wf(a)),{property:n,start:o,end:a}}function vZ(n,r){const{x:e=null,y:i=null}=n||{},o=r.points,a=[];return r.segments.forEach(({start:l,end:t})=>{t=C5(l,t,o);const h=o[l],f=o[t];i!==null?(a.push({x:h.x,y:i}),a.push({x:f.x,y:i})):e!==null&&(a.push({x:e,y:h.y}),a.push({x:e,y:f.y}))}),a}function C5(n,r,e){for(;r>n;r--){const i=e[r];if(!isNaN(i.x)&&!isNaN(i.y))break}return r}function D8(n,r,e,i){return n&&r?i(n[e],r[e]):n?n[e]:r?r[e]:0}function bD(n,r){let e=[],i=!1;return jc(n)?(i=!0,e=n):e=vZ(n,r),e.length?new jg({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function R8(n){return n&&n.fill!==!1}function bZ(n,r,e){let o=n[r].fill;const a=[r];let l;if(!e)return o;for(;o!==!1&&a.indexOf(o)===-1;){if(!pu(o))return o;if(l=n[o],!l)return!1;if(l.visible)return o;a.push(o),o=l.fill}return!1}function xZ(n,r,e){const i=EZ(n);if(za(i))return isNaN(i.value)?!1:i;let o=parseFloat(i);return pu(o)&&Math.floor(o)===o?wZ(i[0],r,o,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function wZ(n,r,e,i){return(n==="-"||n==="+")&&(e=r+e),e===r||e<0||e>=i?!1:e}function SZ(n,r){let e=null;return n==="start"?e=r.bottom:n==="end"?e=r.top:za(n)?e=r.getPixelForValue(n.value):r.getBasePixel&&(e=r.getBasePixel()),e}function CZ(n,r,e){let i;return n==="start"?i=e:n==="end"?i=r.options.reverse?r.min:r.max:za(n)?i=n.value:i=r.getBaseValue(),i}function EZ(n){const r=n.options,e=r.fill;let i=Zo(e&&e.target,e);return i===void 0&&(i=!!r.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function BZ(n){const{scale:r,index:e,line:i}=n,o=[],a=i.segments,l=i.points,t=TZ(r,e);t.push(bD({x:null,y:r.bottom},i));for(let h=0;h<a.length;h++){const f=a[h];for(let p=f.start;p<=f.end;p++)IZ(o,l[p],t)}return new jg({points:o,options:{}})}function TZ(n,r){const e=[],i=n.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const a=i[o];if(a.index===r)break;a.hidden||e.unshift(a.dataset)}return e}function IZ(n,r,e){const i=[];for(let o=0;o<e.length;o++){const a=e[o],{first:l,last:t,point:h}=MZ(a,r,"x");if(!(!h||l&&t)){if(l)i.unshift(h);else if(n.push(h),!t)break}}n.push(...i)}function MZ(n,r,e){const i=n.interpolate(r,e);if(!i)return{};const o=i[e],a=n.segments,l=n.points;let t=!1,h=!1;for(let f=0;f<a.length;f++){const p=a[f],_=l[p.start][e],g=l[p.end][e];if(Vm(o,_,g)){t=o===_,h=o===g;break}}return{first:t,last:h,point:i}}class xD{constructor(r){this.x=r.x,this.y=r.y,this.radius=r.radius}pathSegment(r,e,i){const{x:o,y:a,radius:l}=this;return e=e||{start:0,end:bc},r.arc(o,a,l,e.end,e.start,!0),!i.bounds}interpolate(r){const{x:e,y:i,radius:o}=this,a=r.angle;return{x:e+Math.cos(a)*o,y:i+Math.sin(a)*o,angle:a}}}function FZ(n){const{chart:r,fill:e,line:i}=n;if(pu(e))return PZ(r,e);if(e==="stack")return BZ(n);if(e==="shape")return!0;const o=LZ(n);return o instanceof xD?o:bD(o,i)}function PZ(n,r){const e=n.getDatasetMeta(r);return e&&n.isDatasetVisible(r)?e.dataset:null}function LZ(n){return(n.scale||{}).getPointPositionForValue?OZ(n):kZ(n)}function kZ(n){const{scale:r={},fill:e}=n,i=SZ(e,r);if(pu(i)){const o=r.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}function OZ(n){const{scale:r,fill:e}=n,i=r.options,o=r.getLabels().length,a=i.reverse?r.max:r.min,l=CZ(e,r,a),t=[];if(i.grid.circular){const h=r.getPointPositionForValue(0,a);return new xD({x:h.x,y:h.y,radius:r.getDistanceFromCenterForValue(l)})}for(let h=0;h<o;++h)t.push(r.getPointPositionForValue(h,l));return t}function H4(n,r,e){const i=FZ(r),{chart:o,index:a,line:l,scale:t,axis:h}=r,f=l.options,p=f.fill,_=f.backgroundColor,{above:g=_,below:m=_}=p||{},b=o.getDatasetMeta(a),x=rD(o,b);i&&l.points.length&&(b5(n,e),DZ(n,{line:l,target:i,above:g,below:m,area:e,scale:t,axis:h,clip:x}),x5(n))}function DZ(n,r){const{line:e,target:i,above:o,below:a,area:l,scale:t,clip:h}=r,f=e._loop?"angle":r.axis;n.save();let p=a;a!==o&&(f==="x"?(N8(n,i,l.top),Q4(n,{line:e,target:i,color:o,scale:t,property:f,clip:h}),n.restore(),n.save(),N8(n,i,l.bottom)):f==="y"&&(j8(n,i,l.left),Q4(n,{line:e,target:i,color:a,scale:t,property:f,clip:h}),n.restore(),n.save(),j8(n,i,l.right),p=o)),Q4(n,{line:e,target:i,color:p,scale:t,property:f,clip:h}),n.restore()}function N8(n,r,e){const{segments:i,points:o}=r;let a=!0,l=!1;n.beginPath();for(const t of i){const{start:h,end:f}=t,p=o[h],_=o[C5(h,f,o)];a?(n.moveTo(p.x,p.y),a=!1):(n.lineTo(p.x,e),n.lineTo(p.x,p.y)),l=!!r.pathSegment(n,t,{move:l}),l?n.closePath():n.lineTo(_.x,e)}n.lineTo(r.first().x,e),n.closePath(),n.clip()}function j8(n,r,e){const{segments:i,points:o}=r;let a=!0,l=!1;n.beginPath();for(const t of i){const{start:h,end:f}=t,p=o[h],_=o[C5(h,f,o)];a?(n.moveTo(p.x,p.y),a=!1):(n.lineTo(e,p.y),n.lineTo(p.x,p.y)),l=!!r.pathSegment(n,t,{move:l}),l?n.closePath():n.lineTo(e,_.y)}n.lineTo(e,r.first().y),n.closePath(),n.clip()}function Q4(n,r){const{line:e,target:i,property:o,color:a,scale:l,clip:t}=r,h=_Z(e,i,o);for(const{source:f,target:p,start:_,end:g}of h){const{style:{backgroundColor:m=a}={}}=f,b=i!==!0;n.save(),n.fillStyle=m,RZ(n,l,t,b&&mC(o,_,g)),n.beginPath();const x=!!e.pathSegment(n,f);let v;if(b){x?n.closePath():U8(n,i,g,o);const S=!!i.pathSegment(n,p,{move:x,reverse:!0});v=x&&S,v||U8(n,i,_,o)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function RZ(n,r,e,i){const o=r.chart.chartArea,{property:a,start:l,end:t}=i||{};if(a==="x"||a==="y"){let h,f,p,_;a==="x"?(h=l,f=o.top,p=t,_=o.bottom):(h=o.left,f=l,p=o.right,_=t),n.beginPath(),e&&(h=Math.max(h,e.left),p=Math.min(p,e.right),f=Math.max(f,e.top),_=Math.min(_,e.bottom)),n.rect(h,f,p-h,_-f),n.clip()}}function U8(n,r,e,i){const o=r.interpolate(e,i);o&&n.lineTo(o.x,o.y)}var NZ={id:"filler",afterDatasetsUpdate(n,r,e){const i=(n.data.datasets||[]).length,o=[];let a,l,t,h;for(l=0;l<i;++l)a=n.getDatasetMeta(l),t=a.dataset,h=null,t&&t.options&&t instanceof jg&&(h={visible:n.isDatasetVisible(l),index:l,fill:xZ(t,l,i),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:t}),a.$filler=h,o.push(h);for(l=0;l<i;++l)h=o[l],!(!h||h.fill===!1)&&(h.fill=bZ(o,l,e.propagate))},beforeDraw(n,r,e){const i=e.drawTime==="beforeDraw",o=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let l=o.length-1;l>=0;--l){const t=o[l].$filler;t&&(t.line.updateControlPoints(a,t.axis),i&&t.fill&&H4(n.ctx,t,a))}},beforeDatasetsDraw(n,r,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;R8(a)&&H4(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,r,e){const i=r.meta.$filler;!R8(i)||e.drawTime!=="beforeDatasetDraw"||H4(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const z8=(n,r)=>{let{boxHeight:e=r,boxWidth:i=r}=n;return n.usePointStyle&&(e=Math.min(e,r),i=n.pointStyleWidth||Math.min(i,r)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(r,e)}},jZ=(n,r)=>n!==null&&r!==null&&n.datasetIndex===r.datasetIndex&&n.index===r.index;class H8 extends ng{constructor(r){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=r.chart,this.options=r.options,this.ctx=r.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(r,e,i){this.maxWidth=r,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const r=this.options.labels||{};let e=cc(r.generateLabels,[this.chart],this)||[];r.filter&&(e=e.filter(i=>r.filter(i,this.chart.data))),r.sort&&(e=e.sort((i,o)=>r.sort(i,o,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:r,ctx:e}=this;if(!r.display){this.width=this.height=0;return}const i=r.labels,o=hh(i.font),a=o.size,l=this._computeTitleHeight(),{boxWidth:t,itemHeight:h}=z8(i,a);let f,p;e.font=o.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(l,a,t,h)+10):(p=this.maxHeight,f=this._fitCols(l,o,t,h)+10),this.width=Math.min(f,r.maxWidth||this.maxWidth),this.height=Math.min(p,r.maxHeight||this.maxHeight)}_fitRows(r,e,i,o){const{ctx:a,maxWidth:l,options:{labels:{padding:t}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],p=o+t;let _=r;a.textAlign="left",a.textBaseline="middle";let g=-1,m=-p;return this.legendItems.forEach((b,x)=>{const v=i+e/2+a.measureText(b.text).width;(x===0||f[f.length-1]+v+2*t>l)&&(_+=p,f[f.length-(x>0?0:1)]=0,m+=p,g++),h[x]={left:0,top:m,row:g,width:v,height:o},f[f.length-1]+=v+t}),_}_fitCols(r,e,i,o){const{ctx:a,maxHeight:l,options:{labels:{padding:t}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],p=l-r;let _=t,g=0,m=0,b=0,x=0;return this.legendItems.forEach((v,S)=>{const{itemWidth:B,itemHeight:F}=UZ(i,e,a,v,o);S>0&&m+F+2*t>p&&(_+=g+t,f.push({width:g,height:m}),b+=g+t,x++,g=m=0),h[S]={left:b,top:m,col:x,width:B,height:F},g=Math.max(g,B),m+=F+t}),_+=g,f.push({width:g,height:m}),_}adjustHitBoxes(){if(!this.options.display)return;const r=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:o},rtl:a}}=this,l=vy(a,this.left,this.width);if(this.isHorizontal()){let t=0,h=xf(i,this.left+o,this.right-this.lineWidths[t]);for(const f of e)t!==f.row&&(t=f.row,h=xf(i,this.left+o,this.right-this.lineWidths[t])),f.top+=this.top+r+o,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+o}else{let t=0,h=xf(i,this.top+r+o,this.bottom-this.columnSizes[t].height);for(const f of e)f.col!==t&&(t=f.col,h=xf(i,this.top+r+o,this.bottom-this.columnSizes[t].height)),f.top=h,f.left+=this.left+o,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const r=this.ctx;b5(r,this),this._draw(),x5(r)}}_draw(){const{options:r,columnSizes:e,lineWidths:i,ctx:o}=this,{align:a,labels:l}=r,t=Uc.color,h=vy(r.rtl,this.left,this.width),f=hh(l.font),{padding:p}=l,_=f.size,g=_/2;let m;this.drawTitle(),o.textAlign=h.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=f.string;const{boxWidth:b,boxHeight:x,itemHeight:v}=z8(l,_),S=function(X,Q,ee){if(isNaN(b)||b<=0||isNaN(x)||x<0)return;o.save();const ne=Zo(ee.lineWidth,1);if(o.fillStyle=Zo(ee.fillStyle,t),o.lineCap=Zo(ee.lineCap,"butt"),o.lineDashOffset=Zo(ee.lineDashOffset,0),o.lineJoin=Zo(ee.lineJoin,"miter"),o.lineWidth=ne,o.strokeStyle=Zo(ee.strokeStyle,t),o.setLineDash(Zo(ee.lineDash,[])),l.usePointStyle){const Ae={radius:x*Math.SQRT2/2,pointStyle:ee.pointStyle,rotation:ee.rotation,borderWidth:ne},fe=h.xPlus(X,b/2),ce=Q+g;QO(o,Ae,fe,ce,l.pointStyleWidth&&b)}else{const Ae=Q+Math.max((_-x)/2,0),fe=h.leftForLtr(X,b),ce=u1(ee.borderRadius);o.beginPath(),Object.values(ce).some(G=>G!==0)?Jv(o,{x:fe,y:Ae,w:b,h:x,radius:ce}):o.rect(fe,Ae,b,x),o.fill(),ne!==0&&o.stroke()}o.restore()},B=function(X,Q,ee){g1(o,ee.text,X,Q+v/2,f,{strikethrough:ee.hidden,textAlign:h.textAlign(ee.textAlign)})},F=this.isHorizontal(),O=this._computeTitleHeight();F?m={x:xf(a,this.left+p,this.right-i[0]),y:this.top+p+O,line:0}:m={x:this.left+p,y:xf(a,this.top+O+p,this.bottom-e[0].height),line:0},XO(this.ctx,r.textDirection);const V=v+p;this.legendItems.forEach((X,Q)=>{o.strokeStyle=X.fontColor,o.fillStyle=X.fontColor;const ee=o.measureText(X.text).width,ne=h.textAlign(X.textAlign||(X.textAlign=l.textAlign)),Ae=b+g+ee;let fe=m.x,ce=m.y;h.setWidth(this.width),F?Q>0&&fe+Ae+p>this.right&&(ce=m.y+=V,m.line++,fe=m.x=xf(a,this.left+p,this.right-i[m.line])):Q>0&&ce+V>this.bottom&&(fe=m.x=fe+e[m.line].width+p,m.line++,ce=m.y=xf(a,this.top+O+p,this.bottom-e[m.line].height));const G=h.x(fe);if(S(G,ce,X),fe=sq(ne,fe+b+g,F?fe+Ae:this.right,r.rtl),B(h.x(fe),ce,X),F)m.x+=Ae+p;else if(typeof X.text!="string"){const Z=f.lineHeight;m.y+=wD(X,Z)+p}else m.y+=V}),ZO(this.ctx,r.textDirection)}drawTitle(){const r=this.options,e=r.title,i=hh(e.font),o=Ff(e.padding);if(!e.display)return;const a=vy(r.rtl,this.left,this.width),l=this.ctx,t=e.position,h=i.size/2,f=o.top+h;let p,_=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),p=this.top+f,_=xf(r.align,_,this.right-g);else{const b=this.columnSizes.reduce((x,v)=>Math.max(x,v.height),0);p=f+xf(r.align,this.top,this.bottom-b-r.labels.padding-this._computeTitleHeight())}const m=xf(t,_,_+g);l.textAlign=a.textAlign(JE(t)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,g1(l,e.text,m,p,i)}_computeTitleHeight(){const r=this.options.title,e=hh(r.font),i=Ff(r.padding);return r.display?e.lineHeight+i.height:0}_getLegendItemAt(r,e){let i,o,a;if(Vm(r,this.left,this.right)&&Vm(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(o=a[i],Vm(r,o.left,o.left+o.width)&&Vm(e,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(r){const e=this.options;if(!QZ(r.type,e))return;const i=this._getLegendItemAt(r.x,r.y);if(r.type==="mousemove"||r.type==="mouseout"){const o=this._hoveredItem,a=jZ(o,i);o&&!a&&cc(e.onLeave,[r,o,this],this),this._hoveredItem=i,i&&!a&&cc(e.onHover,[r,i,this],this)}else i&&cc(e.onClick,[r,i,this],this)}}function UZ(n,r,e,i,o){const a=zZ(i,n,r,e),l=HZ(o,i,r.lineHeight);return{itemWidth:a,itemHeight:l}}function zZ(n,r,e,i){let o=n.text;return o&&typeof o!="string"&&(o=o.reduce((a,l)=>a.length>l.length?a:l)),r+e.size/2+i.measureText(o).width}function HZ(n,r,e){let i=n;return typeof r.text!="string"&&(i=wD(r,e)),i}function wD(n,r){const e=n.text?n.text.length:0;return r*e}function QZ(n,r){return!!((n==="mousemove"||n==="mouseout")&&(r.onHover||r.onLeave)||r.onClick&&(n==="click"||n==="mouseup"))}var VZ={id:"legend",_element:H8,start(n,r,e){const i=n.legend=new H8({ctx:n.ctx,options:e,chart:n});Bf.configure(n,i,e),Bf.addBox(n,i)},stop(n){Bf.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,r,e){const i=n.legend;Bf.configure(n,i,e),i.options=e},afterUpdate(n){const r=n.legend;r.buildLabels(),r.adjustHitBoxes()},afterEvent(n,r){r.replay||n.legend.handleEvent(r.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,r,e){const i=r.datasetIndex,o=e.chart;o.isDatasetVisible(i)?(o.hide(i),r.hidden=!0):(o.show(i),r.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const r=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:o,color:a,useBorderRadius:l,borderRadius:t}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(e?0:void 0),p=Ff(f.borderWidth);return{text:r[h.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:o||f.textAlign,borderRadius:l&&(t||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class lB extends ng{constructor(r){super(),this.chart=r.chart,this.options=r.options,this.ctx=r.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(r,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=r,this.height=this.bottom=e;const o=jc(i.text)?i.text.length:1;this._padding=Ff(i.padding);const a=o*hh(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const r=this.options.position;return r==="top"||r==="bottom"}_drawArgs(r){const{top:e,left:i,bottom:o,right:a,options:l}=this,t=l.align;let h=0,f,p,_;return this.isHorizontal()?(p=xf(t,i,a),_=e+r,f=a-i):(l.position==="left"?(p=i+r,_=xf(t,o,e),h=vl*-.5):(p=a-r,_=xf(t,e,o),h=vl*.5),f=o-e),{titleX:p,titleY:_,maxWidth:f,rotation:h}}draw(){const r=this.ctx,e=this.options;if(!e.display)return;const i=hh(e.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:t,maxWidth:h,rotation:f}=this._drawArgs(a);g1(r,e.text,0,0,i,{color:e.color,maxWidth:h,rotation:f,textAlign:JE(e.align),textBaseline:"middle",translation:[l,t]})}}function GZ(n,r){const e=new lB({ctx:n.ctx,options:r,chart:n});Bf.configure(n,e,r),Bf.addBox(n,e),n.titleBlock=e}var WZ={id:"title",_element:lB,start(n,r,e){GZ(n,e)},stop(n){const r=n.titleBlock;Bf.removeBox(n,r),delete n.titleBlock},beforeUpdate(n,r,e){const i=n.titleBlock;Bf.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Px=new WeakMap;var $Z={id:"subtitle",start(n,r,e){const i=new lB({ctx:n.ctx,options:e,chart:n});Bf.configure(n,i,e),Bf.addBox(n,i),Px.set(n,i)},stop(n){Bf.removeBox(n,Px.get(n)),Px.delete(n)},beforeUpdate(n,r,e){const i=Px.get(n);Bf.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fv={average(n){if(!n.length)return!1;let r,e,i=new Set,o=0,a=0;for(r=0,e=n.length;r<e;++r){const t=n[r].element;if(t&&t.hasValue()){const h=t.tooltipPosition();i.add(h.x),o+=h.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((t,h)=>t+h)/i.size,y:o/a}},nearest(n,r){if(!n.length)return!1;let e=r.x,i=r.y,o=Number.POSITIVE_INFINITY,a,l,t;for(a=0,l=n.length;a<l;++a){const h=n[a].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),p=lC(r,f);p<o&&(o=p,t=h)}}if(t){const h=t.tooltipPosition();e=h.x,i=h.y}return{x:e,y:i}}};function nm(n,r){return r&&(jc(r)?Array.prototype.push.apply(n,r):n.push(r)),n}function Om(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function KZ(n,r){const{element:e,datasetIndex:i,index:o}=r,a=n.getDatasetMeta(i).controller,{label:l,value:t}=a.getLabelAndValue(o);return{chart:n,label:l,parsed:a.getParsed(o),raw:n.data.datasets[i].data[o],formattedValue:t,dataset:a.getDataset(),dataIndex:o,datasetIndex:i,element:e}}function Q8(n,r){const e=n.chart.ctx,{body:i,footer:o,title:a}=n,{boxWidth:l,boxHeight:t}=r,h=hh(r.bodyFont),f=hh(r.titleFont),p=hh(r.footerFont),_=a.length,g=o.length,m=i.length,b=Ff(r.padding);let x=b.height,v=0,S=i.reduce((O,V)=>O+V.before.length+V.lines.length+V.after.length,0);if(S+=n.beforeBody.length+n.afterBody.length,_&&(x+=_*f.lineHeight+(_-1)*r.titleSpacing+r.titleMarginBottom),S){const O=r.displayColors?Math.max(t,h.lineHeight):h.lineHeight;x+=m*O+(S-m)*h.lineHeight+(S-1)*r.bodySpacing}g&&(x+=r.footerMarginTop+g*p.lineHeight+(g-1)*r.footerSpacing);let B=0;const F=function(O){v=Math.max(v,e.measureText(O).width+B)};return e.save(),e.font=f.string,Rl(n.title,F),e.font=h.string,Rl(n.beforeBody.concat(n.afterBody),F),B=r.displayColors?l+2+r.boxPadding:0,Rl(i,O=>{Rl(O.before,F),Rl(O.lines,F),Rl(O.after,F)}),B=0,e.font=p.string,Rl(n.footer,F),e.restore(),v+=b.width,{width:v,height:x}}function qZ(n,r){const{y:e,height:i}=r;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function YZ(n,r,e,i){const{x:o,width:a}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&o+a+l>r.width||n==="right"&&o-a-l<0)return!0}function XZ(n,r,e,i){const{x:o,width:a}=e,{width:l,chartArea:{left:t,right:h}}=n;let f="center";return i==="center"?f=o<=(t+h)/2?"left":"right":o<=a/2?f="left":o>=l-a/2&&(f="right"),YZ(f,n,r,e)&&(f="center"),f}function V8(n,r,e){const i=e.yAlign||r.yAlign||qZ(n,e);return{xAlign:e.xAlign||r.xAlign||XZ(n,r,e,i),yAlign:i}}function ZZ(n,r){let{x:e,width:i}=n;return r==="right"?e-=i:r==="center"&&(e-=i/2),e}function JZ(n,r,e){let{y:i,height:o}=n;return r==="top"?i+=e:r==="bottom"?i-=o+e:i-=o/2,i}function G8(n,r,e,i){const{caretSize:o,caretPadding:a,cornerRadius:l}=n,{xAlign:t,yAlign:h}=e,f=o+a,{topLeft:p,topRight:_,bottomLeft:g,bottomRight:m}=u1(l);let b=ZZ(r,t);const x=JZ(r,h,f);return h==="center"?t==="left"?b+=f:t==="right"&&(b-=f):t==="left"?b-=Math.max(p,g)+o:t==="right"&&(b+=Math.max(_,m)+o),{x:kh(b,0,i.width-r.width),y:kh(x,0,i.height-r.height)}}function Lx(n,r,e){const i=Ff(e.padding);return r==="center"?n.x+n.width/2:r==="right"?n.x+n.width-i.right:n.x+i.left}function W8(n){return nm([],Om(n))}function eJ(n,r,e){return l0(n,{tooltip:r,tooltipItems:e,type:"tooltip"})}function $8(n,r){const e=r&&r.dataset&&r.dataset.tooltip&&r.dataset.tooltip.callbacks;return e?n.override(e):n}const SD={beforeTitle:Lm,title(n){if(n.length>0){const r=n[0],e=r.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return r.dataset.label||"";if(r.label)return r.label;if(i>0&&r.dataIndex<i)return e[r.dataIndex]}return""},afterTitle:Lm,beforeBody:Lm,beforeLabel:Lm,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let r=n.dataset.label||"";r&&(r+=": ");const e=n.formattedValue;return Na(e)||(r+=e),r},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Lm,afterBody:Lm,beforeFooter:Lm,footer:Lm,afterFooter:Lm};function gd(n,r,e,i){const o=n[r].call(e,i);return typeof o>"u"?SD[r].call(e,i):o}class gC extends ng{constructor(r){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=r.chart,this.options=r.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(r){this.options=r,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const r=this._cachedAnimations;if(r)return r;const e=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&e.options.animation&&i.animations,a=new nD(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=eJ(this.chart.getContext(),this,this._tooltipItems))}getTitle(r,e){const{callbacks:i}=e,o=gd(i,"beforeTitle",this,r),a=gd(i,"title",this,r),l=gd(i,"afterTitle",this,r);let t=[];return t=nm(t,Om(o)),t=nm(t,Om(a)),t=nm(t,Om(l)),t}getBeforeBody(r,e){return W8(gd(e.callbacks,"beforeBody",this,r))}getBody(r,e){const{callbacks:i}=e,o=[];return Rl(r,a=>{const l={before:[],lines:[],after:[]},t=$8(i,a);nm(l.before,Om(gd(t,"beforeLabel",this,a))),nm(l.lines,gd(t,"label",this,a)),nm(l.after,Om(gd(t,"afterLabel",this,a))),o.push(l)}),o}getAfterBody(r,e){return W8(gd(e.callbacks,"afterBody",this,r))}getFooter(r,e){const{callbacks:i}=e,o=gd(i,"beforeFooter",this,r),a=gd(i,"footer",this,r),l=gd(i,"afterFooter",this,r);let t=[];return t=nm(t,Om(o)),t=nm(t,Om(a)),t=nm(t,Om(l)),t}_createItems(r){const e=this._active,i=this.chart.data,o=[],a=[],l=[];let t=[],h,f;for(h=0,f=e.length;h<f;++h)t.push(KZ(this.chart,e[h]));return r.filter&&(t=t.filter((p,_,g)=>r.filter(p,_,g,i))),r.itemSort&&(t=t.sort((p,_)=>r.itemSort(p,_,i))),Rl(t,p=>{const _=$8(r.callbacks,p);o.push(gd(_,"labelColor",this,p)),a.push(gd(_,"labelPointStyle",this,p)),l.push(gd(_,"labelTextColor",this,p))}),this.labelColors=o,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=t,t}update(r,e){const i=this.options.setContext(this.getContext()),o=this._active;let a,l=[];if(!o.length)this.opacity!==0&&(a={opacity:0});else{const t=fv[i.position].call(this,o,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=Q8(this,i),f=Object.assign({},t,h),p=V8(this.chart,i,f),_=G8(i,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,a={opacity:1,x:_.x,y:_.y,width:h.width,height:h.height,caretX:t.x,caretY:t.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),r&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(r,e,i,o){const a=this.getCaretPosition(r,i,o);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(r,e,i){const{xAlign:o,yAlign:a}=this,{caretSize:l,cornerRadius:t}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:_}=u1(t),{x:g,y:m}=r,{width:b,height:x}=e;let v,S,B,F,O,V;return a==="center"?(O=m+x/2,o==="left"?(v=g,S=v-l,F=O+l,V=O-l):(v=g+b,S=v+l,F=O-l,V=O+l),B=v):(o==="left"?S=g+Math.max(h,p)+l:o==="right"?S=g+b-Math.max(f,_)-l:S=this.caretX,a==="top"?(F=m,O=F-l,v=S-l,B=S+l):(F=m+x,O=F+l,v=S+l,B=S-l),V=F),{x1:v,x2:S,x3:B,y1:F,y2:O,y3:V}}drawTitle(r,e,i){const o=this.title,a=o.length;let l,t,h;if(a){const f=vy(i.rtl,this.x,this.width);for(r.x=Lx(this,i.titleAlign,i),e.textAlign=f.textAlign(i.titleAlign),e.textBaseline="middle",l=hh(i.titleFont),t=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,h=0;h<a;++h)e.fillText(o[h],f.x(r.x),r.y+l.lineHeight/2),r.y+=l.lineHeight+t,h+1===a&&(r.y+=i.titleMarginBottom-t)}}_drawColorBox(r,e,i,o,a){const l=this.labelColors[i],t=this.labelPointStyles[i],{boxHeight:h,boxWidth:f}=a,p=hh(a.bodyFont),_=Lx(this,"left",a),g=o.x(_),m=h<p.lineHeight?(p.lineHeight-h)/2:0,b=e.y+m;if(a.usePointStyle){const x={radius:Math.min(f,h)/2,pointStyle:t.pointStyle,rotation:t.rotation,borderWidth:1},v=o.leftForLtr(g,f)+f/2,S=b+h/2;r.strokeStyle=a.multiKeyBackground,r.fillStyle=a.multiKeyBackground,uC(r,x,v,S),r.strokeStyle=l.borderColor,r.fillStyle=l.backgroundColor,uC(r,x,v,S)}else{r.lineWidth=za(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,r.strokeStyle=l.borderColor,r.setLineDash(l.borderDash||[]),r.lineDashOffset=l.borderDashOffset||0;const x=o.leftForLtr(g,f),v=o.leftForLtr(o.xPlus(g,1),f-2),S=u1(l.borderRadius);Object.values(S).some(B=>B!==0)?(r.beginPath(),r.fillStyle=a.multiKeyBackground,Jv(r,{x,y:b,w:f,h,radius:S}),r.fill(),r.stroke(),r.fillStyle=l.backgroundColor,r.beginPath(),Jv(r,{x:v,y:b+1,w:f-2,h:h-2,radius:S}),r.fill()):(r.fillStyle=a.multiKeyBackground,r.fillRect(x,b,f,h),r.strokeRect(x,b,f,h),r.fillStyle=l.backgroundColor,r.fillRect(v,b+1,f-2,h-2))}r.fillStyle=this.labelTextColors[i]}drawBody(r,e,i){const{body:o}=this,{bodySpacing:a,bodyAlign:l,displayColors:t,boxHeight:h,boxWidth:f,boxPadding:p}=i,_=hh(i.bodyFont);let g=_.lineHeight,m=0;const b=vy(i.rtl,this.x,this.width),x=function(ee){e.fillText(ee,b.x(r.x+m),r.y+g/2),r.y+=g+a},v=b.textAlign(l);let S,B,F,O,V,X,Q;for(e.textAlign=l,e.textBaseline="middle",e.font=_.string,r.x=Lx(this,v,i),e.fillStyle=i.bodyColor,Rl(this.beforeBody,x),m=t&&v!=="right"?l==="center"?f/2+p:f+2+p:0,O=0,X=o.length;O<X;++O){for(S=o[O],B=this.labelTextColors[O],e.fillStyle=B,Rl(S.before,x),F=S.lines,t&&F.length&&(this._drawColorBox(e,r,O,b,i),g=Math.max(_.lineHeight,h)),V=0,Q=F.length;V<Q;++V)x(F[V]),g=_.lineHeight;Rl(S.after,x)}m=0,g=_.lineHeight,Rl(this.afterBody,x),r.y-=a}drawFooter(r,e,i){const o=this.footer,a=o.length;let l,t;if(a){const h=vy(i.rtl,this.x,this.width);for(r.x=Lx(this,i.footerAlign,i),r.y+=i.footerMarginTop,e.textAlign=h.textAlign(i.footerAlign),e.textBaseline="middle",l=hh(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,t=0;t<a;++t)e.fillText(o[t],h.x(r.x),r.y+l.lineHeight/2),r.y+=l.lineHeight+i.footerSpacing}}drawBackground(r,e,i,o){const{xAlign:a,yAlign:l}=this,{x:t,y:h}=r,{width:f,height:p}=i,{topLeft:_,topRight:g,bottomLeft:m,bottomRight:b}=u1(o.cornerRadius);e.fillStyle=o.backgroundColor,e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.beginPath(),e.moveTo(t+_,h),l==="top"&&this.drawCaret(r,e,i,o),e.lineTo(t+f-g,h),e.quadraticCurveTo(t+f,h,t+f,h+g),l==="center"&&a==="right"&&this.drawCaret(r,e,i,o),e.lineTo(t+f,h+p-b),e.quadraticCurveTo(t+f,h+p,t+f-b,h+p),l==="bottom"&&this.drawCaret(r,e,i,o),e.lineTo(t+m,h+p),e.quadraticCurveTo(t,h+p,t,h+p-m),l==="center"&&a==="left"&&this.drawCaret(r,e,i,o),e.lineTo(t,h+_),e.quadraticCurveTo(t,h,t+_,h),e.closePath(),e.fill(),o.borderWidth>0&&e.stroke()}_updateAnimationTarget(r){const e=this.chart,i=this.$animations,o=i&&i.x,a=i&&i.y;if(o||a){const l=fv[r.position].call(this,this._active,this._eventPosition);if(!l)return;const t=this._size=Q8(this,r),h=Object.assign({},l,this._size),f=V8(e,r,h),p=G8(r,h,f,e);(o._to!==p.x||a._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=t.width,this.height=t.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(r){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const o={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Ff(e.padding),t=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&t&&(r.save(),r.globalAlpha=i,this.drawBackground(a,r,o,e),XO(r,e.textDirection),a.y+=l.top,this.drawTitle(a,r,e),this.drawBody(a,r,e),this.drawFooter(a,r,e),ZO(r,e.textDirection),r.restore())}getActiveElements(){return this._active||[]}setActiveElements(r,e){const i=this._active,o=r.map(({datasetIndex:t,index:h})=>{const f=this.chart.getDatasetMeta(t);if(!f)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:f.data[h],index:h}}),a=!Pw(i,o),l=this._positionChanged(o,e);(a||l)&&(this._active=o,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(r,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,a=this._active||[],l=this._getActiveElements(r,a,e,i),t=this._positionChanged(l,r),h=e||!Pw(l,a)||t;return h&&(this._active=l,(o.enabled||o.external)&&(this._eventPosition={x:r.x,y:r.y},this.update(!0,e))),h}_getActiveElements(r,e,i,o){const a=this.options;if(r.type==="mouseout")return[];if(!o)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)!==void 0);const l=this.chart.getElementsAtEventForMode(r,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(r,e){const{caretX:i,caretY:o,options:a}=this,l=fv[a.position].call(this,r,e);return l!==!1&&(i!==l.x||o!==l.y)}}is(gC,"positioners",fv);var tJ={id:"tooltip",_element:gC,positioners:fv,afterInit(n,r,e){e&&(n.tooltip=new gC({chart:n,options:e}))},beforeUpdate(n,r,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,r,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const r=n.tooltip;if(r&&r._willRender()){const e={tooltip:r};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;r.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,r){if(n.tooltip){const e=r.replay;n.tooltip.handleEvent(r.event,e,r.inChartArea)&&(r.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,r)=>r.bodyFont.size,boxWidth:(n,r)=>r.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:SD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},rJ=Object.freeze({__proto__:null,Colors:pZ,Decimation:yZ,Filler:NZ,Legend:VZ,SubTitle:$Z,Title:WZ,Tooltip:tJ});const nJ=(n,r,e,i)=>(typeof r=="string"?(e=n.push(r)-1,i.unshift({index:e,label:r})):isNaN(r)&&(e=null),e);function iJ(n,r,e,i){const o=n.indexOf(r);if(o===-1)return nJ(n,r,e,i);const a=n.lastIndexOf(r);return o!==a?e:o}const sJ=(n,r)=>n===null?null:kh(Math.round(n),0,r);function K8(n){const r=this.getLabels();return n>=0&&n<r.length?r[n]:n}class yC extends x1{constructor(r){super(r),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(r){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:o,label:a}of e)i[o]===a&&i.splice(o,1);this._addedLabels=[]}super.init(r)}parse(r,e){if(Na(r))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===r?e:iJ(i,r,Zo(e,r),this._addedLabels),sJ(e,i.length-1)}determineDataLimits(){const{minDefined:r,maxDefined:e}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(r||(i=0),e||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const r=this.min,e=this.max,i=this.options.offset,o=[];let a=this.getLabels();a=r===0&&e===a.length-1?a:a.slice(r,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=r;l<=e;l++)o.push({value:l});return o}getLabelForValue(r){return K8.call(this,r)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(r){return typeof r!="number"&&(r=this.parse(r)),r===null?NaN:this.getPixelForDecimal((r-this._startValue)/this._valueRange)}getPixelForTick(r){const e=this.ticks;return r<0||r>e.length-1?null:this.getPixelForValue(e[r].value)}getValueForPixel(r){return Math.round(this._startValue+this.getDecimalForPixel(r)*this._valueRange)}getBasePixel(){return this.bottom}}is(yC,"id","category"),is(yC,"defaults",{ticks:{callback:K8}});function oJ(n,r){const e=[],{bounds:o,step:a,min:l,max:t,precision:h,count:f,maxTicks:p,maxDigits:_,includeBounds:g}=n,m=a||1,b=p-1,{min:x,max:v}=r,S=!Na(l),B=!Na(t),F=!Na(f),O=(v-x)/(_+1);let V=QM((v-x)/b/m)*m,X,Q,ee,ne;if(V<1e-14&&!S&&!B)return[{value:x},{value:v}];ne=Math.ceil(v/V)-Math.floor(x/V),ne>b&&(V=QM(ne*V/b/m)*m),Na(h)||(X=Math.pow(10,h),V=Math.ceil(V*X)/X),o==="ticks"?(Q=Math.floor(x/V)*V,ee=Math.ceil(v/V)*V):(Q=x,ee=v),S&&B&&a&&ZK((t-l)/a,V/1e3)?(ne=Math.round(Math.min((t-l)/V,p)),V=(t-l)/ne,Q=l,ee=t):F?(Q=S?l:Q,ee=B?t:ee,ne=f-1,V=(ee-Q)/ne):(ne=(ee-Q)/V,Bv(ne,Math.round(ne),V/1e3)?ne=Math.round(ne):ne=Math.ceil(ne));const Ae=Math.max(VM(V),VM(Q));X=Math.pow(10,Na(h)?Ae:h),Q=Math.round(Q*X)/X,ee=Math.round(ee*X)/X;let fe=0;for(S&&(g&&Q!==l?(e.push({value:l}),Q<l&&fe++,Bv(Math.round((Q+fe*V)*X)/X,l,q8(l,O,n))&&fe++):Q<l&&fe++);fe<ne;++fe){const ce=Math.round((Q+fe*V)*X)/X;if(B&&ce>t)break;e.push({value:ce})}return B&&g&&ee!==t?e.length&&Bv(e[e.length-1].value,t,q8(t,O,n))?e[e.length-1].value=t:e.push({value:t}):(!B||ee===t)&&e.push({value:ee}),e}function q8(n,r,{horizontal:e,minRotation:i}){const o=bA(i),a=(e?Math.sin(o):Math.cos(o))||.001,l=.75*r*(""+n).length;return Math.min(r/a,l)}class jw extends x1{constructor(r){super(r),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(r,e){return Na(r)||(typeof r=="number"||r instanceof Number)&&!isFinite(+r)?null:+r}handleTickRangeOptions(){const{beginAtZero:r}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:o,max:a}=this;const l=h=>o=e?o:h,t=h=>a=i?a:h;if(r){const h=Am(o),f=Am(a);h<0&&f<0?t(0):h>0&&f>0&&l(0)}if(o===a){let h=a===0?1:Math.abs(a*.05);t(a+h),r||l(o-h)}this.min=o,this.max=a}getTickLimit(){const r=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=r,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),e=e||11),e&&(o=Math.min(e,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const r=this.options,e=r.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o={maxTicks:i,bounds:r.bounds,min:r.min,max:r.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,l=oJ(o,a);return r.bounds==="ticks"&&kO(l,this,"value"),r.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const r=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&r.length){const o=(i-e)/Math.max(r.length-1,1)/2;e-=o,i+=o}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(r){return _b(r,this.chart.options.locale,this.options.ticks.format)}}class _C extends jw{determineDataLimits(){const{min:r,max:e}=this.getMinMax(!0);this.min=pu(r)?r:0,this.max=pu(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const r=this.isHorizontal(),e=r?this.width:this.height,i=bA(this.options.ticks.minRotation),o=(r?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/o))}getPixelForValue(r){return r===null?NaN:this.getPixelForDecimal((r-this._startValue)/this._valueRange)}getValueForPixel(r){return this._startValue+this.getDecimalForPixel(r)*this._valueRange}}is(_C,"id","linear"),is(_C,"defaults",{ticks:{callback:v5.formatters.numeric}});const tb=n=>Math.floor(Ng(n)),D0=(n,r)=>Math.pow(10,tb(n)+r);function Y8(n){return n/Math.pow(10,tb(n))===1}function X8(n,r,e){const i=Math.pow(10,e),o=Math.floor(n/i);return Math.ceil(r/i)-o}function aJ(n,r){const e=r-n;let i=tb(e);for(;X8(n,r,i)>10;)i++;for(;X8(n,r,i)<10;)i--;return Math.min(i,tb(n))}function lJ(n,{min:r,max:e}){r=Zd(n.min,r);const i=[],o=tb(r);let a=aJ(r,e),l=a<0?Math.pow(10,Math.abs(a)):1;const t=Math.pow(10,a),h=o>a?Math.pow(10,o):0,f=Math.round((r-h)*l)/l,p=Math.floor((r-h)/t/10)*t*10;let _=Math.floor((f-p)/Math.pow(10,a)),g=Zd(n.min,Math.round((h+p+_*Math.pow(10,a))*l)/l);for(;g<e;)i.push({value:g,major:Y8(g),significand:_}),_>=10?_=_<15?15:20:_++,_>=20&&(a++,_=2,l=a>=0?1:l),g=Math.round((h+p+_*Math.pow(10,a))*l)/l;const m=Zd(n.max,g);return i.push({value:m,major:Y8(m),significand:_}),i}class vC extends x1{constructor(r){super(r),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(r,e){const i=jw.prototype.parse.apply(this,[r,e]);if(i===0){this._zero=!0;return}return pu(i)&&i>0?i:null}determineDataLimits(){const{min:r,max:e}=this.getMinMax(!0);this.min=pu(r)?Math.max(0,r):null,this.max=pu(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!pu(this._userMin)&&(this.min=r===D0(this.min,0)?D0(this.min,-1):D0(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:r,maxDefined:e}=this.getUserBounds();let i=this.min,o=this.max;const a=t=>i=r?i:t,l=t=>o=e?o:t;i===o&&(i<=0?(a(1),l(10)):(a(D0(i,-1)),l(D0(o,1)))),i<=0&&a(D0(o,-1)),o<=0&&l(D0(i,1)),this.min=i,this.max=o}buildTicks(){const r=this.options,e={min:this._userMin,max:this._userMax},i=lJ(e,this);return r.bounds==="ticks"&&kO(i,this,"value"),r.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(r){return r===void 0?"0":_b(r,this.chart.options.locale,this.options.ticks.format)}configure(){const r=this.min;super.configure(),this._startValue=Ng(r),this._valueRange=Ng(this.max)-Ng(r)}getPixelForValue(r){return(r===void 0||r===0)&&(r=this.min),r===null||isNaN(r)?NaN:this.getPixelForDecimal(r===this.min?0:(Ng(r)-this._startValue)/this._valueRange)}getValueForPixel(r){const e=this.getDecimalForPixel(r);return Math.pow(10,this._startValue+e*this._valueRange)}}is(vC,"id","logarithmic"),is(vC,"defaults",{ticks:{callback:v5.formatters.logarithmic,major:{enabled:!0}}});function bC(n){const r=n.ticks;if(r.display&&n.display){const e=Ff(r.backdropPadding);return Zo(r.font&&r.font.size,Uc.font.size)+e.height}return 0}function cJ(n,r,e){return e=jc(e)?e:[e],{w:Aq(n,r.string,e),h:e.length*r.lineHeight}}function Z8(n,r,e,i,o){return n===i||n===o?{start:r-e/2,end:r+e/2}:n<i||n>o?{start:r-e,end:r}:{start:r,end:r+e}}function uJ(n){const r={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},r),i=[],o=[],a=n._pointLabels.length,l=n.options.pointLabels,t=l.centerPointLabels?vl/a:0;for(let h=0;h<a;h++){const f=l.setContext(n.getPointLabelContext(h));o[h]=f.padding;const p=n.getPointPosition(h,n.drawingArea+o[h],t),_=hh(f.font),g=cJ(n.ctx,_,n._pointLabels[h]);i[h]=g;const m=wf(n.getIndexAngle(h)+t),b=Math.round(XE(m)),x=Z8(b,p.x,g.w,0,180),v=Z8(b,p.y,g.h,90,270);hJ(e,r,m,x,v)}n.setCenterPoint(r.l-e.l,e.r-r.r,r.t-e.t,e.b-r.b),n._pointLabelItems=pJ(n,i,o)}function hJ(n,r,e,i,o){const a=Math.abs(Math.sin(e)),l=Math.abs(Math.cos(e));let t=0,h=0;i.start<r.l?(t=(r.l-i.start)/a,n.l=Math.min(n.l,r.l-t)):i.end>r.r&&(t=(i.end-r.r)/a,n.r=Math.max(n.r,r.r+t)),o.start<r.t?(h=(r.t-o.start)/l,n.t=Math.min(n.t,r.t-h)):o.end>r.b&&(h=(o.end-r.b)/l,n.b=Math.max(n.b,r.b+h))}function fJ(n,r,e){const i=n.drawingArea,{extra:o,additionalAngle:a,padding:l,size:t}=e,h=n.getPointPosition(r,i+o+l,a),f=Math.round(XE(wf(h.angle+Iu))),p=gJ(h.y,t.h,f),_=AJ(f),g=mJ(h.x,t.w,_);return{visible:!0,x:h.x,y:p,textAlign:_,left:g,top:p,right:g+t.w,bottom:p+t.h}}function dJ(n,r){if(!r)return!0;const{left:e,top:i,right:o,bottom:a}=n;return!(Wm({x:e,y:i},r)||Wm({x:e,y:a},r)||Wm({x:o,y:i},r)||Wm({x:o,y:a},r))}function pJ(n,r,e){const i=[],o=n._pointLabels.length,a=n.options,{centerPointLabels:l,display:t}=a.pointLabels,h={extra:bC(a)/2,additionalAngle:l?vl/o:0};let f;for(let p=0;p<o;p++){h.padding=e[p],h.size=r[p];const _=fJ(n,p,h);i.push(_),t==="auto"&&(_.visible=dJ(_,f),_.visible&&(f=_))}return i}function AJ(n){return n===0||n===180?"center":n<180?"left":"right"}function mJ(n,r,e){return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function gJ(n,r,e){return e===90||e===270?n-=r/2:(e>270||e<90)&&(n-=r),n}function yJ(n,r,e){const{left:i,top:o,right:a,bottom:l}=e,{backdropColor:t}=r;if(!Na(t)){const h=u1(r.borderRadius),f=Ff(r.backdropPadding);n.fillStyle=t;const p=i-f.left,_=o-f.top,g=a-i+f.width,m=l-o+f.height;Object.values(h).some(b=>b!==0)?(n.beginPath(),Jv(n,{x:p,y:_,w:g,h:m,radius:h}),n.fill()):n.fillRect(p,_,g,m)}}function _J(n,r){const{ctx:e,options:{pointLabels:i}}=n;for(let o=r-1;o>=0;o--){const a=n._pointLabelItems[o];if(!a.visible)continue;const l=i.setContext(n.getPointLabelContext(o));yJ(e,l,a);const t=hh(l.font),{x:h,y:f,textAlign:p}=a;g1(e,n._pointLabels[o],h,f+t.lineHeight/2,t,{color:l.color,textAlign:p,textBaseline:"middle"})}}function CD(n,r,e,i){const{ctx:o}=n;if(e)o.arc(n.xCenter,n.yCenter,r,0,bc);else{let a=n.getPointPosition(0,r);o.moveTo(a.x,a.y);for(let l=1;l<i;l++)a=n.getPointPosition(l,r),o.lineTo(a.x,a.y)}}function vJ(n,r,e,i,o){const a=n.ctx,l=r.circular,{color:t,lineWidth:h}=r;!l&&!i||!t||!h||e<0||(a.save(),a.strokeStyle=t,a.lineWidth=h,a.setLineDash(o.dash||[]),a.lineDashOffset=o.dashOffset,a.beginPath(),CD(n,e,l,i),a.closePath(),a.stroke(),a.restore())}function bJ(n,r,e){return l0(n,{label:e,index:r,type:"pointLabel"})}class dv extends jw{constructor(r){super(r),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const r=this._padding=Ff(bC(this.options)/2),e=this.width=this.maxWidth-r.width,i=this.height=this.maxHeight-r.height;this.xCenter=Math.floor(this.left+e/2+r.left),this.yCenter=Math.floor(this.top+i/2+r.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:r,max:e}=this.getMinMax(!1);this.min=pu(r)&&!isNaN(r)?r:0,this.max=pu(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/bC(this.options))}generateTickLabels(r){jw.prototype.generateTickLabels.call(this,r),this._pointLabels=this.getLabels().map((e,i)=>{const o=cc(this.options.pointLabels.callback,[e,i],this);return o||o===0?o:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const r=this.options;r.display&&r.pointLabels.display?uJ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(r,e,i,o){this.xCenter+=Math.floor((r-e)/2),this.yCenter+=Math.floor((i-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(r,e,i,o))}getIndexAngle(r){const e=bc/(this._pointLabels.length||1),i=this.options.startAngle||0;return wf(r*e+bA(i))}getDistanceFromCenterForValue(r){if(Na(r))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-r)*e:(r-this.min)*e}getValueForDistanceFromCenter(r){if(Na(r))return NaN;const e=r/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(r){const e=this._pointLabels||[];if(r>=0&&r<e.length){const i=e[r];return bJ(this.getContext(),r,i)}}getPointPosition(r,e,i=0){const o=this.getIndexAngle(r)-Iu+i;return{x:Math.cos(o)*e+this.xCenter,y:Math.sin(o)*e+this.yCenter,angle:o}}getPointPositionForValue(r,e){return this.getPointPosition(r,this.getDistanceFromCenterForValue(e))}getBasePosition(r){return this.getPointPositionForValue(r||0,this.getBaseValue())}getPointLabelPosition(r){const{left:e,top:i,right:o,bottom:a}=this._pointLabelItems[r];return{left:e,top:i,right:o,bottom:a}}drawBackground(){const{backgroundColor:r,grid:{circular:e}}=this.options;if(r){const i=this.ctx;i.save(),i.beginPath(),CD(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=r,i.fill(),i.restore()}}drawGrid(){const r=this.ctx,e=this.options,{angleLines:i,grid:o,border:a}=e,l=this._pointLabels.length;let t,h,f;if(e.pointLabels.display&&_J(this,l),o.display&&this.ticks.forEach((p,_)=>{if(_!==0||_===0&&this.min<0){h=this.getDistanceFromCenterForValue(p.value);const g=this.getContext(_),m=o.setContext(g),b=a.setContext(g);vJ(this,m,h,l,b)}}),i.display){for(r.save(),t=l-1;t>=0;t--){const p=i.setContext(this.getPointLabelContext(t)),{color:_,lineWidth:g}=p;!g||!_||(r.lineWidth=g,r.strokeStyle=_,r.setLineDash(p.borderDash),r.lineDashOffset=p.borderDashOffset,h=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),f=this.getPointPosition(t,h),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(f.x,f.y),r.stroke())}r.restore()}}drawBorder(){}drawLabels(){const r=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const o=this.getIndexAngle(0);let a,l;r.save(),r.translate(this.xCenter,this.yCenter),r.rotate(o),r.textAlign="center",r.textBaseline="middle",this.ticks.forEach((t,h)=>{if(h===0&&this.min>=0&&!e.reverse)return;const f=i.setContext(this.getContext(h)),p=hh(f.font);if(a=this.getDistanceFromCenterForValue(this.ticks[h].value),f.showLabelBackdrop){r.font=p.string,l=r.measureText(t.label).width,r.fillStyle=f.backdropColor;const _=Ff(f.backdropPadding);r.fillRect(-l/2-_.left,-a-p.size/2-_.top,l+_.width,p.size+_.height)}g1(r,t.label,0,-a,p,{color:f.color,strokeColor:f.textStrokeColor,strokeWidth:f.textStrokeWidth})}),r.restore()}drawTitle(){}}is(dv,"id","radialLinear"),is(dv,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:v5.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(r){return r},padding:5,centerPointLabels:!1}}),is(dv,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),is(dv,"descriptors",{angleLines:{_fallback:"grid"}});const E5={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_d=Object.keys(E5);function J8(n,r){return n-r}function eF(n,r){if(Na(r))return null;const e=n._adapter,{parser:i,round:o,isoWeekday:a}=n._parseOpts;let l=r;return typeof i=="function"&&(l=i(l)),pu(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(o&&(l=o==="week"&&(Iy(a)||a===!0)?e.startOf(l,"isoWeek",a):e.startOf(l,o)),+l)}function tF(n,r,e,i){const o=_d.length;for(let a=_d.indexOf(n);a<o-1;++a){const l=E5[_d[a]],t=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-r)/(t*l.size))<=i)return _d[a]}return _d[o-1]}function xJ(n,r,e,i,o){for(let a=_d.length-1;a>=_d.indexOf(e);a--){const l=_d[a];if(E5[l].common&&n._adapter.diff(o,i,l)>=r-1)return l}return _d[e?_d.indexOf(e):0]}function wJ(n){for(let r=_d.indexOf(n)+1,e=_d.length;r<e;++r)if(E5[_d[r]].common)return _d[r]}function rF(n,r,e){if(!e)n[r]=!0;else if(e.length){const{lo:i,hi:o}=ZE(e,r),a=e[i]>=r?e[i]:e[o];n[a]=!0}}function SJ(n,r,e,i){const o=n._adapter,a=+o.startOf(r[0].value,i),l=r[r.length-1].value;let t,h;for(t=a;t<=l;t=+o.add(t,1,i))h=e[t],h>=0&&(r[h].major=!0);return r}function nF(n,r,e){const i=[],o={},a=r.length;let l,t;for(l=0;l<a;++l)t=r[l],o[t]=l,i.push({value:t,major:!1});return a===0||!e?i:SJ(n,i,o,e)}class rb extends x1{constructor(r){super(r),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(r,e={}){const i=r.time||(r.time={}),o=this._adapter=new PY._date(r.adapters.date);o.init(e),Ev(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(r),this._normalized=e.normalized}parse(r,e){return r===void 0?null:eF(this,r)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const r=this.options,e=this._adapter,i=r.time.unit||"day";let{min:o,max:a,minDefined:l,maxDefined:t}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(o=Math.min(o,f.min)),!t&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!t)&&(h(this._getLabelBounds()),(r.bounds!=="ticks"||r.ticks.source!=="labels")&&h(this.getMinMax(!1))),o=pu(o)&&!isNaN(o)?o:+e.startOf(Date.now(),i),a=pu(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(o,a-1),this.max=Math.max(o+1,a)}_getLabelBounds(){const r=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return r.length&&(e=r[0],i=r[r.length-1]),{min:e,max:i}}buildTicks(){const r=this.options,e=r.time,i=r.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();r.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const a=this.min,l=this.max,t=rq(o,a,l);return this._unit=e.unit||(i.autoSkip?tF(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):xJ(this,t.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:wJ(this._unit),this.initOffsets(o),r.reverse&&t.reverse(),nF(this,t,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(r=>+r.value))}initOffsets(r=[]){let e=0,i=0,o,a;this.options.offset&&r.length&&(o=this.getDecimalForValue(r[0]),r.length===1?e=1-o:e=(this.getDecimalForValue(r[1])-o)/2,a=this.getDecimalForValue(r[r.length-1]),r.length===1?i=a:i=(a-this.getDecimalForValue(r[r.length-2]))/2);const l=r.length<3?.5:.25;e=kh(e,0,l),i=kh(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const r=this._adapter,e=this.min,i=this.max,o=this.options,a=o.time,l=a.unit||tF(a.minUnit,e,i,this._getLabelCapacity(e)),t=Zo(o.ticks.stepSize,1),h=l==="week"?a.isoWeekday:!1,f=Iy(h)||h===!0,p={};let _=e,g,m;if(f&&(_=+r.startOf(_,"isoWeek",h)),_=+r.startOf(_,f?"day":l),r.diff(i,e,l)>1e5*t)throw new Error(e+" and "+i+" are too far apart with stepSize of "+t+" "+l);const b=o.ticks.source==="data"&&this.getDataTimestamps();for(g=_,m=0;g<i;g=+r.add(g,t,l),m++)rF(p,g,b);return(g===i||o.bounds==="ticks"||m===1)&&rF(p,g,b),Object.keys(p).sort(J8).map(x=>+x)}getLabelForValue(r){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(r,i.tooltipFormat):e.format(r,i.displayFormats.datetime)}format(r,e){const o=this.options.time.displayFormats,a=this._unit,l=e||o[a];return this._adapter.format(r,l)}_tickFormatFunction(r,e,i,o){const a=this.options,l=a.ticks.callback;if(l)return cc(l,[r,e,i],this);const t=a.time.displayFormats,h=this._unit,f=this._majorUnit,p=h&&t[h],_=f&&t[f],g=i[e],m=f&&_&&g&&g.major;return this._adapter.format(r,o||(m?_:p))}generateTickLabels(r){let e,i,o;for(e=0,i=r.length;e<i;++e)o=r[e],o.label=this._tickFormatFunction(o.value,e,r)}getDecimalForValue(r){return r===null?NaN:(r-this.min)/(this.max-this.min)}getPixelForValue(r){const e=this._offsets,i=this.getDecimalForValue(r);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(r){const e=this._offsets,i=this.getDecimalForPixel(r)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(r){const e=this.options.ticks,i=this.ctx.measureText(r).width,o=bA(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(o),l=Math.sin(o),t=this._resolveTickFontOptions(0).size;return{w:i*a+t*l,h:i*l+t*a}}_getLabelCapacity(r){const e=this.options.time,i=e.displayFormats,o=i[e.unit]||i.millisecond,a=this._tickFormatFunction(r,0,nF(this,[r],this._majorUnit),o),l=this._getLabelSize(a),t=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return t>0?t:1}getDataTimestamps(){let r=this._cache.data||[],e,i;if(r.length)return r;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(e=0,i=o.length;e<i;++e)r=r.concat(o[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const r=this._cache.labels||[];let e,i;if(r.length)return r;const o=this.getLabels();for(e=0,i=o.length;e<i;++e)r.push(eF(this,o[e]));return this._cache.labels=this._normalized?r:this.normalize(r)}normalize(r){return RO(r.sort(J8))}}is(rb,"id","time"),is(rb,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function kx(n,r,e){let i=0,o=n.length-1,a,l,t,h;e?(r>=n[i].pos&&r<=n[o].pos&&({lo:i,hi:o}=Gm(n,"pos",r)),{pos:a,time:t}=n[i],{pos:l,time:h}=n[o]):(r>=n[i].time&&r<=n[o].time&&({lo:i,hi:o}=Gm(n,"time",r)),{time:a,pos:t}=n[i],{time:l,pos:h}=n[o]);const f=l-a;return f?t+(h-t)*(r-a)/f:t}class xC extends rb{constructor(r){super(r),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const r=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(r);this._minPos=kx(e,this.min),this._tableRange=kx(e,this.max)-this._minPos,super.initOffsets(r)}buildLookupTable(r){const{min:e,max:i}=this,o=[],a=[];let l,t,h,f,p;for(l=0,t=r.length;l<t;++l)f=r[l],f>=e&&f<=i&&o.push(f);if(o.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,t=o.length;l<t;++l)p=o[l+1],h=o[l-1],f=o[l],Math.round((p+h)/2)!==f&&a.push({time:f,pos:l/(t-1)});return a}_generate(){const r=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(r)||!i.length)&&i.splice(0,0,r),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((o,a)=>o-a)}_getTimestampsForTable(){let r=this._cache.all||[];if(r.length)return r;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?r=this.normalize(e.concat(i)):r=e.length?e:i,r=this._cache.all=r,r}getDecimalForValue(r){return(kx(this._table,r)-this._minPos)/this._tableRange}getValueForPixel(r){const e=this._offsets,i=this.getDecimalForPixel(r)/e.factor-e.end;return kx(this._table,i*this._tableRange+this._minPos,!0)}}is(xC,"id","timeseries"),is(xC,"defaults",rb.defaults);var CJ=Object.freeze({__proto__:null,CategoryScale:yC,LinearScale:_C,LogarithmicScale:vC,RadialLinearScale:dv,TimeScale:rb,TimeSeriesScale:xC});const EJ=[FY,aZ,rJ,CJ];zm.register(...EJ);var V4={exports:{}},iF;function BJ(){return iF||(iF=1,function(n,r){(function(i,o){n.exports=o()})(window,function(){return function(e){var i={};function o(a){if(i[a])return i[a].exports;var l=i[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=e,o.c=i,o.d=function(a,l,t){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:t})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var h in a)o.d(t,h,(function(f){return a[f]}).bind(null,h));return t},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s=0)}({"./src/index.js":function(e,i,o){o.r(i),o("./src/sass/index.scss");var a=o("./src/js/init.js"),l=a.default.init;typeof window<"u"&&(window.printJS=l),i.default=l},"./src/js/browser.js":function(e,i,o){o.r(i);var a={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!a.isIE()&&!!window.StyleMedia},isChrome:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!t.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};i.default=a},"./src/js/functions.js":function(e,i,o){o.r(i),o.d(i,"addWrapper",function(){return h}),o.d(i,"capitalizePrint",function(){return f}),o.d(i,"collectStyles",function(){return p}),o.d(i,"addHeader",function(){return g}),o.d(i,"cleanUp",function(){return m}),o.d(i,"isRawHTML",function(){return b});var a=o("./src/js/modal.js"),l=o("./src/js/browser.js");function t(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(S){return typeof S}:t=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t(x)}function h(x,v){var S="font-family:"+v.font+" !important; font-size: "+v.font_size+" !important; width:100%;";return'<div style="'+S+'">'+x+"</div>"}function f(x){return x.charAt(0).toUpperCase()+x.slice(1)}function p(x,v){for(var S=document.defaultView||window,B="",F=S.getComputedStyle(x,""),O=0;O<F.length;O++)(v.targetStyles.indexOf("*")!==-1||v.targetStyle.indexOf(F[O])!==-1||_(v.targetStyles,F[O]))&&F.getPropertyValue(F[O])&&(B+=F[O]+":"+F.getPropertyValue(F[O])+";");return B+="max-width: "+v.maxWidth+"px !important; font-size: "+v.font_size+" !important;",B}function _(x,v){for(var S=0;S<x.length;S++)if(t(v)==="object"&&v.indexOf(x[S])!==-1)return!0;return!1}function g(x,v){var S=document.createElement("div");if(b(v.header))S.innerHTML=v.header;else{var B=document.createElement("h1"),F=document.createTextNode(v.header);B.appendChild(F),B.setAttribute("style",v.headerStyle),S.appendChild(B)}x.insertBefore(S,x.childNodes[0])}function m(x){x.showModal&&a.default.close(),x.onLoadingEnd&&x.onLoadingEnd(),(x.showModal||x.onLoadingStart)&&window.URL.revokeObjectURL(x.printable);var v="mouseover";(l.default.isChrome()||l.default.isFirefox())&&(v="focus");var S=function B(){window.removeEventListener(v,B),x.onPrintDialogClose();var F=document.getElementById(x.frameId);F&&F.remove()};window.addEventListener(v,S)}function b(x){var v=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return v.test(x)}},"./src/js/html.js":function(e,i,o){o.r(i);var a=o("./src/js/functions.js"),l=o("./src/js/print.js");function t(p){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(g){return typeof g}:t=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},t(p)}i.default={print:function(_,g){var m=f(_.printable)?_.printable:document.getElementById(_.printable);if(!m){window.console.error("Invalid HTML element id: "+_.printable);return}_.printableElement=h(m,_),_.header&&Object(a.addHeader)(_.printableElement,_),l.default.send(_,g)}};function h(p,_){for(var g=p.cloneNode(),m=Array.prototype.slice.call(p.childNodes),b=0;b<m.length;b++)if(_.ignoreElements.indexOf(m[b].id)===-1){var x=h(m[b],_);g.appendChild(x)}switch(_.scanStyles&&p.nodeType===1&&g.setAttribute("style",Object(a.collectStyles)(p,_)),p.tagName){case"SELECT":g.value=p.value;break;case"CANVAS":g.getContext("2d").drawImage(p,0,0);break}return g}function f(p){return t(p)==="object"&&p&&(p instanceof HTMLElement||p.nodeType===1)}},"./src/js/image.js":function(e,i,o){o.r(i);var a=o("./src/js/functions.js"),l=o("./src/js/print.js"),t=o("./src/js/browser.js");i.default={print:function(f,p){f.printable.constructor!==Array&&(f.printable=[f.printable]),f.printableElement=document.createElement("div"),f.printable.forEach(function(_){var g=document.createElement("img");if(g.setAttribute("style",f.imageStyle),g.src=_,t.default.isFirefox()){var m=g.src;g.src=m}var b=document.createElement("div");b.appendChild(g),f.printableElement.appendChild(b)}),f.header&&Object(a.addHeader)(f.printableElement,f),l.default.send(f,p)}}},"./src/js/init.js":function(e,i,o){o.r(i);var a=o("./src/js/browser.js"),l=o("./src/js/modal.js"),t=o("./src/js/pdf.js"),h=o("./src/js/html.js"),f=o("./src/js/raw-html.js"),p=o("./src/js/image.js"),_=o("./src/js/json.js");function g(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(v){return typeof v}:g=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},g(b)}var m=["pdf","html","image","json","raw-html"];i.default={init:function(){var x={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(X){throw X},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},v=arguments[0];if(v===void 0)throw new Error("printJS expects at least 1 attribute.");switch(g(v)){case"string":x.printable=encodeURI(v),x.fallbackPrintable=x.printable,x.type=arguments[1]||x.type;break;case"object":x.printable=v.printable,x.fallbackPrintable=typeof v.fallbackPrintable<"u"?v.fallbackPrintable:x.printable,x.fallbackPrintable=x.base64?"data:application/pdf;base64,".concat(x.fallbackPrintable):x.fallbackPrintable;for(var S in x)S==="printable"||S==="fallbackPrintable"||(x[S]=typeof v[S]<"u"?v[S]:x[S]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+g(v))}if(!x.printable)throw new Error("Missing printable information.");if(!x.type||typeof x.type!="string"||m.indexOf(x.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");x.showModal&&l.default.show(x),x.onLoadingStart&&x.onLoadingStart();var B=document.getElementById(x.frameId);B&&B.parentNode.removeChild(B);var F=document.createElement("iframe");switch(a.default.isFirefox()?F.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):F.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),F.setAttribute("id",x.frameId),x.type!=="pdf"&&(F.srcdoc="<html><head><title>"+x.documentTitle+"</title>",x.css&&(Array.isArray(x.css)||(x.css=[x.css]),x.css.forEach(function(V){F.srcdoc+='<link rel="stylesheet" href="'+V+'">'})),F.srcdoc+="</head><body></body></html>"),x.type){case"pdf":if(a.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var O=window.open(x.fallbackPrintable,"_blank");O.focus(),x.onIncompatibleBrowser()}catch(V){x.onError(V)}finally{x.showModal&&l.default.close(),x.onLoadingEnd&&x.onLoadingEnd()}else t.default.print(x,F);break;case"image":p.default.print(x,F);break;case"html":h.default.print(x,F);break;case"raw-html":f.default.print(x,F);break;case"json":_.default.print(x,F);break}}}},"./src/js/json.js":function(e,i,o){o.r(i);var a=o("./src/js/functions.js"),l=o("./src/js/print.js");function t(f){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(_){return typeof _}:t=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(f)}i.default={print:function(p,_){if(t(p.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof p.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!p.properties||!Array.isArray(p.properties))throw new Error("Invalid properties array for your JSON data.");p.properties=p.properties.map(function(g){return{field:t(g)==="object"?g.field:g,displayName:t(g)==="object"?g.displayName:g,columnSize:t(g)==="object"&&g.columnSize?g.columnSize+";":100/p.properties.length+"%;"}}),p.printableElement=document.createElement("div"),p.header&&Object(a.addHeader)(p.printableElement,p),p.printableElement.innerHTML+=h(p),l.default.send(p,_)}};function h(f){var p=f.printable,_=f.properties,g='<table style="border-collapse: collapse; width: 100%;">';f.repeatTableHeader&&(g+="<thead>"),g+="<tr>";for(var m=0;m<_.length;m++)g+='<th style="width:'+_[m].columnSize+";"+f.gridHeaderStyle+'">'+Object(a.capitalizePrint)(_[m].displayName)+"</th>";g+="</tr>",f.repeatTableHeader&&(g+="</thead>"),g+="<tbody>";for(var b=0;b<p.length;b++){g+="<tr>";for(var x=0;x<_.length;x++){var v=p[b],S=_[x].field.split(".");if(S.length>1)for(var B=0;B<S.length;B++)v=v[S[B]];else v=v[_[x].field];g+='<td style="width:'+_[x].columnSize+f.gridStyle+'">'+v+"</td>"}g+="</tr>"}return g+="</tbody></table>",g}},"./src/js/modal.js":function(e,i,o){o.r(i);var a={show:function(t){var h="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",f=document.createElement("div");f.setAttribute("style",h),f.setAttribute("id","printJS-Modal");var p=document.createElement("div");p.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var _=document.createElement("div");_.setAttribute("class","printClose"),_.setAttribute("id","printClose"),p.appendChild(_);var g=document.createElement("span");g.setAttribute("class","printSpinner"),p.appendChild(g);var m=document.createTextNode(t.modalMessage);p.appendChild(m),f.appendChild(p),document.getElementsByTagName("body")[0].appendChild(f),document.getElementById("printClose").addEventListener("click",function(){a.close()})},close:function(){var t=document.getElementById("printJS-Modal");t&&t.parentNode.removeChild(t)}};i.default=a},"./src/js/pdf.js":function(e,i,o){o.r(i);var a=o("./src/js/print.js"),l=o("./src/js/functions.js");i.default={print:function(f,p){if(f.base64){var _=Uint8Array.from(atob(f.printable),function(m){return m.charCodeAt(0)});t(f,p,_);return}f.printable=/^(blob|http|\/\/)/i.test(f.printable)?f.printable:window.location.origin+(f.printable.charAt(0)!=="/"?"/"+f.printable:f.printable);var g=new window.XMLHttpRequest;g.responseType="arraybuffer",g.addEventListener("error",function(){Object(l.cleanUp)(f),f.onError(g.statusText,g)}),g.addEventListener("load",function(){if([200,201].indexOf(g.status)===-1){Object(l.cleanUp)(f),f.onError(g.statusText,g);return}t(f,p,g.response)}),g.open("GET",f.printable,!0),g.send()}};function t(h,f,p){var _=new window.Blob([p],{type:"application/pdf"});_=window.URL.createObjectURL(_),f.setAttribute("src",_),a.default.send(h,f)}},"./src/js/print.js":function(e,i,o){o.r(i);var a=o("./src/js/browser.js"),l=o("./src/js/functions.js"),t={send:function(g,m){document.getElementsByTagName("body")[0].appendChild(m);var b=document.getElementById(g.frameId);b.onload=function(){if(g.type==="pdf"){a.default.isFirefox()?setTimeout(function(){return h(b,g)},1e3):h(b,g);return}var x=b.contentWindow||b.contentDocument;if(x.document&&(x=x.document),x.body.appendChild(g.printableElement),g.type!=="pdf"&&g.style){var v=document.createElement("style");v.innerHTML=g.style,x.head.appendChild(v)}var S=x.getElementsByTagName("img");S.length>0?f(Array.from(S)).then(function(){return h(b,g)}):h(b,g)}}};function h(_,g){try{if(_.focus(),a.default.isEdge()||a.default.isIE())try{_.contentWindow.document.execCommand("print",!1,null)}catch{_.contentWindow.print()}else _.contentWindow.print()}catch(m){g.onError(m)}finally{a.default.isFirefox()&&(_.style.visibility="hidden",_.style.left="-1px"),Object(l.cleanUp)(g)}}function f(_){var g=_.map(function(m){if(m.src&&m.src!==window.location.href)return p(m)});return Promise.all(g)}function p(_){return new Promise(function(g){var m=function b(){!_||typeof _.naturalWidth>"u"||_.naturalWidth===0||!_.complete?setTimeout(b,500):g()};m()})}i.default=t},"./src/js/raw-html.js":function(e,i,o){o.r(i);var a=o("./src/js/print.js");i.default={print:function(t,h){t.printableElement=document.createElement("div"),t.printableElement.setAttribute("style","width:100%"),t.printableElement.innerHTML=t.printable,a.default.send(t,h)}}},"./src/sass/index.scss":function(e,i,o){},0:function(e,i,o){e.exports=o("./src/index.js")}}).default})}(V4)),V4.exports}var TJ=BJ();const IJ=s0(TJ);var ED={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},cB={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},MJ=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Uw={CSS:{},springs:{}};function fm(n,r,e){return Math.min(Math.max(n,r),e)}function Fv(n,r){return n.indexOf(r)>-1}function G4(n,r){return n.apply(null,r)}var lo={arr:function(n){return Array.isArray(n)},obj:function(n){return Fv(Object.prototype.toString.call(n),"Object")},pth:function(n){return lo.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||lo.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return typeof n>"u"},nil:function(n){return lo.und(n)||n===null},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return lo.hex(n)||lo.rgb(n)||lo.hsl(n)},key:function(n){return!ED.hasOwnProperty(n)&&!cB.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}};function BD(n){var r=/\(([^)]+)\)/.exec(n);return r?r[1].split(",").map(function(e){return parseFloat(e)}):[]}function TD(n,r){var e=BD(n),i=fm(lo.und(e[0])?1:e[0],.1,100),o=fm(lo.und(e[1])?100:e[1],.1,100),a=fm(lo.und(e[2])?10:e[2],.1,100),l=fm(lo.und(e[3])?0:e[3],.1,100),t=Math.sqrt(o/i),h=a/(2*Math.sqrt(o*i)),f=h<1?t*Math.sqrt(1-h*h):0,p=1,_=h<1?(h*t+-l)/f:-l+t;function g(b){var x=r?r*b/1e3:b;return h<1?x=Math.exp(-x*h*t)*(p*Math.cos(f*x)+_*Math.sin(f*x)):x=(p+_*x)*Math.exp(-x*t),b===0||b===1?b:1-x}function m(){var b=Uw.springs[n];if(b)return b;for(var x=1/6,v=0,S=0;;)if(v+=x,g(v)===1){if(S++,S>=16)break}else S=0;var B=v*x*1e3;return Uw.springs[n]=B,B}return r?g:m}function FJ(n){return n===void 0&&(n=10),function(r){return Math.ceil(fm(r,1e-6,1)*n)*(1/n)}}var PJ=function(){var n=11,r=1/(n-1);function e(p,_){return 1-3*_+3*p}function i(p,_){return 3*_-6*p}function o(p){return 3*p}function a(p,_,g){return((e(_,g)*p+i(_,g))*p+o(_))*p}function l(p,_,g){return 3*e(_,g)*p*p+2*i(_,g)*p+o(_)}function t(p,_,g,m,b){var x,v,S=0;do v=_+(g-_)/2,x=a(v,m,b)-p,x>0?g=v:_=v;while(Math.abs(x)>1e-7&&++S<10);return v}function h(p,_,g,m){for(var b=0;b<4;++b){var x=l(_,g,m);if(x===0)return _;var v=a(_,g,m)-p;_-=v/x}return _}function f(p,_,g,m){if(!(0<=p&&p<=1&&0<=g&&g<=1))return;var b=new Float32Array(n);if(p!==_||g!==m)for(var x=0;x<n;++x)b[x]=a(x*r,p,g);function v(S){for(var B=0,F=1,O=n-1;F!==O&&b[F]<=S;++F)B+=r;--F;var V=(S-b[F])/(b[F+1]-b[F]),X=B+V*r,Q=l(X,p,g);return Q>=.001?h(S,X,p,g):Q===0?X:t(S,B,B+r,p,g)}return function(S){return p===_&&g===m||S===0||S===1?S:a(v(S),_,m)}}return f}(),ID=function(){var n={linear:function(){return function(i){return i}}},r={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var o,a=4;i<((o=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((o*3-2)/22-i,2)}},Elastic:function(i,o){i===void 0&&(i=1),o===void 0&&(o=.5);var a=fm(i,1,10),l=fm(o,.1,2);return function(t){return t===0||t===1?t:-a*Math.pow(2,10*(t-1))*Math.sin((t-1-l/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/l)}}},e=["Quad","Cubic","Quart","Quint","Expo"];return e.forEach(function(i,o){r[i]=function(){return function(a){return Math.pow(a,o+2)}}}),Object.keys(r).forEach(function(i){var o=r[i];n["easeIn"+i]=o,n["easeOut"+i]=function(a,l){return function(t){return 1-o(a,l)(1-t)}},n["easeInOut"+i]=function(a,l){return function(t){return t<.5?o(a,l)(t*2)/2:1-o(a,l)(t*-2+2)/2}},n["easeOutIn"+i]=function(a,l){return function(t){return t<.5?(1-o(a,l)(1-t*2))/2:(o(a,l)(t*2-1)+1)/2}}}),n}();function uB(n,r){if(lo.fnc(n))return n;var e=n.split("(")[0],i=ID[e],o=BD(n);switch(e){case"spring":return TD(n,r);case"cubicBezier":return G4(PJ,o);case"steps":return G4(FJ,o);default:return G4(i,o)}}function MD(n){try{var r=document.querySelectorAll(n);return r}catch{return}}function B5(n,r){for(var e=n.length,i=arguments.length>=2?arguments[1]:void 0,o=[],a=0;a<e;a++)if(a in n){var l=n[a];r.call(i,l,a,n)&&o.push(l)}return o}function T5(n){return n.reduce(function(r,e){return r.concat(lo.arr(e)?T5(e):e)},[])}function sF(n){return lo.arr(n)?n:(lo.str(n)&&(n=MD(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function hB(n,r){return n.some(function(e){return e===r})}function fB(n){var r={};for(var e in n)r[e]=n[e];return r}function wC(n,r){var e=fB(n);for(var i in n)e[i]=r.hasOwnProperty(i)?r[i]:n[i];return e}function I5(n,r){var e=fB(n);for(var i in r)e[i]=lo.und(n[i])?r[i]:n[i];return e}function LJ(n){var r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);return r?"rgba("+r[1]+",1)":n}function kJ(n){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,e=n.replace(r,function(t,h,f,p){return h+h+f+f+p+p}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),o=parseInt(i[1],16),a=parseInt(i[2],16),l=parseInt(i[3],16);return"rgba("+o+","+a+","+l+",1)"}function OJ(n){var r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),e=parseInt(r[1],10)/360,i=parseInt(r[2],10)/100,o=parseInt(r[3],10)/100,a=r[4]||1;function l(g,m,b){return b<0&&(b+=1),b>1&&(b-=1),b<1/6?g+(m-g)*6*b:b<1/2?m:b<2/3?g+(m-g)*(2/3-b)*6:g}var t,h,f;if(i==0)t=h=f=o;else{var p=o<.5?o*(1+i):o+i-o*i,_=2*o-p;t=l(_,p,e+1/3),h=l(_,p,e),f=l(_,p,e-1/3)}return"rgba("+t*255+","+h*255+","+f*255+","+a+")"}function DJ(n){if(lo.rgb(n))return LJ(n);if(lo.hex(n))return kJ(n);if(lo.hsl(n))return OJ(n)}function qm(n){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(r)return r[1]}function RJ(n){if(Fv(n,"translate")||n==="perspective")return"px";if(Fv(n,"rotate")||Fv(n,"skew"))return"deg"}function SC(n,r){return lo.fnc(n)?n(r.target,r.id,r.total):n}function dm(n,r){return n.getAttribute(r)}function dB(n,r,e){var i=qm(r);if(hB([e,"deg","rad","turn"],i))return r;var o=Uw.CSS[r+e];if(!lo.und(o))return o;var a=100,l=document.createElement(n.tagName),t=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;t.appendChild(l),l.style.position="absolute",l.style.width=a+e;var h=a/l.offsetWidth;t.removeChild(l);var f=h*parseFloat(r);return Uw.CSS[r+e]=f,f}function FD(n,r,e){if(r in n.style){var i=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=n.style[r]||getComputedStyle(n).getPropertyValue(i)||"0";return e?dB(n,o,e):o}}function pB(n,r){if(lo.dom(n)&&!lo.inp(n)&&(!lo.nil(dm(n,r))||lo.svg(n)&&n[r]))return"attribute";if(lo.dom(n)&&hB(MJ,r))return"transform";if(lo.dom(n)&&r!=="transform"&&FD(n,r))return"css";if(n[r]!=null)return"object"}function PD(n){if(lo.dom(n)){for(var r=n.style.transform||"",e=/(\w+)\(([^)]*)\)/g,i=new Map,o;o=e.exec(r);)i.set(o[1],o[2]);return i}}function NJ(n,r,e,i){var o=Fv(r,"scale")?1:0+RJ(r),a=PD(n).get(r)||o;return e&&(e.transforms.list.set(r,a),e.transforms.last=r),i?dB(n,a,i):a}function AB(n,r,e,i){switch(pB(n,r)){case"transform":return NJ(n,r,i,e);case"css":return FD(n,r,e);case"attribute":return dm(n,r);default:return n[r]||0}}function mB(n,r){var e=/^(\*=|\+=|-=)/.exec(n);if(!e)return n;var i=qm(n)||0,o=parseFloat(r),a=parseFloat(n.replace(e[0],""));switch(e[0][0]){case"+":return o+a+i;case"-":return o-a+i;case"*":return o*a+i}}function LD(n,r){if(lo.col(n))return DJ(n);if(/\s/g.test(n))return n;var e=qm(n),i=e?n.substr(0,n.length-e.length):n;return r?i+r:i}function gB(n,r){return Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))}function jJ(n){return Math.PI*2*dm(n,"r")}function UJ(n){return dm(n,"width")*2+dm(n,"height")*2}function zJ(n){return gB({x:dm(n,"x1"),y:dm(n,"y1")},{x:dm(n,"x2"),y:dm(n,"y2")})}function kD(n){for(var r=n.points,e=0,i,o=0;o<r.numberOfItems;o++){var a=r.getItem(o);o>0&&(e+=gB(i,a)),i=a}return e}function HJ(n){var r=n.points;return kD(n)+gB(r.getItem(r.numberOfItems-1),r.getItem(0))}function OD(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return jJ(n);case"rect":return UJ(n);case"line":return zJ(n);case"polyline":return kD(n);case"polygon":return HJ(n)}}function QJ(n){var r=OD(n);return n.setAttribute("stroke-dasharray",r),r}function VJ(n){for(var r=n.parentNode;lo.svg(r)&&lo.svg(r.parentNode);)r=r.parentNode;return r}function DD(n,r){var e=r||{},i=e.el||VJ(n),o=i.getBoundingClientRect(),a=dm(i,"viewBox"),l=o.width,t=o.height,h=e.viewBox||(a?a.split(" "):[0,0,l,t]);return{el:i,viewBox:h,x:h[0]/1,y:h[1]/1,w:l,h:t,vW:h[2],vH:h[3]}}function GJ(n,r){var e=lo.str(n)?MD(n)[0]:n,i=r||100;return function(o){return{property:o,el:e,svg:DD(e),totalLength:OD(e)*(i/100)}}}function WJ(n,r,e){function i(p){p===void 0&&(p=0);var _=r+p>=1?r+p:0;return n.el.getPointAtLength(_)}var o=DD(n.el,n.svg),a=i(),l=i(-1),t=i(1),h=e?1:o.w/o.vW,f=e?1:o.h/o.vH;switch(n.property){case"x":return(a.x-o.x)*h;case"y":return(a.y-o.y)*f;case"angle":return Math.atan2(t.y-l.y,t.x-l.x)*180/Math.PI}}function oF(n,r){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=LD(lo.pth(n)?n.totalLength:n,r)+"";return{original:i,numbers:i.match(e)?i.match(e).map(Number):[0],strings:lo.str(n)||r?i.split(e):[]}}function yB(n){var r=n?T5(lo.arr(n)?n.map(sF):sF(n)):[];return B5(r,function(e,i,o){return o.indexOf(e)===i})}function RD(n){var r=yB(n);return r.map(function(e,i){return{target:e,id:i,total:r.length,transforms:{list:PD(e)}}})}function $J(n,r){var e=fB(r);if(/^spring/.test(e.easing)&&(e.duration=TD(e.easing)),lo.arr(n)){var i=n.length,o=i===2&&!lo.obj(n[0]);o?n={value:n}:lo.fnc(r.duration)||(e.duration=r.duration/i)}var a=lo.arr(n)?n:[n];return a.map(function(l,t){var h=lo.obj(l)&&!lo.pth(l)?l:{value:l};return lo.und(h.delay)&&(h.delay=t?0:r.delay),lo.und(h.endDelay)&&(h.endDelay=t===a.length-1?r.endDelay:0),h}).map(function(l){return I5(l,e)})}function KJ(n){for(var r=B5(T5(n.map(function(a){return Object.keys(a)})),function(a){return lo.key(a)}).reduce(function(a,l){return a.indexOf(l)<0&&a.push(l),a},[]),e={},i=function(a){var l=r[a];e[l]=n.map(function(t){var h={};for(var f in t)lo.key(f)?f==l&&(h.value=t[f]):h[f]=t[f];return h})},o=0;o<r.length;o++)i(o);return e}function qJ(n,r){var e=[],i=r.keyframes;i&&(r=I5(KJ(i),r));for(var o in r)lo.key(o)&&e.push({name:o,tweens:$J(r[o],n)});return e}function YJ(n,r){var e={};for(var i in n){var o=SC(n[i],r);lo.arr(o)&&(o=o.map(function(a){return SC(a,r)}),o.length===1&&(o=o[0])),e[i]=o}return e.duration=parseFloat(e.duration),e.delay=parseFloat(e.delay),e}function XJ(n,r){var e;return n.tweens.map(function(i){var o=YJ(i,r),a=o.value,l=lo.arr(a)?a[1]:a,t=qm(l),h=AB(r.target,n.name,t,r),f=e?e.to.original:h,p=lo.arr(a)?a[0]:f,_=qm(p)||qm(h),g=t||_;return lo.und(l)&&(l=f),o.from=oF(p,g),o.to=oF(mB(l,p),g),o.start=e?e.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=uB(o.easing,o.duration),o.isPath=lo.pth(a),o.isPathTargetInsideSVG=o.isPath&&lo.svg(r.target),o.isColor=lo.col(o.from.original),o.isColor&&(o.round=1),e=o,o})}var ND={css:function(n,r,e){return n.style[r]=e},attribute:function(n,r,e){return n.setAttribute(r,e)},object:function(n,r,e){return n[r]=e},transform:function(n,r,e,i,o){if(i.list.set(r,e),r===i.last||o){var a="";i.list.forEach(function(l,t){a+=t+"("+l+") "}),n.style.transform=a}}};function jD(n,r){var e=RD(n);e.forEach(function(i){for(var o in r){var a=SC(r[o],i),l=i.target,t=qm(a),h=AB(l,o,t,i),f=t||qm(h),p=mB(LD(a,f),h),_=pB(l,o);ND[_](l,o,p,i.transforms,!0)}})}function ZJ(n,r){var e=pB(n.target,r.name);if(e){var i=XJ(r,n),o=i[i.length-1];return{type:e,property:r.name,animatable:n,tweens:i,duration:o.end,delay:i[0].delay,endDelay:o.endDelay}}}function JJ(n,r){return B5(T5(n.map(function(e){return r.map(function(i){return ZJ(e,i)})})),function(e){return!lo.und(e)})}function UD(n,r){var e=n.length,i=function(a){return a.timelineOffset?a.timelineOffset:0},o={};return o.duration=e?Math.max.apply(Math,n.map(function(a){return i(a)+a.duration})):r.duration,o.delay=e?Math.min.apply(Math,n.map(function(a){return i(a)+a.delay})):r.delay,o.endDelay=e?o.duration-Math.max.apply(Math,n.map(function(a){return i(a)+a.duration-a.endDelay})):r.endDelay,o}var aF=0;function eee(n){var r=wC(ED,n),e=wC(cB,n),i=qJ(e,n),o=RD(n.targets),a=JJ(o,i),l=UD(a,e),t=aF;return aF++,I5(r,{id:t,children:[],animatables:o,animations:a,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}var _A=[],zD=function(){var n;function r(){!n&&(!lF()||!Au.suspendWhenDocumentHidden)&&_A.length>0&&(n=requestAnimationFrame(e))}function e(o){for(var a=_A.length,l=0;l<a;){var t=_A[l];t.paused?(_A.splice(l,1),a--):(t.tick(o),l++)}n=l>0?requestAnimationFrame(e):void 0}function i(){Au.suspendWhenDocumentHidden&&(lF()?n=cancelAnimationFrame(n):(_A.forEach(function(o){return o._onDocumentVisibility()}),zD()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),r}();function lF(){return!!document&&document.hidden}function Au(n){n===void 0&&(n={});var r=0,e=0,i=0,o,a=0,l=null;function t(B){var F=window.Promise&&new Promise(function(O){return l=O});return B.finished=F,F}var h=eee(n);t(h);function f(){var B=h.direction;B!=="alternate"&&(h.direction=B!=="normal"?"normal":"reverse"),h.reversed=!h.reversed,o.forEach(function(F){return F.reversed=h.reversed})}function p(B){return h.reversed?h.duration-B:B}function _(){r=0,e=p(h.currentTime)*(1/Au.speed)}function g(B,F){F&&F.seek(B-F.timelineOffset)}function m(B){if(h.reversePlayback)for(var O=a;O--;)g(B,o[O]);else for(var F=0;F<a;F++)g(B,o[F])}function b(B){for(var F=0,O=h.animations,V=O.length;F<V;){var X=O[F],Q=X.animatable,ee=X.tweens,ne=ee.length-1,Ae=ee[ne];ne&&(Ae=B5(ee,function(pe){return B<pe.end})[0]||Ae);for(var fe=fm(B-Ae.start-Ae.delay,0,Ae.duration)/Ae.duration,ce=isNaN(fe)?1:Ae.easing(fe),G=Ae.to.strings,Z=Ae.round,z=[],k=Ae.to.numbers.length,R=void 0,N=0;N<k;N++){var U=void 0,Y=Ae.to.numbers[N],de=Ae.from.numbers[N]||0;Ae.isPath?U=WJ(Ae.value,ce*Y,Ae.isPathTargetInsideSVG):U=de+ce*(Y-de),Z&&(Ae.isColor&&N>2||(U=Math.round(U*Z)/Z)),z.push(U)}var J=G.length;if(!J)R=z[0];else{R=G[0];for(var xe=0;xe<J;xe++){G[xe];var Te=G[xe+1],Ue=z[xe];isNaN(Ue)||(Te?R+=Ue+Te:R+=Ue+" ")}}ND[X.type](Q.target,X.property,R,Q.transforms),X.currentValue=R,F++}}function x(B){h[B]&&!h.passThrough&&h[B](h)}function v(){h.remaining&&h.remaining!==!0&&h.remaining--}function S(B){var F=h.duration,O=h.delay,V=F-h.endDelay,X=p(B);h.progress=fm(X/F*100,0,100),h.reversePlayback=X<h.currentTime,o&&m(X),!h.began&&h.currentTime>0&&(h.began=!0,x("begin")),!h.loopBegan&&h.currentTime>0&&(h.loopBegan=!0,x("loopBegin")),X<=O&&h.currentTime!==0&&b(0),(X>=V&&h.currentTime!==F||!F)&&b(F),X>O&&X<V?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,x("changeBegin")),x("change"),b(X)):h.changeBegan&&(h.changeCompleted=!0,h.changeBegan=!1,x("changeComplete")),h.currentTime=fm(X,0,F),h.began&&x("update"),B>=F&&(e=0,v(),h.remaining?(r=i,x("loopComplete"),h.loopBegan=!1,h.direction==="alternate"&&f()):(h.paused=!0,h.completed||(h.completed=!0,x("loopComplete"),x("complete"),!h.passThrough&&"Promise"in window&&(l(),t(h)))))}return h.reset=function(){var B=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.loopBegan=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed=B==="reverse",h.remaining=h.loop,o=h.children,a=o.length;for(var F=a;F--;)h.children[F].reset();(h.reversed&&h.loop!==!0||B==="alternate"&&h.loop===1)&&h.remaining++,b(h.reversed?h.duration:0)},h._onDocumentVisibility=_,h.set=function(B,F){return jD(B,F),h},h.tick=function(B){i=B,r||(r=i),S((i+(e-r))*Au.speed)},h.seek=function(B){S(p(B))},h.pause=function(){h.paused=!0,_()},h.play=function(){h.paused&&(h.completed&&h.reset(),h.paused=!1,_A.push(h),_(),zD())},h.reverse=function(){f(),h.completed=!h.reversed,_()},h.restart=function(){h.reset(),h.play()},h.remove=function(B){var F=yB(B);HD(F,h)},h.reset(),h.autoplay&&h.play(),h}function cF(n,r){for(var e=r.length;e--;)hB(n,r[e].animatable.target)&&r.splice(e,1)}function HD(n,r){var e=r.animations,i=r.children;cF(n,e);for(var o=i.length;o--;){var a=i[o],l=a.animations;cF(n,l),!l.length&&!a.children.length&&i.splice(o,1)}!e.length&&!i.length&&r.pause()}function tee(n){for(var r=yB(n),e=_A.length;e--;){var i=_A[e];HD(r,i)}}function ree(n,r){r===void 0&&(r={});var e=r.direction||"normal",i=r.easing?uB(r.easing):null,o=r.grid,a=r.axis,l=r.from||0,t=l==="first",h=l==="center",f=l==="last",p=lo.arr(n),_=parseFloat(p?n[0]:n),g=p?parseFloat(n[1]):0,m=qm(p?n[1]:n)||0,b=r.start||0+(p?_:0),x=[],v=0;return function(S,B,F){if(t&&(l=0),h&&(l=(F-1)/2),f&&(l=F-1),!x.length){for(var O=0;O<F;O++){if(!o)x.push(Math.abs(l-O));else{var V=h?(o[0]-1)/2:l%o[0],X=h?(o[1]-1)/2:Math.floor(l/o[0]),Q=O%o[0],ee=Math.floor(O/o[0]),ne=V-Q,Ae=X-ee,fe=Math.sqrt(ne*ne+Ae*Ae);a==="x"&&(fe=-ne),a==="y"&&(fe=-Ae),x.push(fe)}v=Math.max.apply(Math,x)}i&&(x=x.map(function(G){return i(G/v)*v})),e==="reverse"&&(x=x.map(function(G){return a?G<0?G*-1:-G:Math.abs(v-G)}))}var ce=p?(g-_)/v:_;return b+ce*(Math.round(x[B]*100)/100)+m}}function nee(n){n===void 0&&(n={});var r=Au(n);return r.duration=0,r.add=function(e,i){var o=_A.indexOf(r),a=r.children;o>-1&&_A.splice(o,1);function l(g){g.passThrough=!0}for(var t=0;t<a.length;t++)l(a[t]);var h=I5(e,wC(cB,n));h.targets=h.targets||n.targets;var f=r.duration;h.autoplay=!1,h.direction=r.direction,h.timelineOffset=lo.und(i)?f:mB(i,f),l(r),r.seek(h.timelineOffset);var p=Au(h);l(p),a.push(p);var _=UD(a,n);return r.delay=_.delay,r.endDelay=_.endDelay,r.duration=_.duration,r.seek(0),r.reset(),r.autoplay&&r.play(),r},r}Au.version="3.2.1";Au.speed=1;Au.suspendWhenDocumentHidden=!0;Au.running=_A;Au.remove=tee;Au.get=AB;Au.set=jD;Au.convertPx=dB;Au.path=GJ;Au.setDashoffset=QJ;Au.stagger=ree;Au.timeline=nee;Au.easing=uB;Au.penner=ID;Au.random=function(n,r){return Math.floor(Math.random()*(r-n+1))+n};function Ox(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W4={exports:{}};/*! ExcelJS 19-10-2023 */var uF;function iee(){return uF||(uF=1,function(n,r){(function(e){n.exports=e()})(function(){return function e(i,o,a){function l(f,p){if(!o[f]){if(!i[f]){var _=typeof Ox=="function"&&Ox;if(!p&&_)return _(f,!0);if(t)return t(f,!0);var g=new Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g}var m=o[f]={exports:{}};i[f][0].call(m.exports,function(b){return l(i[f][1][b]||b)},m,m.exports,e,i,o,a)}return o[f].exports}for(var t=typeof Ox=="function"&&Ox,h=0;h<a.length;h++)l(a[h]);return l}({1:[function(e,i,o){const a=e("fs"),l=e("fast-csv"),t=e("dayjs/plugin/customParseFormat"),h=e("dayjs/plugin/utc"),f=e("dayjs").extend(t).extend(h),p=e("../utils/stream-buf"),{fs:{exists:_}}=e("../utils/utils"),g={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};i.exports=class{constructor(m){this.workbook=m,this.worksheet=null}async readFile(m,b){if(b=b||{},!await _(m))throw new Error("File not found: "+m);const x=a.createReadStream(m),v=await this.read(x,b);return x.close(),v}read(m,b){return b=b||{},new Promise((x,v)=>{const S=this.workbook.addWorksheet(b.sheetName),B=b.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],F=b.map||function(V){if(V==="")return null;const X=Number(V);if(!Number.isNaN(X)&&X!==1/0)return X;const Q=B.reduce((ne,Ae)=>{if(ne)return ne;const fe=f(V,Ae,!0);return fe.isValid()?fe:null},null);if(Q)return new Date(Q.valueOf());const ee=g[V];return ee!==void 0?ee:V},O=l.parse(b.parserOptions).on("data",V=>{S.addRow(V.map(F))}).on("end",()=>{O.emit("worksheet",S)});O.on("worksheet",x).on("error",v),m.pipe(O)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(m,b){return new Promise((x,v)=>{b=b||{};const S=this.workbook.getWorksheet(b.sheetName||b.sheetId),B=l.format(b.formatterOptions);m.on("finish",()=>{x()}),B.on("error",v),B.pipe(m);const{dateFormat:F,dateUTC:O}=b,V=b.map||(ee=>{if(ee){if(ee.text||ee.hyperlink)return ee.hyperlink||ee.text||"";if(ee.formula||ee.result)return ee.result||"";if(ee instanceof Date)return F?O?f.utc(ee).format(F):f(ee).format(F):O?f.utc(ee).format():f(ee).format();if(ee.error)return ee.error;if(typeof ee=="object")return JSON.stringify(ee)}return ee}),X=b.includeEmptyRows===void 0||b.includeEmptyRows;let Q=1;S&&S.eachRow((ee,ne)=>{if(X)for(;Q++<ne-1;)B.write([]);const{values:Ae}=ee;Ae.shift(),B.write(Ae.map(V)),Q=ne}),B.end()})}writeFile(m,b){const x={encoding:(b=b||{}).encoding||"utf8"},v=a.createWriteStream(m,x);return this.write(v,b)}async writeBuffer(m){const b=new p;return await this.write(b,m),b.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(e,i,o){const a=e("../utils/col-cache");class l{constructor(h,f){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=h,f)if(typeof f=="string"){const _=a.decodeAddress(f);this.nativeCol=_.col+p,this.nativeColOff=0,this.nativeRow=_.row+p,this.nativeRowOff=0}else f.nativeCol!==void 0?(this.nativeCol=f.nativeCol||0,this.nativeColOff=f.nativeColOff||0,this.nativeRow=f.nativeRow||0,this.nativeRowOff=f.nativeRowOff||0):f.col!==void 0?(this.col=f.col+p,this.row=f.row+p):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(h){return h instanceof l||h==null?h:new l(h)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(h){this.nativeCol=Math.floor(h),this.nativeColOff=Math.floor((h-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(h){this.nativeRow=Math.floor(h),this.nativeRowOff=Math.floor((h-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(h){this.nativeCol=h.nativeCol,this.nativeColOff=h.nativeColOff,this.nativeRow=h.nativeRow,this.nativeRowOff=h.nativeRowOff}}i.exports=l},{"../utils/col-cache":19}],3:[function(e,i,o){const a=e("../utils/col-cache"),l=e("../utils/under-dash"),t=e("./enums"),{slideFormula:h}=e("../utils/shared-formula"),f=e("./note");class p{constructor(m,b,x){if(!m||!b)throw new Error("A Cell needs a Row");this._row=m,this._column=b,a.validateAddress(x),this._address=x,this._value=_.create(p.Types.Null,this),this.style=this._mergeStyle(m.style,b.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(m){this.style.numFmt=m}get font(){return this.style.font}set font(m){this.style.font=m}get alignment(){return this.style.alignment}set alignment(m){this.style.alignment=m}get border(){return this.style.border}set border(m){this.style.border=m}get fill(){return this.style.fill}set fill(m){this.style.fill=m}get protection(){return this.style.protection}set protection(m){this.style.protection=m}_mergeStyle(m,b,x){const v=m&&m.numFmt||b&&b.numFmt;v&&(x.numFmt=v);const S=m&&m.font||b&&b.font;S&&(x.font=S);const B=m&&m.alignment||b&&b.alignment;B&&(x.alignment=B);const F=m&&m.border||b&&b.border;F&&(x.border=F);const O=m&&m.fill||b&&b.fill;O&&(x.fill=O);const V=m&&m.protection||b&&b.protection;return V&&(x.protection=V),x}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===p.Types.Merge}merge(m,b){this._value.release(),this._value=_.create(p.Types.Merge,this,m),b||(this.style=m.style)}unmerge(){this.type===p.Types.Merge&&(this._value.release(),this._value=_.create(p.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(m){return this._value.type===p.Types.Merge&&this._value.isMergedTo(m)}get master(){return this.type===p.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===p.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(m){this.type!==p.Types.Merge?(this._value.release(),this._value=_.create(_.getType(m),this,m)):this._value.master.value=m}get note(){return this._comment&&this._comment.note}set note(m){this._comment=new f(m)}get text(){return this._value.toString()}get html(){return l.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(m){this.type===p.Types.String&&(this._value=_.create(p.Types.Hyperlink,this,{text:this._value.value,hyperlink:m}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:m}=this._row;return{sheetName:m.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(m){this.names=[m]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(m){const{definedNames:b}=this.workbook;b.removeAllNames(this.fullAddress),m.forEach(x=>{b.addEx(this.fullAddress,x)})}addName(m){this.workbook.definedNames.addEx(this.fullAddress,m)}removeName(m){this.workbook.definedNames.removeEx(this.fullAddress,m)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(m){this._dataValidations.add(this.address,m)}get model(){const{model:m}=this._value;return m.style=this.style,this._comment&&(m.comment=this._comment.model),m}set model(m){if(this._value.release(),this._value=_.create(m.type,this),this._value.model=m,m.comment)switch(m.comment.type){case"note":this._comment=f.fromModel(m.comment)}m.style?this.style=m.style:this.style={}}}p.Types=t.ValueType;const _={getType:g=>g==null?p.Types.Null:g instanceof String||typeof g=="string"?p.Types.String:typeof g=="number"?p.Types.Number:typeof g=="boolean"?p.Types.Boolean:g instanceof Date?p.Types.Date:g.text&&g.hyperlink?p.Types.Hyperlink:g.formula||g.sharedFormula?p.Types.Formula:g.richText?p.Types.RichText:g.sharedString?p.Types.SharedString:g.error?p.Types.Error:p.Types.JSON,types:[{t:p.Types.Null,f:class{constructor(g){this.model={address:g.address,type:p.Types.Null}}get value(){return null}set value(g){}get type(){return p.Types.Null}get effectiveType(){return p.Types.Null}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return""}release(){}toString(){return""}}},{t:p.Types.Number,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.Number,value:m}}get value(){return this.model.value}set value(g){this.model.value=g}get type(){return p.Types.Number}get effectiveType(){return p.Types.Number}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:p.Types.String,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.String,value:m}}get value(){return this.model.value}set value(g){this.model.value=g}get type(){return p.Types.String}get effectiveType(){return p.Types.String}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:p.Types.Date,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.Date,value:m}}get value(){return this.model.value}set value(g){this.model.value=g}get type(){return p.Types.Date}get effectiveType(){return p.Types.Date}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:p.Types.Hyperlink,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.Hyperlink,text:m?m.text:void 0,hyperlink:m?m.hyperlink:void 0},m&&m.tooltip&&(this.model.tooltip=m.tooltip)}get value(){const g={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(g.tooltip=this.model.tooltip),g}set value(g){this.model={text:g.text,hyperlink:g.hyperlink},g.tooltip&&(this.model.tooltip=g.tooltip)}get text(){return this.model.text}set text(g){this.model.text=g}get hyperlink(){return this.model.hyperlink}set hyperlink(g){this.model.hyperlink=g}get type(){return p.Types.Hyperlink}get effectiveType(){return p.Types.Hyperlink}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:p.Types.Formula,f:class{constructor(g,m){this.cell=g,this.model={address:g.address,type:p.Types.Formula,shareType:m?m.shareType:void 0,ref:m?m.ref:void 0,formula:m?m.formula:void 0,sharedFormula:m?m.sharedFormula:void 0,result:m?m.result:void 0}}_copyModel(g){const m={},b=x=>{const v=g[x];v&&(m[x]=v)};return b("formula"),b("result"),b("ref"),b("shareType"),b("sharedFormula"),m}get value(){return this._copyModel(this.model)}set value(g){this.model=this._copyModel(g)}validate(g){switch(_.getType(g)){case p.Types.Null:case p.Types.String:case p.Types.Number:case p.Types.Date:break;case p.Types.Hyperlink:case p.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(g){this.model.formula=g}get formulaType(){return this.model.formula?t.FormulaType.Master:this.model.sharedFormula?t.FormulaType.Shared:t.FormulaType.None}get result(){return this.model.result}set result(g){this.model.result=g}get type(){return p.Types.Formula}get effectiveType(){const g=this.model.result;return g==null?t.ValueType.Null:g instanceof String||typeof g=="string"?t.ValueType.String:typeof g=="number"?t.ValueType.Number:g instanceof Date?t.ValueType.Date:g.text&&g.hyperlink?t.ValueType.Hyperlink:g.formula?t.ValueType.Formula:t.ValueType.Null}get address(){return this.model.address}set address(g){this.model.address=g}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:g}=this.cell,m=g.findCell(this.model.sharedFormula);this._translatedFormula=m&&h(m.formula,m.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:p.Types.Merge,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.Merge,master:m?m.address:void 0},this._master=m,m&&m.addMergeRef()}get value(){return this._master.value}set value(g){g instanceof p?(this._master&&this._master.releaseMergeRef(),g.addMergeRef(),this._master=g):this._master.value=g}isMergedTo(g){return g===this._master}get master(){return this._master}get type(){return p.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:p.Types.JSON,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.String,value:JSON.stringify(m),rawValue:m}}get value(){return this.model.rawValue}set value(g){this.model.rawValue=g,this.model.value=JSON.stringify(g)}get type(){return p.Types.String}get effectiveType(){return p.Types.String}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:p.Types.SharedString,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.SharedString,value:m}}get value(){return this.model.value}set value(g){this.model.value=g}get type(){return p.Types.SharedString}get effectiveType(){return p.Types.SharedString}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:p.Types.RichText,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.String,value:m}}get value(){return this.model.value}set value(g){this.model.value=g}toString(){return this.model.value.richText.map(g=>g.text).join("")}get type(){return p.Types.RichText}get effectiveType(){return p.Types.RichText}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:p.Types.Boolean,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.Boolean,value:m}}get value(){return this.model.value}set value(g){this.model.value=g}get type(){return p.Types.Boolean}get effectiveType(){return p.Types.Boolean}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:p.Types.Error,f:class{constructor(g,m){this.model={address:g.address,type:p.Types.Error,value:m}}get value(){return this.model.value}set value(g){this.model.value=g}get type(){return p.Types.Error}get effectiveType(){return p.Types.Error}get address(){return this.model.address}set address(g){this.model.address=g}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((g,m)=>(g[m.t]=m.f,g),[]),create(g,m,b){const x=this.types[g];if(!x)throw new Error("Could not create Value of type "+g);return new x(m,b)}};i.exports=p},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(e,i,o){const a=e("../utils/under-dash"),l=e("./enums"),t=e("../utils/col-cache");class h{constructor(p,_,g){this._worksheet=p,this._number=_,g!==!1&&(this.defn=g)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return t.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(p){p?(this.key=p.key,this.width=p.width!==void 0?p.width:9,this.outlineLevel=p.outlineLevel,p.style?this.style=p.style:this.style={},this.header=p.header,this._hidden=!!p.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(p){p!==void 0?(this._header=p,this.headers.forEach((_,g)=>{this._worksheet.getCell(g+1,this.number).value=_})):this._header=void 0}get key(){return this._key}set key(p){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=p,p&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(p){this._hidden=p}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(p){this._outlineLevel=p}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(p){return this.width===p.width&&this.hidden===p.hidden&&this.outlineLevel===p.outlineLevel&&a.isEqual(this.style,p.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const p=this.style;return!p||!(p.font||p.numFmt||p.alignment||p.border||p.fill||p.protection)}get headerCount(){return this.headers.length}eachCell(p,_){const g=this.number;_||(_=p,p=null),this._worksheet.eachRow(p,(m,b)=>{_(m.getCell(g),b)})}get values(){const p=[];return this.eachCell((_,g)=>{_&&_.type!==l.ValueType.Null&&(p[g]=_.value)}),p}set values(p){if(!p)return;const _=this.number;let g=0;p.hasOwnProperty("0")&&(g=1),p.forEach((m,b)=>{this._worksheet.getCell(b+g,_).value=m})}_applyStyle(p,_){return this.style[p]=_,this.eachCell(g=>{g[p]=_}),_}get numFmt(){return this.style.numFmt}set numFmt(p){this._applyStyle("numFmt",p)}get font(){return this.style.font}set font(p){this._applyStyle("font",p)}get alignment(){return this.style.alignment}set alignment(p){this._applyStyle("alignment",p)}get protection(){return this.style.protection}set protection(p){this._applyStyle("protection",p)}get border(){return this.style.border}set border(p){this._applyStyle("border",p)}get fill(){return this.style.fill}set fill(p){this._applyStyle("fill",p)}static toModel(p){const _=[];let g=null;return p&&p.forEach((m,b)=>{m.isDefault?g&&(g=null):g&&m.equivalentTo(g)?g.max=b+1:(g={min:b+1,max:b+1,width:m.width!==void 0?m.width:9,style:m.style,isCustomWidth:m.isCustomWidth,hidden:m.hidden,outlineLevel:m.outlineLevel,collapsed:m.collapsed},_.push(g))}),_.length?_:void 0}static fromModel(p,_){const g=[];let m=1,b=0;for(_=(_=_||[]).sort(function(x,v){return x.min-v.min});b<_.length;){const x=_[b++];for(;m<x.min;)g.push(new h(p,m++));for(;m<=x.max;)g.push(new h(p,m++,x))}return g.length?g:null}}i.exports=h},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(e,i,o){i.exports=class{constructor(a){this.model=a||{}}add(a,l){return this.model[a]=l}find(a){return this.model[a]}remove(a){this.model[a]=void 0}}},{}],6:[function(e,i,o){const a=e("../utils/under-dash"),l=e("../utils/col-cache"),t=e("../utils/cell-matrix"),h=e("./range"),f=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;i.exports=class{constructor(){this.matrixMap={}}getMatrix(p){return this.matrixMap[p]||(this.matrixMap[p]=new t)}add(p,_){const g=l.decodeEx(p);this.addEx(g,_)}addEx(p,_){const g=this.getMatrix(_);if(p.top)for(let m=p.left;m<=p.right;m++)for(let b=p.top;b<=p.bottom;b++){const x={sheetName:p.sheetName,address:l.n2l(m)+b,row:b,col:m};g.addCellEx(x)}else g.addCellEx(p)}remove(p,_){const g=l.decodeEx(p);this.removeEx(g,_)}removeEx(p,_){this.getMatrix(_).removeCellEx(p)}removeAllNames(p){a.each(this.matrixMap,_=>{_.removeCellEx(p)})}forEach(p){a.each(this.matrixMap,(_,g)=>{_.forEach(m=>{p(g,m)})})}getNames(p){return this.getNamesEx(l.decodeEx(p))}getNamesEx(p){return a.map(this.matrixMap,(_,g)=>_.findCellEx(p)&&g).filter(Boolean)}_explore(p,_){_.mark=!1;const{sheetName:g}=_,m=new h(_.row,_.col,_.row,_.col,g);let b,x;function v(B,F){const O=p.findCellAt(g,B,_.col);return!(!O||!O.mark)&&(m[F]=B,O.mark=!1,!0)}for(x=_.row-1;v(x,"top");x--);for(x=_.row+1;v(x,"bottom");x++);function S(B,F){const O=[];for(x=m.top;x<=m.bottom;x++){const V=p.findCellAt(g,x,B);if(!V||!V.mark)return!1;O.push(V)}m[F]=B;for(let V=0;V<O.length;V++)O[V].mark=!1;return!0}for(b=_.col-1;S(b,"left");b--);for(b=_.col+1;S(b,"right");b++);return m}getRanges(p,_){return(_=_||this.matrixMap[p])?(_.forEach(g=>{g.mark=!0}),{name:p,ranges:_.map(g=>g.mark&&this._explore(_,g)).filter(Boolean).map(g=>g.$shortRange)}):{name:p,ranges:[]}}normaliseMatrix(p,_){p.forEachInSheet(_,(g,m,b)=>{g&&(g.row===m&&g.col===b||(g.row=m,g.col=b,g.address=l.n2l(b)+m))})}spliceRows(p,_,g,m){a.each(this.matrixMap,b=>{b.spliceRows(p,_,g,m),this.normaliseMatrix(b,p)})}spliceColumns(p,_,g,m){a.each(this.matrixMap,b=>{b.spliceColumns(p,_,g,m),this.normaliseMatrix(b,p)})}get model(){return a.map(this.matrixMap,(p,_)=>this.getRanges(_,p)).filter(p=>p.ranges.length)}set model(p){const _=this.matrixMap={};p.forEach(g=>{const m=_[g.name]=new t;g.ranges.forEach(b=>{f.test(b.split("!").pop()||"")&&m.addCell(b)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(e,i,o){i.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(e,i,o){const a=e("../utils/col-cache"),l=e("./anchor");i.exports=class{constructor(t,h){this.worksheet=t,this.model=h}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(t){let{type:h,imageId:f,range:p,hyperlinks:_}=t;if(this.type=h,this.imageId=f,h==="image")if(typeof p=="string"){const g=a.decode(p);this.range={tl:new l(this.worksheet,{col:g.left,row:g.top},-1),br:new l(this.worksheet,{col:g.right,row:g.bottom},0),editAs:"oneCell"}}else this.range={tl:new l(this.worksheet,p.tl,0),br:p.br&&new l(this.worksheet,p.br,0),ext:p.ext,editAs:p.editAs,hyperlinks:_||p.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(e,i,o){const a=e("../utils/under-dash");class l{constructor(h){this.note=h}get model(){let h=null;switch(typeof this.note){case"string":h={type:"note",note:{texts:[{text:this.note}]}};break;default:h={type:"note",note:this.note}}return a.deepMerge({},l.DEFAULT_CONFIGS,h)}set model(h){const{note:f}=h,{texts:p}=f;p.length===1&&Object.keys(p[0]).length===1?this.note=p[0].text:this.note=f}static fromModel(h){const f=new l;return f.model=h,f}}l.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},i.exports=l},{"../utils/under-dash":26}],10:[function(e,i,o){const a=e("../utils/col-cache");class l{constructor(){this.decode(arguments)}setTLBR(h,f,p,_,g){if(arguments.length<4){const m=a.decodeAddress(h),b=a.decodeAddress(f);this.model={top:Math.min(m.row,b.row),left:Math.min(m.col,b.col),bottom:Math.max(m.row,b.row),right:Math.max(m.col,b.col),sheetName:p},this.setTLBR(m.row,m.col,b.row,b.col,g)}else this.model={top:Math.min(h,p),left:Math.min(f,_),bottom:Math.max(h,p),right:Math.max(f,_),sheetName:g}}decode(h){switch(h.length){case 5:this.setTLBR(h[0],h[1],h[2],h[3],h[4]);break;case 4:this.setTLBR(h[0],h[1],h[2],h[3]);break;case 3:this.setTLBR(h[0],h[1],h[2]);break;case 2:this.setTLBR(h[0],h[1]);break;case 1:{const f=h[0];if(f instanceof l)this.model={top:f.model.top,left:f.model.left,bottom:f.model.bottom,right:f.model.right,sheetName:f.sheetName};else if(f instanceof Array)this.decode(f);else if(f.top&&f.left&&f.bottom&&f.right)this.model={top:f.top,left:f.left,bottom:f.bottom,right:f.right,sheetName:f.sheetName};else{const p=a.decodeEx(f);p.top?this.model={top:p.top,left:p.left,bottom:p.bottom,right:p.right,sheetName:p.sheetName}:this.model={top:p.row,left:p.col,bottom:p.row,right:p.col,sheetName:p.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+h.length)}}get top(){return this.model.top||1}set top(h){this.model.top=h}get left(){return this.model.left||1}set left(h){this.model.left=h}get bottom(){return this.model.bottom||1}set bottom(h){this.model.bottom=h}get right(){return this.model.right||1}set right(h){this.model.right=h}get sheetName(){return this.model.sheetName}set sheetName(h){this.model.sheetName=h}get _serialisedSheetName(){const{sheetName:h}=this.model;return h?/^[a-zA-Z0-9]*$/.test(h)?h+"!":`'${h}'!`:""}expand(h,f,p,_){(!this.model.top||h<this.top)&&(this.top=h),(!this.model.left||f<this.left)&&(this.left=f),(!this.model.bottom||p>this.bottom)&&(this.bottom=p),(!this.model.right||_>this.right)&&(this.right=_)}expandRow(h){if(h){const{dimensions:f,number:p}=h;f&&this.expand(p,f.min,p,f.max)}}expandToAddress(h){const f=a.decodeEx(h);this.expand(f.row,f.col,f.row,f.col)}get tl(){return a.n2l(this.left)+this.top}get $t$l(){return`$${a.n2l(this.left)}$${this.top}`}get br(){return a.n2l(this.right)+this.bottom}get $b$r(){return`$${a.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(h){return(!h.sheetName||!this.sheetName||h.sheetName===this.sheetName)&&!(h.bottom<this.top)&&!(h.top>this.bottom)&&!(h.right<this.left)&&!(h.left>this.right)}contains(h){const f=a.decodeEx(h);return this.containsEx(f)}containsEx(h){return(!h.sheetName||!this.sheetName||h.sheetName===this.sheetName)&&h.row>=this.top&&h.row<=this.bottom&&h.col>=this.left&&h.col<=this.right}forEachAddress(h){for(let f=this.left;f<=this.right;f++)for(let p=this.top;p<=this.bottom;p++)h(a.encodeAddress(p,f),p,f)}}i.exports=l},{"../utils/col-cache":19}],11:[function(e,i,o){const a=e("../utils/under-dash"),l=e("./enums"),t=e("../utils/col-cache"),h=e("./cell");i.exports=class{constructor(f,p){this._worksheet=f,this._number=p,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(f){return this._cells[f-1]}getCellEx(f){let p=this._cells[f.col-1];if(!p){const _=this._worksheet.getColumn(f.col);p=new h(this,_,f.address),this._cells[f.col-1]=p}return p}getCell(f){if(typeof f=="string"){const p=this._worksheet.getColumnKey(f);f=p?p.number:t.l2n(f)}return this._cells[f-1]||this.getCellEx({address:t.encodeAddress(this._number,f),row:this._number,col:f})}splice(f,p){const _=f+p;for(var g=arguments.length,m=new Array(g>2?g-2:0),b=2;b<g;b++)m[b-2]=arguments[b];const x=m.length-p,v=this._cells.length;let S,B,F;if(x<0)for(S=f+m.length;S<=v;S++)F=this._cells[S-1],B=this._cells[S-x-1],B?(F=this.getCell(S),F.value=B.value,F.style=B.style,F._comment=B._comment):F&&(F.value=null,F.style={},F._comment=void 0);else if(x>0)for(S=v;S>=_;S--)B=this._cells[S-1],B?(F=this.getCell(S+x),F.value=B.value,F.style=B.style,F._comment=B._comment):this._cells[S+x-1]=void 0;for(S=0;S<m.length;S++)F=this.getCell(f+S),F.value=m[S],F.style={},F._comment=void 0}eachCell(f,p){if(p||(p=f,f=null),f&&f.includeEmpty){const _=this._cells.length;for(let g=1;g<=_;g++)p(this.getCell(g),g)}else this._cells.forEach((_,g)=>{_&&_.type!==l.ValueType.Null&&p(_,g+1)})}addPageBreak(f,p){const _=this._worksheet,g=Math.max(0,f-1)||0,m=Math.max(0,p-1)||16838,b={id:this._number,max:m,man:1};g&&(b.min=g),_.rowBreaks.push(b)}get values(){const f=[];return this._cells.forEach(p=>{p&&p.type!==l.ValueType.Null&&(f[p.col]=p.value)}),f}set values(f){if(this._cells=[],f)if(f instanceof Array){let p=0;f.hasOwnProperty("0")&&(p=1),f.forEach((_,g)=>{_!==void 0&&(this.getCellEx({address:t.encodeAddress(this._number,g+p),row:this._number,col:g+p}).value=_)})}else this._worksheet.eachColumnKey((p,_)=>{f[_]!==void 0&&(this.getCellEx({address:t.encodeAddress(this._number,p.number),row:this._number,col:p.number}).value=f[_])})}get hasValues(){return a.some(this._cells,f=>f&&f.type!==l.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let f=0;return this.eachCell(()=>{f++}),f}get dimensions(){let f=0,p=0;return this._cells.forEach(_=>{_&&_.type!==l.ValueType.Null&&((!f||f>_.col)&&(f=_.col),p<_.col&&(p=_.col))}),f>0?{min:f,max:p}:null}_applyStyle(f,p){return this.style[f]=p,this._cells.forEach(_=>{_&&(_[f]=p)}),p}get numFmt(){return this.style.numFmt}set numFmt(f){this._applyStyle("numFmt",f)}get font(){return this.style.font}set font(f){this._applyStyle("font",f)}get alignment(){return this.style.alignment}set alignment(f){this._applyStyle("alignment",f)}get protection(){return this.style.protection}set protection(f){this._applyStyle("protection",f)}get border(){return this.style.border}set border(f){this._applyStyle("border",f)}get fill(){return this.style.fill}set fill(f){this._applyStyle("fill",f)}get hidden(){return!!this._hidden}set hidden(f){this._hidden=f}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(f){this._outlineLevel=f}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const f=[];let p=0,_=0;return this._cells.forEach(g=>{if(g){const m=g.model;m&&((!p||p>g.col)&&(p=g.col),_<g.col&&(_=g.col),f.push(m))}}),this.height||f.length?{cells:f,number:this.number,min:p,max:_,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(f){if(f.number!==this._number)throw new Error("Invalid row number in model");let p;this._cells=[],f.cells.forEach(_=>{switch(_.type){case h.Types.Merge:break;default:{let g;if(_.address)g=t.decodeAddress(_.address);else if(p){const{row:m}=p,b=p.col+1;g={row:m,col:b,address:t.encodeAddress(m,b),$col$row:`$${t.n2l(b)}$${m}`}}p=g,this.getCellEx(g).model=_;break}}}),f.height?this.height=f.height:delete this.height,this.hidden=f.hidden,this.outlineLevel=f.outlineLevel||0,this.style=f.style&&JSON.parse(JSON.stringify(f.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(e,i,o){const a=e("../utils/col-cache");class l{constructor(h,f,p){this.table=h,this.column=f,this.index=p}_set(h,f){this.table.cacheState(),this.column[h]=f}get name(){return this.column.name}set name(h){this._set("name",h)}get filterButton(){return this.column.filterButton}set filterButton(h){this.column.filterButton=h}get style(){return this.column.style}set style(h){this.column.style=h}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(h){this._set("totalsRowLabel",h)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(h){this._set("totalsRowFunction",h)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(h){this._set("totalsRowResult",h)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(h){this._set("totalsRowFormula",h)}}i.exports=class{constructor(t,h){this.worksheet=t,h&&(this.table=h,this.validate(),this.store())}getFormula(t){switch(t.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${t.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${t.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${t.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${t.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${t.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${t.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${t.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${t.name}])`;case"custom":return t.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+t.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:t}=this,h=(x,v,S)=>{x[v]===void 0&&(x[v]=S)};h(t,"headerRow",!0),h(t,"totalsRow",!1),h(t,"style",{}),h(t.style,"theme","TableStyleMedium2"),h(t.style,"showFirstColumn",!1),h(t.style,"showLastColumn",!1),h(t.style,"showRowStripes",!1),h(t.style,"showColumnStripes",!1);const f=(x,v)=>{if(!x)throw new Error(v)};f(t.ref,"Table must have ref"),f(t.columns,"Table must have column definitions"),f(t.rows,"Table must have row definitions"),t.tl=a.decodeAddress(t.ref);const{row:p,col:_}=t.tl;f(p>0,"Table must be on valid row"),f(_>0,"Table must be on valid col");const{width:g,filterHeight:m,tableHeight:b}=this;t.autoFilterRef=a.encode(p,_,p+m-1,_+g-1),t.tableRef=a.encode(p,_,p+b-1,_+g-1),t.columns.forEach((x,v)=>{f(x.name,`Column ${v} must have a name`),v===0?h(x,"totalsRowLabel","Total"):(h(x,"totalsRowFunction","none"),x.totalsRowFormula=this.getFormula(x))})}store(){const t=(m,b)=>{b&&Object.keys(b).forEach(x=>{m[x]=b[x]})},{worksheet:h,table:f}=this,{row:p,col:_}=f.tl;let g=0;if(f.headerRow){const m=h.getRow(p+g++);f.columns.forEach((b,x)=>{const{style:v,name:S}=b,B=m.getCell(_+x);B.value=S,t(B,v)})}if(f.rows.forEach(m=>{const b=h.getRow(p+g++);m.forEach((x,v)=>{const S=b.getCell(_+v);S.value=x,t(S,f.columns[v].style)})}),f.totalsRow){const m=h.getRow(p+g++);f.columns.forEach((b,x)=>{const v=m.getCell(_+x);if(x===0)v.value=b.totalsRowLabel;else{const S=this.getFormula(b);v.value=S?{formula:b.totalsRowFormula,result:b.totalsRowResult}:null}t(v,b.style)})}}load(t){const{table:h}=this,{row:f,col:p}=h.tl;let _=0;if(h.headerRow){const g=t.getRow(f+_++);h.columns.forEach((m,b)=>{g.getCell(p+b).value=m.name})}if(h.rows.forEach(g=>{const m=t.getRow(f+_++);g.forEach((b,x)=>{m.getCell(p+x).value=b})}),h.totalsRow){const g=t.getRow(f+_++);h.columns.forEach((m,b)=>{const x=g.getCell(p+b);b===0?x.value=m.totalsRowLabel:this.getFormula(m)&&(x.value={formula:m.totalsRowFormula,result:m.totalsRowResult})})}}get model(){return this.table}set model(t){this.table=t}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const t=a.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let h=0;h<this._cache.tableHeight;h++){const f=this.worksheet.getRow(t.row+h);for(let p=0;p<this._cache.width;p++)f.getCell(t.col+p).value=null}else{for(let h=this.tableHeight;h<this._cache.tableHeight;h++){const f=this.worksheet.getRow(t.row+h);for(let p=0;p<this._cache.width;p++)f.getCell(t.col+p).value=null}for(let h=0;h<this.tableHeight;h++){const f=this.worksheet.getRow(t.row+h);for(let p=this.width;p<this._cache.width;p++)f.getCell(t.col+p).value=null}}this.store()}addRow(t,h){this.cacheState(),h===void 0?this.table.rows.push(t):this.table.rows.splice(h,0,t)}removeRows(t){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(t,h)}getColumn(t){const h=this.table.columns[t];return new l(this,h,t)}addColumn(t,h,f){this.cacheState(),f===void 0?(this.table.columns.push(t),this.table.rows.forEach((p,_)=>{p.push(h[_])})):(this.table.columns.splice(f,0,t),this.table.rows.forEach((p,_)=>{p.splice(f,0,h[_])}))}removeColumns(t){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(t,h),this.table.rows.forEach(f=>{f.splice(t,h)})}_assign(t,h,f){this.cacheState(),t[h]=f}get ref(){return this.table.ref}set ref(t){this._assign(this.table,"ref",t)}get name(){return this.table.name}set name(t){this.table.name=t}get displayName(){return this.table.displyName||this.table.name}set displayNamename(t){this.table.displayName=t}get headerRow(){return this.table.headerRow}set headerRow(t){this._assign(this.table,"headerRow",t)}get totalsRow(){return this.table.totalsRow}set totalsRow(t){this._assign(this.table,"totalsRow",t)}get theme(){return this.table.style.name}set theme(t){this.table.style.name=t}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(t){this.table.style.showFirstColumn=t}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(t){this.table.style.showLastColumn=t}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(t){this.table.style.showRowStripes=t}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(t){this.table.style.showColumnStripes=t}}},{"../utils/col-cache":19}],13:[function(e,i,o){const a=e("./worksheet"),l=e("./defined-names"),t=e("../xlsx/xlsx"),h=e("../csv/csv");i.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new l}get xlsx(){return this._xlsx||(this._xlsx=new t(this)),this._xlsx}get csv(){return this._csv||(this._csv=new h(this)),this._csv}get nextId(){for(let f=1;f<this._worksheets.length;f++)if(!this._worksheets[f])return f;return this._worksheets.length||1}addWorksheet(f,p){const _=this.nextId;p&&(typeof p=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),p={properties:{tabColor:{argb:p}}}):(p.argb||p.theme||p.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),p={properties:{tabColor:p}}));const g=this._worksheets.reduce((x,v)=>(v&&v.orderNo)>x?v.orderNo:x,0),m=Object.assign({},p,{id:_,name:f,orderNo:g+1,workbook:this}),b=new a(m);return this._worksheets[_]=b,b}removeWorksheetEx(f){delete this._worksheets[f.id]}removeWorksheet(f){const p=this.getWorksheet(f);p&&p.destroy()}getWorksheet(f){return f===void 0?this._worksheets.find(Boolean):typeof f=="number"?this._worksheets[f]:typeof f=="string"?this._worksheets.find(p=>p&&p.name===f):void 0}get worksheets(){return this._worksheets.slice(1).sort((f,p)=>f.orderNo-p.orderNo).filter(Boolean)}eachSheet(f){this.worksheets.forEach(p=>{f(p,p.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(f){const p=this.media.length;return this.media.push(Object.assign({},f,{type:"image"})),p}getImage(f){return this.media[f]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(f=>f.model),sheets:this.worksheets.map(f=>f.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(f){this.creator=f.creator,this.lastModifiedBy=f.lastModifiedBy,this.lastPrinted=f.lastPrinted,this.created=f.created,this.modified=f.modified,this.company=f.company,this.manager=f.manager,this.title=f.title,this.subject=f.subject,this.keywords=f.keywords,this.category=f.category,this.description=f.description,this.language=f.language,this.revision=f.revision,this.contentStatus=f.contentStatus,this.properties=f.properties,this.calcProperties=f.calcProperties,this._worksheets=[],f.worksheets.forEach(p=>{const{id:_,name:g,state:m}=p,b=f.sheets&&f.sheets.findIndex(x=>x.id===_);(this._worksheets[_]=new a({id:_,name:g,orderNo:b,state:m,workbook:this})).model=p}),this._definedNames.model=f.definedNames,this.views=f.views,this._themes=f.themes,this.media=f.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(e,i,o){const a=e("../utils/under-dash"),l=e("../utils/col-cache"),t=e("./range"),h=e("./row"),f=e("./column"),p=e("./enums"),_=e("./image"),g=e("./table"),m=e("./data-validations"),b=e("../utils/encryptor"),{copyStyle:x}=e("../utils/copy-style");i.exports=class{constructor(v){v=v||{},this._workbook=v.workbook,this.id=v.id,this.orderNo=v.orderNo,this.name=v.name,this.state=v.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},v.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!v.pageSetup||!v.pageSetup.fitToWidth&&!v.pageSetup.fitToHeight||v.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},v.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},v.headerFooter),this.dataValidations=new m,this.views=v.views||[],this.autoFilter=v.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(v){if(v===void 0&&(v="sheet"+this.id),this._name!==v){if(typeof v!="string")throw new Error("The name has to be a string.");if(v==="")throw new Error("The name can't be empty.");if(v==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(v))throw new Error(`Worksheet name ${v} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(v))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+v);if(v&&v.length>31&&(console.warn(`Worksheet name ${v} exceeds 31 chars. This will be truncated`),v=v.substring(0,31)),this._workbook._worksheets.find(S=>S&&S.name.toLowerCase()===v.toLowerCase()))throw new Error("Worksheet name already exists: "+v);this._name=v}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const v=new t;return this._rows.forEach(S=>{if(S){const B=S.dimensions;B&&v.expand(S.number,B.min,S.number,B.max)}}),v}get columns(){return this._columns}set columns(v){this._headerRowCount=v.reduce((F,O)=>{const V=(O.header?1:O.headers&&O.headers.length)||0;return Math.max(F,V)},0);let S=1;const B=this._columns=[];v.forEach(F=>{const O=new f(this,S++,!1);B.push(O),O.defn=F})}getColumnKey(v){return this._keys[v]}setColumnKey(v,S){this._keys[v]=S}deleteColumnKey(v){delete this._keys[v]}eachColumnKey(v){a.each(this._keys,v)}getColumn(v){if(typeof v=="string"){const S=this._keys[v];if(S)return S;v=l.l2n(v)}if(this._columns||(this._columns=[]),v>this._columns.length){let S=this._columns.length+1;for(;S<=v;)this._columns.push(new f(this,S++))}return this._columns[v-1]}spliceColumns(v,S){const B=this._rows.length;for(var F=arguments.length,O=new Array(F>2?F-2:0),V=2;V<F;V++)O[V-2]=arguments[V];if(O.length>0)for(let ne=0;ne<B;ne++){const Ae=[v,S];O.forEach(ce=>{Ae.push(ce[ne]||null)});const fe=this.getRow(ne+1);fe.splice.apply(fe,Ae)}else this._rows.forEach(ne=>{ne&&ne.splice(v,S)});const X=O.length-S,Q=v+S,ee=this._columns.length;if(X<0)for(let ne=v+O.length;ne<=ee;ne++)this.getColumn(ne).defn=this.getColumn(ne-X).defn;else if(X>0)for(let ne=ee;ne>=Q;ne--)this.getColumn(ne+X).defn=this.getColumn(ne).defn;for(let ne=v;ne<v+O.length;ne++)this.getColumn(ne).defn=null;this.workbook.definedNames.spliceColumns(this.name,v,S,O.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let v=0;return this.eachRow(S=>{v=Math.max(v,S.cellCount)}),v}get actualColumnCount(){const v=[];let S=0;return this.eachRow(B=>{B.eachCell(F=>{let{col:O}=F;v[O]||(v[O]=!0,S++)})}),S}_commitRow(){}get _lastRowNumber(){const v=this._rows;let S=v.length;for(;S>0&&v[S-1]===void 0;)S--;return S}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(v){return this._rows[v-1]}findRows(v,S){return this._rows.slice(v-1,v-1+S)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let v=0;return this.eachRow(()=>{v++}),v}getRow(v){let S=this._rows[v-1];return S||(S=this._rows[v-1]=new h(this,v)),S}getRows(v,S){if(S<1)return;const B=[];for(let F=v;F<v+S;F++)B.push(this.getRow(F));return B}addRow(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const B=this._nextRow,F=this.getRow(B);return F.values=v,this._setStyleOption(B,S[0]==="i"?S:"n"),F}addRows(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const B=[];return v.forEach(F=>{B.push(this.addRow(F,S))}),B}insertRow(v,S){let B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(v,0,S),this._setStyleOption(v,B),this.getRow(v)}insertRows(v,S){let B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(v,0,...S),B!=="n")for(let F=0;F<S.length;F++)B[0]==="o"&&this.findRow(S.length+v+F)!==void 0?this._copyStyle(S.length+v+F,v+F,B[1]==="+"):B[0]==="i"&&this.findRow(v-1)!==void 0&&this._copyStyle(v-1,v+F,B[1]==="+");return this.getRows(v,S.length)}_setStyleOption(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";S[0]==="o"&&this.findRow(v+1)!==void 0?this._copyStyle(v+1,v,S[1]==="+"):S[0]==="i"&&this.findRow(v-1)!==void 0&&this._copyStyle(v-1,v,S[1]==="+")}_copyStyle(v,S){let B=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const F=this.getRow(v),O=this.getRow(S);O.style=x(F.style),F.eachCell({includeEmpty:B},(V,X)=>{O.getCell(X).style=x(V.style)}),O.height=F.height}duplicateRow(v,S){let B=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const F=this._rows[v-1],O=new Array(S).fill(F.values);this.spliceRows(v+1,B?0:S,...O);for(let V=0;V<S;V++){const X=this._rows[v+V];X.style=F.style,X.height=F.height,F.eachCell({includeEmpty:!0},(Q,ee)=>{X.getCell(ee).style=Q.style})}}spliceRows(v,S){const B=v+S;for(var F=arguments.length,O=new Array(F>2?F-2:0),V=2;V<F;V++)O[V-2]=arguments[V];const X=O.length,Q=X-S,ee=this._rows.length;let ne,Ae;if(Q<0)for(v===ee&&(this._rows[ee-1]=void 0),ne=B;ne<=ee;ne++)if(Ae=this._rows[ne-1],Ae){const fe=this.getRow(ne+Q);fe.values=Ae.values,fe.style=Ae.style,fe.height=Ae.height,Ae.eachCell({includeEmpty:!0},(ce,G)=>{fe.getCell(G).style=ce.style}),this._rows[ne-1]=void 0}else this._rows[ne+Q-1]=void 0;else if(Q>0)for(ne=ee;ne>=B;ne--)if(Ae=this._rows[ne-1],Ae){const fe=this.getRow(ne+Q);fe.values=Ae.values,fe.style=Ae.style,fe.height=Ae.height,Ae.eachCell({includeEmpty:!0},(ce,G)=>{if(fe.getCell(G).style=ce.style,ce._value.constructor.name==="MergeValue"){const Z=this.getRow(ce._row._number+X).getCell(G),z=ce._value._master,k=this.getRow(z._row._number+X).getCell(z._column._number);Z.merge(k)}})}else this._rows[ne+Q-1]=void 0;for(ne=0;ne<X;ne++){const fe=this.getRow(v+ne);fe.style={},fe.values=O[ne]}this.workbook.definedNames.spliceRows(this.name,v,S,X)}eachRow(v,S){if(S||(S=v,v=void 0),v&&v.includeEmpty){const B=this._rows.length;for(let F=1;F<=B;F++)S(this.getRow(F),F)}else this._rows.forEach(B=>{B&&B.hasValues&&S(B,B.number)})}getSheetValues(){const v=[];return this._rows.forEach(S=>{S&&(v[S.number]=S.values)}),v}findCell(v,S){const B=l.getAddress(v,S),F=this._rows[B.row-1];return F?F.findCell(B.col):void 0}getCell(v,S){const B=l.getAddress(v,S);return this.getRow(B.row).getCellEx(B)}mergeCells(){for(var v=arguments.length,S=new Array(v),B=0;B<v;B++)S[B]=arguments[B];const F=new t(S);this._mergeCellsInternal(F)}mergeCellsWithoutStyle(){for(var v=arguments.length,S=new Array(v),B=0;B<v;B++)S[B]=arguments[B];const F=new t(S);this._mergeCellsInternal(F,!0)}_mergeCellsInternal(v,S){a.each(this._merges,F=>{if(F.intersects(v))throw new Error("Cannot merge already merged cells")});const B=this.getCell(v.top,v.left);for(let F=v.top;F<=v.bottom;F++)for(let O=v.left;O<=v.right;O++)(F>v.top||O>v.left)&&this.getCell(F,O).merge(B,S);this._merges[B.address]=v}_unMergeMaster(v){const S=this._merges[v.address];if(S){for(let B=S.top;B<=S.bottom;B++)for(let F=S.left;F<=S.right;F++)this.getCell(B,F).unmerge();delete this._merges[v.address]}}get hasMerges(){return a.some(this._merges,Boolean)}unMergeCells(){for(var v=arguments.length,S=new Array(v),B=0;B<v;B++)S[B]=arguments[B];const F=new t(S);for(let O=F.top;O<=F.bottom;O++)for(let V=F.left;V<=F.right;V++){const X=this.findCell(O,V);X&&(X.type===p.ValueType.Merge?this._unMergeMaster(X.master):this._merges[X.address]&&this._unMergeMaster(X))}}fillFormula(v,S,B){let F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const O=l.decode(v),{top:V,left:X,bottom:Q,right:ee}=O,ne=ee-X+1,Ae=l.encodeAddress(V,X),fe=F==="shared";let ce;ce=typeof B=="function"?B:Array.isArray(B)?Array.isArray(B[0])?(Z,z)=>B[Z-V][z-X]:(Z,z)=>B[(Z-V)*ne+(z-X)]:()=>{};let G=!0;for(let Z=V;Z<=Q;Z++)for(let z=X;z<=ee;z++)G?(this.getCell(Z,z).value={shareType:F,formula:S,ref:v,result:ce(Z,z)},G=!1):this.getCell(Z,z).value=fe?{sharedFormula:Ae,result:ce(Z,z)}:ce(Z,z)}addImage(v,S){const B={type:"image",imageId:v,range:S};this._media.push(new _(this,B))}getImages(){return this._media.filter(v=>v.type==="image")}addBackgroundImage(v){const S={type:"background",imageId:v};this._media.push(new _(this,S))}getBackgroundImageId(){const v=this._media.find(S=>S.type==="background");return v&&v.imageId}protect(v,S){return new Promise(B=>{this.sheetProtection={sheet:!0},S&&"spinCount"in S&&(S.spinCount=Number.isFinite(S.spinCount)?Math.round(Math.max(0,S.spinCount)):1e5),v&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=b.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=S&&"spinCount"in S?S.spinCount:1e5,this.sheetProtection.hashValue=b.convertPasswordToHash(v,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),S&&(this.sheetProtection=Object.assign(this.sheetProtection,S),!v&&"spinCount"in S&&delete this.sheetProtection.spinCount),B()})}unprotect(){this.sheetProtection=null}addTable(v){const S=new g(this,v);return this.tables[v.name]=S,S}getTable(v){return this.tables[v]}removeTable(v){delete this.tables[v]}getTables(){return Object.values(this.tables)}addConditionalFormatting(v){this.conditionalFormattings.push(v)}removeConditionalFormatting(v){typeof v=="number"?this.conditionalFormattings.splice(v,1):this.conditionalFormattings=v instanceof Function?this.conditionalFormattings.filter(v):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(v){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=v}get model(){const v={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(F=>F.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(F=>F.model),conditionalFormattings:this.conditionalFormattings};v.cols=f.toModel(this.columns);const S=v.rows=[],B=v.dimensions=new t;return this._rows.forEach(F=>{const O=F&&F.model;O&&(B.expand(O.number,O.min,O.number,O.max),S.push(O))}),v.merges=[],a.each(this._merges,F=>{v.merges.push(F.range)}),v}_parseRows(v){this._rows=[],v.rows.forEach(S=>{const B=new h(this,S.number);this._rows[B.number-1]=B,B.model=S})}_parseMergeCells(v){a.each(v.mergeCells,S=>{this.mergeCellsWithoutStyle(S)})}set model(v){this.name=v.name,this._columns=f.fromModel(this,v.cols),this._parseRows(v),this._parseMergeCells(v),this.dataValidations=new m(v.dataValidations),this.properties=v.properties,this.pageSetup=v.pageSetup,this.headerFooter=v.headerFooter,this.views=v.views,this.autoFilter=v.autoFilter,this._media=v.media.map(S=>new _(this,S)),this.sheetProtection=v.sheetProtection,this.tables=v.tables.reduce((S,B)=>{const F=new g;return F.model=B,S[B.name]=F,S},{}),this.conditionalFormattings=v.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(e,i,o){e("core-js/modules/es.promise"),e("core-js/modules/es.promise.finally"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.values"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.async-iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.find"),e("core-js/modules/es.string.from-code-point"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.number.is-nan"),e("regenerator-runtime/runtime");const a={Workbook:e("./doc/workbook")},l=e("./doc/enums");Object.keys(l).forEach(t=>{a[t]=l[t]}),i.exports=a},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(e,i,o){const a=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");o.bufferToString=function(l){return typeof l=="string"?l:a?a.decode(l):l.toString()}},{}],17:[function(e,i,o){const a=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:l}=e("buffer");o.stringToBuffer=function(t){return typeof t!="string"?t:a?l.from(a.encode(t).buffer):l.from(t)}},{buffer:220}],18:[function(e,i,o){const a=e("./under-dash"),l=e("./col-cache");i.exports=class{constructor(t){this.template=t,this.sheets={}}addCell(t){this.addCellEx(l.decodeEx(t))}getCell(t){return this.findCellEx(l.decodeEx(t),!0)}findCell(t){return this.findCellEx(l.decodeEx(t),!1)}findCellAt(t,h,f){const p=this.sheets[t],_=p&&p[h];return _&&_[f]}addCellEx(t){if(t.top)for(let h=t.top;h<=t.bottom;h++)for(let f=t.left;f<=t.right;f++)this.getCellAt(t.sheetName,h,f);else this.findCellEx(t,!0)}getCellEx(t){return this.findCellEx(t,!0)}findCellEx(t,h){const f=this.findSheet(t,h),p=this.findSheetRow(f,t,h);return this.findRowCell(p,t,h)}getCellAt(t,h,f){const p=this.sheets[t]||(this.sheets[t]=[]),_=p[h]||(p[h]=[]);return _[f]||(_[f]={sheetName:t,address:l.n2l(f)+h,row:h,col:f})}removeCellEx(t){const h=this.findSheet(t);if(!h)return;const f=this.findSheetRow(h,t);f&&delete f[t.col]}forEachInSheet(t,h){const f=this.sheets[t];f&&f.forEach((p,_)=>{p&&p.forEach((g,m)=>{g&&h(g,_,m)})})}forEach(t){a.each(this.sheets,(h,f)=>{this.forEachInSheet(f,t)})}map(t){const h=[];return this.forEach(f=>{h.push(t(f))}),h}findSheet(t,h){const f=t.sheetName;return this.sheets[f]?this.sheets[f]:h?this.sheets[f]=[]:void 0}findSheetRow(t,h,f){const{row:p}=h;return t&&t[p]?t[p]:f?t[p]=[]:void 0}findRowCell(t,h,f){const{col:p}=h;return t&&t[p]?t[p]:f?t[p]=this.template?Object.assign(h,JSON.parse(JSON.stringify(this.template))):h:void 0}spliceRows(t,h,f,p){const _=this.sheets[t];if(_){const g=[];for(let m=0;m<p;m++)g.push([]);_.splice(h,f,...g)}}spliceColumns(t,h,f,p){const _=this.sheets[t];if(_){const g=[];for(let m=0;m<p;m++)g.push(null);a.each(_,m=>{m.splice(h,f,...g)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(e,i,o){const a=/^[A-Z]+\d+$/,l={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:t=>t<=26?1:t<=676?2:3,_fill(t){let h,f,p,_,g,m=1;if(t>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&t>=1){for(;m<=26;)h=this._dictionary[m-1],this._n2l[m]=h,this._l2n[h]=m,m++;this._l2nFill=1}if(this._l2nFill<2&&t>=2){for(m=27;m<=702;)f=m-27,p=f%26,_=Math.floor(f/26),h=this._dictionary[_]+this._dictionary[p],this._n2l[m]=h,this._l2n[h]=m,m++;this._l2nFill=2}if(this._l2nFill<3&&t>=3){for(m=703;m<=16384;)f=m-703,p=f%26,_=Math.floor(f/26)%26,g=Math.floor(f/676),h=this._dictionary[g]+this._dictionary[_]+this._dictionary[p],this._n2l[m]=h,this._l2n[h]=m,m++;this._l2nFill=3}},l2n(t){if(this._l2n[t]||this._fill(t.length),!this._l2n[t])throw new Error("Out of bounds. Invalid column letter: "+t);return this._l2n[t]},n2l(t){if(t<1||t>16384)throw new Error(t+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[t]||this._fill(this._level(t)),this._n2l[t]},_hash:{},validateAddress(t){if(!a.test(t))throw new Error("Invalid Address: "+t);return!0},decodeAddress(t){const h=t.length<5&&this._hash[t];if(h)return h;let f=!1,p="",_=0,g=!1,m="",b=0;for(let v,S=0;S<t.length;S++)if(v=t.charCodeAt(S),!g&&v>=65&&v<=90)f=!0,p+=t[S],_=26*_+v-64;else if(v>=48&&v<=57)g=!0,m+=t[S],b=10*b+v-48;else if(g&&f&&v!==36)break;if(f){if(_>16384)throw new Error("Out of bounds. Invalid column letter: "+p)}else _=void 0;g||(b=void 0);const x={address:t=p+m,col:_,row:b,$col$row:`$${p}$${m}`};return _<=100&&b<=100&&(this._hash[t]=x,this._hash[x.$col$row]=x),x},getAddress(t,h){if(h){const f=this.n2l(h)+t;return this.decodeAddress(f)}return this.decodeAddress(t)},decode(t){const h=t.split(":");if(h.length===2){const f=this.decodeAddress(h[0]),p=this.decodeAddress(h[1]),_={top:Math.min(f.row,p.row),left:Math.min(f.col,p.col),bottom:Math.max(f.row,p.row),right:Math.max(f.col,p.col)};return _.tl=this.n2l(_.left)+_.top,_.br=this.n2l(_.right)+_.bottom,_.dimensions=`${_.tl}:${_.br}`,_}return this.decodeAddress(t)},decodeEx(t){const h=t.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),f=h[1]||h[2],p=h[3],_=p.split(":");if(_.length>1){let m=this.decodeAddress(_[0]),b=this.decodeAddress(_[1]);const x=Math.min(m.row,b.row),v=Math.min(m.col,b.col),S=Math.max(m.row,b.row),B=Math.max(m.col,b.col);return m=this.n2l(v)+x,b=this.n2l(B)+S,{top:x,left:v,bottom:S,right:B,sheetName:f,tl:{address:m,col:v,row:x,$col$row:`$${this.n2l(v)}$${x}`,sheetName:f},br:{address:b,col:B,row:S,$col$row:`$${this.n2l(B)}$${S}`,sheetName:f},dimensions:`${m}:${b}`}}if(p.startsWith("#"))return f?{sheetName:f,error:p}:{error:p};const g=this.decodeAddress(p);return f?{sheetName:f,...g}:g},encodeAddress:(t,h)=>l.n2l(h)+t,encode(){switch(arguments.length){case 2:return l.encodeAddress(arguments[0],arguments[1]);case 4:return`${l.encodeAddress(arguments[0],arguments[1])}:${l.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(t,h){const[f,p,,_,g]=t,[m,b]=h;return m>=f&&m<=_&&b>=p&&b<=g}};i.exports=l},{}],20:[function(e,i,o){const a=(t,h)=>({...t,...h.reduce((f,p)=>(t[p]&&(f[p]={...t[p]}),f),{})}),l=function(t,h,f){let p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];t[f]&&(h[f]=a(t[f],p))};o.copyStyle=t=>{if(!t)return t;if(h=t,Object.keys(h).length===0)return{};var h;const f={...t};return l(t,f,"font",["color"]),l(t,f,"alignment"),l(t,f,"protection"),t.border&&(l(t,f,"border"),l(t.border,f.border,"top",["color"]),l(t.border,f.border,"left",["color"]),l(t.border,f.border,"bottom",["color"]),l(t.border,f.border,"right",["color"]),l(t.border,f.border,"diagonal",["color"])),t.fill&&(l(t,f,"fill",["fgColor","bgColor","center"]),t.fill.stops&&(f.fill.stops=t.fill.stops.map(p=>a(p,["color"])))),f}},{}],21:[function(e,i,o){(function(a){(function(){const l=e("crypto"),t={hash(h){const f=l.createHash(h);for(var p=arguments.length,_=new Array(p>1?p-1:0),g=1;g<p;g++)_[g-1]=arguments[g];return f.update(a.concat(_)),f.digest()},convertPasswordToHash(h,f,p,_){if(f=f.toLowerCase(),l.getHashes().indexOf(f)<0)throw new Error(`Hash algorithm '${f}' not supported!`);const g=a.from(h,"utf16le");let m=this.hash(f,a.from(p,"base64"),g);for(let b=0;b<_;b++){const x=a.alloc(4);x.writeUInt32LE(b,0),m=this.hash(f,m,x)}return m.toString("base64")},randomBytes:h=>l.randomBytes(h)};i.exports=t}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(e,i,o){const{SaxesParser:a}=e("saxes"),{PassThrough:l}=e("readable-stream"),{bufferToString:t}=e("./browser-buffer-decode");i.exports=async function*(h){h.pipe&&!h[Symbol.asyncIterator]&&(h=h.pipe(new l));const f=new a;let p;f.on("error",g=>{p=g});let _=[];f.on("opentag",g=>_.push({eventType:"opentag",value:g})),f.on("text",g=>_.push({eventType:"text",value:g})),f.on("closetag",g=>_.push({eventType:"closetag",value:g}));for await(const g of h){if(f.write(t(g)),p)throw p;yield _,_=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(e,i,o){const a=e("./col-cache"),l=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,t=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;i.exports={slideFormula:function(h,f,p){const _=a.decode(f),g=a.decode(p);return h.replace(l,(m,b,x,v,S)=>{if(S)return m;const B=t.exec(v);if(B){const F=B[1],O=B[2].toUpperCase(),V=B[3],X=B[4];if(O.length>3||O.length===3&&O>"XFD")return m;let Q=a.l2n(O),ee=parseInt(X,10);return F||(Q+=g.col-_.col),V||(ee+=g.row-_.row),(b||"")+(F||"")+a.n2l(Q)+(V||"")+ee}return m})}}},{"./col-cache":19}],24:[function(e,i,o){(function(a,l){(function(){const t=e("readable-stream"),h=e("./utils"),f=e("./string-buf");class p{constructor(v,S){this._data=v,this._encoding=S}get length(){return this.toBuffer().length}copy(v,S,B,F){return this.toBuffer().copy(v,S,B,F)}toBuffer(){return this._buffer||(this._buffer=l.from(this._data,this._encoding)),this._buffer}}class _{constructor(v){this._data=v}get length(){return this._data.length}copy(v,S,B,F){return this._data._buf.copy(v,S,B,F)}toBuffer(){return this._data.toBuffer()}}class g{constructor(v){this._data=v}get length(){return this._data.length}copy(v,S,B,F){this._data.copy(v,S,B,F)}toBuffer(){return this._data}}class m{constructor(v){this.size=v,this.buffer=l.alloc(v),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const v=l.alloc(this.iWrite-this.iRead);return this.buffer.copy(v,0,this.iRead,this.iWrite),v}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(v){let S;return v===0?null:v===void 0||v>=this.length?(S=this.toBuffer(),this.iRead=this.iWrite,S):(S=l.alloc(v),this.buffer.copy(S,0,this.iRead,v),this.iRead+=v,S)}write(v,S,B){const F=Math.min(B,this.size-this.iWrite);return v.copy(this.buffer,this.iWrite,S,S+F),this.iWrite+=F,F}}const b=function(x){x=x||{},this.bufSize=x.bufSize||1048576,this.buffers=[],this.batch=x.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};h.inherits(b,t.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return l.concat(this.buffers.map(x=>x.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const v=this.buffers[this.buffers.length-1];if(!v.full)return v}const x=new m(this.bufSize);return this.buffers.push(x),x},async _pipe(x){await Promise.all(this.pipes.map(function(v){return new Promise(S=>{v.write(x.toBuffer(),()=>{S()})})}))},_writeToBuffers(x){let v=0;const S=x.length;for(;v<S;)v+=this._getWritableBuffer().write(x,v,S-v)},async write(x,v,S){let B;if(v instanceof Function&&(S=v,v="utf8"),S=S||h.nop,x instanceof f)B=new _(x);else if(x instanceof l)B=new g(x);else{if(!(typeof x=="string"||x instanceof String||x instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");B=new p(x,v)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(B);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(B),a.nextTick(S)):(await this._pipe(B),S());else this.paused||this.emit("data",B.toBuffer()),this._writeToBuffers(B),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(x,v,S){const B=F=>{F?S(F):(this._flush(),this.pipes.forEach(O=>{O.end()}),this.emit("finish"))};x?this.write(x,v,B):B()},read(x){let v;if(x){for(v=[];x&&this.buffers.length&&!this.buffers[0].eod;){const S=this.buffers[0],B=S.read(x);x-=B.length,v.push(B),S.eod&&S.full&&this.buffers.shift()}return l.concat(v)}return v=this.buffers.map(S=>S.toBuffer()).filter(Boolean),this.buffers=[],l.concat(v)},setEncoding(x){this.encoding=x},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(x){this.pipes.push(x),!this.paused&&this.buffers.length&&this.end()},unpipe(x){this.pipes=this.pipes.filter(v=>v!==x)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),i.exports=b}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(e,i,o){(function(a){(function(){i.exports=class{constructor(l){this._buf=a.alloc(l&&l.size||16384),this._encoding=l&&l.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=a.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(l){l=l||0,this._buffer=void 0,this._inPos=l}_grow(l){let t=2*this._buf.length;for(;t<l;)t*=2;const h=a.alloc(t);this._buf.copy(h,0),this._buf=h}addText(l){this._buffer=void 0;let t=this._inPos+this._buf.write(l,this._inPos,this._encoding);for(;t>=this._buf.length-4;)this._grow(this._inPos+l.length),t=this._inPos+this._buf.write(l,this._inPos,this._encoding);this._inPos=t}addStringBuf(l){l.length&&(this._buffer=void 0,this.length+l.length>this.capacity&&this._grow(this.length+l.length),l._buf.copy(this._buf,this._inPos,0,l.length),this._inPos+=l.length)}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],26:[function(e,i,o){const{toString:a}=Object.prototype,l=/["&<>]/,t={each:function(h,f){h&&(Array.isArray(h)?h.forEach(f):Object.keys(h).forEach(p=>{f(h[p],p)}))},some:function(h,f){return!!h&&(Array.isArray(h)?h.some(f):Object.keys(h).some(p=>f(h[p],p)))},every:function(h,f){return!h||(Array.isArray(h)?h.every(f):Object.keys(h).every(p=>f(h[p],p)))},map:function(h,f){return h?Array.isArray(h)?h.map(f):Object.keys(h).map(p=>f(h[p],p)):[]},keyBy:(h,f)=>h.reduce((p,_)=>(p[_[f]]=_,p),{}),isEqual:function(h,f){const p=typeof h,_=typeof f,g=Array.isArray(h),m=Array.isArray(f);let b;if(p!==_)return!1;switch(typeof h){case"object":if(g||m)return!(!g||!m)&&h.length===f.length&&h.every((x,v)=>{const S=f[v];return t.isEqual(x,S)});if(h===null||f===null)return h===f;if(b=Object.keys(h),Object.keys(f).length!==b.length)return!1;for(const x of b)if(!f.hasOwnProperty(x))return!1;return t.every(h,(x,v)=>{const S=f[v];return t.isEqual(x,S)});default:return h===f}},escapeHtml(h){const f=l.exec(h);if(!f)return h;let p="",_="",g=0,m=f.index;for(;m<h.length;m++){switch(h.charAt(m)){case'"':_="&quot;";break;case"&":_="&amp;";break;case"'":_="&apos;";break;case"<":_="&lt;";break;case">":_="&gt;";break;default:continue}g!==m&&(p+=h.substring(g,m)),g=m+1,p+=_}return g!==m?p+h.substring(g,m):p},strcmp:(h,f)=>h<f?-1:h>f?1:0,isUndefined:h=>a.call(h)==="[object Undefined]",isObject:h=>a.call(h)==="[object Object]",deepMerge(){const h=arguments[0]||{},{length:f}=arguments;let p,_,g;function m(b,x){p=h[x],g=Array.isArray(b),t.isObject(b)||g?(g?(g=!1,_=p&&Array.isArray(p)?p:[]):_=p&&t.isObject(p)?p:{},h[x]=t.deepMerge(_,b)):t.isUndefined(b)||(h[x]=b)}for(let b=0;b<f;b++)t.each(arguments[b],m);return h}};i.exports=t},{}],27:[function(e,i,o){(function(a,l){(function(){const t=e("fs"),h=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,f={nop(){},promiseImmediate:p=>new Promise(_=>{a.setImmediate?l(()=>{_(p)}):setTimeout(()=>{_(p)},1)}),inherits:function(p,_,g,m){p.super_=_,m||(m=g,g=null),g&&Object.keys(g).forEach(x=>{Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(g,x))});const b={constructor:{value:p,enumerable:!1,writable:!1,configurable:!0}};m&&Object.keys(m).forEach(x=>{b[x]=Object.getOwnPropertyDescriptor(m,x)}),p.prototype=Object.create(_.prototype,b)},dateToExcel:(p,_)=>25569+p.getTime()/864e5-(_?1462:0),excelToDate(p,_){const g=Math.round(24*(p-25569+(_?1462:0))*3600*1e3);return new Date(g)},parsePath(p){const _=p.lastIndexOf("/");return{path:p.substring(0,_),name:p.substring(_+1)}},getRelsPath(p){const _=f.parsePath(p);return`${_.path}/_rels/${_.name}.rels`},xmlEncode(p){const _=h.exec(p);if(!_)return p;let g="",m="",b=0,x=_.index;for(;x<p.length;x++){const v=p.charCodeAt(x);switch(v){case 34:m="&quot;";break;case 38:m="&amp;";break;case 39:m="&apos;";break;case 60:m="&lt;";break;case 62:m="&gt;";break;case 127:m="";break;default:if(v<=31&&(v<=8||v>=11&&v!==13)){m="";break}continue}b!==x&&(g+=p.substring(b,x)),b=x+1,m&&(g+=m)}return b!==x?g+p.substring(b,x):g},xmlDecode:p=>p.replace(/&([a-z]*);/g,_=>{switch(_){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return _}}),validInt(p){const _=parseInt(p,10);return Number.isNaN(_)?0:_},isDateFmt(p){return p?(p=(p=p.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:p=>new Promise(_=>{t.access(p,t.constants.F_OK,g=>{_(!g)})})},toIsoDateString:p=>p.toIsoString().subsstr(0,10),parseBoolean:p=>p===!0||p==="true"||p===1||p==="1"};i.exports=f}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{fs:216,timers:523}],28:[function(e,i,o){const a=e("./under-dash"),l=e("./utils");function t(p,_,g){p.push(` ${_}="${l.xmlEncode(g.toString())}"`)}function h(p,_){if(_){const g=[];a.each(_,(m,b)=>{m!==void 0&&t(g,b,m)}),p.push(g.join(""))}}class f{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(_){const g=this._xml;g.push("<?xml"),h(g,_),g.push(`?>
`)}openNode(_,g){const m=this.tos,b=this._xml;m&&this.open&&b.push(">"),this._stack.push(_),b.push("<"),b.push(_),h(b,g),this.leaf=!0,this.open=!0}addAttribute(_,g){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");g!==void 0&&t(this._xml,_,g)}addAttributes(_){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");h(this._xml,_)}writeText(_){const g=this._xml;this.open&&(g.push(">"),this.open=!1),this.leaf=!1,g.push(l.xmlEncode(_.toString()))}writeXml(_){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(_)}closeNode(){const _=this._stack.pop(),g=this._xml;this.leaf?g.push("/>"):(g.push("</"),g.push(_),g.push(">")),this.open=!1,this.leaf=!1}leafNode(_,g,m){this.openNode(_,g),m!==void 0&&this.writeText(m),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const _=this._rollbacks.pop();this._xml.length>_.xml&&this._xml.splice(_.xml,this._xml.length-_.xml),this._stack.length>_.stack&&this._stack.splice(_.stack,this._stack.length-_.stack),this.leaf=_.leaf,this.open=_.open}get xml(){return this.closeAll(),this._xml.join("")}}f.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},i.exports=f},{"./under-dash":26,"./utils":27}],29:[function(e,i,o){(function(a){(function(){const l=e("events"),t=e("jszip"),h=e("./stream-buf"),{stringToBuffer:f}=e("./browser-buffer-encode");class p extends l.EventEmitter{constructor(g){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},g),this.zip=new t,this.stream=new h}append(g,m){m.hasOwnProperty("base64")&&m.base64?this.zip.file(m.name,g,{base64:!0}):(a.browser&&typeof g=="string"&&(g=f(g)),this.zip.file(m.name,g))}async finalize(){const g=await this.zip.generateAsync(this.options);this.stream.end(g),this.emit("finish")}read(g){return this.stream.read(g)}setEncoding(g){return this.stream.setEncoding(g)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(g,m){return this.stream.pipe(g,m)}unpipe(g){return this.stream.unpipe(g)}unshift(g){return this.stream.unshift(g)}wrap(g){return this.stream.wrap(g)}}i.exports={ZipWriter:p}}).call(this)}).call(this,e("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(e,i,o){i.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"å¹´"m"æ"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"å¹´" mm"æ" dd"æ¥"'},28:{"zh-tw":'[$-404]e"å¹´"m"æ"d"æ¥"',"zh-cn":'m"æ"d"æ¥"',"ja-jp":'[$-411]ggge"å¹´"m"æ"d"æ¥"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"å¹´"m"æ"d"æ¥"',"zh-cn":'m"æ"d"æ¥"',"ja-jp":'[$-411]ggge"å¹´"m"æ"d"æ¥"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"å¹´"m"æ"d"æ¥"',"zh-cn":'yyyy"å¹´"m"æ"d"æ¥"',"ja-jp":'yyyy"å¹´"m"æ"d"æ¥"',"ko-kr":'yyyy"ë" mm"ì" dd"ì¼"'},32:{"zh-tw":'hh"æ"mm"å"',"zh-cn":'h"æ¶"mm"å"',"ja-jp":'h"æ"mm"å"',"ko-kr":'h"ì" mm"ë¶"'},33:{"zh-tw":'hh"æ"mm"å"ss"ç§"',"zh-cn":'h"æ¶"mm"å"ss"ç§"',"ja-jp":'h"æ"mm"å"ss"ç§"',"ko-kr":'h"ì" mm"ë¶" ss"ì´"'},34:{"zh-tw":'ä¸å/ä¸å hh"æ"mm"å"',"zh-cn":'ä¸å/ä¸å h"æ¶"mm"å"',"ja-jp":'yyyy"å¹´"m"æ"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'ä¸å/ä¸å hh"æ"mm"å"ss"ç§"',"zh-cn":'ä¸å/ä¸å h"æ¶"mm"å"ss"ç§"',"ja-jp":'m"æ"d"æ¥"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"å¹´"m"æ"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"å¹´" mm"æ" dd"æ¥"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"å¹´"m"æ"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"å¹´" mm"æ" dd"æ¥"'},51:{"zh-tw":'[$-404]e"å¹´"m"æ"d"æ¥"',"zh-cn":'m"æ"d"æ¥"',"ja-jp":'[$-411]ggge"å¹´"m"æ"d"æ¥"',"ko-kr":"mm-dd"},52:{"zh-tw":'ä¸å/ä¸å hh"æ"mm"å"',"zh-cn":'yyyy"å¹´"m"æ"',"ja-jp":'yyyy"å¹´"m"æ"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'ä¸å/ä¸å hh"æ"mm"å"ss"ç§"',"zh-cn":'m"æ"d"æ¥"',"ja-jp":'m"æ"d"æ¥"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"å¹´"m"æ"d"æ¥"',"zh-cn":'m"æ"d"æ¥"',"ja-jp":'[$-411]ggge"å¹´"m"æ"d"æ¥"',"ko-kr":"mm-dd"},55:{"zh-tw":'ä¸å/ä¸å hh"æ"mm"å"',"zh-cn":'ä¸å/ä¸å h"æ¶"mm"å"',"ja-jp":'yyyy"å¹´"m"æ"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'ä¸å/ä¸å hh"æ"mm"å"ss"ç§"',"zh-cn":'ä¸å/ä¸å h"æ¶"mm"å"ss"ç§"',"ja-jp":'m"æ"d"æ¥"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"å¹´"m"æ"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"å¹´" mm"æ" dd"æ¥"'},58:{"zh-tw":'[$-404]e"å¹´"m"æ"d"æ¥"',"zh-cn":'m"æ"d"æ¥"',"ja-jp":'[$-411]ggge"å¹´"m"æ"d"æ¥"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(e,i,o){i.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(e,i,o){const a=e("../../utils/parse-sax"),l=e("../../utils/xml-stream");class t{prepare(){}render(){}parseOpen(f){}parseText(f){}parseClose(f){}reconcile(f,p){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(f=>{f instanceof t?f.reset():f.xform&&f.xform.reset()})}mergeModel(f){this.model=Object.assign(this.model||{},f)}async parse(f){for await(const p of f)for(const{eventType:_,value:g}of p)if(_==="opentag")this.parseOpen(g);else if(_==="text")this.parseText(g);else if(_==="closetag"&&!this.parseClose(g.name))return this.model;return this.model}async parseStream(f){return this.parse(a(f))}get xml(){return this.toXml(this.model)}toXml(f){const p=new l;return this.render(p,f),p.xml}static toAttribute(f,p){let _=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(f===void 0){if(_)return p}else if(_||f!==p)return f.toString()}static toStringAttribute(f,p){let _=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return t.toAttribute(f,p,_)}static toStringValue(f,p){return f===void 0?p:f}static toBoolAttribute(f,p){let _=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(f===void 0){if(_)return p}else if(_||f!==p)return f?"1":"0"}static toBoolValue(f,p){return f===void 0?p:f==="1"}static toIntAttribute(f,p){let _=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return t.toAttribute(f,p,_)}static toIntValue(f,p){return f===void 0?p:parseInt(f,10)}static toFloatAttribute(f,p){let _=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return t.toAttribute(f,p,_)}static toFloatValue(f,p){return f===void 0?p:parseFloat(f)}}i.exports=t},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(e,i,o){const a=e("../base-xform"),l=e("../../../utils/col-cache");function t(f){try{return l.decodeEx(f),!0}catch{return!1}}function h(f){const p=[];let _=!1,g="";return f.split(",").forEach(m=>{if(!m)return;const b=(m.match(/'/g)||[]).length;if(!b)return void(_?g+=m+",":t(m)&&p.push(m));const x=b%2==0;!_&&x&&t(m)?p.push(m):_&&!x?(_=!1,t(g+m)&&p.push(g+m),g=""):(_=!0,g+=m+",")}),p}i.exports=class extends a{render(f,p){f.openNode("definedName",{name:p.name,localSheetId:p.localSheetId}),f.writeText(p.ranges.join(",")),f.closeNode()}parseOpen(f){switch(f.name){case"definedName":return this._parsedName=f.attributes.name,this._parsedLocalSheetId=f.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(f){this._parsedText.push(f)}parseClose(){return this.model={name:this._parsedName,ranges:h(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(e,i,o){const a=e("../../../utils/utils"),l=e("../base-xform");i.exports=class extends l{render(t,h){t.leafNode("sheet",{sheetId:h.id,name:h.name,state:h.state,"r:id":h.rId})}parseOpen(t){return t.name==="sheet"&&(this.model={name:a.xmlDecode(t.attributes.name),id:parseInt(t.attributes.sheetId,10),state:t.attributes.state,rId:t.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{render(l,t){l.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:t.fullCalcOnLoad?1:void 0})}parseOpen(l){return l.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{render(l,t){l.leafNode("workbookPr",{date1904:t.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(l){return l.name==="workbookPr"&&(this.model={date1904:l.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{render(l,t){const h={xWindow:t.x||0,yWindow:t.y||0,windowWidth:t.width||12e3,windowHeight:t.height||24e3,firstSheet:t.firstSheet,activeTab:t.activeTab};t.visibility&&t.visibility!=="visible"&&(h.visibility=t.visibility),l.leafNode("workbookView",h)}parseOpen(l){if(l.name==="workbookView"){const t=this.model={},h=function(p,_,g){const m=_!==void 0?t[p]=_:g;m!==void 0&&(t[p]=m)},f=function(p,_,g){const m=_!==void 0?t[p]=parseInt(_,10):g;m!==void 0&&(t[p]=m)};return f("x",l.attributes.xWindow,0),f("y",l.attributes.yWindow,0),f("width",l.attributes.windowWidth,25e3),f("height",l.attributes.windowHeight,1e4),h("visibility",l.attributes.visibility,"visible"),f("activeTab",l.attributes.activeTab,void 0),f("firstSheet",l.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../../../utils/col-cache"),t=e("../../../utils/xml-stream"),h=e("../base-xform"),f=e("../static-xform"),p=e("../list-xform"),_=e("./defined-name-xform"),g=e("./sheet-xform"),m=e("./workbook-view-xform"),b=e("./workbook-properties-xform"),x=e("./workbook-calc-properties-xform");class v extends h{constructor(){super(),this.map={fileVersion:v.STATIC_XFORMS.fileVersion,workbookPr:new b,bookViews:new p({tag:"bookViews",count:!1,childXform:new m}),sheets:new p({tag:"sheets",count:!1,childXform:new g}),definedNames:new p({tag:"definedNames",count:!1,childXform:new _}),calcPr:new x}}prepare(B){B.sheets=B.worksheets;const F=[];let O=0;B.sheets.forEach(V=>{if(V.pageSetup&&V.pageSetup.printArea&&V.pageSetup.printArea.split("&&").forEach(X=>{const Q=X.split(":"),ee={name:"_xlnm.Print_Area",ranges:[`'${V.name}'!$${Q[0]}:$${Q[1]}`],localSheetId:O};F.push(ee)}),V.pageSetup&&(V.pageSetup.printTitlesRow||V.pageSetup.printTitlesColumn)){const X=[];if(V.pageSetup.printTitlesColumn){const ee=V.pageSetup.printTitlesColumn.split(":");X.push(`'${V.name}'!$${ee[0]}:$${ee[1]}`)}if(V.pageSetup.printTitlesRow){const ee=V.pageSetup.printTitlesRow.split(":");X.push(`'${V.name}'!$${ee[0]}:$${ee[1]}`)}const Q={name:"_xlnm.Print_Titles",ranges:X,localSheetId:O};F.push(Q)}O++}),F.length&&(B.definedNames=B.definedNames.concat(F)),(B.media||[]).forEach((V,X)=>{V.name=V.type+(X+1)})}render(B,F){B.openXml(t.StdDocAttributes),B.openNode("workbook",v.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(B),this.map.workbookPr.render(B,F.properties),this.map.bookViews.render(B,F.views),this.map.sheets.render(B,F.sheets),this.map.definedNames.render(B,F.definedNames),this.map.calcPr.render(B,F.calcProperties),B.closeNode()}parseOpen(B){if(this.parser)return this.parser.parseOpen(B),!0;switch(B.name){case"workbook":return!0;default:return this.parser=this.map[B.name],this.parser&&this.parser.parseOpen(B),!0}}parseText(B){this.parser&&this.parser.parseText(B)}parseClose(B){if(this.parser)return this.parser.parseClose(B)||(this.parser=void 0),!0;switch(B){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(B){const F=(B.workbookRels||[]).reduce((ee,ne)=>(ee[ne.Id]=ne,ee),{}),O=[];let V,X=0;(B.sheets||[]).forEach(ee=>{const ne=F[ee.rId];ne&&(V=B.worksheetHash["xl/"+ne.Target.replace(/^(\s|\/xl\/)+/,"")],V&&(V.name=ee.name,V.id=ee.id,V.state=ee.state,O[X++]=V))});const Q=[];a.each(B.definedNames,ee=>{if(ee.name==="_xlnm.Print_Area"){if(V=O[ee.localSheetId],V){V.pageSetup||(V.pageSetup={});const ne=l.decodeEx(ee.ranges[0]);V.pageSetup.printArea=V.pageSetup.printArea?`${V.pageSetup.printArea}&&${ne.dimensions}`:ne.dimensions}}else if(ee.name==="_xlnm.Print_Titles"){if(V=O[ee.localSheetId],V){V.pageSetup||(V.pageSetup={});const ne=ee.ranges.join(","),Ae=/\$/g,fe=/\$\d+:\$\d+/,ce=ne.match(fe);if(ce&&ce.length){const z=ce[0];V.pageSetup.printTitlesRow=z.replace(Ae,"")}const G=/\$[A-Z]+:\$[A-Z]+/,Z=ne.match(G);if(Z&&Z.length){const z=Z[0];V.pageSetup.printTitlesColumn=z.replace(Ae,"")}}}else Q.push(ee)}),B.definedNames=Q,B.media.forEach((ee,ne)=>{ee.index=ne})}}v.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},v.STATIC_XFORMS={fileVersion:new f({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},i.exports=v},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(e,i,o){const a=e("../strings/rich-text-xform"),l=e("../../../utils/utils"),t=e("../base-xform"),h=i.exports=function(f){this.model=f};l.inherits(h,t,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new a),this._richTextXform},render(f,p){p=p||this.model,f.openNode("comment",{ref:p.ref,authorId:0}),f.openNode("text"),p&&p.note&&p.note.texts&&p.note.texts.forEach(_=>{this.richTextXform.render(f,_)}),f.closeNode(),f.closeNode()},parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"comment":return this.model={type:"note",note:{texts:[]},...f.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(f),!0;default:return!1}},parseText(f){this.parser&&this.parser.parseText(f)},parseClose(f){switch(f){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(f),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../../../utils/utils"),t=e("../base-xform"),h=e("./comment-xform"),f=i.exports=function(){this.map={comment:new h}};l.inherits(f,t,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(p,_){_=_||this.model,p.openXml(a.StdDocAttributes),p.openNode("comments",f.COMMENTS_ATTRIBUTES),p.openNode("authors"),p.leafNode("author",null,"Author"),p.closeNode(),p.openNode("commentList"),_.comments.forEach(g=>{this.map.comment.render(p,g)}),p.closeNode(),p.closeNode()},parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(p),!0;default:return!1}},parseText(p){this.parser&&this.parser.parseText(p)},parseClose(p){switch(p){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(p),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(e,i,o){const a=e("../../base-xform");i.exports=class extends a{constructor(l){super(),this._model=l}get tag(){return this._model&&this._model.tag}render(l,t,h){(t===h[2]||this.tag==="x:SizeWithCells"&&t===h[1])&&l.leafNode(this.tag)}parseOpen(l){switch(l.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(e,i,o){const a=e("../../base-xform");i.exports=class extends a{constructor(l){super(),this._model=l}get tag(){return this._model&&this._model.tag}render(l,t){l.leafNode(this.tag,null,t)}parseOpen(l){switch(l.name){case this.tag:return this.text="",!0;default:return!1}}parseText(l){this.text=l}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"x:Anchor"}getAnchorRect(l){const t=Math.floor(l.left),h=Math.floor(68*(l.left-t)),f=Math.floor(l.top),p=Math.floor(18*(l.top-f)),_=Math.floor(l.right),g=Math.floor(68*(l.right-_)),m=Math.floor(l.bottom);return[t,h,f,p,_,g,m,Math.floor(18*(l.bottom-m))]}getDefaultRect(l){const t=l.col,h=Math.max(l.row-2,0);return[t,6,h,14,t+2,2,h+4,16]}render(l,t){const h=t.anchor?this.getAnchorRect(t.anchor):this.getDefaultRect(t.refAddress);l.leafNode("x:Anchor",null,h.join(", "))}parseOpen(l){switch(l.name){case this.tag:return this.text="",!0;default:return!1}}parseText(l){this.text=l}parseClose(){return!1}}},{"../base-xform":32}],44:[function(e,i,o){const a=e("../base-xform"),l=e("./vml-anchor-xform"),t=e("./style/vml-protection-xform"),h=e("./style/vml-position-xform"),f=["twoCells","oneCells","absolute"];i.exports=class extends a{constructor(){super(),this.map={"x:Anchor":new l,"x:Locked":new t({tag:"x:Locked"}),"x:LockText":new t({tag:"x:LockText"}),"x:SizeWithCells":new h({tag:"x:SizeWithCells"}),"x:MoveWithCells":new h({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(p,_){const{protection:g,editAs:m}=_.note;p.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(p,m,f),this.map["x:SizeWithCells"].render(p,m,f),this.map["x:Anchor"].render(p,_),this.map["x:Locked"].render(p,g.locked),p.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(p,g.lockText),p.leafNode("x:Row",null,_.refAddress.row-1),p.leafNode("x:Column",null,_.refAddress.col-1),p.closeNode()}parseOpen(p){switch(p.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const p=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),_=Object.keys(p).length;this.model.editAs=f[_],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../base-xform"),t=e("./vml-shape-xform");class h extends l{constructor(){super(),this.map={"v:shape":new t}}get tag(){return"xml"}render(p,_){p.openXml(a.StdDocAttributes),p.openNode(this.tag,h.DRAWING_ATTRIBUTES),p.openNode("o:shapelayout",{"v:ext":"edit"}),p.leafNode("o:idmap",{"v:ext":"edit",data:1}),p.closeNode(),p.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),p.leafNode("v:stroke",{joinstyle:"miter"}),p.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),p.closeNode(),_.comments.forEach((g,m)=>{this.map["v:shape"].render(p,g,m)}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(p){case this.tag:return!1;default:return!0}}reconcile(p,_){p.anchors.forEach(g=>{g.br?this.map["xdr:twoCellAnchor"].reconcile(g,_):this.map["xdr:oneCellAnchor"].reconcile(g,_)})}}h.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},i.exports=h},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(e,i,o){const a=e("../base-xform"),l=e("./vml-textbox-xform"),t=e("./vml-client-data-xform");class h extends a{constructor(){super(),this.map={"v:textbox":new l,"x:ClientData":new t}}get tag(){return"v:shape"}render(p,_,g){p.openNode("v:shape",h.V_SHAPE_ATTRIBUTES(_,g)),p.leafNode("v:fill",{color2:"infoBackground [80]"}),p.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),p.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(p,_),this.map["x:ClientData"].render(p,_),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case this.tag:this.reset(),this.model={margins:{insetmode:p.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}h.V_SHAPE_ATTRIBUTES=(f,p)=>({id:"_x0000_s"+(1025+p),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":f.note.margins&&f.note.margins.insetmode}),i.exports=h},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"v:textbox"}conversionUnit(l,t,h){return`${parseFloat(l)*t.toFixed(2)}${h}`}reverseConversionUnit(l){return(l||"").split(",").map(t=>Number(parseFloat(this.conversionUnit(parseFloat(t),.1,"")).toFixed(2)))}render(l,t){const h={style:"mso-direction-alt:auto"};if(t&&t.note){let{inset:f}=t.note&&t.note.margins;Array.isArray(f)&&(f=f.map(p=>this.conversionUnit(p,10,"mm")).join(",")),f&&(h.inset=f)}l.openNode("v:textbox",h),l.leafNode("div",{style:"text-align:left"}),l.closeNode()}parseOpen(l){switch(l.name){case this.tag:return this.model={inset:this.reverseConversionUnit(l.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(l){switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(e,i,o){const a=e("./base-xform");i.exports=class extends a{createNewModel(l){return{}}parseOpen(l){return this.parser=this.parser||this.map[l.name],this.parser?(this.parser.parseOpen(l),!0):l.name===this.tag&&(this.model=this.createNewModel(l),!0)}parseText(l){this.parser&&this.parser.parseText(l)}onParserClose(l,t){this.model[l]=t.model}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.onParserClose(l,this.parser),this.parser=void 0),!0):l!==this.tag}}},{"./base-xform":32}],49:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{render(l,t){l.openNode("HeadingPairs"),l.openNode("vt:vector",{size:2,baseType:"variant"}),l.openNode("vt:variant"),l.leafNode("vt:lpstr",void 0,"Worksheets"),l.closeNode(),l.openNode("vt:variant"),l.leafNode("vt:i4",void 0,t.length),l.closeNode(),l.closeNode(),l.closeNode()}parseOpen(l){return l.name==="HeadingPairs"}parseText(){}parseClose(l){return l!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{render(l,t){l.openNode("TitlesOfParts"),l.openNode("vt:vector",{size:t.length,baseType:"lpstr"}),t.forEach(h=>{l.leafNode("vt:lpstr",void 0,h.name)}),l.closeNode(),l.closeNode()}parseOpen(l){return l.name==="TitlesOfParts"}parseText(){}parseClose(l){return l!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../base-xform"),t=e("../simple/string-xform"),h=e("./app-heading-pairs-xform"),f=e("./app-titles-of-parts-xform");class p extends l{constructor(){super(),this.map={Company:new t({tag:"Company"}),Manager:new t({tag:"Manager"}),HeadingPairs:new h,TitleOfParts:new f}}render(g,m){g.openXml(a.StdDocAttributes),g.openNode("Properties",p.PROPERTY_ATTRIBUTES),g.leafNode("Application",void 0,"Microsoft Excel"),g.leafNode("DocSecurity",void 0,"0"),g.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(g,m.worksheets),this.map.TitleOfParts.render(g,m.worksheets),this.map.Company.render(g,m.company||""),this.map.Manager.render(g,m.manager),g.leafNode("LinksUpToDate",void 0,"false"),g.leafNode("SharedDoc",void 0,"false"),g.leafNode("HyperlinksChanged",void 0,"false"),g.leafNode("AppVersion",void 0,"16.0300"),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case"Properties":return!0;default:return this.parser=this.map[g.name],!!this.parser&&(this.parser.parseOpen(g),!0)}}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){if(this.parser)return this.parser.parseClose(g)||(this.parser=void 0),!0;switch(g){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}p.DateFormat=function(_){return _.toISOString().replace(/[.]\d{3,6}/,"")},p.DateAttrs={"xsi:type":"dcterms:W3CDTF"},p.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},i.exports=p},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../base-xform");class t extends l{render(f,p){f.openXml(a.StdDocAttributes),f.openNode("Types",t.PROPERTY_ATTRIBUTES);const _={};(p.media||[]).forEach(g=>{if(g.type==="image"){const m=g.extension;_[m]||(_[m]=!0,f.leafNode("Default",{Extension:m,ContentType:"image/"+m}))}}),f.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),f.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),f.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),p.worksheets.forEach(g=>{const m=`/xl/worksheets/sheet${g.id}.xml`;f.leafNode("Override",{PartName:m,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),f.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),f.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),p.sharedStrings&&p.sharedStrings.count&&f.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),p.tables&&p.tables.forEach(g=>{f.leafNode("Override",{PartName:"/xl/tables/"+g.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),p.drawings&&p.drawings.forEach(g=>{f.leafNode("Override",{PartName:`/xl/drawings/${g.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),p.commentRefs&&(f.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),p.commentRefs.forEach(g=>{let{commentName:m}=g;f.leafNode("Override",{PartName:`/xl/${m}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),f.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),f.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),f.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}t.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},i.exports=t},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../base-xform"),t=e("../simple/date-xform"),h=e("../simple/string-xform"),f=e("../simple/integer-xform");class p extends l{constructor(){super(),this.map={"dc:creator":new h({tag:"dc:creator"}),"dc:title":new h({tag:"dc:title"}),"dc:subject":new h({tag:"dc:subject"}),"dc:description":new h({tag:"dc:description"}),"dc:identifier":new h({tag:"dc:identifier"}),"dc:language":new h({tag:"dc:language"}),"cp:keywords":new h({tag:"cp:keywords"}),"cp:category":new h({tag:"cp:category"}),"cp:lastModifiedBy":new h({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new t({tag:"cp:lastPrinted",format:p.DateFormat}),"cp:revision":new f({tag:"cp:revision"}),"cp:version":new h({tag:"cp:version"}),"cp:contentStatus":new h({tag:"cp:contentStatus"}),"cp:contentType":new h({tag:"cp:contentType"}),"dcterms:created":new t({tag:"dcterms:created",attrs:p.DateAttrs,format:p.DateFormat}),"dcterms:modified":new t({tag:"dcterms:modified",attrs:p.DateAttrs,format:p.DateFormat})}}render(g,m){g.openXml(a.StdDocAttributes),g.openNode("cp:coreProperties",p.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(g,m.creator),this.map["dc:title"].render(g,m.title),this.map["dc:subject"].render(g,m.subject),this.map["dc:description"].render(g,m.description),this.map["dc:identifier"].render(g,m.identifier),this.map["dc:language"].render(g,m.language),this.map["cp:keywords"].render(g,m.keywords),this.map["cp:category"].render(g,m.category),this.map["cp:lastModifiedBy"].render(g,m.lastModifiedBy),this.map["cp:lastPrinted"].render(g,m.lastPrinted),this.map["cp:revision"].render(g,m.revision),this.map["cp:version"].render(g,m.version),this.map["cp:contentStatus"].render(g,m.contentStatus),this.map["cp:contentType"].render(g,m.contentType),this.map["dcterms:created"].render(g,m.created),this.map["dcterms:modified"].render(g,m.modified),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[g.name],this.parser)return this.parser.parseOpen(g),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(g))}}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){if(this.parser)return this.parser.parseClose(g)||(this.parser=void 0),!0;switch(g){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+g)}}}p.DateFormat=function(_){return _.toISOString().replace(/[.]\d{3}/,"")},p.DateAttrs={"xsi:type":"dcterms:W3CDTF"},p.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},i.exports=p},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{render(l,t){l.leafNode("Relationship",t)}parseOpen(l){switch(l.name){case"Relationship":return this.model=l.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../base-xform"),t=e("./relationship-xform");class h extends l{constructor(){super(),this.map={Relationship:new t}}render(p,_){_=_||this._values,p.openXml(a.StdDocAttributes),p.openNode("Relationships",h.RELATIONSHIPS_ATTRIBUTES),_.forEach(g=>{this.map.Relationship.render(p,g)}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[p.name],this.parser)return this.parser.parseOpen(p),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(p))}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(p){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+p)}}}h.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},i.exports=h},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset(),this.model={range:{editAs:l.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}reconcilePicture(l,t){if(l&&l.rId){const h=t.rels[l.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(h){const f=h[1],p=t.mediaIndex[f];return t.media[p]}}}}},{"../base-xform":32}],57:[function(e,i,o){const a=e("../base-xform"),l=e("./blip-xform");i.exports=class extends a{constructor(){super(),this.map={"a:blip":new l}}get tag(){return"xdr:blipFill"}render(t,h){t.openNode(this.tag),this.map["a:blip"].render(t,h),t.openNode("a:stretch"),t.leafNode("a:fillRect"),t.closeNode(),t.closeNode()}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case this.tag:this.reset();break;default:this.parser=this.map[t.name],this.parser&&this.parser.parseOpen(t)}return!0}parseText(){}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;switch(t){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"a:blip"}render(l,t){l.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":t.rId,cstate:"print"})}parseOpen(l){switch(l.name){case this.tag:return this.model={rId:l.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(l){switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"xdr:cNvPicPr"}render(l){l.openNode(this.tag),l.leafNode("a:picLocks",{noChangeAspect:"1"}),l.closeNode()}parseOpen(l){switch(l.name){case this.tag:default:return!0}}parseText(){}parseClose(l){switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(e,i,o){const a=e("../base-xform"),l=e("./hlink-click-xform"),t=e("./ext-lst-xform");i.exports=class extends a{constructor(){super(),this.map={"a:hlinkClick":new l,"a:extLst":new t}}get tag(){return"xdr:cNvPr"}render(h,f){h.openNode(this.tag,{id:f.index,name:"Picture "+f.index}),this.map["a:hlinkClick"].render(h,f),this.map["a:extLst"].render(h,f),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:this.reset();break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(){}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(e,i,o){const a=e("../base-xform"),l=e("../simple/integer-xform");i.exports=class extends a{constructor(t){super(),this.tag=t.tag,this.map={"xdr:col":new l({tag:"xdr:col",zero:!0}),"xdr:colOff":new l({tag:"xdr:colOff",zero:!0}),"xdr:row":new l({tag:"xdr:row",zero:!0}),"xdr:rowOff":new l({tag:"xdr:rowOff",zero:!0})}}render(t,h){t.openNode(this.tag),this.map["xdr:col"].render(t,h.nativeCol),this.map["xdr:colOff"].render(t,h.nativeColOff),this.map["xdr:row"].render(t,h.nativeRow),this.map["xdr:rowOff"].render(t,h.nativeRowOff),t.closeNode()}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case this.tag:this.reset();break;default:this.parser=this.map[t.name],this.parser&&this.parser.parseOpen(t)}return!0}parseText(t){this.parser&&this.parser.parseText(t)}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.parser=void 0),!0;switch(t){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(e,i,o){const a=e("../../../utils/col-cache"),l=e("../../../utils/xml-stream"),t=e("../base-xform"),h=e("./two-cell-anchor-xform"),f=e("./one-cell-anchor-xform");class p extends t{constructor(){super(),this.map={"xdr:twoCellAnchor":new h,"xdr:oneCellAnchor":new f}}prepare(g){g.anchors.forEach((m,b)=>{m.anchorType=function(x){return(typeof x.range=="string"?a.decode(x.range):x.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(m),this.map[m.anchorType].prepare(m,{index:b})})}get tag(){return"xdr:wsDr"}render(g,m){g.openXml(l.StdDocAttributes),g.openNode(this.tag,p.DRAWING_ATTRIBUTES),m.anchors.forEach(b=>{this.map[b.anchorType].render(g,b)}),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[g.name],this.parser&&this.parser.parseOpen(g)}return!0}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){if(this.parser)return this.parser.parseClose(g)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(g){case this.tag:return!1;default:return!0}}reconcile(g,m){g.anchors.forEach(b=>{b.br?this.map["xdr:twoCellAnchor"].reconcile(b,m):this.map["xdr:oneCellAnchor"].reconcile(b,m)})}}p.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},i.exports=p},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"a:extLst"}render(l){l.openNode(this.tag),l.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),l.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),l.closeNode(),l.closeNode()}parseOpen(l){switch(l.name){case this.tag:default:return!0}}parseText(){}parseClose(l){switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{constructor(l){super(),this.tag=l.tag,this.map={}}render(l,t){l.openNode(this.tag);const h=Math.floor(9525*t.width),f=Math.floor(9525*t.height);l.addAttribute("cx",h),l.addAttribute("cy",f),l.closeNode()}parseOpen(l){return l.name===this.tag&&(this.model={width:parseInt(l.attributes.cx||"0",10)/9525,height:parseInt(l.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"a:hlinkClick"}render(l,t){t.hyperlinks&&t.hyperlinks.rId&&l.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":t.hyperlinks.rId,tooltip:t.hyperlinks.tooltip})}parseOpen(l){switch(l.name){case this.tag:return this.model={hyperlinks:{rId:l.attributes["r:id"],tooltip:l.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(e,i,o){const a=e("../base-xform"),l=e("./c-nv-pr-xform"),t=e("./c-nv-pic-pr-xform");i.exports=class extends a{constructor(){super(),this.map={"xdr:cNvPr":new l,"xdr:cNvPicPr":new t}}get tag(){return"xdr:nvPicPr"}render(h,f){h.openNode(this.tag),this.map["xdr:cNvPr"].render(h,f),this.map["xdr:cNvPicPr"].render(h,f),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:this.reset();break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(){}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(e,i,o){const a=e("./base-cell-anchor-xform"),l=e("../static-xform"),t=e("./cell-position-xform"),h=e("./ext-xform"),f=e("./pic-xform");i.exports=class extends a{constructor(){super(),this.map={"xdr:from":new t({tag:"xdr:from"}),"xdr:ext":new h({tag:"xdr:ext"}),"xdr:pic":new f,"xdr:clientData":new l({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(p,_){this.map["xdr:pic"].prepare(p.picture,_)}render(p,_){p.openNode(this.tag,{editAs:_.range.editAs||"oneCell"}),this.map["xdr:from"].render(p,_.range.tl),this.map["xdr:ext"].render(p,_.range.ext),this.map["xdr:pic"].render(p,_.picture),this.map["xdr:clientData"].render(p,{}),p.closeNode()}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(p,_){p.medium=this.reconcilePicture(p.picture,_)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(e,i,o){const a=e("../base-xform"),l=e("../static-xform"),t=e("./blip-fill-xform"),h=e("./nv-pic-pr-xform"),f=e("./sp-pr");i.exports=class extends a{constructor(){super(),this.map={"xdr:nvPicPr":new h,"xdr:blipFill":new t,"xdr:spPr":new l(f)}}get tag(){return"xdr:pic"}prepare(p,_){p.index=_.index+1}render(p,_){p.openNode(this.tag),this.map["xdr:nvPicPr"].render(p,_),this.map["xdr:blipFill"].render(p,_),this.map["xdr:spPr"].render(p,_),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case this.tag:this.reset();break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(){}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(p){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(e,i,o){i.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(e,i,o){const a=e("./base-cell-anchor-xform"),l=e("../static-xform"),t=e("./cell-position-xform"),h=e("./pic-xform");i.exports=class extends a{constructor(){super(),this.map={"xdr:from":new t({tag:"xdr:from"}),"xdr:to":new t({tag:"xdr:to"}),"xdr:pic":new h,"xdr:clientData":new l({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(f,p){this.map["xdr:pic"].prepare(f.picture,p)}render(f,p){f.openNode(this.tag,{editAs:p.range.editAs||"oneCell"}),this.map["xdr:from"].render(f,p.range.tl),this.map["xdr:to"].render(f,p.range.br),this.map["xdr:pic"].render(f,p.picture),this.map["xdr:clientData"].render(f,{}),f.closeNode()}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(f,p){f.medium=this.reconcilePicture(f.picture,p)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(e,i,o){const a=e("./base-xform");i.exports=class extends a{constructor(l){super(),this.tag=l.tag,this.always=!!l.always,this.count=l.count,this.empty=l.empty,this.$count=l.$count||"count",this.$=l.$,this.childXform=l.childXform,this.maxItems=l.maxItems}prepare(l,t){const{childXform:h}=this;l&&l.forEach((f,p)=>{t.index=p,h.prepare(f,t)})}render(l,t){if(this.always||t&&t.length){l.openNode(this.tag,this.$),this.count&&l.addAttribute(this.$count,t&&t.length||0);const{childXform:h}=this;(t||[]).forEach((f,p)=>{h.render(l,f,p)}),l.closeNode()}else this.empty&&l.leafNode(this.tag)}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(l)&&(this.parser=this.childXform,!0)}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(l,t){if(l){const{childXform:h}=this;l.forEach(f=>{h.reconcile(f,t)})}}}},{"./base-xform":32}],72:[function(e,i,o){const a=e("../../../utils/col-cache"),l=e("../base-xform");i.exports=class extends l{get tag(){return"autoFilter"}render(t,h){if(h)if(typeof h=="string")t.leafNode("autoFilter",{ref:h});else{const f=function(g){return typeof g=="string"?g:a.getAddress(g.row,g.column).address},p=f(h.from),_=f(h.to);p&&_&&t.leafNode("autoFilter",{ref:`${p}:${_}`})}}parseOpen(t){t.name==="autoFilter"&&(this.model=t.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(e,i,o){const a=e("../../../utils/utils"),l=e("../base-xform"),t=e("../../../doc/range"),h=e("../../../doc/enums"),f=e("../strings/rich-text-xform");function p(_){if(_==null)return h.ValueType.Null;if(_ instanceof String||typeof _=="string")return h.ValueType.String;if(typeof _=="number")return h.ValueType.Number;if(typeof _=="boolean")return h.ValueType.Boolean;if(_ instanceof Date)return h.ValueType.Date;if(_.text&&_.hyperlink)return h.ValueType.Hyperlink;if(_.formula)return h.ValueType.Formula;if(_.error)return h.ValueType.Error;throw new Error("I could not understand type of value")}i.exports=class extends l{constructor(){super(),this.richTextXForm=new f}get tag(){return"c"}prepare(_,g){const m=g.styles.addStyleModel(_.style||{},function(b){switch(b.type){case h.ValueType.Formula:return p(b.result);default:return b.type}}(_));switch(m&&(_.styleId=m),_.comment&&g.comments.push({..._.comment,ref:_.address}),_.type){case h.ValueType.String:case h.ValueType.RichText:g.sharedStrings&&(_.ssId=g.sharedStrings.add(_.value));break;case h.ValueType.Date:g.date1904&&(_.date1904=!0);break;case h.ValueType.Hyperlink:g.sharedStrings&&_.text!==void 0&&_.text!==null&&(_.ssId=g.sharedStrings.add(_.text)),g.hyperlinks.push({address:_.address,target:_.hyperlink,tooltip:_.tooltip});break;case h.ValueType.Merge:g.merges.add(_);break;case h.ValueType.Formula:if(g.date1904&&(_.date1904=!0),_.shareType==="shared"&&(_.si=g.siFormulae++),_.formula)g.formulae[_.address]=_;else if(_.sharedFormula){const b=g.formulae[_.sharedFormula];if(!b)throw new Error("Shared Formula master must exist above and or left of clone for cell "+_.address);b.si===void 0?(b.shareType="shared",b.si=g.siFormulae++,b.range=new t(b.address,_.address)):b.range&&b.range.expandToAddress(_.address),_.si=b.si}}}renderFormula(_,g){let m=null;switch(g.shareType){case"shared":m={t:"shared",ref:g.ref||g.range.range,si:g.si};break;case"array":m={t:"array",ref:g.ref};break;default:g.si!==void 0&&(m={t:"shared",si:g.si})}switch(p(g.result)){case h.ValueType.Null:_.leafNode("f",m,g.formula);break;case h.ValueType.String:_.addAttribute("t","str"),_.leafNode("f",m,g.formula),_.leafNode("v",null,g.result);break;case h.ValueType.Number:_.leafNode("f",m,g.formula),_.leafNode("v",null,g.result);break;case h.ValueType.Boolean:_.addAttribute("t","b"),_.leafNode("f",m,g.formula),_.leafNode("v",null,g.result?1:0);break;case h.ValueType.Error:_.addAttribute("t","e"),_.leafNode("f",m,g.formula),_.leafNode("v",null,g.result.error);break;case h.ValueType.Date:_.leafNode("f",m,g.formula),_.leafNode("v",null,a.dateToExcel(g.result,g.date1904));break;default:throw new Error("I could not understand type of value")}}render(_,g){if(g.type!==h.ValueType.Null||g.styleId){switch(_.openNode("c"),_.addAttribute("r",g.address),g.styleId&&_.addAttribute("s",g.styleId),g.type){case h.ValueType.Null:break;case h.ValueType.Number:_.leafNode("v",null,g.value);break;case h.ValueType.Boolean:_.addAttribute("t","b"),_.leafNode("v",null,g.value?"1":"0");break;case h.ValueType.Error:_.addAttribute("t","e"),_.leafNode("v",null,g.value.error);break;case h.ValueType.String:case h.ValueType.RichText:g.ssId!==void 0?(_.addAttribute("t","s"),_.leafNode("v",null,g.ssId)):g.value&&g.value.richText?(_.addAttribute("t","inlineStr"),_.openNode("is"),g.value.richText.forEach(m=>{this.richTextXForm.render(_,m)}),_.closeNode("is")):(_.addAttribute("t","str"),_.leafNode("v",null,g.value));break;case h.ValueType.Date:_.leafNode("v",null,a.dateToExcel(g.value,g.date1904));break;case h.ValueType.Hyperlink:g.ssId!==void 0?(_.addAttribute("t","s"),_.leafNode("v",null,g.ssId)):(_.addAttribute("t","str"),_.leafNode("v",null,g.text));break;case h.ValueType.Formula:this.renderFormula(_,g);break;case h.ValueType.Merge:}_.closeNode()}}parseOpen(_){if(this.parser)return this.parser.parseOpen(_),!0;switch(_.name){case"c":return this.model={address:_.attributes.r},this.t=_.attributes.t,_.attributes.s&&(this.model.styleId=parseInt(_.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=_.attributes.si,this.model.shareType=_.attributes.t,this.model.ref=_.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(_),!0;default:return!1}}parseText(_){if(this.parser)this.parser.parseText(_);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+_:_;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+_:_:this.model.value=this.model.value?this.model.value+_:_}}parseClose(_){switch(_){case"c":{const{model:g}=this;if(g.formula||g.shareType)g.type=h.ValueType.Formula,g.value&&(this.t==="str"?g.result=a.xmlDecode(g.value):this.t==="b"?g.result=parseInt(g.value,10)!==0:this.t==="e"?g.result={error:g.value}:g.result=parseFloat(g.value),g.value=void 0);else if(g.value!==void 0)switch(this.t){case"s":g.type=h.ValueType.String,g.value=parseInt(g.value,10);break;case"str":g.type=h.ValueType.String,g.value=a.xmlDecode(g.value);break;case"inlineStr":g.type=h.ValueType.String;break;case"b":g.type=h.ValueType.Boolean,g.value=parseInt(g.value,10)!==0;break;case"e":g.type=h.ValueType.Error,g.value={error:g.value};break;default:g.type=h.ValueType.Number,g.value=parseFloat(g.value)}else g.styleId?g.type=h.ValueType.Null:g.type=h.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(_),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(_),!0)}}reconcile(_,g){const m=_.styleId&&g.styles&&g.styles.getStyleModel(_.styleId);switch(m&&(_.style=m),_.styleId!==void 0&&(_.styleId=void 0),_.type){case h.ValueType.String:typeof _.value=="number"&&g.sharedStrings&&(_.value=g.sharedStrings.getString(_.value)),_.value.richText&&(_.type=h.ValueType.RichText);break;case h.ValueType.Number:m&&a.isDateFmt(m.numFmt)&&(_.type=h.ValueType.Date,_.value=a.excelToDate(_.value,g.date1904));break;case h.ValueType.Formula:_.result!==void 0&&m&&a.isDateFmt(m.numFmt)&&(_.result=a.excelToDate(_.result,g.date1904)),_.shareType==="shared"&&(_.ref?g.formulae[_.si]=_.address:(_.sharedFormula=g.formulae[_.si],delete _.shareType),delete _.si)}const b=g.hyperlinkMap[_.address];b&&(_.type===h.ValueType.Formula?(_.text=_.result,_.result=void 0):(_.text=_.value,_.value=void 0),_.type=h.ValueType.Hyperlink,_.hyperlink=b);const x=g.commentsMap&&g.commentsMap[_.address];x&&(_.comment=x)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(e,i,o){const a=e("../../base-xform");i.exports=class extends a{get tag(){return"x14:cfIcon"}render(l,t){l.leafNode(this.tag,{iconSet:t.iconSet,iconId:t.iconId})}parseOpen(l){let{attributes:t}=l;this.model={iconSet:t.iconSet,iconId:a.toIntValue(t.iconId)}}parseClose(l){return l!==this.tag}}},{"../../base-xform":32}],75:[function(e,i,o){const{v4:a}=e("uuid"),l=e("../../base-xform"),t=e("../../composite-xform"),h=e("./databar-ext-xform"),f=e("./icon-set-ext-xform"),p={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class _ extends t{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new h,"x14:iconSet":this.iconSetXform=new f}}get tag(){return"x14:cfRule"}static isExt(m){return m.type==="dataBar"?h.isExt(m):!(m.type!=="iconSet"||!m.custom&&!p[m.iconSet])}prepare(m){_.isExt(m)&&(m.x14Id=`{${a()}}`.toUpperCase())}render(m,b){if(_.isExt(b))switch(b.type){case"dataBar":this.renderDataBar(m,b);break;case"iconSet":this.renderIconSet(m,b)}}renderDataBar(m,b){m.openNode(this.tag,{type:"dataBar",id:b.x14Id}),this.databarXform.render(m,b),m.closeNode()}renderIconSet(m,b){m.openNode(this.tag,{type:"iconSet",priority:b.priority,id:b.x14Id||`{${a()}}`}),this.iconSetXform.render(m,b),m.closeNode()}createNewModel(m){let{attributes:b}=m;return{type:b.type,x14Id:b.id,priority:l.toIntValue(b.priority)}}onParserClose(m,b){Object.assign(this.model,b.model)}}i.exports=_},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(e,i,o){const a=e("../../composite-xform"),l=e("./f-ext-xform");i.exports=class extends a{constructor(){super(),this.map={"xm:f":this.fExtXform=new l}}get tag(){return"x14:cfvo"}render(t,h){t.openNode(this.tag,{type:h.type}),h.value!==void 0&&this.fExtXform.render(t,h.value),t.closeNode()}createNewModel(t){return{type:t.attributes.type}}onParserClose(t,h){switch(t){case"xm:f":this.model.value=h.model?parseFloat(h.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(e,i,o){const a=e("../../composite-xform"),l=e("./sqref-ext-xform"),t=e("./cf-rule-ext-xform");i.exports=class extends a{constructor(){super(),this.map={"xm:sqref":this.sqRef=new l,"x14:cfRule":this.cfRule=new t}}get tag(){return"x14:conditionalFormatting"}prepare(h,f){h.rules.forEach(p=>{this.cfRule.prepare(p,f)})}render(h,f){f.rules.some(t.isExt)&&(h.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),f.rules.filter(t.isExt).forEach(p=>this.cfRule.render(h,p)),this.sqRef.render(h,f.ref),h.closeNode())}createNewModel(){return{rules:[]}}onParserClose(h,f){switch(h){case"xm:sqref":this.model.ref=f.model;break;case"x14:cfRule":this.model.rules.push(f.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(e,i,o){const a=e("../../composite-xform"),l=e("./cf-rule-ext-xform"),t=e("./conditional-formatting-ext-xform");i.exports=class extends a{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new t}}get tag(){return"x14:conditionalFormattings"}hasContent(h){return h.hasExtContent===void 0&&(h.hasExtContent=h.some(f=>f.rules.some(l.isExt))),h.hasExtContent}prepare(h,f){h.forEach(p=>{this.cfXform.prepare(p,f)})}render(h,f){this.hasContent(f)&&(h.openNode(this.tag),f.forEach(p=>this.cfXform.render(h,p)),h.closeNode())}createNewModel(){return[]}onParserClose(h,f){this.model.push(f.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(e,i,o){const a=e("../../base-xform"),l=e("../../composite-xform"),t=e("../../style/color-xform"),h=e("./cfvo-ext-xform");i.exports=class extends l{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new h,"x14:borderColor":this.borderColorXform=new t("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new t("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new t("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new t("x14:axisColor")}}static isExt(f){return!f.gradient}get tag(){return"x14:dataBar"}render(f,p){f.openNode(this.tag,{minLength:a.toIntAttribute(p.minLength,0,!0),maxLength:a.toIntAttribute(p.maxLength,100,!0),border:a.toBoolAttribute(p.border,!1),gradient:a.toBoolAttribute(p.gradient,!0),negativeBarColorSameAsPositive:a.toBoolAttribute(p.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:a.toBoolAttribute(p.negativeBarBorderColorSameAsPositive,!0),axisPosition:a.toAttribute(p.axisPosition,"auto"),direction:a.toAttribute(p.direction,"leftToRight")}),p.cfvo.forEach(_=>{this.cfvoXform.render(f,_)}),this.borderColorXform.render(f,p.borderColor),this.negativeBorderColorXform.render(f,p.negativeBorderColor),this.negativeFillColorXform.render(f,p.negativeFillColor),this.axisColorXform.render(f,p.axisColor),f.closeNode()}createNewModel(f){let{attributes:p}=f;return{cfvo:[],minLength:a.toIntValue(p.minLength,0),maxLength:a.toIntValue(p.maxLength,100),border:a.toBoolValue(p.border,!1),gradient:a.toBoolValue(p.gradient,!0),negativeBarColorSameAsPositive:a.toBoolValue(p.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:a.toBoolValue(p.negativeBarBorderColorSameAsPositive,!0),axisPosition:a.toStringValue(p.axisPosition,"auto"),direction:a.toStringValue(p.direction,"leftToRight")}}onParserClose(f,p){const[,_]=f.split(":");switch(_){case"cfvo":this.model.cfvo.push(p.model);break;default:this.model[_]=p.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(e,i,o){const a=e("../../base-xform");i.exports=class extends a{get tag(){return"xm:f"}render(l,t){l.leafNode(this.tag,null,t)}parseOpen(){this.model=""}parseText(l){this.model+=l}parseClose(l){return l!==this.tag}}},{"../../base-xform":32}],81:[function(e,i,o){const a=e("../../base-xform"),l=e("../../composite-xform"),t=e("./cfvo-ext-xform"),h=e("./cf-icon-ext-xform");i.exports=class extends l{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new t,"x14:cfIcon":this.cfIconXform=new h}}get tag(){return"x14:iconSet"}render(f,p){f.openNode(this.tag,{iconSet:a.toStringAttribute(p.iconSet),reverse:a.toBoolAttribute(p.reverse,!1),showValue:a.toBoolAttribute(p.showValue,!0),custom:a.toBoolAttribute(p.icons,!1)}),p.cfvo.forEach(_=>{this.cfvoXform.render(f,_)}),p.icons&&p.icons.forEach((_,g)=>{_.iconId=g,this.cfIconXform.render(f,_)}),f.closeNode()}createNewModel(f){let{attributes:p}=f;return{cfvo:[],iconSet:a.toStringValue(p.iconSet,"3TrafficLights"),reverse:a.toBoolValue(p.reverse,!1),showValue:a.toBoolValue(p.showValue,!0)}}onParserClose(f,p){const[,_]=f.split(":");switch(_){case"cfvo":this.model.cfvo.push(p.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(p.model);break;default:this.model[_]=p.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(e,i,o){const a=e("../../base-xform");i.exports=class extends a{get tag(){return"xm:sqref"}render(l,t){l.leafNode(this.tag,null,t)}parseOpen(){this.model=""}parseText(l){this.model+=l}parseClose(l){return l!==this.tag}}},{"../../base-xform":32}],83:[function(e,i,o){const a=e("../../base-xform"),l=e("../../composite-xform"),t=e("../../../../doc/range"),h=e("./databar-xform"),f=e("./ext-lst-ref-xform"),p=e("./formula-xform"),_=e("./color-scale-xform"),g=e("./icon-set-xform"),m={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},b=v=>{const{type:S,operator:B}=v;switch(S){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:S};default:return{type:S,operator:B}}};class x extends l{constructor(){super(),this.map={dataBar:this.databarXform=new h,extLst:this.extLstRefXform=new f,formula:this.formulaXform=new p,colorScale:this.colorScaleXform=new _,iconSet:this.iconSetXform=new g}}get tag(){return"cfRule"}static isPrimitive(S){return S.type!=="iconSet"||!S.custom&&!m[S.iconSet]}render(S,B){switch(B.type){case"expression":this.renderExpression(S,B);break;case"cellIs":this.renderCellIs(S,B);break;case"top10":this.renderTop10(S,B);break;case"aboveAverage":this.renderAboveAverage(S,B);break;case"dataBar":this.renderDataBar(S,B);break;case"colorScale":this.renderColorScale(S,B);break;case"iconSet":this.renderIconSet(S,B);break;case"containsText":this.renderText(S,B);break;case"timePeriod":this.renderTimePeriod(S,B)}}renderExpression(S,B){S.openNode(this.tag,{type:"expression",dxfId:B.dxfId,priority:B.priority}),this.formulaXform.render(S,B.formulae[0]),S.closeNode()}renderCellIs(S,B){S.openNode(this.tag,{type:"cellIs",dxfId:B.dxfId,priority:B.priority,operator:B.operator}),B.formulae.forEach(F=>{this.formulaXform.render(S,F)}),S.closeNode()}renderTop10(S,B){S.leafNode(this.tag,{type:"top10",dxfId:B.dxfId,priority:B.priority,percent:a.toBoolAttribute(B.percent,!1),bottom:a.toBoolAttribute(B.bottom,!1),rank:a.toIntValue(B.rank,10,!0)})}renderAboveAverage(S,B){S.leafNode(this.tag,{type:"aboveAverage",dxfId:B.dxfId,priority:B.priority,aboveAverage:a.toBoolAttribute(B.aboveAverage,!0)})}renderDataBar(S,B){S.openNode(this.tag,{type:"dataBar",priority:B.priority}),this.databarXform.render(S,B),this.extLstRefXform.render(S,B),S.closeNode()}renderColorScale(S,B){S.openNode(this.tag,{type:"colorScale",priority:B.priority}),this.colorScaleXform.render(S,B),S.closeNode()}renderIconSet(S,B){x.isPrimitive(B)&&(S.openNode(this.tag,{type:"iconSet",priority:B.priority}),this.iconSetXform.render(S,B),S.closeNode())}renderText(S,B){S.openNode(this.tag,{type:B.operator,dxfId:B.dxfId,priority:B.priority,operator:a.toStringAttribute(B.operator,"containsText")});const F=(O=>{if(O.formulae&&O.formulae[0])return O.formulae[0];const V=new t(O.ref),{tl:X}=V;switch(O.operator){case"containsText":return`NOT(ISERROR(SEARCH("${O.text}",${X})))`;case"containsBlanks":return`LEN(TRIM(${X}))=0`;case"notContainsBlanks":return`LEN(TRIM(${X}))>0`;case"containsErrors":return`ISERROR(${X})`;case"notContainsErrors":return`NOT(ISERROR(${X}))`;default:return}})(B);F&&this.formulaXform.render(S,F),S.closeNode()}renderTimePeriod(S,B){S.openNode(this.tag,{type:"timePeriod",dxfId:B.dxfId,priority:B.priority,timePeriod:B.timePeriod});const F=(O=>{if(O.formulae&&O.formulae[0])return O.formulae[0];const V=new t(O.ref),{tl:X}=V;switch(O.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${X},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${X},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${X},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${X},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${X},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${X},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${X},1)=TODAY()-1`;case"today":return`FLOOR(${X},1)=TODAY()`;case"tomorrow":return`FLOOR(${X},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${X},1)<=6,FLOOR(${X},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${X})=MONTH(EDATE(TODAY(),0-1)),YEAR(${X})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${X})=MONTH(TODAY()),YEAR(${X})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${X})=MONTH(EDATE(TODAY(),0+1)),YEAR(${X})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(B);F&&this.formulaXform.render(S,F),S.closeNode()}createNewModel(S){let{attributes:B}=S;return{...b(B),dxfId:a.toIntValue(B.dxfId),priority:a.toIntValue(B.priority),timePeriod:B.timePeriod,percent:a.toBoolValue(B.percent),bottom:a.toBoolValue(B.bottom),rank:a.toIntValue(B.rank),aboveAverage:a.toBoolValue(B.aboveAverage)}}onParserClose(S,B){switch(S){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,B.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(B.model)}}}i.exports=x},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(e,i,o){const a=e("../../base-xform");i.exports=class extends a{get tag(){return"cfvo"}render(l,t){l.leafNode(this.tag,{type:t.type,val:t.value})}parseOpen(l){this.model={type:l.attributes.type,value:a.toFloatValue(l.attributes.val)}}parseClose(l){return l!==this.tag}}},{"../../base-xform":32}],85:[function(e,i,o){const a=e("../../composite-xform"),l=e("../../style/color-xform"),t=e("./cfvo-xform");i.exports=class extends a{constructor(){super(),this.map={cfvo:this.cfvoXform=new t,color:this.colorXform=new l}}get tag(){return"colorScale"}render(h,f){h.openNode(this.tag),f.cfvo.forEach(p=>{this.cfvoXform.render(h,p)}),f.color.forEach(p=>{this.colorXform.render(h,p)}),h.closeNode()}createNewModel(h){return{cfvo:[],color:[]}}onParserClose(h,f){this.model[h].push(f.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(e,i,o){const a=e("../../composite-xform"),l=e("./cf-rule-xform");i.exports=class extends a{constructor(){super(),this.map={cfRule:new l}}get tag(){return"conditionalFormatting"}render(t,h){h.rules.some(l.isPrimitive)&&(t.openNode(this.tag,{sqref:h.ref}),h.rules.forEach(f=>{l.isPrimitive(f)&&(f.ref=h.ref,this.map.cfRule.render(t,f))}),t.closeNode())}createNewModel(t){let{attributes:h}=t;return{ref:h.sqref,rules:[]}}onParserClose(t,h){this.model.rules.push(h.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(e,i,o){const a=e("../../base-xform"),l=e("./conditional-formatting-xform");i.exports=class extends a{constructor(){super(),this.cfXform=new l}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(t,h){let f=t.reduce((p,_)=>Math.max(p,..._.rules.map(g=>g.priority||0)),1);t.forEach(p=>{p.rules.forEach(_=>{_.priority||(_.priority=f++),_.style&&(_.dxfId=h.styles.addDxfStyle(_.style))})})}render(t,h){h.forEach(f=>{this.cfXform.render(t,f)})}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(t),!0;default:return!1}}parseText(t){this.parser&&this.parser.parseText(t)}parseClose(t){return!!this.parser&&(!!this.parser.parseClose(t)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(t,h){t.forEach(f=>{f.rules.forEach(p=>{p.dxfId!==void 0&&(p.style=h.styles.getDxfStyle(p.dxfId),delete p.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(e,i,o){const a=e("../../composite-xform"),l=e("../../style/color-xform"),t=e("./cfvo-xform");i.exports=class extends a{constructor(){super(),this.map={cfvo:this.cfvoXform=new t,color:this.colorXform=new l}}get tag(){return"dataBar"}render(h,f){h.openNode(this.tag),f.cfvo.forEach(p=>{this.cfvoXform.render(h,p)}),this.colorXform.render(h,f.color),h.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(h,f){switch(h){case"cfvo":this.model.cfvo.push(f.model);break;case"color":this.model.color=f.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(e,i,o){const a=e("../../base-xform"),l=e("../../composite-xform");class t extends a{get tag(){return"x14:id"}render(p,_){p.leafNode(this.tag,null,_)}parseOpen(){this.model=""}parseText(p){this.model+=p}parseClose(p){return p!==this.tag}}class h extends l{constructor(){super(),this.map={"x14:id":this.idXform=new t}}get tag(){return"ext"}render(p,_){p.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(p,_.x14Id),p.closeNode()}createNewModel(){return{}}onParserClose(p,_){this.model.x14Id=_.model}}i.exports=class extends l{constructor(){super(),this.map={ext:new h}}get tag(){return"extLst"}render(f,p){f.openNode(this.tag),this.map.ext.render(f,p),f.closeNode()}createNewModel(){return{}}onParserClose(f,p){Object.assign(this.model,p.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(e,i,o){const a=e("../../base-xform");i.exports=class extends a{get tag(){return"formula"}render(l,t){l.leafNode(this.tag,null,t)}parseOpen(){this.model=""}parseText(l){this.model+=l}parseClose(l){return l!==this.tag}}},{"../../base-xform":32}],91:[function(e,i,o){const a=e("../../base-xform"),l=e("../../composite-xform"),t=e("./cfvo-xform");i.exports=class extends l{constructor(){super(),this.map={cfvo:this.cfvoXform=new t}}get tag(){return"iconSet"}render(h,f){h.openNode(this.tag,{iconSet:a.toStringAttribute(f.iconSet,"3TrafficLights"),reverse:a.toBoolAttribute(f.reverse,!1),showValue:a.toBoolAttribute(f.showValue,!0)}),f.cfvo.forEach(p=>{this.cfvoXform.render(h,p)}),h.closeNode()}createNewModel(h){let{attributes:f}=h;return{iconSet:a.toStringValue(f.iconSet,"3TrafficLights"),reverse:a.toBoolValue(f.reverse),showValue:a.toBoolValue(f.showValue),cfvo:[]}}onParserClose(h,f){this.model[h].push(f.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(e,i,o){const a=e("../../../utils/utils"),l=e("../base-xform");i.exports=class extends l{get tag(){return"col"}prepare(t,h){const f=h.styles.addStyleModel(t.style||{});f&&(t.styleId=f)}render(t,h){t.openNode("col"),t.addAttribute("min",h.min),t.addAttribute("max",h.max),h.width&&t.addAttribute("width",h.width),h.styleId&&t.addAttribute("style",h.styleId),h.hidden&&t.addAttribute("hidden","1"),h.bestFit&&t.addAttribute("bestFit","1"),h.outlineLevel&&t.addAttribute("outlineLevel",h.outlineLevel),h.collapsed&&t.addAttribute("collapsed","1"),t.addAttribute("customWidth","1"),t.closeNode()}parseOpen(t){if(t.name==="col"){const h=this.model={min:parseInt(t.attributes.min||"0",10),max:parseInt(t.attributes.max||"0",10),width:t.attributes.width===void 0?void 0:parseFloat(t.attributes.width||"0")};return t.attributes.style&&(h.styleId=parseInt(t.attributes.style,10)),a.parseBoolean(t.attributes.hidden)&&(h.hidden=!0),a.parseBoolean(t.attributes.bestFit)&&(h.bestFit=!0),t.attributes.outlineLevel&&(h.outlineLevel=parseInt(t.attributes.outlineLevel,10)),a.parseBoolean(t.attributes.collapsed)&&(h.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(t,h){t.styleId&&(t.style=h.styles.getStyleModel(t.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../../../utils/utils"),t=e("../../../utils/col-cache"),h=e("../base-xform"),f=e("../../../doc/range");function p(g,m,b,x){const v=m[b];v!==void 0?g[b]=v:x!==void 0&&(g[b]=x)}function _(g,m,b,x){const v=m[b];v!==void 0&&(g[b]=l.parseBoolean(v))}i.exports=class extends h{get tag(){return"dataValidations"}render(g,m){const b=function(x){const v=a.map(x,(F,O)=>({address:O,dataValidation:F,marked:!1})).sort((F,O)=>a.strcmp(F.address,O.address)),S=a.keyBy(v,"address"),B=(F,O,V)=>{for(let X=0;X<O;X++){const Q=t.encodeAddress(F.row+X,V);if(!x[Q]||!a.isEqual(x[F.address],x[Q]))return!1}return!0};return v.map(F=>{if(!F.marked){const O=t.decodeEx(F.address);if(O.dimensions)return S[O.dimensions].marked=!0,{...F.dataValidation,sqref:F.address};let V=1,X=t.encodeAddress(O.row+V,O.col);for(;x[X]&&a.isEqual(F.dataValidation,x[X]);)V++,X=t.encodeAddress(O.row+V,O.col);let Q=1;for(;B(O,V,O.col+Q);)Q++;for(let ee=0;ee<V;ee++)for(let ne=0;ne<Q;ne++)X=t.encodeAddress(O.row+ee,O.col+ne),S[X].marked=!0;if(V>1||Q>1){const ee=O.row+(V-1),ne=O.col+(Q-1);return{...F.dataValidation,sqref:`${F.address}:${t.encodeAddress(ee,ne)}`}}return{...F.dataValidation,sqref:F.address}}return null}).filter(Boolean)}(m);b.length&&(g.openNode("dataValidations",{count:b.length}),b.forEach(x=>{g.openNode("dataValidation"),x.type!=="any"&&(g.addAttribute("type",x.type),x.operator&&x.type!=="list"&&x.operator!=="between"&&g.addAttribute("operator",x.operator),x.allowBlank&&g.addAttribute("allowBlank","1")),x.showInputMessage&&g.addAttribute("showInputMessage","1"),x.promptTitle&&g.addAttribute("promptTitle",x.promptTitle),x.prompt&&g.addAttribute("prompt",x.prompt),x.showErrorMessage&&g.addAttribute("showErrorMessage","1"),x.errorStyle&&g.addAttribute("errorStyle",x.errorStyle),x.errorTitle&&g.addAttribute("errorTitle",x.errorTitle),x.error&&g.addAttribute("error",x.error),g.addAttribute("sqref",x.sqref),(x.formulae||[]).forEach((v,S)=>{g.openNode("formula"+(S+1)),x.type==="date"?g.writeText(l.dateToExcel(new Date(v))):g.writeText(v),g.closeNode()}),g.closeNode()}),g.closeNode())}parseOpen(g){switch(g.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=g.attributes.sqref;const m={type:g.attributes.type||"any",formulae:[]};switch(g.attributes.type&&_(m,g.attributes,"allowBlank"),_(m,g.attributes,"showInputMessage"),_(m,g.attributes,"showErrorMessage"),m.type){case"any":case"list":case"custom":break;default:p(m,g.attributes,"operator","between")}return p(m,g.attributes,"promptTitle"),p(m,g.attributes,"prompt"),p(m,g.attributes,"errorStyle"),p(m,g.attributes,"errorTitle"),p(m,g.attributes,"error"),this._dataValidation=m,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(g){this._formula&&this._formula.push(g)}parseClose(g){switch(g){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(m=>{m.includes(":")?new f(m).forEachAddress(b=>{this.model[b]=this._dataValidation}):this.model[m]=this._dataValidation}),!0;case"formula1":case"formula2":{let m=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":m=parseInt(m,10);break;case"decimal":m=parseFloat(m);break;case"date":m=l.excelToDate(parseFloat(m))}return this._dataValidation.formulae.push(m),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"dimension"}render(l,t){t&&l.leafNode("dimension",{ref:t})}parseOpen(l){return l.name==="dimension"&&(this.model=l.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"drawing"}render(l,t){t&&l.leafNode(this.tag,{"r:id":t.rId})}parseOpen(l){switch(l.name){case this.tag:return this.model={rId:l.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(e,i,o){const a=e("../composite-xform"),l=e("./cf-ext/conditional-formattings-ext-xform");class t extends a{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new l}}get tag(){return"ext"}hasContent(f){return this.conditionalFormattings.hasContent(f.conditionalFormattings)}prepare(f,p){this.conditionalFormattings.prepare(f.conditionalFormattings,p)}render(f,p){f.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(f,p.conditionalFormattings),f.closeNode()}createNewModel(){return{}}onParserClose(f,p){this.model[f]=p.model}}i.exports=class extends a{constructor(){super(),this.map={ext:this.ext=new t}}get tag(){return"extLst"}prepare(h,f){this.ext.prepare(h,f)}hasContent(h){return this.ext.hasContent(h)}render(h,f){this.hasContent(f)&&(h.openNode("extLst"),this.ext.render(h,f),h.closeNode())}createNewModel(){return{}}onParserClose(h,f){Object.assign(this.model,f.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"headerFooter"}render(l,t){if(t){l.addRollback();let h=!1;l.openNode("headerFooter"),t.differentFirst&&(l.addAttribute("differentFirst","1"),h=!0),t.differentOddEven&&(l.addAttribute("differentOddEven","1"),h=!0),t.oddHeader&&typeof t.oddHeader=="string"&&(l.leafNode("oddHeader",null,t.oddHeader),h=!0),t.oddFooter&&typeof t.oddFooter=="string"&&(l.leafNode("oddFooter",null,t.oddFooter),h=!0),t.evenHeader&&typeof t.evenHeader=="string"&&(l.leafNode("evenHeader",null,t.evenHeader),h=!0),t.evenFooter&&typeof t.evenFooter=="string"&&(l.leafNode("evenFooter",null,t.evenFooter),h=!0),t.firstHeader&&typeof t.firstHeader=="string"&&(l.leafNode("firstHeader",null,t.firstHeader),h=!0),t.firstFooter&&typeof t.firstFooter=="string"&&(l.leafNode("firstFooter",null,t.firstFooter),h=!0),h?(l.closeNode(),l.commit()):l.rollback()}}parseOpen(l){switch(l.name){case"headerFooter":return this.model={},l.attributes.differentFirst&&(this.model.differentFirst=parseInt(l.attributes.differentFirst,0)===1),l.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(l.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(l){switch(this.currentNode){case"oddHeader":this.model.oddHeader=l;break;case"oddFooter":this.model.oddFooter=l;break;case"evenHeader":this.model.evenHeader=l;break;case"evenFooter":this.model.evenFooter=l;break;case"firstHeader":this.model.firstHeader=l;break;case"firstFooter":this.model.firstFooter=l}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"hyperlink"}render(l,t){this.isInternalLink(t)?l.leafNode("hyperlink",{ref:t.address,"r:id":t.rId,tooltip:t.tooltip,location:t.target}):l.leafNode("hyperlink",{ref:t.address,"r:id":t.rId,tooltip:t.tooltip})}parseOpen(l){return l.name==="hyperlink"&&(this.model={address:l.attributes.ref,rId:l.attributes["r:id"],tooltip:l.attributes.tooltip},l.attributes.location&&(this.model.target=l.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(l){return l.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(l.target)}}},{"../base-xform":32}],99:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"mergeCell"}render(l,t){l.leafNode("mergeCell",{ref:t})}parseOpen(l){return l.name==="mergeCell"&&(this.model=l.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../../../doc/range"),t=e("../../../utils/col-cache"),h=e("../../../doc/enums");i.exports=class{constructor(){this.merges={}}add(f){if(this.merges[f.master])this.merges[f.master].expandToAddress(f.address);else{const p=`${f.master}:${f.address}`;this.merges[f.master]=new l(p)}}get mergeCells(){return a.map(this.merges,f=>f.range)}reconcile(f,p){a.each(f,_=>{const g=t.decode(_);for(let m=g.top;m<=g.bottom;m++){const b=p[m-1];for(let x=g.left;x<=g.right;x++){const v=b.cells[x-1];v?v.type===h.ValueType.Merge&&(v.master=g.tl):b.cells[x]={type:h.ValueType.Null,address:t.encodeAddress(m,x)}}}})}getMasterAddress(f){const p=this.hash[f];return p&&p.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(e,i,o){const a=e("../base-xform"),l=t=>t!==void 0;i.exports=class extends a{get tag(){return"outlinePr"}render(t,h){return!(!h||!l(h.summaryBelow)&&!l(h.summaryRight))&&(t.leafNode(this.tag,{summaryBelow:l(h.summaryBelow)?Number(h.summaryBelow):void 0,summaryRight:l(h.summaryRight)?Number(h.summaryRight):void 0}),!0)}parseOpen(t){return t.name===this.tag&&(this.model={summaryBelow:l(t.attributes.summaryBelow)?!!Number(t.attributes.summaryBelow):void 0,summaryRight:l(t.attributes.summaryRight)?!!Number(t.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"brk"}render(l,t){l.leafNode("brk",t)}parseOpen(l){return l.name==="brk"&&(this.model=l.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../base-xform");i.exports=class extends l{get tag(){return"pageMargins"}render(t,h){if(h){const f={left:h.left,right:h.right,top:h.top,bottom:h.bottom,header:h.header,footer:h.footer};a.some(f,p=>p!==void 0)&&t.leafNode(this.tag,f)}}parseOpen(t){switch(t.name){case this.tag:return this.model={left:parseFloat(t.attributes.left||.7),right:parseFloat(t.attributes.right||.7),top:parseFloat(t.attributes.top||.75),bottom:parseFloat(t.attributes.bottom||.75),header:parseFloat(t.attributes.header||.3),footer:parseFloat(t.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"pageSetUpPr"}render(l,t){return!(!t||!t.fitToPage)&&(l.leafNode(this.tag,{fitToPage:t.fitToPage?"1":void 0}),!0)}parseOpen(l){return l.name===this.tag&&(this.model={fitToPage:l.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../base-xform");function t(_){return _?"1":void 0}function h(_){switch(_){case"overThenDown":return _;default:return}}function f(_){switch(_){case"atEnd":case"asDisplyed":return _;default:return}}function p(_){switch(_){case"dash":case"blank":case"NA":return _;default:return}}i.exports=class extends l{get tag(){return"pageSetup"}render(_,g){if(g){const m={paperSize:g.paperSize,orientation:g.orientation,horizontalDpi:g.horizontalDpi,verticalDpi:g.verticalDpi,pageOrder:h(g.pageOrder),blackAndWhite:t(g.blackAndWhite),draft:t(g.draft),cellComments:f(g.cellComments),errors:p(g.errors),scale:g.scale,fitToWidth:g.fitToWidth,fitToHeight:g.fitToHeight,firstPageNumber:g.firstPageNumber,useFirstPageNumber:t(g.firstPageNumber),usePrinterDefaults:t(g.usePrinterDefaults),copies:g.copies};a.some(m,b=>b!==void 0)&&_.leafNode(this.tag,m)}}parseOpen(_){switch(_.name){case this.tag:return this.model={paperSize:(g=_.attributes.paperSize,g!==void 0?parseInt(g,10):void 0),orientation:_.attributes.orientation||"portrait",horizontalDpi:parseInt(_.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(_.attributes.verticalDpi||"4294967295",10),pageOrder:_.attributes.pageOrder||"downThenOver",blackAndWhite:_.attributes.blackAndWhite==="1",draft:_.attributes.draft==="1",cellComments:_.attributes.cellComments||"None",errors:_.attributes.errors||"displayed",scale:parseInt(_.attributes.scale||"100",10),fitToWidth:parseInt(_.attributes.fitToWidth||"1",10),fitToHeight:parseInt(_.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(_.attributes.firstPageNumber||"1",10),useFirstPageNumber:_.attributes.useFirstPageNumber==="1",usePrinterDefaults:_.attributes.usePrinterDefaults==="1",copies:parseInt(_.attributes.copies||"1",10)},!0;default:return!1}var g}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"picture"}render(l,t){t&&l.leafNode(this.tag,{"r:id":t.rId})}parseOpen(l){switch(l.name){case this.tag:return this.model={rId:l.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../base-xform");function t(h){return h?"1":void 0}i.exports=class extends l{get tag(){return"printOptions"}render(h,f){if(f){const p={headings:t(f.showRowColHeaders),gridLines:t(f.showGridLines),horizontalCentered:t(f.horizontalCentered),verticalCentered:t(f.verticalCentered)};a.some(p,_=>_!==void 0)&&h.leafNode(this.tag,p)}}parseOpen(h){switch(h.name){case this.tag:return this.model={showRowColHeaders:h.attributes.headings==="1",showGridLines:h.attributes.gridLines==="1",horizontalCentered:h.attributes.horizontalCentered==="1",verticalCentered:h.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(e,i,o){const a=e("./page-breaks-xform"),l=e("../list-xform");i.exports=class extends l{constructor(){super({tag:"rowBreaks",count:!0,childXform:new a})}render(t,h){if(h&&h.length){t.openNode(this.tag,this.$),this.count&&(t.addAttribute(this.$count,h.length),t.addAttribute("manualBreakCount",h.length));const{childXform:f}=this;h.forEach(p=>{f.render(t,p)}),t.closeNode()}else this.empty&&t.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(e,i,o){const a=e("../base-xform"),l=e("../../../utils/utils"),t=e("./cell-xform");i.exports=class extends a{constructor(h){super(),this.maxItems=h&&h.maxItems,this.map={c:new t}}get tag(){return"row"}prepare(h,f){const p=f.styles.addStyleModel(h.style);p&&(h.styleId=p);const _=this.map.c;h.cells.forEach(g=>{_.prepare(g,f)})}render(h,f,p){h.openNode("row"),h.addAttribute("r",f.number),f.height&&(h.addAttribute("ht",f.height),h.addAttribute("customHeight","1")),f.hidden&&h.addAttribute("hidden","1"),f.min>0&&f.max>0&&f.min<=f.max&&h.addAttribute("spans",`${f.min}:${f.max}`),f.styleId&&(h.addAttribute("s",f.styleId),h.addAttribute("customFormat","1")),h.addAttribute("x14ac:dyDescent","0.25"),f.outlineLevel&&h.addAttribute("outlineLevel",f.outlineLevel),f.collapsed&&h.addAttribute("collapsed","1");const _=this.map.c;f.cells.forEach(g=>{_.render(h,g,p)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;if(h.name==="row"){this.numRowsSeen+=1;const f=h.attributes.spans?h.attributes.spans.split(":").map(_=>parseInt(_,10)):[void 0,void 0],p=this.model={number:parseInt(h.attributes.r,10),min:f[0],max:f[1],cells:[]};return h.attributes.s&&(p.styleId=parseInt(h.attributes.s,10)),l.parseBoolean(h.attributes.hidden)&&(p.hidden=!0),l.parseBoolean(h.attributes.bestFit)&&(p.bestFit=!0),h.attributes.ht&&(p.height=parseFloat(h.attributes.ht)),h.attributes.outlineLevel&&(p.outlineLevel=parseInt(h.attributes.outlineLevel,10)),l.parseBoolean(h.attributes.collapsed)&&(p.collapsed=!0),!0}return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser){if(!this.parser.parseClose(h)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(h,f){h.style=h.styleId?f.styles.getStyleModel(h.styleId):{},h.styleId!==void 0&&(h.styleId=void 0);const p=this.map.c;h.cells.forEach(_=>{p.reconcile(_,f)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../base-xform");i.exports=class extends l{get tag(){return"sheetFormatPr"}render(t,h){if(h){const f={defaultRowHeight:h.defaultRowHeight,outlineLevelRow:h.outlineLevelRow,outlineLevelCol:h.outlineLevelCol,"x14ac:dyDescent":h.dyDescent};h.defaultColWidth&&(f.defaultColWidth=h.defaultColWidth),h.defaultRowHeight&&h.defaultRowHeight===15||(f.customHeight="1"),a.some(f,p=>p!==void 0)&&t.leafNode("sheetFormatPr",f)}}parseOpen(t){return t.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(t.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(t.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(t.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(t.attributes.outlineLevelCol||"0",10)},t.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(t.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(e,i,o){const a=e("../base-xform"),l=e("../style/color-xform"),t=e("./page-setup-properties-xform"),h=e("./outline-properties-xform");i.exports=class extends a{constructor(){super(),this.map={tabColor:new l("tabColor"),pageSetUpPr:new t,outlinePr:new h}}get tag(){return"sheetPr"}render(f,p){if(p){f.addRollback(),f.openNode("sheetPr");let _=!1;_=this.map.tabColor.render(f,p.tabColor)||_,_=this.map.pageSetUpPr.render(f,p.pageSetup)||_,_=this.map.outlinePr.render(f,p.outlineProperties)||_,_?(f.closeNode(),f.commit()):f.rollback()}}parseOpen(f){return this.parser?(this.parser.parseOpen(f),!0):f.name===this.tag?(this.reset(),!0):!!this.map[f.name]&&(this.parser=this.map[f.name],this.parser.parseOpen(f),!0)}parseText(f){return!!this.parser&&(this.parser.parseText(f),!0)}parseClose(f){return this.parser?(this.parser.parseClose(f)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../base-xform");function t(f,p){return f?p:void 0}function h(f,p){return f===p||void 0}i.exports=class extends l{get tag(){return"sheetProtection"}render(f,p){if(p){const _={sheet:t(p.sheet,"1"),selectLockedCells:p.selectLockedCells===!1?"1":void 0,selectUnlockedCells:p.selectUnlockedCells===!1?"1":void 0,formatCells:t(p.formatCells,"0"),formatColumns:t(p.formatColumns,"0"),formatRows:t(p.formatRows,"0"),insertColumns:t(p.insertColumns,"0"),insertRows:t(p.insertRows,"0"),insertHyperlinks:t(p.insertHyperlinks,"0"),deleteColumns:t(p.deleteColumns,"0"),deleteRows:t(p.deleteRows,"0"),sort:t(p.sort,"0"),autoFilter:t(p.autoFilter,"0"),pivotTables:t(p.pivotTables,"0")};p.sheet&&(_.algorithmName=p.algorithmName,_.hashValue=p.hashValue,_.saltValue=p.saltValue,_.spinCount=p.spinCount,_.objects=t(p.objects===!1,"1"),_.scenarios=t(p.scenarios===!1,"1")),a.some(_,g=>g!==void 0)&&f.leafNode(this.tag,_)}}parseOpen(f){switch(f.name){case this.tag:return this.model={sheet:h(f.attributes.sheet,"1"),objects:f.attributes.objects!=="1"&&void 0,scenarios:f.attributes.scenarios!=="1"&&void 0,selectLockedCells:f.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:f.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:h(f.attributes.formatCells,"0"),formatColumns:h(f.attributes.formatColumns,"0"),formatRows:h(f.attributes.formatRows,"0"),insertColumns:h(f.attributes.insertColumns,"0"),insertRows:h(f.attributes.insertRows,"0"),insertHyperlinks:h(f.attributes.insertHyperlinks,"0"),deleteColumns:h(f.attributes.deleteColumns,"0"),deleteRows:h(f.attributes.deleteRows,"0"),sort:h(f.attributes.sort,"0"),autoFilter:h(f.attributes.autoFilter,"0"),pivotTables:h(f.attributes.pivotTables,"0")},f.attributes.algorithmName&&(this.model.algorithmName=f.attributes.algorithmName,this.model.hashValue=f.attributes.hashValue,this.model.saltValue=f.attributes.saltValue,this.model.spinCount=parseInt(f.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(e,i,o){const a=e("../../../utils/col-cache"),l=e("../base-xform"),t={frozen:"frozen",frozenSplit:"frozen",split:"split"};i.exports=class extends l{get tag(){return"sheetView"}prepare(h){switch(h.state){case"frozen":case"split":break;default:h.state="normal"}}render(h,f){h.openNode("sheetView",{workbookViewId:f.workbookViewId||0});const p=function(x,v,S){S&&h.addAttribute(x,v)};let _,g,m,b;switch(p("rightToLeft","1",f.rightToLeft===!0),p("tabSelected","1",f.tabSelected),p("showRuler","0",f.showRuler===!1),p("showRowColHeaders","0",f.showRowColHeaders===!1),p("showGridLines","0",f.showGridLines===!1),p("zoomScale",f.zoomScale,f.zoomScale),p("zoomScaleNormal",f.zoomScaleNormal,f.zoomScaleNormal),p("view",f.style,f.style),f.state){case"frozen":g=f.xSplit||0,m=f.ySplit||0,_=f.topLeftCell||a.getAddress(m+1,g+1).address,b=(f.xSplit&&f.ySplit?"bottomRight":f.xSplit&&"topRight")||"bottomLeft",h.leafNode("pane",{xSplit:f.xSplit||void 0,ySplit:f.ySplit||void 0,topLeftCell:_,activePane:b,state:"frozen"}),h.leafNode("selection",{pane:b,activeCell:f.activeCell,sqref:f.activeCell});break;case"split":f.activePane==="topLeft"&&(f.activePane=void 0),h.leafNode("pane",{xSplit:f.xSplit||void 0,ySplit:f.ySplit||void 0,topLeftCell:f.topLeftCell,activePane:f.activePane}),h.leafNode("selection",{pane:f.activePane,activeCell:f.activeCell,sqref:f.activeCell});break;case"normal":f.activeCell&&h.leafNode("selection",{activeCell:f.activeCell,sqref:f.activeCell})}h.closeNode()}parseOpen(h){switch(h.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(h.attributes.workbookViewId,10),rightToLeft:h.attributes.rightToLeft==="1",tabSelected:h.attributes.tabSelected==="1",showRuler:h.attributes.showRuler!=="0",showRowColHeaders:h.attributes.showRowColHeaders!=="0",showGridLines:h.attributes.showGridLines!=="0",zoomScale:parseInt(h.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(h.attributes.zoomScaleNormal||"100",10),style:h.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(h.attributes.xSplit||"0",10),ySplit:parseInt(h.attributes.ySplit||"0",10),topLeftCell:h.attributes.topLeftCell,activePane:h.attributes.activePane||"topLeft",state:h.attributes.state},!0;case"selection":{const f=h.attributes.pane||"topLeft";return this.selections[f]={pane:f,activeCell:h.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(h){let f,p;switch(h){case"sheetView":return this.sheetView&&this.pane?(f=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:t[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(f.activePane=this.pane.activePane),p=this.selections[this.pane.activePane],p&&p.activeCell&&(f.activeCell=p.activeCell),this.sheetView.style&&(f.style=this.sheetView.style)):(f=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},p=this.selections.topLeft,p&&p.activeCell&&(f.activeCell=p.activeCell),this.sheetView.style&&(f.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"tablePart"}render(l,t){t&&l.leafNode(this.tag,{"r:id":t.rId})}parseOpen(l){switch(l.name){case this.tag:return this.model={rId:l.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../../../utils/col-cache"),t=e("../../../utils/xml-stream"),h=e("../../rel-type"),f=e("./merges"),p=e("../base-xform"),_=e("../list-xform"),g=e("./row-xform"),m=e("./col-xform"),b=e("./dimension-xform"),x=e("./hyperlink-xform"),v=e("./merge-cell-xform"),S=e("./data-validations-xform"),B=e("./sheet-properties-xform"),F=e("./sheet-format-properties-xform"),O=e("./sheet-view-xform"),V=e("./sheet-protection-xform"),X=e("./page-margins-xform"),Q=e("./page-setup-xform"),ee=e("./print-options-xform"),ne=e("./auto-filter-xform"),Ae=e("./picture-xform"),fe=e("./drawing-xform"),ce=e("./table-part-xform"),G=e("./row-breaks-xform"),Z=e("./header-footer-xform"),z=e("./cf/conditional-formattings-xform"),k=e("./ext-lst-xform"),R=(U,Y)=>{if(!Y||!Y.length)return U;if(!U||!U.length)return Y;const de={},J={};return U.forEach(xe=>{de[xe.ref]=xe,xe.rules.forEach(Te=>{const{x14Id:Ue}=Te;Ue&&(J[Ue]=Te)})}),Y.forEach(xe=>{xe.rules.forEach(Te=>{const Ue=J[Te.x14Id];Ue?((pe,Oe)=>{Object.keys(Oe).forEach(re=>{const ie=pe[re],Be=Oe[re];ie===void 0&&Be!==void 0&&(pe[re]=Be)})})(Ue,Te):de[xe.ref]?de[xe.ref].rules.push(Te):U.push({ref:xe.ref,rules:[Te]})})}),U};class N extends p{constructor(Y){super();const{maxRows:de,maxCols:J,ignoreNodes:xe}=Y||{};this.ignoreNodes=xe||[],this.map={sheetPr:new B,dimension:new b,sheetViews:new _({tag:"sheetViews",count:!1,childXform:new O}),sheetFormatPr:new F,cols:new _({tag:"cols",count:!1,childXform:new m}),sheetData:new _({tag:"sheetData",count:!1,empty:!0,childXform:new g({maxItems:J}),maxItems:de}),autoFilter:new ne,mergeCells:new _({tag:"mergeCells",count:!0,childXform:new v}),rowBreaks:new G,hyperlinks:new _({tag:"hyperlinks",count:!1,childXform:new x}),pageMargins:new X,dataValidations:new S,pageSetup:new Q,headerFooter:new Z,printOptions:new ee,picture:new Ae,drawing:new fe,sheetProtection:new V,tableParts:new _({tag:"tableParts",count:!0,childXform:new ce}),conditionalFormatting:new z,extLst:new k}}prepare(Y,de){de.merges=new f,Y.hyperlinks=de.hyperlinks=[],Y.comments=de.comments=[],de.formulae={},de.siFormulae=0,this.map.cols.prepare(Y.cols,de),this.map.sheetData.prepare(Y.rows,de),this.map.conditionalFormatting.prepare(Y.conditionalFormattings,de),Y.mergeCells=de.merges.mergeCells;const J=Y.rels=[];function xe(pe){return"rId"+(pe.length+1)}if(Y.hyperlinks.forEach(pe=>{const Oe=xe(J);pe.rId=Oe,J.push({Id:Oe,Type:h.Hyperlink,Target:pe.target,TargetMode:"External"})}),Y.comments.length>0){const pe={Id:xe(J),Type:h.Comments,Target:`../comments${Y.id}.xml`};J.push(pe);const Oe={Id:xe(J),Type:h.VmlDrawing,Target:`../drawings/vmlDrawing${Y.id}.vml`};J.push(Oe),Y.comments.forEach(re=>{re.refAddress=l.decodeAddress(re.ref)}),de.commentRefs.push({commentName:"comments"+Y.id,vmlDrawing:"vmlDrawing"+Y.id})}const Te=[];let Ue;Y.media.forEach(pe=>{if(pe.type==="background"){const Oe=xe(J);Ue=de.media[pe.imageId],J.push({Id:Oe,Type:h.Image,Target:`../media/${Ue.name}.${Ue.extension}`}),Y.background={rId:Oe},Y.image=de.media[pe.imageId]}else if(pe.type==="image"){let{drawing:Oe}=Y;Ue=de.media[pe.imageId],Oe||(Oe=Y.drawing={rId:xe(J),name:"drawing"+ ++de.drawingsCount,anchors:[],rels:[]},de.drawings.push(Oe),J.push({Id:Oe.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${Oe.name}.xml`}));let re=this.preImageId===pe.imageId?Te[pe.imageId]:Te[Oe.rels.length];re||(re=xe(Oe.rels),Te[Oe.rels.length]=re,Oe.rels.push({Id:re,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${Ue.name}.${Ue.extension}`}));const ie={picture:{rId:re},range:pe.range};if(pe.hyperlinks&&pe.hyperlinks.hyperlink){const Be=xe(Oe.rels);Te[Oe.rels.length]=Be,ie.picture.hyperlinks={tooltip:pe.hyperlinks.tooltip,rId:Be},Oe.rels.push({Id:Be,Type:h.Hyperlink,Target:pe.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=pe.imageId,Oe.anchors.push(ie)}}),Y.tables.forEach(pe=>{const Oe=xe(J);pe.rId=Oe,J.push({Id:Oe,Type:h.Table,Target:"../tables/"+pe.target}),pe.columns.forEach(re=>{const{style:ie}=re;ie&&(re.dxfId=de.styles.addDxfStyle(ie))})}),this.map.extLst.prepare(Y,de)}render(Y,de){Y.openXml(t.StdDocAttributes),Y.openNode("worksheet",N.WORKSHEET_ATTRIBUTES);const J=de.properties?{defaultRowHeight:de.properties.defaultRowHeight,dyDescent:de.properties.dyDescent,outlineLevelCol:de.properties.outlineLevelCol,outlineLevelRow:de.properties.outlineLevelRow}:void 0;de.properties&&de.properties.defaultColWidth&&(J.defaultColWidth=de.properties.defaultColWidth);const xe={outlineProperties:de.properties&&de.properties.outlineProperties,tabColor:de.properties&&de.properties.tabColor,pageSetup:de.pageSetup&&de.pageSetup.fitToPage?{fitToPage:de.pageSetup.fitToPage}:void 0},Te=de.pageSetup&&de.pageSetup.margins,Ue={showRowColHeaders:de.pageSetup&&de.pageSetup.showRowColHeaders,showGridLines:de.pageSetup&&de.pageSetup.showGridLines,horizontalCentered:de.pageSetup&&de.pageSetup.horizontalCentered,verticalCentered:de.pageSetup&&de.pageSetup.verticalCentered},pe=de.sheetProtection;this.map.sheetPr.render(Y,xe),this.map.dimension.render(Y,de.dimensions),this.map.sheetViews.render(Y,de.views),this.map.sheetFormatPr.render(Y,J),this.map.cols.render(Y,de.cols),this.map.sheetData.render(Y,de.rows),this.map.sheetProtection.render(Y,pe),this.map.autoFilter.render(Y,de.autoFilter),this.map.mergeCells.render(Y,de.mergeCells),this.map.conditionalFormatting.render(Y,de.conditionalFormattings),this.map.dataValidations.render(Y,de.dataValidations),this.map.hyperlinks.render(Y,de.hyperlinks),this.map.printOptions.render(Y,Ue),this.map.pageMargins.render(Y,Te),this.map.pageSetup.render(Y,de.pageSetup),this.map.headerFooter.render(Y,de.headerFooter),this.map.rowBreaks.render(Y,de.rowBreaks),this.map.drawing.render(Y,de.drawing),this.map.picture.render(Y,de.background),this.map.tableParts.render(Y,de.tables),this.map.extLst.render(Y,de),de.rels&&de.rels.forEach(Oe=>{Oe.Type===h.VmlDrawing&&Y.leafNode("legacyDrawing",{"r:id":Oe.Id})}),Y.closeNode()}parseOpen(Y){return this.parser?(this.parser.parseOpen(Y),!0):Y.name==="worksheet"?(a.each(this.map,de=>{de.reset()}),!0):(this.map[Y.name]&&!this.ignoreNodes.includes(Y.name)&&(this.parser=this.map[Y.name],this.parser.parseOpen(Y)),!0)}parseText(Y){this.parser&&this.parser.parseText(Y)}parseClose(Y){if(this.parser)return this.parser.parseClose(Y)||(this.parser=void 0),!0;switch(Y){case"worksheet":{const de=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(de.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(de.outlineProperties=this.map.sheetPr.model.outlineProperties);const J={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},xe=Object.assign(J,this.map.pageSetup.model,this.map.printOptions.model),Te=R(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:de,views:this.map.sheetViews.model,pageSetup:xe,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:Te},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(Y,de){const J=(Y.relationships||[]).reduce((Te,Ue)=>{if(Te[Ue.Id]=Ue,Ue.Type===h.Comments&&(Y.comments=de.comments[Ue.Target].comments),Ue.Type===h.VmlDrawing&&Y.comments&&Y.comments.length){const pe=de.vmlDrawings[Ue.Target].comments;Y.comments.forEach((Oe,re)=>{Oe.note=Object.assign({},Oe.note,pe[re])})}return Te},{});if(de.commentsMap=(Y.comments||[]).reduce((Te,Ue)=>(Ue.ref&&(Te[Ue.ref]=Ue),Te),{}),de.hyperlinkMap=(Y.hyperlinks||[]).reduce((Te,Ue)=>(Ue.rId&&(Te[Ue.address]=J[Ue.rId].Target),Te),{}),de.formulae={},Y.rows=Y.rows&&Y.rows.filter(Boolean)||[],Y.rows.forEach(Te=>{Te.cells=Te.cells&&Te.cells.filter(Boolean)||[]}),this.map.cols.reconcile(Y.cols,de),this.map.sheetData.reconcile(Y.rows,de),this.map.conditionalFormatting.reconcile(Y.conditionalFormattings,de),Y.media=[],Y.drawing){const Te=J[Y.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(Te){const Ue=Te[1];de.drawings[Ue].anchors.forEach(pe=>{if(pe.medium){const Oe={type:"image",imageId:pe.medium.index,range:pe.range,hyperlinks:pe.picture.hyperlinks};Y.media.push(Oe)}})}}const xe=Y.background&&J[Y.background.rId];if(xe){const Te=xe.Target.split("/media/")[1],Ue=de.mediaIndex&&de.mediaIndex[Te];Ue!==void 0&&Y.media.push({type:"background",imageId:Ue})}Y.tables=(Y.tables||[]).map(Te=>{const Ue=J[Te.rId];return de.tables[Ue.Target]}),delete Y.relationships,delete Y.hyperlinks,delete Y.comments}}N.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},i.exports=N},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{constructor(l){super(),this.tag=l.tag,this.attr=l.attr}render(l,t){t&&(l.openNode(this.tag),l.closeNode())}parseOpen(l){l.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{constructor(l){super(),this.tag=l.tag,this.attr=l.attr,this.attrs=l.attrs,this._format=l.format||function(t){try{return Number.isNaN(t.getTime())?"":t.toISOString()}catch{return""}},this._parse=l.parse||function(t){return new Date(t)}}render(l,t){t&&(l.openNode(this.tag),this.attrs&&l.addAttributes(this.attrs),this.attr?l.addAttribute(this.attr,this._format(t)):l.writeText(this._format(t)),l.closeNode())}parseOpen(l){l.name===this.tag&&(this.attr?this.model=this._parse(l.attributes[this.attr]):this.text=[])}parseText(l){this.attr||this.text.push(l)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{constructor(l){super(),this.tag=l.tag,this.attr=l.attr,this.attrs=l.attrs,this.zero=l.zero}render(l,t){(t||this.zero)&&(l.openNode(this.tag),this.attrs&&l.addAttributes(this.attrs),this.attr?l.addAttribute(this.attr,t):l.writeText(t),l.closeNode())}parseOpen(l){return l.name===this.tag&&(this.attr?this.model=parseInt(l.attributes[this.attr],10):this.text=[],!0)}parseText(l){this.attr||this.text.push(l)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{constructor(l){super(),this.tag=l.tag,this.attr=l.attr,this.attrs=l.attrs}render(l,t){t!==void 0&&(l.openNode(this.tag),this.attrs&&l.addAttributes(this.attrs),this.attr?l.addAttribute(this.attr,t):l.writeText(t),l.closeNode())}parseOpen(l){l.name===this.tag&&(this.attr?this.model=l.attributes[this.attr]:this.text=[])}parseText(l){this.attr||this.text.push(l)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(e,i,o){const a=e("./base-xform"),l=e("../../utils/xml-stream");i.exports=class extends a{constructor(t){super(),this._model=t}render(t){if(!this._xml){const h=new l;(function f(p,_){p.openNode(_.tag,_.$),_.c&&_.c.forEach(g=>{f(p,g)}),_.t&&p.writeText(_.t),p.closeNode()})(h,this._model),this._xml=h.xml}t.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(t){switch(t){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(e,i,o){const a=e("./text-xform"),l=e("./rich-text-xform"),t=e("../base-xform");i.exports=class extends t{constructor(){super(),this.map={r:new l,t:new a}}get tag(){return"rPh"}render(h,f){if(h.openNode(this.tag,{sb:f.sb||0,eb:f.eb||0}),f&&f.hasOwnProperty("richText")&&f.richText){const{r:p}=this.map;f.richText.forEach(_=>{p.render(h,_)})}else f&&this.map.t.render(h,f.text);h.closeNode()}parseOpen(h){const{name:f}=h;return this.parser?(this.parser.parseOpen(h),!0):f===this.tag?(this.model={sb:parseInt(h.attributes.sb,10),eb:parseInt(h.attributes.eb,10)},!0):(this.parser=this.map[f],!!this.parser&&(this.parser.parseOpen(h),!0))}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser){if(!this.parser.parseClose(h)){switch(h){case"r":{let f=this.model.richText;f||(f=this.model.richText=[]),f.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(h){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(e,i,o){const a=e("./text-xform"),l=e("../style/font-xform"),t=e("../base-xform");class h extends t{constructor(p){super(),this.model=p}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new a)}get fontXform(){return this._fontXform||(this._fontXform=new l(h.FONT_OPTIONS))}render(p,_){_=_||this.model,p.openNode("r"),_.font&&this.fontXform.render(p,_.font),this.textXform.render(p,_.text),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(p),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(p),!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){switch(p){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(p),!0}}}h.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},i.exports=h},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(e,i,o){const a=e("./text-xform"),l=e("./rich-text-xform"),t=e("./phonetic-text-xform"),h=e("../base-xform");i.exports=class extends h{constructor(f){super(),this.model=f,this.map={r:new l,t:new a,rPh:new t}}get tag(){return"si"}render(f,p){f.openNode(this.tag),p&&p.hasOwnProperty("richText")&&p.richText?p.richText.length?p.richText.forEach(_=>{this.map.r.render(f,_)}):this.map.t.render(f,""):p!=null&&this.map.t.render(f,p),f.closeNode()}parseOpen(f){const{name:p}=f;return this.parser?(this.parser.parseOpen(f),!0):p===this.tag?(this.model={},!0):(this.parser=this.map[p],!!this.parser&&(this.parser.parseOpen(f),!0))}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser){if(!this.parser.parseClose(f)){switch(f){case"r":{let p=this.model.richText;p||(p=this.model.richText=[]),p.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(f){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../base-xform"),t=e("./shared-string-xform");i.exports=class extends l{constructor(h){super(),this.model=h||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new t)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(h){return this.model.values[h]}add(h){return h.richText?this.addRichText(h):this.addText(h)}addText(h){let f=this.hash[h];return f===void 0&&(f=this.hash[h]=this.model.values.length,this.model.values.push(h)),this.model.count++,f}addRichText(h){const f=this.sharedStringXform.toXml(h);let p=this.rich[f];return p===void 0&&(p=this.rich[f]=this.model.values.length,this.model.values.push(h)),this.model.count++,p}render(h,f){f=f||this._values,h.openXml(a.StdDocAttributes),h.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:f.count,uniqueCount:f.values.length});const p=this.sharedStringXform;f.values.forEach(_=>{p.render(h,_)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(h),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(h))}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(h){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+h)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"t"}render(l,t){l.openNode("t"),/^\s|\n|\s$/.test(t)&&l.addAttribute("xml:space","preserve"),l.writeText(t),l.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(l,t)=>String.fromCharCode(parseInt(t,16)))}parseOpen(l){switch(l.name){case"t":return this._text=[],!0;default:return!1}}parseText(l){this._text.push(l)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(e,i,o){const a=e("../../../doc/enums"),l=e("../../../utils/utils"),t=e("../base-xform"),h={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((p,_)=>(p[_]=!0,p),{}),horizontal(p){return this.horizontalValues[p]?p:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((p,_)=>(p[_]=!0,p),{}),vertical(p){return p==="middle"?"center":this.verticalValues[p]?p:void 0},wrapText:p=>!!p||void 0,shrinkToFit:p=>!!p||void 0,textRotation(p){switch(p){case"vertical":return p;default:return(p=l.validInt(p))>=-90&&p<=90?p:void 0}},indent:p=>(p=l.validInt(p),Math.max(0,p)),readingOrder(p){switch(p){case"ltr":return a.ReadingOrder.LeftToRight;case"rtl":return a.ReadingOrder.RightToLeft;default:return}}},f={toXml(p){if(p=h.textRotation(p)){if(p==="vertical")return 255;const _=Math.round(p);if(_>=0&&_<=90)return _;if(_<0&&_>=-90)return 90-_}},toModel(p){const _=l.validInt(p);if(_!==void 0){if(_===255)return"vertical";if(_>=0&&_<=90)return _;if(_>90&&_<=180)return 90-_}}};i.exports=class extends t{get tag(){return"alignment"}render(p,_){p.addRollback(),p.openNode("alignment");let g=!1;function m(b,x){x&&(p.addAttribute(b,x),g=!0)}m("horizontal",h.horizontal(_.horizontal)),m("vertical",h.vertical(_.vertical)),m("wrapText",!!h.wrapText(_.wrapText)&&"1"),m("shrinkToFit",!!h.shrinkToFit(_.shrinkToFit)&&"1"),m("indent",h.indent(_.indent)),m("textRotation",f.toXml(_.textRotation)),m("readingOrder",h.readingOrder(_.readingOrder)),p.closeNode(),g?p.commit():p.rollback()}parseOpen(p){const _={};let g=!1;function m(b,x,v){b&&(_[x]=v,g=!0)}m(p.attributes.horizontal,"horizontal",p.attributes.horizontal),m(p.attributes.vertical,"vertical",p.attributes.vertical==="center"?"middle":p.attributes.vertical),m(p.attributes.wrapText,"wrapText",l.parseBoolean(p.attributes.wrapText)),m(p.attributes.shrinkToFit,"shrinkToFit",l.parseBoolean(p.attributes.shrinkToFit)),m(p.attributes.indent,"indent",parseInt(p.attributes.indent,10)),m(p.attributes.textRotation,"textRotation",f.toModel(p.attributes.textRotation)),m(p.attributes.readingOrder,"readingOrder",p.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=g?_:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(e,i,o){const a=e("../base-xform"),l=e("../../../utils/utils"),t=e("./color-xform");class h extends a{constructor(p){super(),this.name=p,this.map={color:new t}}get tag(){return this.name}render(p,_,g){const m=_&&_.color||g||this.defaultColor;p.openNode(this.name),_&&_.style&&(p.addAttribute("style",_.style),m&&this.map.color.render(p,m)),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case this.name:{const{style:_}=p.attributes;return this.model=_?{style:_}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(p),!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){return this.parser?(this.parser.parseClose(p)||(this.parser=void 0),!0):(p===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(p){return h.validStyleValues[p]}}h.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((f,p)=>(f[p]=!0,f),{}),i.exports=class extends a{constructor(){super(),this.map={top:new h("top"),left:new h("left"),bottom:new h("bottom"),right:new h("right"),diagonal:new h("diagonal")}}render(f,p){const{color:_}=p;function g(m,b){m&&!m.color&&p.color&&(m={...m,color:p.color}),b.render(f,m,_)}f.openNode("border"),p.diagonal&&p.diagonal.style&&(p.diagonal.up&&f.addAttribute("diagonalUp","1"),p.diagonal.down&&f.addAttribute("diagonalDown","1")),g(p.left,this.map.left),g(p.right,this.map.right),g(p.top,this.map.top),g(p.bottom,this.map.bottom),g(p.diagonal,this.map.diagonal),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"border":return this.reset(),this.diagonalUp=l.parseBoolean(f.attributes.diagonalUp),this.diagonalDown=l.parseBoolean(f.attributes.diagonalDown),!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;if(f==="border"){const p=this.model={},_=function(g,m,b){m&&(b&&Object.assign(m,b),p[g]=m)};_("left",this.map.left.model),_("right",this.map.right.model),_("top",this.map.top.model),_("bottom",this.map.bottom.model),_("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{constructor(l){super(),this.name=l||"color"}get tag(){return this.name}render(l,t){return!!t&&(l.openNode(this.name),t.argb?l.addAttribute("rgb",t.argb):t.theme!==void 0?(l.addAttribute("theme",t.theme),t.tint!==void 0&&l.addAttribute("tint",t.tint)):t.indexed!==void 0?l.addAttribute("indexed",t.indexed):l.addAttribute("auto","1"),l.closeNode(),!0)}parseOpen(l){return l.name===this.name&&(l.attributes.rgb?this.model={argb:l.attributes.rgb}:l.attributes.theme?(this.model={theme:parseInt(l.attributes.theme,10)},l.attributes.tint&&(this.model.tint=parseFloat(l.attributes.tint))):l.attributes.indexed?this.model={indexed:parseInt(l.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(e,i,o){const a=e("../base-xform"),l=e("./alignment-xform"),t=e("./border-xform"),h=e("./fill-xform"),f=e("./font-xform"),p=e("./numfmt-xform"),_=e("./protection-xform");i.exports=class extends a{constructor(){super(),this.map={alignment:new l,border:new t,fill:new h,font:new f,numFmt:new p,protection:new _}}get tag(){return"dxf"}render(g,m){if(g.openNode(this.tag),m.font&&this.map.font.render(g,m.font),m.numFmt&&m.numFmtId){const b={id:m.numFmtId,formatCode:m.numFmt};this.map.numFmt.render(g,b)}m.fill&&this.map.fill.render(g,m.fill),m.alignment&&this.map.alignment.render(g,m.alignment),m.border&&this.map.border.render(g,m.border),m.protection&&this.map.protection.render(g,m.protection),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[g.name],this.parser&&this.parser.parseOpen(g),!0}}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){return this.parser?(this.parser.parseClose(g)||(this.parser=void 0),!0):g!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(e,i,o){const a=e("../base-xform"),l=e("./color-xform");class t extends a{constructor(){super(),this.map={color:new l}}get tag(){return"stop"}render(g,m){g.openNode("stop"),g.addAttribute("position",m.position),this.map.color.render(g,m.color),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case"stop":return this.model={position:parseFloat(g.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(g),!0;default:return!1}}parseText(){}parseClose(g){return!!this.parser&&(this.parser.parseClose(g)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class h extends a{constructor(){super(),this.map={fgColor:new l("fgColor"),bgColor:new l("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(g,m){g.openNode("patternFill"),g.addAttribute("patternType",m.pattern),m.fgColor&&this.map.fgColor.render(g,m.fgColor),m.bgColor&&this.map.bgColor.render(g,m.bgColor),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case"patternFill":return this.model={type:"pattern",pattern:g.attributes.patternType},!0;default:return this.parser=this.map[g.name],!!this.parser&&(this.parser.parseOpen(g),!0)}}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){return!!this.parser&&(this.parser.parseClose(g)||(this.parser.model&&(this.model[g]=this.parser.model),this.parser=void 0),!0)}}class f extends a{constructor(){super(),this.map={stop:new t}}get name(){return"gradient"}get tag(){return"gradientFill"}render(g,m){switch(g.openNode("gradientFill"),m.gradient){case"angle":g.addAttribute("degree",m.degree);break;case"path":g.addAttribute("type","path"),m.center.left&&(g.addAttribute("left",m.center.left),m.center.right===void 0&&g.addAttribute("right",m.center.left)),m.center.right&&g.addAttribute("right",m.center.right),m.center.top&&(g.addAttribute("top",m.center.top),m.center.bottom===void 0&&g.addAttribute("bottom",m.center.top)),m.center.bottom&&g.addAttribute("bottom",m.center.bottom)}const b=this.map.stop;m.stops.forEach(x=>{b.render(g,x)}),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case"gradientFill":{const m=this.model={stops:[]};return g.attributes.degree?(m.gradient="angle",m.degree=parseInt(g.attributes.degree,10)):g.attributes.type==="path"&&(m.gradient="path",m.center={left:g.attributes.left?parseFloat(g.attributes.left):0,top:g.attributes.top?parseFloat(g.attributes.top):0},g.attributes.right!==g.attributes.left&&(m.center.right=g.attributes.right?parseFloat(g.attributes.right):0),g.attributes.bottom!==g.attributes.top&&(m.center.bottom=g.attributes.bottom?parseFloat(g.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(g),!0;default:return!1}}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){return!!this.parser&&(this.parser.parseClose(g)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class p extends a{constructor(){super(),this.map={patternFill:new h,gradientFill:new f}}get tag(){return"fill"}render(g,m){switch(g.addRollback(),g.openNode("fill"),m.type){case"pattern":this.map.patternFill.render(g,m);break;case"gradient":this.map.gradientFill.render(g,m);break;default:return void g.rollback()}g.closeNode(),g.commit()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;switch(g.name){case"fill":return this.model={},!0;default:return this.parser=this.map[g.name],!!this.parser&&(this.parser.parseOpen(g),!0)}}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){return!!this.parser&&(this.parser.parseClose(g)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(g){return p.validPatternValues[g]}}p.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((_,g)=>(_[g]=!0,_),{}),p.StopXform=t,p.PatternFillXform=h,p.GradientFillXform=f,i.exports=p},{"../base-xform":32,"./color-xform":128}],131:[function(e,i,o){const a=e("./color-xform"),l=e("../simple/boolean-xform"),t=e("../simple/integer-xform"),h=e("../simple/string-xform"),f=e("./underline-xform"),p=e("../../../utils/under-dash"),_=e("../base-xform");class g extends _{constructor(b){super(),this.options=b||g.OPTIONS,this.map={b:{prop:"bold",xform:new l({tag:"b",attr:"val"})},i:{prop:"italic",xform:new l({tag:"i",attr:"val"})},u:{prop:"underline",xform:new f},charset:{prop:"charset",xform:new t({tag:"charset",attr:"val"})},color:{prop:"color",xform:new a},condense:{prop:"condense",xform:new l({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new l({tag:"extend",attr:"val"})},family:{prop:"family",xform:new t({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new l({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new h({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new h({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new l({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new l({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new t({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new h({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(b,x){const{map:v}=this;b.openNode(this.options.tagName),p.each(this.map,(S,B)=>{v[B].xform.render(b,x[S.prop])}),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;if(this.map[b.name])return this.parser=this.map[b.name].xform,this.parser.parseOpen(b);switch(b.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser&&!this.parser.parseClose(b)){const x=this.map[b];return this.parser.model&&(this.model[x.prop]=this.parser.model),this.parser=void 0,!0}switch(b){case this.options.tagName:return!1;default:return!0}}}g.OPTIONS={tagName:"font",fontNameTag:"name"},i.exports=g},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(e,i,o){const a=e("../../../utils/under-dash"),l=e("../../defaultnumformats"),t=e("../base-xform"),h=function(){const p={};return a.each(l,(_,g)=>{_.f&&(p[_.f]=parseInt(g,10))}),p}();class f extends t{constructor(_,g){super(),this.id=_,this.formatCode=g}get tag(){return"numFmt"}render(_,g){_.leafNode("numFmt",{numFmtId:g.id,formatCode:g.formatCode})}parseOpen(_){switch(_.name){case"numFmt":return this.model={id:parseInt(_.attributes.numFmtId,10),formatCode:_.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}f.getDefaultFmtId=function(p){return h[p]},f.getDefaultFmtCode=function(p){return l[p]&&l[p].f},i.exports=f},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(e,i,o){const a=e("../base-xform"),l={boolean:(t,h)=>t===void 0?h:t};i.exports=class extends a{get tag(){return"protection"}render(t,h){t.addRollback(),t.openNode("protection");let f=!1;function p(_,g){g!==void 0&&(t.addAttribute(_,g),f=!0)}p("locked",l.boolean(h.locked,!0)?void 0:"0"),p("hidden",l.boolean(h.hidden,!1)?"1":void 0),t.closeNode(),f?t.commit():t.rollback()}parseOpen(t){const h={locked:t.attributes.locked!=="0",hidden:t.attributes.hidden==="1"},f=!h.locked||h.hidden;this.model=f?h:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(e,i,o){const a=e("../base-xform"),l=e("./alignment-xform"),t=e("./protection-xform");i.exports=class extends a{constructor(h){super(),this.xfId=!(!h||!h.xfId),this.map={alignment:new l,protection:new t}}get tag(){return"xf"}render(h,f){h.openNode("xf",{numFmtId:f.numFmtId||0,fontId:f.fontId||0,fillId:f.fillId||0,borderId:f.borderId||0}),this.xfId&&h.addAttribute("xfId",f.xfId||0),f.numFmtId&&h.addAttribute("applyNumberFormat","1"),f.fontId&&h.addAttribute("applyFont","1"),f.fillId&&h.addAttribute("applyFill","1"),f.borderId&&h.addAttribute("applyBorder","1"),f.alignment&&h.addAttribute("applyAlignment","1"),f.protection&&h.addAttribute("applyProtection","1"),f.alignment&&this.map.alignment.render(h,f.alignment),f.protection&&this.map.protection.render(h,f.protection),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"xf":return this.model={numFmtId:parseInt(h.attributes.numFmtId,10),fontId:parseInt(h.attributes.fontId,10),fillId:parseInt(h.attributes.fillId,10),borderId:parseInt(h.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(h.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(h),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return this.parser?(this.parser.parseClose(h)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):h!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(e,i,o){const a=e("../../../doc/enums"),l=e("../../../utils/xml-stream"),t=e("../base-xform"),h=e("../static-xform"),f=e("../list-xform"),p=e("./font-xform"),_=e("./fill-xform"),g=e("./border-xform"),m=e("./numfmt-xform"),b=e("./style-xform"),x=e("./dxf-xform");class v extends t{constructor(B){super(),this.map={numFmts:new f({tag:"numFmts",count:!0,childXform:new m}),fonts:new f({tag:"fonts",count:!0,childXform:new p,$:{"x14ac:knownFonts":1}}),fills:new f({tag:"fills",count:!0,childXform:new _}),borders:new f({tag:"borders",count:!0,childXform:new g}),cellStyleXfs:new f({tag:"cellStyleXfs",count:!0,childXform:new b}),cellXfs:new f({tag:"cellXfs",count:!0,childXform:new b({xfId:!0})}),dxfs:new f({tag:"dxfs",always:!0,count:!0,childXform:new x}),numFmt:new m,font:new p,fill:new _,border:new g,style:new b({xfId:!0}),cellStyles:v.STATIC_XFORMS.cellStyles,tableStyles:v.STATIC_XFORMS.tableStyles,extLst:v.STATIC_XFORMS.extLst},B&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(B,F){F=F||this.model,B.openXml(l.StdDocAttributes),B.openNode("styleSheet",v.STYLESHEET_ATTRIBUTES),this.index?(F.numFmts&&F.numFmts.length&&(B.openNode("numFmts",{count:F.numFmts.length}),F.numFmts.forEach(O=>{B.writeXml(O)}),B.closeNode()),F.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),B.openNode("fonts",{count:F.fonts.length,"x14ac:knownFonts":1}),F.fonts.forEach(O=>{B.writeXml(O)}),B.closeNode(),B.openNode("fills",{count:F.fills.length}),F.fills.forEach(O=>{B.writeXml(O)}),B.closeNode(),B.openNode("borders",{count:F.borders.length}),F.borders.forEach(O=>{B.writeXml(O)}),B.closeNode(),this.map.cellStyleXfs.render(B,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),B.openNode("cellXfs",{count:F.styles.length}),F.styles.forEach(O=>{B.writeXml(O)}),B.closeNode()):(this.map.numFmts.render(B,F.numFmts),this.map.fonts.render(B,F.fonts),this.map.fills.render(B,F.fills),this.map.borders.render(B,F.borders),this.map.cellStyleXfs.render(B,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(B,F.styles)),v.STATIC_XFORMS.cellStyles.render(B),this.map.dxfs.render(B,F.dxfs),v.STATIC_XFORMS.tableStyles.render(B),v.STATIC_XFORMS.extLst.render(B),B.closeNode()}parseOpen(B){if(this.parser)return this.parser.parseOpen(B),!0;switch(B.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[B.name],this.parser&&this.parser.parseOpen(B),!0}}parseText(B){this.parser&&this.parser.parseText(B)}parseClose(B){if(this.parser)return this.parser.parseClose(B)||(this.parser=void 0),!0;switch(B){case"styleSheet":{this.model={};const F=(O,V)=>{V.model&&V.model.length&&(this.model[O]=V.model)};if(F("numFmts",this.map.numFmts),F("fonts",this.map.fonts),F("fills",this.map.fills),F("borders",this.map.borders),F("styles",this.map.cellXfs),F("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const O=this.index.numFmt;this.model.numFmts.forEach(V=>{O[V.id]=V.formatCode})}return!1}default:return!0}}addStyleModel(B,F){if(!B)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(B))return this.weakMap.get(B);const O={};if(F=F||a.ValueType.Number,B.numFmt)O.numFmtId=this._addNumFmtStr(B.numFmt);else switch(F){case a.ValueType.Number:O.numFmtId=this._addNumFmtStr("General");break;case a.ValueType.Date:O.numFmtId=this._addNumFmtStr("mm-dd-yy")}B.font&&(O.fontId=this._addFont(B.font)),B.border&&(O.borderId=this._addBorder(B.border)),B.fill&&(O.fillId=this._addFill(B.fill)),B.alignment&&(O.alignment=B.alignment),B.protection&&(O.protection=B.protection);const V=this._addStyle(O);return this.weakMap&&this.weakMap.set(B,V),V}getStyleModel(B){const F=this.model.styles[B];if(!F)return null;let O=this.index.model[B];if(O)return O;if(O=this.index.model[B]={},F.numFmtId){const X=this.index.numFmt[F.numFmtId]||m.getDefaultFmtCode(F.numFmtId);X&&(O.numFmt=X)}function V(X,Q,ee){if(ee||ee===0){const ne=Q[ee];ne&&(O[X]=ne)}}return V("font",this.model.fonts,F.fontId),V("border",this.model.borders,F.borderId),V("fill",this.model.fills,F.fillId),F.alignment&&(O.alignment=F.alignment),F.protection&&(O.protection=F.protection),O}addDxfStyle(B){return B.numFmt&&(B.numFmtId=this._addNumFmtStr(B.numFmt)),this.model.dxfs.push(B),this.model.dxfs.length-1}getDxfStyle(B){return this.model.dxfs[B]}_addStyle(B){const F=this.map.style.toXml(B);let O=this.index.style[F];return O===void 0&&(O=this.index.style[F]=this.model.styles.length,this.model.styles.push(F)),O}_addNumFmtStr(B){let F=m.getDefaultFmtId(B);if(F!==void 0||(F=this.index.numFmt[B],F!==void 0))return F;F=this.index.numFmt[B]=164+this.model.numFmts.length;const O=this.map.numFmt.toXml({id:F,formatCode:B});return this.model.numFmts.push(O),F}_addFont(B){const F=this.map.font.toXml(B);let O=this.index.font[F];return O===void 0&&(O=this.index.font[F]=this.model.fonts.length,this.model.fonts.push(F)),O}_addBorder(B){const F=this.map.border.toXml(B);let O=this.index.border[F];return O===void 0&&(O=this.index.border[F]=this.model.borders.length,this.model.borders.push(F)),O}_addFill(B){const F=this.map.fill.toXml(B);let O=this.index.fill[F];return O===void 0&&(O=this.index.fill[F]=this.model.fills.length,this.model.fills.push(F)),O}}v.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},v.STATIC_XFORMS={cellStyles:new h({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new h({tag:"dxfs",$:{count:0}}),tableStyles:new h({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new h({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},v.Mock=class extends v{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(S){return S.autodrain(),Promise.resolve()}addStyleModel(S,B){switch(B){case a.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const S={numFmtId:m.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(S)}return this._dateStyleId}getStyleModel(){return{}}},i.exports=v},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(e,i,o){const a=e("../base-xform");class l extends a{constructor(h){super(),this.model=h}get tag(){return"u"}render(h,f){if((f=f||this.model)===!0)h.leafNode("u");else{const p=l.Attributes[f];p&&h.leafNode("u",p)}}parseOpen(h){h.name==="u"&&(this.model=h.attributes.val||!0)}parseText(){}parseClose(){return!1}}l.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},i.exports=l},{"../base-xform":32}],137:[function(e,i,o){const a=e("../base-xform"),l=e("./filter-column-xform");i.exports=class extends a{constructor(){super(),this.map={filterColumn:new l}}get tag(){return"autoFilter"}prepare(t){t.columns.forEach((h,f)=>{this.map.filterColumn.prepare(h,{index:f})})}render(t,h){return t.openNode(this.tag,{ref:h.autoFilterRef}),h.columns.forEach(f=>{this.map.filterColumn.render(t,f)}),t.closeNode(),!0}parseOpen(t){if(this.parser)return this.parser.parseOpen(t),!0;switch(t.name){case this.tag:return this.model={autoFilterRef:t.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[t.name],this.parser)return this.parseOpen(t),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(t))}}parseText(t){this.parser&&this.parser.parseText(t)}parseClose(t){if(this.parser)return this.parser.parseClose(t)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(t){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+t)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"customFilter"}render(l,t){l.leafNode(this.tag,{val:t.val,operator:t.operator})}parseOpen(l){return l.name===this.tag&&(this.model={val:l.attributes.val,operator:l.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(e,i,o){const a=e("../base-xform"),l=e("../list-xform"),t=e("./custom-filter-xform"),h=e("./filter-xform");i.exports=class extends a{constructor(){super(),this.map={customFilters:new l({tag:"customFilters",count:!1,empty:!0,childXform:new t}),filters:new l({tag:"filters",count:!1,empty:!0,childXform:new h})}}get tag(){return"filterColumn"}prepare(f,p){f.colId=p.index.toString()}render(f,p){return p.customFilters?(f.openNode(this.tag,{colId:p.colId,hiddenButton:p.filterButton?"0":"1"}),this.map.customFilters.render(f,p.customFilters),f.closeNode(),!0):(f.leafNode(this.tag,{colId:p.colId,hiddenButton:p.filterButton?"0":"1"}),!0)}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;const{attributes:p}=f;switch(f.name){case this.tag:return this.model={filterButton:p.hiddenButton==="0"},!0;default:if(this.parser=this.map[f.name],this.parser)return this.parseOpen(f),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(f))}}parseText(){}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"filter"}render(l,t){l.leafNode(this.tag,{val:t.val})}parseOpen(l){return l.name===this.tag&&(this.model={val:l.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"tableColumn"}prepare(l,t){l.id=t.index+1}render(l,t){return l.leafNode(this.tag,{id:t.id.toString(),name:t.name,totalsRowLabel:t.totalsRowLabel,totalsRowFunction:t.totalsRowFunction,dxfId:t.dxfId}),!0}parseOpen(l){if(l.name===this.tag){const{attributes:t}=l;return this.model={name:t.name,totalsRowLabel:t.totalsRowLabel,totalsRowFunction:t.totalsRowFunction,dxfId:t.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(e,i,o){const a=e("../base-xform");i.exports=class extends a{get tag(){return"tableStyleInfo"}render(l,t){return l.leafNode(this.tag,{name:t.theme?t.theme:void 0,showFirstColumn:t.showFirstColumn?"1":"0",showLastColumn:t.showLastColumn?"1":"0",showRowStripes:t.showRowStripes?"1":"0",showColumnStripes:t.showColumnStripes?"1":"0"}),!0}parseOpen(l){if(l.name===this.tag){const{attributes:t}=l;return this.model={theme:t.name?t.name:null,showFirstColumn:t.showFirstColumn==="1",showLastColumn:t.showLastColumn==="1",showRowStripes:t.showRowStripes==="1",showColumnStripes:t.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(e,i,o){const a=e("../../../utils/xml-stream"),l=e("../base-xform"),t=e("../list-xform"),h=e("./auto-filter-xform"),f=e("./table-column-xform"),p=e("./table-style-info-xform");class _ extends l{constructor(){super(),this.map={autoFilter:new h,tableColumns:new t({tag:"tableColumns",count:!0,empty:!0,childXform:new f}),tableStyleInfo:new p}}prepare(m,b){this.map.autoFilter.prepare(m),this.map.tableColumns.prepare(m.columns,b)}get tag(){return"table"}render(m,b){m.openXml(a.StdDocAttributes),m.openNode(this.tag,{..._.TABLE_ATTRIBUTES,id:b.id,name:b.name,displayName:b.displayName||b.name,ref:b.tableRef,totalsRowCount:b.totalsRow?"1":void 0,totalsRowShown:b.totalsRow?void 0:"1",headerRowCount:b.headerRow?"1":"0"}),this.map.autoFilter.render(m,b),this.map.tableColumns.render(m,b.columns),this.map.tableStyleInfo.render(m,b.style),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;const{name:b,attributes:x}=m;switch(b){case this.tag:this.reset(),this.model={name:x.name,displayName:x.displayName||x.name,tableRef:x.ref,totalsRow:x.totalsRowCount==="1",headerRow:x.headerRowCount==="1"};break;default:this.parser=this.map[m.name],this.parser&&this.parser.parseOpen(m)}return!0}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser)return this.parser.parseClose(m)||(this.parser=void 0),!0;switch(m){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((b,x)=>{this.model.columns[x].filterButton=b.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(m,b){m.columns.forEach(x=>{x.dxfId!==void 0&&(x.style=b.styles.getDxfStyle(x.dxfId))})}}_.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},i.exports=_},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(e,i,o){(function(a,l){(function(){const t=e("fs"),h=e("jszip"),{PassThrough:f}=e("readable-stream"),p=e("../utils/zip-stream"),_=e("../utils/stream-buf"),g=e("../utils/utils"),m=e("../utils/xml-stream"),{bufferToString:b}=e("../utils/browser-buffer-decode"),x=e("./xform/style/styles-xform"),v=e("./xform/core/core-xform"),S=e("./xform/strings/shared-strings-xform"),B=e("./xform/core/relationships-xform"),F=e("./xform/core/content-types-xform"),O=e("./xform/core/app-xform"),V=e("./xform/book/workbook-xform"),X=e("./xform/sheet/worksheet-xform"),Q=e("./xform/drawing/drawing-xform"),ee=e("./xform/table/table-xform"),ne=e("./xform/comment/comments-xform"),Ae=e("./xform/comment/vml-notes-xform"),fe=e("./xml/theme1");class ce{constructor(Z){this.workbook=Z}async readFile(Z,z){if(!await g.fs.exists(Z))throw new Error("File not found: "+Z);const k=t.createReadStream(Z);try{const R=await this.read(k,z);return k.close(),R}catch(R){throw k.close(),R}}parseRels(Z){return new B().parseStream(Z)}parseWorkbook(Z){return new V().parseStream(Z)}parseSharedStrings(Z){return new S().parseStream(Z)}reconcile(Z,z){const k=new V,R=new X(z),N=new Q,U=new ee;k.reconcile(Z);const Y={media:Z.media,mediaIndex:Z.mediaIndex};Object.keys(Z.drawings).forEach(xe=>{const Te=Z.drawings[xe],Ue=Z.drawingRels[xe];Ue&&(Y.rels=Ue.reduce((pe,Oe)=>(pe[Oe.Id]=Oe,pe),{}),(Te.anchors||[]).forEach(pe=>{const Oe=pe.picture&&pe.picture.hyperlinks;Oe&&Y.rels[Oe.rId]&&(Oe.hyperlink=Y.rels[Oe.rId].Target,delete Oe.rId)}),N.reconcile(Te,Y))});const de={styles:Z.styles};Object.values(Z.tables).forEach(xe=>{U.reconcile(xe,de)});const J={styles:Z.styles,sharedStrings:Z.sharedStrings,media:Z.media,mediaIndex:Z.mediaIndex,date1904:Z.properties&&Z.properties.date1904,drawings:Z.drawings,comments:Z.comments,tables:Z.tables,vmlDrawings:Z.vmlDrawings};Z.worksheets.forEach(xe=>{xe.relationships=Z.worksheetRels[xe.sheetNo],R.reconcile(xe,J)}),delete Z.worksheetHash,delete Z.worksheetRels,delete Z.globalRels,delete Z.sharedStrings,delete Z.workbookRels,delete Z.sheetDefs,delete Z.styles,delete Z.mediaIndex,delete Z.drawings,delete Z.drawingRels,delete Z.vmlDrawings}async _processWorksheetEntry(Z,z,k,R,N){const U=new X(R),Y=await U.parseStream(Z);Y.sheetNo=k,z.worksheetHash[N]=Y,z.worksheets.push(Y)}async _processCommentEntry(Z,z,k){const R=new ne,N=await R.parseStream(Z);z.comments[`../${k}.xml`]=N}async _processTableEntry(Z,z,k){const R=new ee,N=await R.parseStream(Z);z.tables[`../tables/${k}.xml`]=N}async _processWorksheetRelsEntry(Z,z,k){const R=new B,N=await R.parseStream(Z);z.worksheetRels[k]=N}async _processMediaEntry(Z,z,k){const R=k.lastIndexOf(".");if(R>=1){const N=k.substr(R+1),U=k.substr(0,R);await new Promise((Y,de)=>{const J=new _;J.on("finish",()=>{z.mediaIndex[k]=z.media.length,z.mediaIndex[U]=z.media.length;const xe={type:"image",name:U,extension:N,buffer:J.toBuffer()};z.media.push(xe),Y()}),Z.on("error",xe=>{de(xe)}),Z.pipe(J)})}}async _processDrawingEntry(Z,z,k){const R=new Q,N=await R.parseStream(Z);z.drawings[k]=N}async _processDrawingRelsEntry(Z,z,k){const R=new B,N=await R.parseStream(Z);z.drawingRels[k]=N}async _processVmlDrawingEntry(Z,z,k){const R=new Ae,N=await R.parseStream(Z);z.vmlDrawings[`../drawings/${k}.vml`]=N}async _processThemeEntry(Z,z,k){await new Promise((R,N)=>{const U=new _;Z.on("error",N),U.on("error",N),U.on("finish",()=>{z.themes[k]=U.read().toString(),R()}),Z.pipe(U)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(Z,z){!Z[Symbol.asyncIterator]&&Z.pipe&&(Z=Z.pipe(new f));const k=[];for await(const R of Z)k.push(R);return this.load(l.concat(k),z)}async load(Z,z){let k;k=z&&z.base64?l.from(Z.toString(),"base64"):Z;const R={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},N=await h.loadAsync(k);for(const U of Object.values(N.files))if(!U.dir){let Y,de=U.name;if(de[0]==="/"&&(de=de.substr(1)),de.match(/xl\/media\//)||de.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))Y=new f,Y.write(await U.async("nodebuffer"));else{let J;Y=new f({writableObjectMode:!0,readableObjectMode:!0}),J=a.browser?b(await U.async("nodebuffer")):await U.async("string");const xe=16384;for(let Te=0;Te<J.length;Te+=xe)Y.write(J.substring(Te,Te+xe))}switch(Y.end(),de){case"_rels/.rels":R.globalRels=await this.parseRels(Y);break;case"xl/workbook.xml":{const J=await this.parseWorkbook(Y);R.sheets=J.sheets,R.definedNames=J.definedNames,R.views=J.views,R.properties=J.properties,R.calcProperties=J.calcProperties;break}case"xl/_rels/workbook.xml.rels":R.workbookRels=await this.parseRels(Y);break;case"xl/sharedStrings.xml":R.sharedStrings=new S,await R.sharedStrings.parseStream(Y);break;case"xl/styles.xml":R.styles=new x,await R.styles.parseStream(Y);break;case"docProps/app.xml":{const J=new O,xe=await J.parseStream(Y);R.company=xe.company,R.manager=xe.manager;break}case"docProps/core.xml":{const J=new v,xe=await J.parseStream(Y);Object.assign(R,xe);break}default:{let J=de.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(J){await this._processWorksheetEntry(Y,R,J[1],z,de);break}if(J=de.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),J){await this._processWorksheetRelsEntry(Y,R,J[1]);break}if(J=de.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),J){await this._processThemeEntry(Y,R,J[1]);break}if(J=de.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),J){await this._processMediaEntry(Y,R,J[1]);break}if(J=de.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),J){await this._processDrawingEntry(Y,R,J[1]);break}if(J=de.match(/xl\/(comments\d+)[.]xml/),J){await this._processCommentEntry(Y,R,J[1]);break}if(J=de.match(/xl\/tables\/(table\d+)[.]xml/),J){await this._processTableEntry(Y,R,J[1]);break}if(J=de.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),J){await this._processDrawingRelsEntry(Y,R,J[1]);break}if(J=de.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),J){await this._processVmlDrawingEntry(Y,R,J[1]);break}}}}return this.reconcile(R,z),this.workbook.model=R,this.workbook}async addMedia(Z,z){await Promise.all(z.media.map(async k=>{if(k.type==="image"){const R=`xl/media/${k.name}.${k.extension}`;if(k.filename){const N=await function(U,Y){return new Promise((de,J)=>{t.readFile(U,Y,(xe,Te)=>{xe?J(xe):de(Te)})})}(k.filename);return Z.append(N,{name:R})}if(k.buffer)return Z.append(k.buffer,{name:R});if(k.base64){const N=k.base64,U=N.substring(N.indexOf(",")+1);return Z.append(U,{name:R,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(Z,z){const k=new Q,R=new B;z.worksheets.forEach(N=>{const{drawing:U}=N;if(U){k.prepare(U,{});let Y=k.toXml(U);Z.append(Y,{name:`xl/drawings/${U.name}.xml`}),Y=R.toXml(U.rels),Z.append(Y,{name:`xl/drawings/_rels/${U.name}.xml.rels`})}})}addTables(Z,z){const k=new ee;z.worksheets.forEach(R=>{const{tables:N}=R;N.forEach(U=>{k.prepare(U,{});const Y=k.toXml(U);Z.append(Y,{name:"xl/tables/"+U.target})})})}async addContentTypes(Z,z){const k=new F().toXml(z);Z.append(k,{name:"[Content_Types].xml"})}async addApp(Z,z){const k=new O().toXml(z);Z.append(k,{name:"docProps/app.xml"})}async addCore(Z,z){const k=new v;Z.append(k.toXml(z),{name:"docProps/core.xml"})}async addThemes(Z,z){const k=z.themes||{theme1:fe};Object.keys(k).forEach(R=>{const N=k[R],U=`xl/theme/${R}.xml`;Z.append(N,{name:U})})}async addOfficeRels(Z){const z=new B().toXml([{Id:"rId1",Type:ce.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:ce.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:ce.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);Z.append(z,{name:"_rels/.rels"})}async addWorkbookRels(Z,z){let k=1;const R=[{Id:"rId"+k++,Type:ce.RelType.Styles,Target:"styles.xml"},{Id:"rId"+k++,Type:ce.RelType.Theme,Target:"theme/theme1.xml"}];z.sharedStrings.count&&R.push({Id:"rId"+k++,Type:ce.RelType.SharedStrings,Target:"sharedStrings.xml"}),z.worksheets.forEach(U=>{U.rId="rId"+k++,R.push({Id:U.rId,Type:ce.RelType.Worksheet,Target:`worksheets/sheet${U.id}.xml`})});const N=new B().toXml(R);Z.append(N,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(Z,z){z.sharedStrings&&z.sharedStrings.count&&Z.append(z.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(Z,z){const{xml:k}=z.styles;k&&Z.append(k,{name:"xl/styles.xml"})}async addWorkbook(Z,z){const k=new V;Z.append(k.toXml(z),{name:"xl/workbook.xml"})}async addWorksheets(Z,z){const k=new X,R=new B,N=new ne,U=new Ae;z.worksheets.forEach(Y=>{let de=new m;k.render(de,Y),Z.append(de.xml,{name:`xl/worksheets/sheet${Y.id}.xml`}),Y.rels&&Y.rels.length&&(de=new m,R.render(de,Y.rels),Z.append(de.xml,{name:`xl/worksheets/_rels/sheet${Y.id}.xml.rels`})),Y.comments.length>0&&(de=new m,N.render(de,Y),Z.append(de.xml,{name:`xl/comments${Y.id}.xml`}),de=new m,U.render(de,Y),Z.append(de.xml,{name:`xl/drawings/vmlDrawing${Y.id}.vml`}))})}_finalize(Z){return new Promise((z,k)=>{Z.on("finish",()=>{z(this)}),Z.on("error",k),Z.finalize()})}prepareModel(Z,z){Z.creator=Z.creator||"ExcelJS",Z.lastModifiedBy=Z.lastModifiedBy||"ExcelJS",Z.created=Z.created||new Date,Z.modified=Z.modified||new Date,Z.useSharedStrings=z.useSharedStrings===void 0||z.useSharedStrings,Z.useStyles=z.useStyles===void 0||z.useStyles,Z.sharedStrings=new S,Z.styles=Z.useStyles?new x(!0):new x.Mock;const k=new V,R=new X;k.prepare(Z);const N={sharedStrings:Z.sharedStrings,styles:Z.styles,date1904:Z.properties.date1904,drawingsCount:0,media:Z.media};N.drawings=Z.drawings=[],N.commentRefs=Z.commentRefs=[];let U=0;Z.tables=[],Z.worksheets.forEach(Y=>{Y.tables.forEach(de=>{U++,de.target=`table${U}.xml`,de.id=U,Z.tables.push(de)}),R.prepare(Y,N)})}async write(Z,z){z=z||{};const{model:k}=this.workbook,R=new p.ZipWriter(z.zip);return R.pipe(Z),this.prepareModel(k,z),await this.addContentTypes(R,k),await this.addOfficeRels(R,k),await this.addWorkbookRels(R,k),await this.addWorksheets(R,k),await this.addSharedStrings(R,k),await this.addDrawings(R,k),await this.addTables(R,k),await Promise.all([this.addThemes(R,k),this.addStyles(R,k)]),await this.addMedia(R,k),await Promise.all([this.addApp(R,k),this.addCore(R,k)]),await this.addWorkbook(R,k),this._finalize(R)}writeFile(Z,z){const k=t.createWriteStream(Z);return new Promise((R,N)=>{k.on("finish",()=>{R()}),k.on("error",U=>{N(U)}),this.write(k,z).then(()=>{k.end()}).catch(U=>{N(U)})})}async writeBuffer(Z){const z=new _;return await this.write(z,Z),z.read()}}ce.RelType=e("./rel-type"),i.exports=ce}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(e,i,o){i.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ï¼­ï¼³ ï¼°ã´ã·ãã¯"/> <a:font script="Hang" typeface="ë§ì ê³ ë"/> <a:font script="Hans" typeface="å®ä½"/> <a:font script="Hant" typeface="æ°ç´°æé«"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ï¼­ï¼³ ï¼°ã´ã·ãã¯"/> <a:font script="Hang" typeface="ë§ì ê³ ë"/> <a:font script="Hans" typeface="å®ä½"/> <a:font script="Hant" typeface="æ°ç´°æé«"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(e,i,o){(function(a){(function(){Object.defineProperty(o,"__esModule",{value:!0}),o.CsvFormatterStream=void 0;const l=e("stream"),t=e("./formatter");class h extends l.Transform{constructor(p){super({writableObjectMode:p.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=p,this.rowFormatter=new t.RowFormatter(p),this.hasWrittenBOM=!p.writeBOM}transform(p){return this.rowFormatter.rowTransform=p,this}_transform(p,_,g){let m=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(p,(b,x)=>b?(m=!0,g(b)):(x&&x.forEach(v=>{this.push(a.from(v,"utf8"))}),m=!0,g()))}catch(b){if(m)throw b;g(b)}}_flush(p){this.rowFormatter.finish((_,g)=>_?p(_):(g&&g.forEach(m=>{this.push(a.from(m,"utf8"))}),p()))}}o.CsvFormatterStream=h}).call(this)}).call(this,e("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.FormatterOptions=void 0,o.FormatterOptions=class{constructor(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var l;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,a||{}),(a==null?void 0:a.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(a==null?void 0:a.quote)===!0?this.quote='"':(a==null?void 0:a.quote)===!1&&(this.quote=""),typeof(a==null?void 0:a.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((l=a.writeHeaders)===null||l===void 0||l),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(e,i,o){var a=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(o,"__esModule",{value:!0}),o.FieldFormatter=void 0;const l=a(e("lodash.isboolean")),t=a(e("lodash.isnil")),h=a(e("lodash.escaperegexp"));o.FieldFormatter=class{constructor(f){this._headers=null,this.formatterOptions=f,f.headers!==null&&(this.headers=f.headers),this.REPLACE_REGEXP=new RegExp(f.quote,"g");const p=`[${f.delimiter}${h.default(f.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(p)}set headers(f){this._headers=f}shouldQuote(f,p){const _=p?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return l.default(_)?_:Array.isArray(_)?_[f]:this._headers!==null&&_[this._headers[f]]}format(f,p,_){const g=(""+(t.default(f)?"":f)).replace(/\0/g,""),{formatterOptions:m}=this;return m.quote!==""&&g.indexOf(m.quote)!==-1?this.quoteField(g.replace(this.REPLACE_REGEXP,m.escapedQuote)):g.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(p,_)?this.quoteField(g):g}quoteField(f){const{quote:p}=this.formatterOptions;return`${p}${f}${p}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(e,i,o){var a=function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(o,"__esModule",{value:!0}),o.RowFormatter=void 0;const l=a(e("lodash.isfunction")),t=a(e("lodash.isequal")),h=e("./FieldFormatter"),f=e("../types");class p{constructor(g){this.rowCount=0,this.formatterOptions=g,this.fieldFormatter=new h.FieldFormatter(g),this.headers=g.headers,this.shouldWriteHeaders=g.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),g.transform&&(this.rowTransform=g.transform)}static isRowHashArray(g){return!!Array.isArray(g)&&Array.isArray(g[0])&&g[0].length===2}static isRowArray(g){return Array.isArray(g)&&!this.isRowHashArray(g)}static gatherHeaders(g){return p.isRowHashArray(g)?g.map(m=>m[0]):Array.isArray(g)?g:Object.keys(g)}static createTransform(g){return f.isSyncTransform(g)?(m,b)=>{let x=null;try{x=g(m)}catch(v){return b(v)}return b(null,x)}:(m,b)=>{g(m,b)}}set rowTransform(g){if(!l.default(g))throw new TypeError("The transform should be a function");this._rowTransform=p.createTransform(g)}format(g,m){this.callTransformer(g,(b,x)=>{if(b)return m(b);if(!g)return m(null);const v=[];if(x){const{shouldFormatColumns:S,headers:B}=this.checkHeaders(x);if(this.shouldWriteHeaders&&B&&!this.hasWrittenHeaders&&(v.push(this.formatColumns(B,!0)),this.hasWrittenHeaders=!0),S){const F=this.gatherColumns(x);v.push(this.formatColumns(F,!1))}}return m(null,v)})}finish(g){const m=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return g(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));m.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&m.push(this.formatterOptions.rowDelimiter),g(null,m)}checkHeaders(g){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const m=p.gatherHeaders(g);return this.headers=m,this.fieldFormatter.headers=m,this.shouldWriteHeaders?{shouldFormatColumns:!t.default(m,g),headers:m}:{shouldFormatColumns:!0,headers:null}}gatherColumns(g){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(g)?p.isRowHashArray(g)?this.headers.map((m,b)=>{const x=g[b];return x?x[1]:""}):p.isRowArray(g)&&!this.shouldWriteHeaders?g:this.headers.map((m,b)=>g[b]):this.headers.map(m=>g[m])}callTransformer(g,m){return this._rowTransform?this._rowTransform(g,m):m(null,g)}formatColumns(g,m){const b=g.map((v,S)=>this.fieldFormatter.format(v,S,m)).join(this.formatterOptions.delimiter),{rowCount:x}=this;return this.rowCount+=1,x?[this.formatterOptions.rowDelimiter,b].join(""):b}}o.RowFormatter=p},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.FieldFormatter=o.RowFormatter=void 0;var a=e("./RowFormatter");Object.defineProperty(o,"RowFormatter",{enumerable:!0,get:function(){return a.RowFormatter}});var l=e("./FieldFormatter");Object.defineProperty(o,"FieldFormatter",{enumerable:!0,get:function(){return l.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(e,i,o){(function(a){(function(){var l=Object.create?function(S,B,F,O){O===void 0&&(O=F),Object.defineProperty(S,O,{enumerable:!0,get:function(){return B[F]}})}:function(S,B,F,O){O===void 0&&(O=F),S[O]=B[F]},t=Object.create?function(S,B){Object.defineProperty(S,"default",{enumerable:!0,value:B})}:function(S,B){S.default=B},h=function(S){if(S&&S.__esModule)return S;var B={};if(S!=null)for(var F in S)F!=="default"&&Object.prototype.hasOwnProperty.call(S,F)&&l(B,S,F);return t(B,S),B},f=function(S,B){for(var F in S)F==="default"||Object.prototype.hasOwnProperty.call(B,F)||l(B,S,F)};Object.defineProperty(o,"__esModule",{value:!0}),o.writeToPath=o.writeToString=o.writeToBuffer=o.writeToStream=o.write=o.format=o.FormatterOptions=o.CsvFormatterStream=void 0;const p=e("util"),_=e("stream"),g=h(e("fs")),m=e("./FormatterOptions"),b=e("./CsvFormatterStream");f(e("./types"),o);var x=e("./CsvFormatterStream");Object.defineProperty(o,"CsvFormatterStream",{enumerable:!0,get:function(){return x.CsvFormatterStream}});var v=e("./FormatterOptions");Object.defineProperty(o,"FormatterOptions",{enumerable:!0,get:function(){return v.FormatterOptions}}),o.format=S=>new b.CsvFormatterStream(new m.FormatterOptions(S)),o.write=(S,B)=>{const F=o.format(B),O=p.promisify((V,X)=>{F.write(V,void 0,X)});return S.reduce((V,X)=>V.then(()=>O(X)),Promise.resolve()).then(()=>F.end()).catch(V=>{F.emit("error",V)}),F},o.writeToStream=(S,B,F)=>o.write(B,F).pipe(S),o.writeToBuffer=function(S){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const F=[],O=new _.Writable({write(V,X,Q){F.push(V),Q()}});return new Promise((V,X)=>{O.on("error",X).on("finish",()=>V(a.concat(F))),o.write(S,B).pipe(O)})},o.writeToString=(S,B)=>o.writeToBuffer(S,B).then(F=>F.toString()),o.writeToPath=(S,B,F)=>{const O=g.createWriteStream(S,{encoding:"utf8"});return o.write(B,F).pipe(O)}}).call(this)}).call(this,e("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.isSyncTransform=void 0,o.isSyncTransform=a=>a.length===1},{}],153:[function(e,i,o){(function(a){(function(){Object.defineProperty(o,"__esModule",{value:!0}),o.CsvParserStream=void 0;const l=e("string_decoder"),t=e("stream"),h=e("./transforms"),f=e("./parser");class p extends t.Transform{constructor(g){super({objectMode:g.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=g,this.parser=new f.Parser(g),this.headerTransformer=new h.HeaderTransformer(g),this.decoder=new l.StringDecoder(g.encoding),this.rowTransformerValidator=new h.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(g){return this.rowTransformerValidator.rowTransform=g,this}validate(g){return this.rowTransformerValidator.rowValidator=g,this}emit(g){if(g==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var m=arguments.length,b=new Array(m>1?m-1:0),x=1;x<m;x++)b[x-1]=arguments[x];return super.emit(g,...b)}_transform(g,m,b){if(this.hasHitRowLimit)return b();const x=p.wrapDoneCallback(b);try{const{lines:v}=this,S=v+this.decoder.write(g),B=this.parse(S,!0);return this.processRows(B,x)}catch(v){return x(v)}}_flush(g){const m=p.wrapDoneCallback(g);if(this.hasHitRowLimit)return m();try{const b=this.lines+this.decoder.end(),x=this.parse(b,!1);return this.processRows(x,m)}catch(b){return m(b)}}parse(g,m){if(!g)return[];const{line:b,rows:x}=this.parser.parse(g,m);return this.lines=b,x}processRows(g,m){const b=g.length,x=v=>{const S=O=>O?m(O):v%100!=0?x(v+1):void a(()=>x(v+1));if(this.checkAndEmitHeaders(),v>=b||this.hasHitRowLimit)return m();if(this.parsedLineCount+=1,this.shouldSkipLine)return S();const B=g[v];this.rowCount+=1,this.parsedRowCount+=1;const F=this.rowCount;return this.transformRow(B,(O,V)=>{if(O)return this.rowCount-=1,S(O);if(!V)return S(new Error("expected transform result"));if(V.isValid){if(V.row)return this.pushRow(V.row,S)}else this.emit("data-invalid",V.row,F,V.reason);return S()})};x(0)}transformRow(g,m){try{this.headerTransformer.transform(g,(b,x)=>b?m(b):x?x.isValid?x.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(x.row,m):this.skipRow(m):(this.rowCount-=1,this.parsedRowCount-=1,m(null,{row:null,isValid:!0})):this.shouldEmitRows?m(null,{isValid:!1,row:g}):this.skipRow(m):m(new Error("Expected result from header transform")))}catch(b){m(b)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(g){return this.rowCount-=1,g(null,{row:null,isValid:!0})}pushRow(g,m){try{this.parserOptions.objectMode?this.push(g):this.push(JSON.stringify(g)),m()}catch(b){m(b)}}static wrapDoneCallback(g){let m=!1;return function(b){if(b){if(m)throw b;return m=!0,void g(b)}for(var x=arguments.length,v=new Array(x>1?x-1:0),S=1;S<x;S++)v[S-1]=arguments[S];g(...v)}}}o.CsvParserStream=p}).call(this)}).call(this,e("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(e,i,o){var a=function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(o,"__esModule",{value:!0}),o.ParserOptions=void 0;const l=a(e("lodash.escaperegexp")),t=a(e("lodash.isnil"));o.ParserOptions=class{constructor(h){var f;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,h||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=l.default(this.delimiter),this.escapeChar=(f=this.escape)!==null&&f!==void 0?f:this.quote,this.supportsComments=!t.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(e,i,o){var a=Object.create?function(x,v,S,B){B===void 0&&(B=S),Object.defineProperty(x,B,{enumerable:!0,get:function(){return v[S]}})}:function(x,v,S,B){B===void 0&&(B=S),x[B]=v[S]},l=Object.create?function(x,v){Object.defineProperty(x,"default",{enumerable:!0,value:v})}:function(x,v){x.default=v},t=function(x){if(x&&x.__esModule)return x;var v={};if(x!=null)for(var S in x)S!=="default"&&Object.prototype.hasOwnProperty.call(x,S)&&a(v,x,S);return l(v,x),v},h=function(x,v){for(var S in x)S==="default"||Object.prototype.hasOwnProperty.call(v,S)||a(v,x,S)};Object.defineProperty(o,"__esModule",{value:!0}),o.parseString=o.parseFile=o.parseStream=o.parse=o.ParserOptions=o.CsvParserStream=void 0;const f=t(e("fs")),p=e("stream"),_=e("./ParserOptions"),g=e("./CsvParserStream");h(e("./types"),o);var m=e("./CsvParserStream");Object.defineProperty(o,"CsvParserStream",{enumerable:!0,get:function(){return m.CsvParserStream}});var b=e("./ParserOptions");Object.defineProperty(o,"ParserOptions",{enumerable:!0,get:function(){return b.ParserOptions}}),o.parse=x=>new g.CsvParserStream(new _.ParserOptions(x)),o.parseStream=(x,v)=>x.pipe(new g.CsvParserStream(new _.ParserOptions(v))),o.parseFile=function(x){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f.createReadStream(x).pipe(new g.CsvParserStream(new _.ParserOptions(v)))},o.parseString=(x,v)=>{const S=new p.Readable;return S.push(x),S.push(null),S.pipe(new g.CsvParserStream(new _.ParserOptions(v)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.Parser=void 0;const a=e("./Scanner"),l=e("./RowParser"),t=e("./Token");class h{constructor(p){this.parserOptions=p,this.rowParser=new l.RowParser(this.parserOptions)}static removeBOM(p){return p&&p.charCodeAt(0)===65279?p.slice(1):p}parse(p,_){const g=new a.Scanner({line:h.removeBOM(p),parserOptions:this.parserOptions,hasMoreData:_});return this.parserOptions.supportsComments?this.parseWithComments(g):this.parseWithoutComments(g)}parseWithoutComments(p){const _=[];let g=!0;for(;g;)g=this.parseRow(p,_);return{line:p.line,rows:_}}parseWithComments(p){const{parserOptions:_}=this,g=[];for(let m=p.nextCharacterToken;m!==null;m=p.nextCharacterToken)if(t.Token.isTokenComment(m,_)){if(p.advancePastLine()===null)return{line:p.lineFromCursor,rows:g};if(!p.hasMoreCharacters)return{line:p.lineFromCursor,rows:g};p.truncateToCursor()}else if(!this.parseRow(p,g))break;return{line:p.line,rows:g}}parseRow(p,_){if(!p.nextNonSpaceToken)return!1;const g=this.rowParser.parse(p);return g!==null&&(this.parserOptions.ignoreEmpty&&l.RowParser.isEmptyRow(g)||_.push(g),!0)}}o.Parser=h},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.RowParser=void 0;const a=e("./column"),l=e("./Token");o.RowParser=class{constructor(t){this.parserOptions=t,this.columnParser=new a.ColumnParser(t)}static isEmptyRow(t){return t.join("").replace(/\s+/g,"")===""}parse(t){const{parserOptions:h}=this,{hasMoreData:f}=t,p=t,_=[];let g=this.getStartToken(p,_);for(;g;){if(l.Token.isTokenRowDelimiter(g))return p.advancePastToken(g),!p.hasMoreCharacters&&l.Token.isTokenCarriageReturn(g,h)&&f?null:(p.truncateToCursor(),_);if(!this.shouldSkipColumnParse(p,g,_)){const m=this.columnParser.parse(p);if(m===null)return null;_.push(m)}g=p.nextNonSpaceToken}return f?null:(p.truncateToCursor(),_)}getStartToken(t,h){const f=t.nextNonSpaceToken;return f!==null&&l.Token.isTokenDelimiter(f,this.parserOptions)?(h.push(""),t.nextNonSpaceToken):f}shouldSkipColumnParse(t,h,f){const{parserOptions:p}=this;if(l.Token.isTokenDelimiter(h,p)){t.advancePastToken(h);const _=t.nextCharacterToken;if(!t.hasMoreCharacters||_!==null&&l.Token.isTokenRowDelimiter(_)||_!==null&&l.Token.isTokenDelimiter(_,p))return f.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.Scanner=void 0;const a=e("./Token"),l=/((?:\r\n)|\n|\r)/;o.Scanner=class{constructor(t){this.cursor=0,this.line=t.line,this.lineLength=this.line.length,this.parserOptions=t.parserOptions,this.hasMoreData=t.hasMoreData,this.cursor=t.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:t}=this,h=this.parserOptions.NEXT_TOKEN_REGEXP;if(t.search(h)===-1)return null;const f=h.exec(t);if(f==null)return null;const p=f[1],_=this.cursor+(f.index||0);return new a.Token({token:p,startCursor:_,endCursor:_+p.length-1})}get nextCharacterToken(){const{cursor:t,lineLength:h}=this;return h<=t?null:new a.Token({token:this.line[t],startCursor:t,endCursor:t})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const t=l.exec(this.lineFromCursor);return t?(this.cursor+=(t.index||0)+t[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(t){return this.cursor=t,this}advanceToToken(t){return this.cursor=t.startCursor,this}advancePastToken(t){return this.cursor=t.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.Token=void 0,o.Token=class{constructor(a){this.token=a.token,this.startCursor=a.startCursor,this.endCursor=a.endCursor}static isTokenRowDelimiter(a){const l=a.token;return l==="\r"||l===`
`||l===`\r
`}static isTokenCarriageReturn(a,l){return a.token===l.carriageReturn}static isTokenComment(a,l){return l.supportsComments&&!!a&&a.token===l.comment}static isTokenEscapeCharacter(a,l){return a.token===l.escapeChar}static isTokenQuote(a,l){return a.token===l.quote}static isTokenDelimiter(a,l){return a.token===l.delimiter}}},{}],160:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.ColumnFormatter=void 0,o.ColumnFormatter=class{constructor(a){a.trim?this.format=l=>l.trim():a.ltrim?this.format=l=>l.trimLeft():a.rtrim?this.format=l=>l.trimRight():this.format=l=>l}}},{}],161:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.ColumnParser=void 0;const a=e("./NonQuotedColumnParser"),l=e("./QuotedColumnParser"),t=e("../Token");o.ColumnParser=class{constructor(h){this.parserOptions=h,this.quotedColumnParser=new l.QuotedColumnParser(h),this.nonQuotedColumnParser=new a.NonQuotedColumnParser(h)}parse(h){const{nextNonSpaceToken:f}=h;return f!==null&&t.Token.isTokenQuote(f,this.parserOptions)?(h.advanceToToken(f),this.quotedColumnParser.parse(h)):this.nonQuotedColumnParser.parse(h)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.NonQuotedColumnParser=void 0;const a=e("./ColumnFormatter"),l=e("../Token");o.NonQuotedColumnParser=class{constructor(t){this.parserOptions=t,this.columnFormatter=new a.ColumnFormatter(t)}parse(t){if(!t.hasMoreCharacters)return null;const{parserOptions:h}=this,f=[];let p=t.nextCharacterToken;for(;p&&!l.Token.isTokenDelimiter(p,h)&&!l.Token.isTokenRowDelimiter(p);p=t.nextCharacterToken)f.push(p.token),t.advancePastToken(p);return this.columnFormatter.format(f.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.QuotedColumnParser=void 0;const a=e("./ColumnFormatter"),l=e("../Token");o.QuotedColumnParser=class{constructor(t){this.parserOptions=t,this.columnFormatter=new a.ColumnFormatter(t)}parse(t){if(!t.hasMoreCharacters)return null;const h=t.cursor,{foundClosingQuote:f,col:p}=this.gatherDataBetweenQuotes(t);if(!f){if(t.advanceTo(h),!t.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${t.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(t),p}gatherDataBetweenQuotes(t){const{parserOptions:h}=this;let f=!1,p=!1;const _=[];let g=t.nextCharacterToken;for(;!p&&g!==null;g=t.nextCharacterToken){const m=l.Token.isTokenQuote(g,h);if(!f&&m)f=!0;else if(f)if(l.Token.isTokenEscapeCharacter(g,h)){t.advancePastToken(g);const b=t.nextCharacterToken;b!==null&&(l.Token.isTokenQuote(b,h)||l.Token.isTokenEscapeCharacter(b,h))?(_.push(b.token),g=b):m?p=!0:_.push(g.token)}else m?p=!0:_.push(g.token);t.advancePastToken(g)}return{col:this.columnFormatter.format(_.join("")),foundClosingQuote:p}}checkForMalformedColumn(t){const{parserOptions:h}=this,{nextNonSpaceToken:f}=t;if(f){const p=l.Token.isTokenDelimiter(f,h),_=l.Token.isTokenRowDelimiter(f);if(!p&&!_){const g=t.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${h.escapedDelimiter}' OR new line got: '${f.token}'. at '${g}`)}t.advanceToToken(f)}else t.hasMoreData||t.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.ColumnFormatter=o.QuotedColumnParser=o.NonQuotedColumnParser=o.ColumnParser=void 0;var a=e("./ColumnParser");Object.defineProperty(o,"ColumnParser",{enumerable:!0,get:function(){return a.ColumnParser}});var l=e("./NonQuotedColumnParser");Object.defineProperty(o,"NonQuotedColumnParser",{enumerable:!0,get:function(){return l.NonQuotedColumnParser}});var t=e("./QuotedColumnParser");Object.defineProperty(o,"QuotedColumnParser",{enumerable:!0,get:function(){return t.QuotedColumnParser}});var h=e("./ColumnFormatter");Object.defineProperty(o,"ColumnFormatter",{enumerable:!0,get:function(){return h.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.QuotedColumnParser=o.NonQuotedColumnParser=o.ColumnParser=o.Token=o.Scanner=o.RowParser=o.Parser=void 0;var a=e("./Parser");Object.defineProperty(o,"Parser",{enumerable:!0,get:function(){return a.Parser}});var l=e("./RowParser");Object.defineProperty(o,"RowParser",{enumerable:!0,get:function(){return l.RowParser}});var t=e("./Scanner");Object.defineProperty(o,"Scanner",{enumerable:!0,get:function(){return t.Scanner}});var h=e("./Token");Object.defineProperty(o,"Token",{enumerable:!0,get:function(){return h.Token}});var f=e("./column");Object.defineProperty(o,"ColumnParser",{enumerable:!0,get:function(){return f.ColumnParser}}),Object.defineProperty(o,"NonQuotedColumnParser",{enumerable:!0,get:function(){return f.NonQuotedColumnParser}}),Object.defineProperty(o,"QuotedColumnParser",{enumerable:!0,get:function(){return f.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(e,i,o){var a=function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(o,"__esModule",{value:!0}),o.HeaderTransformer=void 0;const l=a(e("lodash.isundefined")),t=a(e("lodash.isfunction")),h=a(e("lodash.uniq")),f=a(e("lodash.groupby"));o.HeaderTransformer=class{constructor(p){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=p,p.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(p.headers)?this.setHeaders(p.headers):t.default(p.headers)&&(this.headersTransform=p.headers)}transform(p,_){return this.shouldMapRow(p)?_(null,this.processRow(p)):_(null,{row:null,isValid:!0})}shouldMapRow(p){const{parserOptions:_}=this;if(!this.headersTransform&&_.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(p)){if(this.headersTransform)this.setHeaders(this.headersTransform(p));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(p)}return!1}return!0}processRow(p){if(!this.headers)return{row:p,isValid:!0};const{parserOptions:_}=this;if(!_.discardUnmappedColumns&&p.length>this.headersLength){if(!_.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${p.length}`);return{row:p,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${p.length}`}}return _.strictColumnHandling&&p.length<this.headersLength?{row:p,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${p.length}`}:{row:this.mapHeaders(p),isValid:!0}}mapHeaders(p){const _={},{headers:g,headersLength:m}=this;for(let b=0;b<m;b+=1){const x=g[b];if(!l.default(x)){const v=p[b];l.default(v)?_[x]="":_[x]=v}}return _}setHeaders(p){var _;const g=p.filter(m=>!!m);if(h.default(g).length!==g.length){const m=f.default(g),b=Object.keys(m).filter(x=>m[x].length>1);throw new Error("Duplicate headers found "+JSON.stringify(b))}this.headers=p,this.receivedHeaders=!0,this.headersLength=((_=this.headers)===null||_===void 0?void 0:_.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(e,i,o){var a=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(o,"__esModule",{value:!0}),o.RowTransformerValidator=void 0;const l=a(e("lodash.isfunction")),t=e("../types");class h{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(p){return t.isSyncTransform(p)?(_,g)=>{let m=null;try{m=p(_)}catch(b){return g(b)}return g(null,m)}:p}static createValidator(p){return t.isSyncValidate(p)?(_,g)=>{g(null,{row:_,isValid:p(_)})}:(_,g)=>{p(_,(m,b,x)=>m?g(m):g(null,b?{row:_,isValid:b,reason:x}:{row:_,isValid:!1,reason:x}))}}set rowTransform(p){if(!l.default(p))throw new TypeError("The transform should be a function");this._rowTransform=h.createTransform(p)}set rowValidator(p){if(!l.default(p))throw new TypeError("The validate should be a function");this._rowValidator=h.createValidator(p)}transformAndValidate(p,_){return this.callTransformer(p,(g,m)=>g?_(g):m?this.callValidator(m,(b,x)=>b?_(b):x&&!x.isValid?_(null,{row:m,isValid:!1,reason:x.reason}):_(null,{row:m,isValid:!0})):_(null,{row:null,isValid:!0}))}callTransformer(p,_){return this._rowTransform?this._rowTransform(p,_):_(null,p)}callValidator(p,_){return this._rowValidator?this._rowValidator(p,_):_(null,{row:p,isValid:!0})}}o.RowTransformerValidator=h},{"../types":169,"lodash.isfunction":446}],168:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.HeaderTransformer=o.RowTransformerValidator=void 0;var a=e("./RowTransformerValidator");Object.defineProperty(o,"RowTransformerValidator",{enumerable:!0,get:function(){return a.RowTransformerValidator}});var l=e("./HeaderTransformer");Object.defineProperty(o,"HeaderTransformer",{enumerable:!0,get:function(){return l.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.isSyncValidate=o.isSyncTransform=void 0,o.isSyncTransform=a=>a.length===1,o.isSyncValidate=a=>a.length===1},{}],170:[function(e,i,o){const a=o;a.bignum=e("bn.js"),a.define=e("./asn1/api").define,a.base=e("./asn1/base"),a.constants=e("./asn1/constants"),a.decoders=e("./asn1/decoders"),a.encoders=e("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(e,i,o){const a=e("./encoders"),l=e("./decoders"),t=e("inherits");function h(f,p){this.name=f,this.body=p,this.decoders={},this.encoders={}}o.define=function(f,p){return new h(f,p)},h.prototype._createNamed=function(f){const p=this.name;function _(g){this._initNamed(g,p)}return t(_,f),_.prototype._initNamed=function(g,m){f.call(this,g,m)},new _(this)},h.prototype._getDecoder=function(f){return f=f||"der",this.decoders.hasOwnProperty(f)||(this.decoders[f]=this._createNamed(l[f])),this.decoders[f]},h.prototype.decode=function(f,p,_){return this._getDecoder(p).decode(f,_)},h.prototype._getEncoder=function(f){return f=f||"der",this.encoders.hasOwnProperty(f)||(this.encoders[f]=this._createNamed(a[f])),this.encoders[f]},h.prototype.encode=function(f,p,_){return this._getEncoder(p).encode(f,_)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(e,i,o){const a=e("inherits"),l=e("../base/reporter").Reporter,t=e("safer-buffer").Buffer;function h(p,_){l.call(this,_),t.isBuffer(p)?(this.base=p,this.offset=0,this.length=p.length):this.error("Input not Buffer")}function f(p,_){if(Array.isArray(p))this.length=0,this.value=p.map(function(g){return f.isEncoderBuffer(g)||(g=new f(g,_)),this.length+=g.length,g},this);else if(typeof p=="number"){if(!(0<=p&&p<=255))return _.error("non-byte EncoderBuffer value");this.value=p,this.length=1}else if(typeof p=="string")this.value=p,this.length=t.byteLength(p);else{if(!t.isBuffer(p))return _.error("Unsupported type: "+typeof p);this.value=p,this.length=p.length}}a(h,l),o.DecoderBuffer=h,h.isDecoderBuffer=function(p){return p instanceof h?!0:typeof p=="object"&&t.isBuffer(p.base)&&p.constructor.name==="DecoderBuffer"&&typeof p.offset=="number"&&typeof p.length=="number"&&typeof p.save=="function"&&typeof p.restore=="function"&&typeof p.isEmpty=="function"&&typeof p.readUInt8=="function"&&typeof p.skip=="function"&&typeof p.raw=="function"},h.prototype.save=function(){return{offset:this.offset,reporter:l.prototype.save.call(this)}},h.prototype.restore=function(p){const _=new h(this.base);return _.offset=p.offset,_.length=this.offset,this.offset=p.offset,l.prototype.restore.call(this,p.reporter),_},h.prototype.isEmpty=function(){return this.offset===this.length},h.prototype.readUInt8=function(p){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(p||"DecoderBuffer overrun")},h.prototype.skip=function(p,_){if(!(this.offset+p<=this.length))return this.error(_||"DecoderBuffer overrun");const g=new h(this.base);return g._reporterState=this._reporterState,g.offset=this.offset,g.length=this.offset+p,this.offset+=p,g},h.prototype.raw=function(p){return this.base.slice(p?p.offset:this.offset,this.length)},o.EncoderBuffer=f,f.isEncoderBuffer=function(p){return p instanceof f?!0:typeof p=="object"&&p.constructor.name==="EncoderBuffer"&&typeof p.length=="number"&&typeof p.join=="function"},f.prototype.join=function(p,_){return p||(p=t.alloc(this.length)),_||(_=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(g){g.join(p,_),_+=g.length}):(typeof this.value=="number"?p[_]=this.value:typeof this.value=="string"?p.write(this.value,_):t.isBuffer(this.value)&&this.value.copy(p,_),_+=this.length)),p}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(e,i,o){const a=o;a.Reporter=e("./reporter").Reporter,a.DecoderBuffer=e("./buffer").DecoderBuffer,a.EncoderBuffer=e("./buffer").EncoderBuffer,a.Node=e("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(e,i,o){const a=e("../base/reporter").Reporter,l=e("../base/buffer").EncoderBuffer,t=e("../base/buffer").DecoderBuffer,h=e("minimalistic-assert"),f=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],p=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(f);function _(m,b,x){const v={};this._baseState=v,v.name=x,v.enc=m,v.parent=b||null,v.children=null,v.tag=null,v.args=null,v.reverseArgs=null,v.choice=null,v.optional=!1,v.any=!1,v.obj=!1,v.use=null,v.useDecoder=null,v.key=null,v.default=null,v.explicit=null,v.implicit=null,v.contains=null,v.parent||(v.children=[],this._wrap())}i.exports=_;const g=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];_.prototype.clone=function(){const m=this._baseState,b={};g.forEach(function(v){b[v]=m[v]});const x=new this.constructor(b.parent);return x._baseState=b,x},_.prototype._wrap=function(){const m=this._baseState;p.forEach(function(b){this[b]=function(){const x=new this.constructor(this);return m.children.push(x),x[b].apply(x,arguments)}},this)},_.prototype._init=function(m){const b=this._baseState;h(b.parent===null),m.call(this),b.children=b.children.filter(function(x){return x._baseState.parent===this},this),h.equal(b.children.length,1,"Root node can have only one child")},_.prototype._useArgs=function(m){const b=this._baseState,x=m.filter(function(v){return v instanceof this.constructor},this);m=m.filter(function(v){return!(v instanceof this.constructor)},this),x.length!==0&&(h(b.children===null),b.children=x,x.forEach(function(v){v._baseState.parent=this},this)),m.length!==0&&(h(b.args===null),b.args=m,b.reverseArgs=m.map(function(v){if(typeof v!="object"||v.constructor!==Object)return v;const S={};return Object.keys(v).forEach(function(B){B==(0|B)&&(B|=0);const F=v[B];S[F]=B}),S}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(m){_.prototype[m]=function(){const b=this._baseState;throw new Error(m+" not implemented for encoding: "+b.enc)}}),f.forEach(function(m){_.prototype[m]=function(){const b=this._baseState,x=Array.prototype.slice.call(arguments);return h(b.tag===null),b.tag=m,this._useArgs(x),this}}),_.prototype.use=function(m){h(m);const b=this._baseState;return h(b.use===null),b.use=m,this},_.prototype.optional=function(){return this._baseState.optional=!0,this},_.prototype.def=function(m){const b=this._baseState;return h(b.default===null),b.default=m,b.optional=!0,this},_.prototype.explicit=function(m){const b=this._baseState;return h(b.explicit===null&&b.implicit===null),b.explicit=m,this},_.prototype.implicit=function(m){const b=this._baseState;return h(b.explicit===null&&b.implicit===null),b.implicit=m,this},_.prototype.obj=function(){const m=this._baseState,b=Array.prototype.slice.call(arguments);return m.obj=!0,b.length!==0&&this._useArgs(b),this},_.prototype.key=function(m){const b=this._baseState;return h(b.key===null),b.key=m,this},_.prototype.any=function(){return this._baseState.any=!0,this},_.prototype.choice=function(m){const b=this._baseState;return h(b.choice===null),b.choice=m,this._useArgs(Object.keys(m).map(function(x){return m[x]})),this},_.prototype.contains=function(m){const b=this._baseState;return h(b.use===null),b.contains=m,this},_.prototype._decode=function(m,b){const x=this._baseState;if(x.parent===null)return m.wrapResult(x.children[0]._decode(m,b));let v,S=x.default,B=!0,F=null;if(x.key!==null&&(F=m.enterKey(x.key)),x.optional){let O=null;if(x.explicit!==null?O=x.explicit:x.implicit!==null?O=x.implicit:x.tag!==null&&(O=x.tag),O!==null||x.any){if(B=this._peekTag(m,O,x.any),m.isError(B))return B}else{const V=m.save();try{x.choice===null?this._decodeGeneric(x.tag,m,b):this._decodeChoice(m,b),B=!0}catch{B=!1}m.restore(V)}}if(x.obj&&B&&(v=m.enterObject()),B){if(x.explicit!==null){const V=this._decodeTag(m,x.explicit);if(m.isError(V))return V;m=V}const O=m.offset;if(x.use===null&&x.choice===null){let V;x.any&&(V=m.save());const X=this._decodeTag(m,x.implicit!==null?x.implicit:x.tag,x.any);if(m.isError(X))return X;x.any?S=m.raw(V):m=X}if(b&&b.track&&x.tag!==null&&b.track(m.path(),O,m.length,"tagged"),b&&b.track&&x.tag!==null&&b.track(m.path(),m.offset,m.length,"content"),x.any||(S=x.choice===null?this._decodeGeneric(x.tag,m,b):this._decodeChoice(m,b)),m.isError(S))return S;if(x.any||x.choice!==null||x.children===null||x.children.forEach(function(V){V._decode(m,b)}),x.contains&&(x.tag==="octstr"||x.tag==="bitstr")){const V=new t(S);S=this._getUse(x.contains,m._reporterState.obj)._decode(V,b)}}return x.obj&&B&&(S=m.leaveObject(v)),x.key===null||S===null&&B!==!0?F!==null&&m.exitKey(F):m.leaveKey(F,x.key,S),S},_.prototype._decodeGeneric=function(m,b,x){const v=this._baseState;return m==="seq"||m==="set"?null:m==="seqof"||m==="setof"?this._decodeList(b,m,v.args[0],x):/str$/.test(m)?this._decodeStr(b,m,x):m==="objid"&&v.args?this._decodeObjid(b,v.args[0],v.args[1],x):m==="objid"?this._decodeObjid(b,null,null,x):m==="gentime"||m==="utctime"?this._decodeTime(b,m,x):m==="null_"?this._decodeNull(b,x):m==="bool"?this._decodeBool(b,x):m==="objDesc"?this._decodeStr(b,m,x):m==="int"||m==="enum"?this._decodeInt(b,v.args&&v.args[0],x):v.use!==null?this._getUse(v.use,b._reporterState.obj)._decode(b,x):b.error("unknown tag: "+m)},_.prototype._getUse=function(m,b){const x=this._baseState;return x.useDecoder=this._use(m,b),h(x.useDecoder._baseState.parent===null),x.useDecoder=x.useDecoder._baseState.children[0],x.implicit!==x.useDecoder._baseState.implicit&&(x.useDecoder=x.useDecoder.clone(),x.useDecoder._baseState.implicit=x.implicit),x.useDecoder},_.prototype._decodeChoice=function(m,b){const x=this._baseState;let v=null,S=!1;return Object.keys(x.choice).some(function(B){const F=m.save(),O=x.choice[B];try{const V=O._decode(m,b);if(m.isError(V))return!1;v={type:B,value:V},S=!0}catch{return m.restore(F),!1}return!0},this),S?v:m.error("Choice not matched")},_.prototype._createEncoderBuffer=function(m){return new l(m,this.reporter)},_.prototype._encode=function(m,b,x){const v=this._baseState;if(v.default!==null&&v.default===m)return;const S=this._encodeValue(m,b,x);return S===void 0||this._skipDefault(S,b,x)?void 0:S},_.prototype._encodeValue=function(m,b,x){const v=this._baseState;if(v.parent===null)return v.children[0]._encode(m,b||new a);let S=null;if(this.reporter=b,v.optional&&m===void 0){if(v.default===null)return;m=v.default}let B=null,F=!1;if(v.any)S=this._createEncoderBuffer(m);else if(v.choice)S=this._encodeChoice(m,b);else if(v.contains)B=this._getUse(v.contains,x)._encode(m,b),F=!0;else if(v.children)B=v.children.map(function(O){if(O._baseState.tag==="null_")return O._encode(null,b,m);if(O._baseState.key===null)return b.error("Child should have a key");const V=b.enterKey(O._baseState.key);if(typeof m!="object")return b.error("Child expected, but input is not object");const X=O._encode(m[O._baseState.key],b,m);return b.leaveKey(V),X},this).filter(function(O){return O}),B=this._createEncoderBuffer(B);else if(v.tag==="seqof"||v.tag==="setof"){if(!v.args||v.args.length!==1)return b.error("Too many args for : "+v.tag);if(!Array.isArray(m))return b.error("seqof/setof, but data is not Array");const O=this.clone();O._baseState.implicit=null,B=this._createEncoderBuffer(m.map(function(V){const X=this._baseState;return this._getUse(X.args[0],m)._encode(V,b)},O))}else v.use!==null?S=this._getUse(v.use,x)._encode(m,b):(B=this._encodePrimitive(v.tag,m),F=!0);if(!v.any&&v.choice===null){const O=v.implicit!==null?v.implicit:v.tag,V=v.implicit===null?"universal":"context";O===null?v.use===null&&b.error("Tag could be omitted only for .use()"):v.use===null&&(S=this._encodeComposite(O,F,V,B))}return v.explicit!==null&&(S=this._encodeComposite(v.explicit,!1,"context",S)),S},_.prototype._encodeChoice=function(m,b){const x=this._baseState,v=x.choice[m.type];return v||h(!1,m.type+" not found in "+JSON.stringify(Object.keys(x.choice))),v._encode(m.value,b)},_.prototype._encodePrimitive=function(m,b){const x=this._baseState;if(/str$/.test(m))return this._encodeStr(b,m);if(m==="objid"&&x.args)return this._encodeObjid(b,x.reverseArgs[0],x.args[1]);if(m==="objid")return this._encodeObjid(b,null,null);if(m==="gentime"||m==="utctime")return this._encodeTime(b,m);if(m==="null_")return this._encodeNull();if(m==="int"||m==="enum")return this._encodeInt(b,x.args&&x.reverseArgs[0]);if(m==="bool")return this._encodeBool(b);if(m==="objDesc")return this._encodeStr(b,m);throw new Error("Unsupported tag: "+m)},_.prototype._isNumstr=function(m){return/^[0-9 ]*$/.test(m)},_.prototype._isPrintstr=function(m){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(m)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(e,i,o){const a=e("inherits");function l(h){this._reporterState={obj:null,path:[],options:h||{},errors:[]}}function t(h,f){this.path=h,this.rethrow(f)}o.Reporter=l,l.prototype.isError=function(h){return h instanceof t},l.prototype.save=function(){const h=this._reporterState;return{obj:h.obj,pathLen:h.path.length}},l.prototype.restore=function(h){const f=this._reporterState;f.obj=h.obj,f.path=f.path.slice(0,h.pathLen)},l.prototype.enterKey=function(h){return this._reporterState.path.push(h)},l.prototype.exitKey=function(h){const f=this._reporterState;f.path=f.path.slice(0,h-1)},l.prototype.leaveKey=function(h,f,p){const _=this._reporterState;this.exitKey(h),_.obj!==null&&(_.obj[f]=p)},l.prototype.path=function(){return this._reporterState.path.join("/")},l.prototype.enterObject=function(){const h=this._reporterState,f=h.obj;return h.obj={},f},l.prototype.leaveObject=function(h){const f=this._reporterState,p=f.obj;return f.obj=h,p},l.prototype.error=function(h){let f;const p=this._reporterState,_=h instanceof t;if(f=_?h:new t(p.path.map(function(g){return"["+JSON.stringify(g)+"]"}).join(""),h.message||h,h.stack),!p.options.partial)throw f;return _||p.errors.push(f),f},l.prototype.wrapResult=function(h){const f=this._reporterState;return f.options.partial?{result:this.isError(h)?null:h,errors:f.errors}:h},a(t,Error),t.prototype.rethrow=function(h){if(this.message=h+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,t),!this.stack)try{throw new Error(this.message)}catch(f){this.stack=f.stack}return this}},{inherits:440}],176:[function(e,i,o){function a(l){const t={};return Object.keys(l).forEach(function(h){(0|h)==h&&(h|=0);const f=l[h];t[f]=h}),t}o.tagClass={0:"universal",1:"application",2:"context",3:"private"},o.tagClassByName=a(o.tagClass),o.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},o.tagByName=a(o.tag)},{}],177:[function(e,i,o){const a=o;a._reverse=function(l){const t={};return Object.keys(l).forEach(function(h){(0|h)==h&&(h|=0);const f=l[h];t[f]=h}),t},a.der=e("./der")},{"./der":176}],178:[function(e,i,o){const a=e("inherits"),l=e("bn.js"),t=e("../base/buffer").DecoderBuffer,h=e("../base/node"),f=e("../constants/der");function p(b){this.enc="der",this.name=b.name,this.entity=b,this.tree=new _,this.tree._init(b.body)}function _(b){h.call(this,"der",b)}function g(b,x){let v=b.readUInt8(x);if(b.isError(v))return v;const S=f.tagClass[v>>6],B=(32&v)==0;if((31&v)==31){let F=v;for(v=0;(128&F)==128;){if(F=b.readUInt8(x),b.isError(F))return F;v<<=7,v|=127&F}}else v&=31;return{cls:S,primitive:B,tag:v,tagStr:f.tag[v]}}function m(b,x,v){let S=b.readUInt8(v);if(b.isError(S))return S;if(!x&&S===128)return null;if((128&S)==0)return S;const B=127&S;if(B>4)return b.error("length octect is too long");S=0;for(let F=0;F<B;F++){S<<=8;const O=b.readUInt8(v);if(b.isError(O))return O;S|=O}return S}i.exports=p,p.prototype.decode=function(b,x){return t.isDecoderBuffer(b)||(b=new t(b,x)),this.tree._decode(b,x)},a(_,h),_.prototype._peekTag=function(b,x,v){if(b.isEmpty())return!1;const S=b.save(),B=g(b,'Failed to peek tag: "'+x+'"');return b.isError(B)?B:(b.restore(S),B.tag===x||B.tagStr===x||B.tagStr+"of"===x||v)},_.prototype._decodeTag=function(b,x,v){const S=g(b,'Failed to decode tag of "'+x+'"');if(b.isError(S))return S;let B=m(b,S.primitive,'Failed to get length of "'+x+'"');if(b.isError(B))return B;if(!v&&S.tag!==x&&S.tagStr!==x&&S.tagStr+"of"!==x)return b.error('Failed to match tag: "'+x+'"');if(S.primitive||B!==null)return b.skip(B,'Failed to match body of: "'+x+'"');const F=b.save(),O=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+this.tag+'"');return b.isError(O)?O:(B=b.offset-F.offset,b.restore(F),b.skip(B,'Failed to match body of: "'+x+'"'))},_.prototype._skipUntilEnd=function(b,x){for(;;){const v=g(b,x);if(b.isError(v))return v;const S=m(b,v.primitive,x);if(b.isError(S))return S;let B;if(B=v.primitive||S!==null?b.skip(S):this._skipUntilEnd(b,x),b.isError(B))return B;if(v.tagStr==="end")break}},_.prototype._decodeList=function(b,x,v,S){const B=[];for(;!b.isEmpty();){const F=this._peekTag(b,"end");if(b.isError(F))return F;const O=v.decode(b,"der",S);if(b.isError(O)&&F)break;B.push(O)}return B},_.prototype._decodeStr=function(b,x){if(x==="bitstr"){const v=b.readUInt8();return b.isError(v)?v:{unused:v,data:b.raw()}}if(x==="bmpstr"){const v=b.raw();if(v.length%2==1)return b.error("Decoding of string type: bmpstr length mismatch");let S="";for(let B=0;B<v.length/2;B++)S+=String.fromCharCode(v.readUInt16BE(2*B));return S}if(x==="numstr"){const v=b.raw().toString("ascii");return this._isNumstr(v)?v:b.error("Decoding of string type: numstr unsupported characters")}if(x==="octstr"||x==="objDesc")return b.raw();if(x==="printstr"){const v=b.raw().toString("ascii");return this._isPrintstr(v)?v:b.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(x)?b.raw().toString():b.error("Decoding of string type: "+x+" unsupported")},_.prototype._decodeObjid=function(b,x,v){let S;const B=[];let F=0,O=0;for(;!b.isEmpty();)O=b.readUInt8(),F<<=7,F|=127&O,(128&O)==0&&(B.push(F),F=0);128&O&&B.push(F);const V=B[0]/40|0,X=B[0]%40;if(S=v?B:[V,X].concat(B.slice(1)),x){let Q=x[S.join(" ")];Q===void 0&&(Q=x[S.join(".")]),Q!==void 0&&(S=Q)}return S},_.prototype._decodeTime=function(b,x){const v=b.raw().toString();let S,B,F,O,V,X;if(x==="gentime")S=0|v.slice(0,4),B=0|v.slice(4,6),F=0|v.slice(6,8),O=0|v.slice(8,10),V=0|v.slice(10,12),X=0|v.slice(12,14);else{if(x!=="utctime")return b.error("Decoding "+x+" time is not supported yet");S=0|v.slice(0,2),B=0|v.slice(2,4),F=0|v.slice(4,6),O=0|v.slice(6,8),V=0|v.slice(8,10),X=0|v.slice(10,12),S=S<70?2e3+S:1900+S}return Date.UTC(S,B-1,F,O,V,X,0)},_.prototype._decodeNull=function(){return null},_.prototype._decodeBool=function(b){const x=b.readUInt8();return b.isError(x)?x:x!==0},_.prototype._decodeInt=function(b,x){const v=b.raw();let S=new l(v);return x&&(S=x[S.toString(10)]||S),S},_.prototype._use=function(b,x){return typeof b=="function"&&(b=b(x)),b._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(e,i,o){const a=o;a.der=e("./der"),a.pem=e("./pem")},{"./der":178,"./pem":180}],180:[function(e,i,o){const a=e("inherits"),l=e("safer-buffer").Buffer,t=e("./der");function h(f){t.call(this,f),this.enc="pem"}a(h,t),i.exports=h,h.prototype.decode=function(f,p){const _=f.toString().split(/[\r\n]+/g),g=p.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/;let b=-1,x=-1;for(let B=0;B<_.length;B++){const F=_[B].match(m);if(F!==null&&F[2]===g){if(b!==-1){if(F[1]!=="END")break;x=B;break}if(F[1]!=="BEGIN")break;b=B}}if(b===-1||x===-1)throw new Error("PEM section not found for: "+g);const v=_.slice(b+1,x).join("");v.replace(/[^a-z0-9+/=]+/gi,"");const S=l.from(v,"base64");return t.prototype.decode.call(this,S,p)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(e,i,o){const a=e("inherits"),l=e("safer-buffer").Buffer,t=e("../base/node"),h=e("../constants/der");function f(g){this.enc="der",this.name=g.name,this.entity=g,this.tree=new p,this.tree._init(g.body)}function p(g){t.call(this,"der",g)}function _(g){return g<10?"0"+g:g}i.exports=f,f.prototype.encode=function(g,m){return this.tree._encode(g,m).join()},a(p,t),p.prototype._encodeComposite=function(g,m,b,x){const v=function(F,O,V,X){let Q;if(F==="seqof"?F="seq":F==="setof"&&(F="set"),h.tagByName.hasOwnProperty(F))Q=h.tagByName[F];else{if(typeof F!="number"||(0|F)!==F)return X.error("Unknown tag: "+F);Q=F}return Q>=31?X.error("Multi-octet tag encoding unsupported"):(O||(Q|=32),Q|=h.tagClassByName[V||"universal"]<<6,Q)}(g,m,b,this.reporter);if(x.length<128){const F=l.alloc(2);return F[0]=v,F[1]=x.length,this._createEncoderBuffer([F,x])}let S=1;for(let F=x.length;F>=256;F>>=8)S++;const B=l.alloc(2+S);B[0]=v,B[1]=128|S;for(let F=1+S,O=x.length;O>0;F--,O>>=8)B[F]=255&O;return this._createEncoderBuffer([B,x])},p.prototype._encodeStr=function(g,m){if(m==="bitstr")return this._createEncoderBuffer([0|g.unused,g.data]);if(m==="bmpstr"){const b=l.alloc(2*g.length);for(let x=0;x<g.length;x++)b.writeUInt16BE(g.charCodeAt(x),2*x);return this._createEncoderBuffer(b)}return m==="numstr"?this._isNumstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: numstr supports only digits and space"):m==="printstr"?this._isPrintstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(m)||m==="objDesc"?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: "+m+" unsupported")},p.prototype._encodeObjid=function(g,m,b){if(typeof g=="string"){if(!m)return this.reporter.error("string objid given, but no values map found");if(!m.hasOwnProperty(g))return this.reporter.error("objid not found in values map");g=m[g].split(/[\s.]+/g);for(let B=0;B<g.length;B++)g[B]|=0}else if(Array.isArray(g)){g=g.slice();for(let B=0;B<g.length;B++)g[B]|=0}if(!Array.isArray(g))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(g));if(!b){if(g[1]>=40)return this.reporter.error("Second objid identifier OOB");g.splice(0,2,40*g[0]+g[1])}let x=0;for(let B=0;B<g.length;B++){let F=g[B];for(x++;F>=128;F>>=7)x++}const v=l.alloc(x);let S=v.length-1;for(let B=g.length-1;B>=0;B--){let F=g[B];for(v[S--]=127&F;(F>>=7)>0;)v[S--]=128|127&F}return this._createEncoderBuffer(v)},p.prototype._encodeTime=function(g,m){let b;const x=new Date(g);return m==="gentime"?b=[_(x.getUTCFullYear()),_(x.getUTCMonth()+1),_(x.getUTCDate()),_(x.getUTCHours()),_(x.getUTCMinutes()),_(x.getUTCSeconds()),"Z"].join(""):m==="utctime"?b=[_(x.getUTCFullYear()%100),_(x.getUTCMonth()+1),_(x.getUTCDate()),_(x.getUTCHours()),_(x.getUTCMinutes()),_(x.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+m+" time is not supported yet"),this._encodeStr(b,"octstr")},p.prototype._encodeNull=function(){return this._createEncoderBuffer("")},p.prototype._encodeInt=function(g,m){if(typeof g=="string"){if(!m)return this.reporter.error("String int or enum given, but no values map");if(!m.hasOwnProperty(g))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(g));g=m[g]}if(typeof g!="number"&&!l.isBuffer(g)){const v=g.toArray();!g.sign&&128&v[0]&&v.unshift(0),g=l.from(v)}if(l.isBuffer(g)){let v=g.length;g.length===0&&v++;const S=l.alloc(v);return g.copy(S),g.length===0&&(S[0]=0),this._createEncoderBuffer(S)}if(g<128)return this._createEncoderBuffer(g);if(g<256)return this._createEncoderBuffer([0,g]);let b=1;for(let v=g;v>=256;v>>=8)b++;const x=new Array(b);for(let v=x.length-1;v>=0;v--)x[v]=255&g,g>>=8;return 128&x[0]&&x.unshift(0),this._createEncoderBuffer(l.from(x))},p.prototype._encodeBool=function(g){return this._createEncoderBuffer(g?255:0)},p.prototype._use=function(g,m){return typeof g=="function"&&(g=g(m)),g._getEncoder("der").tree},p.prototype._skipDefault=function(g,m,b){const x=this._baseState;let v;if(x.default===null)return!1;const S=g.join();if(x.defaultBuffer===void 0&&(x.defaultBuffer=this._encodeValue(x.default,m,b).join()),S.length!==x.defaultBuffer.length)return!1;for(v=0;v<S.length;v++)if(S[v]!==x.defaultBuffer[v])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(e,i,o){const a=o;a.der=e("./der"),a.pem=e("./pem")},{"./der":181,"./pem":183}],183:[function(e,i,o){const a=e("inherits"),l=e("./der");function t(h){l.call(this,h),this.enc="pem"}a(t,l),i.exports=t,t.prototype.encode=function(h,f){const p=l.prototype.encode.call(this,h).toString("base64"),_=["-----BEGIN "+f.label+"-----"];for(let g=0;g<p.length;g+=64)_.push(p.slice(g,g+64));return _.push("-----END "+f.label+"-----"),_.join(`
`)}},{"./der":181,inherits:440}],184:[function(e,i,o){(function(a,l){function t(G,Z){if(!G)throw new Error(Z||"Assertion failed")}function h(G,Z){G.super_=Z;var z=function(){};z.prototype=Z.prototype,G.prototype=new z,G.prototype.constructor=G}function f(G,Z,z){if(f.isBN(G))return G;this.negative=0,this.words=null,this.length=0,this.red=null,G!==null&&(Z!=="le"&&Z!=="be"||(z=Z,Z=10),this._init(G||0,Z||10,z||"be"))}var p;typeof a=="object"?a.exports=f:(void 0).BN=f,f.BN=f,f.wordSize=26;try{p=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function _(G,Z){var z=G.charCodeAt(Z);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function g(G,Z,z){var k=_(G,z);return z-1>=Z&&(k|=_(G,z-1)<<4),k}function m(G,Z,z,k){for(var R=0,N=Math.min(G.length,z),U=Z;U<N;U++){var Y=G.charCodeAt(U)-48;R*=k,R+=Y>=49?Y-49+10:Y>=17?Y-17+10:Y}return R}f.isBN=function(G){return G instanceof f||G!==null&&typeof G=="object"&&G.constructor.wordSize===f.wordSize&&Array.isArray(G.words)},f.max=function(G,Z){return G.cmp(Z)>0?G:Z},f.min=function(G,Z){return G.cmp(Z)<0?G:Z},f.prototype._init=function(G,Z,z){if(typeof G=="number")return this._initNumber(G,Z,z);if(typeof G=="object")return this._initArray(G,Z,z);Z==="hex"&&(Z=16),t(Z===(0|Z)&&Z>=2&&Z<=36);var k=0;(G=G.toString().replace(/\s+/g,""))[0]==="-"&&(k++,this.negative=1),k<G.length&&(Z===16?this._parseHex(G,k,z):(this._parseBase(G,Z,k),z==="le"&&this._initArray(this.toArray(),Z,z)))},f.prototype._initNumber=function(G,Z,z){G<0&&(this.negative=1,G=-G),G<67108864?(this.words=[67108863&G],this.length=1):G<4503599627370496?(this.words=[67108863&G,G/67108864&67108863],this.length=2):(t(G<9007199254740992),this.words=[67108863&G,G/67108864&67108863,1],this.length=3),z==="le"&&this._initArray(this.toArray(),Z,z)},f.prototype._initArray=function(G,Z,z){if(t(typeof G.length=="number"),G.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(G.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var R,N,U=0;if(z==="be")for(k=G.length-1,R=0;k>=0;k-=3)N=G[k]|G[k-1]<<8|G[k-2]<<16,this.words[R]|=N<<U&67108863,this.words[R+1]=N>>>26-U&67108863,(U+=24)>=26&&(U-=26,R++);else if(z==="le")for(k=0,R=0;k<G.length;k+=3)N=G[k]|G[k+1]<<8|G[k+2]<<16,this.words[R]|=N<<U&67108863,this.words[R+1]=N>>>26-U&67108863,(U+=24)>=26&&(U-=26,R++);return this.strip()},f.prototype._parseHex=function(G,Z,z){this.length=Math.ceil((G.length-Z)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var R,N=0,U=0;if(z==="be")for(k=G.length-1;k>=Z;k-=2)R=g(G,Z,k)<<N,this.words[U]|=67108863&R,N>=18?(N-=18,U+=1,this.words[U]|=R>>>26):N+=8;else for(k=(G.length-Z)%2==0?Z+1:Z;k<G.length;k+=2)R=g(G,Z,k)<<N,this.words[U]|=67108863&R,N>=18?(N-=18,U+=1,this.words[U]|=R>>>26):N+=8;this.strip()},f.prototype._parseBase=function(G,Z,z){this.words=[0],this.length=1;for(var k=0,R=1;R<=67108863;R*=Z)k++;k--,R=R/Z|0;for(var N=G.length-z,U=N%k,Y=Math.min(N,N-U)+z,de=0,J=z;J<Y;J+=k)de=m(G,J,J+k,Z),this.imuln(R),this.words[0]+de<67108864?this.words[0]+=de:this._iaddn(de);if(U!==0){var xe=1;for(de=m(G,J,G.length,Z),J=0;J<U;J++)xe*=Z;this.imuln(xe),this.words[0]+de<67108864?this.words[0]+=de:this._iaddn(de)}this.strip()},f.prototype.copy=function(G){G.words=new Array(this.length);for(var Z=0;Z<this.length;Z++)G.words[Z]=this.words[Z];G.length=this.length,G.negative=this.negative,G.red=this.red},f.prototype.clone=function(){var G=new f(null);return this.copy(G),G},f.prototype._expand=function(G){for(;this.length<G;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},f.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function S(G,Z,z){z.negative=Z.negative^G.negative;var k=G.length+Z.length|0;z.length=k,k=k-1|0;var R=0|G.words[0],N=0|Z.words[0],U=R*N,Y=67108863&U,de=U/67108864|0;z.words[0]=Y;for(var J=1;J<k;J++){for(var xe=de>>>26,Te=67108863&de,Ue=Math.min(J,Z.length-1),pe=Math.max(0,J-G.length+1);pe<=Ue;pe++){var Oe=J-pe|0;xe+=(U=(R=0|G.words[Oe])*(N=0|Z.words[pe])+Te)/67108864|0,Te=67108863&U}z.words[J]=0|Te,de=0|xe}return de!==0?z.words[J]=0|de:z.length--,z.strip()}f.prototype.toString=function(G,Z){var z;if(Z=0|Z||1,(G=G||10)===16||G==="hex"){z="";for(var k=0,R=0,N=0;N<this.length;N++){var U=this.words[N],Y=(16777215&(U<<k|R)).toString(16);z=(R=U>>>24-k&16777215)!==0||N!==this.length-1?b[6-Y.length]+Y+z:Y+z,(k+=2)>=26&&(k-=26,N--)}for(R!==0&&(z=R.toString(16)+z);z.length%Z!=0;)z="0"+z;return this.negative!==0&&(z="-"+z),z}if(G===(0|G)&&G>=2&&G<=36){var de=x[G],J=v[G];z="";var xe=this.clone();for(xe.negative=0;!xe.isZero();){var Te=xe.modn(J).toString(G);z=(xe=xe.idivn(J)).isZero()?Te+z:b[de-Te.length]+Te+z}for(this.isZero()&&(z="0"+z);z.length%Z!=0;)z="0"+z;return this.negative!==0&&(z="-"+z),z}t(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var G=this.words[0];return this.length===2?G+=67108864*this.words[1]:this.length===3&&this.words[2]===1?G+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-G:G},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(G,Z){return t(p!==void 0),this.toArrayLike(p,G,Z)},f.prototype.toArray=function(G,Z){return this.toArrayLike(Array,G,Z)},f.prototype.toArrayLike=function(G,Z,z){var k=this.byteLength(),R=z||Math.max(1,k);t(k<=R,"byte array longer than desired length"),t(R>0,"Requested array length <= 0"),this.strip();var N,U,Y=Z==="le",de=new G(R),J=this.clone();if(Y){for(U=0;!J.isZero();U++)N=J.andln(255),J.iushrn(8),de[U]=N;for(;U<R;U++)de[U]=0}else{for(U=0;U<R-k;U++)de[U]=0;for(U=0;!J.isZero();U++)N=J.andln(255),J.iushrn(8),de[R-U-1]=N}return de},Math.clz32?f.prototype._countBits=function(G){return 32-Math.clz32(G)}:f.prototype._countBits=function(G){var Z=G,z=0;return Z>=4096&&(z+=13,Z>>>=13),Z>=64&&(z+=7,Z>>>=7),Z>=8&&(z+=4,Z>>>=4),Z>=2&&(z+=2,Z>>>=2),z+Z},f.prototype._zeroBits=function(G){if(G===0)return 26;var Z=G,z=0;return(8191&Z)==0&&(z+=13,Z>>>=13),(127&Z)==0&&(z+=7,Z>>>=7),(15&Z)==0&&(z+=4,Z>>>=4),(3&Z)==0&&(z+=2,Z>>>=2),(1&Z)==0&&z++,z},f.prototype.bitLength=function(){var G=this.words[this.length-1],Z=this._countBits(G);return 26*(this.length-1)+Z},f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var G=0,Z=0;Z<this.length;Z++){var z=this._zeroBits(this.words[Z]);if(G+=z,z!==26)break}return G},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(G){return this.negative!==0?this.abs().inotn(G).iaddn(1):this.clone()},f.prototype.fromTwos=function(G){return this.testn(G-1)?this.notn(G).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return this.negative!==0},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(G){for(;this.length<G.length;)this.words[this.length++]=0;for(var Z=0;Z<G.length;Z++)this.words[Z]=this.words[Z]|G.words[Z];return this.strip()},f.prototype.ior=function(G){return t((this.negative|G.negative)==0),this.iuor(G)},f.prototype.or=function(G){return this.length>G.length?this.clone().ior(G):G.clone().ior(this)},f.prototype.uor=function(G){return this.length>G.length?this.clone().iuor(G):G.clone().iuor(this)},f.prototype.iuand=function(G){var Z;Z=this.length>G.length?G:this;for(var z=0;z<Z.length;z++)this.words[z]=this.words[z]&G.words[z];return this.length=Z.length,this.strip()},f.prototype.iand=function(G){return t((this.negative|G.negative)==0),this.iuand(G)},f.prototype.and=function(G){return this.length>G.length?this.clone().iand(G):G.clone().iand(this)},f.prototype.uand=function(G){return this.length>G.length?this.clone().iuand(G):G.clone().iuand(this)},f.prototype.iuxor=function(G){var Z,z;this.length>G.length?(Z=this,z=G):(Z=G,z=this);for(var k=0;k<z.length;k++)this.words[k]=Z.words[k]^z.words[k];if(this!==Z)for(;k<Z.length;k++)this.words[k]=Z.words[k];return this.length=Z.length,this.strip()},f.prototype.ixor=function(G){return t((this.negative|G.negative)==0),this.iuxor(G)},f.prototype.xor=function(G){return this.length>G.length?this.clone().ixor(G):G.clone().ixor(this)},f.prototype.uxor=function(G){return this.length>G.length?this.clone().iuxor(G):G.clone().iuxor(this)},f.prototype.inotn=function(G){t(typeof G=="number"&&G>=0);var Z=0|Math.ceil(G/26),z=G%26;this._expand(Z),z>0&&Z--;for(var k=0;k<Z;k++)this.words[k]=67108863&~this.words[k];return z>0&&(this.words[k]=~this.words[k]&67108863>>26-z),this.strip()},f.prototype.notn=function(G){return this.clone().inotn(G)},f.prototype.setn=function(G,Z){t(typeof G=="number"&&G>=0);var z=G/26|0,k=G%26;return this._expand(z+1),this.words[z]=Z?this.words[z]|1<<k:this.words[z]&~(1<<k),this.strip()},f.prototype.iadd=function(G){var Z,z,k;if(this.negative!==0&&G.negative===0)return this.negative=0,Z=this.isub(G),this.negative^=1,this._normSign();if(this.negative===0&&G.negative!==0)return G.negative=0,Z=this.isub(G),G.negative=1,Z._normSign();this.length>G.length?(z=this,k=G):(z=G,k=this);for(var R=0,N=0;N<k.length;N++)Z=(0|z.words[N])+(0|k.words[N])+R,this.words[N]=67108863&Z,R=Z>>>26;for(;R!==0&&N<z.length;N++)Z=(0|z.words[N])+R,this.words[N]=67108863&Z,R=Z>>>26;if(this.length=z.length,R!==0)this.words[this.length]=R,this.length++;else if(z!==this)for(;N<z.length;N++)this.words[N]=z.words[N];return this},f.prototype.add=function(G){var Z;return G.negative!==0&&this.negative===0?(G.negative=0,Z=this.sub(G),G.negative^=1,Z):G.negative===0&&this.negative!==0?(this.negative=0,Z=G.sub(this),this.negative=1,Z):this.length>G.length?this.clone().iadd(G):G.clone().iadd(this)},f.prototype.isub=function(G){if(G.negative!==0){G.negative=0;var Z=this.iadd(G);return G.negative=1,Z._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(G),this.negative=1,this._normSign();var z,k,R=this.cmp(G);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;R>0?(z=this,k=G):(z=G,k=this);for(var N=0,U=0;U<k.length;U++)N=(Z=(0|z.words[U])-(0|k.words[U])+N)>>26,this.words[U]=67108863&Z;for(;N!==0&&U<z.length;U++)N=(Z=(0|z.words[U])+N)>>26,this.words[U]=67108863&Z;if(N===0&&U<z.length&&z!==this)for(;U<z.length;U++)this.words[U]=z.words[U];return this.length=Math.max(this.length,U),z!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(G){return this.clone().isub(G)};var B=function(G,Z,z){var k,R,N,U=G.words,Y=Z.words,de=z.words,J=0,xe=0|U[0],Te=8191&xe,Ue=xe>>>13,pe=0|U[1],Oe=8191&pe,re=pe>>>13,ie=0|U[2],Be=8191&ie,He=ie>>>13,Ge=0|U[3],Ne=8191&Ge,st=Ge>>>13,ot=0|U[4],Je=8191&ot,Ze=ot>>>13,bt=0|U[5],yt=8191&bt,Nt=bt>>>13,kt=0|U[6],Gt=8191&kt,fr=kt>>>13,Tr=0|U[7],yr=8191&Tr,Dr=Tr>>>13,jt=0|U[8],Jt=8191&jt,pr=jt>>>13,Ft=0|U[9],er=8191&Ft,ur=Ft>>>13,Yt=0|Y[0],mr=8191&Yt,Mr=Yt>>>13,sn=0|Y[1],Un=8191&sn,wn=sn>>>13,Zi=0|Y[2],ai=8191&Zi,_i=Zi>>>13,Zn=0|Y[3],Bn=8191&Zn,On=Zn>>>13,tr=0|Y[4],zn=8191&tr,Ki=tr>>>13,Qs=0|Y[5],li=8191&Qs,Qt=Qs>>>13,Ve=0|Y[6],et=8191&Ve,We=Ve>>>13,tt=0|Y[7],nt=8191&tt,Ct=tt>>>13,rr=0|Y[8],Et=8191&rr,nr=rr>>>13,Fr=0|Y[9],_r=8191&Fr,pn=Fr>>>13;z.negative=G.negative^Z.negative,z.length=19;var Tn=(J+(k=Math.imul(Te,mr))|0)+((8191&(R=(R=Math.imul(Te,Mr))+Math.imul(Ue,mr)|0))<<13)|0;J=((N=Math.imul(Ue,Mr))+(R>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,k=Math.imul(Oe,mr),R=(R=Math.imul(Oe,Mr))+Math.imul(re,mr)|0,N=Math.imul(re,Mr);var Vn=(J+(k=k+Math.imul(Te,Un)|0)|0)+((8191&(R=(R=R+Math.imul(Te,wn)|0)+Math.imul(Ue,Un)|0))<<13)|0;J=((N=N+Math.imul(Ue,wn)|0)+(R>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,k=Math.imul(Be,mr),R=(R=Math.imul(Be,Mr))+Math.imul(He,mr)|0,N=Math.imul(He,Mr),k=k+Math.imul(Oe,Un)|0,R=(R=R+Math.imul(Oe,wn)|0)+Math.imul(re,Un)|0,N=N+Math.imul(re,wn)|0;var Bi=(J+(k=k+Math.imul(Te,ai)|0)|0)+((8191&(R=(R=R+Math.imul(Te,_i)|0)+Math.imul(Ue,ai)|0))<<13)|0;J=((N=N+Math.imul(Ue,_i)|0)+(R>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,k=Math.imul(Ne,mr),R=(R=Math.imul(Ne,Mr))+Math.imul(st,mr)|0,N=Math.imul(st,Mr),k=k+Math.imul(Be,Un)|0,R=(R=R+Math.imul(Be,wn)|0)+Math.imul(He,Un)|0,N=N+Math.imul(He,wn)|0,k=k+Math.imul(Oe,ai)|0,R=(R=R+Math.imul(Oe,_i)|0)+Math.imul(re,ai)|0,N=N+Math.imul(re,_i)|0;var Si=(J+(k=k+Math.imul(Te,Bn)|0)|0)+((8191&(R=(R=R+Math.imul(Te,On)|0)+Math.imul(Ue,Bn)|0))<<13)|0;J=((N=N+Math.imul(Ue,On)|0)+(R>>>13)|0)+(Si>>>26)|0,Si&=67108863,k=Math.imul(Je,mr),R=(R=Math.imul(Je,Mr))+Math.imul(Ze,mr)|0,N=Math.imul(Ze,Mr),k=k+Math.imul(Ne,Un)|0,R=(R=R+Math.imul(Ne,wn)|0)+Math.imul(st,Un)|0,N=N+Math.imul(st,wn)|0,k=k+Math.imul(Be,ai)|0,R=(R=R+Math.imul(Be,_i)|0)+Math.imul(He,ai)|0,N=N+Math.imul(He,_i)|0,k=k+Math.imul(Oe,Bn)|0,R=(R=R+Math.imul(Oe,On)|0)+Math.imul(re,Bn)|0,N=N+Math.imul(re,On)|0;var Di=(J+(k=k+Math.imul(Te,zn)|0)|0)+((8191&(R=(R=R+Math.imul(Te,Ki)|0)+Math.imul(Ue,zn)|0))<<13)|0;J=((N=N+Math.imul(Ue,Ki)|0)+(R>>>13)|0)+(Di>>>26)|0,Di&=67108863,k=Math.imul(yt,mr),R=(R=Math.imul(yt,Mr))+Math.imul(Nt,mr)|0,N=Math.imul(Nt,Mr),k=k+Math.imul(Je,Un)|0,R=(R=R+Math.imul(Je,wn)|0)+Math.imul(Ze,Un)|0,N=N+Math.imul(Ze,wn)|0,k=k+Math.imul(Ne,ai)|0,R=(R=R+Math.imul(Ne,_i)|0)+Math.imul(st,ai)|0,N=N+Math.imul(st,_i)|0,k=k+Math.imul(Be,Bn)|0,R=(R=R+Math.imul(Be,On)|0)+Math.imul(He,Bn)|0,N=N+Math.imul(He,On)|0,k=k+Math.imul(Oe,zn)|0,R=(R=R+Math.imul(Oe,Ki)|0)+Math.imul(re,zn)|0,N=N+Math.imul(re,Ki)|0;var ds=(J+(k=k+Math.imul(Te,li)|0)|0)+((8191&(R=(R=R+Math.imul(Te,Qt)|0)+Math.imul(Ue,li)|0))<<13)|0;J=((N=N+Math.imul(Ue,Qt)|0)+(R>>>13)|0)+(ds>>>26)|0,ds&=67108863,k=Math.imul(Gt,mr),R=(R=Math.imul(Gt,Mr))+Math.imul(fr,mr)|0,N=Math.imul(fr,Mr),k=k+Math.imul(yt,Un)|0,R=(R=R+Math.imul(yt,wn)|0)+Math.imul(Nt,Un)|0,N=N+Math.imul(Nt,wn)|0,k=k+Math.imul(Je,ai)|0,R=(R=R+Math.imul(Je,_i)|0)+Math.imul(Ze,ai)|0,N=N+Math.imul(Ze,_i)|0,k=k+Math.imul(Ne,Bn)|0,R=(R=R+Math.imul(Ne,On)|0)+Math.imul(st,Bn)|0,N=N+Math.imul(st,On)|0,k=k+Math.imul(Be,zn)|0,R=(R=R+Math.imul(Be,Ki)|0)+Math.imul(He,zn)|0,N=N+Math.imul(He,Ki)|0,k=k+Math.imul(Oe,li)|0,R=(R=R+Math.imul(Oe,Qt)|0)+Math.imul(re,li)|0,N=N+Math.imul(re,Qt)|0;var Qi=(J+(k=k+Math.imul(Te,et)|0)|0)+((8191&(R=(R=R+Math.imul(Te,We)|0)+Math.imul(Ue,et)|0))<<13)|0;J=((N=N+Math.imul(Ue,We)|0)+(R>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,k=Math.imul(yr,mr),R=(R=Math.imul(yr,Mr))+Math.imul(Dr,mr)|0,N=Math.imul(Dr,Mr),k=k+Math.imul(Gt,Un)|0,R=(R=R+Math.imul(Gt,wn)|0)+Math.imul(fr,Un)|0,N=N+Math.imul(fr,wn)|0,k=k+Math.imul(yt,ai)|0,R=(R=R+Math.imul(yt,_i)|0)+Math.imul(Nt,ai)|0,N=N+Math.imul(Nt,_i)|0,k=k+Math.imul(Je,Bn)|0,R=(R=R+Math.imul(Je,On)|0)+Math.imul(Ze,Bn)|0,N=N+Math.imul(Ze,On)|0,k=k+Math.imul(Ne,zn)|0,R=(R=R+Math.imul(Ne,Ki)|0)+Math.imul(st,zn)|0,N=N+Math.imul(st,Ki)|0,k=k+Math.imul(Be,li)|0,R=(R=R+Math.imul(Be,Qt)|0)+Math.imul(He,li)|0,N=N+Math.imul(He,Qt)|0,k=k+Math.imul(Oe,et)|0,R=(R=R+Math.imul(Oe,We)|0)+Math.imul(re,et)|0,N=N+Math.imul(re,We)|0;var Zt=(J+(k=k+Math.imul(Te,nt)|0)|0)+((8191&(R=(R=R+Math.imul(Te,Ct)|0)+Math.imul(Ue,nt)|0))<<13)|0;J=((N=N+Math.imul(Ue,Ct)|0)+(R>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,k=Math.imul(Jt,mr),R=(R=Math.imul(Jt,Mr))+Math.imul(pr,mr)|0,N=Math.imul(pr,Mr),k=k+Math.imul(yr,Un)|0,R=(R=R+Math.imul(yr,wn)|0)+Math.imul(Dr,Un)|0,N=N+Math.imul(Dr,wn)|0,k=k+Math.imul(Gt,ai)|0,R=(R=R+Math.imul(Gt,_i)|0)+Math.imul(fr,ai)|0,N=N+Math.imul(fr,_i)|0,k=k+Math.imul(yt,Bn)|0,R=(R=R+Math.imul(yt,On)|0)+Math.imul(Nt,Bn)|0,N=N+Math.imul(Nt,On)|0,k=k+Math.imul(Je,zn)|0,R=(R=R+Math.imul(Je,Ki)|0)+Math.imul(Ze,zn)|0,N=N+Math.imul(Ze,Ki)|0,k=k+Math.imul(Ne,li)|0,R=(R=R+Math.imul(Ne,Qt)|0)+Math.imul(st,li)|0,N=N+Math.imul(st,Qt)|0,k=k+Math.imul(Be,et)|0,R=(R=R+Math.imul(Be,We)|0)+Math.imul(He,et)|0,N=N+Math.imul(He,We)|0,k=k+Math.imul(Oe,nt)|0,R=(R=R+Math.imul(Oe,Ct)|0)+Math.imul(re,nt)|0,N=N+Math.imul(re,Ct)|0;var $r=(J+(k=k+Math.imul(Te,Et)|0)|0)+((8191&(R=(R=R+Math.imul(Te,nr)|0)+Math.imul(Ue,Et)|0))<<13)|0;J=((N=N+Math.imul(Ue,nr)|0)+(R>>>13)|0)+($r>>>26)|0,$r&=67108863,k=Math.imul(er,mr),R=(R=Math.imul(er,Mr))+Math.imul(ur,mr)|0,N=Math.imul(ur,Mr),k=k+Math.imul(Jt,Un)|0,R=(R=R+Math.imul(Jt,wn)|0)+Math.imul(pr,Un)|0,N=N+Math.imul(pr,wn)|0,k=k+Math.imul(yr,ai)|0,R=(R=R+Math.imul(yr,_i)|0)+Math.imul(Dr,ai)|0,N=N+Math.imul(Dr,_i)|0,k=k+Math.imul(Gt,Bn)|0,R=(R=R+Math.imul(Gt,On)|0)+Math.imul(fr,Bn)|0,N=N+Math.imul(fr,On)|0,k=k+Math.imul(yt,zn)|0,R=(R=R+Math.imul(yt,Ki)|0)+Math.imul(Nt,zn)|0,N=N+Math.imul(Nt,Ki)|0,k=k+Math.imul(Je,li)|0,R=(R=R+Math.imul(Je,Qt)|0)+Math.imul(Ze,li)|0,N=N+Math.imul(Ze,Qt)|0,k=k+Math.imul(Ne,et)|0,R=(R=R+Math.imul(Ne,We)|0)+Math.imul(st,et)|0,N=N+Math.imul(st,We)|0,k=k+Math.imul(Be,nt)|0,R=(R=R+Math.imul(Be,Ct)|0)+Math.imul(He,nt)|0,N=N+Math.imul(He,Ct)|0,k=k+Math.imul(Oe,Et)|0,R=(R=R+Math.imul(Oe,nr)|0)+Math.imul(re,Et)|0,N=N+Math.imul(re,nr)|0;var kn=(J+(k=k+Math.imul(Te,_r)|0)|0)+((8191&(R=(R=R+Math.imul(Te,pn)|0)+Math.imul(Ue,_r)|0))<<13)|0;J=((N=N+Math.imul(Ue,pn)|0)+(R>>>13)|0)+(kn>>>26)|0,kn&=67108863,k=Math.imul(er,Un),R=(R=Math.imul(er,wn))+Math.imul(ur,Un)|0,N=Math.imul(ur,wn),k=k+Math.imul(Jt,ai)|0,R=(R=R+Math.imul(Jt,_i)|0)+Math.imul(pr,ai)|0,N=N+Math.imul(pr,_i)|0,k=k+Math.imul(yr,Bn)|0,R=(R=R+Math.imul(yr,On)|0)+Math.imul(Dr,Bn)|0,N=N+Math.imul(Dr,On)|0,k=k+Math.imul(Gt,zn)|0,R=(R=R+Math.imul(Gt,Ki)|0)+Math.imul(fr,zn)|0,N=N+Math.imul(fr,Ki)|0,k=k+Math.imul(yt,li)|0,R=(R=R+Math.imul(yt,Qt)|0)+Math.imul(Nt,li)|0,N=N+Math.imul(Nt,Qt)|0,k=k+Math.imul(Je,et)|0,R=(R=R+Math.imul(Je,We)|0)+Math.imul(Ze,et)|0,N=N+Math.imul(Ze,We)|0,k=k+Math.imul(Ne,nt)|0,R=(R=R+Math.imul(Ne,Ct)|0)+Math.imul(st,nt)|0,N=N+Math.imul(st,Ct)|0,k=k+Math.imul(Be,Et)|0,R=(R=R+Math.imul(Be,nr)|0)+Math.imul(He,Et)|0,N=N+Math.imul(He,nr)|0;var vn=(J+(k=k+Math.imul(Oe,_r)|0)|0)+((8191&(R=(R=R+Math.imul(Oe,pn)|0)+Math.imul(re,_r)|0))<<13)|0;J=((N=N+Math.imul(re,pn)|0)+(R>>>13)|0)+(vn>>>26)|0,vn&=67108863,k=Math.imul(er,ai),R=(R=Math.imul(er,_i))+Math.imul(ur,ai)|0,N=Math.imul(ur,_i),k=k+Math.imul(Jt,Bn)|0,R=(R=R+Math.imul(Jt,On)|0)+Math.imul(pr,Bn)|0,N=N+Math.imul(pr,On)|0,k=k+Math.imul(yr,zn)|0,R=(R=R+Math.imul(yr,Ki)|0)+Math.imul(Dr,zn)|0,N=N+Math.imul(Dr,Ki)|0,k=k+Math.imul(Gt,li)|0,R=(R=R+Math.imul(Gt,Qt)|0)+Math.imul(fr,li)|0,N=N+Math.imul(fr,Qt)|0,k=k+Math.imul(yt,et)|0,R=(R=R+Math.imul(yt,We)|0)+Math.imul(Nt,et)|0,N=N+Math.imul(Nt,We)|0,k=k+Math.imul(Je,nt)|0,R=(R=R+Math.imul(Je,Ct)|0)+Math.imul(Ze,nt)|0,N=N+Math.imul(Ze,Ct)|0,k=k+Math.imul(Ne,Et)|0,R=(R=R+Math.imul(Ne,nr)|0)+Math.imul(st,Et)|0,N=N+Math.imul(st,nr)|0;var si=(J+(k=k+Math.imul(Be,_r)|0)|0)+((8191&(R=(R=R+Math.imul(Be,pn)|0)+Math.imul(He,_r)|0))<<13)|0;J=((N=N+Math.imul(He,pn)|0)+(R>>>13)|0)+(si>>>26)|0,si&=67108863,k=Math.imul(er,Bn),R=(R=Math.imul(er,On))+Math.imul(ur,Bn)|0,N=Math.imul(ur,On),k=k+Math.imul(Jt,zn)|0,R=(R=R+Math.imul(Jt,Ki)|0)+Math.imul(pr,zn)|0,N=N+Math.imul(pr,Ki)|0,k=k+Math.imul(yr,li)|0,R=(R=R+Math.imul(yr,Qt)|0)+Math.imul(Dr,li)|0,N=N+Math.imul(Dr,Qt)|0,k=k+Math.imul(Gt,et)|0,R=(R=R+Math.imul(Gt,We)|0)+Math.imul(fr,et)|0,N=N+Math.imul(fr,We)|0,k=k+Math.imul(yt,nt)|0,R=(R=R+Math.imul(yt,Ct)|0)+Math.imul(Nt,nt)|0,N=N+Math.imul(Nt,Ct)|0,k=k+Math.imul(Je,Et)|0,R=(R=R+Math.imul(Je,nr)|0)+Math.imul(Ze,Et)|0,N=N+Math.imul(Ze,nr)|0;var qn=(J+(k=k+Math.imul(Ne,_r)|0)|0)+((8191&(R=(R=R+Math.imul(Ne,pn)|0)+Math.imul(st,_r)|0))<<13)|0;J=((N=N+Math.imul(st,pn)|0)+(R>>>13)|0)+(qn>>>26)|0,qn&=67108863,k=Math.imul(er,zn),R=(R=Math.imul(er,Ki))+Math.imul(ur,zn)|0,N=Math.imul(ur,Ki),k=k+Math.imul(Jt,li)|0,R=(R=R+Math.imul(Jt,Qt)|0)+Math.imul(pr,li)|0,N=N+Math.imul(pr,Qt)|0,k=k+Math.imul(yr,et)|0,R=(R=R+Math.imul(yr,We)|0)+Math.imul(Dr,et)|0,N=N+Math.imul(Dr,We)|0,k=k+Math.imul(Gt,nt)|0,R=(R=R+Math.imul(Gt,Ct)|0)+Math.imul(fr,nt)|0,N=N+Math.imul(fr,Ct)|0,k=k+Math.imul(yt,Et)|0,R=(R=R+Math.imul(yt,nr)|0)+Math.imul(Nt,Et)|0,N=N+Math.imul(Nt,nr)|0;var Yn=(J+(k=k+Math.imul(Je,_r)|0)|0)+((8191&(R=(R=R+Math.imul(Je,pn)|0)+Math.imul(Ze,_r)|0))<<13)|0;J=((N=N+Math.imul(Ze,pn)|0)+(R>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,k=Math.imul(er,li),R=(R=Math.imul(er,Qt))+Math.imul(ur,li)|0,N=Math.imul(ur,Qt),k=k+Math.imul(Jt,et)|0,R=(R=R+Math.imul(Jt,We)|0)+Math.imul(pr,et)|0,N=N+Math.imul(pr,We)|0,k=k+Math.imul(yr,nt)|0,R=(R=R+Math.imul(yr,Ct)|0)+Math.imul(Dr,nt)|0,N=N+Math.imul(Dr,Ct)|0,k=k+Math.imul(Gt,Et)|0,R=(R=R+Math.imul(Gt,nr)|0)+Math.imul(fr,Et)|0,N=N+Math.imul(fr,nr)|0;var Wi=(J+(k=k+Math.imul(yt,_r)|0)|0)+((8191&(R=(R=R+Math.imul(yt,pn)|0)+Math.imul(Nt,_r)|0))<<13)|0;J=((N=N+Math.imul(Nt,pn)|0)+(R>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,k=Math.imul(er,et),R=(R=Math.imul(er,We))+Math.imul(ur,et)|0,N=Math.imul(ur,We),k=k+Math.imul(Jt,nt)|0,R=(R=R+Math.imul(Jt,Ct)|0)+Math.imul(pr,nt)|0,N=N+Math.imul(pr,Ct)|0,k=k+Math.imul(yr,Et)|0,R=(R=R+Math.imul(yr,nr)|0)+Math.imul(Dr,Et)|0,N=N+Math.imul(Dr,nr)|0;var us=(J+(k=k+Math.imul(Gt,_r)|0)|0)+((8191&(R=(R=R+Math.imul(Gt,pn)|0)+Math.imul(fr,_r)|0))<<13)|0;J=((N=N+Math.imul(fr,pn)|0)+(R>>>13)|0)+(us>>>26)|0,us&=67108863,k=Math.imul(er,nt),R=(R=Math.imul(er,Ct))+Math.imul(ur,nt)|0,N=Math.imul(ur,Ct),k=k+Math.imul(Jt,Et)|0,R=(R=R+Math.imul(Jt,nr)|0)+Math.imul(pr,Et)|0,N=N+Math.imul(pr,nr)|0;var xs=(J+(k=k+Math.imul(yr,_r)|0)|0)+((8191&(R=(R=R+Math.imul(yr,pn)|0)+Math.imul(Dr,_r)|0))<<13)|0;J=((N=N+Math.imul(Dr,pn)|0)+(R>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(er,Et),R=(R=Math.imul(er,nr))+Math.imul(ur,Et)|0,N=Math.imul(ur,nr);var zi=(J+(k=k+Math.imul(Jt,_r)|0)|0)+((8191&(R=(R=R+Math.imul(Jt,pn)|0)+Math.imul(pr,_r)|0))<<13)|0;J=((N=N+Math.imul(pr,pn)|0)+(R>>>13)|0)+(zi>>>26)|0,zi&=67108863;var uo=(J+(k=Math.imul(er,_r))|0)+((8191&(R=(R=Math.imul(er,pn))+Math.imul(ur,_r)|0))<<13)|0;return J=((N=Math.imul(ur,pn))+(R>>>13)|0)+(uo>>>26)|0,uo&=67108863,de[0]=Tn,de[1]=Vn,de[2]=Bi,de[3]=Si,de[4]=Di,de[5]=ds,de[6]=Qi,de[7]=Zt,de[8]=$r,de[9]=kn,de[10]=vn,de[11]=si,de[12]=qn,de[13]=Yn,de[14]=Wi,de[15]=us,de[16]=xs,de[17]=zi,de[18]=uo,J!==0&&(de[19]=J,z.length++),z};function F(G,Z,z){return new O().mulp(G,Z,z)}function O(G,Z){this.x=G,this.y=Z}Math.imul||(B=S),f.prototype.mulTo=function(G,Z){var z=this.length+G.length;return this.length===10&&G.length===10?B(this,G,Z):z<63?S(this,G,Z):z<1024?function(k,R,N){N.negative=R.negative^k.negative,N.length=k.length+R.length;for(var U=0,Y=0,de=0;de<N.length-1;de++){var J=Y;Y=0;for(var xe=67108863&U,Te=Math.min(de,R.length-1),Ue=Math.max(0,de-k.length+1);Ue<=Te;Ue++){var pe=de-Ue,Oe=(0|k.words[pe])*(0|R.words[Ue]),re=67108863&Oe;xe=67108863&(re=re+xe|0),Y+=(J=(J=J+(Oe/67108864|0)|0)+(re>>>26)|0)>>>26,J&=67108863}N.words[de]=xe,U=J,J=Y}return U!==0?N.words[de]=U:N.length--,N.strip()}(this,G,Z):F(this,G,Z)},O.prototype.makeRBT=function(G){for(var Z=new Array(G),z=f.prototype._countBits(G)-1,k=0;k<G;k++)Z[k]=this.revBin(k,z,G);return Z},O.prototype.revBin=function(G,Z,z){if(G===0||G===z-1)return G;for(var k=0,R=0;R<Z;R++)k|=(1&G)<<Z-R-1,G>>=1;return k},O.prototype.permute=function(G,Z,z,k,R,N){for(var U=0;U<N;U++)k[U]=Z[G[U]],R[U]=z[G[U]]},O.prototype.transform=function(G,Z,z,k,R,N){this.permute(N,G,Z,z,k,R);for(var U=1;U<R;U<<=1)for(var Y=U<<1,de=Math.cos(2*Math.PI/Y),J=Math.sin(2*Math.PI/Y),xe=0;xe<R;xe+=Y)for(var Te=de,Ue=J,pe=0;pe<U;pe++){var Oe=z[xe+pe],re=k[xe+pe],ie=z[xe+pe+U],Be=k[xe+pe+U],He=Te*ie-Ue*Be;Be=Te*Be+Ue*ie,ie=He,z[xe+pe]=Oe+ie,k[xe+pe]=re+Be,z[xe+pe+U]=Oe-ie,k[xe+pe+U]=re-Be,pe!==Y&&(He=de*Te-J*Ue,Ue=de*Ue+J*Te,Te=He)}},O.prototype.guessLen13b=function(G,Z){var z=1|Math.max(Z,G),k=1&z,R=0;for(z=z/2|0;z;z>>>=1)R++;return 1<<R+1+k},O.prototype.conjugate=function(G,Z,z){if(!(z<=1))for(var k=0;k<z/2;k++){var R=G[k];G[k]=G[z-k-1],G[z-k-1]=R,R=Z[k],Z[k]=-Z[z-k-1],Z[z-k-1]=-R}},O.prototype.normalize13b=function(G,Z){for(var z=0,k=0;k<Z/2;k++){var R=8192*Math.round(G[2*k+1]/Z)+Math.round(G[2*k]/Z)+z;G[k]=67108863&R,z=R<67108864?0:R/67108864|0}return G},O.prototype.convert13b=function(G,Z,z,k){for(var R=0,N=0;N<Z;N++)R+=0|G[N],z[2*N]=8191&R,R>>>=13,z[2*N+1]=8191&R,R>>>=13;for(N=2*Z;N<k;++N)z[N]=0;t(R===0),t((-8192&R)==0)},O.prototype.stub=function(G){for(var Z=new Array(G),z=0;z<G;z++)Z[z]=0;return Z},O.prototype.mulp=function(G,Z,z){var k=2*this.guessLen13b(G.length,Z.length),R=this.makeRBT(k),N=this.stub(k),U=new Array(k),Y=new Array(k),de=new Array(k),J=new Array(k),xe=new Array(k),Te=new Array(k),Ue=z.words;Ue.length=k,this.convert13b(G.words,G.length,U,k),this.convert13b(Z.words,Z.length,J,k),this.transform(U,N,Y,de,k,R),this.transform(J,N,xe,Te,k,R);for(var pe=0;pe<k;pe++){var Oe=Y[pe]*xe[pe]-de[pe]*Te[pe];de[pe]=Y[pe]*Te[pe]+de[pe]*xe[pe],Y[pe]=Oe}return this.conjugate(Y,de,k),this.transform(Y,de,Ue,N,k,R),this.conjugate(Ue,N,k),this.normalize13b(Ue,k),z.negative=G.negative^Z.negative,z.length=G.length+Z.length,z.strip()},f.prototype.mul=function(G){var Z=new f(null);return Z.words=new Array(this.length+G.length),this.mulTo(G,Z)},f.prototype.mulf=function(G){var Z=new f(null);return Z.words=new Array(this.length+G.length),F(this,G,Z)},f.prototype.imul=function(G){return this.clone().mulTo(G,this)},f.prototype.imuln=function(G){t(typeof G=="number"),t(G<67108864);for(var Z=0,z=0;z<this.length;z++){var k=(0|this.words[z])*G,R=(67108863&k)+(67108863&Z);Z>>=26,Z+=k/67108864|0,Z+=R>>>26,this.words[z]=67108863&R}return Z!==0&&(this.words[z]=Z,this.length++),this},f.prototype.muln=function(G){return this.clone().imuln(G)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(G){var Z=function(N){for(var U=new Array(N.bitLength()),Y=0;Y<U.length;Y++){var de=Y/26|0,J=Y%26;U[Y]=(N.words[de]&1<<J)>>>J}return U}(G);if(Z.length===0)return new f(1);for(var z=this,k=0;k<Z.length&&Z[k]===0;k++,z=z.sqr());if(++k<Z.length)for(var R=z.sqr();k<Z.length;k++,R=R.sqr())Z[k]!==0&&(z=z.mul(R));return z},f.prototype.iushln=function(G){t(typeof G=="number"&&G>=0);var Z,z=G%26,k=(G-z)/26,R=67108863>>>26-z<<26-z;if(z!==0){var N=0;for(Z=0;Z<this.length;Z++){var U=this.words[Z]&R,Y=(0|this.words[Z])-U<<z;this.words[Z]=Y|N,N=U>>>26-z}N&&(this.words[Z]=N,this.length++)}if(k!==0){for(Z=this.length-1;Z>=0;Z--)this.words[Z+k]=this.words[Z];for(Z=0;Z<k;Z++)this.words[Z]=0;this.length+=k}return this.strip()},f.prototype.ishln=function(G){return t(this.negative===0),this.iushln(G)},f.prototype.iushrn=function(G,Z,z){var k;t(typeof G=="number"&&G>=0),k=Z?(Z-Z%26)/26:0;var R=G%26,N=Math.min((G-R)/26,this.length),U=67108863^67108863>>>R<<R,Y=z;if(k-=N,k=Math.max(0,k),Y){for(var de=0;de<N;de++)Y.words[de]=this.words[de];Y.length=N}if(N!==0)if(this.length>N)for(this.length-=N,de=0;de<this.length;de++)this.words[de]=this.words[de+N];else this.words[0]=0,this.length=1;var J=0;for(de=this.length-1;de>=0&&(J!==0||de>=k);de--){var xe=0|this.words[de];this.words[de]=J<<26-R|xe>>>R,J=xe&U}return Y&&J!==0&&(Y.words[Y.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(G,Z,z){return t(this.negative===0),this.iushrn(G,Z,z)},f.prototype.shln=function(G){return this.clone().ishln(G)},f.prototype.ushln=function(G){return this.clone().iushln(G)},f.prototype.shrn=function(G){return this.clone().ishrn(G)},f.prototype.ushrn=function(G){return this.clone().iushrn(G)},f.prototype.testn=function(G){t(typeof G=="number"&&G>=0);var Z=G%26,z=(G-Z)/26,k=1<<Z;return!(this.length<=z)&&!!(this.words[z]&k)},f.prototype.imaskn=function(G){t(typeof G=="number"&&G>=0);var Z=G%26,z=(G-Z)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=z)return this;if(Z!==0&&z++,this.length=Math.min(z,this.length),Z!==0){var k=67108863^67108863>>>Z<<Z;this.words[this.length-1]&=k}return this.strip()},f.prototype.maskn=function(G){return this.clone().imaskn(G)},f.prototype.iaddn=function(G){return t(typeof G=="number"),t(G<67108864),G<0?this.isubn(-G):this.negative!==0?this.length===1&&(0|this.words[0])<G?(this.words[0]=G-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(G),this.negative=1,this):this._iaddn(G)},f.prototype._iaddn=function(G){this.words[0]+=G;for(var Z=0;Z<this.length&&this.words[Z]>=67108864;Z++)this.words[Z]-=67108864,Z===this.length-1?this.words[Z+1]=1:this.words[Z+1]++;return this.length=Math.max(this.length,Z+1),this},f.prototype.isubn=function(G){if(t(typeof G=="number"),t(G<67108864),G<0)return this.iaddn(-G);if(this.negative!==0)return this.negative=0,this.iaddn(G),this.negative=1,this;if(this.words[0]-=G,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Z=0;Z<this.length&&this.words[Z]<0;Z++)this.words[Z]+=67108864,this.words[Z+1]-=1;return this.strip()},f.prototype.addn=function(G){return this.clone().iaddn(G)},f.prototype.subn=function(G){return this.clone().isubn(G)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(G,Z,z){var k,R,N=G.length+z;this._expand(N);var U=0;for(k=0;k<G.length;k++){R=(0|this.words[k+z])+U;var Y=(0|G.words[k])*Z;U=((R-=67108863&Y)>>26)-(Y/67108864|0),this.words[k+z]=67108863&R}for(;k<this.length-z;k++)U=(R=(0|this.words[k+z])+U)>>26,this.words[k+z]=67108863&R;if(U===0)return this.strip();for(t(U===-1),U=0,k=0;k<this.length;k++)U=(R=-(0|this.words[k])+U)>>26,this.words[k]=67108863&R;return this.negative=1,this.strip()},f.prototype._wordDiv=function(G,Z){var z=(this.length,G.length),k=this.clone(),R=G,N=0|R.words[R.length-1];(z=26-this._countBits(N))!==0&&(R=R.ushln(z),k.iushln(z),N=0|R.words[R.length-1]);var U,Y=k.length-R.length;if(Z!=="mod"){(U=new f(null)).length=Y+1,U.words=new Array(U.length);for(var de=0;de<U.length;de++)U.words[de]=0}var J=k.clone()._ishlnsubmul(R,1,Y);J.negative===0&&(k=J,U&&(U.words[Y]=1));for(var xe=Y-1;xe>=0;xe--){var Te=67108864*(0|k.words[R.length+xe])+(0|k.words[R.length+xe-1]);for(Te=Math.min(Te/N|0,67108863),k._ishlnsubmul(R,Te,xe);k.negative!==0;)Te--,k.negative=0,k._ishlnsubmul(R,1,xe),k.isZero()||(k.negative^=1);U&&(U.words[xe]=Te)}return U&&U.strip(),k.strip(),Z!=="div"&&z!==0&&k.iushrn(z),{div:U||null,mod:k}},f.prototype.divmod=function(G,Z,z){return t(!G.isZero()),this.isZero()?{div:new f(0),mod:new f(0)}:this.negative!==0&&G.negative===0?(N=this.neg().divmod(G,Z),Z!=="mod"&&(k=N.div.neg()),Z!=="div"&&(R=N.mod.neg(),z&&R.negative!==0&&R.iadd(G)),{div:k,mod:R}):this.negative===0&&G.negative!==0?(N=this.divmod(G.neg(),Z),Z!=="mod"&&(k=N.div.neg()),{div:k,mod:N.mod}):(this.negative&G.negative)!=0?(N=this.neg().divmod(G.neg(),Z),Z!=="div"&&(R=N.mod.neg(),z&&R.negative!==0&&R.isub(G)),{div:N.div,mod:R}):G.length>this.length||this.cmp(G)<0?{div:new f(0),mod:this}:G.length===1?Z==="div"?{div:this.divn(G.words[0]),mod:null}:Z==="mod"?{div:null,mod:new f(this.modn(G.words[0]))}:{div:this.divn(G.words[0]),mod:new f(this.modn(G.words[0]))}:this._wordDiv(G,Z);var k,R,N},f.prototype.div=function(G){return this.divmod(G,"div",!1).div},f.prototype.mod=function(G){return this.divmod(G,"mod",!1).mod},f.prototype.umod=function(G){return this.divmod(G,"mod",!0).mod},f.prototype.divRound=function(G){var Z=this.divmod(G);if(Z.mod.isZero())return Z.div;var z=Z.div.negative!==0?Z.mod.isub(G):Z.mod,k=G.ushrn(1),R=G.andln(1),N=z.cmp(k);return N<0||R===1&&N===0?Z.div:Z.div.negative!==0?Z.div.isubn(1):Z.div.iaddn(1)},f.prototype.modn=function(G){t(G<=67108863);for(var Z=(1<<26)%G,z=0,k=this.length-1;k>=0;k--)z=(Z*z+(0|this.words[k]))%G;return z},f.prototype.idivn=function(G){t(G<=67108863);for(var Z=0,z=this.length-1;z>=0;z--){var k=(0|this.words[z])+67108864*Z;this.words[z]=k/G|0,Z=k%G}return this.strip()},f.prototype.divn=function(G){return this.clone().idivn(G)},f.prototype.egcd=function(G){t(G.negative===0),t(!G.isZero());var Z=this,z=G.clone();Z=Z.negative!==0?Z.umod(G):Z.clone();for(var k=new f(1),R=new f(0),N=new f(0),U=new f(1),Y=0;Z.isEven()&&z.isEven();)Z.iushrn(1),z.iushrn(1),++Y;for(var de=z.clone(),J=Z.clone();!Z.isZero();){for(var xe=0,Te=1;(Z.words[0]&Te)==0&&xe<26;++xe,Te<<=1);if(xe>0)for(Z.iushrn(xe);xe-- >0;)(k.isOdd()||R.isOdd())&&(k.iadd(de),R.isub(J)),k.iushrn(1),R.iushrn(1);for(var Ue=0,pe=1;(z.words[0]&pe)==0&&Ue<26;++Ue,pe<<=1);if(Ue>0)for(z.iushrn(Ue);Ue-- >0;)(N.isOdd()||U.isOdd())&&(N.iadd(de),U.isub(J)),N.iushrn(1),U.iushrn(1);Z.cmp(z)>=0?(Z.isub(z),k.isub(N),R.isub(U)):(z.isub(Z),N.isub(k),U.isub(R))}return{a:N,b:U,gcd:z.iushln(Y)}},f.prototype._invmp=function(G){t(G.negative===0),t(!G.isZero());var Z=this,z=G.clone();Z=Z.negative!==0?Z.umod(G):Z.clone();for(var k,R=new f(1),N=new f(0),U=z.clone();Z.cmpn(1)>0&&z.cmpn(1)>0;){for(var Y=0,de=1;(Z.words[0]&de)==0&&Y<26;++Y,de<<=1);if(Y>0)for(Z.iushrn(Y);Y-- >0;)R.isOdd()&&R.iadd(U),R.iushrn(1);for(var J=0,xe=1;(z.words[0]&xe)==0&&J<26;++J,xe<<=1);if(J>0)for(z.iushrn(J);J-- >0;)N.isOdd()&&N.iadd(U),N.iushrn(1);Z.cmp(z)>=0?(Z.isub(z),R.isub(N)):(z.isub(Z),N.isub(R))}return(k=Z.cmpn(1)===0?R:N).cmpn(0)<0&&k.iadd(G),k},f.prototype.gcd=function(G){if(this.isZero())return G.abs();if(G.isZero())return this.abs();var Z=this.clone(),z=G.clone();Z.negative=0,z.negative=0;for(var k=0;Z.isEven()&&z.isEven();k++)Z.iushrn(1),z.iushrn(1);for(;;){for(;Z.isEven();)Z.iushrn(1);for(;z.isEven();)z.iushrn(1);var R=Z.cmp(z);if(R<0){var N=Z;Z=z,z=N}else if(R===0||z.cmpn(1)===0)break;Z.isub(z)}return z.iushln(k)},f.prototype.invm=function(G){return this.egcd(G).a.umod(G)},f.prototype.isEven=function(){return(1&this.words[0])==0},f.prototype.isOdd=function(){return(1&this.words[0])==1},f.prototype.andln=function(G){return this.words[0]&G},f.prototype.bincn=function(G){t(typeof G=="number");var Z=G%26,z=(G-Z)/26,k=1<<Z;if(this.length<=z)return this._expand(z+1),this.words[z]|=k,this;for(var R=k,N=z;R!==0&&N<this.length;N++){var U=0|this.words[N];R=(U+=R)>>>26,U&=67108863,this.words[N]=U}return R!==0&&(this.words[N]=R,this.length++),this},f.prototype.isZero=function(){return this.length===1&&this.words[0]===0},f.prototype.cmpn=function(G){var Z,z=G<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;if(this.strip(),this.length>1)Z=1;else{z&&(G=-G),t(G<=67108863,"Number is too big");var k=0|this.words[0];Z=k===G?0:k<G?-1:1}return this.negative!==0?0|-Z:Z},f.prototype.cmp=function(G){if(this.negative!==0&&G.negative===0)return-1;if(this.negative===0&&G.negative!==0)return 1;var Z=this.ucmp(G);return this.negative!==0?0|-Z:Z},f.prototype.ucmp=function(G){if(this.length>G.length)return 1;if(this.length<G.length)return-1;for(var Z=0,z=this.length-1;z>=0;z--){var k=0|this.words[z],R=0|G.words[z];if(k!==R){k<R?Z=-1:k>R&&(Z=1);break}}return Z},f.prototype.gtn=function(G){return this.cmpn(G)===1},f.prototype.gt=function(G){return this.cmp(G)===1},f.prototype.gten=function(G){return this.cmpn(G)>=0},f.prototype.gte=function(G){return this.cmp(G)>=0},f.prototype.ltn=function(G){return this.cmpn(G)===-1},f.prototype.lt=function(G){return this.cmp(G)===-1},f.prototype.lten=function(G){return this.cmpn(G)<=0},f.prototype.lte=function(G){return this.cmp(G)<=0},f.prototype.eqn=function(G){return this.cmpn(G)===0},f.prototype.eq=function(G){return this.cmp(G)===0},f.red=function(G){return new fe(G)},f.prototype.toRed=function(G){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),G.convertTo(this)._forceRed(G)},f.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(G){return this.red=G,this},f.prototype.forceRed=function(G){return t(!this.red,"Already a number in reduction context"),this._forceRed(G)},f.prototype.redAdd=function(G){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,G)},f.prototype.redIAdd=function(G){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,G)},f.prototype.redSub=function(G){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,G)},f.prototype.redISub=function(G){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,G)},f.prototype.redShl=function(G){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,G)},f.prototype.redMul=function(G){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.mul(this,G)},f.prototype.redIMul=function(G){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.imul(this,G)},f.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(G){return t(this.red&&!G.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,G)};var V={k256:null,p224:null,p192:null,p25519:null};function X(G,Z){this.name=G,this.p=new f(Z,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Q(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ee(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Ae(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function fe(G){if(typeof G=="string"){var Z=f._prime(G);this.m=Z.p,this.prime=Z}else t(G.gtn(1),"modulus must be greater than 1"),this.m=G,this.prime=null}function ce(G){fe.call(this,G),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var G=new f(null);return G.words=new Array(Math.ceil(this.n/13)),G},X.prototype.ireduce=function(G){var Z,z=G;do this.split(z,this.tmp),Z=(z=(z=this.imulK(z)).iadd(this.tmp)).bitLength();while(Z>this.n);var k=Z<this.n?-1:z.ucmp(this.p);return k===0?(z.words[0]=0,z.length=1):k>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},X.prototype.split=function(G,Z){G.iushrn(this.n,0,Z)},X.prototype.imulK=function(G){return G.imul(this.k)},h(Q,X),Q.prototype.split=function(G,Z){for(var z=Math.min(G.length,9),k=0;k<z;k++)Z.words[k]=G.words[k];if(Z.length=z,G.length<=9)return G.words[0]=0,void(G.length=1);var R=G.words[9];for(Z.words[Z.length++]=4194303&R,k=10;k<G.length;k++){var N=0|G.words[k];G.words[k-10]=(4194303&N)<<4|R>>>22,R=N}R>>>=22,G.words[k-10]=R,R===0&&G.length>10?G.length-=10:G.length-=9},Q.prototype.imulK=function(G){G.words[G.length]=0,G.words[G.length+1]=0,G.length+=2;for(var Z=0,z=0;z<G.length;z++){var k=0|G.words[z];Z+=977*k,G.words[z]=67108863&Z,Z=64*k+(Z/67108864|0)}return G.words[G.length-1]===0&&(G.length--,G.words[G.length-1]===0&&G.length--),G},h(ee,X),h(ne,X),h(Ae,X),Ae.prototype.imulK=function(G){for(var Z=0,z=0;z<G.length;z++){var k=19*(0|G.words[z])+Z,R=67108863&k;k>>>=26,G.words[z]=R,Z=k}return Z!==0&&(G.words[G.length++]=Z),G},f._prime=function(G){if(V[G])return V[G];var Z;if(G==="k256")Z=new Q;else if(G==="p224")Z=new ee;else if(G==="p192")Z=new ne;else{if(G!=="p25519")throw new Error("Unknown prime "+G);Z=new Ae}return V[G]=Z,Z},fe.prototype._verify1=function(G){t(G.negative===0,"red works only with positives"),t(G.red,"red works only with red numbers")},fe.prototype._verify2=function(G,Z){t((G.negative|Z.negative)==0,"red works only with positives"),t(G.red&&G.red===Z.red,"red works only with red numbers")},fe.prototype.imod=function(G){return this.prime?this.prime.ireduce(G)._forceRed(this):G.umod(this.m)._forceRed(this)},fe.prototype.neg=function(G){return G.isZero()?G.clone():this.m.sub(G)._forceRed(this)},fe.prototype.add=function(G,Z){this._verify2(G,Z);var z=G.add(Z);return z.cmp(this.m)>=0&&z.isub(this.m),z._forceRed(this)},fe.prototype.iadd=function(G,Z){this._verify2(G,Z);var z=G.iadd(Z);return z.cmp(this.m)>=0&&z.isub(this.m),z},fe.prototype.sub=function(G,Z){this._verify2(G,Z);var z=G.sub(Z);return z.cmpn(0)<0&&z.iadd(this.m),z._forceRed(this)},fe.prototype.isub=function(G,Z){this._verify2(G,Z);var z=G.isub(Z);return z.cmpn(0)<0&&z.iadd(this.m),z},fe.prototype.shl=function(G,Z){return this._verify1(G),this.imod(G.ushln(Z))},fe.prototype.imul=function(G,Z){return this._verify2(G,Z),this.imod(G.imul(Z))},fe.prototype.mul=function(G,Z){return this._verify2(G,Z),this.imod(G.mul(Z))},fe.prototype.isqr=function(G){return this.imul(G,G.clone())},fe.prototype.sqr=function(G){return this.mul(G,G)},fe.prototype.sqrt=function(G){if(G.isZero())return G.clone();var Z=this.m.andln(3);if(t(Z%2==1),Z===3){var z=this.m.add(new f(1)).iushrn(2);return this.pow(G,z)}for(var k=this.m.subn(1),R=0;!k.isZero()&&k.andln(1)===0;)R++,k.iushrn(1);t(!k.isZero());var N=new f(1).toRed(this),U=N.redNeg(),Y=this.m.subn(1).iushrn(1),de=this.m.bitLength();for(de=new f(2*de*de).toRed(this);this.pow(de,Y).cmp(U)!==0;)de.redIAdd(U);for(var J=this.pow(de,k),xe=this.pow(G,k.addn(1).iushrn(1)),Te=this.pow(G,k),Ue=R;Te.cmp(N)!==0;){for(var pe=Te,Oe=0;pe.cmp(N)!==0;Oe++)pe=pe.redSqr();t(Oe<Ue);var re=this.pow(J,new f(1).iushln(Ue-Oe-1));xe=xe.redMul(re),J=re.redSqr(),Te=Te.redMul(J),Ue=Oe}return xe},fe.prototype.invm=function(G){var Z=G._invmp(this.m);return Z.negative!==0?(Z.negative=0,this.imod(Z).redNeg()):this.imod(Z)},fe.prototype.pow=function(G,Z){if(Z.isZero())return new f(1).toRed(this);if(Z.cmpn(1)===0)return G.clone();var z=new Array(16);z[0]=new f(1).toRed(this),z[1]=G;for(var k=2;k<z.length;k++)z[k]=this.mul(z[k-1],G);var R=z[0],N=0,U=0,Y=Z.bitLength()%26;for(Y===0&&(Y=26),k=Z.length-1;k>=0;k--){for(var de=Z.words[k],J=Y-1;J>=0;J--){var xe=de>>J&1;R!==z[0]&&(R=this.sqr(R)),xe!==0||N!==0?(N<<=1,N|=xe,(++U===4||k===0&&J===0)&&(R=this.mul(R,z[N]),U=0,N=0)):U=0}Y=26}return R},fe.prototype.convertTo=function(G){var Z=G.umod(this.m);return Z===G?Z.clone():Z},fe.prototype.convertFrom=function(G){var Z=G.clone();return Z.red=null,Z},f.mont=function(G){return new ce(G)},h(ce,fe),ce.prototype.convertTo=function(G){return this.imod(G.ushln(this.shift))},ce.prototype.convertFrom=function(G){var Z=this.imod(G.mul(this.rinv));return Z.red=null,Z},ce.prototype.imul=function(G,Z){if(G.isZero()||Z.isZero())return G.words[0]=0,G.length=1,G;var z=G.imul(Z),k=z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=z.isub(k).iushrn(this.shift),N=R;return R.cmp(this.m)>=0?N=R.isub(this.m):R.cmpn(0)<0&&(N=R.iadd(this.m)),N._forceRed(this)},ce.prototype.mul=function(G,Z){if(G.isZero()||Z.isZero())return new f(0)._forceRed(this);var z=G.mul(Z),k=z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=z.isub(k).iushrn(this.shift),N=R;return R.cmp(this.m)>=0?N=R.isub(this.m):R.cmpn(0)<0&&(N=R.iadd(this.m)),N._forceRed(this)},ce.prototype.invm=function(G){return this.imod(G._invmp(this.m).mul(this.r2))._forceRed(this)}})(i===void 0||i)},{buffer:188}],185:[function(e,i,o){o.byteLength=function(m){var b=_(m),x=b[0],v=b[1];return 3*(x+v)/4-v},o.toByteArray=function(m){var b,x,v=_(m),S=v[0],B=v[1],F=new t(function(X,Q,ee){return 3*(Q+ee)/4-ee}(0,S,B)),O=0,V=B>0?S-4:S;for(x=0;x<V;x+=4)b=l[m.charCodeAt(x)]<<18|l[m.charCodeAt(x+1)]<<12|l[m.charCodeAt(x+2)]<<6|l[m.charCodeAt(x+3)],F[O++]=b>>16&255,F[O++]=b>>8&255,F[O++]=255&b;return B===2&&(b=l[m.charCodeAt(x)]<<2|l[m.charCodeAt(x+1)]>>4,F[O++]=255&b),B===1&&(b=l[m.charCodeAt(x)]<<10|l[m.charCodeAt(x+1)]<<4|l[m.charCodeAt(x+2)]>>2,F[O++]=b>>8&255,F[O++]=255&b),F},o.fromByteArray=function(m){for(var b,x=m.length,v=x%3,S=[],B=0,F=x-v;B<F;B+=16383)S.push(g(m,B,B+16383>F?F:B+16383));return v===1?(b=m[x-1],S.push(a[b>>2]+a[b<<4&63]+"==")):v===2&&(b=(m[x-2]<<8)+m[x-1],S.push(a[b>>10]+a[b>>4&63]+a[b<<2&63]+"=")),S.join("")};for(var a=[],l=[],t=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)a[f]=h[f],l[h.charCodeAt(f)]=f;function _(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=m.indexOf("=");return x===-1&&(x=b),[x,x===b?0:4-x%4]}function g(m,b,x){for(var v,S,B=[],F=b;F<x;F+=3)v=(m[F]<<16&16711680)+(m[F+1]<<8&65280)+(255&m[F+2]),B.push(a[(S=v)>>18&63]+a[S>>12&63]+a[S>>6&63]+a[63&S]);return B.join("")}l[45]=62,l[95]=63},{}],186:[function(e,i,o){(function(a,l){function t(z,k){if(!z)throw new Error(k||"Assertion failed")}function h(z,k){z.super_=k;var R=function(){};R.prototype=k.prototype,z.prototype=new R,z.prototype.constructor=z}function f(z,k,R){if(f.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&(k!=="le"&&k!=="be"||(R=k,k=10),this._init(z||0,k||10,R||"be"))}var p;typeof a=="object"?a.exports=f:(void 0).BN=f,f.BN=f,f.wordSize=26;try{p=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e("buffer").Buffer}catch{}function _(z,k){var R=z.charCodeAt(k);return R>=48&&R<=57?R-48:R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:void t(!1,"Invalid character in "+z)}function g(z,k,R){var N=_(z,R);return R-1>=k&&(N|=_(z,R-1)<<4),N}function m(z,k,R,N){for(var U=0,Y=0,de=Math.min(z.length,R),J=k;J<de;J++){var xe=z.charCodeAt(J)-48;U*=N,Y=xe>=49?xe-49+10:xe>=17?xe-17+10:xe,t(xe>=0&&Y<N,"Invalid character"),U+=Y}return U}function b(z,k){z.words=k.words,z.length=k.length,z.negative=k.negative,z.red=k.red}if(f.isBN=function(z){return z instanceof f||z!==null&&typeof z=="object"&&z.constructor.wordSize===f.wordSize&&Array.isArray(z.words)},f.max=function(z,k){return z.cmp(k)>0?z:k},f.min=function(z,k){return z.cmp(k)<0?z:k},f.prototype._init=function(z,k,R){if(typeof z=="number")return this._initNumber(z,k,R);if(typeof z=="object")return this._initArray(z,k,R);k==="hex"&&(k=16),t(k===(0|k)&&k>=2&&k<=36);var N=0;(z=z.toString().replace(/\s+/g,""))[0]==="-"&&(N++,this.negative=1),N<z.length&&(k===16?this._parseHex(z,N,R):(this._parseBase(z,k,N),R==="le"&&this._initArray(this.toArray(),k,R)))},f.prototype._initNumber=function(z,k,R){z<0&&(this.negative=1,z=-z),z<67108864?(this.words=[67108863&z],this.length=1):z<4503599627370496?(this.words=[67108863&z,z/67108864&67108863],this.length=2):(t(z<9007199254740992),this.words=[67108863&z,z/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),k,R)},f.prototype._initArray=function(z,k,R){if(t(typeof z.length=="number"),z.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(z.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var U,Y,de=0;if(R==="be")for(N=z.length-1,U=0;N>=0;N-=3)Y=z[N]|z[N-1]<<8|z[N-2]<<16,this.words[U]|=Y<<de&67108863,this.words[U+1]=Y>>>26-de&67108863,(de+=24)>=26&&(de-=26,U++);else if(R==="le")for(N=0,U=0;N<z.length;N+=3)Y=z[N]|z[N+1]<<8|z[N+2]<<16,this.words[U]|=Y<<de&67108863,this.words[U+1]=Y>>>26-de&67108863,(de+=24)>=26&&(de-=26,U++);return this._strip()},f.prototype._parseHex=function(z,k,R){this.length=Math.ceil((z.length-k)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var U,Y=0,de=0;if(R==="be")for(N=z.length-1;N>=k;N-=2)U=g(z,k,N)<<Y,this.words[de]|=67108863&U,Y>=18?(Y-=18,de+=1,this.words[de]|=U>>>26):Y+=8;else for(N=(z.length-k)%2==0?k+1:k;N<z.length;N+=2)U=g(z,k,N)<<Y,this.words[de]|=67108863&U,Y>=18?(Y-=18,de+=1,this.words[de]|=U>>>26):Y+=8;this._strip()},f.prototype._parseBase=function(z,k,R){this.words=[0],this.length=1;for(var N=0,U=1;U<=67108863;U*=k)N++;N--,U=U/k|0;for(var Y=z.length-R,de=Y%N,J=Math.min(Y,Y-de)+R,xe=0,Te=R;Te<J;Te+=N)xe=m(z,Te,Te+N,k),this.imuln(U),this.words[0]+xe<67108864?this.words[0]+=xe:this._iaddn(xe);if(de!==0){var Ue=1;for(xe=m(z,Te,z.length,k),Te=0;Te<de;Te++)Ue*=k;this.imuln(Ue),this.words[0]+xe<67108864?this.words[0]+=xe:this._iaddn(xe)}this._strip()},f.prototype.copy=function(z){z.words=new Array(this.length);for(var k=0;k<this.length;k++)z.words[k]=this.words[k];z.length=this.length,z.negative=this.negative,z.red=this.red},f.prototype._move=function(z){b(z,this)},f.prototype.clone=function(){var z=new f(null);return this.copy(z),z},f.prototype._expand=function(z){for(;this.length<z;)this.words[this.length++]=0;return this},f.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},f.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{f.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{f.prototype.inspect=x}else f.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(z,k){var R;if(k=0|k||1,(z=z||10)===16||z==="hex"){R="";for(var N=0,U=0,Y=0;Y<this.length;Y++){var de=this.words[Y],J=(16777215&(de<<N|U)).toString(16);U=de>>>24-N&16777215,(N+=2)>=26&&(N-=26,Y--),R=U!==0||Y!==this.length-1?v[6-J.length]+J+R:J+R}for(U!==0&&(R=U.toString(16)+R);R.length%k!=0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(z===(0|z)&&z>=2&&z<=36){var xe=S[z],Te=B[z];R="";var Ue=this.clone();for(Ue.negative=0;!Ue.isZero();){var pe=Ue.modrn(Te).toString(z);R=(Ue=Ue.idivn(Te)).isZero()?pe+R:v[xe-pe.length]+pe+R}for(this.isZero()&&(R="0"+R);R.length%k!=0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}t(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var z=this.words[0];return this.length===2?z+=67108864*this.words[1]:this.length===3&&this.words[2]===1?z+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-z:z},f.prototype.toJSON=function(){return this.toString(16,2)},p&&(f.prototype.toBuffer=function(z,k){return this.toArrayLike(p,z,k)}),f.prototype.toArray=function(z,k){return this.toArrayLike(Array,z,k)};function F(z,k,R){R.negative=k.negative^z.negative;var N=z.length+k.length|0;R.length=N,N=N-1|0;var U=0|z.words[0],Y=0|k.words[0],de=U*Y,J=67108863&de,xe=de/67108864|0;R.words[0]=J;for(var Te=1;Te<N;Te++){for(var Ue=xe>>>26,pe=67108863&xe,Oe=Math.min(Te,k.length-1),re=Math.max(0,Te-z.length+1);re<=Oe;re++){var ie=Te-re|0;Ue+=(de=(U=0|z.words[ie])*(Y=0|k.words[re])+pe)/67108864|0,pe=67108863&de}R.words[Te]=0|pe,xe=0|Ue}return xe!==0?R.words[Te]=0|xe:R.length--,R._strip()}f.prototype.toArrayLike=function(z,k,R){this._strip();var N=this.byteLength(),U=R||Math.max(1,N);t(N<=U,"byte array longer than desired length"),t(U>0,"Requested array length <= 0");var Y=function(de,J){return de.allocUnsafe?de.allocUnsafe(J):new de(J)}(z,U);return this["_toArrayLike"+(k==="le"?"LE":"BE")](Y,N),Y},f.prototype._toArrayLikeLE=function(z,k){for(var R=0,N=0,U=0,Y=0;U<this.length;U++){var de=this.words[U]<<Y|N;z[R++]=255&de,R<z.length&&(z[R++]=de>>8&255),R<z.length&&(z[R++]=de>>16&255),Y===6?(R<z.length&&(z[R++]=de>>24&255),N=0,Y=0):(N=de>>>24,Y+=2)}if(R<z.length)for(z[R++]=N;R<z.length;)z[R++]=0},f.prototype._toArrayLikeBE=function(z,k){for(var R=z.length-1,N=0,U=0,Y=0;U<this.length;U++){var de=this.words[U]<<Y|N;z[R--]=255&de,R>=0&&(z[R--]=de>>8&255),R>=0&&(z[R--]=de>>16&255),Y===6?(R>=0&&(z[R--]=de>>24&255),N=0,Y=0):(N=de>>>24,Y+=2)}if(R>=0)for(z[R--]=N;R>=0;)z[R--]=0},Math.clz32?f.prototype._countBits=function(z){return 32-Math.clz32(z)}:f.prototype._countBits=function(z){var k=z,R=0;return k>=4096&&(R+=13,k>>>=13),k>=64&&(R+=7,k>>>=7),k>=8&&(R+=4,k>>>=4),k>=2&&(R+=2,k>>>=2),R+k},f.prototype._zeroBits=function(z){if(z===0)return 26;var k=z,R=0;return(8191&k)==0&&(R+=13,k>>>=13),(127&k)==0&&(R+=7,k>>>=7),(15&k)==0&&(R+=4,k>>>=4),(3&k)==0&&(R+=2,k>>>=2),(1&k)==0&&R++,R},f.prototype.bitLength=function(){var z=this.words[this.length-1],k=this._countBits(z);return 26*(this.length-1)+k},f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var z=0,k=0;k<this.length;k++){var R=this._zeroBits(this.words[k]);if(z+=R,R!==26)break}return z},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(z){return this.negative!==0?this.abs().inotn(z).iaddn(1):this.clone()},f.prototype.fromTwos=function(z){return this.testn(z-1)?this.notn(z).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return this.negative!==0},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(z){for(;this.length<z.length;)this.words[this.length++]=0;for(var k=0;k<z.length;k++)this.words[k]=this.words[k]|z.words[k];return this._strip()},f.prototype.ior=function(z){return t((this.negative|z.negative)==0),this.iuor(z)},f.prototype.or=function(z){return this.length>z.length?this.clone().ior(z):z.clone().ior(this)},f.prototype.uor=function(z){return this.length>z.length?this.clone().iuor(z):z.clone().iuor(this)},f.prototype.iuand=function(z){var k;k=this.length>z.length?z:this;for(var R=0;R<k.length;R++)this.words[R]=this.words[R]&z.words[R];return this.length=k.length,this._strip()},f.prototype.iand=function(z){return t((this.negative|z.negative)==0),this.iuand(z)},f.prototype.and=function(z){return this.length>z.length?this.clone().iand(z):z.clone().iand(this)},f.prototype.uand=function(z){return this.length>z.length?this.clone().iuand(z):z.clone().iuand(this)},f.prototype.iuxor=function(z){var k,R;this.length>z.length?(k=this,R=z):(k=z,R=this);for(var N=0;N<R.length;N++)this.words[N]=k.words[N]^R.words[N];if(this!==k)for(;N<k.length;N++)this.words[N]=k.words[N];return this.length=k.length,this._strip()},f.prototype.ixor=function(z){return t((this.negative|z.negative)==0),this.iuxor(z)},f.prototype.xor=function(z){return this.length>z.length?this.clone().ixor(z):z.clone().ixor(this)},f.prototype.uxor=function(z){return this.length>z.length?this.clone().iuxor(z):z.clone().iuxor(this)},f.prototype.inotn=function(z){t(typeof z=="number"&&z>=0);var k=0|Math.ceil(z/26),R=z%26;this._expand(k),R>0&&k--;for(var N=0;N<k;N++)this.words[N]=67108863&~this.words[N];return R>0&&(this.words[N]=~this.words[N]&67108863>>26-R),this._strip()},f.prototype.notn=function(z){return this.clone().inotn(z)},f.prototype.setn=function(z,k){t(typeof z=="number"&&z>=0);var R=z/26|0,N=z%26;return this._expand(R+1),this.words[R]=k?this.words[R]|1<<N:this.words[R]&~(1<<N),this._strip()},f.prototype.iadd=function(z){var k,R,N;if(this.negative!==0&&z.negative===0)return this.negative=0,k=this.isub(z),this.negative^=1,this._normSign();if(this.negative===0&&z.negative!==0)return z.negative=0,k=this.isub(z),z.negative=1,k._normSign();this.length>z.length?(R=this,N=z):(R=z,N=this);for(var U=0,Y=0;Y<N.length;Y++)k=(0|R.words[Y])+(0|N.words[Y])+U,this.words[Y]=67108863&k,U=k>>>26;for(;U!==0&&Y<R.length;Y++)k=(0|R.words[Y])+U,this.words[Y]=67108863&k,U=k>>>26;if(this.length=R.length,U!==0)this.words[this.length]=U,this.length++;else if(R!==this)for(;Y<R.length;Y++)this.words[Y]=R.words[Y];return this},f.prototype.add=function(z){var k;return z.negative!==0&&this.negative===0?(z.negative=0,k=this.sub(z),z.negative^=1,k):z.negative===0&&this.negative!==0?(this.negative=0,k=z.sub(this),this.negative=1,k):this.length>z.length?this.clone().iadd(z):z.clone().iadd(this)},f.prototype.isub=function(z){if(z.negative!==0){z.negative=0;var k=this.iadd(z);return z.negative=1,k._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(z),this.negative=1,this._normSign();var R,N,U=this.cmp(z);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(R=this,N=z):(R=z,N=this);for(var Y=0,de=0;de<N.length;de++)Y=(k=(0|R.words[de])-(0|N.words[de])+Y)>>26,this.words[de]=67108863&k;for(;Y!==0&&de<R.length;de++)Y=(k=(0|R.words[de])+Y)>>26,this.words[de]=67108863&k;if(Y===0&&de<R.length&&R!==this)for(;de<R.length;de++)this.words[de]=R.words[de];return this.length=Math.max(this.length,de),R!==this&&(this.negative=1),this._strip()},f.prototype.sub=function(z){return this.clone().isub(z)};var O=function(z,k,R){var N,U,Y,de=z.words,J=k.words,xe=R.words,Te=0,Ue=0|de[0],pe=8191&Ue,Oe=Ue>>>13,re=0|de[1],ie=8191&re,Be=re>>>13,He=0|de[2],Ge=8191&He,Ne=He>>>13,st=0|de[3],ot=8191&st,Je=st>>>13,Ze=0|de[4],bt=8191&Ze,yt=Ze>>>13,Nt=0|de[5],kt=8191&Nt,Gt=Nt>>>13,fr=0|de[6],Tr=8191&fr,yr=fr>>>13,Dr=0|de[7],jt=8191&Dr,Jt=Dr>>>13,pr=0|de[8],Ft=8191&pr,er=pr>>>13,ur=0|de[9],Yt=8191&ur,mr=ur>>>13,Mr=0|J[0],sn=8191&Mr,Un=Mr>>>13,wn=0|J[1],Zi=8191&wn,ai=wn>>>13,_i=0|J[2],Zn=8191&_i,Bn=_i>>>13,On=0|J[3],tr=8191&On,zn=On>>>13,Ki=0|J[4],Qs=8191&Ki,li=Ki>>>13,Qt=0|J[5],Ve=8191&Qt,et=Qt>>>13,We=0|J[6],tt=8191&We,nt=We>>>13,Ct=0|J[7],rr=8191&Ct,Et=Ct>>>13,nr=0|J[8],Fr=8191&nr,_r=nr>>>13,pn=0|J[9],Tn=8191&pn,Vn=pn>>>13;R.negative=z.negative^k.negative,R.length=19;var Bi=(Te+(N=Math.imul(pe,sn))|0)+((8191&(U=(U=Math.imul(pe,Un))+Math.imul(Oe,sn)|0))<<13)|0;Te=((Y=Math.imul(Oe,Un))+(U>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,N=Math.imul(ie,sn),U=(U=Math.imul(ie,Un))+Math.imul(Be,sn)|0,Y=Math.imul(Be,Un);var Si=(Te+(N=N+Math.imul(pe,Zi)|0)|0)+((8191&(U=(U=U+Math.imul(pe,ai)|0)+Math.imul(Oe,Zi)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,ai)|0)+(U>>>13)|0)+(Si>>>26)|0,Si&=67108863,N=Math.imul(Ge,sn),U=(U=Math.imul(Ge,Un))+Math.imul(Ne,sn)|0,Y=Math.imul(Ne,Un),N=N+Math.imul(ie,Zi)|0,U=(U=U+Math.imul(ie,ai)|0)+Math.imul(Be,Zi)|0,Y=Y+Math.imul(Be,ai)|0;var Di=(Te+(N=N+Math.imul(pe,Zn)|0)|0)+((8191&(U=(U=U+Math.imul(pe,Bn)|0)+Math.imul(Oe,Zn)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,Bn)|0)+(U>>>13)|0)+(Di>>>26)|0,Di&=67108863,N=Math.imul(ot,sn),U=(U=Math.imul(ot,Un))+Math.imul(Je,sn)|0,Y=Math.imul(Je,Un),N=N+Math.imul(Ge,Zi)|0,U=(U=U+Math.imul(Ge,ai)|0)+Math.imul(Ne,Zi)|0,Y=Y+Math.imul(Ne,ai)|0,N=N+Math.imul(ie,Zn)|0,U=(U=U+Math.imul(ie,Bn)|0)+Math.imul(Be,Zn)|0,Y=Y+Math.imul(Be,Bn)|0;var ds=(Te+(N=N+Math.imul(pe,tr)|0)|0)+((8191&(U=(U=U+Math.imul(pe,zn)|0)+Math.imul(Oe,tr)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,zn)|0)+(U>>>13)|0)+(ds>>>26)|0,ds&=67108863,N=Math.imul(bt,sn),U=(U=Math.imul(bt,Un))+Math.imul(yt,sn)|0,Y=Math.imul(yt,Un),N=N+Math.imul(ot,Zi)|0,U=(U=U+Math.imul(ot,ai)|0)+Math.imul(Je,Zi)|0,Y=Y+Math.imul(Je,ai)|0,N=N+Math.imul(Ge,Zn)|0,U=(U=U+Math.imul(Ge,Bn)|0)+Math.imul(Ne,Zn)|0,Y=Y+Math.imul(Ne,Bn)|0,N=N+Math.imul(ie,tr)|0,U=(U=U+Math.imul(ie,zn)|0)+Math.imul(Be,tr)|0,Y=Y+Math.imul(Be,zn)|0;var Qi=(Te+(N=N+Math.imul(pe,Qs)|0)|0)+((8191&(U=(U=U+Math.imul(pe,li)|0)+Math.imul(Oe,Qs)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,li)|0)+(U>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,N=Math.imul(kt,sn),U=(U=Math.imul(kt,Un))+Math.imul(Gt,sn)|0,Y=Math.imul(Gt,Un),N=N+Math.imul(bt,Zi)|0,U=(U=U+Math.imul(bt,ai)|0)+Math.imul(yt,Zi)|0,Y=Y+Math.imul(yt,ai)|0,N=N+Math.imul(ot,Zn)|0,U=(U=U+Math.imul(ot,Bn)|0)+Math.imul(Je,Zn)|0,Y=Y+Math.imul(Je,Bn)|0,N=N+Math.imul(Ge,tr)|0,U=(U=U+Math.imul(Ge,zn)|0)+Math.imul(Ne,tr)|0,Y=Y+Math.imul(Ne,zn)|0,N=N+Math.imul(ie,Qs)|0,U=(U=U+Math.imul(ie,li)|0)+Math.imul(Be,Qs)|0,Y=Y+Math.imul(Be,li)|0;var Zt=(Te+(N=N+Math.imul(pe,Ve)|0)|0)+((8191&(U=(U=U+Math.imul(pe,et)|0)+Math.imul(Oe,Ve)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,et)|0)+(U>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,N=Math.imul(Tr,sn),U=(U=Math.imul(Tr,Un))+Math.imul(yr,sn)|0,Y=Math.imul(yr,Un),N=N+Math.imul(kt,Zi)|0,U=(U=U+Math.imul(kt,ai)|0)+Math.imul(Gt,Zi)|0,Y=Y+Math.imul(Gt,ai)|0,N=N+Math.imul(bt,Zn)|0,U=(U=U+Math.imul(bt,Bn)|0)+Math.imul(yt,Zn)|0,Y=Y+Math.imul(yt,Bn)|0,N=N+Math.imul(ot,tr)|0,U=(U=U+Math.imul(ot,zn)|0)+Math.imul(Je,tr)|0,Y=Y+Math.imul(Je,zn)|0,N=N+Math.imul(Ge,Qs)|0,U=(U=U+Math.imul(Ge,li)|0)+Math.imul(Ne,Qs)|0,Y=Y+Math.imul(Ne,li)|0,N=N+Math.imul(ie,Ve)|0,U=(U=U+Math.imul(ie,et)|0)+Math.imul(Be,Ve)|0,Y=Y+Math.imul(Be,et)|0;var $r=(Te+(N=N+Math.imul(pe,tt)|0)|0)+((8191&(U=(U=U+Math.imul(pe,nt)|0)+Math.imul(Oe,tt)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,nt)|0)+(U>>>13)|0)+($r>>>26)|0,$r&=67108863,N=Math.imul(jt,sn),U=(U=Math.imul(jt,Un))+Math.imul(Jt,sn)|0,Y=Math.imul(Jt,Un),N=N+Math.imul(Tr,Zi)|0,U=(U=U+Math.imul(Tr,ai)|0)+Math.imul(yr,Zi)|0,Y=Y+Math.imul(yr,ai)|0,N=N+Math.imul(kt,Zn)|0,U=(U=U+Math.imul(kt,Bn)|0)+Math.imul(Gt,Zn)|0,Y=Y+Math.imul(Gt,Bn)|0,N=N+Math.imul(bt,tr)|0,U=(U=U+Math.imul(bt,zn)|0)+Math.imul(yt,tr)|0,Y=Y+Math.imul(yt,zn)|0,N=N+Math.imul(ot,Qs)|0,U=(U=U+Math.imul(ot,li)|0)+Math.imul(Je,Qs)|0,Y=Y+Math.imul(Je,li)|0,N=N+Math.imul(Ge,Ve)|0,U=(U=U+Math.imul(Ge,et)|0)+Math.imul(Ne,Ve)|0,Y=Y+Math.imul(Ne,et)|0,N=N+Math.imul(ie,tt)|0,U=(U=U+Math.imul(ie,nt)|0)+Math.imul(Be,tt)|0,Y=Y+Math.imul(Be,nt)|0;var kn=(Te+(N=N+Math.imul(pe,rr)|0)|0)+((8191&(U=(U=U+Math.imul(pe,Et)|0)+Math.imul(Oe,rr)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,Et)|0)+(U>>>13)|0)+(kn>>>26)|0,kn&=67108863,N=Math.imul(Ft,sn),U=(U=Math.imul(Ft,Un))+Math.imul(er,sn)|0,Y=Math.imul(er,Un),N=N+Math.imul(jt,Zi)|0,U=(U=U+Math.imul(jt,ai)|0)+Math.imul(Jt,Zi)|0,Y=Y+Math.imul(Jt,ai)|0,N=N+Math.imul(Tr,Zn)|0,U=(U=U+Math.imul(Tr,Bn)|0)+Math.imul(yr,Zn)|0,Y=Y+Math.imul(yr,Bn)|0,N=N+Math.imul(kt,tr)|0,U=(U=U+Math.imul(kt,zn)|0)+Math.imul(Gt,tr)|0,Y=Y+Math.imul(Gt,zn)|0,N=N+Math.imul(bt,Qs)|0,U=(U=U+Math.imul(bt,li)|0)+Math.imul(yt,Qs)|0,Y=Y+Math.imul(yt,li)|0,N=N+Math.imul(ot,Ve)|0,U=(U=U+Math.imul(ot,et)|0)+Math.imul(Je,Ve)|0,Y=Y+Math.imul(Je,et)|0,N=N+Math.imul(Ge,tt)|0,U=(U=U+Math.imul(Ge,nt)|0)+Math.imul(Ne,tt)|0,Y=Y+Math.imul(Ne,nt)|0,N=N+Math.imul(ie,rr)|0,U=(U=U+Math.imul(ie,Et)|0)+Math.imul(Be,rr)|0,Y=Y+Math.imul(Be,Et)|0;var vn=(Te+(N=N+Math.imul(pe,Fr)|0)|0)+((8191&(U=(U=U+Math.imul(pe,_r)|0)+Math.imul(Oe,Fr)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,_r)|0)+(U>>>13)|0)+(vn>>>26)|0,vn&=67108863,N=Math.imul(Yt,sn),U=(U=Math.imul(Yt,Un))+Math.imul(mr,sn)|0,Y=Math.imul(mr,Un),N=N+Math.imul(Ft,Zi)|0,U=(U=U+Math.imul(Ft,ai)|0)+Math.imul(er,Zi)|0,Y=Y+Math.imul(er,ai)|0,N=N+Math.imul(jt,Zn)|0,U=(U=U+Math.imul(jt,Bn)|0)+Math.imul(Jt,Zn)|0,Y=Y+Math.imul(Jt,Bn)|0,N=N+Math.imul(Tr,tr)|0,U=(U=U+Math.imul(Tr,zn)|0)+Math.imul(yr,tr)|0,Y=Y+Math.imul(yr,zn)|0,N=N+Math.imul(kt,Qs)|0,U=(U=U+Math.imul(kt,li)|0)+Math.imul(Gt,Qs)|0,Y=Y+Math.imul(Gt,li)|0,N=N+Math.imul(bt,Ve)|0,U=(U=U+Math.imul(bt,et)|0)+Math.imul(yt,Ve)|0,Y=Y+Math.imul(yt,et)|0,N=N+Math.imul(ot,tt)|0,U=(U=U+Math.imul(ot,nt)|0)+Math.imul(Je,tt)|0,Y=Y+Math.imul(Je,nt)|0,N=N+Math.imul(Ge,rr)|0,U=(U=U+Math.imul(Ge,Et)|0)+Math.imul(Ne,rr)|0,Y=Y+Math.imul(Ne,Et)|0,N=N+Math.imul(ie,Fr)|0,U=(U=U+Math.imul(ie,_r)|0)+Math.imul(Be,Fr)|0,Y=Y+Math.imul(Be,_r)|0;var si=(Te+(N=N+Math.imul(pe,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(pe,Vn)|0)+Math.imul(Oe,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(Oe,Vn)|0)+(U>>>13)|0)+(si>>>26)|0,si&=67108863,N=Math.imul(Yt,Zi),U=(U=Math.imul(Yt,ai))+Math.imul(mr,Zi)|0,Y=Math.imul(mr,ai),N=N+Math.imul(Ft,Zn)|0,U=(U=U+Math.imul(Ft,Bn)|0)+Math.imul(er,Zn)|0,Y=Y+Math.imul(er,Bn)|0,N=N+Math.imul(jt,tr)|0,U=(U=U+Math.imul(jt,zn)|0)+Math.imul(Jt,tr)|0,Y=Y+Math.imul(Jt,zn)|0,N=N+Math.imul(Tr,Qs)|0,U=(U=U+Math.imul(Tr,li)|0)+Math.imul(yr,Qs)|0,Y=Y+Math.imul(yr,li)|0,N=N+Math.imul(kt,Ve)|0,U=(U=U+Math.imul(kt,et)|0)+Math.imul(Gt,Ve)|0,Y=Y+Math.imul(Gt,et)|0,N=N+Math.imul(bt,tt)|0,U=(U=U+Math.imul(bt,nt)|0)+Math.imul(yt,tt)|0,Y=Y+Math.imul(yt,nt)|0,N=N+Math.imul(ot,rr)|0,U=(U=U+Math.imul(ot,Et)|0)+Math.imul(Je,rr)|0,Y=Y+Math.imul(Je,Et)|0,N=N+Math.imul(Ge,Fr)|0,U=(U=U+Math.imul(Ge,_r)|0)+Math.imul(Ne,Fr)|0,Y=Y+Math.imul(Ne,_r)|0;var qn=(Te+(N=N+Math.imul(ie,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(ie,Vn)|0)+Math.imul(Be,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(Be,Vn)|0)+(U>>>13)|0)+(qn>>>26)|0,qn&=67108863,N=Math.imul(Yt,Zn),U=(U=Math.imul(Yt,Bn))+Math.imul(mr,Zn)|0,Y=Math.imul(mr,Bn),N=N+Math.imul(Ft,tr)|0,U=(U=U+Math.imul(Ft,zn)|0)+Math.imul(er,tr)|0,Y=Y+Math.imul(er,zn)|0,N=N+Math.imul(jt,Qs)|0,U=(U=U+Math.imul(jt,li)|0)+Math.imul(Jt,Qs)|0,Y=Y+Math.imul(Jt,li)|0,N=N+Math.imul(Tr,Ve)|0,U=(U=U+Math.imul(Tr,et)|0)+Math.imul(yr,Ve)|0,Y=Y+Math.imul(yr,et)|0,N=N+Math.imul(kt,tt)|0,U=(U=U+Math.imul(kt,nt)|0)+Math.imul(Gt,tt)|0,Y=Y+Math.imul(Gt,nt)|0,N=N+Math.imul(bt,rr)|0,U=(U=U+Math.imul(bt,Et)|0)+Math.imul(yt,rr)|0,Y=Y+Math.imul(yt,Et)|0,N=N+Math.imul(ot,Fr)|0,U=(U=U+Math.imul(ot,_r)|0)+Math.imul(Je,Fr)|0,Y=Y+Math.imul(Je,_r)|0;var Yn=(Te+(N=N+Math.imul(Ge,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(Ge,Vn)|0)+Math.imul(Ne,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(Ne,Vn)|0)+(U>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,N=Math.imul(Yt,tr),U=(U=Math.imul(Yt,zn))+Math.imul(mr,tr)|0,Y=Math.imul(mr,zn),N=N+Math.imul(Ft,Qs)|0,U=(U=U+Math.imul(Ft,li)|0)+Math.imul(er,Qs)|0,Y=Y+Math.imul(er,li)|0,N=N+Math.imul(jt,Ve)|0,U=(U=U+Math.imul(jt,et)|0)+Math.imul(Jt,Ve)|0,Y=Y+Math.imul(Jt,et)|0,N=N+Math.imul(Tr,tt)|0,U=(U=U+Math.imul(Tr,nt)|0)+Math.imul(yr,tt)|0,Y=Y+Math.imul(yr,nt)|0,N=N+Math.imul(kt,rr)|0,U=(U=U+Math.imul(kt,Et)|0)+Math.imul(Gt,rr)|0,Y=Y+Math.imul(Gt,Et)|0,N=N+Math.imul(bt,Fr)|0,U=(U=U+Math.imul(bt,_r)|0)+Math.imul(yt,Fr)|0,Y=Y+Math.imul(yt,_r)|0;var Wi=(Te+(N=N+Math.imul(ot,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(ot,Vn)|0)+Math.imul(Je,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(Je,Vn)|0)+(U>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,N=Math.imul(Yt,Qs),U=(U=Math.imul(Yt,li))+Math.imul(mr,Qs)|0,Y=Math.imul(mr,li),N=N+Math.imul(Ft,Ve)|0,U=(U=U+Math.imul(Ft,et)|0)+Math.imul(er,Ve)|0,Y=Y+Math.imul(er,et)|0,N=N+Math.imul(jt,tt)|0,U=(U=U+Math.imul(jt,nt)|0)+Math.imul(Jt,tt)|0,Y=Y+Math.imul(Jt,nt)|0,N=N+Math.imul(Tr,rr)|0,U=(U=U+Math.imul(Tr,Et)|0)+Math.imul(yr,rr)|0,Y=Y+Math.imul(yr,Et)|0,N=N+Math.imul(kt,Fr)|0,U=(U=U+Math.imul(kt,_r)|0)+Math.imul(Gt,Fr)|0,Y=Y+Math.imul(Gt,_r)|0;var us=(Te+(N=N+Math.imul(bt,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(bt,Vn)|0)+Math.imul(yt,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(yt,Vn)|0)+(U>>>13)|0)+(us>>>26)|0,us&=67108863,N=Math.imul(Yt,Ve),U=(U=Math.imul(Yt,et))+Math.imul(mr,Ve)|0,Y=Math.imul(mr,et),N=N+Math.imul(Ft,tt)|0,U=(U=U+Math.imul(Ft,nt)|0)+Math.imul(er,tt)|0,Y=Y+Math.imul(er,nt)|0,N=N+Math.imul(jt,rr)|0,U=(U=U+Math.imul(jt,Et)|0)+Math.imul(Jt,rr)|0,Y=Y+Math.imul(Jt,Et)|0,N=N+Math.imul(Tr,Fr)|0,U=(U=U+Math.imul(Tr,_r)|0)+Math.imul(yr,Fr)|0,Y=Y+Math.imul(yr,_r)|0;var xs=(Te+(N=N+Math.imul(kt,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(kt,Vn)|0)+Math.imul(Gt,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(Gt,Vn)|0)+(U>>>13)|0)+(xs>>>26)|0,xs&=67108863,N=Math.imul(Yt,tt),U=(U=Math.imul(Yt,nt))+Math.imul(mr,tt)|0,Y=Math.imul(mr,nt),N=N+Math.imul(Ft,rr)|0,U=(U=U+Math.imul(Ft,Et)|0)+Math.imul(er,rr)|0,Y=Y+Math.imul(er,Et)|0,N=N+Math.imul(jt,Fr)|0,U=(U=U+Math.imul(jt,_r)|0)+Math.imul(Jt,Fr)|0,Y=Y+Math.imul(Jt,_r)|0;var zi=(Te+(N=N+Math.imul(Tr,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(Tr,Vn)|0)+Math.imul(yr,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(yr,Vn)|0)+(U>>>13)|0)+(zi>>>26)|0,zi&=67108863,N=Math.imul(Yt,rr),U=(U=Math.imul(Yt,Et))+Math.imul(mr,rr)|0,Y=Math.imul(mr,Et),N=N+Math.imul(Ft,Fr)|0,U=(U=U+Math.imul(Ft,_r)|0)+Math.imul(er,Fr)|0,Y=Y+Math.imul(er,_r)|0;var uo=(Te+(N=N+Math.imul(jt,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(jt,Vn)|0)+Math.imul(Jt,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(Jt,Vn)|0)+(U>>>13)|0)+(uo>>>26)|0,uo&=67108863,N=Math.imul(Yt,Fr),U=(U=Math.imul(Yt,_r))+Math.imul(mr,Fr)|0,Y=Math.imul(mr,_r);var Ji=(Te+(N=N+Math.imul(Ft,Tn)|0)|0)+((8191&(U=(U=U+Math.imul(Ft,Vn)|0)+Math.imul(er,Tn)|0))<<13)|0;Te=((Y=Y+Math.imul(er,Vn)|0)+(U>>>13)|0)+(Ji>>>26)|0,Ji&=67108863;var ks=(Te+(N=Math.imul(Yt,Tn))|0)+((8191&(U=(U=Math.imul(Yt,Vn))+Math.imul(mr,Tn)|0))<<13)|0;return Te=((Y=Math.imul(mr,Vn))+(U>>>13)|0)+(ks>>>26)|0,ks&=67108863,xe[0]=Bi,xe[1]=Si,xe[2]=Di,xe[3]=ds,xe[4]=Qi,xe[5]=Zt,xe[6]=$r,xe[7]=kn,xe[8]=vn,xe[9]=si,xe[10]=qn,xe[11]=Yn,xe[12]=Wi,xe[13]=us,xe[14]=xs,xe[15]=zi,xe[16]=uo,xe[17]=Ji,xe[18]=ks,Te!==0&&(xe[19]=Te,R.length++),R};function V(z,k,R){R.negative=k.negative^z.negative,R.length=z.length+k.length;for(var N=0,U=0,Y=0;Y<R.length-1;Y++){var de=U;U=0;for(var J=67108863&N,xe=Math.min(Y,k.length-1),Te=Math.max(0,Y-z.length+1);Te<=xe;Te++){var Ue=Y-Te,pe=(0|z.words[Ue])*(0|k.words[Te]),Oe=67108863&pe;J=67108863&(Oe=Oe+J|0),U+=(de=(de=de+(pe/67108864|0)|0)+(Oe>>>26)|0)>>>26,de&=67108863}R.words[Y]=J,N=de,de=U}return N!==0?R.words[Y]=N:R.length--,R._strip()}function X(z,k,R){return V(z,k,R)}Math.imul||(O=F),f.prototype.mulTo=function(z,k){var R=this.length+z.length;return this.length===10&&z.length===10?O(this,z,k):R<63?F(this,z,k):R<1024?V(this,z,k):X(this,z,k)},f.prototype.mul=function(z){var k=new f(null);return k.words=new Array(this.length+z.length),this.mulTo(z,k)},f.prototype.mulf=function(z){var k=new f(null);return k.words=new Array(this.length+z.length),X(this,z,k)},f.prototype.imul=function(z){return this.clone().mulTo(z,this)},f.prototype.imuln=function(z){var k=z<0;k&&(z=-z),t(typeof z=="number"),t(z<67108864);for(var R=0,N=0;N<this.length;N++){var U=(0|this.words[N])*z,Y=(67108863&U)+(67108863&R);R>>=26,R+=U/67108864|0,R+=Y>>>26,this.words[N]=67108863&Y}return R!==0&&(this.words[N]=R,this.length++),k?this.ineg():this},f.prototype.muln=function(z){return this.clone().imuln(z)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(z){var k=function(Y){for(var de=new Array(Y.bitLength()),J=0;J<de.length;J++){var xe=J/26|0,Te=J%26;de[J]=Y.words[xe]>>>Te&1}return de}(z);if(k.length===0)return new f(1);for(var R=this,N=0;N<k.length&&k[N]===0;N++,R=R.sqr());if(++N<k.length)for(var U=R.sqr();N<k.length;N++,U=U.sqr())k[N]!==0&&(R=R.mul(U));return R},f.prototype.iushln=function(z){t(typeof z=="number"&&z>=0);var k,R=z%26,N=(z-R)/26,U=67108863>>>26-R<<26-R;if(R!==0){var Y=0;for(k=0;k<this.length;k++){var de=this.words[k]&U,J=(0|this.words[k])-de<<R;this.words[k]=J|Y,Y=de>>>26-R}Y&&(this.words[k]=Y,this.length++)}if(N!==0){for(k=this.length-1;k>=0;k--)this.words[k+N]=this.words[k];for(k=0;k<N;k++)this.words[k]=0;this.length+=N}return this._strip()},f.prototype.ishln=function(z){return t(this.negative===0),this.iushln(z)},f.prototype.iushrn=function(z,k,R){var N;t(typeof z=="number"&&z>=0),N=k?(k-k%26)/26:0;var U=z%26,Y=Math.min((z-U)/26,this.length),de=67108863^67108863>>>U<<U,J=R;if(N-=Y,N=Math.max(0,N),J){for(var xe=0;xe<Y;xe++)J.words[xe]=this.words[xe];J.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,xe=0;xe<this.length;xe++)this.words[xe]=this.words[xe+Y];else this.words[0]=0,this.length=1;var Te=0;for(xe=this.length-1;xe>=0&&(Te!==0||xe>=N);xe--){var Ue=0|this.words[xe];this.words[xe]=Te<<26-U|Ue>>>U,Te=Ue&de}return J&&Te!==0&&(J.words[J.length++]=Te),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},f.prototype.ishrn=function(z,k,R){return t(this.negative===0),this.iushrn(z,k,R)},f.prototype.shln=function(z){return this.clone().ishln(z)},f.prototype.ushln=function(z){return this.clone().iushln(z)},f.prototype.shrn=function(z){return this.clone().ishrn(z)},f.prototype.ushrn=function(z){return this.clone().iushrn(z)},f.prototype.testn=function(z){t(typeof z=="number"&&z>=0);var k=z%26,R=(z-k)/26,N=1<<k;return!(this.length<=R)&&!!(this.words[R]&N)},f.prototype.imaskn=function(z){t(typeof z=="number"&&z>=0);var k=z%26,R=(z-k)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(k!==0&&R++,this.length=Math.min(R,this.length),k!==0){var N=67108863^67108863>>>k<<k;this.words[this.length-1]&=N}return this._strip()},f.prototype.maskn=function(z){return this.clone().imaskn(z)},f.prototype.iaddn=function(z){return t(typeof z=="number"),t(z<67108864),z<0?this.isubn(-z):this.negative!==0?this.length===1&&(0|this.words[0])<=z?(this.words[0]=z-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(z),this.negative=1,this):this._iaddn(z)},f.prototype._iaddn=function(z){this.words[0]+=z;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},f.prototype.isubn=function(z){if(t(typeof z=="number"),t(z<67108864),z<0)return this.iaddn(-z);if(this.negative!==0)return this.negative=0,this.iaddn(z),this.negative=1,this;if(this.words[0]-=z,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this._strip()},f.prototype.addn=function(z){return this.clone().iaddn(z)},f.prototype.subn=function(z){return this.clone().isubn(z)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(z,k,R){var N,U,Y=z.length+R;this._expand(Y);var de=0;for(N=0;N<z.length;N++){U=(0|this.words[N+R])+de;var J=(0|z.words[N])*k;de=((U-=67108863&J)>>26)-(J/67108864|0),this.words[N+R]=67108863&U}for(;N<this.length-R;N++)de=(U=(0|this.words[N+R])+de)>>26,this.words[N+R]=67108863&U;if(de===0)return this._strip();for(t(de===-1),de=0,N=0;N<this.length;N++)de=(U=-(0|this.words[N])+de)>>26,this.words[N]=67108863&U;return this.negative=1,this._strip()},f.prototype._wordDiv=function(z,k){var R=(this.length,z.length),N=this.clone(),U=z,Y=0|U.words[U.length-1];(R=26-this._countBits(Y))!==0&&(U=U.ushln(R),N.iushln(R),Y=0|U.words[U.length-1]);var de,J=N.length-U.length;if(k!=="mod"){(de=new f(null)).length=J+1,de.words=new Array(de.length);for(var xe=0;xe<de.length;xe++)de.words[xe]=0}var Te=N.clone()._ishlnsubmul(U,1,J);Te.negative===0&&(N=Te,de&&(de.words[J]=1));for(var Ue=J-1;Ue>=0;Ue--){var pe=67108864*(0|N.words[U.length+Ue])+(0|N.words[U.length+Ue-1]);for(pe=Math.min(pe/Y|0,67108863),N._ishlnsubmul(U,pe,Ue);N.negative!==0;)pe--,N.negative=0,N._ishlnsubmul(U,1,Ue),N.isZero()||(N.negative^=1);de&&(de.words[Ue]=pe)}return de&&de._strip(),N._strip(),k!=="div"&&R!==0&&N.iushrn(R),{div:de||null,mod:N}},f.prototype.divmod=function(z,k,R){return t(!z.isZero()),this.isZero()?{div:new f(0),mod:new f(0)}:this.negative!==0&&z.negative===0?(Y=this.neg().divmod(z,k),k!=="mod"&&(N=Y.div.neg()),k!=="div"&&(U=Y.mod.neg(),R&&U.negative!==0&&U.iadd(z)),{div:N,mod:U}):this.negative===0&&z.negative!==0?(Y=this.divmod(z.neg(),k),k!=="mod"&&(N=Y.div.neg()),{div:N,mod:Y.mod}):(this.negative&z.negative)!=0?(Y=this.neg().divmod(z.neg(),k),k!=="div"&&(U=Y.mod.neg(),R&&U.negative!==0&&U.isub(z)),{div:Y.div,mod:U}):z.length>this.length||this.cmp(z)<0?{div:new f(0),mod:this}:z.length===1?k==="div"?{div:this.divn(z.words[0]),mod:null}:k==="mod"?{div:null,mod:new f(this.modrn(z.words[0]))}:{div:this.divn(z.words[0]),mod:new f(this.modrn(z.words[0]))}:this._wordDiv(z,k);var N,U,Y},f.prototype.div=function(z){return this.divmod(z,"div",!1).div},f.prototype.mod=function(z){return this.divmod(z,"mod",!1).mod},f.prototype.umod=function(z){return this.divmod(z,"mod",!0).mod},f.prototype.divRound=function(z){var k=this.divmod(z);if(k.mod.isZero())return k.div;var R=k.div.negative!==0?k.mod.isub(z):k.mod,N=z.ushrn(1),U=z.andln(1),Y=R.cmp(N);return Y<0||U===1&&Y===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},f.prototype.modrn=function(z){var k=z<0;k&&(z=-z),t(z<=67108863);for(var R=(1<<26)%z,N=0,U=this.length-1;U>=0;U--)N=(R*N+(0|this.words[U]))%z;return k?-N:N},f.prototype.modn=function(z){return this.modrn(z)},f.prototype.idivn=function(z){var k=z<0;k&&(z=-z),t(z<=67108863);for(var R=0,N=this.length-1;N>=0;N--){var U=(0|this.words[N])+67108864*R;this.words[N]=U/z|0,R=U%z}return this._strip(),k?this.ineg():this},f.prototype.divn=function(z){return this.clone().idivn(z)},f.prototype.egcd=function(z){t(z.negative===0),t(!z.isZero());var k=this,R=z.clone();k=k.negative!==0?k.umod(z):k.clone();for(var N=new f(1),U=new f(0),Y=new f(0),de=new f(1),J=0;k.isEven()&&R.isEven();)k.iushrn(1),R.iushrn(1),++J;for(var xe=R.clone(),Te=k.clone();!k.isZero();){for(var Ue=0,pe=1;(k.words[0]&pe)==0&&Ue<26;++Ue,pe<<=1);if(Ue>0)for(k.iushrn(Ue);Ue-- >0;)(N.isOdd()||U.isOdd())&&(N.iadd(xe),U.isub(Te)),N.iushrn(1),U.iushrn(1);for(var Oe=0,re=1;(R.words[0]&re)==0&&Oe<26;++Oe,re<<=1);if(Oe>0)for(R.iushrn(Oe);Oe-- >0;)(Y.isOdd()||de.isOdd())&&(Y.iadd(xe),de.isub(Te)),Y.iushrn(1),de.iushrn(1);k.cmp(R)>=0?(k.isub(R),N.isub(Y),U.isub(de)):(R.isub(k),Y.isub(N),de.isub(U))}return{a:Y,b:de,gcd:R.iushln(J)}},f.prototype._invmp=function(z){t(z.negative===0),t(!z.isZero());var k=this,R=z.clone();k=k.negative!==0?k.umod(z):k.clone();for(var N,U=new f(1),Y=new f(0),de=R.clone();k.cmpn(1)>0&&R.cmpn(1)>0;){for(var J=0,xe=1;(k.words[0]&xe)==0&&J<26;++J,xe<<=1);if(J>0)for(k.iushrn(J);J-- >0;)U.isOdd()&&U.iadd(de),U.iushrn(1);for(var Te=0,Ue=1;(R.words[0]&Ue)==0&&Te<26;++Te,Ue<<=1);if(Te>0)for(R.iushrn(Te);Te-- >0;)Y.isOdd()&&Y.iadd(de),Y.iushrn(1);k.cmp(R)>=0?(k.isub(R),U.isub(Y)):(R.isub(k),Y.isub(U))}return(N=k.cmpn(1)===0?U:Y).cmpn(0)<0&&N.iadd(z),N},f.prototype.gcd=function(z){if(this.isZero())return z.abs();if(z.isZero())return this.abs();var k=this.clone(),R=z.clone();k.negative=0,R.negative=0;for(var N=0;k.isEven()&&R.isEven();N++)k.iushrn(1),R.iushrn(1);for(;;){for(;k.isEven();)k.iushrn(1);for(;R.isEven();)R.iushrn(1);var U=k.cmp(R);if(U<0){var Y=k;k=R,R=Y}else if(U===0||R.cmpn(1)===0)break;k.isub(R)}return R.iushln(N)},f.prototype.invm=function(z){return this.egcd(z).a.umod(z)},f.prototype.isEven=function(){return(1&this.words[0])==0},f.prototype.isOdd=function(){return(1&this.words[0])==1},f.prototype.andln=function(z){return this.words[0]&z},f.prototype.bincn=function(z){t(typeof z=="number");var k=z%26,R=(z-k)/26,N=1<<k;if(this.length<=R)return this._expand(R+1),this.words[R]|=N,this;for(var U=N,Y=R;U!==0&&Y<this.length;Y++){var de=0|this.words[Y];U=(de+=U)>>>26,de&=67108863,this.words[Y]=de}return U!==0&&(this.words[Y]=U,this.length++),this},f.prototype.isZero=function(){return this.length===1&&this.words[0]===0},f.prototype.cmpn=function(z){var k,R=z<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;if(this._strip(),this.length>1)k=1;else{R&&(z=-z),t(z<=67108863,"Number is too big");var N=0|this.words[0];k=N===z?0:N<z?-1:1}return this.negative!==0?0|-k:k},f.prototype.cmp=function(z){if(this.negative!==0&&z.negative===0)return-1;if(this.negative===0&&z.negative!==0)return 1;var k=this.ucmp(z);return this.negative!==0?0|-k:k},f.prototype.ucmp=function(z){if(this.length>z.length)return 1;if(this.length<z.length)return-1;for(var k=0,R=this.length-1;R>=0;R--){var N=0|this.words[R],U=0|z.words[R];if(N!==U){N<U?k=-1:N>U&&(k=1);break}}return k},f.prototype.gtn=function(z){return this.cmpn(z)===1},f.prototype.gt=function(z){return this.cmp(z)===1},f.prototype.gten=function(z){return this.cmpn(z)>=0},f.prototype.gte=function(z){return this.cmp(z)>=0},f.prototype.ltn=function(z){return this.cmpn(z)===-1},f.prototype.lt=function(z){return this.cmp(z)===-1},f.prototype.lten=function(z){return this.cmpn(z)<=0},f.prototype.lte=function(z){return this.cmp(z)<=0},f.prototype.eqn=function(z){return this.cmpn(z)===0},f.prototype.eq=function(z){return this.cmp(z)===0},f.red=function(z){return new G(z)},f.prototype.toRed=function(z){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),z.convertTo(this)._forceRed(z)},f.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(z){return this.red=z,this},f.prototype.forceRed=function(z){return t(!this.red,"Already a number in reduction context"),this._forceRed(z)},f.prototype.redAdd=function(z){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,z)},f.prototype.redIAdd=function(z){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,z)},f.prototype.redSub=function(z){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,z)},f.prototype.redISub=function(z){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,z)},f.prototype.redShl=function(z){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,z)},f.prototype.redMul=function(z){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.mul(this,z)},f.prototype.redIMul=function(z){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.imul(this,z)},f.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(z){return t(this.red&&!z.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,z)};var Q={k256:null,p224:null,p192:null,p25519:null};function ee(z,k){this.name=z,this.p=new f(k,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ne(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Ae(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function fe(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function ce(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function G(z){if(typeof z=="string"){var k=f._prime(z);this.m=k.p,this.prime=k}else t(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}function Z(z){G.call(this,z),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ee.prototype._tmp=function(){var z=new f(null);return z.words=new Array(Math.ceil(this.n/13)),z},ee.prototype.ireduce=function(z){var k,R=z;do this.split(R,this.tmp),k=(R=(R=this.imulK(R)).iadd(this.tmp)).bitLength();while(k>this.n);var N=k<this.n?-1:R.ucmp(this.p);return N===0?(R.words[0]=0,R.length=1):N>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},ee.prototype.split=function(z,k){z.iushrn(this.n,0,k)},ee.prototype.imulK=function(z){return z.imul(this.k)},h(ne,ee),ne.prototype.split=function(z,k){for(var R=Math.min(z.length,9),N=0;N<R;N++)k.words[N]=z.words[N];if(k.length=R,z.length<=9)return z.words[0]=0,void(z.length=1);var U=z.words[9];for(k.words[k.length++]=4194303&U,N=10;N<z.length;N++){var Y=0|z.words[N];z.words[N-10]=(4194303&Y)<<4|U>>>22,U=Y}U>>>=22,z.words[N-10]=U,U===0&&z.length>10?z.length-=10:z.length-=9},ne.prototype.imulK=function(z){z.words[z.length]=0,z.words[z.length+1]=0,z.length+=2;for(var k=0,R=0;R<z.length;R++){var N=0|z.words[R];k+=977*N,z.words[R]=67108863&k,k=64*N+(k/67108864|0)}return z.words[z.length-1]===0&&(z.length--,z.words[z.length-1]===0&&z.length--),z},h(Ae,ee),h(fe,ee),h(ce,ee),ce.prototype.imulK=function(z){for(var k=0,R=0;R<z.length;R++){var N=19*(0|z.words[R])+k,U=67108863&N;N>>>=26,z.words[R]=U,k=N}return k!==0&&(z.words[z.length++]=k),z},f._prime=function(z){if(Q[z])return Q[z];var k;if(z==="k256")k=new ne;else if(z==="p224")k=new Ae;else if(z==="p192")k=new fe;else{if(z!=="p25519")throw new Error("Unknown prime "+z);k=new ce}return Q[z]=k,k},G.prototype._verify1=function(z){t(z.negative===0,"red works only with positives"),t(z.red,"red works only with red numbers")},G.prototype._verify2=function(z,k){t((z.negative|k.negative)==0,"red works only with positives"),t(z.red&&z.red===k.red,"red works only with red numbers")},G.prototype.imod=function(z){return this.prime?this.prime.ireduce(z)._forceRed(this):(b(z,z.umod(this.m)._forceRed(this)),z)},G.prototype.neg=function(z){return z.isZero()?z.clone():this.m.sub(z)._forceRed(this)},G.prototype.add=function(z,k){this._verify2(z,k);var R=z.add(k);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},G.prototype.iadd=function(z,k){this._verify2(z,k);var R=z.iadd(k);return R.cmp(this.m)>=0&&R.isub(this.m),R},G.prototype.sub=function(z,k){this._verify2(z,k);var R=z.sub(k);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},G.prototype.isub=function(z,k){this._verify2(z,k);var R=z.isub(k);return R.cmpn(0)<0&&R.iadd(this.m),R},G.prototype.shl=function(z,k){return this._verify1(z),this.imod(z.ushln(k))},G.prototype.imul=function(z,k){return this._verify2(z,k),this.imod(z.imul(k))},G.prototype.mul=function(z,k){return this._verify2(z,k),this.imod(z.mul(k))},G.prototype.isqr=function(z){return this.imul(z,z.clone())},G.prototype.sqr=function(z){return this.mul(z,z)},G.prototype.sqrt=function(z){if(z.isZero())return z.clone();var k=this.m.andln(3);if(t(k%2==1),k===3){var R=this.m.add(new f(1)).iushrn(2);return this.pow(z,R)}for(var N=this.m.subn(1),U=0;!N.isZero()&&N.andln(1)===0;)U++,N.iushrn(1);t(!N.isZero());var Y=new f(1).toRed(this),de=Y.redNeg(),J=this.m.subn(1).iushrn(1),xe=this.m.bitLength();for(xe=new f(2*xe*xe).toRed(this);this.pow(xe,J).cmp(de)!==0;)xe.redIAdd(de);for(var Te=this.pow(xe,N),Ue=this.pow(z,N.addn(1).iushrn(1)),pe=this.pow(z,N),Oe=U;pe.cmp(Y)!==0;){for(var re=pe,ie=0;re.cmp(Y)!==0;ie++)re=re.redSqr();t(ie<Oe);var Be=this.pow(Te,new f(1).iushln(Oe-ie-1));Ue=Ue.redMul(Be),Te=Be.redSqr(),pe=pe.redMul(Te),Oe=ie}return Ue},G.prototype.invm=function(z){var k=z._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},G.prototype.pow=function(z,k){if(k.isZero())return new f(1).toRed(this);if(k.cmpn(1)===0)return z.clone();var R=new Array(16);R[0]=new f(1).toRed(this),R[1]=z;for(var N=2;N<R.length;N++)R[N]=this.mul(R[N-1],z);var U=R[0],Y=0,de=0,J=k.bitLength()%26;for(J===0&&(J=26),N=k.length-1;N>=0;N--){for(var xe=k.words[N],Te=J-1;Te>=0;Te--){var Ue=xe>>Te&1;U!==R[0]&&(U=this.sqr(U)),Ue!==0||Y!==0?(Y<<=1,Y|=Ue,(++de===4||N===0&&Te===0)&&(U=this.mul(U,R[Y]),de=0,Y=0)):de=0}J=26}return U},G.prototype.convertTo=function(z){var k=z.umod(this.m);return k===z?k.clone():k},G.prototype.convertFrom=function(z){var k=z.clone();return k.red=null,k},f.mont=function(z){return new Z(z)},h(Z,G),Z.prototype.convertTo=function(z){return this.imod(z.ushln(this.shift))},Z.prototype.convertFrom=function(z){var k=this.imod(z.mul(this.rinv));return k.red=null,k},Z.prototype.imul=function(z,k){if(z.isZero()||k.isZero())return z.words[0]=0,z.length=1,z;var R=z.imul(k),N=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=R.isub(N).iushrn(this.shift),Y=U;return U.cmp(this.m)>=0?Y=U.isub(this.m):U.cmpn(0)<0&&(Y=U.iadd(this.m)),Y._forceRed(this)},Z.prototype.mul=function(z,k){if(z.isZero()||k.isZero())return new f(0)._forceRed(this);var R=z.mul(k),N=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=R.isub(N).iushrn(this.shift),Y=U;return U.cmp(this.m)>=0?Y=U.isub(this.m):U.cmpn(0)<0&&(Y=U.iadd(this.m)),Y._forceRed(this)},Z.prototype.invm=function(z){return this.imod(z._invmp(this.m).mul(this.r2))._forceRed(this)}})(i===void 0||i)},{buffer:188}],187:[function(e,i,o){var a;function l(h){this.rand=h}if(i.exports=function(h){return a||(a=new l(null)),a.generate(h)},i.exports.Rand=l,l.prototype.generate=function(h){return this._rand(h)},l.prototype._rand=function(h){if(this.rand.getBytes)return this.rand.getBytes(h);for(var f=new Uint8Array(h),p=0;p<f.length;p++)f[p]=this.rand.getByte();return f},typeof self=="object")self.crypto&&self.crypto.getRandomValues?l.prototype._rand=function(h){var f=new Uint8Array(h);return self.crypto.getRandomValues(f),f}:self.msCrypto&&self.msCrypto.getRandomValues?l.prototype._rand=function(h){var f=new Uint8Array(h);return self.msCrypto.getRandomValues(f),f}:typeof window=="object"&&(l.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var t=e("crypto");if(typeof t.randomBytes!="function")throw new Error("Not supported");l.prototype._rand=function(h){return t.randomBytes(h)}}catch{}},{crypto:188}],188:[function(e,i,o){},{}],189:[function(e,i,o){var a=e("safe-buffer").Buffer;function l(g){a.isBuffer(g)||(g=a.from(g));for(var m=g.length/4|0,b=new Array(m),x=0;x<m;x++)b[x]=g.readUInt32BE(4*x);return b}function t(g){for(;0<g.length;g++)g[0]=0}function h(g,m,b,x,v){for(var S,B,F,O,V=b[0],X=b[1],Q=b[2],ee=b[3],ne=g[0]^m[0],Ae=g[1]^m[1],fe=g[2]^m[2],ce=g[3]^m[3],G=4,Z=1;Z<v;Z++)S=V[ne>>>24]^X[Ae>>>16&255]^Q[fe>>>8&255]^ee[255&ce]^m[G++],B=V[Ae>>>24]^X[fe>>>16&255]^Q[ce>>>8&255]^ee[255&ne]^m[G++],F=V[fe>>>24]^X[ce>>>16&255]^Q[ne>>>8&255]^ee[255&Ae]^m[G++],O=V[ce>>>24]^X[ne>>>16&255]^Q[Ae>>>8&255]^ee[255&fe]^m[G++],ne=S,Ae=B,fe=F,ce=O;return S=(x[ne>>>24]<<24|x[Ae>>>16&255]<<16|x[fe>>>8&255]<<8|x[255&ce])^m[G++],B=(x[Ae>>>24]<<24|x[fe>>>16&255]<<16|x[ce>>>8&255]<<8|x[255&ne])^m[G++],F=(x[fe>>>24]<<24|x[ce>>>16&255]<<16|x[ne>>>8&255]<<8|x[255&Ae])^m[G++],O=(x[ce>>>24]<<24|x[ne>>>16&255]<<16|x[Ae>>>8&255]<<8|x[255&fe])^m[G++],[S>>>=0,B>>>=0,F>>>=0,O>>>=0]}var f=[0,1,2,4,8,16,32,64,128,27,54],p=function(){for(var g=new Array(256),m=0;m<256;m++)g[m]=m<128?m<<1:m<<1^283;for(var b=[],x=[],v=[[],[],[],[]],S=[[],[],[],[]],B=0,F=0,O=0;O<256;++O){var V=F^F<<1^F<<2^F<<3^F<<4;V=V>>>8^255&V^99,b[B]=V,x[V]=B;var X=g[B],Q=g[X],ee=g[Q],ne=257*g[V]^16843008*V;v[0][B]=ne<<24|ne>>>8,v[1][B]=ne<<16|ne>>>16,v[2][B]=ne<<8|ne>>>24,v[3][B]=ne,ne=16843009*ee^65537*Q^257*X^16843008*B,S[0][V]=ne<<24|ne>>>8,S[1][V]=ne<<16|ne>>>16,S[2][V]=ne<<8|ne>>>24,S[3][V]=ne,B===0?B=F=1:(B=X^g[g[g[ee^X]]],F^=g[g[F]])}return{SBOX:b,INV_SBOX:x,SUB_MIX:v,INV_SUB_MIX:S}}();function _(g){this._key=l(g),this._reset()}_.blockSize=16,_.keySize=32,_.prototype.blockSize=_.blockSize,_.prototype.keySize=_.keySize,_.prototype._reset=function(){for(var g=this._key,m=g.length,b=m+6,x=4*(b+1),v=[],S=0;S<m;S++)v[S]=g[S];for(S=m;S<x;S++){var B=v[S-1];S%m==0?(B=B<<8|B>>>24,B=p.SBOX[B>>>24]<<24|p.SBOX[B>>>16&255]<<16|p.SBOX[B>>>8&255]<<8|p.SBOX[255&B],B^=f[S/m|0]<<24):m>6&&S%m==4&&(B=p.SBOX[B>>>24]<<24|p.SBOX[B>>>16&255]<<16|p.SBOX[B>>>8&255]<<8|p.SBOX[255&B]),v[S]=v[S-m]^B}for(var F=[],O=0;O<x;O++){var V=x-O,X=v[V-(O%4?0:4)];F[O]=O<4||V<=4?X:p.INV_SUB_MIX[0][p.SBOX[X>>>24]]^p.INV_SUB_MIX[1][p.SBOX[X>>>16&255]]^p.INV_SUB_MIX[2][p.SBOX[X>>>8&255]]^p.INV_SUB_MIX[3][p.SBOX[255&X]]}this._nRounds=b,this._keySchedule=v,this._invKeySchedule=F},_.prototype.encryptBlockRaw=function(g){return h(g=l(g),this._keySchedule,p.SUB_MIX,p.SBOX,this._nRounds)},_.prototype.encryptBlock=function(g){var m=this.encryptBlockRaw(g),b=a.allocUnsafe(16);return b.writeUInt32BE(m[0],0),b.writeUInt32BE(m[1],4),b.writeUInt32BE(m[2],8),b.writeUInt32BE(m[3],12),b},_.prototype.decryptBlock=function(g){var m=(g=l(g))[1];g[1]=g[3],g[3]=m;var b=h(g,this._invKeySchedule,p.INV_SUB_MIX,p.INV_SBOX,this._nRounds),x=a.allocUnsafe(16);return x.writeUInt32BE(b[0],0),x.writeUInt32BE(b[3],4),x.writeUInt32BE(b[2],8),x.writeUInt32BE(b[1],12),x},_.prototype.scrub=function(){t(this._keySchedule),t(this._invKeySchedule),t(this._key)},i.exports.AES=_},{"safe-buffer":494}],190:[function(e,i,o){var a=e("./aes"),l=e("safe-buffer").Buffer,t=e("cipher-base"),h=e("inherits"),f=e("./ghash"),p=e("buffer-xor"),_=e("./incr32");function g(m,b,x,v){t.call(this);var S=l.alloc(4,0);this._cipher=new a.AES(b);var B=this._cipher.encryptBlock(S);this._ghash=new f(B),x=function(F,O,V){if(O.length===12)return F._finID=l.concat([O,l.from([0,0,0,1])]),l.concat([O,l.from([0,0,0,2])]);var X=new f(V),Q=O.length,ee=Q%16;X.update(O),ee&&(ee=16-ee,X.update(l.alloc(ee,0))),X.update(l.alloc(8,0));var ne=8*Q,Ae=l.alloc(8);Ae.writeUIntBE(ne,0,8),X.update(Ae),F._finID=X.state;var fe=l.from(F._finID);return _(fe),fe}(this,x,B),this._prev=l.from(x),this._cache=l.allocUnsafe(0),this._secCache=l.allocUnsafe(0),this._decrypt=v,this._alen=0,this._len=0,this._mode=m,this._authTag=null,this._called=!1}h(g,t),g.prototype._update=function(m){if(!this._called&&this._alen){var b=16-this._alen%16;b<16&&(b=l.alloc(b,0),this._ghash.update(b))}this._called=!0;var x=this._mode.encrypt(this,m);return this._decrypt?this._ghash.update(m):this._ghash.update(x),this._len+=m.length,x},g.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var m=p(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(b,x){var v=0;b.length!==x.length&&v++;for(var S=Math.min(b.length,x.length),B=0;B<S;++B)v+=b[B]^x[B];return v}(m,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=m,this._cipher.scrub()},g.prototype.getAuthTag=function(){if(this._decrypt||!l.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},g.prototype.setAuthTag=function(m){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=m},g.prototype.setAAD=function(m){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(m),this._alen+=m.length},i.exports=g},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(e,i,o){var a=e("./encrypter"),l=e("./decrypter"),t=e("./modes/list.json");o.createCipher=o.Cipher=a.createCipher,o.createCipheriv=o.Cipheriv=a.createCipheriv,o.createDecipher=o.Decipher=l.createDecipher,o.createDecipheriv=o.Decipheriv=l.createDecipheriv,o.listCiphers=o.getCiphers=function(){return Object.keys(t)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(e,i,o){var a=e("./authCipher"),l=e("safe-buffer").Buffer,t=e("./modes"),h=e("./streamCipher"),f=e("cipher-base"),p=e("./aes"),_=e("evp_bytestokey");function g(x,v,S){f.call(this),this._cache=new m,this._last=void 0,this._cipher=new p.AES(v),this._prev=l.from(S),this._mode=x,this._autopadding=!0}function m(){this.cache=l.allocUnsafe(0)}function b(x,v,S){var B=t[x.toLowerCase()];if(!B)throw new TypeError("invalid suite type");if(typeof S=="string"&&(S=l.from(S)),B.mode!=="GCM"&&S.length!==B.iv)throw new TypeError("invalid iv length "+S.length);if(typeof v=="string"&&(v=l.from(v)),v.length!==B.key/8)throw new TypeError("invalid key length "+v.length);return B.type==="stream"?new h(B.module,v,S,!0):B.type==="auth"?new a(B.module,v,S,!0):new g(B.module,v,S)}e("inherits")(g,f),g.prototype._update=function(x){var v,S;this._cache.add(x);for(var B=[];v=this._cache.get(this._autopadding);)S=this._mode.decrypt(this,v),B.push(S);return l.concat(B)},g.prototype._final=function(){var x=this._cache.flush();if(this._autopadding)return function(v){var S=v[15];if(S<1||S>16)throw new Error("unable to decrypt data");for(var B=-1;++B<S;)if(v[B+(16-S)]!==S)throw new Error("unable to decrypt data");if(S!==16)return v.slice(0,16-S)}(this._mode.decrypt(this,x));if(x)throw new Error("data not multiple of block length")},g.prototype.setAutoPadding=function(x){return this._autopadding=!!x,this},m.prototype.add=function(x){this.cache=l.concat([this.cache,x])},m.prototype.get=function(x){var v;if(x){if(this.cache.length>16)return v=this.cache.slice(0,16),this.cache=this.cache.slice(16),v}else if(this.cache.length>=16)return v=this.cache.slice(0,16),this.cache=this.cache.slice(16),v;return null},m.prototype.flush=function(){if(this.cache.length)return this.cache},o.createDecipher=function(x,v){var S=t[x.toLowerCase()];if(!S)throw new TypeError("invalid suite type");var B=_(v,!1,S.key,S.iv);return b(x,B.key,B.iv)},o.createDecipheriv=b},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(e,i,o){var a=e("./modes"),l=e("./authCipher"),t=e("safe-buffer").Buffer,h=e("./streamCipher"),f=e("cipher-base"),p=e("./aes"),_=e("evp_bytestokey");function g(v,S,B){f.call(this),this._cache=new b,this._cipher=new p.AES(S),this._prev=t.from(B),this._mode=v,this._autopadding=!0}e("inherits")(g,f),g.prototype._update=function(v){var S,B;this._cache.add(v);for(var F=[];S=this._cache.get();)B=this._mode.encrypt(this,S),F.push(B);return t.concat(F)};var m=t.alloc(16,16);function b(){this.cache=t.allocUnsafe(0)}function x(v,S,B){var F=a[v.toLowerCase()];if(!F)throw new TypeError("invalid suite type");if(typeof S=="string"&&(S=t.from(S)),S.length!==F.key/8)throw new TypeError("invalid key length "+S.length);if(typeof B=="string"&&(B=t.from(B)),F.mode!=="GCM"&&B.length!==F.iv)throw new TypeError("invalid iv length "+B.length);return F.type==="stream"?new h(F.module,S,B):F.type==="auth"?new l(F.module,S,B):new g(F.module,S,B)}g.prototype._final=function(){var v=this._cache.flush();if(this._autopadding)return v=this._mode.encrypt(this,v),this._cipher.scrub(),v;if(!v.equals(m))throw this._cipher.scrub(),new Error("data not multiple of block length")},g.prototype.setAutoPadding=function(v){return this._autopadding=!!v,this},b.prototype.add=function(v){this.cache=t.concat([this.cache,v])},b.prototype.get=function(){if(this.cache.length>15){var v=this.cache.slice(0,16);return this.cache=this.cache.slice(16),v}return null},b.prototype.flush=function(){for(var v=16-this.cache.length,S=t.allocUnsafe(v),B=-1;++B<v;)S.writeUInt8(v,B);return t.concat([this.cache,S])},o.createCipheriv=x,o.createCipher=function(v,S){var B=a[v.toLowerCase()];if(!B)throw new TypeError("invalid suite type");var F=_(S,!1,B.key,B.iv);return x(v,F.key,F.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(e,i,o){var a=e("safe-buffer").Buffer,l=a.alloc(16,0);function t(f){var p=a.allocUnsafe(16);return p.writeUInt32BE(f[0]>>>0,0),p.writeUInt32BE(f[1]>>>0,4),p.writeUInt32BE(f[2]>>>0,8),p.writeUInt32BE(f[3]>>>0,12),p}function h(f){this.h=f,this.state=a.alloc(16,0),this.cache=a.allocUnsafe(0)}h.prototype.ghash=function(f){for(var p=-1;++p<f.length;)this.state[p]^=f[p];this._multiply()},h.prototype._multiply=function(){for(var f,p,_,g=[(f=this.h).readUInt32BE(0),f.readUInt32BE(4),f.readUInt32BE(8),f.readUInt32BE(12)],m=[0,0,0,0],b=-1;++b<128;){for((this.state[~~(b/8)]&1<<7-b%8)!=0&&(m[0]^=g[0],m[1]^=g[1],m[2]^=g[2],m[3]^=g[3]),_=(1&g[3])!=0,p=3;p>0;p--)g[p]=g[p]>>>1|(1&g[p-1])<<31;g[0]=g[0]>>>1,_&&(g[0]=g[0]^225<<24)}this.state=t(m)},h.prototype.update=function(f){var p;for(this.cache=a.concat([this.cache,f]);this.cache.length>=16;)p=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(p)},h.prototype.final=function(f,p){return this.cache.length&&this.ghash(a.concat([this.cache,l],16)),this.ghash(t([0,f,0,p])),this.state},i.exports=h},{"safe-buffer":494}],195:[function(e,i,o){i.exports=function(a){for(var l,t=a.length;t--;){if((l=a.readUInt8(t))!==255){l++,a.writeUInt8(l,t);break}a.writeUInt8(0,t)}}},{}],196:[function(e,i,o){var a=e("buffer-xor");o.encrypt=function(l,t){var h=a(t,l._prev);return l._prev=l._cipher.encryptBlock(h),l._prev},o.decrypt=function(l,t){var h=l._prev;l._prev=t;var f=l._cipher.decryptBlock(t);return a(f,h)}},{"buffer-xor":219}],197:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("buffer-xor");function t(h,f,p){var _=f.length,g=l(f,h._cache);return h._cache=h._cache.slice(_),h._prev=a.concat([h._prev,p?f:g]),g}o.encrypt=function(h,f,p){for(var _,g=a.allocUnsafe(0);f.length;){if(h._cache.length===0&&(h._cache=h._cipher.encryptBlock(h._prev),h._prev=a.allocUnsafe(0)),!(h._cache.length<=f.length)){g=a.concat([g,t(h,f,p)]);break}_=h._cache.length,g=a.concat([g,t(h,f.slice(0,_),p)]),f=f.slice(_)}return g}},{"buffer-xor":219,"safe-buffer":494}],198:[function(e,i,o){var a=e("safe-buffer").Buffer;function l(h,f,p){for(var _,g,m=-1,b=0;++m<8;)_=f&1<<7-m?128:0,b+=(128&(g=h._cipher.encryptBlock(h._prev)[0]^_))>>m%8,h._prev=t(h._prev,p?_:g);return b}function t(h,f){var p=h.length,_=-1,g=a.allocUnsafe(h.length);for(h=a.concat([h,a.from([f])]);++_<p;)g[_]=h[_]<<1|h[_+1]>>7;return g}o.encrypt=function(h,f,p){for(var _=f.length,g=a.allocUnsafe(_),m=-1;++m<_;)g[m]=l(h,f[m],p);return g}},{"safe-buffer":494}],199:[function(e,i,o){var a=e("safe-buffer").Buffer;function l(t,h,f){var p=t._cipher.encryptBlock(t._prev)[0]^h;return t._prev=a.concat([t._prev.slice(1),a.from([f?h:p])]),p}o.encrypt=function(t,h,f){for(var p=h.length,_=a.allocUnsafe(p),g=-1;++g<p;)_[g]=l(t,h[g],f);return _}},{"safe-buffer":494}],200:[function(e,i,o){var a=e("buffer-xor"),l=e("safe-buffer").Buffer,t=e("../incr32");function h(f){var p=f._cipher.encryptBlockRaw(f._prev);return t(f._prev),p}o.encrypt=function(f,p){var _=Math.ceil(p.length/16),g=f._cache.length;f._cache=l.concat([f._cache,l.allocUnsafe(16*_)]);for(var m=0;m<_;m++){var b=h(f),x=g+16*m;f._cache.writeUInt32BE(b[0],x+0),f._cache.writeUInt32BE(b[1],x+4),f._cache.writeUInt32BE(b[2],x+8),f._cache.writeUInt32BE(b[3],x+12)}var v=f._cache.slice(0,p.length);return f._cache=f._cache.slice(p.length),a(p,v)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(e,i,o){o.encrypt=function(a,l){return a._cipher.encryptBlock(l)},o.decrypt=function(a,l){return a._cipher.decryptBlock(l)}},{}],202:[function(e,i,o){var a={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},l=e("./list.json");for(var t in l)l[t].module=a[l[t].mode];i.exports=l},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(e,i,o){i.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(e,i,o){(function(a){(function(){var l=e("buffer-xor");function t(h){return h._prev=h._cipher.encryptBlock(h._prev),h._prev}o.encrypt=function(h,f){for(;h._cache.length<f.length;)h._cache=a.concat([h._cache,t(h)]);var p=h._cache.slice(0,f.length);return h._cache=h._cache.slice(f.length),l(f,p)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(e,i,o){var a=e("./aes"),l=e("safe-buffer").Buffer,t=e("cipher-base");function h(f,p,_,g){t.call(this),this._cipher=new a.AES(p),this._prev=l.from(_),this._cache=l.allocUnsafe(0),this._secCache=l.allocUnsafe(0),this._decrypt=g,this._mode=f}e("inherits")(h,t),h.prototype._update=function(f){return this._mode.encrypt(this,f,this._decrypt)},h.prototype._final=function(){this._cipher.scrub()},i.exports=h},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(e,i,o){var a=e("browserify-des"),l=e("browserify-aes/browser"),t=e("browserify-aes/modes"),h=e("browserify-des/modes"),f=e("evp_bytestokey");function p(g,m,b){if(g=g.toLowerCase(),t[g])return l.createCipheriv(g,m,b);if(h[g])return new a({key:m,iv:b,mode:g});throw new TypeError("invalid suite type")}function _(g,m,b){if(g=g.toLowerCase(),t[g])return l.createDecipheriv(g,m,b);if(h[g])return new a({key:m,iv:b,mode:g,decrypt:!0});throw new TypeError("invalid suite type")}o.createCipher=o.Cipher=function(g,m){var b,x;if(g=g.toLowerCase(),t[g])b=t[g].key,x=t[g].iv;else{if(!h[g])throw new TypeError("invalid suite type");b=8*h[g].key,x=h[g].iv}var v=f(m,!1,b,x);return p(g,v.key,v.iv)},o.createCipheriv=o.Cipheriv=p,o.createDecipher=o.Decipher=function(g,m){var b,x;if(g=g.toLowerCase(),t[g])b=t[g].key,x=t[g].iv;else{if(!h[g])throw new TypeError("invalid suite type");b=8*h[g].key,x=h[g].iv}var v=f(m,!1,b,x);return _(g,v.key,v.iv)},o.createDecipheriv=o.Decipheriv=_,o.listCiphers=o.getCiphers=function(){return Object.keys(h).concat(l.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(e,i,o){var a=e("cipher-base"),l=e("des.js"),t=e("inherits"),h=e("safe-buffer").Buffer,f={"des-ede3-cbc":l.CBC.instantiate(l.EDE),"des-ede3":l.EDE,"des-ede-cbc":l.CBC.instantiate(l.EDE),"des-ede":l.EDE,"des-cbc":l.CBC.instantiate(l.DES),"des-ecb":l.DES};function p(_){a.call(this);var g,m=_.mode.toLowerCase(),b=f[m];g=_.decrypt?"decrypt":"encrypt";var x=_.key;h.isBuffer(x)||(x=h.from(x)),m!=="des-ede"&&m!=="des-ede-cbc"||(x=h.concat([x,x.slice(0,8)]));var v=_.iv;h.isBuffer(v)||(v=h.from(v)),this._des=b.create({key:x,iv:v,type:g})}f.des=f["des-cbc"],f.des3=f["des-ede3-cbc"],i.exports=p,t(p,a),p.prototype._update=function(_){return h.from(this._des.update(_))},p.prototype._final=function(){return h.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(e,i,o){o["des-ecb"]={key:8,iv:0},o["des-cbc"]=o.des={key:8,iv:8},o["des-ede3-cbc"]=o.des3={key:24,iv:8},o["des-ede3"]={key:24,iv:0},o["des-ede-cbc"]={key:16,iv:8},o["des-ede"]={key:16,iv:0}},{}],209:[function(e,i,o){(function(a){(function(){var l=e("bn.js"),t=e("randombytes");function h(p){var _,g=p.modulus.byteLength();do _=new l(t(g));while(_.cmp(p.modulus)>=0||!_.umod(p.prime1)||!_.umod(p.prime2));return _}function f(p,_){var g=function(Q){var ee=h(Q);return{blinder:ee.toRed(l.mont(Q.modulus)).redPow(new l(Q.publicExponent)).fromRed(),unblinder:ee.invm(Q.modulus)}}(_),m=_.modulus.byteLength(),b=new l(p).mul(g.blinder).umod(_.modulus),x=b.toRed(l.mont(_.prime1)),v=b.toRed(l.mont(_.prime2)),S=_.coefficient,B=_.prime1,F=_.prime2,O=x.redPow(_.exponent1).fromRed(),V=v.redPow(_.exponent2).fromRed(),X=O.isub(V).imul(S).umod(B).imul(F);return V.iadd(X).imul(g.unblinder).umod(_.modulus).toArrayLike(a,"be",m)}f.getr=h,i.exports=f}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(e,i,o){i.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(e,i,o){i.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(e,i,o){i.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("create-hash"),t=e("readable-stream"),h=e("inherits"),f=e("./sign"),p=e("./verify"),_=e("./algorithms.json");function g(v){t.Writable.call(this);var S=_[v];if(!S)throw new Error("Unknown message digest");this._hashType=S.hash,this._hash=l(S.hash),this._tag=S.id,this._signType=S.sign}function m(v){t.Writable.call(this);var S=_[v];if(!S)throw new Error("Unknown message digest");this._hash=l(S.hash),this._tag=S.id,this._signType=S.sign}function b(v){return new g(v)}function x(v){return new m(v)}Object.keys(_).forEach(function(v){_[v].id=a.from(_[v].id,"hex"),_[v.toLowerCase()]=_[v]}),h(g,t.Writable),g.prototype._write=function(v,S,B){this._hash.update(v),B()},g.prototype.update=function(v,S){return typeof v=="string"&&(v=a.from(v,S)),this._hash.update(v),this},g.prototype.sign=function(v,S){this.end();var B=this._hash.digest(),F=f(B,v,this._hashType,this._signType,this._tag);return S?F.toString(S):F},h(m,t.Writable),m.prototype._write=function(v,S,B){this._hash.update(v),B()},m.prototype.update=function(v,S){return typeof v=="string"&&(v=a.from(v,S)),this._hash.update(v),this},m.prototype.verify=function(v,S,B){typeof S=="string"&&(S=a.from(S,B)),this.end();var F=this._hash.digest();return p(S,F,v,this._signType,this._tag)},i.exports={Sign:b,Verify:x,createSign:b,createVerify:x}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("create-hmac"),t=e("browserify-rsa"),h=e("elliptic").ec,f=e("bn.js"),p=e("parse-asn1"),_=e("./curves.json");function g(v,S,B,F){if((v=a.from(v.toArray())).length<S.byteLength()){var O=a.alloc(S.byteLength()-v.length);v=a.concat([O,v])}var V=B.length,X=function(ne,Ae){ne=(ne=m(ne,Ae)).mod(Ae);var fe=a.from(ne.toArray());if(fe.length<Ae.byteLength()){var ce=a.alloc(Ae.byteLength()-fe.length);fe=a.concat([ce,fe])}return fe}(B,S),Q=a.alloc(V);Q.fill(1);var ee=a.alloc(V);return ee=l(F,ee).update(Q).update(a.from([0])).update(v).update(X).digest(),Q=l(F,ee).update(Q).digest(),{k:ee=l(F,ee).update(Q).update(a.from([1])).update(v).update(X).digest(),v:Q=l(F,ee).update(Q).digest()}}function m(v,S){var B=new f(v),F=(v.length<<3)-S.bitLength();return F>0&&B.ishrn(F),B}function b(v,S,B){var F,O;do{for(F=a.alloc(0);8*F.length<v.bitLength();)S.v=l(B,S.k).update(S.v).digest(),F=a.concat([F,S.v]);O=m(F,v),S.k=l(B,S.k).update(S.v).update(a.from([0])).digest(),S.v=l(B,S.k).update(S.v).digest()}while(O.cmp(v)!==-1);return O}function x(v,S,B,F){return v.toRed(f.mont(B)).redPow(S).fromRed().mod(F)}i.exports=function(v,S,B,F,O){var V=p(S);if(V.curve){if(F!=="ecdsa"&&F!=="ecdsa/rsa")throw new Error("wrong private key type");return function(ne,Ae){var fe=_[Ae.curve.join(".")];if(!fe)throw new Error("unknown curve "+Ae.curve.join("."));var ce=new h(fe).keyFromPrivate(Ae.privateKey).sign(ne);return a.from(ce.toDER())}(v,V)}if(V.type==="dsa"){if(F!=="dsa")throw new Error("wrong private key type");return function(ne,Ae,fe){for(var ce,G=Ae.params.priv_key,Z=Ae.params.p,z=Ae.params.q,k=Ae.params.g,R=new f(0),N=m(ne,z).mod(z),U=!1,Y=g(G,z,ne,fe);U===!1;)ce=b(z,Y,fe),R=x(k,ce,Z,z),(U=ce.invm(z).imul(N.add(G.mul(R))).mod(z)).cmpn(0)===0&&(U=!1,R=new f(0));return function(de,J){de=de.toArray(),J=J.toArray(),128&de[0]&&(de=[0].concat(de)),128&J[0]&&(J=[0].concat(J));var xe=[48,de.length+J.length+4,2,de.length];return xe=xe.concat(de,[2,J.length],J),a.from(xe)}(R,U)}(v,V,B)}if(F!=="rsa"&&F!=="ecdsa/rsa")throw new Error("wrong private key type");v=a.concat([O,v]);for(var X=V.modulus.byteLength(),Q=[0,1];v.length+Q.length+1<X;)Q.push(255);Q.push(0);for(var ee=-1;++ee<v.length;)Q.push(v[ee]);return t(Q,V)},i.exports.getKey=g,i.exports.makeKey=b},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("bn.js"),t=e("elliptic").ec,h=e("parse-asn1"),f=e("./curves.json");function p(_,g){if(_.cmpn(0)<=0)throw new Error("invalid sig");if(_.cmp(g)>=g)throw new Error("invalid sig")}i.exports=function(_,g,m,b,x){var v=h(m);if(v.type==="ec"){if(b!=="ecdsa"&&b!=="ecdsa/rsa")throw new Error("wrong public key type");return function(Q,ee,ne){var Ae=f[ne.data.algorithm.curve.join(".")];if(!Ae)throw new Error("unknown curve "+ne.data.algorithm.curve.join("."));var fe=new t(Ae),ce=ne.data.subjectPrivateKey.data;return fe.verify(ee,Q,ce)}(_,g,v)}if(v.type==="dsa"){if(b!=="dsa")throw new Error("wrong public key type");return function(Q,ee,ne){var Ae=ne.data.p,fe=ne.data.q,ce=ne.data.g,G=ne.data.pub_key,Z=h.signature.decode(Q,"der"),z=Z.s,k=Z.r;p(z,fe),p(k,fe);var R=l.mont(Ae),N=z.invm(fe);return ce.toRed(R).redPow(new l(ee).mul(N).mod(fe)).fromRed().mul(G.toRed(R).redPow(k.mul(N).mod(fe)).fromRed()).mod(Ae).mod(fe).cmp(k)===0}(_,g,v)}if(b!=="rsa"&&b!=="ecdsa/rsa")throw new Error("wrong public key type");g=a.concat([x,g]);for(var S=v.modulus.byteLength(),B=[1],F=0;g.length+B.length+2<S;)B.push(255),F++;B.push(0);for(var O=-1;++O<g.length;)B.push(g[O]);B=a.from(B);var V=l.mont(v.modulus);_=(_=new l(_).toRed(V)).redPow(new l(v.publicExponent)),_=a.from(_.fromRed().toArray());var X=F<8?1:0;for(S=Math.min(_.length,B.length),_.length!==B.length&&(X=1),O=-1;++O<S;)X|=_[O]^B[O];return X===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(e,i,o){},{}],217:[function(e,i,o){var a=e("buffer"),l=a.Buffer;function t(f,p){for(var _ in f)p[_]=f[_]}function h(f,p,_){return l(f,p,_)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?i.exports=a:(t(a,o),o.Buffer=h),t(l,h),h.from=function(f,p,_){if(typeof f=="number")throw new TypeError("Argument must not be a number");return l(f,p,_)},h.alloc=function(f,p,_){if(typeof f!="number")throw new TypeError("Argument must be a number");var g=l(f);return p!==void 0?typeof _=="string"?g.fill(p,_):g.fill(p):g.fill(0),g},h.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return l(f)},h.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(f)}},{buffer:220}],218:[function(e,i,o){var a=e("safe-buffer").Buffer,l=a.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(v){var S;switch(this.encoding=function(B){var F=function(O){if(!O)return"utf8";for(var V;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(V)return;O=(""+O).toLowerCase(),V=!0}}(B);if(typeof F!="string"&&(a.isEncoding===l||!l(B)))throw new Error("Unknown encoding: "+B);return F||B}(v),this.encoding){case"utf16le":this.text=p,this.end=_,S=4;break;case"utf8":this.fillLast=f,S=4;break;case"base64":this.text=g,this.end=m,S=3;break;default:return this.write=b,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(S)}function h(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function f(v){var S=this.lastTotal-this.lastNeed,B=function(F,O,V){if((192&O[0])!=128)return F.lastNeed=0,"ï¿½";if(F.lastNeed>1&&O.length>1){if((192&O[1])!=128)return F.lastNeed=1,"ï¿½";if(F.lastNeed>2&&O.length>2&&(192&O[2])!=128)return F.lastNeed=2,"ï¿½"}}(this,v);return B!==void 0?B:this.lastNeed<=v.length?(v.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,S,0,v.length),void(this.lastNeed-=v.length))}function p(v,S){if((v.length-S)%2==0){var B=v.toString("utf16le",S);if(B){var F=B.charCodeAt(B.length-1);if(F>=55296&&F<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",S,v.length-1)}function _(v){var S=v&&v.length?this.write(v):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,B)}return S}function g(v,S){var B=(v.length-S)%3;return B===0?v.toString("base64",S):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",S,v.length-B))}function m(v){var S=v&&v.length?this.write(v):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(v){return v.toString(this.encoding)}function x(v){return v&&v.length?this.write(v):""}o.StringDecoder=t,t.prototype.write=function(v){if(v.length===0)return"";var S,B;if(this.lastNeed){if((S=this.fillLast(v))===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<v.length?S?S+this.text(v,B):this.text(v,B):S||""},t.prototype.end=function(v){var S=v&&v.length?this.write(v):"";return this.lastNeed?S+"ï¿½":S},t.prototype.text=function(v,S){var B=function(O,V,X){var Q=V.length-1;if(Q<X)return 0;var ee=h(V[Q]);return ee>=0?(ee>0&&(O.lastNeed=ee-1),ee):--Q<X||ee===-2?0:(ee=h(V[Q]))>=0?(ee>0&&(O.lastNeed=ee-2),ee):--Q<X||ee===-2?0:(ee=h(V[Q]))>=0?(ee>0&&(ee===2?ee=0:O.lastNeed=ee-3),ee):0}(this,v,S);if(!this.lastNeed)return v.toString("utf8",S);this.lastTotal=B;var F=v.length-(B-this.lastNeed);return v.copy(this.lastChar,0,F),v.toString("utf8",S,F)},t.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},{"safe-buffer":217}],219:[function(e,i,o){(function(a){(function(){i.exports=function(l,t){for(var h=Math.min(l.length,t.length),f=new a(h),p=0;p<h;++p)f[p]=l[p]^t[p];return f}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],220:[function(e,i,o){(function(a){(function(){var l=e("base64-js"),t=e("ieee754");o.Buffer=f,o.SlowBuffer=function(re){return+re!=re&&(re=0),f.alloc(+re)},o.INSPECT_MAX_BYTES=50;function h(re){if(re>2147483647)throw new RangeError('The value "'+re+'" is invalid for option "size"');var ie=new Uint8Array(re);return ie.__proto__=f.prototype,ie}function f(re,ie,Be){if(typeof re=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(re)}return p(re,ie,Be)}function p(re,ie,Be){if(typeof re=="string")return function(Ne,st){if(typeof st=="string"&&st!==""||(st="utf8"),!f.isEncoding(st))throw new TypeError("Unknown encoding: "+st);var ot=0|x(Ne,st),Je=h(ot),Ze=Je.write(Ne,st);return Ze!==ot&&(Je=Je.slice(0,Ze)),Je}(re,ie);if(ArrayBuffer.isView(re))return m(re);if(re==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(pe(re,ArrayBuffer)||re&&pe(re.buffer,ArrayBuffer))return function(Ne,st,ot){if(st<0||Ne.byteLength<st)throw new RangeError('"offset" is outside of buffer bounds');if(Ne.byteLength<st+(ot||0))throw new RangeError('"length" is outside of buffer bounds');var Je;return Je=st===void 0&&ot===void 0?new Uint8Array(Ne):ot===void 0?new Uint8Array(Ne,st):new Uint8Array(Ne,st,ot),Je.__proto__=f.prototype,Je}(re,ie,Be);if(typeof re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var He=re.valueOf&&re.valueOf();if(He!=null&&He!==re)return f.from(He,ie,Be);var Ge=function(Ne){if(f.isBuffer(Ne)){var st=0|b(Ne.length),ot=h(st);return ot.length===0||Ne.copy(ot,0,0,st),ot}if(Ne.length!==void 0)return typeof Ne.length!="number"||Oe(Ne.length)?h(0):m(Ne);if(Ne.type==="Buffer"&&Array.isArray(Ne.data))return m(Ne.data)}(re);if(Ge)return Ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof re[Symbol.toPrimitive]=="function")return f.from(re[Symbol.toPrimitive]("string"),ie,Be);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}function _(re){if(typeof re!="number")throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function g(re){return _(re),h(re<0?0:0|b(re))}function m(re){for(var ie=re.length<0?0:0|b(re.length),Be=h(ie),He=0;He<ie;He+=1)Be[He]=255&re[He];return Be}function b(re){if(re>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|re}function x(re,ie){if(f.isBuffer(re))return re.length;if(ArrayBuffer.isView(re)||pe(re,ArrayBuffer))return re.byteLength;if(typeof re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);var Be=re.length,He=arguments.length>2&&arguments[2]===!0;if(!He&&Be===0)return 0;for(var Ge=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return Be;case"utf8":case"utf-8":return xe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Be;case"hex":return Be>>>1;case"base64":return Te(re).length;default:if(Ge)return He?-1:xe(re).length;ie=(""+ie).toLowerCase(),Ge=!0}}function v(re,ie,Be){var He=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((Be===void 0||Be>this.length)&&(Be=this.length),Be<=0)||(Be>>>=0)<=(ie>>>=0))return"";for(re||(re="utf8");;)switch(re){case"hex":return Z(this,ie,Be);case"utf8":case"utf-8":return fe(this,ie,Be);case"ascii":return ce(this,ie,Be);case"latin1":case"binary":return G(this,ie,Be);case"base64":return Ae(this,ie,Be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,ie,Be);default:if(He)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),He=!0}}function S(re,ie,Be){var He=re[ie];re[ie]=re[Be],re[Be]=He}function B(re,ie,Be,He,Ge){if(re.length===0)return-1;if(typeof Be=="string"?(He=Be,Be=0):Be>2147483647?Be=2147483647:Be<-2147483648&&(Be=-2147483648),Oe(Be=+Be)&&(Be=Ge?0:re.length-1),Be<0&&(Be=re.length+Be),Be>=re.length){if(Ge)return-1;Be=re.length-1}else if(Be<0){if(!Ge)return-1;Be=0}if(typeof ie=="string"&&(ie=f.from(ie,He)),f.isBuffer(ie))return ie.length===0?-1:F(re,ie,Be,He,Ge);if(typeof ie=="number")return ie&=255,typeof Uint8Array.prototype.indexOf=="function"?Ge?Uint8Array.prototype.indexOf.call(re,ie,Be):Uint8Array.prototype.lastIndexOf.call(re,ie,Be):F(re,[ie],Be,He,Ge);throw new TypeError("val must be string, number or Buffer")}function F(re,ie,Be,He,Ge){var Ne,st=1,ot=re.length,Je=ie.length;if(He!==void 0&&((He=String(He).toLowerCase())==="ucs2"||He==="ucs-2"||He==="utf16le"||He==="utf-16le")){if(re.length<2||ie.length<2)return-1;st=2,ot/=2,Je/=2,Be/=2}function Ze(kt,Gt){return st===1?kt[Gt]:kt.readUInt16BE(Gt*st)}if(Ge){var bt=-1;for(Ne=Be;Ne<ot;Ne++)if(Ze(re,Ne)===Ze(ie,bt===-1?0:Ne-bt)){if(bt===-1&&(bt=Ne),Ne-bt+1===Je)return bt*st}else bt!==-1&&(Ne-=Ne-bt),bt=-1}else for(Be+Je>ot&&(Be=ot-Je),Ne=Be;Ne>=0;Ne--){for(var yt=!0,Nt=0;Nt<Je;Nt++)if(Ze(re,Ne+Nt)!==Ze(ie,Nt)){yt=!1;break}if(yt)return Ne}return-1}function O(re,ie,Be,He){Be=Number(Be)||0;var Ge=re.length-Be;He?(He=Number(He))>Ge&&(He=Ge):He=Ge;var Ne=ie.length;He>Ne/2&&(He=Ne/2);for(var st=0;st<He;++st){var ot=parseInt(ie.substr(2*st,2),16);if(Oe(ot))return st;re[Be+st]=ot}return st}function V(re,ie,Be,He){return Ue(xe(ie,re.length-Be),re,Be,He)}function X(re,ie,Be,He){return Ue(function(Ge){for(var Ne=[],st=0;st<Ge.length;++st)Ne.push(255&Ge.charCodeAt(st));return Ne}(ie),re,Be,He)}function Q(re,ie,Be,He){return X(re,ie,Be,He)}function ee(re,ie,Be,He){return Ue(Te(ie),re,Be,He)}function ne(re,ie,Be,He){return Ue(function(Ge,Ne){for(var st,ot,Je,Ze=[],bt=0;bt<Ge.length&&!((Ne-=2)<0);++bt)st=Ge.charCodeAt(bt),ot=st>>8,Je=st%256,Ze.push(Je),Ze.push(ot);return Ze}(ie,re.length-Be),re,Be,He)}function Ae(re,ie,Be){return ie===0&&Be===re.length?l.fromByteArray(re):l.fromByteArray(re.slice(ie,Be))}function fe(re,ie,Be){Be=Math.min(re.length,Be);for(var He=[],Ge=ie;Ge<Be;){var Ne,st,ot,Je,Ze=re[Ge],bt=null,yt=Ze>239?4:Ze>223?3:Ze>191?2:1;if(Ge+yt<=Be)switch(yt){case 1:Ze<128&&(bt=Ze);break;case 2:(192&(Ne=re[Ge+1]))==128&&(Je=(31&Ze)<<6|63&Ne)>127&&(bt=Je);break;case 3:Ne=re[Ge+1],st=re[Ge+2],(192&Ne)==128&&(192&st)==128&&(Je=(15&Ze)<<12|(63&Ne)<<6|63&st)>2047&&(Je<55296||Je>57343)&&(bt=Je);break;case 4:Ne=re[Ge+1],st=re[Ge+2],ot=re[Ge+3],(192&Ne)==128&&(192&st)==128&&(192&ot)==128&&(Je=(15&Ze)<<18|(63&Ne)<<12|(63&st)<<6|63&ot)>65535&&Je<1114112&&(bt=Je)}bt===null?(bt=65533,yt=1):bt>65535&&(bt-=65536,He.push(bt>>>10&1023|55296),bt=56320|1023&bt),He.push(bt),Ge+=yt}return function(Nt){var kt=Nt.length;if(kt<=4096)return String.fromCharCode.apply(String,Nt);for(var Gt="",fr=0;fr<kt;)Gt+=String.fromCharCode.apply(String,Nt.slice(fr,fr+=4096));return Gt}(He)}o.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=function(){try{var re=new Uint8Array(1);return re.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},re.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(re,ie,Be){return p(re,ie,Be)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(re,ie,Be){return function(He,Ge,Ne){return _(He),He<=0?h(He):Ge!==void 0?typeof Ne=="string"?h(He).fill(Ge,Ne):h(He).fill(Ge):h(He)}(re,ie,Be)},f.allocUnsafe=function(re){return g(re)},f.allocUnsafeSlow=function(re){return g(re)},f.isBuffer=function(re){return re!=null&&re._isBuffer===!0&&re!==f.prototype},f.compare=function(re,ie){if(pe(re,Uint8Array)&&(re=f.from(re,re.offset,re.byteLength)),pe(ie,Uint8Array)&&(ie=f.from(ie,ie.offset,ie.byteLength)),!f.isBuffer(re)||!f.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(re===ie)return 0;for(var Be=re.length,He=ie.length,Ge=0,Ne=Math.min(Be,He);Ge<Ne;++Ge)if(re[Ge]!==ie[Ge]){Be=re[Ge],He=ie[Ge];break}return Be<He?-1:He<Be?1:0},f.isEncoding=function(re){switch(String(re).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(re,ie){if(!Array.isArray(re))throw new TypeError('"list" argument must be an Array of Buffers');if(re.length===0)return f.alloc(0);var Be;if(ie===void 0)for(ie=0,Be=0;Be<re.length;++Be)ie+=re[Be].length;var He=f.allocUnsafe(ie),Ge=0;for(Be=0;Be<re.length;++Be){var Ne=re[Be];if(pe(Ne,Uint8Array)&&(Ne=f.from(Ne)),!f.isBuffer(Ne))throw new TypeError('"list" argument must be an Array of Buffers');Ne.copy(He,Ge),Ge+=Ne.length}return He},f.byteLength=x,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var re=this.length;if(re%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<re;ie+=2)S(this,ie,ie+1);return this},f.prototype.swap32=function(){var re=this.length;if(re%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<re;ie+=4)S(this,ie,ie+3),S(this,ie+1,ie+2);return this},f.prototype.swap64=function(){var re=this.length;if(re%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<re;ie+=8)S(this,ie,ie+7),S(this,ie+1,ie+6),S(this,ie+2,ie+5),S(this,ie+3,ie+4);return this},f.prototype.toString=function(){var re=this.length;return re===0?"":arguments.length===0?fe(this,0,re):v.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(re){if(!f.isBuffer(re))throw new TypeError("Argument must be a Buffer");return this===re||f.compare(this,re)===0},f.prototype.inspect=function(){var re="",ie=o.INSPECT_MAX_BYTES;return re=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(re+=" ... "),"<Buffer "+re+">"},f.prototype.compare=function(re,ie,Be,He,Ge){if(pe(re,Uint8Array)&&(re=f.from(re,re.offset,re.byteLength)),!f.isBuffer(re))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof re);if(ie===void 0&&(ie=0),Be===void 0&&(Be=re?re.length:0),He===void 0&&(He=0),Ge===void 0&&(Ge=this.length),ie<0||Be>re.length||He<0||Ge>this.length)throw new RangeError("out of range index");if(He>=Ge&&ie>=Be)return 0;if(He>=Ge)return-1;if(ie>=Be)return 1;if(this===re)return 0;for(var Ne=(Ge>>>=0)-(He>>>=0),st=(Be>>>=0)-(ie>>>=0),ot=Math.min(Ne,st),Je=this.slice(He,Ge),Ze=re.slice(ie,Be),bt=0;bt<ot;++bt)if(Je[bt]!==Ze[bt]){Ne=Je[bt],st=Ze[bt];break}return Ne<st?-1:st<Ne?1:0},f.prototype.includes=function(re,ie,Be){return this.indexOf(re,ie,Be)!==-1},f.prototype.indexOf=function(re,ie,Be){return B(this,re,ie,Be,!0)},f.prototype.lastIndexOf=function(re,ie,Be){return B(this,re,ie,Be,!1)},f.prototype.write=function(re,ie,Be,He){if(ie===void 0)He="utf8",Be=this.length,ie=0;else if(Be===void 0&&typeof ie=="string")He=ie,Be=this.length,ie=0;else{if(!isFinite(ie))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ie>>>=0,isFinite(Be)?(Be>>>=0,He===void 0&&(He="utf8")):(He=Be,Be=void 0)}var Ge=this.length-ie;if((Be===void 0||Be>Ge)&&(Be=Ge),re.length>0&&(Be<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");He||(He="utf8");for(var Ne=!1;;)switch(He){case"hex":return O(this,re,ie,Be);case"utf8":case"utf-8":return V(this,re,ie,Be);case"ascii":return X(this,re,ie,Be);case"latin1":case"binary":return Q(this,re,ie,Be);case"base64":return ee(this,re,ie,Be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,re,ie,Be);default:if(Ne)throw new TypeError("Unknown encoding: "+He);He=(""+He).toLowerCase(),Ne=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ce(re,ie,Be){var He="";Be=Math.min(re.length,Be);for(var Ge=ie;Ge<Be;++Ge)He+=String.fromCharCode(127&re[Ge]);return He}function G(re,ie,Be){var He="";Be=Math.min(re.length,Be);for(var Ge=ie;Ge<Be;++Ge)He+=String.fromCharCode(re[Ge]);return He}function Z(re,ie,Be){var He=re.length;(!ie||ie<0)&&(ie=0),(!Be||Be<0||Be>He)&&(Be=He);for(var Ge="",Ne=ie;Ne<Be;++Ne)Ge+=J(re[Ne]);return Ge}function z(re,ie,Be){for(var He=re.slice(ie,Be),Ge="",Ne=0;Ne<He.length;Ne+=2)Ge+=String.fromCharCode(He[Ne]+256*He[Ne+1]);return Ge}function k(re,ie,Be){if(re%1!=0||re<0)throw new RangeError("offset is not uint");if(re+ie>Be)throw new RangeError("Trying to access beyond buffer length")}function R(re,ie,Be,He,Ge,Ne){if(!f.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>Ge||ie<Ne)throw new RangeError('"value" argument is out of bounds');if(Be+He>re.length)throw new RangeError("Index out of range")}function N(re,ie,Be,He,Ge,Ne){if(Be+He>re.length)throw new RangeError("Index out of range");if(Be<0)throw new RangeError("Index out of range")}function U(re,ie,Be,He,Ge){return ie=+ie,Be>>>=0,Ge||N(re,0,Be,4),t.write(re,ie,Be,He,23,4),Be+4}function Y(re,ie,Be,He,Ge){return ie=+ie,Be>>>=0,Ge||N(re,0,Be,8),t.write(re,ie,Be,He,52,8),Be+8}f.prototype.slice=function(re,ie){var Be=this.length;(re=~~re)<0?(re+=Be)<0&&(re=0):re>Be&&(re=Be),(ie=ie===void 0?Be:~~ie)<0?(ie+=Be)<0&&(ie=0):ie>Be&&(ie=Be),ie<re&&(ie=re);var He=this.subarray(re,ie);return He.__proto__=f.prototype,He},f.prototype.readUIntLE=function(re,ie,Be){re>>>=0,ie>>>=0,Be||k(re,ie,this.length);for(var He=this[re],Ge=1,Ne=0;++Ne<ie&&(Ge*=256);)He+=this[re+Ne]*Ge;return He},f.prototype.readUIntBE=function(re,ie,Be){re>>>=0,ie>>>=0,Be||k(re,ie,this.length);for(var He=this[re+--ie],Ge=1;ie>0&&(Ge*=256);)He+=this[re+--ie]*Ge;return He},f.prototype.readUInt8=function(re,ie){return re>>>=0,ie||k(re,1,this.length),this[re]},f.prototype.readUInt16LE=function(re,ie){return re>>>=0,ie||k(re,2,this.length),this[re]|this[re+1]<<8},f.prototype.readUInt16BE=function(re,ie){return re>>>=0,ie||k(re,2,this.length),this[re]<<8|this[re+1]},f.prototype.readUInt32LE=function(re,ie){return re>>>=0,ie||k(re,4,this.length),(this[re]|this[re+1]<<8|this[re+2]<<16)+16777216*this[re+3]},f.prototype.readUInt32BE=function(re,ie){return re>>>=0,ie||k(re,4,this.length),16777216*this[re]+(this[re+1]<<16|this[re+2]<<8|this[re+3])},f.prototype.readIntLE=function(re,ie,Be){re>>>=0,ie>>>=0,Be||k(re,ie,this.length);for(var He=this[re],Ge=1,Ne=0;++Ne<ie&&(Ge*=256);)He+=this[re+Ne]*Ge;return He>=(Ge*=128)&&(He-=Math.pow(2,8*ie)),He},f.prototype.readIntBE=function(re,ie,Be){re>>>=0,ie>>>=0,Be||k(re,ie,this.length);for(var He=ie,Ge=1,Ne=this[re+--He];He>0&&(Ge*=256);)Ne+=this[re+--He]*Ge;return Ne>=(Ge*=128)&&(Ne-=Math.pow(2,8*ie)),Ne},f.prototype.readInt8=function(re,ie){return re>>>=0,ie||k(re,1,this.length),128&this[re]?-1*(255-this[re]+1):this[re]},f.prototype.readInt16LE=function(re,ie){re>>>=0,ie||k(re,2,this.length);var Be=this[re]|this[re+1]<<8;return 32768&Be?4294901760|Be:Be},f.prototype.readInt16BE=function(re,ie){re>>>=0,ie||k(re,2,this.length);var Be=this[re+1]|this[re]<<8;return 32768&Be?4294901760|Be:Be},f.prototype.readInt32LE=function(re,ie){return re>>>=0,ie||k(re,4,this.length),this[re]|this[re+1]<<8|this[re+2]<<16|this[re+3]<<24},f.prototype.readInt32BE=function(re,ie){return re>>>=0,ie||k(re,4,this.length),this[re]<<24|this[re+1]<<16|this[re+2]<<8|this[re+3]},f.prototype.readFloatLE=function(re,ie){return re>>>=0,ie||k(re,4,this.length),t.read(this,re,!0,23,4)},f.prototype.readFloatBE=function(re,ie){return re>>>=0,ie||k(re,4,this.length),t.read(this,re,!1,23,4)},f.prototype.readDoubleLE=function(re,ie){return re>>>=0,ie||k(re,8,this.length),t.read(this,re,!0,52,8)},f.prototype.readDoubleBE=function(re,ie){return re>>>=0,ie||k(re,8,this.length),t.read(this,re,!1,52,8)},f.prototype.writeUIntLE=function(re,ie,Be,He){re=+re,ie>>>=0,Be>>>=0,He||R(this,re,ie,Be,Math.pow(2,8*Be)-1,0);var Ge=1,Ne=0;for(this[ie]=255&re;++Ne<Be&&(Ge*=256);)this[ie+Ne]=re/Ge&255;return ie+Be},f.prototype.writeUIntBE=function(re,ie,Be,He){re=+re,ie>>>=0,Be>>>=0,He||R(this,re,ie,Be,Math.pow(2,8*Be)-1,0);var Ge=Be-1,Ne=1;for(this[ie+Ge]=255&re;--Ge>=0&&(Ne*=256);)this[ie+Ge]=re/Ne&255;return ie+Be},f.prototype.writeUInt8=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,1,255,0),this[ie]=255&re,ie+1},f.prototype.writeUInt16LE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,2,65535,0),this[ie]=255&re,this[ie+1]=re>>>8,ie+2},f.prototype.writeUInt16BE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,2,65535,0),this[ie]=re>>>8,this[ie+1]=255&re,ie+2},f.prototype.writeUInt32LE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,4,4294967295,0),this[ie+3]=re>>>24,this[ie+2]=re>>>16,this[ie+1]=re>>>8,this[ie]=255&re,ie+4},f.prototype.writeUInt32BE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,4,4294967295,0),this[ie]=re>>>24,this[ie+1]=re>>>16,this[ie+2]=re>>>8,this[ie+3]=255&re,ie+4},f.prototype.writeIntLE=function(re,ie,Be,He){if(re=+re,ie>>>=0,!He){var Ge=Math.pow(2,8*Be-1);R(this,re,ie,Be,Ge-1,-Ge)}var Ne=0,st=1,ot=0;for(this[ie]=255&re;++Ne<Be&&(st*=256);)re<0&&ot===0&&this[ie+Ne-1]!==0&&(ot=1),this[ie+Ne]=(re/st>>0)-ot&255;return ie+Be},f.prototype.writeIntBE=function(re,ie,Be,He){if(re=+re,ie>>>=0,!He){var Ge=Math.pow(2,8*Be-1);R(this,re,ie,Be,Ge-1,-Ge)}var Ne=Be-1,st=1,ot=0;for(this[ie+Ne]=255&re;--Ne>=0&&(st*=256);)re<0&&ot===0&&this[ie+Ne+1]!==0&&(ot=1),this[ie+Ne]=(re/st>>0)-ot&255;return ie+Be},f.prototype.writeInt8=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,1,127,-128),re<0&&(re=255+re+1),this[ie]=255&re,ie+1},f.prototype.writeInt16LE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,2,32767,-32768),this[ie]=255&re,this[ie+1]=re>>>8,ie+2},f.prototype.writeInt16BE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,2,32767,-32768),this[ie]=re>>>8,this[ie+1]=255&re,ie+2},f.prototype.writeInt32LE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,4,2147483647,-2147483648),this[ie]=255&re,this[ie+1]=re>>>8,this[ie+2]=re>>>16,this[ie+3]=re>>>24,ie+4},f.prototype.writeInt32BE=function(re,ie,Be){return re=+re,ie>>>=0,Be||R(this,re,ie,4,2147483647,-2147483648),re<0&&(re=4294967295+re+1),this[ie]=re>>>24,this[ie+1]=re>>>16,this[ie+2]=re>>>8,this[ie+3]=255&re,ie+4},f.prototype.writeFloatLE=function(re,ie,Be){return U(this,re,ie,!0,Be)},f.prototype.writeFloatBE=function(re,ie,Be){return U(this,re,ie,!1,Be)},f.prototype.writeDoubleLE=function(re,ie,Be){return Y(this,re,ie,!0,Be)},f.prototype.writeDoubleBE=function(re,ie,Be){return Y(this,re,ie,!1,Be)},f.prototype.copy=function(re,ie,Be,He){if(!f.isBuffer(re))throw new TypeError("argument should be a Buffer");if(Be||(Be=0),He||He===0||(He=this.length),ie>=re.length&&(ie=re.length),ie||(ie=0),He>0&&He<Be&&(He=Be),He===Be||re.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(Be<0||Be>=this.length)throw new RangeError("Index out of range");if(He<0)throw new RangeError("sourceEnd out of bounds");He>this.length&&(He=this.length),re.length-ie<He-Be&&(He=re.length-ie+Be);var Ge=He-Be;if(this===re&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ie,Be,He);else if(this===re&&Be<ie&&ie<He)for(var Ne=Ge-1;Ne>=0;--Ne)re[Ne+ie]=this[Ne+Be];else Uint8Array.prototype.set.call(re,this.subarray(Be,He),ie);return Ge},f.prototype.fill=function(re,ie,Be,He){if(typeof re=="string"){if(typeof ie=="string"?(He=ie,ie=0,Be=this.length):typeof Be=="string"&&(He=Be,Be=this.length),He!==void 0&&typeof He!="string")throw new TypeError("encoding must be a string");if(typeof He=="string"&&!f.isEncoding(He))throw new TypeError("Unknown encoding: "+He);if(re.length===1){var Ge=re.charCodeAt(0);(He==="utf8"&&Ge<128||He==="latin1")&&(re=Ge)}}else typeof re=="number"&&(re&=255);if(ie<0||this.length<ie||this.length<Be)throw new RangeError("Out of range index");if(Be<=ie)return this;var Ne;if(ie>>>=0,Be=Be===void 0?this.length:Be>>>0,re||(re=0),typeof re=="number")for(Ne=ie;Ne<Be;++Ne)this[Ne]=re;else{var st=f.isBuffer(re)?re:f.from(re,He),ot=st.length;if(ot===0)throw new TypeError('The value "'+re+'" is invalid for argument "value"');for(Ne=0;Ne<Be-ie;++Ne)this[Ne+ie]=st[Ne%ot]}return this};var de=/[^+/0-9A-Za-z-_]/g;function J(re){return re<16?"0"+re.toString(16):re.toString(16)}function xe(re,ie){var Be;ie=ie||1/0;for(var He=re.length,Ge=null,Ne=[],st=0;st<He;++st){if((Be=re.charCodeAt(st))>55295&&Be<57344){if(!Ge){if(Be>56319){(ie-=3)>-1&&Ne.push(239,191,189);continue}if(st+1===He){(ie-=3)>-1&&Ne.push(239,191,189);continue}Ge=Be;continue}if(Be<56320){(ie-=3)>-1&&Ne.push(239,191,189),Ge=Be;continue}Be=65536+(Ge-55296<<10|Be-56320)}else Ge&&(ie-=3)>-1&&Ne.push(239,191,189);if(Ge=null,Be<128){if((ie-=1)<0)break;Ne.push(Be)}else if(Be<2048){if((ie-=2)<0)break;Ne.push(Be>>6|192,63&Be|128)}else if(Be<65536){if((ie-=3)<0)break;Ne.push(Be>>12|224,Be>>6&63|128,63&Be|128)}else{if(!(Be<1114112))throw new Error("Invalid code point");if((ie-=4)<0)break;Ne.push(Be>>18|240,Be>>12&63|128,Be>>6&63|128,63&Be|128)}}return Ne}function Te(re){return l.toByteArray(function(ie){if((ie=(ie=ie.split("=")[0]).trim().replace(de,"")).length<2)return"";for(;ie.length%4!=0;)ie+="=";return ie}(re))}function Ue(re,ie,Be,He){for(var Ge=0;Ge<He&&!(Ge+Be>=ie.length||Ge>=re.length);++Ge)ie[Ge+Be]=re[Ge];return Ge}function pe(re,ie){return re instanceof ie||re!=null&&re.constructor!=null&&re.constructor.name!=null&&re.constructor.name===ie.name}function Oe(re){return re!=re}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("stream").Transform,t=e("string_decoder").StringDecoder;function h(f){l.call(this),this.hashMode=typeof f=="string",this.hashMode?this[f]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(h,l),h.prototype.update=function(f,p,_){typeof f=="string"&&(f=a.from(f,p));var g=this._update(f);return this.hashMode?this:(_&&(g=this._toString(g,_)),g)},h.prototype.setAutoPadding=function(){},h.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},h.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},h.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},h.prototype._transform=function(f,p,_){var g;try{this.hashMode?this._update(f):this.push(this._update(f))}catch(m){g=m}finally{_(g)}},h.prototype._flush=function(f){var p;try{this.push(this.__final())}catch(_){p=_}f(p)},h.prototype._finalOrDigest=function(f){var p=this.__final()||a.alloc(0);return f&&(p=this._toString(p,f,!0)),p},h.prototype._toString=function(f,p,_){if(this._decoder||(this._decoder=new t(p),this._encoding=p),this._encoding!==p)throw new Error("can't switch encodings");var g=this._decoder.write(f);return _&&(g+=this._decoder.end()),g},i.exports=h},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(e,i,o){var a=e("../internals/is-callable"),l=e("../internals/try-to-string"),t=TypeError;i.exports=function(h){if(a(h))return h;throw new t(l(h)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(e,i,o){var a=e("../internals/is-constructor"),l=e("../internals/try-to-string"),t=TypeError;i.exports=function(h){if(a(h))return h;throw new t(l(h)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(e,i,o){var a=e("../internals/is-callable"),l=String,t=TypeError;i.exports=function(h){if(typeof h=="object"||a(h))return h;throw new t("Can't set "+l(h)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(e,i,o){var a=e("../internals/well-known-symbol"),l=e("../internals/object-create"),t=e("../internals/object-define-property").f,h=a("unscopables"),f=Array.prototype;f[h]===void 0&&t(f,h,{configurable:!0,value:l(null)}),i.exports=function(p){f[h][p]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(e,i,o){var a=e("../internals/object-is-prototype-of"),l=TypeError;i.exports=function(t,h){if(a(h,t))return t;throw new l("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(e,i,o){var a=e("../internals/is-object"),l=String,t=TypeError;i.exports=function(h){if(a(h))return h;throw new t(l(h)+" is not an object")}},{"../internals/is-object":289}],228:[function(e,i,o){var a=e("../internals/to-indexed-object"),l=e("../internals/to-absolute-index"),t=e("../internals/length-of-array-like"),h=function(f){return function(p,_,g){var m,b=a(p),x=t(b),v=l(g,x);if(f&&_!=_){for(;x>v;)if((m=b[v++])!=m)return!0}else for(;x>v;v++)if((f||v in b)&&b[v]===_)return f||v||0;return!f&&-1}};i.exports={includes:h(!0),indexOf:h(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(e,i,o){var a=e("../internals/function-bind-context"),l=e("../internals/function-uncurry-this"),t=e("../internals/indexed-object"),h=e("../internals/to-object"),f=e("../internals/length-of-array-like"),p=e("../internals/array-species-create"),_=l([].push),g=function(m){var b=m===1,x=m===2,v=m===3,S=m===4,B=m===6,F=m===7,O=m===5||B;return function(V,X,Q,ee){for(var ne,Ae,fe=h(V),ce=t(fe),G=a(X,Q),Z=f(ce),z=0,k=ee||p,R=b?k(V,Z):x||F?k(V,0):void 0;Z>z;z++)if((O||z in ce)&&(Ae=G(ne=ce[z],z,fe),m))if(b)R[z]=Ae;else if(Ae)switch(m){case 3:return!0;case 5:return ne;case 6:return z;case 2:_(R,ne)}else switch(m){case 4:return!1;case 7:_(R,ne)}return B?-1:v||S?S:R}};i.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6),filterReject:g(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(e,i,o){var a=e("../internals/to-absolute-index"),l=e("../internals/length-of-array-like"),t=e("../internals/create-property"),h=Array,f=Math.max;i.exports=function(p,_,g){for(var m=l(p),b=a(_,m),x=a(g===void 0?m:g,m),v=h(f(x-b,0)),S=0;b<x;b++,S++)t(v,S,p[b]);return v.length=S,v}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(e,i,o){var a=e("../internals/function-uncurry-this");i.exports=a([].slice)},{"../internals/function-uncurry-this":268}],232:[function(e,i,o){var a=e("../internals/is-array"),l=e("../internals/is-constructor"),t=e("../internals/is-object"),h=e("../internals/well-known-symbol")("species"),f=Array;i.exports=function(p){var _;return a(p)&&(_=p.constructor,(l(_)&&(_===f||a(_.prototype))||t(_)&&(_=_[h])===null)&&(_=void 0)),_===void 0?f:_}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(e,i,o){var a=e("../internals/array-species-constructor");i.exports=function(l,t){return new(a(l))(t===0?0:t)}},{"../internals/array-species-constructor":232}],234:[function(e,i,o){var a=e("../internals/well-known-symbol")("iterator"),l=!1;try{var t=0,h={next:function(){return{done:!!t++}},return:function(){l=!0}};h[a]=function(){return this},Array.from(h,function(){throw 2})}catch{}i.exports=function(f,p){try{if(!p&&!l)return!1}catch{return!1}var _=!1;try{var g={};g[a]=function(){return{next:function(){return{done:_=!0}}}},f(g)}catch{}return _}},{"../internals/well-known-symbol":357}],235:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=a({}.toString),t=a("".slice);i.exports=function(h){return t(l(h),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(e,i,o){var a=e("../internals/to-string-tag-support"),l=e("../internals/is-callable"),t=e("../internals/classof-raw"),h=e("../internals/well-known-symbol")("toStringTag"),f=Object,p=t(function(){return arguments}())==="Arguments";i.exports=a?t:function(_){var g,m,b;return _===void 0?"Undefined":_===null?"Null":typeof(m=function(x,v){try{return x[v]}catch{}}(g=f(_),h))=="string"?m:p?t(g):(b=t(g))==="Object"&&l(g.callee)?"Arguments":b}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(e,i,o){var a=e("../internals/has-own-property"),l=e("../internals/own-keys"),t=e("../internals/object-get-own-property-descriptor"),h=e("../internals/object-define-property");i.exports=function(f,p,_){for(var g=l(p),m=h.f,b=t.f,x=0;x<g.length;x++){var v=g[x];a(f,v)||_&&a(_,v)||m(f,v,b(p,v))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(e,i,o){var a=e("../internals/well-known-symbol")("match");i.exports=function(l){var t=/./;try{"/./"[l](t)}catch{try{return t[a]=!1,"/./"[l](t)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(e,i,o){var a=e("../internals/fails");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},{"../internals/fails":260}],240:[function(e,i,o){i.exports=function(a,l){return{value:a,done:l}}},{}],241:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/object-define-property"),t=e("../internals/create-property-descriptor");i.exports=a?function(h,f,p){return l.f(h,f,t(1,p))}:function(h,f,p){return h[f]=p,h}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(e,i,o){i.exports=function(a,l){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:l}}},{}],243:[function(e,i,o){var a=e("../internals/to-property-key"),l=e("../internals/object-define-property"),t=e("../internals/create-property-descriptor");i.exports=function(h,f,p){var _=a(f);_ in h?l.f(h,_,t(0,p)):h[_]=p}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(e,i,o){var a=e("../internals/make-built-in"),l=e("../internals/object-define-property");i.exports=function(t,h,f){return f.get&&a(f.get,h,{getter:!0}),f.set&&a(f.set,h,{setter:!0}),l.f(t,h,f)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(e,i,o){var a=e("../internals/is-callable"),l=e("../internals/object-define-property"),t=e("../internals/make-built-in"),h=e("../internals/define-global-property");i.exports=function(f,p,_,g){g||(g={});var m=g.enumerable,b=g.name!==void 0?g.name:p;if(a(_)&&t(_,b,g),g.global)m?f[p]=_:h(p,_);else{try{g.unsafe?f[p]&&(m=!0):delete f[p]}catch{}m?f[p]=_:l.f(f,p,{value:_,enumerable:!1,configurable:!g.nonConfigurable,writable:!g.nonWritable})}return f}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(e,i,o){var a=e("../internals/global"),l=Object.defineProperty;i.exports=function(t,h){try{l(a,t,{value:h,configurable:!0,writable:!0})}catch{a[t]=h}return h}},{"../internals/global":274}],247:[function(e,i,o){var a=e("../internals/fails");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(e,i,o){var a=typeof document=="object"&&document.all,l=a===void 0&&a!==void 0;i.exports={all:a,IS_HTMLDDA:l}},{}],249:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/is-object"),t=a.document,h=l(t)&&l(t.createElement);i.exports=function(f){return h?t.createElement(f):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(e,i,o){var a=e("../internals/engine-is-deno"),l=e("../internals/engine-is-node");i.exports=!a&&!l&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(e,i,o){i.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(e,i,o){var a=e("../internals/engine-user-agent");i.exports=/ipad|iphone|ipod/i.test(a)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(e,i,o){var a=e("../internals/engine-user-agent");i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(a)},{"../internals/engine-user-agent":256}],254:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/classof-raw");i.exports=l(a.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(e,i,o){var a=e("../internals/engine-user-agent");i.exports=/web0s(?!.*chrome)/i.test(a)},{"../internals/engine-user-agent":256}],256:[function(e,i,o){i.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(e,i,o){var a,l,t=e("../internals/global"),h=e("../internals/engine-user-agent"),f=t.process,p=t.Deno,_=f&&f.versions||p&&p.version,g=_&&_.v8;g&&(l=(a=g.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!l&&h&&(!(a=h.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=h.match(/Chrome\/(\d+)/))&&(l=+a[1]),i.exports=l},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(e,i,o){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/object-get-own-property-descriptor").f,t=e("../internals/create-non-enumerable-property"),h=e("../internals/define-built-in"),f=e("../internals/define-global-property"),p=e("../internals/copy-constructor-properties"),_=e("../internals/is-forced");i.exports=function(g,m){var b,x,v,S,B,F=g.target,O=g.global,V=g.stat;if(b=O?a:V?a[F]||f(F,{}):(a[F]||{}).prototype)for(x in m){if(S=m[x],v=g.dontCallGetSet?(B=l(b,x))&&B.value:b[x],!_(O?x:F+(V?".":"#")+x,g.forced)&&v!==void 0){if(typeof S==typeof v)continue;p(S,v)}(g.sham||v&&v.sham)&&t(S,"sham",!0),h(b,x,S,g)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(e,i,o){i.exports=function(a){try{return!!a()}catch{return!0}}},{}],261:[function(e,i,o){var a=e("../internals/function-bind-native"),l=Function.prototype,t=l.apply,h=l.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(a?h.bind(t):function(){return h.apply(t,arguments)})},{"../internals/function-bind-native":263}],262:[function(e,i,o){var a=e("../internals/function-uncurry-this-clause"),l=e("../internals/a-callable"),t=e("../internals/function-bind-native"),h=a(a.bind);i.exports=function(f,p){return l(f),p===void 0?f:t?h(f,p):function(){return f.apply(p,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(e,i,o){var a=e("../internals/fails");i.exports=!a(function(){var l=(function(){}).bind();return typeof l!="function"||l.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(e,i,o){var a=e("../internals/function-bind-native"),l=Function.prototype.call;i.exports=a?l.bind(l):function(){return l.apply(l,arguments)}},{"../internals/function-bind-native":263}],265:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/has-own-property"),t=Function.prototype,h=a&&Object.getOwnPropertyDescriptor,f=l(t,"name"),p=f&&(function(){}).name==="something",_=f&&(!a||a&&h(t,"name").configurable);i.exports={EXISTS:f,PROPER:p,CONFIGURABLE:_}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/a-callable");i.exports=function(t,h,f){try{return a(l(Object.getOwnPropertyDescriptor(t,h)[f]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(e,i,o){var a=e("../internals/classof-raw"),l=e("../internals/function-uncurry-this");i.exports=function(t){if(a(t)==="Function")return l(t)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(e,i,o){var a=e("../internals/function-bind-native"),l=Function.prototype,t=l.call,h=a&&l.bind.bind(t,t);i.exports=a?h:function(f){return function(){return t.apply(f,arguments)}}},{"../internals/function-bind-native":263}],269:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/is-callable"),t=function(h){return l(h)?h:void 0};i.exports=function(h,f){return arguments.length<2?t(a[h]):a[h]&&a[h][f]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(e,i,o){var a=e("../internals/classof"),l=e("../internals/get-method"),t=e("../internals/is-null-or-undefined"),h=e("../internals/iterators"),f=e("../internals/well-known-symbol")("iterator");i.exports=function(p){if(!t(p))return l(p,f)||l(p,"@@iterator")||h[a(p)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(e,i,o){var a=e("../internals/function-call"),l=e("../internals/a-callable"),t=e("../internals/an-object"),h=e("../internals/try-to-string"),f=e("../internals/get-iterator-method"),p=TypeError;i.exports=function(_,g){var m=arguments.length<2?f(_):g;if(l(m))return t(a(m,_));throw new p(h(_)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/is-array"),t=e("../internals/is-callable"),h=e("../internals/classof-raw"),f=e("../internals/to-string"),p=a([].push);i.exports=function(_){if(t(_))return _;if(l(_)){for(var g=_.length,m=[],b=0;b<g;b++){var x=_[b];typeof x=="string"?p(m,x):typeof x!="number"&&h(x)!=="Number"&&h(x)!=="String"||p(m,f(x))}var v=m.length,S=!0;return function(B,F){if(S)return S=!1,F;if(l(this))return F;for(var O=0;O<v;O++)if(m[O]===B)return F}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(e,i,o){var a=e("../internals/a-callable"),l=e("../internals/is-null-or-undefined");i.exports=function(t,h){var f=t[h];return l(f)?void 0:a(f)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(e,i,o){(function(a){(function(){var l=function(t){return t&&t.Math===Math&&t};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/to-object"),t=a({}.hasOwnProperty);i.exports=Object.hasOwn||function(h,f){return t(l(h),f)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(e,i,o){i.exports={}},{}],277:[function(e,i,o){i.exports=function(a,l){try{arguments.length===1?console.error(a):console.error(a,l)}catch{}}},{}],278:[function(e,i,o){var a=e("../internals/get-built-in");i.exports=a("document","documentElement")},{"../internals/get-built-in":269}],279:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/fails"),t=e("../internals/document-create-element");i.exports=!a&&!l(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/fails"),t=e("../internals/classof-raw"),h=Object,f=a("".split);i.exports=l(function(){return!h("z").propertyIsEnumerable(0)})?function(p){return t(p)==="String"?f(p,""):h(p)}:h},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/is-callable"),t=e("../internals/shared-store"),h=a(Function.toString);l(t.inspectSource)||(t.inspectSource=function(f){return h(f)}),i.exports=t.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(e,i,o){var a,l,t,h=e("../internals/weak-map-basic-detection"),f=e("../internals/global"),p=e("../internals/is-object"),_=e("../internals/create-non-enumerable-property"),g=e("../internals/has-own-property"),m=e("../internals/shared-store"),b=e("../internals/shared-key"),x=e("../internals/hidden-keys"),v=f.TypeError,S=f.WeakMap;if(h||m.state){var B=m.state||(m.state=new S);B.get=B.get,B.has=B.has,B.set=B.set,a=function(O,V){if(B.has(O))throw new v("Object already initialized");return V.facade=O,B.set(O,V),V},l=function(O){return B.get(O)||{}},t=function(O){return B.has(O)}}else{var F=b("state");x[F]=!0,a=function(O,V){if(g(O,F))throw new v("Object already initialized");return V.facade=O,_(O,F,V),V},l=function(O){return g(O,F)?O[F]:{}},t=function(O){return g(O,F)}}i.exports={set:a,get:l,has:t,enforce:function(O){return t(O)?l(O):a(O,{})},getterFor:function(O){return function(V){var X;if(!p(V)||(X=l(V)).type!==O)throw new v("Incompatible receiver, "+O+" required");return X}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(e,i,o){var a=e("../internals/well-known-symbol"),l=e("../internals/iterators"),t=a("iterator"),h=Array.prototype;i.exports=function(f){return f!==void 0&&(l.Array===f||h[t]===f)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(e,i,o){var a=e("../internals/classof-raw");i.exports=Array.isArray||function(l){return a(l)==="Array"}},{"../internals/classof-raw":235}],285:[function(e,i,o){var a=e("../internals/document-all"),l=a.all;i.exports=a.IS_HTMLDDA?function(t){return typeof t=="function"||t===l}:function(t){return typeof t=="function"}},{"../internals/document-all":248}],286:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/fails"),t=e("../internals/is-callable"),h=e("../internals/classof"),f=e("../internals/get-built-in"),p=e("../internals/inspect-source"),_=function(){},g=[],m=f("Reflect","construct"),b=/^\s*(?:class|function)\b/,x=a(b.exec),v=!b.test(_),S=function(F){if(!t(F))return!1;try{return m(_,g,F),!0}catch{return!1}},B=function(F){if(!t(F))return!1;switch(h(F)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return v||!!x(b,p(F))}catch{return!0}};B.sham=!0,i.exports=!m||l(function(){var F;return S(S.call)||!S(Object)||!S(function(){F=!0})||F})?B:S},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(e,i,o){var a=e("../internals/fails"),l=e("../internals/is-callable"),t=/#|\.prototype\./,h=function(m,b){var x=p[f(m)];return x===g||x!==_&&(l(b)?a(b):!!b)},f=h.normalize=function(m){return String(m).replace(t,".").toLowerCase()},p=h.data={},_=h.NATIVE="N",g=h.POLYFILL="P";i.exports=h},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(e,i,o){i.exports=function(a){return a==null}},{}],289:[function(e,i,o){var a=e("../internals/is-callable"),l=e("../internals/document-all"),t=l.all;i.exports=l.IS_HTMLDDA?function(h){return typeof h=="object"?h!==null:a(h)||h===t}:function(h){return typeof h=="object"?h!==null:a(h)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(e,i,o){i.exports=!1},{}],291:[function(e,i,o){var a=e("../internals/is-object"),l=e("../internals/classof-raw"),t=e("../internals/well-known-symbol")("match");i.exports=function(h){var f;return a(h)&&((f=h[t])!==void 0?!!f:l(h)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(e,i,o){var a=e("../internals/get-built-in"),l=e("../internals/is-callable"),t=e("../internals/object-is-prototype-of"),h=e("../internals/use-symbol-as-uid"),f=Object;i.exports=h?function(p){return typeof p=="symbol"}:function(p){var _=a("Symbol");return l(_)&&t(_.prototype,f(p))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(e,i,o){var a=e("../internals/function-bind-context"),l=e("../internals/function-call"),t=e("../internals/an-object"),h=e("../internals/try-to-string"),f=e("../internals/is-array-iterator-method"),p=e("../internals/length-of-array-like"),_=e("../internals/object-is-prototype-of"),g=e("../internals/get-iterator"),m=e("../internals/get-iterator-method"),b=e("../internals/iterator-close"),x=TypeError,v=function(B,F){this.stopped=B,this.result=F},S=v.prototype;i.exports=function(B,F,O){var V,X,Q,ee,ne,Ae,fe,ce=O&&O.that,G=!(!O||!O.AS_ENTRIES),Z=!(!O||!O.IS_RECORD),z=!(!O||!O.IS_ITERATOR),k=!(!O||!O.INTERRUPTED),R=a(F,ce),N=function(Y){return V&&b(V,"normal",Y),new v(!0,Y)},U=function(Y){return G?(t(Y),k?R(Y[0],Y[1],N):R(Y[0],Y[1])):k?R(Y,N):R(Y)};if(Z)V=B.iterator;else if(z)V=B;else{if(!(X=m(B)))throw new x(h(B)+" is not iterable");if(f(X)){for(Q=0,ee=p(B);ee>Q;Q++)if((ne=U(B[Q]))&&_(S,ne))return ne;return new v(!1)}V=g(B,X)}for(Ae=Z?B.next:V.next;!(fe=l(Ae,V)).done;){try{ne=U(fe.value)}catch(Y){b(V,"throw",Y)}if(typeof ne=="object"&&ne&&_(S,ne))return ne}return new v(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(e,i,o){var a=e("../internals/function-call"),l=e("../internals/an-object"),t=e("../internals/get-method");i.exports=function(h,f,p){var _,g;l(h);try{if(!(_=t(h,"return"))){if(f==="throw")throw p;return p}_=a(_,h)}catch(m){g=!0,_=m}if(f==="throw")throw p;if(g)throw _;return l(_),p}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(e,i,o){var a=e("../internals/iterators-core").IteratorPrototype,l=e("../internals/object-create"),t=e("../internals/create-property-descriptor"),h=e("../internals/set-to-string-tag"),f=e("../internals/iterators"),p=function(){return this};i.exports=function(_,g,m,b){var x=g+" Iterator";return _.prototype=l(a,{next:t(+!b,m)}),h(_,x,!1,!0),f[x]=p,_}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/function-call"),t=e("../internals/is-pure"),h=e("../internals/function-name"),f=e("../internals/is-callable"),p=e("../internals/iterator-create-constructor"),_=e("../internals/object-get-prototype-of"),g=e("../internals/object-set-prototype-of"),m=e("../internals/set-to-string-tag"),b=e("../internals/create-non-enumerable-property"),x=e("../internals/define-built-in"),v=e("../internals/well-known-symbol"),S=e("../internals/iterators"),B=e("../internals/iterators-core"),F=h.PROPER,O=h.CONFIGURABLE,V=B.IteratorPrototype,X=B.BUGGY_SAFARI_ITERATORS,Q=v("iterator"),ee=function(){return this};i.exports=function(ne,Ae,fe,ce,G,Z,z){p(fe,Ae,ce);var k,R,N,U=function(pe){if(pe===G&&Te)return Te;if(!X&&pe&&pe in J)return J[pe];switch(pe){case"keys":case"values":case"entries":return function(){return new fe(this,pe)}}return function(){return new fe(this)}},Y=Ae+" Iterator",de=!1,J=ne.prototype,xe=J[Q]||J["@@iterator"]||G&&J[G],Te=!X&&xe||U(G),Ue=Ae==="Array"&&J.entries||xe;if(Ue&&(k=_(Ue.call(new ne)))!==Object.prototype&&k.next&&(t||_(k)===V||(g?g(k,V):f(k[Q])||x(k,Q,ee)),m(k,Y,!0,!0),t&&(S[Y]=ee)),F&&G==="values"&&xe&&xe.name!=="values"&&(!t&&O?b(J,"name","values"):(de=!0,Te=function(){return l(xe,this)})),G)if(R={values:U("values"),keys:Z?Te:U("keys"),entries:U("entries")},z)for(N in R)(X||de||!(N in J))&&x(J,N,R[N]);else a({target:Ae,proto:!0,forced:X||de},R);return t&&!z||J[Q]===Te||x(J,Q,Te,{name:G}),S[Ae]=Te,R}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(e,i,o){var a,l,t,h=e("../internals/fails"),f=e("../internals/is-callable"),p=e("../internals/is-object"),_=e("../internals/object-create"),g=e("../internals/object-get-prototype-of"),m=e("../internals/define-built-in"),b=e("../internals/well-known-symbol"),x=e("../internals/is-pure"),v=b("iterator"),S=!1;[].keys&&("next"in(t=[].keys())?(l=g(g(t)))!==Object.prototype&&(a=l):S=!0),!p(a)||h(function(){var B={};return a[v].call(B)!==B})?a={}:x&&(a=_(a)),f(a[v])||m(a,v,function(){return this}),i.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:S}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(e,i,o){arguments[4][276][0].apply(o,arguments)},{dup:276}],299:[function(e,i,o){var a=e("../internals/to-length");i.exports=function(l){return a(l.length)}},{"../internals/to-length":343}],300:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/fails"),t=e("../internals/is-callable"),h=e("../internals/has-own-property"),f=e("../internals/descriptors"),p=e("../internals/function-name").CONFIGURABLE,_=e("../internals/inspect-source"),g=e("../internals/internal-state"),m=g.enforce,b=g.get,x=String,v=Object.defineProperty,S=a("".slice),B=a("".replace),F=a([].join),O=f&&!l(function(){return v(function(){},"length",{value:8}).length!==8}),V=String(String).split("String"),X=i.exports=function(Q,ee,ne){S(x(ee),0,7)==="Symbol("&&(ee="["+B(x(ee),/^Symbol\(([^)]*)\)/,"$1")+"]"),ne&&ne.getter&&(ee="get "+ee),ne&&ne.setter&&(ee="set "+ee),(!h(Q,"name")||p&&Q.name!==ee)&&(f?v(Q,"name",{value:ee,configurable:!0}):Q.name=ee),O&&ne&&h(ne,"arity")&&Q.length!==ne.arity&&v(Q,"length",{value:ne.arity});try{ne&&h(ne,"constructor")&&ne.constructor?f&&v(Q,"prototype",{writable:!1}):Q.prototype&&(Q.prototype=void 0)}catch{}var Ae=m(Q);return h(Ae,"source")||(Ae.source=F(V,typeof ee=="string"?ee:"")),Q};Function.prototype.toString=X(function(){return t(this)&&b(this).source||_(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(e,i,o){var a=Math.ceil,l=Math.floor;i.exports=Math.trunc||function(t){var h=+t;return(h>0?l:a)(h)}},{}],302:[function(e,i,o){var a,l,t,h,f,p=e("../internals/global"),_=e("../internals/function-bind-context"),g=e("../internals/object-get-own-property-descriptor").f,m=e("../internals/task").set,b=e("../internals/queue"),x=e("../internals/engine-is-ios"),v=e("../internals/engine-is-ios-pebble"),S=e("../internals/engine-is-webos-webkit"),B=e("../internals/engine-is-node"),F=p.MutationObserver||p.WebKitMutationObserver,O=p.document,V=p.process,X=p.Promise,Q=g(p,"queueMicrotask"),ee=Q&&Q.value;if(!ee){var ne=new b,Ae=function(){var fe,ce;for(B&&(fe=V.domain)&&fe.exit();ce=ne.get();)try{ce()}catch(G){throw ne.head&&a(),G}fe&&fe.enter()};x||B||S||!F||!O?!v&&X&&X.resolve?((h=X.resolve(void 0)).constructor=X,f=_(h.then,h),a=function(){f(Ae)}):B?a=function(){V.nextTick(Ae)}:(m=_(m,p),a=function(){m(Ae)}):(l=!0,t=O.createTextNode(""),new F(Ae).observe(t,{characterData:!0}),a=function(){t.data=l=!l}),ee=function(fe){ne.head||a(),ne.add(fe)}}i.exports=ee},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(e,i,o){var a=e("../internals/a-callable"),l=TypeError,t=function(h){var f,p;this.promise=new h(function(_,g){if(f!==void 0||p!==void 0)throw new l("Bad Promise constructor");f=_,p=g}),this.resolve=a(f),this.reject=a(p)};i.exports.f=function(h){return new t(h)}},{"../internals/a-callable":222}],304:[function(e,i,o){var a=e("../internals/is-regexp"),l=TypeError;i.exports=function(t){if(a(t))throw new l("The method doesn't accept regular expressions");return t}},{"../internals/is-regexp":291}],305:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/function-uncurry-this"),t=e("../internals/function-call"),h=e("../internals/fails"),f=e("../internals/object-keys"),p=e("../internals/object-get-own-property-symbols"),_=e("../internals/object-property-is-enumerable"),g=e("../internals/to-object"),m=e("../internals/indexed-object"),b=Object.assign,x=Object.defineProperty,v=l([].concat);i.exports=!b||h(function(){if(a&&b({b:1},b(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var S={},B={},F=Symbol("assign detection");return S[F]=7,"abcdefghijklmnopqrst".split("").forEach(function(O){B[O]=O}),b({},S)[F]!==7||f(b({},B)).join("")!=="abcdefghijklmnopqrst"})?function(S,B){for(var F=g(S),O=arguments.length,V=1,X=p.f,Q=_.f;O>V;)for(var ee,ne=m(arguments[V++]),Ae=X?v(f(ne),X(ne)):f(ne),fe=Ae.length,ce=0;fe>ce;)ee=Ae[ce++],a&&!t(Q,ne,ee)||(F[ee]=ne[ee]);return F}:b},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(e,i,o){var a,l=e("../internals/an-object"),t=e("../internals/object-define-properties"),h=e("../internals/enum-bug-keys"),f=e("../internals/hidden-keys"),p=e("../internals/html"),_=e("../internals/document-create-element"),g=e("../internals/shared-key"),m=g("IE_PROTO"),b=function(){},x=function(B){return"<script>"+B+"<\/script>"},v=function(B){B.write(x("")),B.close();var F=B.parentWindow.Object;return B=null,F},S=function(){try{a=new ActiveXObject("htmlfile")}catch{}var B,F;S=typeof document<"u"?document.domain&&a?v(a):((F=_("iframe")).style.display="none",p.appendChild(F),F.src="javascript:",(B=F.contentWindow.document).open(),B.write(x("document.F=Object")),B.close(),B.F):v(a);for(var O=h.length;O--;)delete S.prototype[h[O]];return S()};f[m]=!0,i.exports=Object.create||function(B,F){var O;return B!==null?(b.prototype=l(B),O=new b,b.prototype=null,O[m]=B):O=S(),F===void 0?O:t.f(O,F)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/v8-prototype-define-bug"),t=e("../internals/object-define-property"),h=e("../internals/an-object"),f=e("../internals/to-indexed-object"),p=e("../internals/object-keys");o.f=a&&!l?Object.defineProperties:function(_,g){h(_);for(var m,b=f(g),x=p(g),v=x.length,S=0;v>S;)t.f(_,m=x[S++],b[m]);return _}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/ie8-dom-define"),t=e("../internals/v8-prototype-define-bug"),h=e("../internals/an-object"),f=e("../internals/to-property-key"),p=TypeError,_=Object.defineProperty,g=Object.getOwnPropertyDescriptor;o.f=a?t?function(m,b,x){if(h(m),b=f(b),h(x),typeof m=="function"&&b==="prototype"&&"value"in x&&"writable"in x&&!x.writable){var v=g(m,b);v&&v.writable&&(m[b]=x.value,x={configurable:"configurable"in x?x.configurable:v.configurable,enumerable:"enumerable"in x?x.enumerable:v.enumerable,writable:!1})}return _(m,b,x)}:_:function(m,b,x){if(h(m),b=f(b),h(x),l)try{return _(m,b,x)}catch{}if("get"in x||"set"in x)throw new p("Accessors not supported");return"value"in x&&(m[b]=x.value),m}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/function-call"),t=e("../internals/object-property-is-enumerable"),h=e("../internals/create-property-descriptor"),f=e("../internals/to-indexed-object"),p=e("../internals/to-property-key"),_=e("../internals/has-own-property"),g=e("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;o.f=a?m:function(b,x){if(b=f(b),x=p(x),g)try{return m(b,x)}catch{}if(_(b,x))return h(!l(t.f,b,x),b[x])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(e,i,o){var a=e("../internals/classof-raw"),l=e("../internals/to-indexed-object"),t=e("../internals/object-get-own-property-names").f,h=e("../internals/array-slice-simple"),f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(p){return f&&a(p)==="Window"?function(_){try{return t(_)}catch{return h(f)}}(p):t(l(p))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(e,i,o){var a=e("../internals/object-keys-internal"),l=e("../internals/enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(t){return a(t,l)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(e,i,o){o.f=Object.getOwnPropertySymbols},{}],313:[function(e,i,o){var a=e("../internals/has-own-property"),l=e("../internals/is-callable"),t=e("../internals/to-object"),h=e("../internals/shared-key"),f=e("../internals/correct-prototype-getter"),p=h("IE_PROTO"),_=Object,g=_.prototype;i.exports=f?_.getPrototypeOf:function(m){var b=t(m);if(a(b,p))return b[p];var x=b.constructor;return l(x)&&b instanceof x?x.prototype:b instanceof _?g:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(e,i,o){var a=e("../internals/function-uncurry-this");i.exports=a({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=e("../internals/has-own-property"),t=e("../internals/to-indexed-object"),h=e("../internals/array-includes").indexOf,f=e("../internals/hidden-keys"),p=a([].push);i.exports=function(_,g){var m,b=t(_),x=0,v=[];for(m in b)!l(f,m)&&l(b,m)&&p(v,m);for(;g.length>x;)l(b,m=g[x++])&&(~h(v,m)||p(v,m));return v}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(e,i,o){var a=e("../internals/object-keys-internal"),l=e("../internals/enum-bug-keys");i.exports=Object.keys||function(t){return a(t,l)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(e,i,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,t=l&&!a.call({1:2},1);o.f=t?function(h){var f=l(this,h);return!!f&&f.enumerable}:a},{}],318:[function(e,i,o){var a=e("../internals/function-uncurry-this-accessor"),l=e("../internals/an-object"),t=e("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,f=!1,p={};try{(h=a(Object.prototype,"__proto__","set"))(p,[]),f=p instanceof Array}catch{}return function(_,g){return l(_),t(g),f?h(_,g):_.__proto__=g,_}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/fails"),t=e("../internals/function-uncurry-this"),h=e("../internals/object-get-prototype-of"),f=e("../internals/object-keys"),p=e("../internals/to-indexed-object"),_=t(e("../internals/object-property-is-enumerable").f),g=t([].push),m=a&&l(function(){var x=Object.create(null);return x[2]=2,!_(x,2)}),b=function(x){return function(v){for(var S,B=p(v),F=f(B),O=m&&h(B)===null,V=F.length,X=0,Q=[];V>X;)S=F[X++],a&&!(O?S in B:_(B,S))||g(Q,x?[S,B[S]]:B[S]);return Q}};i.exports={entries:b(!0),values:b(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(e,i,o){var a=e("../internals/function-call"),l=e("../internals/is-callable"),t=e("../internals/is-object"),h=TypeError;i.exports=function(f,p){var _,g;if(p==="string"&&l(_=f.toString)&&!t(g=a(_,f))||l(_=f.valueOf)&&!t(g=a(_,f))||p!=="string"&&l(_=f.toString)&&!t(g=a(_,f)))return g;throw new h("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(e,i,o){var a=e("../internals/get-built-in"),l=e("../internals/function-uncurry-this"),t=e("../internals/object-get-own-property-names"),h=e("../internals/object-get-own-property-symbols"),f=e("../internals/an-object"),p=l([].concat);i.exports=a("Reflect","ownKeys")||function(_){var g=t.f(f(_)),m=h.f;return m?p(g,m(_)):g}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(e,i,o){var a=e("../internals/global");i.exports=a},{"../internals/global":274}],323:[function(e,i,o){i.exports=function(a){try{return{error:!1,value:a()}}catch(l){return{error:!0,value:l}}}},{}],324:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/promise-native-constructor"),t=e("../internals/is-callable"),h=e("../internals/is-forced"),f=e("../internals/inspect-source"),p=e("../internals/well-known-symbol"),_=e("../internals/engine-is-browser"),g=e("../internals/engine-is-deno"),m=e("../internals/is-pure"),b=e("../internals/engine-v8-version"),x=l&&l.prototype,v=p("species"),S=!1,B=t(a.PromiseRejectionEvent),F=h("Promise",function(){var O=f(l),V=O!==String(l);if(!V&&b===66||m&&(!x.catch||!x.finally))return!0;if(!b||b<51||!/native code/.test(O)){var X=new l(function(ee){ee(1)}),Q=function(ee){ee(function(){},function(){})};if((X.constructor={})[v]=Q,!(S=X.then(function(){})instanceof Q))return!0}return!V&&(_||g)&&!B});i.exports={CONSTRUCTOR:F,REJECTION_EVENT:B,SUBCLASSING:S}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(e,i,o){var a=e("../internals/global");i.exports=a.Promise},{"../internals/global":274}],326:[function(e,i,o){var a=e("../internals/an-object"),l=e("../internals/is-object"),t=e("../internals/new-promise-capability");i.exports=function(h,f){if(a(h),l(f)&&f.constructor===h)return f;var p=t.f(h);return(0,p.resolve)(f),p.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(e,i,o){var a=e("../internals/promise-native-constructor"),l=e("../internals/check-correctness-of-iteration"),t=e("../internals/promise-constructor-detection").CONSTRUCTOR;i.exports=t||!l(function(h){a.all(h).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(e,i,o){var a=function(){this.head=null,this.tail=null};a.prototype={add:function(l){var t={item:l,next:null},h=this.tail;h?h.next=t:this.head=t,this.tail=t},get:function(){var l=this.head;if(l)return(this.head=l.next)===null&&(this.tail=null),l.item}},i.exports=a},{}],329:[function(e,i,o){var a=e("../internals/is-null-or-undefined"),l=TypeError;i.exports=function(t){if(a(t))throw new l("Can't call method on "+t);return t}},{"../internals/is-null-or-undefined":288}],330:[function(e,i,o){var a=e("../internals/get-built-in"),l=e("../internals/define-built-in-accessor"),t=e("../internals/well-known-symbol"),h=e("../internals/descriptors"),f=t("species");i.exports=function(p){var _=a(p);h&&_&&!_[f]&&l(_,f,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(e,i,o){var a=e("../internals/object-define-property").f,l=e("../internals/has-own-property"),t=e("../internals/well-known-symbol")("toStringTag");i.exports=function(h,f,p){h&&!p&&(h=h.prototype),h&&!l(h,t)&&a(h,t,{configurable:!0,value:f})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(e,i,o){var a=e("../internals/shared"),l=e("../internals/uid"),t=a("keys");i.exports=function(h){return t[h]||(t[h]=l(h))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/define-global-property"),t=a["__core-js_shared__"]||l("__core-js_shared__",{});i.exports=t},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(e,i,o){var a=e("../internals/is-pure"),l=e("../internals/shared-store");(i.exports=function(t,h){return l[t]||(l[t]=h!==void 0?h:{})})("versions",[]).push({version:"3.33.0",mode:a?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(e,i,o){var a=e("../internals/an-object"),l=e("../internals/a-constructor"),t=e("../internals/is-null-or-undefined"),h=e("../internals/well-known-symbol")("species");i.exports=function(f,p){var _,g=a(f).constructor;return g===void 0||t(_=a(g)[h])?p:l(_)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(e,i,o){var a=e("../internals/engine-v8-version"),l=e("../internals/fails"),t=e("../internals/global").String;i.exports=!!Object.getOwnPropertySymbols&&!l(function(){var h=Symbol("symbol detection");return!t(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&a&&a<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(e,i,o){var a=e("../internals/function-call"),l=e("../internals/get-built-in"),t=e("../internals/well-known-symbol"),h=e("../internals/define-built-in");i.exports=function(){var f=l("Symbol"),p=f&&f.prototype,_=p&&p.valueOf,g=t("toPrimitive");p&&!p[g]&&h(p,g,function(m){return a(_,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(e,i,o){var a=e("../internals/symbol-constructor-detection");i.exports=a&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(e,i,o){var a,l,t,h,f=e("../internals/global"),p=e("../internals/function-apply"),_=e("../internals/function-bind-context"),g=e("../internals/is-callable"),m=e("../internals/has-own-property"),b=e("../internals/fails"),x=e("../internals/html"),v=e("../internals/array-slice"),S=e("../internals/document-create-element"),B=e("../internals/validate-arguments-length"),F=e("../internals/engine-is-ios"),O=e("../internals/engine-is-node"),V=f.setImmediate,X=f.clearImmediate,Q=f.process,ee=f.Dispatch,ne=f.Function,Ae=f.MessageChannel,fe=f.String,ce=0,G={};b(function(){a=f.location});var Z=function(N){if(m(G,N)){var U=G[N];delete G[N],U()}},z=function(N){return function(){Z(N)}},k=function(N){Z(N.data)},R=function(N){f.postMessage(fe(N),a.protocol+"//"+a.host)};V&&X||(V=function(N){B(arguments.length,1);var U=g(N)?N:ne(N),Y=v(arguments,1);return G[++ce]=function(){p(U,void 0,Y)},l(ce),ce},X=function(N){delete G[N]},O?l=function(N){Q.nextTick(z(N))}:ee&&ee.now?l=function(N){ee.now(z(N))}:Ae&&!F?(h=(t=new Ae).port2,t.port1.onmessage=k,l=_(h.postMessage,h)):f.addEventListener&&g(f.postMessage)&&!f.importScripts&&a&&a.protocol!=="file:"&&!b(R)?(l=R,f.addEventListener("message",k,!1)):l="onreadystatechange"in S("script")?function(N){x.appendChild(S("script")).onreadystatechange=function(){x.removeChild(this),Z(N)}}:function(N){setTimeout(z(N),0)}),i.exports={set:V,clear:X}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(e,i,o){var a=e("../internals/to-integer-or-infinity"),l=Math.max,t=Math.min;i.exports=function(h,f){var p=a(h);return p<0?l(p+f,0):t(p,f)}},{"../internals/to-integer-or-infinity":342}],341:[function(e,i,o){var a=e("../internals/indexed-object"),l=e("../internals/require-object-coercible");i.exports=function(t){return a(l(t))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(e,i,o){var a=e("../internals/math-trunc");i.exports=function(l){var t=+l;return t!=t||t===0?0:a(t)}},{"../internals/math-trunc":301}],343:[function(e,i,o){var a=e("../internals/to-integer-or-infinity"),l=Math.min;i.exports=function(t){return t>0?l(a(t),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(e,i,o){var a=e("../internals/require-object-coercible"),l=Object;i.exports=function(t){return l(a(t))}},{"../internals/require-object-coercible":329}],345:[function(e,i,o){var a=e("../internals/function-call"),l=e("../internals/is-object"),t=e("../internals/is-symbol"),h=e("../internals/get-method"),f=e("../internals/ordinary-to-primitive"),p=e("../internals/well-known-symbol"),_=TypeError,g=p("toPrimitive");i.exports=function(m,b){if(!l(m)||t(m))return m;var x,v=h(m,g);if(v){if(b===void 0&&(b="default"),x=a(v,m,b),!l(x)||t(x))return x;throw new _("Can't convert object to primitive value")}return b===void 0&&(b="number"),f(m,b)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(e,i,o){var a=e("../internals/to-primitive"),l=e("../internals/is-symbol");i.exports=function(t){var h=a(t,"string");return l(h)?h:h+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(e,i,o){var a={};a[e("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(e,i,o){var a=e("../internals/classof"),l=String;i.exports=function(t){if(a(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return l(t)}},{"../internals/classof":236}],349:[function(e,i,o){var a=String;i.exports=function(l){try{return a(l)}catch{return"Object"}}},{}],350:[function(e,i,o){var a=e("../internals/function-uncurry-this"),l=0,t=Math.random(),h=a(1 .toString);i.exports=function(f){return"Symbol("+(f===void 0?"":f)+")_"+h(++l+t,36)}},{"../internals/function-uncurry-this":268}],351:[function(e,i,o){var a=e("../internals/symbol-constructor-detection");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(e,i,o){var a=e("../internals/descriptors"),l=e("../internals/fails");i.exports=a&&l(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(e,i,o){var a=TypeError;i.exports=function(l,t){if(l<t)throw new a("Not enough arguments");return l}},{}],354:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/is-callable"),t=a.WeakMap;i.exports=l(t)&&/native code/.test(String(t))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(e,i,o){var a=e("../internals/path"),l=e("../internals/has-own-property"),t=e("../internals/well-known-symbol-wrapped"),h=e("../internals/object-define-property").f;i.exports=function(f){var p=a.Symbol||(a.Symbol={});l(p,f)||h(p,f,{value:t.f(f)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(e,i,o){var a=e("../internals/well-known-symbol");o.f=a},{"../internals/well-known-symbol":357}],357:[function(e,i,o){var a=e("../internals/global"),l=e("../internals/shared"),t=e("../internals/has-own-property"),h=e("../internals/uid"),f=e("../internals/symbol-constructor-detection"),p=e("../internals/use-symbol-as-uid"),_=a.Symbol,g=l("wks"),m=p?_.for||_:_&&_.withoutSetter||h;i.exports=function(b){return t(g,b)||(g[b]=f&&t(_,b)?_[b]:m("Symbol."+b)),g[b]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/array-iteration").findIndex,t=e("../internals/add-to-unscopables"),h=!0;"findIndex"in[]&&Array(1).findIndex(function(){h=!1}),a({target:"Array",proto:!0,forced:h},{findIndex:function(f){return l(this,f,arguments.length>1?arguments[1]:void 0)}}),t("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/array-iteration").find,t=e("../internals/add-to-unscopables"),h=!0;"find"in[]&&Array(1).find(function(){h=!1}),a({target:"Array",proto:!0,forced:h},{find:function(f){return l(this,f,arguments.length>1?arguments[1]:void 0)}}),t("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/array-includes").includes,t=e("../internals/fails"),h=e("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:t(function(){return!Array(1).includes()})},{includes:function(f){return l(this,f,arguments.length>1?arguments[1]:void 0)}}),h("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(e,i,o){var a=e("../internals/to-indexed-object"),l=e("../internals/add-to-unscopables"),t=e("../internals/iterators"),h=e("../internals/internal-state"),f=e("../internals/object-define-property").f,p=e("../internals/iterator-define"),_=e("../internals/create-iter-result-object"),g=e("../internals/is-pure"),m=e("../internals/descriptors"),b=h.set,x=h.getterFor("Array Iterator");i.exports=p(Array,"Array",function(S,B){b(this,{type:"Array Iterator",target:a(S),index:0,kind:B})},function(){var S=x(this),B=S.target,F=S.kind,O=S.index++;if(!B||O>=B.length)return S.target=void 0,_(void 0,!0);switch(F){case"keys":return _(O,!1);case"values":return _(B[O],!1)}return _([O,B[O]],!1)},"values");var v=t.Arguments=t.Array;if(l("keys"),l("values"),l("entries"),!g&&m&&v.name!=="values")try{f(v,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/get-built-in"),t=e("../internals/function-apply"),h=e("../internals/function-call"),f=e("../internals/function-uncurry-this"),p=e("../internals/fails"),_=e("../internals/is-callable"),g=e("../internals/is-symbol"),m=e("../internals/array-slice"),b=e("../internals/get-json-replacer-function"),x=e("../internals/symbol-constructor-detection"),v=String,S=l("JSON","stringify"),B=f(/./.exec),F=f("".charAt),O=f("".charCodeAt),V=f("".replace),X=f(1 .toString),Q=/[\uD800-\uDFFF]/g,ee=/^[\uD800-\uDBFF]$/,ne=/^[\uDC00-\uDFFF]$/,Ae=!x||p(function(){var Z=l("Symbol")("stringify detection");return S([Z])!=="[null]"||S({a:Z})!=="{}"||S(Object(Z))!=="{}"}),fe=p(function(){return S("\uDF06\uD834")!=='"\\udf06\\ud834"'||S("\uDEAD")!=='"\\udead"'}),ce=function(Z,z){var k=m(arguments),R=b(z);if(_(R)||Z!==void 0&&!g(Z))return k[1]=function(N,U){if(_(R)&&(U=h(R,this,v(N),U)),!g(U))return U},t(S,null,k)},G=function(Z,z,k){var R=F(k,z-1),N=F(k,z+1);return B(ee,Z)&&!B(ne,N)||B(ne,Z)&&!B(ee,R)?"\\u"+X(O(Z,0),16):Z};S&&a({target:"JSON",stat:!0,arity:3,forced:Ae||fe},{stringify:function(Z,z,k){var R=m(arguments),N=t(Ae?ce:S,null,R);return fe&&typeof N=="string"?V(N,Q,G):N}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(e,i,o){e("../internals/export")({target:"Number",stat:!0},{isNaN:function(a){return a!=a}})},{"../internals/export":259}],364:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/object-assign");a({target:"Object",stat:!0,arity:2,forced:Object.assign!==l},{assign:l})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/symbol-constructor-detection"),t=e("../internals/fails"),h=e("../internals/object-get-own-property-symbols"),f=e("../internals/to-object");a({target:"Object",stat:!0,forced:!l||t(function(){h.f(1)})},{getOwnPropertySymbols:function(p){var _=h.f;return _?_(f(p)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/to-object"),t=e("../internals/object-keys");a({target:"Object",stat:!0,forced:e("../internals/fails")(function(){t(1)})},{keys:function(h){return t(l(h))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/object-to-array").values;a({target:"Object",stat:!0},{values:function(t){return l(t)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/function-call"),t=e("../internals/a-callable"),h=e("../internals/new-promise-capability"),f=e("../internals/perform"),p=e("../internals/iterate");a({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{all:function(_){var g=this,m=h.f(g),b=m.resolve,x=m.reject,v=f(function(){var S=t(g.resolve),B=[],F=0,O=1;p(_,function(V){var X=F++,Q=!1;O++,l(S,g,V).then(function(ee){Q||(Q=!0,B[X]=ee,--O||b(B))},x)}),--O||b(B)});return v.error&&x(v.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/is-pure"),t=e("../internals/promise-constructor-detection").CONSTRUCTOR,h=e("../internals/promise-native-constructor"),f=e("../internals/get-built-in"),p=e("../internals/is-callable"),_=e("../internals/define-built-in"),g=h&&h.prototype;if(a({target:"Promise",proto:!0,forced:t,real:!0},{catch:function(b){return this.then(void 0,b)}}),!l&&p(h)){var m=f("Promise").prototype.catch;g.catch!==m&&_(g,"catch",m,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(e,i,o){var a,l,t,h=e("../internals/export"),f=e("../internals/is-pure"),p=e("../internals/engine-is-node"),_=e("../internals/global"),g=e("../internals/function-call"),m=e("../internals/define-built-in"),b=e("../internals/object-set-prototype-of"),x=e("../internals/set-to-string-tag"),v=e("../internals/set-species"),S=e("../internals/a-callable"),B=e("../internals/is-callable"),F=e("../internals/is-object"),O=e("../internals/an-instance"),V=e("../internals/species-constructor"),X=e("../internals/task").set,Q=e("../internals/microtask"),ee=e("../internals/host-report-errors"),ne=e("../internals/perform"),Ae=e("../internals/queue"),fe=e("../internals/internal-state"),ce=e("../internals/promise-native-constructor"),G=e("../internals/promise-constructor-detection"),Z=e("../internals/new-promise-capability"),z=G.CONSTRUCTOR,k=G.REJECTION_EVENT,R=G.SUBCLASSING,N=fe.getterFor("Promise"),U=fe.set,Y=ce&&ce.prototype,de=ce,J=Y,xe=_.TypeError,Te=_.document,Ue=_.process,pe=Z.f,Oe=pe,re=!!(Te&&Te.createEvent&&_.dispatchEvent),ie=function(yt){var Nt;return!(!F(yt)||!B(Nt=yt.then))&&Nt},Be=function(yt,Nt){var kt,Gt,fr,Tr=Nt.value,yr=Nt.state===1,Dr=yr?yt.ok:yt.fail,jt=yt.resolve,Jt=yt.reject,pr=yt.domain;try{Dr?(yr||(Nt.rejection===2&&ot(Nt),Nt.rejection=1),Dr===!0?kt=Tr:(pr&&pr.enter(),kt=Dr(Tr),pr&&(pr.exit(),fr=!0)),kt===yt.promise?Jt(new xe("Promise-chain cycle")):(Gt=ie(kt))?g(Gt,kt,jt,Jt):jt(kt)):Jt(Tr)}catch(Ft){pr&&!fr&&pr.exit(),Jt(Ft)}},He=function(yt,Nt){yt.notified||(yt.notified=!0,Q(function(){for(var kt,Gt=yt.reactions;kt=Gt.get();)Be(kt,yt);yt.notified=!1,Nt&&!yt.rejection&&Ne(yt)}))},Ge=function(yt,Nt,kt){var Gt,fr;re?((Gt=Te.createEvent("Event")).promise=Nt,Gt.reason=kt,Gt.initEvent(yt,!1,!0),_.dispatchEvent(Gt)):Gt={promise:Nt,reason:kt},!k&&(fr=_["on"+yt])?fr(Gt):yt==="unhandledrejection"&&ee("Unhandled promise rejection",kt)},Ne=function(yt){g(X,_,function(){var Nt,kt=yt.facade,Gt=yt.value;if(st(yt)&&(Nt=ne(function(){p?Ue.emit("unhandledRejection",Gt,kt):Ge("unhandledrejection",kt,Gt)}),yt.rejection=p||st(yt)?2:1,Nt.error))throw Nt.value})},st=function(yt){return yt.rejection!==1&&!yt.parent},ot=function(yt){g(X,_,function(){var Nt=yt.facade;p?Ue.emit("rejectionHandled",Nt):Ge("rejectionhandled",Nt,yt.value)})},Je=function(yt,Nt,kt){return function(Gt){yt(Nt,Gt,kt)}},Ze=function(yt,Nt,kt){yt.done||(yt.done=!0,kt&&(yt=kt),yt.value=Nt,yt.state=2,He(yt,!0))},bt=function(yt,Nt,kt){if(!yt.done){yt.done=!0,kt&&(yt=kt);try{if(yt.facade===Nt)throw new xe("Promise can't be resolved itself");var Gt=ie(Nt);Gt?Q(function(){var fr={done:!1};try{g(Gt,Nt,Je(bt,fr,yt),Je(Ze,fr,yt))}catch(Tr){Ze(fr,Tr,yt)}}):(yt.value=Nt,yt.state=1,He(yt,!1))}catch(fr){Ze({done:!1},fr,yt)}}};if(z&&(J=(de=function(yt){O(this,J),S(yt),g(a,this);var Nt=N(this);try{yt(Je(bt,Nt),Je(Ze,Nt))}catch(kt){Ze(Nt,kt)}}).prototype,(a=function(yt){U(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Ae,rejection:!1,state:0,value:void 0})}).prototype=m(J,"then",function(yt,Nt){var kt=N(this),Gt=pe(V(this,de));return kt.parent=!0,Gt.ok=!B(yt)||yt,Gt.fail=B(Nt)&&Nt,Gt.domain=p?Ue.domain:void 0,kt.state===0?kt.reactions.add(Gt):Q(function(){Be(Gt,kt)}),Gt.promise}),l=function(){var yt=new a,Nt=N(yt);this.promise=yt,this.resolve=Je(bt,Nt),this.reject=Je(Ze,Nt)},Z.f=pe=function(yt){return yt===de||yt===void 0?new l(yt):Oe(yt)},!f&&B(ce)&&Y!==Object.prototype)){t=Y.then,R||m(Y,"then",function(yt,Nt){var kt=this;return new de(function(Gt,fr){g(t,kt,Gt,fr)}).then(yt,Nt)},{unsafe:!0});try{delete Y.constructor}catch{}b&&b(Y,J)}h({global:!0,constructor:!0,wrap:!0,forced:z},{Promise:de}),x(de,"Promise",!1,!0),v("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/is-pure"),t=e("../internals/promise-native-constructor"),h=e("../internals/fails"),f=e("../internals/get-built-in"),p=e("../internals/is-callable"),_=e("../internals/species-constructor"),g=e("../internals/promise-resolve"),m=e("../internals/define-built-in"),b=t&&t.prototype;if(a({target:"Promise",proto:!0,real:!0,forced:!!t&&h(function(){b.finally.call({then:function(){}},function(){})})},{finally:function(v){var S=_(this,f("Promise")),B=p(v);return this.then(B?function(F){return g(S,v()).then(function(){return F})}:v,B?function(F){return g(S,v()).then(function(){throw F})}:v)}}),!l&&p(t)){var x=f("Promise").prototype.finally;b.finally!==x&&m(b,"finally",x,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(e,i,o){e("../modules/es.promise.constructor"),e("../modules/es.promise.all"),e("../modules/es.promise.catch"),e("../modules/es.promise.race"),e("../modules/es.promise.reject"),e("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/function-call"),t=e("../internals/a-callable"),h=e("../internals/new-promise-capability"),f=e("../internals/perform"),p=e("../internals/iterate");a({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{race:function(_){var g=this,m=h.f(g),b=m.reject,x=f(function(){var v=t(g.resolve);p(_,function(S){l(v,g,S).then(m.resolve,b)})});return x.error&&b(x.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/function-call"),t=e("../internals/new-promise-capability");a({target:"Promise",stat:!0,forced:e("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(h){var f=t.f(this);return l(f.reject,void 0,h),f.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/get-built-in"),t=e("../internals/is-pure"),h=e("../internals/promise-native-constructor"),f=e("../internals/promise-constructor-detection").CONSTRUCTOR,p=e("../internals/promise-resolve"),_=l("Promise"),g=t&&!f;a({target:"Promise",stat:!0,forced:t||f},{resolve:function(m){return p(g&&this===_?h:this,m)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/function-uncurry-this"),t=e("../internals/to-absolute-index"),h=RangeError,f=String.fromCharCode,p=String.fromCodePoint,_=l([].join);a({target:"String",stat:!0,arity:1,forced:!!p&&p.length!==1},{fromCodePoint:function(g){for(var m,b=[],x=arguments.length,v=0;x>v;){if(m=+arguments[v++],t(m,1114111)!==m)throw new h(m+" is not a valid code point");b[v]=m<65536?f(m):f(55296+((m-=65536)>>10),m%1024+56320)}return _(b,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/function-uncurry-this"),t=e("../internals/not-a-regexp"),h=e("../internals/require-object-coercible"),f=e("../internals/to-string"),p=e("../internals/correct-is-regexp-logic"),_=l("".indexOf);a({target:"String",proto:!0,forced:!p("includes")},{includes:function(g){return!!~_(f(h(this)),f(t(g)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(e,i,o){e("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/global"),t=e("../internals/function-call"),h=e("../internals/function-uncurry-this"),f=e("../internals/is-pure"),p=e("../internals/descriptors"),_=e("../internals/symbol-constructor-detection"),g=e("../internals/fails"),m=e("../internals/has-own-property"),b=e("../internals/object-is-prototype-of"),x=e("../internals/an-object"),v=e("../internals/to-indexed-object"),S=e("../internals/to-property-key"),B=e("../internals/to-string"),F=e("../internals/create-property-descriptor"),O=e("../internals/object-create"),V=e("../internals/object-keys"),X=e("../internals/object-get-own-property-names"),Q=e("../internals/object-get-own-property-names-external"),ee=e("../internals/object-get-own-property-symbols"),ne=e("../internals/object-get-own-property-descriptor"),Ae=e("../internals/object-define-property"),fe=e("../internals/object-define-properties"),ce=e("../internals/object-property-is-enumerable"),G=e("../internals/define-built-in"),Z=e("../internals/define-built-in-accessor"),z=e("../internals/shared"),k=e("../internals/shared-key"),R=e("../internals/hidden-keys"),N=e("../internals/uid"),U=e("../internals/well-known-symbol"),Y=e("../internals/well-known-symbol-wrapped"),de=e("../internals/well-known-symbol-define"),J=e("../internals/symbol-define-to-primitive"),xe=e("../internals/set-to-string-tag"),Te=e("../internals/internal-state"),Ue=e("../internals/array-iteration").forEach,pe=k("hidden"),Oe=Te.set,re=Te.getterFor("Symbol"),ie=Object.prototype,Be=l.Symbol,He=Be&&Be.prototype,Ge=l.RangeError,Ne=l.TypeError,st=l.QObject,ot=ne.f,Je=Ae.f,Ze=Q.f,bt=ce.f,yt=h([].push),Nt=z("symbols"),kt=z("op-symbols"),Gt=z("wks"),fr=!st||!st.prototype||!st.prototype.findChild,Tr=function(Yt,mr,Mr){var sn=ot(ie,mr);sn&&delete ie[mr],Je(Yt,mr,Mr),sn&&Yt!==ie&&Je(ie,mr,sn)},yr=p&&g(function(){return O(Je({},"a",{get:function(){return Je(this,"a",{value:7}).a}})).a!==7})?Tr:Je,Dr=function(Yt,mr){var Mr=Nt[Yt]=O(He);return Oe(Mr,{type:"Symbol",tag:Yt,description:mr}),p||(Mr.description=mr),Mr},jt=function(Yt,mr,Mr){Yt===ie&&jt(kt,mr,Mr),x(Yt);var sn=S(mr);return x(Mr),m(Nt,sn)?(Mr.enumerable?(m(Yt,pe)&&Yt[pe][sn]&&(Yt[pe][sn]=!1),Mr=O(Mr,{enumerable:F(0,!1)})):(m(Yt,pe)||Je(Yt,pe,F(1,{})),Yt[pe][sn]=!0),yr(Yt,sn,Mr)):Je(Yt,sn,Mr)},Jt=function(Yt,mr){x(Yt);var Mr=v(mr),sn=V(Mr).concat(ur(Mr));return Ue(sn,function(Un){p&&!t(pr,Mr,Un)||jt(Yt,Un,Mr[Un])}),Yt},pr=function(Yt){var mr=S(Yt),Mr=t(bt,this,mr);return!(this===ie&&m(Nt,mr)&&!m(kt,mr))&&(!(Mr||!m(this,mr)||!m(Nt,mr)||m(this,pe)&&this[pe][mr])||Mr)},Ft=function(Yt,mr){var Mr=v(Yt),sn=S(mr);if(Mr!==ie||!m(Nt,sn)||m(kt,sn)){var Un=ot(Mr,sn);return!Un||!m(Nt,sn)||m(Mr,pe)&&Mr[pe][sn]||(Un.enumerable=!0),Un}},er=function(Yt){var mr=Ze(v(Yt)),Mr=[];return Ue(mr,function(sn){m(Nt,sn)||m(R,sn)||yt(Mr,sn)}),Mr},ur=function(Yt){var mr=Yt===ie,Mr=Ze(mr?kt:v(Yt)),sn=[];return Ue(Mr,function(Un){!m(Nt,Un)||mr&&!m(ie,Un)||yt(sn,Nt[Un])}),sn};_||(G(He=(Be=function(){if(b(He,this))throw new Ne("Symbol is not a constructor");var Yt=arguments.length&&arguments[0]!==void 0?B(arguments[0]):void 0,mr=N(Yt),Mr=function(sn){this===ie&&t(Mr,kt,sn),m(this,pe)&&m(this[pe],mr)&&(this[pe][mr]=!1);var Un=F(1,sn);try{yr(this,mr,Un)}catch(wn){if(!(wn instanceof Ge))throw wn;Tr(this,mr,Un)}};return p&&fr&&yr(ie,mr,{configurable:!0,set:Mr}),Dr(mr,Yt)}).prototype,"toString",function(){return re(this).tag}),G(Be,"withoutSetter",function(Yt){return Dr(N(Yt),Yt)}),ce.f=pr,Ae.f=jt,fe.f=Jt,ne.f=Ft,X.f=Q.f=er,ee.f=ur,Y.f=function(Yt){return Dr(U(Yt),Yt)},p&&(Z(He,"description",{configurable:!0,get:function(){return re(this).description}}),f||G(ie,"propertyIsEnumerable",pr,{unsafe:!0}))),a({global:!0,constructor:!0,wrap:!0,forced:!_,sham:!_},{Symbol:Be}),Ue(V(Gt),function(Yt){de(Yt)}),a({target:"Symbol",stat:!0,forced:!_},{useSetter:function(){fr=!0},useSimple:function(){fr=!1}}),a({target:"Object",stat:!0,forced:!_,sham:!p},{create:function(Yt,mr){return mr===void 0?O(Yt):Jt(O(Yt),mr)},defineProperty:jt,defineProperties:Jt,getOwnPropertyDescriptor:Ft}),a({target:"Object",stat:!0,forced:!_},{getOwnPropertyNames:er}),J(),xe(Be,"Symbol"),R[pe]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/get-built-in"),t=e("../internals/has-own-property"),h=e("../internals/to-string"),f=e("../internals/shared"),p=e("../internals/symbol-registry-detection"),_=f("string-to-symbol-registry"),g=f("symbol-to-string-registry");a({target:"Symbol",stat:!0,forced:!p},{for:function(m){var b=h(m);if(t(_,b))return _[b];var x=l("Symbol")(b);return _[b]=x,g[x]=b,x}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(e,i,o){e("../modules/es.symbol.constructor"),e("../modules/es.symbol.for"),e("../modules/es.symbol.key-for"),e("../modules/es.json.stringify"),e("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(e,i,o){var a=e("../internals/export"),l=e("../internals/has-own-property"),t=e("../internals/is-symbol"),h=e("../internals/try-to-string"),f=e("../internals/shared"),p=e("../internals/symbol-registry-detection"),_=f("symbol-to-string-registry");a({target:"Symbol",stat:!0,forced:!p},{keyFor:function(g){if(!t(g))throw new TypeError(h(g)+" is not a symbol");if(l(_,g))return _[g]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(e,i,o){function a(l){return Object.prototype.toString.call(l)}o.isArray=function(l){return Array.isArray?Array.isArray(l):a(l)==="[object Array]"},o.isBoolean=function(l){return typeof l=="boolean"},o.isNull=function(l){return l===null},o.isNullOrUndefined=function(l){return l==null},o.isNumber=function(l){return typeof l=="number"},o.isString=function(l){return typeof l=="string"},o.isSymbol=function(l){return typeof l=="symbol"},o.isUndefined=function(l){return l===void 0},o.isRegExp=function(l){return a(l)==="[object RegExp]"},o.isObject=function(l){return typeof l=="object"&&l!==null},o.isDate=function(l){return a(l)==="[object Date]"},o.isError=function(l){return a(l)==="[object Error]"||l instanceof Error},o.isFunction=function(l){return typeof l=="function"},o.isPrimitive=function(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||typeof l=="symbol"||l===void 0},o.isBuffer=e("buffer").Buffer.isBuffer},{buffer:220}],384:[function(e,i,o){(function(a){(function(){var l=e("elliptic"),t=e("bn.js");i.exports=function(_){return new f(_)};var h={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function f(_){this.curveType=h[_],this.curveType||(this.curveType={name:_}),this.curve=new l.ec(this.curveType.name),this.keys=void 0}function p(_,g,m){Array.isArray(_)||(_=_.toArray());var b=new a(_);if(m&&b.length<m){var x=new a(m-b.length);x.fill(0),b=a.concat([x,b])}return g?b.toString(g):b}h.p224=h.secp224r1,h.p256=h.secp256r1=h.prime256v1,h.p192=h.secp192r1=h.prime192v1,h.p384=h.secp384r1,h.p521=h.secp521r1,f.prototype.generateKeys=function(_,g){return this.keys=this.curve.genKeyPair(),this.getPublicKey(_,g)},f.prototype.computeSecret=function(_,g,m){return g=g||"utf8",a.isBuffer(_)||(_=new a(_,g)),p(this.curve.keyFromPublic(_).getPublic().mul(this.keys.getPrivate()).getX(),m,this.curveType.byteLength)},f.prototype.getPublicKey=function(_,g){var m=this.keys.getPublic(g==="compressed",!0);return g==="hybrid"&&(m[m.length-1]%2?m[0]=7:m[0]=6),p(m,_)},f.prototype.getPrivateKey=function(_){return p(this.keys.getPrivate(),_)},f.prototype.setPublicKey=function(_,g){return g=g||"utf8",a.isBuffer(_)||(_=new a(_,g)),this.keys._importPublic(_),this},f.prototype.setPrivateKey=function(_,g){g=g||"utf8",a.isBuffer(_)||(_=new a(_,g));var m=new t(_);return m=m.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(m),this}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(e,i,o){arguments[4][184][0].apply(o,arguments)},{buffer:188,dup:184}],386:[function(e,i,o){var a=e("inherits"),l=e("md5.js"),t=e("ripemd160"),h=e("sha.js"),f=e("cipher-base");function p(_){f.call(this,"digest"),this._hash=_}a(p,f),p.prototype._update=function(_){this._hash.update(_)},p.prototype._final=function(){return this._hash.digest()},i.exports=function(_){return(_=_.toLowerCase())==="md5"?new l:_==="rmd160"||_==="ripemd160"?new t:new p(h(_))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(e,i,o){var a=e("md5.js");i.exports=function(l){return new a().update(l).digest()}},{"md5.js":450}],388:[function(e,i,o){var a=e("inherits"),l=e("./legacy"),t=e("cipher-base"),h=e("safe-buffer").Buffer,f=e("create-hash/md5"),p=e("ripemd160"),_=e("sha.js"),g=h.alloc(128);function m(b,x){t.call(this,"digest"),typeof x=="string"&&(x=h.from(x));var v=b==="sha512"||b==="sha384"?128:64;this._alg=b,this._key=x,x.length>v?x=(b==="rmd160"?new p:_(b)).update(x).digest():x.length<v&&(x=h.concat([x,g],v));for(var S=this._ipad=h.allocUnsafe(v),B=this._opad=h.allocUnsafe(v),F=0;F<v;F++)S[F]=54^x[F],B[F]=92^x[F];this._hash=b==="rmd160"?new p:_(b),this._hash.update(S)}a(m,t),m.prototype._update=function(b){this._hash.update(b)},m.prototype._final=function(){var b=this._hash.digest();return(this._alg==="rmd160"?new p:_(this._alg)).update(this._opad).update(b).digest()},i.exports=function(b,x){return(b=b.toLowerCase())==="rmd160"||b==="ripemd160"?new m("rmd160",x):b==="md5"?new l(f,x):new m(b,x)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(e,i,o){var a=e("inherits"),l=e("safe-buffer").Buffer,t=e("cipher-base"),h=l.alloc(128);function f(p,_){t.call(this,"digest"),typeof _=="string"&&(_=l.from(_)),this._alg=p,this._key=_,_.length>64?_=p(_):_.length<64&&(_=l.concat([_,h],64));for(var g=this._ipad=l.allocUnsafe(64),m=this._opad=l.allocUnsafe(64),b=0;b<64;b++)g[b]=54^_[b],m[b]=92^_[b];this._hash=[g]}a(f,t),f.prototype._update=function(p){this._hash.push(p)},f.prototype._final=function(){var p=this._alg(l.concat(this._hash));return this._alg(l.concat([this._opad,p]))},i.exports=f},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(e,i,o){o.randomBytes=o.rng=o.pseudoRandomBytes=o.prng=e("randombytes"),o.createHash=o.Hash=e("create-hash"),o.createHmac=o.Hmac=e("create-hmac");var a=e("browserify-sign/algos"),l=Object.keys(a),t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(l);o.getHashes=function(){return t};var h=e("pbkdf2");o.pbkdf2=h.pbkdf2,o.pbkdf2Sync=h.pbkdf2Sync;var f=e("browserify-cipher");o.Cipher=f.Cipher,o.createCipher=f.createCipher,o.Cipheriv=f.Cipheriv,o.createCipheriv=f.createCipheriv,o.Decipher=f.Decipher,o.createDecipher=f.createDecipher,o.Decipheriv=f.Decipheriv,o.createDecipheriv=f.createDecipheriv,o.getCiphers=f.getCiphers,o.listCiphers=f.listCiphers;var p=e("diffie-hellman");o.DiffieHellmanGroup=p.DiffieHellmanGroup,o.createDiffieHellmanGroup=p.createDiffieHellmanGroup,o.getDiffieHellman=p.getDiffieHellman,o.createDiffieHellman=p.createDiffieHellman,o.DiffieHellman=p.DiffieHellman;var _=e("browserify-sign");o.createSign=_.createSign,o.Sign=_.Sign,o.createVerify=_.createVerify,o.Verify=_.Verify,o.createECDH=e("create-ecdh");var g=e("public-encrypt");o.publicEncrypt=g.publicEncrypt,o.privateEncrypt=g.privateEncrypt,o.publicDecrypt=g.publicDecrypt,o.privateDecrypt=g.privateDecrypt;var m=e("randomfill");o.randomFill=m.randomFill,o.randomFillSync=m.randomFillSync,o.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},o.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(e,i,o){(function(a,l){typeof o=="object"&&i!==void 0?i.exports=l():(a=typeof globalThis<"u"?globalThis:a||self).dayjs=l()})(void 0,function(){var a=6e4,l=36e5,t="millisecond",h="second",f="minute",p="hour",_="day",g="week",m="month",b="quarter",x="year",v="date",S="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var R=["th","st","nd","rd"],N=k%100;return"["+k+(R[(N-20)%10]||R[N]||R[0])+"]"}},V=function(k,R,N){var U=String(k);return!U||U.length>=R?k:""+Array(R+1-U.length).join(N)+k},X={s:V,z:function(k){var R=-k.utcOffset(),N=Math.abs(R),U=Math.floor(N/60),Y=N%60;return(R<=0?"+":"-")+V(U,2,"0")+":"+V(Y,2,"0")},m:function k(R,N){if(R.date()<N.date())return-k(N,R);var U=12*(N.year()-R.year())+(N.month()-R.month()),Y=R.clone().add(U,m),de=N-Y<0,J=R.clone().add(U+(de?-1:1),m);return+(-(U+(N-Y)/(de?Y-J:J-Y))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:m,y:x,w:g,d:_,D:v,h:p,m:f,s:h,ms:t,Q:b}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},Q="en",ee={};ee[Q]=O;var ne="$isDayjsObject",Ae=function(k){return k instanceof Z||!(!k||!k[ne])},fe=function k(R,N,U){var Y;if(!R)return Q;if(typeof R=="string"){var de=R.toLowerCase();ee[de]&&(Y=de),N&&(ee[de]=N,Y=de);var J=R.split("-");if(!Y&&J.length>1)return k(J[0])}else{var xe=R.name;ee[xe]=R,Y=xe}return!U&&Y&&(Q=Y),Y||!U&&Q},ce=function(k,R){if(Ae(k))return k.clone();var N=typeof R=="object"?R:{};return N.date=k,N.args=arguments,new Z(N)},G=X;G.l=fe,G.i=Ae,G.w=function(k,R){return ce(k,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var Z=function(){function k(N){this.$L=fe(N.locale,null,!0),this.parse(N),this.$x=this.$x||N.x||{},this[ne]=!0}var R=k.prototype;return R.parse=function(N){this.$d=function(U){var Y=U.date,de=U.utc;if(Y===null)return new Date(NaN);if(G.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var J=Y.match(B);if(J){var xe=J[2]-1||0,Te=(J[7]||"0").substring(0,3);return de?new Date(Date.UTC(J[1],xe,J[3]||1,J[4]||0,J[5]||0,J[6]||0,Te)):new Date(J[1],xe,J[3]||1,J[4]||0,J[5]||0,J[6]||0,Te)}}return new Date(Y)}(N),this.init()},R.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},R.$utils=function(){return G},R.isValid=function(){return this.$d.toString()!==S},R.isSame=function(N,U){var Y=ce(N);return this.startOf(U)<=Y&&Y<=this.endOf(U)},R.isAfter=function(N,U){return ce(N)<this.startOf(U)},R.isBefore=function(N,U){return this.endOf(U)<ce(N)},R.$g=function(N,U,Y){return G.u(N)?this[U]:this.set(Y,N)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(N,U){var Y=this,de=!!G.u(U)||U,J=G.p(N),xe=function(He,Ge){var Ne=G.w(Y.$u?Date.UTC(Y.$y,Ge,He):new Date(Y.$y,Ge,He),Y);return de?Ne:Ne.endOf(_)},Te=function(He,Ge){return G.w(Y.toDate()[He].apply(Y.toDate("s"),(de?[0,0,0,0]:[23,59,59,999]).slice(Ge)),Y)},Ue=this.$W,pe=this.$M,Oe=this.$D,re="set"+(this.$u?"UTC":"");switch(J){case x:return de?xe(1,0):xe(31,11);case m:return de?xe(1,pe):xe(0,pe+1);case g:var ie=this.$locale().weekStart||0,Be=(Ue<ie?Ue+7:Ue)-ie;return xe(de?Oe-Be:Oe+(6-Be),pe);case _:case v:return Te(re+"Hours",0);case p:return Te(re+"Minutes",1);case f:return Te(re+"Seconds",2);case h:return Te(re+"Milliseconds",3);default:return this.clone()}},R.endOf=function(N){return this.startOf(N,!1)},R.$set=function(N,U){var Y,de=G.p(N),J="set"+(this.$u?"UTC":""),xe=(Y={},Y[_]=J+"Date",Y[v]=J+"Date",Y[m]=J+"Month",Y[x]=J+"FullYear",Y[p]=J+"Hours",Y[f]=J+"Minutes",Y[h]=J+"Seconds",Y[t]=J+"Milliseconds",Y)[de],Te=de===_?this.$D+(U-this.$W):U;if(de===m||de===x){var Ue=this.clone().set(v,1);Ue.$d[xe](Te),Ue.init(),this.$d=Ue.set(v,Math.min(this.$D,Ue.daysInMonth())).$d}else xe&&this.$d[xe](Te);return this.init(),this},R.set=function(N,U){return this.clone().$set(N,U)},R.get=function(N){return this[G.p(N)]()},R.add=function(N,U){var Y,de=this;N=Number(N);var J=G.p(U),xe=function(pe){var Oe=ce(de);return G.w(Oe.date(Oe.date()+Math.round(pe*N)),de)};if(J===m)return this.set(m,this.$M+N);if(J===x)return this.set(x,this.$y+N);if(J===_)return xe(1);if(J===g)return xe(7);var Te=(Y={},Y[f]=a,Y[p]=l,Y[h]=1e3,Y)[J]||1,Ue=this.$d.getTime()+N*Te;return G.w(Ue,this)},R.subtract=function(N,U){return this.add(-1*N,U)},R.format=function(N){var U=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||S;var de=N||"YYYY-MM-DDTHH:mm:ssZ",J=G.z(this),xe=this.$H,Te=this.$m,Ue=this.$M,pe=Y.weekdays,Oe=Y.months,re=Y.meridiem,ie=function(Ge,Ne,st,ot){return Ge&&(Ge[Ne]||Ge(U,de))||st[Ne].slice(0,ot)},Be=function(Ge){return G.s(xe%12||12,Ge,"0")},He=re||function(Ge,Ne,st){var ot=Ge<12?"AM":"PM";return st?ot.toLowerCase():ot};return de.replace(F,function(Ge,Ne){return Ne||function(st){switch(st){case"YY":return String(U.$y).slice(-2);case"YYYY":return G.s(U.$y,4,"0");case"M":return Ue+1;case"MM":return G.s(Ue+1,2,"0");case"MMM":return ie(Y.monthsShort,Ue,Oe,3);case"MMMM":return ie(Oe,Ue);case"D":return U.$D;case"DD":return G.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return ie(Y.weekdaysMin,U.$W,pe,2);case"ddd":return ie(Y.weekdaysShort,U.$W,pe,3);case"dddd":return pe[U.$W];case"H":return String(xe);case"HH":return G.s(xe,2,"0");case"h":return Be(1);case"hh":return Be(2);case"a":return He(xe,Te,!0);case"A":return He(xe,Te,!1);case"m":return String(Te);case"mm":return G.s(Te,2,"0");case"s":return String(U.$s);case"ss":return G.s(U.$s,2,"0");case"SSS":return G.s(U.$ms,3,"0");case"Z":return J}return null}(Ge)||J.replace(":","")})},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(N,U,Y){var de,J=this,xe=G.p(U),Te=ce(N),Ue=(Te.utcOffset()-this.utcOffset())*a,pe=this-Te,Oe=function(){return G.m(J,Te)};switch(xe){case x:de=Oe()/12;break;case m:de=Oe();break;case b:de=Oe()/3;break;case g:de=(pe-Ue)/6048e5;break;case _:de=(pe-Ue)/864e5;break;case p:de=pe/l;break;case f:de=pe/a;break;case h:de=pe/1e3;break;default:de=pe}return Y?de:G.a(de)},R.daysInMonth=function(){return this.endOf(m).$D},R.$locale=function(){return ee[this.$L]},R.locale=function(N,U){if(!N)return this.$L;var Y=this.clone(),de=fe(N,U,!0);return de&&(Y.$L=de),Y},R.clone=function(){return G.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},k}(),z=Z.prototype;return ce.prototype=z,[["$ms",t],["$s",h],["$m",f],["$H",p],["$W",_],["$M",m],["$y",x],["$D",v]].forEach(function(k){z[k[1]]=function(R){return this.$g(R,k[0],k[1])}}),ce.extend=function(k,R){return k.$i||(k(R,Z,ce),k.$i=!0),ce},ce.locale=fe,ce.isDayjs=Ae,ce.unix=function(k){return ce(1e3*k)},ce.en=ee[Q],ce.Ls=ee,ce.p={},ce})},{}],392:[function(e,i,o){(function(a,l){typeof o=="object"&&i!==void 0?i.exports=l():(a=typeof globalThis<"u"?globalThis:a||self).dayjs_plugin_customParseFormat=l()})(void 0,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},l=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,t=/\d\d/,h=/\d\d?/,f=/\d*[^-_:/,()\s\d]+/,p={},_=function(B){return(B=+B)+(B>68?1900:2e3)},g=function(B){return function(F){this[B]=+F}},m=[/[+-]\d\d:?(\d\d)?|Z/,function(B){(this.zone||(this.zone={})).offset=function(F){if(!F||F==="Z")return 0;var O=F.match(/([+-]|\d\d)/g),V=60*O[1]+(+O[2]||0);return V===0?0:O[0]==="+"?-V:V}(B)}],b=function(B){var F=p[B];return F&&(F.indexOf?F:F.s.concat(F.f))},x=function(B,F){var O,V=p.meridiem;if(V){for(var X=1;X<=24;X+=1)if(B.indexOf(V(X,0,F))>-1){O=X>12;break}}else O=B===(F?"pm":"PM");return O},v={A:[f,function(B){this.afternoon=x(B,!1)}],a:[f,function(B){this.afternoon=x(B,!0)}],S:[/\d/,function(B){this.milliseconds=100*+B}],SS:[t,function(B){this.milliseconds=10*+B}],SSS:[/\d{3}/,function(B){this.milliseconds=+B}],s:[h,g("seconds")],ss:[h,g("seconds")],m:[h,g("minutes")],mm:[h,g("minutes")],H:[h,g("hours")],h:[h,g("hours")],HH:[h,g("hours")],hh:[h,g("hours")],D:[h,g("day")],DD:[t,g("day")],Do:[f,function(B){var F=p.ordinal,O=B.match(/\d+/);if(this.day=O[0],F)for(var V=1;V<=31;V+=1)F(V).replace(/\[|\]/g,"")===B&&(this.day=V)}],M:[h,g("month")],MM:[t,g("month")],MMM:[f,function(B){var F=b("months"),O=(b("monthsShort")||F.map(function(V){return V.slice(0,3)})).indexOf(B)+1;if(O<1)throw new Error;this.month=O%12||O}],MMMM:[f,function(B){var F=b("months").indexOf(B)+1;if(F<1)throw new Error;this.month=F%12||F}],Y:[/[+-]?\d+/,g("year")],YY:[t,function(B){this.year=_(B)}],YYYY:[/\d{4}/,g("year")],Z:m,ZZ:m};function S(B){var F,O;F=B,O=p&&p.formats;for(var V=(B=F.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ce,G,Z){var z=Z&&Z.toUpperCase();return G||O[Z]||a[Z]||O[z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(k,R,N){return R||N.slice(1)})})).match(l),X=V.length,Q=0;Q<X;Q+=1){var ee=V[Q],ne=v[ee],Ae=ne&&ne[0],fe=ne&&ne[1];V[Q]=fe?{regex:Ae,parser:fe}:ee.replace(/^\[|\]$/g,"")}return function(ce){for(var G={},Z=0,z=0;Z<X;Z+=1){var k=V[Z];if(typeof k=="string")z+=k.length;else{var R=k.regex,N=k.parser,U=ce.slice(z),Y=R.exec(U)[0];N.call(G,Y),ce=ce.replace(Y,"")}}return function(de){var J=de.afternoon;if(J!==void 0){var xe=de.hours;J?xe<12&&(de.hours+=12):xe===12&&(de.hours=0),delete de.afternoon}}(G),G}}return function(B,F,O){O.p.customParseFormat=!0,B&&B.parseTwoDigitYear&&(_=B.parseTwoDigitYear);var V=F.prototype,X=V.parse;V.parse=function(Q){var ee=Q.date,ne=Q.utc,Ae=Q.args;this.$u=ne;var fe=Ae[1];if(typeof fe=="string"){var ce=Ae[2]===!0,G=Ae[3]===!0,Z=ce||G,z=Ae[2];G&&(z=Ae[2]),p=this.$locale(),!ce&&z&&(p=O.Ls[z]),this.$d=function(U,Y,de){try{if(["x","X"].indexOf(Y)>-1)return new Date((Y==="X"?1e3:1)*U);var J=S(Y)(U),xe=J.year,Te=J.month,Ue=J.day,pe=J.hours,Oe=J.minutes,re=J.seconds,ie=J.milliseconds,Be=J.zone,He=new Date,Ge=Ue||(xe||Te?1:He.getDate()),Ne=xe||He.getFullYear(),st=0;xe&&!Te||(st=Te>0?Te-1:He.getMonth());var ot=pe||0,Je=Oe||0,Ze=re||0,bt=ie||0;return Be?new Date(Date.UTC(Ne,st,Ge,ot,Je,Ze,bt+60*Be.offset*1e3)):de?new Date(Date.UTC(Ne,st,Ge,ot,Je,Ze,bt)):new Date(Ne,st,Ge,ot,Je,Ze,bt)}catch{return new Date("")}}(ee,fe,ne),this.init(),z&&z!==!0&&(this.$L=this.locale(z).$L),Z&&ee!=this.format(fe)&&(this.$d=new Date("")),p={}}else if(fe instanceof Array)for(var k=fe.length,R=1;R<=k;R+=1){Ae[1]=fe[R-1];var N=O.apply(this,Ae);if(N.isValid()){this.$d=N.$d,this.$L=N.$L,this.init();break}R===k&&(this.$d=new Date(""))}else X.call(this,Q)}}})},{}],393:[function(e,i,o){(function(a,l){typeof o=="object"&&i!==void 0?i.exports=l():(a=typeof globalThis<"u"?globalThis:a||self).dayjs_plugin_utc=l()})(void 0,function(){var a="minute",l=/[+-]\d\d(?::?\d\d)?/g,t=/([+-]|\d\d)/g;return function(h,f,p){var _=f.prototype;p.utc=function(B){var F={date:B,utc:!0,args:arguments};return new f(F)},_.utc=function(B){var F=p(this.toDate(),{locale:this.$L,utc:!0});return B?F.add(this.utcOffset(),a):F},_.local=function(){return p(this.toDate(),{locale:this.$L,utc:!1})};var g=_.parse;_.parse=function(B){B.utc&&(this.$u=!0),this.$utils().u(B.$offset)||(this.$offset=B.$offset),g.call(this,B)};var m=_.init;_.init=function(){if(this.$u){var B=this.$d;this.$y=B.getUTCFullYear(),this.$M=B.getUTCMonth(),this.$D=B.getUTCDate(),this.$W=B.getUTCDay(),this.$H=B.getUTCHours(),this.$m=B.getUTCMinutes(),this.$s=B.getUTCSeconds(),this.$ms=B.getUTCMilliseconds()}else m.call(this)};var b=_.utcOffset;_.utcOffset=function(B,F){var O=this.$utils().u;if(O(B))return this.$u?0:O(this.$offset)?b.call(this):this.$offset;if(typeof B=="string"&&(B=function(ee){ee===void 0&&(ee="");var ne=ee.match(l);if(!ne)return null;var Ae=(""+ne[0]).match(t)||["-",0,0],fe=Ae[0],ce=60*+Ae[1]+ +Ae[2];return ce===0?0:fe==="+"?ce:-ce}(B))===null)return this;var V=Math.abs(B)<=16?60*B:B,X=this;if(F)return X.$offset=V,X.$u=B===0,X;if(B!==0){var Q=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(X=this.local().add(V+Q,a)).$offset=V,X.$x.$localOffset=Q}else X=this.utc();return X};var x=_.format;_.format=function(B){var F=B||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return x.call(this,F)},_.valueOf=function(){var B=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*B},_.isUTC=function(){return!!this.$u},_.toISOString=function(){return this.toDate().toISOString()},_.toString=function(){return this.toDate().toUTCString()};var v=_.toDate;_.toDate=function(B){return B==="s"&&this.$offset?p(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():v.call(this)};var S=_.diff;_.diff=function(B,F,O){if(B&&this.$u===B.$u)return S.call(this,B,F,O);var V=this.local(),X=p(B).local();return S.call(V,X,F,O)}}})},{}],394:[function(e,i,o){o.utils=e("./des/utils"),o.Cipher=e("./des/cipher"),o.DES=e("./des/des"),o.CBC=e("./des/cbc"),o.EDE=e("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(e,i,o){var a=e("minimalistic-assert"),l=e("inherits"),t={};function h(f){a.equal(f.length,8,"Invalid IV length"),this.iv=new Array(8);for(var p=0;p<this.iv.length;p++)this.iv[p]=f[p]}o.instantiate=function(f){function p(b){f.call(this,b),this._cbcInit()}l(p,f);for(var _=Object.keys(t),g=0;g<_.length;g++){var m=_[g];p.prototype[m]=t[m]}return p.create=function(b){return new p(b)},p},t._cbcInit=function(){var f=new h(this.options.iv);this._cbcState=f},t._update=function(f,p,_,g){var m=this._cbcState,b=this.constructor.super_.prototype,x=m.iv;if(this.type==="encrypt"){for(var v=0;v<this.blockSize;v++)x[v]^=f[p+v];for(b._update.call(this,x,0,_,g),v=0;v<this.blockSize;v++)x[v]=_[g+v]}else{for(b._update.call(this,f,p,_,g),v=0;v<this.blockSize;v++)_[g+v]^=x[v];for(v=0;v<this.blockSize;v++)x[v]=f[p+v]}}},{inherits:440,"minimalistic-assert":453}],396:[function(e,i,o){var a=e("minimalistic-assert");function l(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=t.padding!==!1}i.exports=l,l.prototype._init=function(){},l.prototype.update=function(t){return t.length===0?[]:this.type==="decrypt"?this._updateDecrypt(t):this._updateEncrypt(t)},l.prototype._buffer=function(t,h){for(var f=Math.min(this.buffer.length-this.bufferOff,t.length-h),p=0;p<f;p++)this.buffer[this.bufferOff+p]=t[h+p];return this.bufferOff+=f,f},l.prototype._flushBuffer=function(t,h){return this._update(this.buffer,0,t,h),this.bufferOff=0,this.blockSize},l.prototype._updateEncrypt=function(t){var h=0,f=0,p=(this.bufferOff+t.length)/this.blockSize|0,_=new Array(p*this.blockSize);this.bufferOff!==0&&(h+=this._buffer(t,h),this.bufferOff===this.buffer.length&&(f+=this._flushBuffer(_,f)));for(var g=t.length-(t.length-h)%this.blockSize;h<g;h+=this.blockSize)this._update(t,h,_,f),f+=this.blockSize;for(;h<t.length;h++,this.bufferOff++)this.buffer[this.bufferOff]=t[h];return _},l.prototype._updateDecrypt=function(t){for(var h=0,f=0,p=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,_=new Array(p*this.blockSize);p>0;p--)h+=this._buffer(t,h),f+=this._flushBuffer(_,f);return h+=this._buffer(t,h),_},l.prototype.final=function(t){var h,f;return t&&(h=this.update(t)),f=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),h?h.concat(f):f},l.prototype._pad=function(t,h){if(h===0)return!1;for(;h<t.length;)t[h++]=0;return!0},l.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},l.prototype._unpad=function(t){return t},l.prototype._finalDecrypt=function(){a.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},{"minimalistic-assert":453}],397:[function(e,i,o){var a=e("minimalistic-assert"),l=e("inherits"),t=e("./utils"),h=e("./cipher");function f(){this.tmp=new Array(2),this.keys=null}function p(g){h.call(this,g);var m=new f;this._desState=m,this.deriveKeys(m,g.key)}l(p,h),i.exports=p,p.create=function(g){return new p(g)};var _=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];p.prototype.deriveKeys=function(g,m){g.keys=new Array(32),a.equal(m.length,this.blockSize,"Invalid key length");var b=t.readUInt32BE(m,0),x=t.readUInt32BE(m,4);t.pc1(b,x,g.tmp,0),b=g.tmp[0],x=g.tmp[1];for(var v=0;v<g.keys.length;v+=2){var S=_[v>>>1];b=t.r28shl(b,S),x=t.r28shl(x,S),t.pc2(b,x,g.keys,v)}},p.prototype._update=function(g,m,b,x){var v=this._desState,S=t.readUInt32BE(g,m),B=t.readUInt32BE(g,m+4);t.ip(S,B,v.tmp,0),S=v.tmp[0],B=v.tmp[1],this.type==="encrypt"?this._encrypt(v,S,B,v.tmp,0):this._decrypt(v,S,B,v.tmp,0),S=v.tmp[0],B=v.tmp[1],t.writeUInt32BE(b,S,x),t.writeUInt32BE(b,B,x+4)},p.prototype._pad=function(g,m){if(this.padding===!1)return!1;for(var b=g.length-m,x=m;x<g.length;x++)g[x]=b;return!0},p.prototype._unpad=function(g){if(this.padding===!1)return g;for(var m=g[g.length-1],b=g.length-m;b<g.length;b++)a.equal(g[b],m);return g.slice(0,g.length-m)},p.prototype._encrypt=function(g,m,b,x,v){for(var S=m,B=b,F=0;F<g.keys.length;F+=2){var O=g.keys[F],V=g.keys[F+1];t.expand(B,g.tmp,0),O^=g.tmp[0],V^=g.tmp[1];var X=t.substitute(O,V),Q=B;B=(S^t.permute(X))>>>0,S=Q}t.rip(B,S,x,v)},p.prototype._decrypt=function(g,m,b,x,v){for(var S=b,B=m,F=g.keys.length-2;F>=0;F-=2){var O=g.keys[F],V=g.keys[F+1];t.expand(S,g.tmp,0),O^=g.tmp[0],V^=g.tmp[1];var X=t.substitute(O,V),Q=S;S=(B^t.permute(X))>>>0,B=Q}t.rip(S,B,x,v)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(e,i,o){var a=e("minimalistic-assert"),l=e("inherits"),t=e("./cipher"),h=e("./des");function f(_,g){a.equal(g.length,24,"Invalid key length");var m=g.slice(0,8),b=g.slice(8,16),x=g.slice(16,24);this.ciphers=_==="encrypt"?[h.create({type:"encrypt",key:m}),h.create({type:"decrypt",key:b}),h.create({type:"encrypt",key:x})]:[h.create({type:"decrypt",key:x}),h.create({type:"encrypt",key:b}),h.create({type:"decrypt",key:m})]}function p(_){t.call(this,_);var g=new f(this.type,this.options.key);this._edeState=g}l(p,t),i.exports=p,p.create=function(_){return new p(_)},p.prototype._update=function(_,g,m,b){var x=this._edeState;x.ciphers[0]._update(_,g,m,b),x.ciphers[1]._update(m,b,m,b),x.ciphers[2]._update(m,b,m,b)},p.prototype._pad=h.prototype._pad,p.prototype._unpad=h.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(e,i,o){o.readUInt32BE=function(h,f){return(h[0+f]<<24|h[1+f]<<16|h[2+f]<<8|h[3+f])>>>0},o.writeUInt32BE=function(h,f,p){h[0+p]=f>>>24,h[1+p]=f>>>16&255,h[2+p]=f>>>8&255,h[3+p]=255&f},o.ip=function(h,f,p,_){for(var g=0,m=0,b=6;b>=0;b-=2){for(var x=0;x<=24;x+=8)g<<=1,g|=f>>>x+b&1;for(x=0;x<=24;x+=8)g<<=1,g|=h>>>x+b&1}for(b=6;b>=0;b-=2){for(x=1;x<=25;x+=8)m<<=1,m|=f>>>x+b&1;for(x=1;x<=25;x+=8)m<<=1,m|=h>>>x+b&1}p[_+0]=g>>>0,p[_+1]=m>>>0},o.rip=function(h,f,p,_){for(var g=0,m=0,b=0;b<4;b++)for(var x=24;x>=0;x-=8)g<<=1,g|=f>>>x+b&1,g<<=1,g|=h>>>x+b&1;for(b=4;b<8;b++)for(x=24;x>=0;x-=8)m<<=1,m|=f>>>x+b&1,m<<=1,m|=h>>>x+b&1;p[_+0]=g>>>0,p[_+1]=m>>>0},o.pc1=function(h,f,p,_){for(var g=0,m=0,b=7;b>=5;b--){for(var x=0;x<=24;x+=8)g<<=1,g|=f>>x+b&1;for(x=0;x<=24;x+=8)g<<=1,g|=h>>x+b&1}for(x=0;x<=24;x+=8)g<<=1,g|=f>>x+b&1;for(b=1;b<=3;b++){for(x=0;x<=24;x+=8)m<<=1,m|=f>>x+b&1;for(x=0;x<=24;x+=8)m<<=1,m|=h>>x+b&1}for(x=0;x<=24;x+=8)m<<=1,m|=h>>x+b&1;p[_+0]=g>>>0,p[_+1]=m>>>0},o.r28shl=function(h,f){return h<<f&268435455|h>>>28-f};var a=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];o.pc2=function(h,f,p,_){for(var g=0,m=0,b=a.length>>>1,x=0;x<b;x++)g<<=1,g|=h>>>a[x]&1;for(x=b;x<a.length;x++)m<<=1,m|=f>>>a[x]&1;p[_+0]=g>>>0,p[_+1]=m>>>0},o.expand=function(h,f,p){var _=0,g=0;_=(1&h)<<5|h>>>27;for(var m=23;m>=15;m-=4)_<<=6,_|=h>>>m&63;for(m=11;m>=3;m-=4)g|=h>>>m&63,g<<=6;g|=(31&h)<<1|h>>>31,f[p+0]=_>>>0,f[p+1]=g>>>0};var l=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];o.substitute=function(h,f){for(var p=0,_=0;_<4;_++)p<<=4,p|=l[64*_+(h>>>18-6*_&63)];for(_=0;_<4;_++)p<<=4,p|=l[256+64*_+(f>>>18-6*_&63)];return p>>>0};var t=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];o.permute=function(h){for(var f=0,p=0;p<t.length;p++)f<<=1,f|=h>>>t[p]&1;return f>>>0},o.padSplit=function(h,f,p){for(var _=h.toString(2);_.length<f;)_="0"+_;for(var g=[],m=0;m<f;m+=p)g.push(_.slice(m,m+p));return g.join(" ")}},{}],400:[function(e,i,o){(function(a){(function(){var l=e("./lib/generatePrime"),t=e("./lib/primes.json"),h=e("./lib/dh"),f={binary:!0,hex:!0,base64:!0};o.DiffieHellmanGroup=o.createDiffieHellmanGroup=o.getDiffieHellman=function(p){var _=new a(t[p].prime,"hex"),g=new a(t[p].gen,"hex");return new h(_,g)},o.createDiffieHellman=o.DiffieHellman=function p(_,g,m,b){return a.isBuffer(g)||f[g]===void 0?p(_,"binary",g,m):(g=g||"binary",b=b||"binary",m=m||new a([2]),a.isBuffer(m)||(m=new a(m,b)),typeof _=="number"?new h(l(_,m),m,!0):(a.isBuffer(_)||(_=new a(_,g)),new h(_,m,!0)))}}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(e,i,o){(function(a){(function(){var l=e("bn.js"),t=new(e("miller-rabin")),h=new l(24),f=new l(11),p=new l(10),_=new l(3),g=new l(7),m=e("./generatePrime"),b=e("randombytes");function x(O,V){return V=V||"utf8",a.isBuffer(O)||(O=new a(O,V)),this._pub=new l(O),this}function v(O,V){return V=V||"utf8",a.isBuffer(O)||(O=new a(O,V)),this._priv=new l(O),this}i.exports=B;var S={};function B(O,V,X){this.setGenerator(V),this.__prime=new l(O),this._prime=l.mont(this.__prime),this._primeLen=O.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,X?(this.setPublicKey=x,this.setPrivateKey=v):this._primeCode=8}function F(O,V){var X=new a(O.toArray());return V?X.toString(V):X}Object.defineProperty(B.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(O,V){var X=V.toString("hex"),Q=[X,O.toString(16)].join("_");if(Q in S)return S[Q];var ee,ne=0;if(O.isEven()||!m.simpleSieve||!m.fermatTest(O)||!t.test(O))return ne+=1,ne+=X==="02"||X==="05"?8:4,S[Q]=ne,ne;switch(t.test(O.shrn(1))||(ne+=2),X){case"02":O.mod(h).cmp(f)&&(ne+=8);break;case"05":(ee=O.mod(p)).cmp(_)&&ee.cmp(g)&&(ne+=8);break;default:ne+=4}return S[Q]=ne,ne}(this.__prime,this.__gen)),this._primeCode}}),B.prototype.generateKeys=function(){return this._priv||(this._priv=new l(b(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},B.prototype.computeSecret=function(O){var V=(O=(O=new l(O)).toRed(this._prime)).redPow(this._priv).fromRed(),X=new a(V.toArray()),Q=this.getPrime();if(X.length<Q.length){var ee=new a(Q.length-X.length);ee.fill(0),X=a.concat([ee,X])}return X},B.prototype.getPublicKey=function(O){return F(this._pub,O)},B.prototype.getPrivateKey=function(O){return F(this._priv,O)},B.prototype.getPrime=function(O){return F(this.__prime,O)},B.prototype.getGenerator=function(O){return F(this._gen,O)},B.prototype.setGenerator=function(O,V){return V=V||"utf8",a.isBuffer(O)||(O=new a(O,V)),this.__gen=O,this._gen=new l(O),this}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(e,i,o){var a=e("randombytes");i.exports=O,O.simpleSieve=B,O.fermatTest=F;var l=e("bn.js"),t=new l(24),h=new(e("miller-rabin")),f=new l(1),p=new l(2),_=new l(5),g=(new l(16),new l(8),new l(10)),m=new l(3),b=(new l(7),new l(11)),x=new l(4),v=(new l(12),null);function S(){if(v!==null)return v;var V=[];V[0]=2;for(var X=1,Q=3;Q<1048576;Q+=2){for(var ee=Math.ceil(Math.sqrt(Q)),ne=0;ne<X&&V[ne]<=ee&&Q%V[ne]!=0;ne++);X!==ne&&V[ne]<=ee||(V[X++]=Q)}return v=V,V}function B(V){for(var X=S(),Q=0;Q<X.length;Q++)if(V.modn(X[Q])===0)return V.cmpn(X[Q])===0;return!0}function F(V){var X=l.mont(V);return p.toRed(X).redPow(V.subn(1)).fromRed().cmpn(1)===0}function O(V,X){if(V<16)return new l(X===2||X===5?[140,123]:[140,39]);var Q,ee;for(X=new l(X);;){for(Q=new l(a(Math.ceil(V/8)));Q.bitLength()>V;)Q.ishrn(1);if(Q.isEven()&&Q.iadd(f),Q.testn(1)||Q.iadd(p),X.cmp(p)){if(!X.cmp(_))for(;Q.mod(g).cmp(m);)Q.iadd(x)}else for(;Q.mod(t).cmp(b);)Q.iadd(x);if(B(ee=Q.shrn(1))&&B(Q)&&F(ee)&&F(Q)&&h.test(ee)&&h.test(Q))return Q}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(e,i,o){i.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(e,i,o){arguments[4][184][0].apply(o,arguments)},{buffer:188,dup:184}],405:[function(e,i,o){var a=o;a.version=e("../package.json").version,a.utils=e("./elliptic/utils"),a.rand=e("brorand"),a.curve=e("./elliptic/curve"),a.curves=e("./elliptic/curves"),a.ec=e("./elliptic/ec"),a.eddsa=e("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(e,i,o){var a=e("bn.js"),l=e("../utils"),t=l.getNAF,h=l.getJSF,f=l.assert;function p(g,m){this.type=g,this.p=new a(m.p,16),this.red=m.prime?a.red(m.prime):a.mont(this.p),this.zero=new a(0).toRed(this.red),this.one=new a(1).toRed(this.red),this.two=new a(2).toRed(this.red),this.n=m.n&&new a(m.n,16),this.g=m.g&&this.pointFromJSON(m.g,m.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var b=this.n&&this.p.div(this.n);!b||b.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function _(g,m){this.curve=g,this.type=m,this.precomputed=null}i.exports=p,p.prototype.point=function(){throw new Error("Not implemented")},p.prototype.validate=function(){throw new Error("Not implemented")},p.prototype._fixedNafMul=function(g,m){f(g.precomputed);var b=g._getDoubles(),x=t(m,1,this._bitLength),v=(1<<b.step+1)-(b.step%2==0?2:1);v/=3;var S,B,F=[];for(S=0;S<x.length;S+=b.step){B=0;for(var O=S+b.step-1;O>=S;O--)B=(B<<1)+x[O];F.push(B)}for(var V=this.jpoint(null,null,null),X=this.jpoint(null,null,null),Q=v;Q>0;Q--){for(S=0;S<F.length;S++)(B=F[S])===Q?X=X.mixedAdd(b.points[S]):B===-Q&&(X=X.mixedAdd(b.points[S].neg()));V=V.add(X)}return V.toP()},p.prototype._wnafMul=function(g,m){var b=4,x=g._getNAFPoints(b);b=x.wnd;for(var v=x.points,S=t(m,b,this._bitLength),B=this.jpoint(null,null,null),F=S.length-1;F>=0;F--){for(var O=0;F>=0&&S[F]===0;F--)O++;if(F>=0&&O++,B=B.dblp(O),F<0)break;var V=S[F];f(V!==0),B=g.type==="affine"?V>0?B.mixedAdd(v[V-1>>1]):B.mixedAdd(v[-V-1>>1].neg()):V>0?B.add(v[V-1>>1]):B.add(v[-V-1>>1].neg())}return g.type==="affine"?B.toP():B},p.prototype._wnafMulAdd=function(g,m,b,x,v){var S,B,F,O=this._wnafT1,V=this._wnafT2,X=this._wnafT3,Q=0;for(S=0;S<x;S++){var ee=(F=m[S])._getNAFPoints(g);O[S]=ee.wnd,V[S]=ee.points}for(S=x-1;S>=1;S-=2){var ne=S-1,Ae=S;if(O[ne]===1&&O[Ae]===1){var fe=[m[ne],null,null,m[Ae]];m[ne].y.cmp(m[Ae].y)===0?(fe[1]=m[ne].add(m[Ae]),fe[2]=m[ne].toJ().mixedAdd(m[Ae].neg())):m[ne].y.cmp(m[Ae].y.redNeg())===0?(fe[1]=m[ne].toJ().mixedAdd(m[Ae]),fe[2]=m[ne].add(m[Ae].neg())):(fe[1]=m[ne].toJ().mixedAdd(m[Ae]),fe[2]=m[ne].toJ().mixedAdd(m[Ae].neg()));var ce=[-3,-1,-5,-7,0,7,5,1,3],G=h(b[ne],b[Ae]);for(Q=Math.max(G[0].length,Q),X[ne]=new Array(Q),X[Ae]=new Array(Q),B=0;B<Q;B++){var Z=0|G[0][B],z=0|G[1][B];X[ne][B]=ce[3*(Z+1)+(z+1)],X[Ae][B]=0,V[ne]=fe}}else X[ne]=t(b[ne],O[ne],this._bitLength),X[Ae]=t(b[Ae],O[Ae],this._bitLength),Q=Math.max(X[ne].length,Q),Q=Math.max(X[Ae].length,Q)}var k=this.jpoint(null,null,null),R=this._wnafT4;for(S=Q;S>=0;S--){for(var N=0;S>=0;){var U=!0;for(B=0;B<x;B++)R[B]=0|X[B][S],R[B]!==0&&(U=!1);if(!U)break;N++,S--}if(S>=0&&N++,k=k.dblp(N),S<0)break;for(B=0;B<x;B++){var Y=R[B];Y!==0&&(Y>0?F=V[B][Y-1>>1]:Y<0&&(F=V[B][-Y-1>>1].neg()),k=F.type==="affine"?k.mixedAdd(F):k.add(F))}}for(S=0;S<x;S++)V[S]=null;return v?k:k.toP()},p.BasePoint=_,_.prototype.eq=function(){throw new Error("Not implemented")},_.prototype.validate=function(){return this.curve.validate(this)},p.prototype.decodePoint=function(g,m){g=l.toArray(g,m);var b=this.p.byteLength();if((g[0]===4||g[0]===6||g[0]===7)&&g.length-1==2*b)return g[0]===6?f(g[g.length-1]%2==0):g[0]===7&&f(g[g.length-1]%2==1),this.point(g.slice(1,1+b),g.slice(1+b,1+2*b));if((g[0]===2||g[0]===3)&&g.length-1===b)return this.pointFromX(g.slice(1,1+b),g[0]===3);throw new Error("Unknown point format")},_.prototype.encodeCompressed=function(g){return this.encode(g,!0)},_.prototype._encode=function(g){var m=this.curve.p.byteLength(),b=this.getX().toArray("be",m);return g?[this.getY().isEven()?2:3].concat(b):[4].concat(b,this.getY().toArray("be",m))},_.prototype.encode=function(g,m){return l.encode(this._encode(m),g)},_.prototype.precompute=function(g){if(this.precomputed)return this;var m={doubles:null,naf:null,beta:null};return m.naf=this._getNAFPoints(8),m.doubles=this._getDoubles(4,g),m.beta=this._getBeta(),this.precomputed=m,this},_.prototype._hasDoubles=function(g){if(!this.precomputed)return!1;var m=this.precomputed.doubles;return!!m&&m.points.length>=Math.ceil((g.bitLength()+1)/m.step)},_.prototype._getDoubles=function(g,m){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var b=[this],x=this,v=0;v<m;v+=g){for(var S=0;S<g;S++)x=x.dbl();b.push(x)}return{step:g,points:b}},_.prototype._getNAFPoints=function(g){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var m=[this],b=(1<<g)-1,x=b===1?null:this.dbl(),v=1;v<b;v++)m[v]=m[v-1].add(x);return{wnd:g,points:m}},_.prototype._getBeta=function(){return null},_.prototype.dblp=function(g){for(var m=this,b=0;b<g;b++)m=m.dbl();return m}},{"../utils":419,"bn.js":420}],407:[function(e,i,o){var a=e("../utils"),l=e("bn.js"),t=e("inherits"),h=e("./base"),f=a.assert;function p(g){this.twisted=(0|g.a)!=1,this.mOneA=this.twisted&&(0|g.a)==-1,this.extended=this.mOneA,h.call(this,"edwards",g),this.a=new l(g.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new l(g.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new l(g.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),f(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|g.c)==1}function _(g,m,b,x,v){h.BasePoint.call(this,g,"projective"),m===null&&b===null&&x===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new l(m,16),this.y=new l(b,16),this.z=x?new l(x,16):this.curve.one,this.t=v&&new l(v,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}t(p,h),i.exports=p,p.prototype._mulA=function(g){return this.mOneA?g.redNeg():this.a.redMul(g)},p.prototype._mulC=function(g){return this.oneC?g:this.c.redMul(g)},p.prototype.jpoint=function(g,m,b,x){return this.point(g,m,b,x)},p.prototype.pointFromX=function(g,m){(g=new l(g,16)).red||(g=g.toRed(this.red));var b=g.redSqr(),x=this.c2.redSub(this.a.redMul(b)),v=this.one.redSub(this.c2.redMul(this.d).redMul(b)),S=x.redMul(v.redInvm()),B=S.redSqrt();if(B.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");var F=B.fromRed().isOdd();return(m&&!F||!m&&F)&&(B=B.redNeg()),this.point(g,B)},p.prototype.pointFromY=function(g,m){(g=new l(g,16)).red||(g=g.toRed(this.red));var b=g.redSqr(),x=b.redSub(this.c2),v=b.redMul(this.d).redMul(this.c2).redSub(this.a),S=x.redMul(v.redInvm());if(S.cmp(this.zero)===0){if(m)throw new Error("invalid point");return this.point(this.zero,g)}var B=S.redSqrt();if(B.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");return B.fromRed().isOdd()!==m&&(B=B.redNeg()),this.point(B,g)},p.prototype.validate=function(g){if(g.isInfinity())return!0;g.normalize();var m=g.x.redSqr(),b=g.y.redSqr(),x=m.redMul(this.a).redAdd(b),v=this.c2.redMul(this.one.redAdd(this.d.redMul(m).redMul(b)));return x.cmp(v)===0},t(_,h.BasePoint),p.prototype.pointFromJSON=function(g){return _.fromJSON(this,g)},p.prototype.point=function(g,m,b,x){return new _(this,g,m,b,x)},_.fromJSON=function(g,m){return new _(g,m[0],m[1],m[2])},_.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},_.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},_.prototype._extDbl=function(){var g=this.x.redSqr(),m=this.y.redSqr(),b=this.z.redSqr();b=b.redIAdd(b);var x=this.curve._mulA(g),v=this.x.redAdd(this.y).redSqr().redISub(g).redISub(m),S=x.redAdd(m),B=S.redSub(b),F=x.redSub(m),O=v.redMul(B),V=S.redMul(F),X=v.redMul(F),Q=B.redMul(S);return this.curve.point(O,V,Q,X)},_.prototype._projDbl=function(){var g,m,b,x,v,S,B=this.x.redAdd(this.y).redSqr(),F=this.x.redSqr(),O=this.y.redSqr();if(this.curve.twisted){var V=(x=this.curve._mulA(F)).redAdd(O);this.zOne?(g=B.redSub(F).redSub(O).redMul(V.redSub(this.curve.two)),m=V.redMul(x.redSub(O)),b=V.redSqr().redSub(V).redSub(V)):(v=this.z.redSqr(),S=V.redSub(v).redISub(v),g=B.redSub(F).redISub(O).redMul(S),m=V.redMul(x.redSub(O)),b=V.redMul(S))}else x=F.redAdd(O),v=this.curve._mulC(this.z).redSqr(),S=x.redSub(v).redSub(v),g=this.curve._mulC(B.redISub(x)).redMul(S),m=this.curve._mulC(x).redMul(F.redISub(O)),b=x.redMul(S);return this.curve.point(g,m,b)},_.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},_.prototype._extAdd=function(g){var m=this.y.redSub(this.x).redMul(g.y.redSub(g.x)),b=this.y.redAdd(this.x).redMul(g.y.redAdd(g.x)),x=this.t.redMul(this.curve.dd).redMul(g.t),v=this.z.redMul(g.z.redAdd(g.z)),S=b.redSub(m),B=v.redSub(x),F=v.redAdd(x),O=b.redAdd(m),V=S.redMul(B),X=F.redMul(O),Q=S.redMul(O),ee=B.redMul(F);return this.curve.point(V,X,ee,Q)},_.prototype._projAdd=function(g){var m,b,x=this.z.redMul(g.z),v=x.redSqr(),S=this.x.redMul(g.x),B=this.y.redMul(g.y),F=this.curve.d.redMul(S).redMul(B),O=v.redSub(F),V=v.redAdd(F),X=this.x.redAdd(this.y).redMul(g.x.redAdd(g.y)).redISub(S).redISub(B),Q=x.redMul(O).redMul(X);return this.curve.twisted?(m=x.redMul(V).redMul(B.redSub(this.curve._mulA(S))),b=O.redMul(V)):(m=x.redMul(V).redMul(B.redSub(S)),b=this.curve._mulC(O).redMul(V)),this.curve.point(Q,m,b)},_.prototype.add=function(g){return this.isInfinity()?g:g.isInfinity()?this:this.curve.extended?this._extAdd(g):this._projAdd(g)},_.prototype.mul=function(g){return this._hasDoubles(g)?this.curve._fixedNafMul(this,g):this.curve._wnafMul(this,g)},_.prototype.mulAdd=function(g,m,b){return this.curve._wnafMulAdd(1,[this,m],[g,b],2,!1)},_.prototype.jmulAdd=function(g,m,b){return this.curve._wnafMulAdd(1,[this,m],[g,b],2,!0)},_.prototype.normalize=function(){if(this.zOne)return this;var g=this.z.redInvm();return this.x=this.x.redMul(g),this.y=this.y.redMul(g),this.t&&(this.t=this.t.redMul(g)),this.z=this.curve.one,this.zOne=!0,this},_.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},_.prototype.getX=function(){return this.normalize(),this.x.fromRed()},_.prototype.getY=function(){return this.normalize(),this.y.fromRed()},_.prototype.eq=function(g){return this===g||this.getX().cmp(g.getX())===0&&this.getY().cmp(g.getY())===0},_.prototype.eqXToP=function(g){var m=g.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(m)===0)return!0;for(var b=g.clone(),x=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(x),this.x.cmp(m)===0)return!0}},_.prototype.toP=_.prototype.normalize,_.prototype.mixedAdd=_.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(e,i,o){var a=o;a.base=e("./base"),a.short=e("./short"),a.mont=e("./mont"),a.edwards=e("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(e,i,o){var a=e("bn.js"),l=e("inherits"),t=e("./base"),h=e("../utils");function f(_){t.call(this,"mont",_),this.a=new a(_.a,16).toRed(this.red),this.b=new a(_.b,16).toRed(this.red),this.i4=new a(4).toRed(this.red).redInvm(),this.two=new a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function p(_,g,m){t.BasePoint.call(this,_,"projective"),g===null&&m===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new a(g,16),this.z=new a(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}l(f,t),i.exports=f,f.prototype.validate=function(_){var g=_.normalize().x,m=g.redSqr(),b=m.redMul(g).redAdd(m.redMul(this.a)).redAdd(g);return b.redSqrt().redSqr().cmp(b)===0},l(p,t.BasePoint),f.prototype.decodePoint=function(_,g){return this.point(h.toArray(_,g),1)},f.prototype.point=function(_,g){return new p(this,_,g)},f.prototype.pointFromJSON=function(_){return p.fromJSON(this,_)},p.prototype.precompute=function(){},p.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},p.fromJSON=function(_,g){return new p(_,g[0],g[1]||_.one)},p.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},p.prototype.isInfinity=function(){return this.z.cmpn(0)===0},p.prototype.dbl=function(){var _=this.x.redAdd(this.z).redSqr(),g=this.x.redSub(this.z).redSqr(),m=_.redSub(g),b=_.redMul(g),x=m.redMul(g.redAdd(this.curve.a24.redMul(m)));return this.curve.point(b,x)},p.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},p.prototype.diffAdd=function(_,g){var m=this.x.redAdd(this.z),b=this.x.redSub(this.z),x=_.x.redAdd(_.z),v=_.x.redSub(_.z).redMul(m),S=x.redMul(b),B=g.z.redMul(v.redAdd(S).redSqr()),F=g.x.redMul(v.redISub(S).redSqr());return this.curve.point(B,F)},p.prototype.mul=function(_){for(var g=_.clone(),m=this,b=this.curve.point(null,null),x=[];g.cmpn(0)!==0;g.iushrn(1))x.push(g.andln(1));for(var v=x.length-1;v>=0;v--)x[v]===0?(m=m.diffAdd(b,this),b=b.dbl()):(b=m.diffAdd(b,this),m=m.dbl());return b},p.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},p.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},p.prototype.eq=function(_){return this.getX().cmp(_.getX())===0},p.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},p.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(e,i,o){var a=e("../utils"),l=e("bn.js"),t=e("inherits"),h=e("./base"),f=a.assert;function p(m){h.call(this,"short",m),this.a=new l(m.a,16).toRed(this.red),this.b=new l(m.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(m),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function _(m,b,x,v){h.BasePoint.call(this,m,"affine"),b===null&&x===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new l(b,16),this.y=new l(x,16),v&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function g(m,b,x,v){h.BasePoint.call(this,m,"jacobian"),b===null&&x===null&&v===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new l(0)):(this.x=new l(b,16),this.y=new l(x,16),this.z=new l(v,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}t(p,h),i.exports=p,p.prototype._getEndomorphism=function(m){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var b,x;if(m.beta)b=new l(m.beta,16).toRed(this.red);else{var v=this._getEndoRoots(this.p);b=(b=v[0].cmp(v[1])<0?v[0]:v[1]).toRed(this.red)}if(m.lambda)x=new l(m.lambda,16);else{var S=this._getEndoRoots(this.n);this.g.mul(S[0]).x.cmp(this.g.x.redMul(b))===0?x=S[0]:(x=S[1],f(this.g.mul(x).x.cmp(this.g.x.redMul(b))===0))}return{beta:b,lambda:x,basis:m.basis?m.basis.map(function(B){return{a:new l(B.a,16),b:new l(B.b,16)}}):this._getEndoBasis(x)}}},p.prototype._getEndoRoots=function(m){var b=m===this.p?this.red:l.mont(m),x=new l(2).toRed(b).redInvm(),v=x.redNeg(),S=new l(3).toRed(b).redNeg().redSqrt().redMul(x);return[v.redAdd(S).fromRed(),v.redSub(S).fromRed()]},p.prototype._getEndoBasis=function(m){for(var b,x,v,S,B,F,O,V,X,Q=this.n.ushrn(Math.floor(this.n.bitLength()/2)),ee=m,ne=this.n.clone(),Ae=new l(1),fe=new l(0),ce=new l(0),G=new l(1),Z=0;ee.cmpn(0)!==0;){var z=ne.div(ee);V=ne.sub(z.mul(ee)),X=ce.sub(z.mul(Ae));var k=G.sub(z.mul(fe));if(!v&&V.cmp(Q)<0)b=O.neg(),x=Ae,v=V.neg(),S=X;else if(v&&++Z==2)break;O=V,ne=ee,ee=V,ce=Ae,Ae=X,G=fe,fe=k}B=V.neg(),F=X;var R=v.sqr().add(S.sqr());return B.sqr().add(F.sqr()).cmp(R)>=0&&(B=b,F=x),v.negative&&(v=v.neg(),S=S.neg()),B.negative&&(B=B.neg(),F=F.neg()),[{a:v,b:S},{a:B,b:F}]},p.prototype._endoSplit=function(m){var b=this.endo.basis,x=b[0],v=b[1],S=v.b.mul(m).divRound(this.n),B=x.b.neg().mul(m).divRound(this.n),F=S.mul(x.a),O=B.mul(v.a),V=S.mul(x.b),X=B.mul(v.b);return{k1:m.sub(F).sub(O),k2:V.add(X).neg()}},p.prototype.pointFromX=function(m,b){(m=new l(m,16)).red||(m=m.toRed(this.red));var x=m.redSqr().redMul(m).redIAdd(m.redMul(this.a)).redIAdd(this.b),v=x.redSqrt();if(v.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var S=v.fromRed().isOdd();return(b&&!S||!b&&S)&&(v=v.redNeg()),this.point(m,v)},p.prototype.validate=function(m){if(m.inf)return!0;var b=m.x,x=m.y,v=this.a.redMul(b),S=b.redSqr().redMul(b).redIAdd(v).redIAdd(this.b);return x.redSqr().redISub(S).cmpn(0)===0},p.prototype._endoWnafMulAdd=function(m,b,x){for(var v=this._endoWnafT1,S=this._endoWnafT2,B=0;B<m.length;B++){var F=this._endoSplit(b[B]),O=m[B],V=O._getBeta();F.k1.negative&&(F.k1.ineg(),O=O.neg(!0)),F.k2.negative&&(F.k2.ineg(),V=V.neg(!0)),v[2*B]=O,v[2*B+1]=V,S[2*B]=F.k1,S[2*B+1]=F.k2}for(var X=this._wnafMulAdd(1,v,S,2*B,x),Q=0;Q<2*B;Q++)v[Q]=null,S[Q]=null;return X},t(_,h.BasePoint),p.prototype.point=function(m,b,x){return new _(this,m,b,x)},p.prototype.pointFromJSON=function(m,b){return _.fromJSON(this,m,b)},_.prototype._getBeta=function(){if(this.curve.endo){var m=this.precomputed;if(m&&m.beta)return m.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(m){var x=this.curve,v=function(S){return x.point(S.x.redMul(x.endo.beta),S.y)};m.beta=b,b.precomputed={beta:null,naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(v)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(v)}}}return b}},_.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},_.fromJSON=function(m,b,x){typeof b=="string"&&(b=JSON.parse(b));var v=m.point(b[0],b[1],x);if(!b[2])return v;function S(F){return m.point(F[0],F[1],x)}var B=b[2];return v.precomputed={beta:null,doubles:B.doubles&&{step:B.doubles.step,points:[v].concat(B.doubles.points.map(S))},naf:B.naf&&{wnd:B.naf.wnd,points:[v].concat(B.naf.points.map(S))}},v},_.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},_.prototype.isInfinity=function(){return this.inf},_.prototype.add=function(m){if(this.inf)return m;if(m.inf)return this;if(this.eq(m))return this.dbl();if(this.neg().eq(m))return this.curve.point(null,null);if(this.x.cmp(m.x)===0)return this.curve.point(null,null);var b=this.y.redSub(m.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(m.x).redInvm()));var x=b.redSqr().redISub(this.x).redISub(m.x),v=b.redMul(this.x.redSub(x)).redISub(this.y);return this.curve.point(x,v)},_.prototype.dbl=function(){if(this.inf)return this;var m=this.y.redAdd(this.y);if(m.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,x=this.x.redSqr(),v=m.redInvm(),S=x.redAdd(x).redIAdd(x).redIAdd(b).redMul(v),B=S.redSqr().redISub(this.x.redAdd(this.x)),F=S.redMul(this.x.redSub(B)).redISub(this.y);return this.curve.point(B,F)},_.prototype.getX=function(){return this.x.fromRed()},_.prototype.getY=function(){return this.y.fromRed()},_.prototype.mul=function(m){return m=new l(m,16),this.isInfinity()?this:this._hasDoubles(m)?this.curve._fixedNafMul(this,m):this.curve.endo?this.curve._endoWnafMulAdd([this],[m]):this.curve._wnafMul(this,m)},_.prototype.mulAdd=function(m,b,x){var v=[this,b],S=[m,x];return this.curve.endo?this.curve._endoWnafMulAdd(v,S):this.curve._wnafMulAdd(1,v,S,2)},_.prototype.jmulAdd=function(m,b,x){var v=[this,b],S=[m,x];return this.curve.endo?this.curve._endoWnafMulAdd(v,S,!0):this.curve._wnafMulAdd(1,v,S,2,!0)},_.prototype.eq=function(m){return this===m||this.inf===m.inf&&(this.inf||this.x.cmp(m.x)===0&&this.y.cmp(m.y)===0)},_.prototype.neg=function(m){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(m&&this.precomputed){var x=this.precomputed,v=function(S){return S.neg()};b.precomputed={naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(v)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(v)}}}return b},_.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},t(g,h.BasePoint),p.prototype.jpoint=function(m,b,x){return new g(this,m,b,x)},g.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var m=this.z.redInvm(),b=m.redSqr(),x=this.x.redMul(b),v=this.y.redMul(b).redMul(m);return this.curve.point(x,v)},g.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},g.prototype.add=function(m){if(this.isInfinity())return m;if(m.isInfinity())return this;var b=m.z.redSqr(),x=this.z.redSqr(),v=this.x.redMul(b),S=m.x.redMul(x),B=this.y.redMul(b.redMul(m.z)),F=m.y.redMul(x.redMul(this.z)),O=v.redSub(S),V=B.redSub(F);if(O.cmpn(0)===0)return V.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var X=O.redSqr(),Q=X.redMul(O),ee=v.redMul(X),ne=V.redSqr().redIAdd(Q).redISub(ee).redISub(ee),Ae=V.redMul(ee.redISub(ne)).redISub(B.redMul(Q)),fe=this.z.redMul(m.z).redMul(O);return this.curve.jpoint(ne,Ae,fe)},g.prototype.mixedAdd=function(m){if(this.isInfinity())return m.toJ();if(m.isInfinity())return this;var b=this.z.redSqr(),x=this.x,v=m.x.redMul(b),S=this.y,B=m.y.redMul(b).redMul(this.z),F=x.redSub(v),O=S.redSub(B);if(F.cmpn(0)===0)return O.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var V=F.redSqr(),X=V.redMul(F),Q=x.redMul(V),ee=O.redSqr().redIAdd(X).redISub(Q).redISub(Q),ne=O.redMul(Q.redISub(ee)).redISub(S.redMul(X)),Ae=this.z.redMul(F);return this.curve.jpoint(ee,ne,Ae)},g.prototype.dblp=function(m){if(m===0)return this;if(this.isInfinity())return this;if(!m)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var x=this;for(b=0;b<m;b++)x=x.dbl();return x}var v=this.curve.a,S=this.curve.tinv,B=this.x,F=this.y,O=this.z,V=O.redSqr().redSqr(),X=F.redAdd(F);for(b=0;b<m;b++){var Q=B.redSqr(),ee=X.redSqr(),ne=ee.redSqr(),Ae=Q.redAdd(Q).redIAdd(Q).redIAdd(v.redMul(V)),fe=B.redMul(ee),ce=Ae.redSqr().redISub(fe.redAdd(fe)),G=fe.redISub(ce),Z=Ae.redMul(G);Z=Z.redIAdd(Z).redISub(ne);var z=X.redMul(O);b+1<m&&(V=V.redMul(ne)),B=ce,O=z,X=Z}return this.curve.jpoint(B,X.redMul(S),O)},g.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},g.prototype._zeroDbl=function(){var m,b,x;if(this.zOne){var v=this.x.redSqr(),S=this.y.redSqr(),B=S.redSqr(),F=this.x.redAdd(S).redSqr().redISub(v).redISub(B);F=F.redIAdd(F);var O=v.redAdd(v).redIAdd(v),V=O.redSqr().redISub(F).redISub(F),X=B.redIAdd(B);X=(X=X.redIAdd(X)).redIAdd(X),m=V,b=O.redMul(F.redISub(V)).redISub(X),x=this.y.redAdd(this.y)}else{var Q=this.x.redSqr(),ee=this.y.redSqr(),ne=ee.redSqr(),Ae=this.x.redAdd(ee).redSqr().redISub(Q).redISub(ne);Ae=Ae.redIAdd(Ae);var fe=Q.redAdd(Q).redIAdd(Q),ce=fe.redSqr(),G=ne.redIAdd(ne);G=(G=G.redIAdd(G)).redIAdd(G),m=ce.redISub(Ae).redISub(Ae),b=fe.redMul(Ae.redISub(m)).redISub(G),x=(x=this.y.redMul(this.z)).redIAdd(x)}return this.curve.jpoint(m,b,x)},g.prototype._threeDbl=function(){var m,b,x;if(this.zOne){var v=this.x.redSqr(),S=this.y.redSqr(),B=S.redSqr(),F=this.x.redAdd(S).redSqr().redISub(v).redISub(B);F=F.redIAdd(F);var O=v.redAdd(v).redIAdd(v).redIAdd(this.curve.a),V=O.redSqr().redISub(F).redISub(F);m=V;var X=B.redIAdd(B);X=(X=X.redIAdd(X)).redIAdd(X),b=O.redMul(F.redISub(V)).redISub(X),x=this.y.redAdd(this.y)}else{var Q=this.z.redSqr(),ee=this.y.redSqr(),ne=this.x.redMul(ee),Ae=this.x.redSub(Q).redMul(this.x.redAdd(Q));Ae=Ae.redAdd(Ae).redIAdd(Ae);var fe=ne.redIAdd(ne),ce=(fe=fe.redIAdd(fe)).redAdd(fe);m=Ae.redSqr().redISub(ce),x=this.y.redAdd(this.z).redSqr().redISub(ee).redISub(Q);var G=ee.redSqr();G=(G=(G=G.redIAdd(G)).redIAdd(G)).redIAdd(G),b=Ae.redMul(fe.redISub(m)).redISub(G)}return this.curve.jpoint(m,b,x)},g.prototype._dbl=function(){var m=this.curve.a,b=this.x,x=this.y,v=this.z,S=v.redSqr().redSqr(),B=b.redSqr(),F=x.redSqr(),O=B.redAdd(B).redIAdd(B).redIAdd(m.redMul(S)),V=b.redAdd(b),X=(V=V.redIAdd(V)).redMul(F),Q=O.redSqr().redISub(X.redAdd(X)),ee=X.redISub(Q),ne=F.redSqr();ne=(ne=(ne=ne.redIAdd(ne)).redIAdd(ne)).redIAdd(ne);var Ae=O.redMul(ee).redISub(ne),fe=x.redAdd(x).redMul(v);return this.curve.jpoint(Q,Ae,fe)},g.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var m=this.x.redSqr(),b=this.y.redSqr(),x=this.z.redSqr(),v=b.redSqr(),S=m.redAdd(m).redIAdd(m),B=S.redSqr(),F=this.x.redAdd(b).redSqr().redISub(m).redISub(v),O=(F=(F=(F=F.redIAdd(F)).redAdd(F).redIAdd(F)).redISub(B)).redSqr(),V=v.redIAdd(v);V=(V=(V=V.redIAdd(V)).redIAdd(V)).redIAdd(V);var X=S.redIAdd(F).redSqr().redISub(B).redISub(O).redISub(V),Q=b.redMul(X);Q=(Q=Q.redIAdd(Q)).redIAdd(Q);var ee=this.x.redMul(O).redISub(Q);ee=(ee=ee.redIAdd(ee)).redIAdd(ee);var ne=this.y.redMul(X.redMul(V.redISub(X)).redISub(F.redMul(O)));ne=(ne=(ne=ne.redIAdd(ne)).redIAdd(ne)).redIAdd(ne);var Ae=this.z.redAdd(F).redSqr().redISub(x).redISub(O);return this.curve.jpoint(ee,ne,Ae)},g.prototype.mul=function(m,b){return m=new l(m,b),this.curve._wnafMul(this,m)},g.prototype.eq=function(m){if(m.type==="affine")return this.eq(m.toJ());if(this===m)return!0;var b=this.z.redSqr(),x=m.z.redSqr();if(this.x.redMul(x).redISub(m.x.redMul(b)).cmpn(0)!==0)return!1;var v=b.redMul(this.z),S=x.redMul(m.z);return this.y.redMul(S).redISub(m.y.redMul(v)).cmpn(0)===0},g.prototype.eqXToP=function(m){var b=this.z.redSqr(),x=m.toRed(this.curve.red).redMul(b);if(this.x.cmp(x)===0)return!0;for(var v=m.clone(),S=this.curve.redN.redMul(b);;){if(v.iadd(this.curve.n),v.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(S),this.x.cmp(x)===0)return!0}},g.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},g.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(e,i,o){var a,l=o,t=e("hash.js"),h=e("./curve"),f=e("./utils").assert;function p(g){g.type==="short"?this.curve=new h.short(g):g.type==="edwards"?this.curve=new h.edwards(g):this.curve=new h.mont(g),this.g=this.curve.g,this.n=this.curve.n,this.hash=g.hash,f(this.g.validate(),"Invalid curve"),f(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function _(g,m){Object.defineProperty(l,g,{configurable:!0,enumerable:!0,get:function(){var b=new p(m);return Object.defineProperty(l,g,{configurable:!0,enumerable:!0,value:b}),b}})}l.PresetCurve=p,_("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),_("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),_("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),_("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),_("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),_("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),_("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{a=e("./precomputed/secp256k1")}catch{a=void 0}_("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(e,i,o){var a=e("bn.js"),l=e("hmac-drbg"),t=e("../utils"),h=e("../curves"),f=e("brorand"),p=t.assert,_=e("./key"),g=e("./signature");function m(b){if(!(this instanceof m))return new m(b);typeof b=="string"&&(p(Object.prototype.hasOwnProperty.call(h,b),"Unknown curve "+b),b=h[b]),b instanceof h.PresetCurve&&(b={curve:b}),this.curve=b.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=b.curve.g,this.g.precompute(b.curve.n.bitLength()+1),this.hash=b.hash||b.curve.hash}i.exports=m,m.prototype.keyPair=function(b){return new _(this,b)},m.prototype.keyFromPrivate=function(b,x){return _.fromPrivate(this,b,x)},m.prototype.keyFromPublic=function(b,x){return _.fromPublic(this,b,x)},m.prototype.genKeyPair=function(b){b||(b={});for(var x=new l({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||f(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),v=this.n.byteLength(),S=this.n.sub(new a(2));;){var B=new a(x.generate(v));if(!(B.cmp(S)>0))return B.iaddn(1),this.keyFromPrivate(B)}},m.prototype._truncateToN=function(b,x){var v=8*b.byteLength()-this.n.bitLength();return v>0&&(b=b.ushrn(v)),!x&&b.cmp(this.n)>=0?b.sub(this.n):b},m.prototype.sign=function(b,x,v,S){typeof v=="object"&&(S=v,v=null),S||(S={}),x=this.keyFromPrivate(x,v),b=this._truncateToN(new a(b,16));for(var B=this.n.byteLength(),F=x.getPrivate().toArray("be",B),O=b.toArray("be",B),V=new l({hash:this.hash,entropy:F,nonce:O,pers:S.pers,persEnc:S.persEnc||"utf8"}),X=this.n.sub(new a(1)),Q=0;;Q++){var ee=S.k?S.k(Q):new a(V.generate(this.n.byteLength()));if(!((ee=this._truncateToN(ee,!0)).cmpn(1)<=0||ee.cmp(X)>=0)){var ne=this.g.mul(ee);if(!ne.isInfinity()){var Ae=ne.getX(),fe=Ae.umod(this.n);if(fe.cmpn(0)!==0){var ce=ee.invm(this.n).mul(fe.mul(x.getPrivate()).iadd(b));if((ce=ce.umod(this.n)).cmpn(0)!==0){var G=(ne.getY().isOdd()?1:0)|(Ae.cmp(fe)!==0?2:0);return S.canonical&&ce.cmp(this.nh)>0&&(ce=this.n.sub(ce),G^=1),new g({r:fe,s:ce,recoveryParam:G})}}}}}},m.prototype.verify=function(b,x,v,S){b=this._truncateToN(new a(b,16)),v=this.keyFromPublic(v,S);var B=(x=new g(x,"hex")).r,F=x.s;if(B.cmpn(1)<0||B.cmp(this.n)>=0||F.cmpn(1)<0||F.cmp(this.n)>=0)return!1;var O,V=F.invm(this.n),X=V.mul(b).umod(this.n),Q=V.mul(B).umod(this.n);return this.curve._maxwellTrick?!(O=this.g.jmulAdd(X,v.getPublic(),Q)).isInfinity()&&O.eqXToP(B):!(O=this.g.mulAdd(X,v.getPublic(),Q)).isInfinity()&&O.getX().umod(this.n).cmp(B)===0},m.prototype.recoverPubKey=function(b,x,v,S){p((3&v)===v,"The recovery param is more than two bits"),x=new g(x,S);var B=this.n,F=new a(b),O=x.r,V=x.s,X=1&v,Q=v>>1;if(O.cmp(this.curve.p.umod(this.curve.n))>=0&&Q)throw new Error("Unable to find sencond key candinate");O=Q?this.curve.pointFromX(O.add(this.curve.n),X):this.curve.pointFromX(O,X);var ee=x.r.invm(B),ne=B.sub(F).mul(ee).umod(B),Ae=V.mul(ee).umod(B);return this.g.mulAdd(ne,O,Ae)},m.prototype.getKeyRecoveryParam=function(b,x,v,S){if((x=new g(x,S)).recoveryParam!==null)return x.recoveryParam;for(var B=0;B<4;B++){var F;try{F=this.recoverPubKey(b,x,B)}catch{continue}if(F.eq(v))return B}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(e,i,o){var a=e("bn.js"),l=e("../utils").assert;function t(h,f){this.ec=h,this.priv=null,this.pub=null,f.priv&&this._importPrivate(f.priv,f.privEnc),f.pub&&this._importPublic(f.pub,f.pubEnc)}i.exports=t,t.fromPublic=function(h,f,p){return f instanceof t?f:new t(h,{pub:f,pubEnc:p})},t.fromPrivate=function(h,f,p){return f instanceof t?f:new t(h,{priv:f,privEnc:p})},t.prototype.validate=function(){var h=this.getPublic();return h.isInfinity()?{result:!1,reason:"Invalid public key"}:h.validate()?h.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},t.prototype.getPublic=function(h,f){return typeof h=="string"&&(f=h,h=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),f?this.pub.encode(f,h):this.pub},t.prototype.getPrivate=function(h){return h==="hex"?this.priv.toString(16,2):this.priv},t.prototype._importPrivate=function(h,f){this.priv=new a(h,f||16),this.priv=this.priv.umod(this.ec.curve.n)},t.prototype._importPublic=function(h,f){if(h.x||h.y)return this.ec.curve.type==="mont"?l(h.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||l(h.x&&h.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(h.x,h.y));this.pub=this.ec.curve.decodePoint(h,f)},t.prototype.derive=function(h){return h.validate()||l(h.validate(),"public point not validated"),h.mul(this.priv).getX()},t.prototype.sign=function(h,f,p){return this.ec.sign(h,this,f,p)},t.prototype.verify=function(h,f){return this.ec.verify(h,f,this)},t.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(e,i,o){var a=e("bn.js"),l=e("../utils"),t=l.assert;function h(m,b){if(m instanceof h)return m;this._importDER(m,b)||(t(m.r&&m.s,"Signature without r or s"),this.r=new a(m.r,16),this.s=new a(m.s,16),m.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=m.recoveryParam)}function f(){this.place=0}function p(m,b){var x=m[b.place++];if(!(128&x))return x;var v=15&x;if(v===0||v>4)return!1;for(var S=0,B=0,F=b.place;B<v;B++,F++)S<<=8,S|=m[F],S>>>=0;return!(S<=127)&&(b.place=F,S)}function _(m){for(var b=0,x=m.length-1;!m[b]&&!(128&m[b+1])&&b<x;)b++;return b===0?m:m.slice(b)}function g(m,b){if(b<128)m.push(b);else{var x=1+(Math.log(b)/Math.LN2>>>3);for(m.push(128|x);--x;)m.push(b>>>(x<<3)&255);m.push(b)}}i.exports=h,h.prototype._importDER=function(m,b){m=l.toArray(m,b);var x=new f;if(m[x.place++]!==48)return!1;var v=p(m,x);if(v===!1||v+x.place!==m.length||m[x.place++]!==2)return!1;var S=p(m,x);if(S===!1)return!1;var B=m.slice(x.place,S+x.place);if(x.place+=S,m[x.place++]!==2)return!1;var F=p(m,x);if(F===!1||m.length!==F+x.place)return!1;var O=m.slice(x.place,F+x.place);if(B[0]===0){if(!(128&B[1]))return!1;B=B.slice(1)}if(O[0]===0){if(!(128&O[1]))return!1;O=O.slice(1)}return this.r=new a(B),this.s=new a(O),this.recoveryParam=null,!0},h.prototype.toDER=function(m){var b=this.r.toArray(),x=this.s.toArray();for(128&b[0]&&(b=[0].concat(b)),128&x[0]&&(x=[0].concat(x)),b=_(b),x=_(x);!(x[0]||128&x[1]);)x=x.slice(1);var v=[2];g(v,b.length),(v=v.concat(b)).push(2),g(v,x.length);var S=v.concat(x),B=[48];return g(B,S.length),B=B.concat(S),l.encode(B,m)}},{"../utils":419,"bn.js":420}],415:[function(e,i,o){var a=e("hash.js"),l=e("../curves"),t=e("../utils"),h=t.assert,f=t.parseBytes,p=e("./key"),_=e("./signature");function g(m){if(h(m==="ed25519","only tested with ed25519 so far"),!(this instanceof g))return new g(m);m=l[m].curve,this.curve=m,this.g=m.g,this.g.precompute(m.n.bitLength()+1),this.pointClass=m.point().constructor,this.encodingLength=Math.ceil(m.n.bitLength()/8),this.hash=a.sha512}i.exports=g,g.prototype.sign=function(m,b){m=f(m);var x=this.keyFromSecret(b),v=this.hashInt(x.messagePrefix(),m),S=this.g.mul(v),B=this.encodePoint(S),F=this.hashInt(B,x.pubBytes(),m).mul(x.priv()),O=v.add(F).umod(this.curve.n);return this.makeSignature({R:S,S:O,Rencoded:B})},g.prototype.verify=function(m,b,x){m=f(m),b=this.makeSignature(b);var v=this.keyFromPublic(x),S=this.hashInt(b.Rencoded(),v.pubBytes(),m),B=this.g.mul(b.S());return b.R().add(v.pub().mul(S)).eq(B)},g.prototype.hashInt=function(){for(var m=this.hash(),b=0;b<arguments.length;b++)m.update(arguments[b]);return t.intFromLE(m.digest()).umod(this.curve.n)},g.prototype.keyFromPublic=function(m){return p.fromPublic(this,m)},g.prototype.keyFromSecret=function(m){return p.fromSecret(this,m)},g.prototype.makeSignature=function(m){return m instanceof _?m:new _(this,m)},g.prototype.encodePoint=function(m){var b=m.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=m.getX().isOdd()?128:0,b},g.prototype.decodePoint=function(m){var b=(m=t.parseBytes(m)).length-1,x=m.slice(0,b).concat(-129&m[b]),v=(128&m[b])!=0,S=t.intFromLE(x);return this.curve.pointFromY(S,v)},g.prototype.encodeInt=function(m){return m.toArray("le",this.encodingLength)},g.prototype.decodeInt=function(m){return t.intFromLE(m)},g.prototype.isPoint=function(m){return m instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(e,i,o){var a=e("../utils"),l=a.assert,t=a.parseBytes,h=a.cachedProperty;function f(p,_){this.eddsa=p,this._secret=t(_.secret),p.isPoint(_.pub)?this._pub=_.pub:this._pubBytes=t(_.pub)}f.fromPublic=function(p,_){return _ instanceof f?_:new f(p,{pub:_})},f.fromSecret=function(p,_){return _ instanceof f?_:new f(p,{secret:_})},f.prototype.secret=function(){return this._secret},h(f,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),h(f,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),h(f,"privBytes",function(){var p=this.eddsa,_=this.hash(),g=p.encodingLength-1,m=_.slice(0,p.encodingLength);return m[0]&=248,m[g]&=127,m[g]|=64,m}),h(f,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),h(f,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),h(f,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),f.prototype.sign=function(p){return l(this._secret,"KeyPair can only verify"),this.eddsa.sign(p,this)},f.prototype.verify=function(p,_){return this.eddsa.verify(p,_,this)},f.prototype.getSecret=function(p){return l(this._secret,"KeyPair is public only"),a.encode(this.secret(),p)},f.prototype.getPublic=function(p){return a.encode(this.pubBytes(),p)},i.exports=f},{"../utils":419}],417:[function(e,i,o){var a=e("bn.js"),l=e("../utils"),t=l.assert,h=l.cachedProperty,f=l.parseBytes;function p(_,g){this.eddsa=_,typeof g!="object"&&(g=f(g)),Array.isArray(g)&&(g={R:g.slice(0,_.encodingLength),S:g.slice(_.encodingLength)}),t(g.R&&g.S,"Signature without R or S"),_.isPoint(g.R)&&(this._R=g.R),g.S instanceof a&&(this._S=g.S),this._Rencoded=Array.isArray(g.R)?g.R:g.Rencoded,this._Sencoded=Array.isArray(g.S)?g.S:g.Sencoded}h(p,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),h(p,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),h(p,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),h(p,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),p.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},p.prototype.toHex=function(){return l.encode(this.toBytes(),"hex").toUpperCase()},i.exports=p},{"../utils":419,"bn.js":420}],418:[function(e,i,o){i.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(e,i,o){var a=o,l=e("bn.js"),t=e("minimalistic-assert"),h=e("minimalistic-crypto-utils");a.assert=t,a.toArray=h.toArray,a.zero2=h.zero2,a.toHex=h.toHex,a.encode=h.encode,a.getNAF=function(f,p,_){var g=new Array(Math.max(f.bitLength(),_)+1);g.fill(0);for(var m=1<<p+1,b=f.clone(),x=0;x<g.length;x++){var v,S=b.andln(m-1);b.isOdd()?(v=S>(m>>1)-1?(m>>1)-S:S,b.isubn(v)):v=0,g[x]=v,b.iushrn(1)}return g},a.getJSF=function(f,p){var _=[[],[]];f=f.clone(),p=p.clone();for(var g,m=0,b=0;f.cmpn(-m)>0||p.cmpn(-b)>0;){var x,v,S=f.andln(3)+m&3,B=p.andln(3)+b&3;S===3&&(S=-1),B===3&&(B=-1),x=(1&S)==0?0:(g=f.andln(7)+m&7)!==3&&g!==5||B!==2?S:-S,_[0].push(x),v=(1&B)==0?0:(g=p.andln(7)+b&7)!==3&&g!==5||S!==2?B:-B,_[1].push(v),2*m===x+1&&(m=1-m),2*b===v+1&&(b=1-b),f.iushrn(1),p.iushrn(1)}return _},a.cachedProperty=function(f,p,_){var g="_"+p;f.prototype[p]=function(){return this[g]!==void 0?this[g]:this[g]=_.call(this)}},a.parseBytes=function(f){return typeof f=="string"?a.toArray(f,"hex"):f},a.intFromLE=function(f){return new l(f,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(e,i,o){arguments[4][184][0].apply(o,arguments)},{buffer:188,dup:184}],421:[function(e,i,o){i.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(e,i,o){var a=Object.create||function(ee){var ne=function(){};return ne.prototype=ee,new ne},l=Object.keys||function(ee){var ne=[];for(var Ae in ee)Object.prototype.hasOwnProperty.call(ee,Ae)&&ne.push(Ae);return Ae},t=Function.prototype.bind||function(ee){var ne=this;return function(){return ne.apply(ee,arguments)}};function h(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=a(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}i.exports=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._maxListeners=void 0;var f,p=10;try{var _={};Object.defineProperty&&Object.defineProperty(_,"x",{value:0}),f=_.x===0}catch{f=!1}function g(ee){return ee._maxListeners===void 0?h.defaultMaxListeners:ee._maxListeners}function m(ee,ne,Ae){if(ne)ee.call(Ae);else for(var fe=ee.length,ce=Q(ee,fe),G=0;G<fe;++G)ce[G].call(Ae)}function b(ee,ne,Ae,fe){if(ne)ee.call(Ae,fe);else for(var ce=ee.length,G=Q(ee,ce),Z=0;Z<ce;++Z)G[Z].call(Ae,fe)}function x(ee,ne,Ae,fe,ce){if(ne)ee.call(Ae,fe,ce);else for(var G=ee.length,Z=Q(ee,G),z=0;z<G;++z)Z[z].call(Ae,fe,ce)}function v(ee,ne,Ae,fe,ce,G){if(ne)ee.call(Ae,fe,ce,G);else for(var Z=ee.length,z=Q(ee,Z),k=0;k<Z;++k)z[k].call(Ae,fe,ce,G)}function S(ee,ne,Ae,fe){if(ne)ee.apply(Ae,fe);else for(var ce=ee.length,G=Q(ee,ce),Z=0;Z<ce;++Z)G[Z].apply(Ae,fe)}function B(ee,ne,Ae,fe){var ce,G,Z;if(typeof Ae!="function")throw new TypeError('"listener" argument must be a function');if((G=ee._events)?(G.newListener&&(ee.emit("newListener",ne,Ae.listener?Ae.listener:Ae),G=ee._events),Z=G[ne]):(G=ee._events=a(null),ee._eventsCount=0),Z){if(typeof Z=="function"?Z=G[ne]=fe?[Ae,Z]:[Z,Ae]:fe?Z.unshift(Ae):Z.push(Ae),!Z.warned&&(ce=g(ee))&&ce>0&&Z.length>ce){Z.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+Z.length+' "'+String(ne)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');z.name="MaxListenersExceededWarning",z.emitter=ee,z.type=ne,z.count=Z.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",z.name,z.message)}}else Z=G[ne]=Ae,++ee._eventsCount;return ee}function F(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var ee=new Array(arguments.length),ne=0;ne<ee.length;++ne)ee[ne]=arguments[ne];this.listener.apply(this.target,ee)}}function O(ee,ne,Ae){var fe={fired:!1,wrapFn:void 0,target:ee,type:ne,listener:Ae},ce=t.call(F,fe);return ce.listener=Ae,fe.wrapFn=ce,ce}function V(ee,ne,Ae){var fe=ee._events;if(!fe)return[];var ce=fe[ne];return ce?typeof ce=="function"?Ae?[ce.listener||ce]:[ce]:Ae?function(G){for(var Z=new Array(G.length),z=0;z<Z.length;++z)Z[z]=G[z].listener||G[z];return Z}(ce):Q(ce,ce.length):[]}function X(ee){var ne=this._events;if(ne){var Ae=ne[ee];if(typeof Ae=="function")return 1;if(Ae)return Ae.length}return 0}function Q(ee,ne){for(var Ae=new Array(ne),fe=0;fe<ne;++fe)Ae[fe]=ee[fe];return Ae}f?Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(ee){if(typeof ee!="number"||ee<0||ee!=ee)throw new TypeError('"defaultMaxListeners" must be a positive number');p=ee}}):h.defaultMaxListeners=p,h.prototype.setMaxListeners=function(ee){if(typeof ee!="number"||ee<0||isNaN(ee))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=ee,this},h.prototype.getMaxListeners=function(){return g(this)},h.prototype.emit=function(ee){var ne,Ae,fe,ce,G,Z,z=ee==="error";if(Z=this._events)z=z&&Z.error==null;else if(!z)return!1;if(z){if(arguments.length>1&&(ne=arguments[1]),ne instanceof Error)throw ne;var k=new Error('Unhandled "error" event. ('+ne+")");throw k.context=ne,k}if(!(Ae=Z[ee]))return!1;var R=typeof Ae=="function";switch(fe=arguments.length){case 1:m(Ae,R,this);break;case 2:b(Ae,R,this,arguments[1]);break;case 3:x(Ae,R,this,arguments[1],arguments[2]);break;case 4:v(Ae,R,this,arguments[1],arguments[2],arguments[3]);break;default:for(ce=new Array(fe-1),G=1;G<fe;G++)ce[G-1]=arguments[G];S(Ae,R,this,ce)}return!0},h.prototype.addListener=function(ee,ne){return B(this,ee,ne,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(ee,ne){return B(this,ee,ne,!0)},h.prototype.once=function(ee,ne){if(typeof ne!="function")throw new TypeError('"listener" argument must be a function');return this.on(ee,O(this,ee,ne)),this},h.prototype.prependOnceListener=function(ee,ne){if(typeof ne!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(ee,O(this,ee,ne)),this},h.prototype.removeListener=function(ee,ne){var Ae,fe,ce,G,Z;if(typeof ne!="function")throw new TypeError('"listener" argument must be a function');if(!(fe=this._events))return this;if(!(Ae=fe[ee]))return this;if(Ae===ne||Ae.listener===ne)--this._eventsCount==0?this._events=a(null):(delete fe[ee],fe.removeListener&&this.emit("removeListener",ee,Ae.listener||ne));else if(typeof Ae!="function"){for(ce=-1,G=Ae.length-1;G>=0;G--)if(Ae[G]===ne||Ae[G].listener===ne){Z=Ae[G].listener,ce=G;break}if(ce<0)return this;ce===0?Ae.shift():function(z,k){for(var R=k,N=R+1,U=z.length;N<U;R+=1,N+=1)z[R]=z[N];z.pop()}(Ae,ce),Ae.length===1&&(fe[ee]=Ae[0]),fe.removeListener&&this.emit("removeListener",ee,Z||ne)}return this},h.prototype.removeAllListeners=function(ee){var ne,Ae,fe;if(!(Ae=this._events))return this;if(!Ae.removeListener)return arguments.length===0?(this._events=a(null),this._eventsCount=0):Ae[ee]&&(--this._eventsCount==0?this._events=a(null):delete Ae[ee]),this;if(arguments.length===0){var ce,G=l(Ae);for(fe=0;fe<G.length;++fe)(ce=G[fe])!=="removeListener"&&this.removeAllListeners(ce);return this.removeAllListeners("removeListener"),this._events=a(null),this._eventsCount=0,this}if(typeof(ne=Ae[ee])=="function")this.removeListener(ee,ne);else if(ne)for(fe=ne.length-1;fe>=0;fe--)this.removeListener(ee,ne[fe]);return this},h.prototype.listeners=function(ee){return V(this,ee,!0)},h.prototype.rawListeners=function(ee){return V(this,ee,!1)},h.listenerCount=function(ee,ne){return typeof ee.listenerCount=="function"?ee.listenerCount(ne):X.call(ee,ne)},h.prototype.listenerCount=X,h.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("md5.js");i.exports=function(t,h,f,p){if(a.isBuffer(t)||(t=a.from(t,"binary")),h&&(a.isBuffer(h)||(h=a.from(h,"binary")),h.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var _=f/8,g=a.alloc(_),m=a.alloc(p||0),b=a.alloc(0);_>0||p>0;){var x=new l;x.update(b),x.update(t),h&&x.update(h),b=x.digest();var v=0;if(_>0){var S=g.length-_;v=Math.min(_,b.length),b.copy(g,S,0,v),_-=v}if(v<b.length&&p>0){var B=m.length-p,F=Math.min(p,b.length-v);b.copy(m,B,v,v+F),p-=F}}return b.fill(0),{key:g,iv:m}}},{"md5.js":450,"safe-buffer":494}],424:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.CsvParserStream=o.ParserOptions=o.parseFile=o.parseStream=o.parseString=o.parse=o.FormatterOptions=o.CsvFormatterStream=o.writeToPath=o.writeToString=o.writeToBuffer=o.writeToStream=o.write=o.format=void 0;var a=e("@fast-csv/format");Object.defineProperty(o,"format",{enumerable:!0,get:function(){return a.format}}),Object.defineProperty(o,"write",{enumerable:!0,get:function(){return a.write}}),Object.defineProperty(o,"writeToStream",{enumerable:!0,get:function(){return a.writeToStream}}),Object.defineProperty(o,"writeToBuffer",{enumerable:!0,get:function(){return a.writeToBuffer}}),Object.defineProperty(o,"writeToString",{enumerable:!0,get:function(){return a.writeToString}}),Object.defineProperty(o,"writeToPath",{enumerable:!0,get:function(){return a.writeToPath}}),Object.defineProperty(o,"CsvFormatterStream",{enumerable:!0,get:function(){return a.CsvFormatterStream}}),Object.defineProperty(o,"FormatterOptions",{enumerable:!0,get:function(){return a.FormatterOptions}});var l=e("@fast-csv/parse");Object.defineProperty(o,"parse",{enumerable:!0,get:function(){return l.parse}}),Object.defineProperty(o,"parseString",{enumerable:!0,get:function(){return l.parseString}}),Object.defineProperty(o,"parseStream",{enumerable:!0,get:function(){return l.parseStream}}),Object.defineProperty(o,"parseFile",{enumerable:!0,get:function(){return l.parseFile}}),Object.defineProperty(o,"ParserOptions",{enumerable:!0,get:function(){return l.ParserOptions}}),Object.defineProperty(o,"CsvParserStream",{enumerable:!0,get:function(){return l.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("readable-stream").Transform;function t(h){l.call(this),this._block=a.allocUnsafe(h),this._blockSize=h,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(t,l),t.prototype._transform=function(h,f,p){var _=null;try{this.update(h,f)}catch(g){_=g}p(_)},t.prototype._flush=function(h){var f=null;try{this.push(this.digest())}catch(p){f=p}h(f)},t.prototype.update=function(h,f){if(function(x,v){if(!a.isBuffer(x)&&typeof x!="string")throw new TypeError(v+" must be a string or a buffer")}(h,"Data"),this._finalized)throw new Error("Digest already called");a.isBuffer(h)||(h=a.from(h,f));for(var p=this._block,_=0;this._blockOffset+h.length-_>=this._blockSize;){for(var g=this._blockOffset;g<this._blockSize;)p[g++]=h[_++];this._update(),this._blockOffset=0}for(;_<h.length;)p[this._blockOffset++]=h[_++];for(var m=0,b=8*h.length;b>0;++m)this._length[m]+=b,(b=this._length[m]/4294967296|0)>0&&(this._length[m]-=4294967296*b);return this},t.prototype._update=function(){throw new Error("_update is not implemented")},t.prototype.digest=function(h){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var f=this._digest();h!==void 0&&(f=f.toString(h)),this._block.fill(0),this._blockOffset=0;for(var p=0;p<4;++p)this._length[p]=0;return f},t.prototype._digest=function(){throw new Error("_digest is not implemented")},i.exports=t},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(e,i,o){var a=o;a.utils=e("./hash/utils"),a.common=e("./hash/common"),a.sha=e("./hash/sha"),a.ripemd=e("./hash/ripemd"),a.hmac=e("./hash/hmac"),a.sha1=a.sha.sha1,a.sha256=a.sha.sha256,a.sha224=a.sha.sha224,a.sha384=a.sha.sha384,a.sha512=a.sha.sha512,a.ripemd160=a.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(e,i,o){var a=e("./utils"),l=e("minimalistic-assert");function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}o.BlockHash=t,t.prototype.update=function(h,f){if(h=a.toArray(h,f),this.pending?this.pending=this.pending.concat(h):this.pending=h,this.pendingTotal+=h.length,this.pending.length>=this._delta8){var p=(h=this.pending).length%this._delta8;this.pending=h.slice(h.length-p,h.length),this.pending.length===0&&(this.pending=null),h=a.join32(h,0,h.length-p,this.endian);for(var _=0;_<h.length;_+=this._delta32)this._update(h,_,_+this._delta32)}return this},t.prototype.digest=function(h){return this.update(this._pad()),l(this.pending===null),this._digest(h)},t.prototype._pad=function(){var h=this.pendingTotal,f=this._delta8,p=f-(h+this.padLength)%f,_=new Array(p+this.padLength);_[0]=128;for(var g=1;g<p;g++)_[g]=0;if(h<<=3,this.endian==="big"){for(var m=8;m<this.padLength;m++)_[g++]=0;_[g++]=0,_[g++]=0,_[g++]=0,_[g++]=0,_[g++]=h>>>24&255,_[g++]=h>>>16&255,_[g++]=h>>>8&255,_[g++]=255&h}else for(_[g++]=255&h,_[g++]=h>>>8&255,_[g++]=h>>>16&255,_[g++]=h>>>24&255,_[g++]=0,_[g++]=0,_[g++]=0,_[g++]=0,m=8;m<this.padLength;m++)_[g++]=0;return _}},{"./utils":437,"minimalistic-assert":453}],428:[function(e,i,o){var a=e("./utils"),l=e("minimalistic-assert");function t(h,f,p){if(!(this instanceof t))return new t(h,f,p);this.Hash=h,this.blockSize=h.blockSize/8,this.outSize=h.outSize/8,this.inner=null,this.outer=null,this._init(a.toArray(f,p))}i.exports=t,t.prototype._init=function(h){h.length>this.blockSize&&(h=new this.Hash().update(h).digest()),l(h.length<=this.blockSize);for(var f=h.length;f<this.blockSize;f++)h.push(0);for(f=0;f<h.length;f++)h[f]^=54;for(this.inner=new this.Hash().update(h),f=0;f<h.length;f++)h[f]^=106;this.outer=new this.Hash().update(h)},t.prototype.update=function(h,f){return this.inner.update(h,f),this},t.prototype.digest=function(h){return this.outer.update(this.inner.digest()),this.outer.digest(h)}},{"./utils":437,"minimalistic-assert":453}],429:[function(e,i,o){var a=e("./utils"),l=e("./common"),t=a.rotl32,h=a.sum32,f=a.sum32_3,p=a.sum32_4,_=l.BlockHash;function g(){if(!(this instanceof g))return new g;_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function m(O,V,X,Q){return O<=15?V^X^Q:O<=31?V&X|~V&Q:O<=47?(V|~X)^Q:O<=63?V&Q|X&~Q:V^(X|~Q)}function b(O){return O<=15?0:O<=31?1518500249:O<=47?1859775393:O<=63?2400959708:2840853838}function x(O){return O<=15?1352829926:O<=31?1548603684:O<=47?1836072691:O<=63?2053994217:0}a.inherits(g,_),o.ripemd160=g,g.blockSize=512,g.outSize=160,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(O,V){for(var X=this.h[0],Q=this.h[1],ee=this.h[2],ne=this.h[3],Ae=this.h[4],fe=X,ce=Q,G=ee,Z=ne,z=Ae,k=0;k<80;k++){var R=h(t(p(X,m(k,Q,ee,ne),O[v[k]+V],b(k)),B[k]),Ae);X=Ae,Ae=ne,ne=t(ee,10),ee=Q,Q=R,R=h(t(p(fe,m(79-k,ce,G,Z),O[S[k]+V],x(k)),F[k]),z),fe=z,z=Z,Z=t(G,10),G=ce,ce=R}R=f(this.h[1],ee,Z),this.h[1]=f(this.h[2],ne,z),this.h[2]=f(this.h[3],Ae,fe),this.h[3]=f(this.h[4],X,ce),this.h[4]=f(this.h[0],Q,G),this.h[0]=R},g.prototype._digest=function(O){return O==="hex"?a.toHex32(this.h,"little"):a.split32(this.h,"little")};var v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],S=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],B=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],F=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(e,i,o){o.sha1=e("./sha/1"),o.sha224=e("./sha/224"),o.sha256=e("./sha/256"),o.sha384=e("./sha/384"),o.sha512=e("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(e,i,o){var a=e("../utils"),l=e("../common"),t=e("./common"),h=a.rotl32,f=a.sum32,p=a.sum32_5,_=t.ft_1,g=l.BlockHash,m=[1518500249,1859775393,2400959708,3395469782];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}a.inherits(b,g),i.exports=b,b.blockSize=512,b.outSize=160,b.hmacStrength=80,b.padLength=64,b.prototype._update=function(x,v){for(var S=this.W,B=0;B<16;B++)S[B]=x[v+B];for(;B<S.length;B++)S[B]=h(S[B-3]^S[B-8]^S[B-14]^S[B-16],1);var F=this.h[0],O=this.h[1],V=this.h[2],X=this.h[3],Q=this.h[4];for(B=0;B<S.length;B++){var ee=~~(B/20),ne=p(h(F,5),_(ee,O,V,X),Q,S[B],m[ee]);Q=X,X=V,V=h(O,30),O=F,F=ne}this.h[0]=f(this.h[0],F),this.h[1]=f(this.h[1],O),this.h[2]=f(this.h[2],V),this.h[3]=f(this.h[3],X),this.h[4]=f(this.h[4],Q)},b.prototype._digest=function(x){return x==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(e,i,o){var a=e("../utils"),l=e("./256");function t(){if(!(this instanceof t))return new t;l.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}a.inherits(t,l),i.exports=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(h){return h==="hex"?a.toHex32(this.h.slice(0,7),"big"):a.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(e,i,o){var a=e("../utils"),l=e("../common"),t=e("./common"),h=e("minimalistic-assert"),f=a.sum32,p=a.sum32_4,_=a.sum32_5,g=t.ch32,m=t.maj32,b=t.s0_256,x=t.s1_256,v=t.g0_256,S=t.g1_256,B=l.BlockHash,F=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function O(){if(!(this instanceof O))return new O;B.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=F,this.W=new Array(64)}a.inherits(O,B),i.exports=O,O.blockSize=512,O.outSize=256,O.hmacStrength=192,O.padLength=64,O.prototype._update=function(V,X){for(var Q=this.W,ee=0;ee<16;ee++)Q[ee]=V[X+ee];for(;ee<Q.length;ee++)Q[ee]=p(S(Q[ee-2]),Q[ee-7],v(Q[ee-15]),Q[ee-16]);var ne=this.h[0],Ae=this.h[1],fe=this.h[2],ce=this.h[3],G=this.h[4],Z=this.h[5],z=this.h[6],k=this.h[7];for(h(this.k.length===Q.length),ee=0;ee<Q.length;ee++){var R=_(k,x(G),g(G,Z,z),this.k[ee],Q[ee]),N=f(b(ne),m(ne,Ae,fe));k=z,z=Z,Z=G,G=f(ce,R),ce=fe,fe=Ae,Ae=ne,ne=f(R,N)}this.h[0]=f(this.h[0],ne),this.h[1]=f(this.h[1],Ae),this.h[2]=f(this.h[2],fe),this.h[3]=f(this.h[3],ce),this.h[4]=f(this.h[4],G),this.h[5]=f(this.h[5],Z),this.h[6]=f(this.h[6],z),this.h[7]=f(this.h[7],k)},O.prototype._digest=function(V){return V==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(e,i,o){var a=e("../utils"),l=e("./512");function t(){if(!(this instanceof t))return new t;l.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}a.inherits(t,l),i.exports=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(h){return h==="hex"?a.toHex32(this.h.slice(0,12),"big"):a.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(e,i,o){var a=e("../utils"),l=e("../common"),t=e("minimalistic-assert"),h=a.rotr64_hi,f=a.rotr64_lo,p=a.shr64_hi,_=a.shr64_lo,g=a.sum64,m=a.sum64_hi,b=a.sum64_lo,x=a.sum64_4_hi,v=a.sum64_4_lo,S=a.sum64_5_hi,B=a.sum64_5_lo,F=l.BlockHash,O=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function V(){if(!(this instanceof V))return new V;F.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=O,this.W=new Array(160)}function X(N,U,Y,de,J){var xe=N&Y^~N&J;return xe<0&&(xe+=4294967296),xe}function Q(N,U,Y,de,J,xe){var Te=U&de^~U&xe;return Te<0&&(Te+=4294967296),Te}function ee(N,U,Y,de,J){var xe=N&Y^N&J^Y&J;return xe<0&&(xe+=4294967296),xe}function ne(N,U,Y,de,J,xe){var Te=U&de^U&xe^de&xe;return Te<0&&(Te+=4294967296),Te}function Ae(N,U){var Y=h(N,U,28)^h(U,N,2)^h(U,N,7);return Y<0&&(Y+=4294967296),Y}function fe(N,U){var Y=f(N,U,28)^f(U,N,2)^f(U,N,7);return Y<0&&(Y+=4294967296),Y}function ce(N,U){var Y=h(N,U,14)^h(N,U,18)^h(U,N,9);return Y<0&&(Y+=4294967296),Y}function G(N,U){var Y=f(N,U,14)^f(N,U,18)^f(U,N,9);return Y<0&&(Y+=4294967296),Y}function Z(N,U){var Y=h(N,U,1)^h(N,U,8)^p(N,U,7);return Y<0&&(Y+=4294967296),Y}function z(N,U){var Y=f(N,U,1)^f(N,U,8)^_(N,U,7);return Y<0&&(Y+=4294967296),Y}function k(N,U){var Y=h(N,U,19)^h(U,N,29)^p(N,U,6);return Y<0&&(Y+=4294967296),Y}function R(N,U){var Y=f(N,U,19)^f(U,N,29)^_(N,U,6);return Y<0&&(Y+=4294967296),Y}a.inherits(V,F),i.exports=V,V.blockSize=1024,V.outSize=512,V.hmacStrength=192,V.padLength=128,V.prototype._prepareBlock=function(N,U){for(var Y=this.W,de=0;de<32;de++)Y[de]=N[U+de];for(;de<Y.length;de+=2){var J=k(Y[de-4],Y[de-3]),xe=R(Y[de-4],Y[de-3]),Te=Y[de-14],Ue=Y[de-13],pe=Z(Y[de-30],Y[de-29]),Oe=z(Y[de-30],Y[de-29]),re=Y[de-32],ie=Y[de-31];Y[de]=x(J,xe,Te,Ue,pe,Oe,re,ie),Y[de+1]=v(J,xe,Te,Ue,pe,Oe,re,ie)}},V.prototype._update=function(N,U){this._prepareBlock(N,U);var Y=this.W,de=this.h[0],J=this.h[1],xe=this.h[2],Te=this.h[3],Ue=this.h[4],pe=this.h[5],Oe=this.h[6],re=this.h[7],ie=this.h[8],Be=this.h[9],He=this.h[10],Ge=this.h[11],Ne=this.h[12],st=this.h[13],ot=this.h[14],Je=this.h[15];t(this.k.length===Y.length);for(var Ze=0;Ze<Y.length;Ze+=2){var bt=ot,yt=Je,Nt=ce(ie,Be),kt=G(ie,Be),Gt=X(ie,Be,He,Ge,Ne),fr=Q(ie,Be,He,Ge,Ne,st),Tr=this.k[Ze],yr=this.k[Ze+1],Dr=Y[Ze],jt=Y[Ze+1],Jt=S(bt,yt,Nt,kt,Gt,fr,Tr,yr,Dr,jt),pr=B(bt,yt,Nt,kt,Gt,fr,Tr,yr,Dr,jt);bt=Ae(de,J),yt=fe(de,J),Nt=ee(de,J,xe,Te,Ue),kt=ne(de,J,xe,Te,Ue,pe);var Ft=m(bt,yt,Nt,kt),er=b(bt,yt,Nt,kt);ot=Ne,Je=st,Ne=He,st=Ge,He=ie,Ge=Be,ie=m(Oe,re,Jt,pr),Be=b(re,re,Jt,pr),Oe=Ue,re=pe,Ue=xe,pe=Te,xe=de,Te=J,de=m(Jt,pr,Ft,er),J=b(Jt,pr,Ft,er)}g(this.h,0,de,J),g(this.h,2,xe,Te),g(this.h,4,Ue,pe),g(this.h,6,Oe,re),g(this.h,8,ie,Be),g(this.h,10,He,Ge),g(this.h,12,Ne,st),g(this.h,14,ot,Je)},V.prototype._digest=function(N){return N==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(e,i,o){var a=e("../utils").rotr32;function l(f,p,_){return f&p^~f&_}function t(f,p,_){return f&p^f&_^p&_}function h(f,p,_){return f^p^_}o.ft_1=function(f,p,_,g){return f===0?l(p,_,g):f===1||f===3?h(p,_,g):f===2?t(p,_,g):void 0},o.ch32=l,o.maj32=t,o.p32=h,o.s0_256=function(f){return a(f,2)^a(f,13)^a(f,22)},o.s1_256=function(f){return a(f,6)^a(f,11)^a(f,25)},o.g0_256=function(f){return a(f,7)^a(f,18)^f>>>3},o.g1_256=function(f){return a(f,17)^a(f,19)^f>>>10}},{"../utils":437}],437:[function(e,i,o){var a=e("minimalistic-assert"),l=e("inherits");function t(_,g){return(64512&_.charCodeAt(g))==55296&&!(g<0||g+1>=_.length)&&(64512&_.charCodeAt(g+1))==56320}function h(_){return(_>>>24|_>>>8&65280|_<<8&16711680|(255&_)<<24)>>>0}function f(_){return _.length===1?"0"+_:_}function p(_){return _.length===7?"0"+_:_.length===6?"00"+_:_.length===5?"000"+_:_.length===4?"0000"+_:_.length===3?"00000"+_:_.length===2?"000000"+_:_.length===1?"0000000"+_:_}o.inherits=l,o.toArray=function(_,g){if(Array.isArray(_))return _.slice();if(!_)return[];var m=[];if(typeof _=="string")if(g){if(g==="hex")for((_=_.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(_="0"+_),x=0;x<_.length;x+=2)m.push(parseInt(_[x]+_[x+1],16))}else for(var b=0,x=0;x<_.length;x++){var v=_.charCodeAt(x);v<128?m[b++]=v:v<2048?(m[b++]=v>>6|192,m[b++]=63&v|128):t(_,x)?(v=65536+((1023&v)<<10)+(1023&_.charCodeAt(++x)),m[b++]=v>>18|240,m[b++]=v>>12&63|128,m[b++]=v>>6&63|128,m[b++]=63&v|128):(m[b++]=v>>12|224,m[b++]=v>>6&63|128,m[b++]=63&v|128)}else for(x=0;x<_.length;x++)m[x]=0|_[x];return m},o.toHex=function(_){for(var g="",m=0;m<_.length;m++)g+=f(_[m].toString(16));return g},o.htonl=h,o.toHex32=function(_,g){for(var m="",b=0;b<_.length;b++){var x=_[b];g==="little"&&(x=h(x)),m+=p(x.toString(16))}return m},o.zero2=f,o.zero8=p,o.join32=function(_,g,m,b){var x=m-g;a(x%4==0);for(var v=new Array(x/4),S=0,B=g;S<v.length;S++,B+=4){var F;F=b==="big"?_[B]<<24|_[B+1]<<16|_[B+2]<<8|_[B+3]:_[B+3]<<24|_[B+2]<<16|_[B+1]<<8|_[B],v[S]=F>>>0}return v},o.split32=function(_,g){for(var m=new Array(4*_.length),b=0,x=0;b<_.length;b++,x+=4){var v=_[b];g==="big"?(m[x]=v>>>24,m[x+1]=v>>>16&255,m[x+2]=v>>>8&255,m[x+3]=255&v):(m[x+3]=v>>>24,m[x+2]=v>>>16&255,m[x+1]=v>>>8&255,m[x]=255&v)}return m},o.rotr32=function(_,g){return _>>>g|_<<32-g},o.rotl32=function(_,g){return _<<g|_>>>32-g},o.sum32=function(_,g){return _+g>>>0},o.sum32_3=function(_,g,m){return _+g+m>>>0},o.sum32_4=function(_,g,m,b){return _+g+m+b>>>0},o.sum32_5=function(_,g,m,b,x){return _+g+m+b+x>>>0},o.sum64=function(_,g,m,b){var x=_[g],v=b+_[g+1]>>>0,S=(v<b?1:0)+m+x;_[g]=S>>>0,_[g+1]=v},o.sum64_hi=function(_,g,m,b){return(g+b>>>0<g?1:0)+_+m>>>0},o.sum64_lo=function(_,g,m,b){return g+b>>>0},o.sum64_4_hi=function(_,g,m,b,x,v,S,B){var F=0,O=g;return F+=(O=O+b>>>0)<g?1:0,F+=(O=O+v>>>0)<v?1:0,_+m+x+S+(F+=(O=O+B>>>0)<B?1:0)>>>0},o.sum64_4_lo=function(_,g,m,b,x,v,S,B){return g+b+v+B>>>0},o.sum64_5_hi=function(_,g,m,b,x,v,S,B,F,O){var V=0,X=g;return V+=(X=X+b>>>0)<g?1:0,V+=(X=X+v>>>0)<v?1:0,V+=(X=X+B>>>0)<B?1:0,_+m+x+S+F+(V+=(X=X+O>>>0)<O?1:0)>>>0},o.sum64_5_lo=function(_,g,m,b,x,v,S,B,F,O){return g+b+v+B+O>>>0},o.rotr64_hi=function(_,g,m){return(g<<32-m|_>>>m)>>>0},o.rotr64_lo=function(_,g,m){return(_<<32-m|g>>>m)>>>0},o.shr64_hi=function(_,g,m){return _>>>m},o.shr64_lo=function(_,g,m){return(_<<32-m|g>>>m)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(e,i,o){var a=e("hash.js"),l=e("minimalistic-crypto-utils"),t=e("minimalistic-assert");function h(f){if(!(this instanceof h))return new h(f);this.hash=f.hash,this.predResist=!!f.predResist,this.outLen=this.hash.outSize,this.minEntropy=f.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var p=l.toArray(f.entropy,f.entropyEnc||"hex"),_=l.toArray(f.nonce,f.nonceEnc||"hex"),g=l.toArray(f.pers,f.persEnc||"hex");t(p.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(p,_,g)}i.exports=h,h.prototype._init=function(f,p,_){var g=f.concat(p).concat(_);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var m=0;m<this.V.length;m++)this.K[m]=0,this.V[m]=1;this._update(g),this._reseed=1,this.reseedInterval=281474976710656},h.prototype._hmac=function(){return new a.hmac(this.hash,this.K)},h.prototype._update=function(f){var p=this._hmac().update(this.V).update([0]);f&&(p=p.update(f)),this.K=p.digest(),this.V=this._hmac().update(this.V).digest(),f&&(this.K=this._hmac().update(this.V).update([1]).update(f).digest(),this.V=this._hmac().update(this.V).digest())},h.prototype.reseed=function(f,p,_,g){typeof p!="string"&&(g=_,_=p,p=null),f=l.toArray(f,p),_=l.toArray(_,g),t(f.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(f.concat(_||[])),this._reseed=1},h.prototype.generate=function(f,p,_,g){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof p!="string"&&(g=_,_=p,p=null),_&&(_=l.toArray(_,g||"hex"),this._update(_));for(var m=[];m.length<f;)this.V=this._hmac().update(this.V).digest(),m=m.concat(this.V);var b=m.slice(0,f);return this._update(_),this._reseed++,l.encode(b,p)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(e,i,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(a,l,t,h,f){var p,_,g=8*f-h-1,m=(1<<g)-1,b=m>>1,x=-7,v=t?f-1:0,S=t?-1:1,B=a[l+v];for(v+=S,p=B&(1<<-x)-1,B>>=-x,x+=g;x>0;p=256*p+a[l+v],v+=S,x-=8);for(_=p&(1<<-x)-1,p>>=-x,x+=h;x>0;_=256*_+a[l+v],v+=S,x-=8);if(p===0)p=1-b;else{if(p===m)return _?NaN:1/0*(B?-1:1);_+=Math.pow(2,h),p-=b}return(B?-1:1)*_*Math.pow(2,p-h)},o.write=function(a,l,t,h,f,p){var _,g,m,b=8*p-f-1,x=(1<<b)-1,v=x>>1,S=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=h?0:p-1,F=h?1:-1,O=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(g=isNaN(l)?1:0,_=x):(_=Math.floor(Math.log(l)/Math.LN2),l*(m=Math.pow(2,-_))<1&&(_--,m*=2),(l+=_+v>=1?S/m:S*Math.pow(2,1-v))*m>=2&&(_++,m/=2),_+v>=x?(g=0,_=x):_+v>=1?(g=(l*m-1)*Math.pow(2,f),_+=v):(g=l*Math.pow(2,v-1)*Math.pow(2,f),_=0));f>=8;a[t+B]=255&g,B+=F,g/=256,f-=8);for(_=_<<f|g,b+=f;b>0;a[t+B]=255&_,B+=F,_/=256,b-=8);a[t+B-F]|=128*O}},{}],440:[function(e,i,o){typeof Object.create=="function"?i.exports=function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(a,l){if(l){a.super_=l;var t=function(){};t.prototype=l.prototype,a.prototype=new t,a.prototype.constructor=a}}},{}],441:[function(e,i,o){(function(a,l,t,h,f,p,_,g){(function(){/*!

		JSZip v3.10.1 - A JavaScript class for generating and reading zip files
		<http://stuartk.com/jszip>

		(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
		Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

		JSZip uses the library pako released under the MIT license :
		https://github.com/nodeca/pako/blob/main/LICENSE
		*/(function(m){typeof o=="object"&&i!==void 0?i.exports=m():(typeof window<"u"?window:l!==void 0?l:typeof self<"u"?self:this).JSZip=m()})(function(){return function m(b,x,v){function S(O,V){if(!x[O]){if(!b[O]){var X=typeof e=="function"&&e;if(!V&&X)return X(O,!0);if(B)return B(O,!0);var Q=new Error("Cannot find module '"+O+"'");throw Q.code="MODULE_NOT_FOUND",Q}var ee=x[O]={exports:{}};b[O][0].call(ee.exports,function(ne){return S(b[O][1][ne]||ne)},ee,ee.exports,m,b,x,v)}return x[O].exports}for(var B=typeof e=="function"&&e,F=0;F<v.length;F++)S(v[F]);return S}({1:[function(m,b,x){var v=m("./utils"),S=m("./support"),B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(F){for(var O,V,X,Q,ee,ne,Ae,fe=[],ce=0,G=F.length,Z=G,z=v.getTypeOf(F)!=="string";ce<F.length;)Z=G-ce,X=z?(O=F[ce++],V=ce<G?F[ce++]:0,ce<G?F[ce++]:0):(O=F.charCodeAt(ce++),V=ce<G?F.charCodeAt(ce++):0,ce<G?F.charCodeAt(ce++):0),Q=O>>2,ee=(3&O)<<4|V>>4,ne=1<Z?(15&V)<<2|X>>6:64,Ae=2<Z?63&X:64,fe.push(B.charAt(Q)+B.charAt(ee)+B.charAt(ne)+B.charAt(Ae));return fe.join("")},x.decode=function(F){var O,V,X,Q,ee,ne,Ae=0,fe=0,ce="data:";if(F.substr(0,ce.length)===ce)throw new Error("Invalid base64 input, it looks like a data url.");var G,Z=3*(F=F.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(F.charAt(F.length-1)===B.charAt(64)&&Z--,F.charAt(F.length-2)===B.charAt(64)&&Z--,Z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(G=S.uint8array?new Uint8Array(0|Z):new Array(0|Z);Ae<F.length;)O=B.indexOf(F.charAt(Ae++))<<2|(Q=B.indexOf(F.charAt(Ae++)))>>4,V=(15&Q)<<4|(ee=B.indexOf(F.charAt(Ae++)))>>2,X=(3&ee)<<6|(ne=B.indexOf(F.charAt(Ae++))),G[fe++]=O,ee!==64&&(G[fe++]=V),ne!==64&&(G[fe++]=X);return G}},{"./support":30,"./utils":32}],2:[function(m,b,x){var v=m("./external"),S=m("./stream/DataWorker"),B=m("./stream/Crc32Probe"),F=m("./stream/DataLengthProbe");function O(V,X,Q,ee,ne){this.compressedSize=V,this.uncompressedSize=X,this.crc32=Q,this.compression=ee,this.compressedContent=ne}O.prototype={getContentWorker:function(){var V=new S(v.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new F("data_length")),X=this;return V.on("end",function(){if(this.streamInfo.data_length!==X.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),V},getCompressedWorker:function(){return new S(v.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},O.createWorkerFrom=function(V,X,Q){return V.pipe(new B).pipe(new F("uncompressedSize")).pipe(X.compressWorker(Q)).pipe(new F("compressedSize")).withStreamInfo("compression",X)},b.exports=O},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(m,b,x){var v=m("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(){return new v("STORE compression")},uncompressWorker:function(){return new v("STORE decompression")}},x.DEFLATE=m("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(m,b,x){var v=m("./utils"),S=function(){for(var B,F=[],O=0;O<256;O++){B=O;for(var V=0;V<8;V++)B=1&B?3988292384^B>>>1:B>>>1;F[O]=B}return F}();b.exports=function(B,F){return B!==void 0&&B.length?v.getTypeOf(B)!=="string"?function(O,V,X,Q){var ee=S,ne=0+X;O^=-1;for(var Ae=0;Ae<ne;Ae++)O=O>>>8^ee[255&(O^V[Ae])];return-1^O}(0|F,B,B.length):function(O,V,X,Q){var ee=S,ne=0+X;O^=-1;for(var Ae=0;Ae<ne;Ae++)O=O>>>8^ee[255&(O^V.charCodeAt(Ae))];return-1^O}(0|F,B,B.length):0}},{"./utils":32}],5:[function(m,b,x){x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(m,b,x){var v;v=typeof Promise<"u"?Promise:m("lie"),b.exports={Promise:v}},{lie:37}],7:[function(m,b,x){var v=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",S=m("pako"),B=m("./utils"),F=m("./stream/GenericWorker"),O=v?"uint8array":"array";function V(X,Q){F.call(this,"FlateWorker/"+X),this._pako=null,this._pakoAction=X,this._pakoOptions=Q,this.meta={}}x.magic="\b\0",B.inherits(V,F),V.prototype.processChunk=function(X){this.meta=X.meta,this._pako===null&&this._createPako(),this._pako.push(B.transformTo(O,X.data),!1)},V.prototype.flush=function(){F.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},V.prototype.cleanUp=function(){F.prototype.cleanUp.call(this),this._pako=null},V.prototype._createPako=function(){this._pako=new S[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var X=this;this._pako.onData=function(Q){X.push({data:Q,meta:X.meta})}},x.compressWorker=function(X){return new V("Deflate",X)},x.uncompressWorker=function(){return new V("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(m,b,x){function v(ee,ne){var Ae,fe="";for(Ae=0;Ae<ne;Ae++)fe+=String.fromCharCode(255&ee),ee>>>=8;return fe}function S(ee,ne,Ae,fe,ce,G){var Z,z,k=ee.file,R=ee.compression,N=G!==O.utf8encode,U=B.transformTo("string",G(k.name)),Y=B.transformTo("string",O.utf8encode(k.name)),de=k.comment,J=B.transformTo("string",G(de)),xe=B.transformTo("string",O.utf8encode(de)),Te=Y.length!==k.name.length,Ue=xe.length!==de.length,pe="",Oe="",re="",ie=k.dir,Be=k.date,He={crc32:0,compressedSize:0,uncompressedSize:0};ne&&!Ae||(He.crc32=ee.crc32,He.compressedSize=ee.compressedSize,He.uncompressedSize=ee.uncompressedSize);var Ge=0;ne&&(Ge|=8),N||!Te&&!Ue||(Ge|=2048);var Ne=0,st=0;ie&&(Ne|=16),ce==="UNIX"?(st=798,Ne|=function(Je,Ze){var bt=Je;return Je||(bt=Ze?16893:33204),(65535&bt)<<16}(k.unixPermissions,ie)):(st=20,Ne|=function(Je){return 63&(Je||0)}(k.dosPermissions)),Z=Be.getUTCHours(),Z<<=6,Z|=Be.getUTCMinutes(),Z<<=5,Z|=Be.getUTCSeconds()/2,z=Be.getUTCFullYear()-1980,z<<=4,z|=Be.getUTCMonth()+1,z<<=5,z|=Be.getUTCDate(),Te&&(Oe=v(1,1)+v(V(U),4)+Y,pe+="up"+v(Oe.length,2)+Oe),Ue&&(re=v(1,1)+v(V(J),4)+xe,pe+="uc"+v(re.length,2)+re);var ot="";return ot+=`
\0`,ot+=v(Ge,2),ot+=R.magic,ot+=v(Z,2),ot+=v(z,2),ot+=v(He.crc32,4),ot+=v(He.compressedSize,4),ot+=v(He.uncompressedSize,4),ot+=v(U.length,2),ot+=v(pe.length,2),{fileRecord:X.LOCAL_FILE_HEADER+ot+U+pe,dirRecord:X.CENTRAL_FILE_HEADER+v(st,2)+ot+v(J.length,2)+"\0\0\0\0"+v(Ne,4)+v(fe,4)+U+pe+J}}var B=m("../utils"),F=m("../stream/GenericWorker"),O=m("../utf8"),V=m("../crc32"),X=m("../signature");function Q(ee,ne,Ae,fe){F.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=ne,this.zipPlatform=Ae,this.encodeFileName=fe,this.streamFiles=ee,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}B.inherits(Q,F),Q.prototype.push=function(ee){var ne=ee.meta.percent||0,Ae=this.entriesCount,fe=this._sources.length;this.accumulate?this.contentBuffer.push(ee):(this.bytesWritten+=ee.data.length,F.prototype.push.call(this,{data:ee.data,meta:{currentFile:this.currentFile,percent:Ae?(ne+100*(Ae-fe-1))/Ae:100}}))},Q.prototype.openedSource=function(ee){this.currentSourceOffset=this.bytesWritten,this.currentFile=ee.file.name;var ne=this.streamFiles&&!ee.file.dir;if(ne){var Ae=S(ee,ne,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Ae.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Q.prototype.closedSource=function(ee){this.accumulate=!1;var ne=this.streamFiles&&!ee.file.dir,Ae=S(ee,ne,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Ae.dirRecord),ne)this.push({data:function(fe){return X.DATA_DESCRIPTOR+v(fe.crc32,4)+v(fe.compressedSize,4)+v(fe.uncompressedSize,4)}(ee),meta:{percent:100}});else for(this.push({data:Ae.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Q.prototype.flush=function(){for(var ee=this.bytesWritten,ne=0;ne<this.dirRecords.length;ne++)this.push({data:this.dirRecords[ne],meta:{percent:100}});var Ae=this.bytesWritten-ee,fe=function(ce,G,Z,z,k){var R=B.transformTo("string",k(z));return X.CENTRAL_DIRECTORY_END+"\0\0\0\0"+v(ce,2)+v(ce,2)+v(G,4)+v(Z,4)+v(R.length,2)+R}(this.dirRecords.length,Ae,ee,this.zipComment,this.encodeFileName);this.push({data:fe,meta:{percent:100}})},Q.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Q.prototype.registerPrevious=function(ee){this._sources.push(ee);var ne=this;return ee.on("data",function(Ae){ne.processChunk(Ae)}),ee.on("end",function(){ne.closedSource(ne.previous.streamInfo),ne._sources.length?ne.prepareNextSource():ne.end()}),ee.on("error",function(Ae){ne.error(Ae)}),this},Q.prototype.resume=function(){return!!F.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Q.prototype.error=function(ee){var ne=this._sources;if(!F.prototype.error.call(this,ee))return!1;for(var Ae=0;Ae<ne.length;Ae++)try{ne[Ae].error(ee)}catch{}return!0},Q.prototype.lock=function(){F.prototype.lock.call(this);for(var ee=this._sources,ne=0;ne<ee.length;ne++)ee[ne].lock()},b.exports=Q},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(m,b,x){var v=m("../compressions"),S=m("./ZipFileWorker");x.generateWorker=function(B,F,O){var V=new S(F.streamFiles,O,F.platform,F.encodeFileName),X=0;try{B.forEach(function(Q,ee){X++;var ne=function(G,Z){var z=G||Z,k=v[z];if(!k)throw new Error(z+" is not a valid compression method !");return k}(ee.options.compression,F.compression),Ae=ee.options.compressionOptions||F.compressionOptions||{},fe=ee.dir,ce=ee.date;ee._compressWorker(ne,Ae).withStreamInfo("file",{name:Q,dir:fe,date:ce,comment:ee.comment||"",unixPermissions:ee.unixPermissions,dosPermissions:ee.dosPermissions}).pipe(V)}),V.entriesCount=X}catch(Q){V.error(Q)}return V}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(m,b,x){function v(){if(!(this instanceof v))return new v;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var S=new v;for(var B in this)typeof this[B]!="function"&&(S[B]=this[B]);return S}}(v.prototype=m("./object")).loadAsync=m("./load"),v.support=m("./support"),v.defaults=m("./defaults"),v.version="3.10.1",v.loadAsync=function(S,B){return new v().loadAsync(S,B)},v.external=m("./external"),b.exports=v},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(m,b,x){var v=m("./utils"),S=m("./external"),B=m("./utf8"),F=m("./zipEntries"),O=m("./stream/Crc32Probe"),V=m("./nodejsUtils");function X(Q){return new S.Promise(function(ee,ne){var Ae=Q.decompressed.getContentWorker().pipe(new O);Ae.on("error",function(fe){ne(fe)}).on("end",function(){Ae.streamInfo.crc32!==Q.decompressed.crc32?ne(new Error("Corrupted zip : CRC32 mismatch")):ee()}).resume()})}b.exports=function(Q,ee){var ne=this;return ee=v.extend(ee||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:B.utf8decode}),V.isNode&&V.isStream(Q)?S.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):v.prepareContent("the loaded zip file",Q,!0,ee.optimizedBinaryString,ee.base64).then(function(Ae){var fe=new F(ee);return fe.load(Ae),fe}).then(function(Ae){var fe=[S.Promise.resolve(Ae)],ce=Ae.files;if(ee.checkCRC32)for(var G=0;G<ce.length;G++)fe.push(X(ce[G]));return S.Promise.all(fe)}).then(function(Ae){for(var fe=Ae.shift(),ce=fe.files,G=0;G<ce.length;G++){var Z=ce[G],z=Z.fileNameStr,k=v.resolve(Z.fileNameStr);ne.file(k,Z.decompressed,{binary:!0,optimizedBinaryString:!0,date:Z.date,dir:Z.dir,comment:Z.fileCommentStr.length?Z.fileCommentStr:null,unixPermissions:Z.unixPermissions,dosPermissions:Z.dosPermissions,createFolders:ee.createFolders}),Z.dir||(ne.file(k).unsafeOriginalName=z)}return fe.zipComment.length&&(ne.comment=fe.zipComment),ne})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(m,b,x){var v=m("../utils"),S=m("../stream/GenericWorker");function B(F,O){S.call(this,"Nodejs stream input adapter for "+F),this._upstreamEnded=!1,this._bindStream(O)}v.inherits(B,S),B.prototype._bindStream=function(F){var O=this;(this._stream=F).pause(),F.on("data",function(V){O.push({data:V,meta:{percent:0}})}).on("error",function(V){O.isPaused?this.generatedError=V:O.error(V)}).on("end",function(){O.isPaused?O._upstreamEnded=!0:O.end()})},B.prototype.pause=function(){return!!S.prototype.pause.call(this)&&(this._stream.pause(),!0)},B.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=B},{"../stream/GenericWorker":28,"../utils":32}],13:[function(m,b,x){var v=m("readable-stream").Readable;function S(B,F,O){v.call(this,F),this._helper=B;var V=this;B.on("data",function(X,Q){V.push(X)||V._helper.pause(),O&&O(Q)}).on("error",function(X){V.emit("error",X)}).on("end",function(){V.push(null)})}m("../utils").inherits(S,v),S.prototype._read=function(){this._helper.resume()},b.exports=S},{"../utils":32,"readable-stream":16}],14:[function(m,b,x){b.exports={isNode:t!==void 0,newBufferFrom:function(v,S){if(t.from&&t.from!==Uint8Array.from)return t.from(v,S);if(typeof v=="number")throw new Error('The "data" argument must not be a number');return new t(v,S)},allocBuffer:function(v){if(t.alloc)return t.alloc(v);var S=new t(v);return S.fill(0),S},isBuffer:function(v){return t.isBuffer(v)},isStream:function(v){return v&&typeof v.on=="function"&&typeof v.pause=="function"&&typeof v.resume=="function"}}},{}],15:[function(m,b,x){function v(k,R,N){var U,Y=B.getTypeOf(R),de=B.extend(N||{},V);de.date=de.date||new Date,de.compression!==null&&(de.compression=de.compression.toUpperCase()),typeof de.unixPermissions=="string"&&(de.unixPermissions=parseInt(de.unixPermissions,8)),de.unixPermissions&&16384&de.unixPermissions&&(de.dir=!0),de.dosPermissions&&16&de.dosPermissions&&(de.dir=!0),de.dir&&(k=ce(k)),de.createFolders&&(U=fe(k))&&G.call(this,U,!0);var J=Y==="string"&&de.binary===!1&&de.base64===!1;N&&N.binary!==void 0||(de.binary=!J),(R instanceof X&&R.uncompressedSize===0||de.dir||!R||R.length===0)&&(de.base64=!1,de.binary=!0,R="",de.compression="STORE",Y="string");var xe;xe=R instanceof X||R instanceof F?R:ne.isNode&&ne.isStream(R)?new Ae(k,R):B.prepareContent(k,R,de.binary,de.optimizedBinaryString,de.base64);var Te=new Q(k,xe,de);this.files[k]=Te}var S=m("./utf8"),B=m("./utils"),F=m("./stream/GenericWorker"),O=m("./stream/StreamHelper"),V=m("./defaults"),X=m("./compressedObject"),Q=m("./zipObject"),ee=m("./generate"),ne=m("./nodejsUtils"),Ae=m("./nodejs/NodejsStreamInputAdapter"),fe=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var R=k.lastIndexOf("/");return 0<R?k.substring(0,R):""},ce=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},G=function(k,R){return R=R!==void 0?R:V.createFolders,k=ce(k),this.files[k]||v.call(this,k,null,{dir:!0,createFolders:R}),this.files[k]};function Z(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var R,N,U;for(R in this.files)U=this.files[R],(N=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&k(N,U)},filter:function(k){var R=[];return this.forEach(function(N,U){k(N,U)&&R.push(U)}),R},file:function(k,R,N){if(arguments.length!==1)return k=this.root+k,v.call(this,k,R,N),this;if(Z(k)){var U=k;return this.filter(function(de,J){return!J.dir&&U.test(de)})}var Y=this.files[this.root+k];return Y&&!Y.dir?Y:null},folder:function(k){if(!k)return this;if(Z(k))return this.filter(function(Y,de){return de.dir&&k.test(Y)});var R=this.root+k,N=G.call(this,R),U=this.clone();return U.root=N.name,U},remove:function(k){k=this.root+k;var R=this.files[k];if(R||(k.slice(-1)!=="/"&&(k+="/"),R=this.files[k]),R&&!R.dir)delete this.files[k];else for(var N=this.filter(function(Y,de){return de.name.slice(0,k.length)===k}),U=0;U<N.length;U++)delete this.files[N[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var R,N={};try{if((N=B.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:S.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");B.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var U=N.comment||this.comment||"";R=ee.generateWorker(this,N,U)}catch(Y){(R=new F("error")).error(Y)}return new O(R,N.type||"string",N.mimeType)},generateAsync:function(k,R){return this.generateInternalStream(k).accumulate(R)},generateNodeStream:function(k,R){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(R)}};b.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(m,b,x){b.exports=m("stream")},{stream:void 0}],17:[function(m,b,x){var v=m("./DataReader");function S(B){v.call(this,B);for(var F=0;F<this.data.length;F++)B[F]=255&B[F]}m("../utils").inherits(S,v),S.prototype.byteAt=function(B){return this.data[this.zero+B]},S.prototype.lastIndexOfSignature=function(B){for(var F=B.charCodeAt(0),O=B.charCodeAt(1),V=B.charCodeAt(2),X=B.charCodeAt(3),Q=this.length-4;0<=Q;--Q)if(this.data[Q]===F&&this.data[Q+1]===O&&this.data[Q+2]===V&&this.data[Q+3]===X)return Q-this.zero;return-1},S.prototype.readAndCheckSignature=function(B){var F=B.charCodeAt(0),O=B.charCodeAt(1),V=B.charCodeAt(2),X=B.charCodeAt(3),Q=this.readData(4);return F===Q[0]&&O===Q[1]&&V===Q[2]&&X===Q[3]},S.prototype.readData=function(B){if(this.checkOffset(B),B===0)return[];var F=this.data.slice(this.zero+this.index,this.zero+this.index+B);return this.index+=B,F},b.exports=S},{"../utils":32,"./DataReader":18}],18:[function(m,b,x){var v=m("../utils");function S(B){this.data=B,this.length=B.length,this.index=0,this.zero=0}S.prototype={checkOffset:function(B){this.checkIndex(this.index+B)},checkIndex:function(B){if(this.length<this.zero+B||B<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+B+"). Corrupted zip ?")},setIndex:function(B){this.checkIndex(B),this.index=B},skip:function(B){this.setIndex(this.index+B)},byteAt:function(){},readInt:function(B){var F,O=0;for(this.checkOffset(B),F=this.index+B-1;F>=this.index;F--)O=(O<<8)+this.byteAt(F);return this.index+=B,O},readString:function(B){return v.transformTo("string",this.readData(B))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var B=this.readInt(4);return new Date(Date.UTC(1980+(B>>25&127),(B>>21&15)-1,B>>16&31,B>>11&31,B>>5&63,(31&B)<<1))}},b.exports=S},{"../utils":32}],19:[function(m,b,x){var v=m("./Uint8ArrayReader");function S(B){v.call(this,B)}m("../utils").inherits(S,v),S.prototype.readData=function(B){this.checkOffset(B);var F=this.data.slice(this.zero+this.index,this.zero+this.index+B);return this.index+=B,F},b.exports=S},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(m,b,x){var v=m("./DataReader");function S(B){v.call(this,B)}m("../utils").inherits(S,v),S.prototype.byteAt=function(B){return this.data.charCodeAt(this.zero+B)},S.prototype.lastIndexOfSignature=function(B){return this.data.lastIndexOf(B)-this.zero},S.prototype.readAndCheckSignature=function(B){return B===this.readData(4)},S.prototype.readData=function(B){this.checkOffset(B);var F=this.data.slice(this.zero+this.index,this.zero+this.index+B);return this.index+=B,F},b.exports=S},{"../utils":32,"./DataReader":18}],21:[function(m,b,x){var v=m("./ArrayReader");function S(B){v.call(this,B)}m("../utils").inherits(S,v),S.prototype.readData=function(B){if(this.checkOffset(B),B===0)return new Uint8Array(0);var F=this.data.subarray(this.zero+this.index,this.zero+this.index+B);return this.index+=B,F},b.exports=S},{"../utils":32,"./ArrayReader":17}],22:[function(m,b,x){var v=m("../utils"),S=m("../support"),B=m("./ArrayReader"),F=m("./StringReader"),O=m("./NodeBufferReader"),V=m("./Uint8ArrayReader");b.exports=function(X){var Q=v.getTypeOf(X);return v.checkSupport(Q),Q!=="string"||S.uint8array?Q==="nodebuffer"?new O(X):S.uint8array?new V(v.transformTo("uint8array",X)):new B(v.transformTo("array",X)):new F(X)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(m,b,x){x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(m,b,x){var v=m("./GenericWorker"),S=m("../utils");function B(F){v.call(this,"ConvertWorker to "+F),this.destType=F}S.inherits(B,v),B.prototype.processChunk=function(F){this.push({data:S.transformTo(this.destType,F.data),meta:F.meta})},b.exports=B},{"../utils":32,"./GenericWorker":28}],25:[function(m,b,x){var v=m("./GenericWorker"),S=m("../crc32");function B(){v.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}m("../utils").inherits(B,v),B.prototype.processChunk=function(F){this.streamInfo.crc32=S(F.data,this.streamInfo.crc32||0),this.push(F)},b.exports=B},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(m,b,x){var v=m("../utils"),S=m("./GenericWorker");function B(F){S.call(this,"DataLengthProbe for "+F),this.propName=F,this.withStreamInfo(F,0)}v.inherits(B,S),B.prototype.processChunk=function(F){if(F){var O=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=O+F.data.length}S.prototype.processChunk.call(this,F)},b.exports=B},{"../utils":32,"./GenericWorker":28}],27:[function(m,b,x){var v=m("../utils"),S=m("./GenericWorker");function B(F){S.call(this,"DataWorker");var O=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,F.then(function(V){O.dataIsReady=!0,O.data=V,O.max=V&&V.length||0,O.type=v.getTypeOf(V),O.isPaused||O._tickAndRepeat()},function(V){O.error(V)})}v.inherits(B,S),B.prototype.cleanUp=function(){S.prototype.cleanUp.call(this),this.data=null},B.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,v.delay(this._tickAndRepeat,[],this)),!0)},B.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(v.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},B.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var F=null,O=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":F=this.data.substring(this.index,O);break;case"uint8array":F=this.data.subarray(this.index,O);break;case"array":case"nodebuffer":F=this.data.slice(this.index,O)}return this.index=O,this.push({data:F,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=B},{"../utils":32,"./GenericWorker":28}],28:[function(m,b,x){function v(S){this.name=S||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}v.prototype={push:function(S){this.emit("data",S)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(S){this.emit("error",S)}return!0},error:function(S){return!this.isFinished&&(this.isPaused?this.generatedError=S:(this.isFinished=!0,this.emit("error",S),this.previous&&this.previous.error(S),this.cleanUp()),!0)},on:function(S,B){return this._listeners[S].push(B),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(S,B){if(this._listeners[S])for(var F=0;F<this._listeners[S].length;F++)this._listeners[S][F].call(this,B)},pipe:function(S){return S.registerPrevious(this)},registerPrevious:function(S){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=S.streamInfo,this.mergeStreamInfo(),this.previous=S;var B=this;return S.on("data",function(F){B.processChunk(F)}),S.on("end",function(){B.end()}),S.on("error",function(F){B.error(F)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var S=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),S=!0),this.previous&&this.previous.resume(),!S},flush:function(){},processChunk:function(S){this.push(S)},withStreamInfo:function(S,B){return this.extraStreamInfo[S]=B,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var S in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,S)&&(this.streamInfo[S]=this.extraStreamInfo[S])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var S="Worker "+this.name;return this.previous?this.previous+" -> "+S:S}},b.exports=v},{}],29:[function(m,b,x){var v=m("../utils"),S=m("./ConvertWorker"),B=m("./GenericWorker"),F=m("../base64"),O=m("../support"),V=m("../external"),X=null;if(O.nodestream)try{X=m("../nodejs/NodejsStreamOutputAdapter")}catch{}function Q(ee,ne,Ae){var fe=ne;switch(ne){case"blob":case"arraybuffer":fe="uint8array";break;case"base64":fe="string"}try{this._internalType=fe,this._outputType=ne,this._mimeType=Ae,v.checkSupport(fe),this._worker=ee.pipe(new S(fe)),ee.lock()}catch(ce){this._worker=new B("error"),this._worker.error(ce)}}Q.prototype={accumulate:function(ee){return function(ne,Ae){return new V.Promise(function(fe,ce){var G=[],Z=ne._internalType,z=ne._outputType,k=ne._mimeType;ne.on("data",function(R,N){G.push(R),Ae&&Ae(N)}).on("error",function(R){G=[],ce(R)}).on("end",function(){try{var R=function(N,U,Y){switch(N){case"blob":return v.newBlob(v.transformTo("arraybuffer",U),Y);case"base64":return F.encode(U);default:return v.transformTo(N,U)}}(z,function(N,U){var Y,de=0,J=null,xe=0;for(Y=0;Y<U.length;Y++)xe+=U[Y].length;switch(N){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(J=new Uint8Array(xe),Y=0;Y<U.length;Y++)J.set(U[Y],de),de+=U[Y].length;return J;case"nodebuffer":return t.concat(U);default:throw new Error("concat : unsupported type '"+N+"'")}}(Z,G),k);fe(R)}catch(N){ce(N)}G=[]}).resume()})}(this,ee)},on:function(ee,ne){var Ae=this;return ee==="data"?this._worker.on(ee,function(fe){ne.call(Ae,fe.data,fe.meta)}):this._worker.on(ee,function(){v.delay(ne,arguments,Ae)}),this},resume:function(){return v.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(ee){if(v.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new X(this,{objectMode:this._outputType!=="nodebuffer"},ee)}},b.exports=Q},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(m,b,x){if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",x.nodebuffer=t!==void 0,x.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")x.blob=!1;else{var v=new ArrayBuffer(0);try{x.blob=new Blob([v],{type:"application/zip"}).size===0}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);S.append(v),x.blob=S.getBlob("application/zip").size===0}catch{x.blob=!1}}}try{x.nodestream=!!m("readable-stream").Readable}catch{x.nodestream=!1}},{"readable-stream":16}],31:[function(m,b,x){for(var v=m("./utils"),S=m("./support"),B=m("./nodejsUtils"),F=m("./stream/GenericWorker"),O=new Array(256),V=0;V<256;V++)O[V]=252<=V?6:248<=V?5:240<=V?4:224<=V?3:192<=V?2:1;function X(){F.call(this,"utf-8 decode"),this.leftOver=null}function Q(){F.call(this,"utf-8 encode")}O[254]=O[254]=1,x.utf8encode=function(ee){return S.nodebuffer?B.newBufferFrom(ee,"utf-8"):function(ne){var Ae,fe,ce,G,Z,z=ne.length,k=0;for(G=0;G<z;G++)(64512&(fe=ne.charCodeAt(G)))==55296&&G+1<z&&(64512&(ce=ne.charCodeAt(G+1)))==56320&&(fe=65536+(fe-55296<<10)+(ce-56320),G++),k+=fe<128?1:fe<2048?2:fe<65536?3:4;for(Ae=S.uint8array?new Uint8Array(k):new Array(k),G=Z=0;Z<k;G++)(64512&(fe=ne.charCodeAt(G)))==55296&&G+1<z&&(64512&(ce=ne.charCodeAt(G+1)))==56320&&(fe=65536+(fe-55296<<10)+(ce-56320),G++),fe<128?Ae[Z++]=fe:(fe<2048?Ae[Z++]=192|fe>>>6:(fe<65536?Ae[Z++]=224|fe>>>12:(Ae[Z++]=240|fe>>>18,Ae[Z++]=128|fe>>>12&63),Ae[Z++]=128|fe>>>6&63),Ae[Z++]=128|63&fe);return Ae}(ee)},x.utf8decode=function(ee){return S.nodebuffer?v.transformTo("nodebuffer",ee).toString("utf-8"):function(ne){var Ae,fe,ce,G,Z=ne.length,z=new Array(2*Z);for(Ae=fe=0;Ae<Z;)if((ce=ne[Ae++])<128)z[fe++]=ce;else if(4<(G=O[ce]))z[fe++]=65533,Ae+=G-1;else{for(ce&=G===2?31:G===3?15:7;1<G&&Ae<Z;)ce=ce<<6|63&ne[Ae++],G--;1<G?z[fe++]=65533:ce<65536?z[fe++]=ce:(ce-=65536,z[fe++]=55296|ce>>10&1023,z[fe++]=56320|1023&ce)}return z.length!==fe&&(z.subarray?z=z.subarray(0,fe):z.length=fe),v.applyFromCharCode(z)}(ee=v.transformTo(S.uint8array?"uint8array":"array",ee))},v.inherits(X,F),X.prototype.processChunk=function(ee){var ne=v.transformTo(S.uint8array?"uint8array":"array",ee.data);if(this.leftOver&&this.leftOver.length){if(S.uint8array){var Ae=ne;(ne=new Uint8Array(Ae.length+this.leftOver.length)).set(this.leftOver,0),ne.set(Ae,this.leftOver.length)}else ne=this.leftOver.concat(ne);this.leftOver=null}var fe=function(G,Z){var z;for((Z=Z||G.length)>G.length&&(Z=G.length),z=Z-1;0<=z&&(192&G[z])==128;)z--;return z<0||z===0?Z:z+O[G[z]]>Z?z:Z}(ne),ce=ne;fe!==ne.length&&(S.uint8array?(ce=ne.subarray(0,fe),this.leftOver=ne.subarray(fe,ne.length)):(ce=ne.slice(0,fe),this.leftOver=ne.slice(fe,ne.length))),this.push({data:x.utf8decode(ce),meta:ee.meta})},X.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=X,v.inherits(Q,F),Q.prototype.processChunk=function(ee){this.push({data:x.utf8encode(ee.data),meta:ee.meta})},x.Utf8EncodeWorker=Q},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(m,b,x){var v=m("./support"),S=m("./base64"),B=m("./nodejsUtils"),F=m("./external");function O(Ae){return Ae}function V(Ae,fe){for(var ce=0;ce<Ae.length;++ce)fe[ce]=255&Ae.charCodeAt(ce);return fe}m("setimmediate"),x.newBlob=function(Ae,fe){x.checkSupport("blob");try{return new Blob([Ae],{type:fe})}catch{try{var ce=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return ce.append(Ae),ce.getBlob(fe)}catch{throw new Error("Bug : can't construct the Blob.")}}};var X={stringifyByChunk:function(Ae,fe,ce){var G=[],Z=0,z=Ae.length;if(z<=ce)return String.fromCharCode.apply(null,Ae);for(;Z<z;)fe==="array"||fe==="nodebuffer"?G.push(String.fromCharCode.apply(null,Ae.slice(Z,Math.min(Z+ce,z)))):G.push(String.fromCharCode.apply(null,Ae.subarray(Z,Math.min(Z+ce,z)))),Z+=ce;return G.join("")},stringifyByChar:function(Ae){for(var fe="",ce=0;ce<Ae.length;ce++)fe+=String.fromCharCode(Ae[ce]);return fe},applyCanBeUsed:{uint8array:function(){try{return v.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return v.nodebuffer&&String.fromCharCode.apply(null,B.allocBuffer(1)).length===1}catch{return!1}}()}};function Q(Ae){var fe=65536,ce=x.getTypeOf(Ae),G=!0;if(ce==="uint8array"?G=X.applyCanBeUsed.uint8array:ce==="nodebuffer"&&(G=X.applyCanBeUsed.nodebuffer),G)for(;1<fe;)try{return X.stringifyByChunk(Ae,ce,fe)}catch{fe=Math.floor(fe/2)}return X.stringifyByChar(Ae)}function ee(Ae,fe){for(var ce=0;ce<Ae.length;ce++)fe[ce]=Ae[ce];return fe}x.applyFromCharCode=Q;var ne={};ne.string={string:O,array:function(Ae){return V(Ae,new Array(Ae.length))},arraybuffer:function(Ae){return ne.string.uint8array(Ae).buffer},uint8array:function(Ae){return V(Ae,new Uint8Array(Ae.length))},nodebuffer:function(Ae){return V(Ae,B.allocBuffer(Ae.length))}},ne.array={string:Q,array:O,arraybuffer:function(Ae){return new Uint8Array(Ae).buffer},uint8array:function(Ae){return new Uint8Array(Ae)},nodebuffer:function(Ae){return B.newBufferFrom(Ae)}},ne.arraybuffer={string:function(Ae){return Q(new Uint8Array(Ae))},array:function(Ae){return ee(new Uint8Array(Ae),new Array(Ae.byteLength))},arraybuffer:O,uint8array:function(Ae){return new Uint8Array(Ae)},nodebuffer:function(Ae){return B.newBufferFrom(new Uint8Array(Ae))}},ne.uint8array={string:Q,array:function(Ae){return ee(Ae,new Array(Ae.length))},arraybuffer:function(Ae){return Ae.buffer},uint8array:O,nodebuffer:function(Ae){return B.newBufferFrom(Ae)}},ne.nodebuffer={string:Q,array:function(Ae){return ee(Ae,new Array(Ae.length))},arraybuffer:function(Ae){return ne.nodebuffer.uint8array(Ae).buffer},uint8array:function(Ae){return ee(Ae,new Uint8Array(Ae.length))},nodebuffer:O},x.transformTo=function(Ae,fe){if(fe=fe||"",!Ae)return fe;x.checkSupport(Ae);var ce=x.getTypeOf(fe);return ne[ce][Ae](fe)},x.resolve=function(Ae){for(var fe=Ae.split("/"),ce=[],G=0;G<fe.length;G++){var Z=fe[G];Z==="."||Z===""&&G!==0&&G!==fe.length-1||(Z===".."?ce.pop():ce.push(Z))}return ce.join("/")},x.getTypeOf=function(Ae){return typeof Ae=="string"?"string":Object.prototype.toString.call(Ae)==="[object Array]"?"array":v.nodebuffer&&B.isBuffer(Ae)?"nodebuffer":v.uint8array&&Ae instanceof Uint8Array?"uint8array":v.arraybuffer&&Ae instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(Ae){if(!v[Ae.toLowerCase()])throw new Error(Ae+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(Ae){var fe,ce,G="";for(ce=0;ce<(Ae||"").length;ce++)G+="\\x"+((fe=Ae.charCodeAt(ce))<16?"0":"")+fe.toString(16).toUpperCase();return G},x.delay=function(Ae,fe,ce){g(function(){Ae.apply(ce||null,fe||[])})},x.inherits=function(Ae,fe){function ce(){}ce.prototype=fe.prototype,Ae.prototype=new ce},x.extend=function(){var Ae,fe,ce={};for(Ae=0;Ae<arguments.length;Ae++)for(fe in arguments[Ae])Object.prototype.hasOwnProperty.call(arguments[Ae],fe)&&ce[fe]===void 0&&(ce[fe]=arguments[Ae][fe]);return ce},x.prepareContent=function(Ae,fe,ce,G,Z){return F.Promise.resolve(fe).then(function(z){return v.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new F.Promise(function(k,R){var N=new FileReader;N.onload=function(U){k(U.target.result)},N.onerror=function(U){R(U.target.error)},N.readAsArrayBuffer(z)}):z}).then(function(z){var k=x.getTypeOf(z);return k?(k==="arraybuffer"?z=x.transformTo("uint8array",z):k==="string"&&(Z?z=S.decode(z):ce&&G!==!0&&(z=function(R){return V(R,v.uint8array?new Uint8Array(R.length):new Array(R.length))}(z))),z):F.Promise.reject(new Error("Can't read the data of '"+Ae+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(m,b,x){var v=m("./reader/readerFor"),S=m("./utils"),B=m("./signature"),F=m("./zipEntry"),O=m("./support");function V(X){this.files=[],this.loadOptions=X}V.prototype={checkSignature:function(X){if(!this.reader.readAndCheckSignature(X)){this.reader.index-=4;var Q=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+S.pretty(Q)+", expected "+S.pretty(X)+")")}},isSignature:function(X,Q){var ee=this.reader.index;this.reader.setIndex(X);var ne=this.reader.readString(4)===Q;return this.reader.setIndex(ee),ne},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var X=this.reader.readData(this.zipCommentLength),Q=O.uint8array?"uint8array":"array",ee=S.transformTo(Q,X);this.zipComment=this.loadOptions.decodeFileName(ee)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var X,Q,ee,ne=this.zip64EndOfCentralSize-44;0<ne;)X=this.reader.readInt(2),Q=this.reader.readInt(4),ee=this.reader.readData(Q),this.zip64ExtensibleData[X]={id:X,length:Q,value:ee}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var X,Q;for(X=0;X<this.files.length;X++)Q=this.files[X],this.reader.setIndex(Q.localHeaderOffset),this.checkSignature(B.LOCAL_FILE_HEADER),Q.readLocalPart(this.reader),Q.handleUTF8(),Q.processAttributes()},readCentralDir:function(){var X;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(B.CENTRAL_FILE_HEADER);)(X=new F({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(X);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var X=this.reader.lastIndexOfSignature(B.CENTRAL_DIRECTORY_END);if(X<0)throw this.isSignature(0,B.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(X);var Q=X;if(this.checkSignature(B.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===S.MAX_VALUE_16BITS||this.diskWithCentralDirStart===S.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===S.MAX_VALUE_16BITS||this.centralDirRecords===S.MAX_VALUE_16BITS||this.centralDirSize===S.MAX_VALUE_32BITS||this.centralDirOffset===S.MAX_VALUE_32BITS){if(this.zip64=!0,(X=this.reader.lastIndexOfSignature(B.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(X),this.checkSignature(B.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,B.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(B.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(B.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var ee=this.centralDirOffset+this.centralDirSize;this.zip64&&(ee+=20,ee+=12+this.zip64EndOfCentralSize);var ne=Q-ee;if(0<ne)this.isSignature(Q,B.CENTRAL_FILE_HEADER)||(this.reader.zero=ne);else if(ne<0)throw new Error("Corrupted zip: missing "+Math.abs(ne)+" bytes.")},prepareReader:function(X){this.reader=v(X)},load:function(X){this.prepareReader(X),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=V},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(m,b,x){var v=m("./reader/readerFor"),S=m("./utils"),B=m("./compressedObject"),F=m("./crc32"),O=m("./utf8"),V=m("./compressions"),X=m("./support");function Q(ee,ne){this.options=ee,this.loadOptions=ne}Q.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(ee){var ne,Ae;if(ee.skip(22),this.fileNameLength=ee.readInt(2),Ae=ee.readInt(2),this.fileName=ee.readData(this.fileNameLength),ee.skip(Ae),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((ne=function(fe){for(var ce in V)if(Object.prototype.hasOwnProperty.call(V,ce)&&V[ce].magic===fe)return V[ce];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+S.pretty(this.compressionMethod)+" unknown (inner file : "+S.transformTo("string",this.fileName)+")");this.decompressed=new B(this.compressedSize,this.uncompressedSize,this.crc32,ne,ee.readData(this.compressedSize))},readCentralPart:function(ee){this.versionMadeBy=ee.readInt(2),ee.skip(2),this.bitFlag=ee.readInt(2),this.compressionMethod=ee.readString(2),this.date=ee.readDate(),this.crc32=ee.readInt(4),this.compressedSize=ee.readInt(4),this.uncompressedSize=ee.readInt(4);var ne=ee.readInt(2);if(this.extraFieldsLength=ee.readInt(2),this.fileCommentLength=ee.readInt(2),this.diskNumberStart=ee.readInt(2),this.internalFileAttributes=ee.readInt(2),this.externalFileAttributes=ee.readInt(4),this.localHeaderOffset=ee.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");ee.skip(ne),this.readExtraFields(ee),this.parseZIP64ExtraField(ee),this.fileComment=ee.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var ee=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),ee==0&&(this.dosPermissions=63&this.externalFileAttributes),ee==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var ee=v(this.extraFields[1].value);this.uncompressedSize===S.MAX_VALUE_32BITS&&(this.uncompressedSize=ee.readInt(8)),this.compressedSize===S.MAX_VALUE_32BITS&&(this.compressedSize=ee.readInt(8)),this.localHeaderOffset===S.MAX_VALUE_32BITS&&(this.localHeaderOffset=ee.readInt(8)),this.diskNumberStart===S.MAX_VALUE_32BITS&&(this.diskNumberStart=ee.readInt(4))}},readExtraFields:function(ee){var ne,Ae,fe,ce=ee.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});ee.index+4<ce;)ne=ee.readInt(2),Ae=ee.readInt(2),fe=ee.readData(Ae),this.extraFields[ne]={id:ne,length:Ae,value:fe};ee.setIndex(ce)},handleUTF8:function(){var ee=X.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=O.utf8decode(this.fileName),this.fileCommentStr=O.utf8decode(this.fileComment);else{var ne=this.findExtraFieldUnicodePath();if(ne!==null)this.fileNameStr=ne;else{var Ae=S.transformTo(ee,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Ae)}var fe=this.findExtraFieldUnicodeComment();if(fe!==null)this.fileCommentStr=fe;else{var ce=S.transformTo(ee,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ce)}}},findExtraFieldUnicodePath:function(){var ee=this.extraFields[28789];if(ee){var ne=v(ee.value);return ne.readInt(1)!==1||F(this.fileName)!==ne.readInt(4)?null:O.utf8decode(ne.readData(ee.length-5))}return null},findExtraFieldUnicodeComment:function(){var ee=this.extraFields[25461];if(ee){var ne=v(ee.value);return ne.readInt(1)!==1||F(this.fileComment)!==ne.readInt(4)?null:O.utf8decode(ne.readData(ee.length-5))}return null}},b.exports=Q},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(m,b,x){function v(ne,Ae,fe){this.name=ne,this.dir=fe.dir,this.date=fe.date,this.comment=fe.comment,this.unixPermissions=fe.unixPermissions,this.dosPermissions=fe.dosPermissions,this._data=Ae,this._dataBinary=fe.binary,this.options={compression:fe.compression,compressionOptions:fe.compressionOptions}}var S=m("./stream/StreamHelper"),B=m("./stream/DataWorker"),F=m("./utf8"),O=m("./compressedObject"),V=m("./stream/GenericWorker");v.prototype={internalStream:function(ne){var Ae=null,fe="string";try{if(!ne)throw new Error("No output type specified.");var ce=(fe=ne.toLowerCase())==="string"||fe==="text";fe!=="binarystring"&&fe!=="text"||(fe="string"),Ae=this._decompressWorker();var G=!this._dataBinary;G&&!ce&&(Ae=Ae.pipe(new F.Utf8EncodeWorker)),!G&&ce&&(Ae=Ae.pipe(new F.Utf8DecodeWorker))}catch(Z){(Ae=new V("error")).error(Z)}return new S(Ae,fe,"")},async:function(ne,Ae){return this.internalStream(ne).accumulate(Ae)},nodeStream:function(ne,Ae){return this.internalStream(ne||"nodebuffer").toNodejsStream(Ae)},_compressWorker:function(ne,Ae){if(this._data instanceof O&&this._data.compression.magic===ne.magic)return this._data.getCompressedWorker();var fe=this._decompressWorker();return this._dataBinary||(fe=fe.pipe(new F.Utf8EncodeWorker)),O.createWorkerFrom(fe,ne,Ae)},_decompressWorker:function(){return this._data instanceof O?this._data.getContentWorker():this._data instanceof V?this._data:new B(this._data)}};for(var X=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Q=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},ee=0;ee<X.length;ee++)v.prototype[X[ee]]=Q;b.exports=v},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(m,b,x){(function(v){var S,B,F=v.MutationObserver||v.WebKitMutationObserver;if(F){var O=0,V=new F(ne),X=v.document.createTextNode("");V.observe(X,{characterData:!0}),S=function(){X.data=O=++O%2}}else if(v.setImmediate||v.MessageChannel===void 0)S="document"in v&&"onreadystatechange"in v.document.createElement("script")?function(){var Ae=v.document.createElement("script");Ae.onreadystatechange=function(){ne(),Ae.onreadystatechange=null,Ae.parentNode.removeChild(Ae),Ae=null},v.document.documentElement.appendChild(Ae)}:function(){setTimeout(ne,0)};else{var Q=new v.MessageChannel;Q.port1.onmessage=ne,S=function(){Q.port2.postMessage(0)}}var ee=[];function ne(){var Ae,fe;B=!0;for(var ce=ee.length;ce;){for(fe=ee,ee=[],Ae=-1;++Ae<ce;)fe[Ae]();ce=ee.length}B=!1}b.exports=function(Ae){ee.push(Ae)!==1||B||S()}}).call(this,l!==void 0?l:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(m,b,x){var v=m("immediate");function S(){}var B={},F=["REJECTED"],O=["FULFILLED"],V=["PENDING"];function X(ce){if(typeof ce!="function")throw new TypeError("resolver must be a function");this.state=V,this.queue=[],this.outcome=void 0,ce!==S&&Ae(this,ce)}function Q(ce,G,Z){this.promise=ce,typeof G=="function"&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),typeof Z=="function"&&(this.onRejected=Z,this.callRejected=this.otherCallRejected)}function ee(ce,G,Z){v(function(){var z;try{z=G(Z)}catch(k){return B.reject(ce,k)}z===ce?B.reject(ce,new TypeError("Cannot resolve promise with itself")):B.resolve(ce,z)})}function ne(ce){var G=ce&&ce.then;if(ce&&(typeof ce=="object"||typeof ce=="function")&&typeof G=="function")return function(){G.apply(ce,arguments)}}function Ae(ce,G){var Z=!1;function z(N){Z||(Z=!0,B.reject(ce,N))}function k(N){Z||(Z=!0,B.resolve(ce,N))}var R=fe(function(){G(k,z)});R.status==="error"&&z(R.value)}function fe(ce,G){var Z={};try{Z.value=ce(G),Z.status="success"}catch(z){Z.status="error",Z.value=z}return Z}(b.exports=X).prototype.finally=function(ce){if(typeof ce!="function")return this;var G=this.constructor;return this.then(function(Z){return G.resolve(ce()).then(function(){return Z})},function(Z){return G.resolve(ce()).then(function(){throw Z})})},X.prototype.catch=function(ce){return this.then(null,ce)},X.prototype.then=function(ce,G){if(typeof ce!="function"&&this.state===O||typeof G!="function"&&this.state===F)return this;var Z=new this.constructor(S);return this.state!==V?ee(Z,this.state===O?ce:G,this.outcome):this.queue.push(new Q(Z,ce,G)),Z},Q.prototype.callFulfilled=function(ce){B.resolve(this.promise,ce)},Q.prototype.otherCallFulfilled=function(ce){ee(this.promise,this.onFulfilled,ce)},Q.prototype.callRejected=function(ce){B.reject(this.promise,ce)},Q.prototype.otherCallRejected=function(ce){ee(this.promise,this.onRejected,ce)},B.resolve=function(ce,G){var Z=fe(ne,G);if(Z.status==="error")return B.reject(ce,Z.value);var z=Z.value;if(z)Ae(ce,z);else{ce.state=O,ce.outcome=G;for(var k=-1,R=ce.queue.length;++k<R;)ce.queue[k].callFulfilled(G)}return ce},B.reject=function(ce,G){ce.state=F,ce.outcome=G;for(var Z=-1,z=ce.queue.length;++Z<z;)ce.queue[Z].callRejected(G);return ce},X.resolve=function(ce){return ce instanceof this?ce:B.resolve(new this(S),ce)},X.reject=function(ce){var G=new this(S);return B.reject(G,ce)},X.all=function(ce){var G=this;if(Object.prototype.toString.call(ce)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=ce.length,z=!1;if(!Z)return this.resolve([]);for(var k=new Array(Z),R=0,N=-1,U=new this(S);++N<Z;)Y(ce[N],N);return U;function Y(de,J){G.resolve(de).then(function(xe){k[J]=xe,++R!==Z||z||(z=!0,B.resolve(U,k))},function(xe){z||(z=!0,B.reject(U,xe))})}},X.race=function(ce){if(Object.prototype.toString.call(ce)!=="[object Array]")return this.reject(new TypeError("must be an array"));var G=ce.length,Z=!1;if(!G)return this.resolve([]);for(var z,k=-1,R=new this(S);++k<G;)z=ce[k],this.resolve(z).then(function(N){Z||(Z=!0,B.resolve(R,N))},function(N){Z||(Z=!0,B.reject(R,N))});return R}},{immediate:36}],38:[function(m,b,x){var v={};(0,m("./lib/utils/common").assign)(v,m("./lib/deflate"),m("./lib/inflate"),m("./lib/zlib/constants")),b.exports=v},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(m,b,x){var v=m("./zlib/deflate"),S=m("./utils/common"),B=m("./utils/strings"),F=m("./zlib/messages"),O=m("./zlib/zstream"),V=Object.prototype.toString;function X(ee){if(!(this instanceof X))return new X(ee);this.options=S.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ee||{});var ne=this.options;ne.raw&&0<ne.windowBits?ne.windowBits=-ne.windowBits:ne.gzip&&0<ne.windowBits&&ne.windowBits<16&&(ne.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O,this.strm.avail_out=0;var Ae=v.deflateInit2(this.strm,ne.level,ne.method,ne.windowBits,ne.memLevel,ne.strategy);if(Ae!==0)throw new Error(F[Ae]);if(ne.header&&v.deflateSetHeader(this.strm,ne.header),ne.dictionary){var fe;if(fe=typeof ne.dictionary=="string"?B.string2buf(ne.dictionary):V.call(ne.dictionary)==="[object ArrayBuffer]"?new Uint8Array(ne.dictionary):ne.dictionary,(Ae=v.deflateSetDictionary(this.strm,fe))!==0)throw new Error(F[Ae]);this._dict_set=!0}}function Q(ee,ne){var Ae=new X(ne);if(Ae.push(ee,!0),Ae.err)throw Ae.msg||F[Ae.err];return Ae.result}X.prototype.push=function(ee,ne){var Ae,fe,ce=this.strm,G=this.options.chunkSize;if(this.ended)return!1;fe=ne===~~ne?ne:ne===!0?4:0,typeof ee=="string"?ce.input=B.string2buf(ee):V.call(ee)==="[object ArrayBuffer]"?ce.input=new Uint8Array(ee):ce.input=ee,ce.next_in=0,ce.avail_in=ce.input.length;do{if(ce.avail_out===0&&(ce.output=new S.Buf8(G),ce.next_out=0,ce.avail_out=G),(Ae=v.deflate(ce,fe))!==1&&Ae!==0)return this.onEnd(Ae),!(this.ended=!0);ce.avail_out!==0&&(ce.avail_in!==0||fe!==4&&fe!==2)||(this.options.to==="string"?this.onData(B.buf2binstring(S.shrinkBuf(ce.output,ce.next_out))):this.onData(S.shrinkBuf(ce.output,ce.next_out)))}while((0<ce.avail_in||ce.avail_out===0)&&Ae!==1);return fe===4?(Ae=v.deflateEnd(this.strm),this.onEnd(Ae),this.ended=!0,Ae===0):fe!==2||(this.onEnd(0),!(ce.avail_out=0))},X.prototype.onData=function(ee){this.chunks.push(ee)},X.prototype.onEnd=function(ee){ee===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=ee,this.msg=this.strm.msg},x.Deflate=X,x.deflate=Q,x.deflateRaw=function(ee,ne){return(ne=ne||{}).raw=!0,Q(ee,ne)},x.gzip=function(ee,ne){return(ne=ne||{}).gzip=!0,Q(ee,ne)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(m,b,x){var v=m("./zlib/inflate"),S=m("./utils/common"),B=m("./utils/strings"),F=m("./zlib/constants"),O=m("./zlib/messages"),V=m("./zlib/zstream"),X=m("./zlib/gzheader"),Q=Object.prototype.toString;function ee(Ae){if(!(this instanceof ee))return new ee(Ae);this.options=S.assign({chunkSize:16384,windowBits:0,to:""},Ae||{});var fe=this.options;fe.raw&&0<=fe.windowBits&&fe.windowBits<16&&(fe.windowBits=-fe.windowBits,fe.windowBits===0&&(fe.windowBits=-15)),!(0<=fe.windowBits&&fe.windowBits<16)||Ae&&Ae.windowBits||(fe.windowBits+=32),15<fe.windowBits&&fe.windowBits<48&&(15&fe.windowBits)==0&&(fe.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new V,this.strm.avail_out=0;var ce=v.inflateInit2(this.strm,fe.windowBits);if(ce!==F.Z_OK)throw new Error(O[ce]);this.header=new X,v.inflateGetHeader(this.strm,this.header)}function ne(Ae,fe){var ce=new ee(fe);if(ce.push(Ae,!0),ce.err)throw ce.msg||O[ce.err];return ce.result}ee.prototype.push=function(Ae,fe){var ce,G,Z,z,k,R,N=this.strm,U=this.options.chunkSize,Y=this.options.dictionary,de=!1;if(this.ended)return!1;G=fe===~~fe?fe:fe===!0?F.Z_FINISH:F.Z_NO_FLUSH,typeof Ae=="string"?N.input=B.binstring2buf(Ae):Q.call(Ae)==="[object ArrayBuffer]"?N.input=new Uint8Array(Ae):N.input=Ae,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new S.Buf8(U),N.next_out=0,N.avail_out=U),(ce=v.inflate(N,F.Z_NO_FLUSH))===F.Z_NEED_DICT&&Y&&(R=typeof Y=="string"?B.string2buf(Y):Q.call(Y)==="[object ArrayBuffer]"?new Uint8Array(Y):Y,ce=v.inflateSetDictionary(this.strm,R)),ce===F.Z_BUF_ERROR&&de===!0&&(ce=F.Z_OK,de=!1),ce!==F.Z_STREAM_END&&ce!==F.Z_OK)return this.onEnd(ce),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&ce!==F.Z_STREAM_END&&(N.avail_in!==0||G!==F.Z_FINISH&&G!==F.Z_SYNC_FLUSH)||(this.options.to==="string"?(Z=B.utf8border(N.output,N.next_out),z=N.next_out-Z,k=B.buf2string(N.output,Z),N.next_out=z,N.avail_out=U-z,z&&S.arraySet(N.output,N.output,Z,z,0),this.onData(k)):this.onData(S.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(de=!0)}while((0<N.avail_in||N.avail_out===0)&&ce!==F.Z_STREAM_END);return ce===F.Z_STREAM_END&&(G=F.Z_FINISH),G===F.Z_FINISH?(ce=v.inflateEnd(this.strm),this.onEnd(ce),this.ended=!0,ce===F.Z_OK):G!==F.Z_SYNC_FLUSH||(this.onEnd(F.Z_OK),!(N.avail_out=0))},ee.prototype.onData=function(Ae){this.chunks.push(Ae)},ee.prototype.onEnd=function(Ae){Ae===F.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=Ae,this.msg=this.strm.msg},x.Inflate=ee,x.inflate=ne,x.inflateRaw=function(Ae,fe){return(fe=fe||{}).raw=!0,ne(Ae,fe)},x.ungzip=ne},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(m,b,x){var v=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";x.assign=function(F){for(var O=Array.prototype.slice.call(arguments,1);O.length;){var V=O.shift();if(V){if(typeof V!="object")throw new TypeError(V+"must be non-object");for(var X in V)V.hasOwnProperty(X)&&(F[X]=V[X])}}return F},x.shrinkBuf=function(F,O){return F.length===O?F:F.subarray?F.subarray(0,O):(F.length=O,F)};var S={arraySet:function(F,O,V,X,Q){if(O.subarray&&F.subarray)F.set(O.subarray(V,V+X),Q);else for(var ee=0;ee<X;ee++)F[Q+ee]=O[V+ee]},flattenChunks:function(F){var O,V,X,Q,ee,ne;for(O=X=0,V=F.length;O<V;O++)X+=F[O].length;for(ne=new Uint8Array(X),O=Q=0,V=F.length;O<V;O++)ee=F[O],ne.set(ee,Q),Q+=ee.length;return ne}},B={arraySet:function(F,O,V,X,Q){for(var ee=0;ee<X;ee++)F[Q+ee]=O[V+ee]},flattenChunks:function(F){return[].concat.apply([],F)}};x.setTyped=function(F){F?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,S)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,B))},x.setTyped(v)},{}],42:[function(m,b,x){var v=m("./common"),S=!0,B=!0;try{String.fromCharCode.apply(null,[0])}catch{S=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{B=!1}for(var F=new v.Buf8(256),O=0;O<256;O++)F[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;function V(X,Q){if(Q<65537&&(X.subarray&&B||!X.subarray&&S))return String.fromCharCode.apply(null,v.shrinkBuf(X,Q));for(var ee="",ne=0;ne<Q;ne++)ee+=String.fromCharCode(X[ne]);return ee}F[254]=F[254]=1,x.string2buf=function(X){var Q,ee,ne,Ae,fe,ce=X.length,G=0;for(Ae=0;Ae<ce;Ae++)(64512&(ee=X.charCodeAt(Ae)))==55296&&Ae+1<ce&&(64512&(ne=X.charCodeAt(Ae+1)))==56320&&(ee=65536+(ee-55296<<10)+(ne-56320),Ae++),G+=ee<128?1:ee<2048?2:ee<65536?3:4;for(Q=new v.Buf8(G),Ae=fe=0;fe<G;Ae++)(64512&(ee=X.charCodeAt(Ae)))==55296&&Ae+1<ce&&(64512&(ne=X.charCodeAt(Ae+1)))==56320&&(ee=65536+(ee-55296<<10)+(ne-56320),Ae++),ee<128?Q[fe++]=ee:(ee<2048?Q[fe++]=192|ee>>>6:(ee<65536?Q[fe++]=224|ee>>>12:(Q[fe++]=240|ee>>>18,Q[fe++]=128|ee>>>12&63),Q[fe++]=128|ee>>>6&63),Q[fe++]=128|63&ee);return Q},x.buf2binstring=function(X){return V(X,X.length)},x.binstring2buf=function(X){for(var Q=new v.Buf8(X.length),ee=0,ne=Q.length;ee<ne;ee++)Q[ee]=X.charCodeAt(ee);return Q},x.buf2string=function(X,Q){var ee,ne,Ae,fe,ce=Q||X.length,G=new Array(2*ce);for(ee=ne=0;ee<ce;)if((Ae=X[ee++])<128)G[ne++]=Ae;else if(4<(fe=F[Ae]))G[ne++]=65533,ee+=fe-1;else{for(Ae&=fe===2?31:fe===3?15:7;1<fe&&ee<ce;)Ae=Ae<<6|63&X[ee++],fe--;1<fe?G[ne++]=65533:Ae<65536?G[ne++]=Ae:(Ae-=65536,G[ne++]=55296|Ae>>10&1023,G[ne++]=56320|1023&Ae)}return V(G,ne)},x.utf8border=function(X,Q){var ee;for((Q=Q||X.length)>X.length&&(Q=X.length),ee=Q-1;0<=ee&&(192&X[ee])==128;)ee--;return ee<0||ee===0?Q:ee+F[X[ee]]>Q?ee:Q}},{"./common":41}],43:[function(m,b,x){b.exports=function(v,S,B,F){for(var O=65535&v|0,V=v>>>16&65535|0,X=0;B!==0;){for(B-=X=2e3<B?2e3:B;V=V+(O=O+S[F++]|0)|0,--X;);O%=65521,V%=65521}return O|V<<16|0}},{}],44:[function(m,b,x){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(m,b,x){var v=function(){for(var S,B=[],F=0;F<256;F++){S=F;for(var O=0;O<8;O++)S=1&S?3988292384^S>>>1:S>>>1;B[F]=S}return B}();b.exports=function(S,B,F,O){var V=v,X=O+F;S^=-1;for(var Q=O;Q<X;Q++)S=S>>>8^V[255&(S^B[Q])];return-1^S}},{}],46:[function(m,b,x){var v,S=m("../utils/common"),B=m("./trees"),F=m("./adler32"),O=m("./crc32"),V=m("./messages"),X=-2,Q=258,ee=262,ne=113;function Ae(pe,Oe){return pe.msg=V[Oe],Oe}function fe(pe){return(pe<<1)-(4<pe?9:0)}function ce(pe){for(var Oe=pe.length;0<=--Oe;)pe[Oe]=0}function G(pe){var Oe=pe.state,re=Oe.pending;re>pe.avail_out&&(re=pe.avail_out),re!==0&&(S.arraySet(pe.output,Oe.pending_buf,Oe.pending_out,re,pe.next_out),pe.next_out+=re,Oe.pending_out+=re,pe.total_out+=re,pe.avail_out-=re,Oe.pending-=re,Oe.pending===0&&(Oe.pending_out=0))}function Z(pe,Oe){B._tr_flush_block(pe,0<=pe.block_start?pe.block_start:-1,pe.strstart-pe.block_start,Oe),pe.block_start=pe.strstart,G(pe.strm)}function z(pe,Oe){pe.pending_buf[pe.pending++]=Oe}function k(pe,Oe){pe.pending_buf[pe.pending++]=Oe>>>8&255,pe.pending_buf[pe.pending++]=255&Oe}function R(pe,Oe){var re,ie,Be=pe.max_chain_length,He=pe.strstart,Ge=pe.prev_length,Ne=pe.nice_match,st=pe.strstart>pe.w_size-ee?pe.strstart-(pe.w_size-ee):0,ot=pe.window,Je=pe.w_mask,Ze=pe.prev,bt=pe.strstart+Q,yt=ot[He+Ge-1],Nt=ot[He+Ge];pe.prev_length>=pe.good_match&&(Be>>=2),Ne>pe.lookahead&&(Ne=pe.lookahead);do if(ot[(re=Oe)+Ge]===Nt&&ot[re+Ge-1]===yt&&ot[re]===ot[He]&&ot[++re]===ot[He+1]){He+=2,re++;do;while(ot[++He]===ot[++re]&&ot[++He]===ot[++re]&&ot[++He]===ot[++re]&&ot[++He]===ot[++re]&&ot[++He]===ot[++re]&&ot[++He]===ot[++re]&&ot[++He]===ot[++re]&&ot[++He]===ot[++re]&&He<bt);if(ie=Q-(bt-He),He=bt-Q,Ge<ie){if(pe.match_start=Oe,Ne<=(Ge=ie))break;yt=ot[He+Ge-1],Nt=ot[He+Ge]}}while((Oe=Ze[Oe&Je])>st&&--Be!=0);return Ge<=pe.lookahead?Ge:pe.lookahead}function N(pe){var Oe,re,ie,Be,He,Ge,Ne,st,ot,Je,Ze=pe.w_size;do{if(Be=pe.window_size-pe.lookahead-pe.strstart,pe.strstart>=Ze+(Ze-ee)){for(S.arraySet(pe.window,pe.window,Ze,Ze,0),pe.match_start-=Ze,pe.strstart-=Ze,pe.block_start-=Ze,Oe=re=pe.hash_size;ie=pe.head[--Oe],pe.head[Oe]=Ze<=ie?ie-Ze:0,--re;);for(Oe=re=Ze;ie=pe.prev[--Oe],pe.prev[Oe]=Ze<=ie?ie-Ze:0,--re;);Be+=Ze}if(pe.strm.avail_in===0)break;if(Ge=pe.strm,Ne=pe.window,st=pe.strstart+pe.lookahead,Je=void 0,(ot=Be)<(Je=Ge.avail_in)&&(Je=ot),re=Je===0?0:(Ge.avail_in-=Je,S.arraySet(Ne,Ge.input,Ge.next_in,Je,st),Ge.state.wrap===1?Ge.adler=F(Ge.adler,Ne,Je,st):Ge.state.wrap===2&&(Ge.adler=O(Ge.adler,Ne,Je,st)),Ge.next_in+=Je,Ge.total_in+=Je,Je),pe.lookahead+=re,pe.lookahead+pe.insert>=3)for(He=pe.strstart-pe.insert,pe.ins_h=pe.window[He],pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[He+1])&pe.hash_mask;pe.insert&&(pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[He+3-1])&pe.hash_mask,pe.prev[He&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=He,He++,pe.insert--,!(pe.lookahead+pe.insert<3)););}while(pe.lookahead<ee&&pe.strm.avail_in!==0)}function U(pe,Oe){for(var re,ie;;){if(pe.lookahead<ee){if(N(pe),pe.lookahead<ee&&Oe===0)return 1;if(pe.lookahead===0)break}if(re=0,pe.lookahead>=3&&(pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[pe.strstart+3-1])&pe.hash_mask,re=pe.prev[pe.strstart&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=pe.strstart),re!==0&&pe.strstart-re<=pe.w_size-ee&&(pe.match_length=R(pe,re)),pe.match_length>=3)if(ie=B._tr_tally(pe,pe.strstart-pe.match_start,pe.match_length-3),pe.lookahead-=pe.match_length,pe.match_length<=pe.max_lazy_match&&pe.lookahead>=3){for(pe.match_length--;pe.strstart++,pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[pe.strstart+3-1])&pe.hash_mask,re=pe.prev[pe.strstart&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=pe.strstart,--pe.match_length!=0;);pe.strstart++}else pe.strstart+=pe.match_length,pe.match_length=0,pe.ins_h=pe.window[pe.strstart],pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[pe.strstart+1])&pe.hash_mask;else ie=B._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++;if(ie&&(Z(pe,!1),pe.strm.avail_out===0))return 1}return pe.insert=pe.strstart<2?pe.strstart:2,Oe===4?(Z(pe,!0),pe.strm.avail_out===0?3:4):pe.last_lit&&(Z(pe,!1),pe.strm.avail_out===0)?1:2}function Y(pe,Oe){for(var re,ie,Be;;){if(pe.lookahead<ee){if(N(pe),pe.lookahead<ee&&Oe===0)return 1;if(pe.lookahead===0)break}if(re=0,pe.lookahead>=3&&(pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[pe.strstart+3-1])&pe.hash_mask,re=pe.prev[pe.strstart&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=pe.strstart),pe.prev_length=pe.match_length,pe.prev_match=pe.match_start,pe.match_length=2,re!==0&&pe.prev_length<pe.max_lazy_match&&pe.strstart-re<=pe.w_size-ee&&(pe.match_length=R(pe,re),pe.match_length<=5&&(pe.strategy===1||pe.match_length===3&&4096<pe.strstart-pe.match_start)&&(pe.match_length=2)),pe.prev_length>=3&&pe.match_length<=pe.prev_length){for(Be=pe.strstart+pe.lookahead-3,ie=B._tr_tally(pe,pe.strstart-1-pe.prev_match,pe.prev_length-3),pe.lookahead-=pe.prev_length-1,pe.prev_length-=2;++pe.strstart<=Be&&(pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[pe.strstart+3-1])&pe.hash_mask,re=pe.prev[pe.strstart&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=pe.strstart),--pe.prev_length!=0;);if(pe.match_available=0,pe.match_length=2,pe.strstart++,ie&&(Z(pe,!1),pe.strm.avail_out===0))return 1}else if(pe.match_available){if((ie=B._tr_tally(pe,0,pe.window[pe.strstart-1]))&&Z(pe,!1),pe.strstart++,pe.lookahead--,pe.strm.avail_out===0)return 1}else pe.match_available=1,pe.strstart++,pe.lookahead--}return pe.match_available&&(ie=B._tr_tally(pe,0,pe.window[pe.strstart-1]),pe.match_available=0),pe.insert=pe.strstart<2?pe.strstart:2,Oe===4?(Z(pe,!0),pe.strm.avail_out===0?3:4):pe.last_lit&&(Z(pe,!1),pe.strm.avail_out===0)?1:2}function de(pe,Oe,re,ie,Be){this.good_length=pe,this.max_lazy=Oe,this.nice_length=re,this.max_chain=ie,this.func=Be}function J(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(1146),this.dyn_dtree=new S.Buf16(122),this.bl_tree=new S.Buf16(78),ce(this.dyn_ltree),ce(this.dyn_dtree),ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(16),this.heap=new S.Buf16(573),ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(573),ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(pe){var Oe;return pe&&pe.state?(pe.total_in=pe.total_out=0,pe.data_type=2,(Oe=pe.state).pending=0,Oe.pending_out=0,Oe.wrap<0&&(Oe.wrap=-Oe.wrap),Oe.status=Oe.wrap?42:ne,pe.adler=Oe.wrap===2?0:1,Oe.last_flush=0,B._tr_init(Oe),0):Ae(pe,X)}function Te(pe){var Oe=xe(pe);return Oe===0&&function(re){re.window_size=2*re.w_size,ce(re.head),re.max_lazy_match=v[re.level].max_lazy,re.good_match=v[re.level].good_length,re.nice_match=v[re.level].nice_length,re.max_chain_length=v[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=2,re.match_available=0,re.ins_h=0}(pe.state),Oe}function Ue(pe,Oe,re,ie,Be,He){if(!pe)return X;var Ge=1;if(Oe===-1&&(Oe=6),ie<0?(Ge=0,ie=-ie):15<ie&&(Ge=2,ie-=16),Be<1||9<Be||re!==8||ie<8||15<ie||Oe<0||9<Oe||He<0||4<He)return Ae(pe,X);ie===8&&(ie=9);var Ne=new J;return(pe.state=Ne).strm=pe,Ne.wrap=Ge,Ne.gzhead=null,Ne.w_bits=ie,Ne.w_size=1<<Ne.w_bits,Ne.w_mask=Ne.w_size-1,Ne.hash_bits=Be+7,Ne.hash_size=1<<Ne.hash_bits,Ne.hash_mask=Ne.hash_size-1,Ne.hash_shift=~~((Ne.hash_bits+3-1)/3),Ne.window=new S.Buf8(2*Ne.w_size),Ne.head=new S.Buf16(Ne.hash_size),Ne.prev=new S.Buf16(Ne.w_size),Ne.lit_bufsize=1<<Be+6,Ne.pending_buf_size=4*Ne.lit_bufsize,Ne.pending_buf=new S.Buf8(Ne.pending_buf_size),Ne.d_buf=1*Ne.lit_bufsize,Ne.l_buf=3*Ne.lit_bufsize,Ne.level=Oe,Ne.strategy=He,Ne.method=re,Te(pe)}v=[new de(0,0,0,0,function(pe,Oe){var re=65535;for(re>pe.pending_buf_size-5&&(re=pe.pending_buf_size-5);;){if(pe.lookahead<=1){if(N(pe),pe.lookahead===0&&Oe===0)return 1;if(pe.lookahead===0)break}pe.strstart+=pe.lookahead,pe.lookahead=0;var ie=pe.block_start+re;if((pe.strstart===0||pe.strstart>=ie)&&(pe.lookahead=pe.strstart-ie,pe.strstart=ie,Z(pe,!1),pe.strm.avail_out===0)||pe.strstart-pe.block_start>=pe.w_size-ee&&(Z(pe,!1),pe.strm.avail_out===0))return 1}return pe.insert=0,Oe===4?(Z(pe,!0),pe.strm.avail_out===0?3:4):(pe.strstart>pe.block_start&&(Z(pe,!1),pe.strm.avail_out),1)}),new de(4,4,8,4,U),new de(4,5,16,8,U),new de(4,6,32,32,U),new de(4,4,16,16,Y),new de(8,16,32,32,Y),new de(8,16,128,128,Y),new de(8,32,128,256,Y),new de(32,128,258,1024,Y),new de(32,258,258,4096,Y)],x.deflateInit=function(pe,Oe){return Ue(pe,Oe,8,15,8,0)},x.deflateInit2=Ue,x.deflateReset=Te,x.deflateResetKeep=xe,x.deflateSetHeader=function(pe,Oe){return pe&&pe.state?pe.state.wrap!==2?X:(pe.state.gzhead=Oe,0):X},x.deflate=function(pe,Oe){var re,ie,Be,He;if(!pe||!pe.state||5<Oe||Oe<0)return pe?Ae(pe,X):X;if(ie=pe.state,!pe.output||!pe.input&&pe.avail_in!==0||ie.status===666&&Oe!==4)return Ae(pe,pe.avail_out===0?-5:X);if(ie.strm=pe,re=ie.last_flush,ie.last_flush=Oe,ie.status===42)if(ie.wrap===2)pe.adler=0,z(ie,31),z(ie,139),z(ie,8),ie.gzhead?(z(ie,(ie.gzhead.text?1:0)+(ie.gzhead.hcrc?2:0)+(ie.gzhead.extra?4:0)+(ie.gzhead.name?8:0)+(ie.gzhead.comment?16:0)),z(ie,255&ie.gzhead.time),z(ie,ie.gzhead.time>>8&255),z(ie,ie.gzhead.time>>16&255),z(ie,ie.gzhead.time>>24&255),z(ie,ie.level===9?2:2<=ie.strategy||ie.level<2?4:0),z(ie,255&ie.gzhead.os),ie.gzhead.extra&&ie.gzhead.extra.length&&(z(ie,255&ie.gzhead.extra.length),z(ie,ie.gzhead.extra.length>>8&255)),ie.gzhead.hcrc&&(pe.adler=O(pe.adler,ie.pending_buf,ie.pending,0)),ie.gzindex=0,ie.status=69):(z(ie,0),z(ie,0),z(ie,0),z(ie,0),z(ie,0),z(ie,ie.level===9?2:2<=ie.strategy||ie.level<2?4:0),z(ie,3),ie.status=ne);else{var Ge=8+(ie.w_bits-8<<4)<<8;Ge|=(2<=ie.strategy||ie.level<2?0:ie.level<6?1:ie.level===6?2:3)<<6,ie.strstart!==0&&(Ge|=32),Ge+=31-Ge%31,ie.status=ne,k(ie,Ge),ie.strstart!==0&&(k(ie,pe.adler>>>16),k(ie,65535&pe.adler)),pe.adler=1}if(ie.status===69)if(ie.gzhead.extra){for(Be=ie.pending;ie.gzindex<(65535&ie.gzhead.extra.length)&&(ie.pending!==ie.pending_buf_size||(ie.gzhead.hcrc&&ie.pending>Be&&(pe.adler=O(pe.adler,ie.pending_buf,ie.pending-Be,Be)),G(pe),Be=ie.pending,ie.pending!==ie.pending_buf_size));)z(ie,255&ie.gzhead.extra[ie.gzindex]),ie.gzindex++;ie.gzhead.hcrc&&ie.pending>Be&&(pe.adler=O(pe.adler,ie.pending_buf,ie.pending-Be,Be)),ie.gzindex===ie.gzhead.extra.length&&(ie.gzindex=0,ie.status=73)}else ie.status=73;if(ie.status===73)if(ie.gzhead.name){Be=ie.pending;do{if(ie.pending===ie.pending_buf_size&&(ie.gzhead.hcrc&&ie.pending>Be&&(pe.adler=O(pe.adler,ie.pending_buf,ie.pending-Be,Be)),G(pe),Be=ie.pending,ie.pending===ie.pending_buf_size)){He=1;break}He=ie.gzindex<ie.gzhead.name.length?255&ie.gzhead.name.charCodeAt(ie.gzindex++):0,z(ie,He)}while(He!==0);ie.gzhead.hcrc&&ie.pending>Be&&(pe.adler=O(pe.adler,ie.pending_buf,ie.pending-Be,Be)),He===0&&(ie.gzindex=0,ie.status=91)}else ie.status=91;if(ie.status===91)if(ie.gzhead.comment){Be=ie.pending;do{if(ie.pending===ie.pending_buf_size&&(ie.gzhead.hcrc&&ie.pending>Be&&(pe.adler=O(pe.adler,ie.pending_buf,ie.pending-Be,Be)),G(pe),Be=ie.pending,ie.pending===ie.pending_buf_size)){He=1;break}He=ie.gzindex<ie.gzhead.comment.length?255&ie.gzhead.comment.charCodeAt(ie.gzindex++):0,z(ie,He)}while(He!==0);ie.gzhead.hcrc&&ie.pending>Be&&(pe.adler=O(pe.adler,ie.pending_buf,ie.pending-Be,Be)),He===0&&(ie.status=103)}else ie.status=103;if(ie.status===103&&(ie.gzhead.hcrc?(ie.pending+2>ie.pending_buf_size&&G(pe),ie.pending+2<=ie.pending_buf_size&&(z(ie,255&pe.adler),z(ie,pe.adler>>8&255),pe.adler=0,ie.status=ne)):ie.status=ne),ie.pending!==0){if(G(pe),pe.avail_out===0)return ie.last_flush=-1,0}else if(pe.avail_in===0&&fe(Oe)<=fe(re)&&Oe!==4)return Ae(pe,-5);if(ie.status===666&&pe.avail_in!==0)return Ae(pe,-5);if(pe.avail_in!==0||ie.lookahead!==0||Oe!==0&&ie.status!==666){var Ne=ie.strategy===2?function(st,ot){for(var Je;;){if(st.lookahead===0&&(N(st),st.lookahead===0)){if(ot===0)return 1;break}if(st.match_length=0,Je=B._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++,Je&&(Z(st,!1),st.strm.avail_out===0))return 1}return st.insert=0,ot===4?(Z(st,!0),st.strm.avail_out===0?3:4):st.last_lit&&(Z(st,!1),st.strm.avail_out===0)?1:2}(ie,Oe):ie.strategy===3?function(st,ot){for(var Je,Ze,bt,yt,Nt=st.window;;){if(st.lookahead<=Q){if(N(st),st.lookahead<=Q&&ot===0)return 1;if(st.lookahead===0)break}if(st.match_length=0,st.lookahead>=3&&0<st.strstart&&(Ze=Nt[bt=st.strstart-1])===Nt[++bt]&&Ze===Nt[++bt]&&Ze===Nt[++bt]){yt=st.strstart+Q;do;while(Ze===Nt[++bt]&&Ze===Nt[++bt]&&Ze===Nt[++bt]&&Ze===Nt[++bt]&&Ze===Nt[++bt]&&Ze===Nt[++bt]&&Ze===Nt[++bt]&&Ze===Nt[++bt]&&bt<yt);st.match_length=Q-(yt-bt),st.match_length>st.lookahead&&(st.match_length=st.lookahead)}if(st.match_length>=3?(Je=B._tr_tally(st,1,st.match_length-3),st.lookahead-=st.match_length,st.strstart+=st.match_length,st.match_length=0):(Je=B._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++),Je&&(Z(st,!1),st.strm.avail_out===0))return 1}return st.insert=0,ot===4?(Z(st,!0),st.strm.avail_out===0?3:4):st.last_lit&&(Z(st,!1),st.strm.avail_out===0)?1:2}(ie,Oe):v[ie.level].func(ie,Oe);if(Ne!==3&&Ne!==4||(ie.status=666),Ne===1||Ne===3)return pe.avail_out===0&&(ie.last_flush=-1),0;if(Ne===2&&(Oe===1?B._tr_align(ie):Oe!==5&&(B._tr_stored_block(ie,0,0,!1),Oe===3&&(ce(ie.head),ie.lookahead===0&&(ie.strstart=0,ie.block_start=0,ie.insert=0))),G(pe),pe.avail_out===0))return ie.last_flush=-1,0}return Oe!==4?0:ie.wrap<=0?1:(ie.wrap===2?(z(ie,255&pe.adler),z(ie,pe.adler>>8&255),z(ie,pe.adler>>16&255),z(ie,pe.adler>>24&255),z(ie,255&pe.total_in),z(ie,pe.total_in>>8&255),z(ie,pe.total_in>>16&255),z(ie,pe.total_in>>24&255)):(k(ie,pe.adler>>>16),k(ie,65535&pe.adler)),G(pe),0<ie.wrap&&(ie.wrap=-ie.wrap),ie.pending!==0?0:1)},x.deflateEnd=function(pe){var Oe;return pe&&pe.state?(Oe=pe.state.status)!==42&&Oe!==69&&Oe!==73&&Oe!==91&&Oe!==103&&Oe!==ne&&Oe!==666?Ae(pe,X):(pe.state=null,Oe===ne?Ae(pe,-3):0):X},x.deflateSetDictionary=function(pe,Oe){var re,ie,Be,He,Ge,Ne,st,ot,Je=Oe.length;if(!pe||!pe.state||(He=(re=pe.state).wrap)===2||He===1&&re.status!==42||re.lookahead)return X;for(He===1&&(pe.adler=F(pe.adler,Oe,Je,0)),re.wrap=0,Je>=re.w_size&&(He===0&&(ce(re.head),re.strstart=0,re.block_start=0,re.insert=0),ot=new S.Buf8(re.w_size),S.arraySet(ot,Oe,Je-re.w_size,re.w_size,0),Oe=ot,Je=re.w_size),Ge=pe.avail_in,Ne=pe.next_in,st=pe.input,pe.avail_in=Je,pe.next_in=0,pe.input=Oe,N(re);re.lookahead>=3;){for(ie=re.strstart,Be=re.lookahead-2;re.ins_h=(re.ins_h<<re.hash_shift^re.window[ie+3-1])&re.hash_mask,re.prev[ie&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=ie,ie++,--Be;);re.strstart=ie,re.lookahead=2,N(re)}return re.strstart+=re.lookahead,re.block_start=re.strstart,re.insert=re.lookahead,re.lookahead=0,re.match_length=re.prev_length=2,re.match_available=0,pe.next_in=Ne,pe.input=st,pe.avail_in=Ge,re.wrap=He,0},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(m,b,x){b.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(m,b,x){b.exports=function(v,S){var B,F,O,V,X,Q,ee,ne,Ae,fe,ce,G,Z,z,k,R,N,U,Y,de,J,xe,Te,Ue,pe;B=v.state,F=v.next_in,Ue=v.input,O=F+(v.avail_in-5),V=v.next_out,pe=v.output,X=V-(S-v.avail_out),Q=V+(v.avail_out-257),ee=B.dmax,ne=B.wsize,Ae=B.whave,fe=B.wnext,ce=B.window,G=B.hold,Z=B.bits,z=B.lencode,k=B.distcode,R=(1<<B.lenbits)-1,N=(1<<B.distbits)-1;e:do{Z<15&&(G+=Ue[F++]<<Z,Z+=8,G+=Ue[F++]<<Z,Z+=8),U=z[G&R];t:for(;;){if(G>>>=Y=U>>>24,Z-=Y,(Y=U>>>16&255)==0)pe[V++]=65535&U;else{if(!(16&Y)){if((64&Y)==0){U=z[(65535&U)+(G&(1<<Y)-1)];continue t}if(32&Y){B.mode=12;break e}v.msg="invalid literal/length code",B.mode=30;break e}de=65535&U,(Y&=15)&&(Z<Y&&(G+=Ue[F++]<<Z,Z+=8),de+=G&(1<<Y)-1,G>>>=Y,Z-=Y),Z<15&&(G+=Ue[F++]<<Z,Z+=8,G+=Ue[F++]<<Z,Z+=8),U=k[G&N];r:for(;;){if(G>>>=Y=U>>>24,Z-=Y,!(16&(Y=U>>>16&255))){if((64&Y)==0){U=k[(65535&U)+(G&(1<<Y)-1)];continue r}v.msg="invalid distance code",B.mode=30;break e}if(J=65535&U,Z<(Y&=15)&&(G+=Ue[F++]<<Z,(Z+=8)<Y&&(G+=Ue[F++]<<Z,Z+=8)),ee<(J+=G&(1<<Y)-1)){v.msg="invalid distance too far back",B.mode=30;break e}if(G>>>=Y,Z-=Y,(Y=V-X)<J){if(Ae<(Y=J-Y)&&B.sane){v.msg="invalid distance too far back",B.mode=30;break e}if(Te=ce,(xe=0)===fe){if(xe+=ne-Y,Y<de){for(de-=Y;pe[V++]=ce[xe++],--Y;);xe=V-J,Te=pe}}else if(fe<Y){if(xe+=ne+fe-Y,(Y-=fe)<de){for(de-=Y;pe[V++]=ce[xe++],--Y;);if(xe=0,fe<de){for(de-=Y=fe;pe[V++]=ce[xe++],--Y;);xe=V-J,Te=pe}}}else if(xe+=fe-Y,Y<de){for(de-=Y;pe[V++]=ce[xe++],--Y;);xe=V-J,Te=pe}for(;2<de;)pe[V++]=Te[xe++],pe[V++]=Te[xe++],pe[V++]=Te[xe++],de-=3;de&&(pe[V++]=Te[xe++],1<de&&(pe[V++]=Te[xe++]))}else{for(xe=V-J;pe[V++]=pe[xe++],pe[V++]=pe[xe++],pe[V++]=pe[xe++],2<(de-=3););de&&(pe[V++]=pe[xe++],1<de&&(pe[V++]=pe[xe++]))}break}}break}}while(F<O&&V<Q);F-=de=Z>>3,G&=(1<<(Z-=de<<3))-1,v.next_in=F,v.next_out=V,v.avail_in=F<O?O-F+5:5-(F-O),v.avail_out=V<Q?Q-V+257:257-(V-Q),B.hold=G,B.bits=Z}},{}],49:[function(m,b,x){var v=m("../utils/common"),S=m("./adler32"),B=m("./crc32"),F=m("./inffast"),O=m("./inftrees"),V=-2;function X(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function Q(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ee(R){var N;return R&&R.state?(N=R.state,R.total_in=R.total_out=N.total=0,R.msg="",N.wrap&&(R.adler=1&N.wrap),N.mode=1,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new v.Buf32(852),N.distcode=N.distdyn=new v.Buf32(592),N.sane=1,N.back=-1,0):V}function ne(R){var N;return R&&R.state?((N=R.state).wsize=0,N.whave=0,N.wnext=0,ee(R)):V}function Ae(R,N){var U,Y;return R&&R.state?(Y=R.state,N<0?(U=0,N=-N):(U=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?V:(Y.window!==null&&Y.wbits!==N&&(Y.window=null),Y.wrap=U,Y.wbits=N,ne(R))):V}function fe(R,N){var U,Y;return R?(Y=new Q,(R.state=Y).window=null,(U=Ae(R,N))!==0&&(R.state=null),U):V}var ce,G,Z=!0;function z(R){if(Z){var N;for(ce=new v.Buf32(512),G=new v.Buf32(32),N=0;N<144;)R.lens[N++]=8;for(;N<256;)R.lens[N++]=9;for(;N<280;)R.lens[N++]=7;for(;N<288;)R.lens[N++]=8;for(O(1,R.lens,0,288,ce,0,R.work,{bits:9}),N=0;N<32;)R.lens[N++]=5;O(2,R.lens,0,32,G,0,R.work,{bits:5}),Z=!1}R.lencode=ce,R.lenbits=9,R.distcode=G,R.distbits=5}function k(R,N,U,Y){var de,J=R.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new v.Buf8(J.wsize)),Y>=J.wsize?(v.arraySet(J.window,N,U-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(Y<(de=J.wsize-J.wnext)&&(de=Y),v.arraySet(J.window,N,U-Y,de,J.wnext),(Y-=de)?(v.arraySet(J.window,N,U-Y,Y,0),J.wnext=Y,J.whave=J.wsize):(J.wnext+=de,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=de))),0}x.inflateReset=ne,x.inflateReset2=Ae,x.inflateResetKeep=ee,x.inflateInit=function(R){return fe(R,15)},x.inflateInit2=fe,x.inflate=function(R,N){var U,Y,de,J,xe,Te,Ue,pe,Oe,re,ie,Be,He,Ge,Ne,st,ot,Je,Ze,bt,yt,Nt,kt,Gt,fr=0,Tr=new v.Buf8(4),yr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return V;(U=R.state).mode===12&&(U.mode=13),xe=R.next_out,de=R.output,Ue=R.avail_out,J=R.next_in,Y=R.input,Te=R.avail_in,pe=U.hold,Oe=U.bits,re=Te,ie=Ue,Nt=0;e:for(;;)switch(U.mode){case 1:if(U.wrap===0){U.mode=13;break}for(;Oe<16;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(2&U.wrap&&pe===35615){Tr[U.check=0]=255&pe,Tr[1]=pe>>>8&255,U.check=B(U.check,Tr,2,0),Oe=pe=0,U.mode=2;break}if(U.flags=0,U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&pe)<<8)+(pe>>8))%31){R.msg="incorrect header check",U.mode=30;break}if((15&pe)!=8){R.msg="unknown compression method",U.mode=30;break}if(Oe-=4,yt=8+(15&(pe>>>=4)),U.wbits===0)U.wbits=yt;else if(yt>U.wbits){R.msg="invalid window size",U.mode=30;break}U.dmax=1<<yt,R.adler=U.check=1,U.mode=512&pe?10:12,Oe=pe=0;break;case 2:for(;Oe<16;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(U.flags=pe,(255&U.flags)!=8){R.msg="unknown compression method",U.mode=30;break}if(57344&U.flags){R.msg="unknown header flags set",U.mode=30;break}U.head&&(U.head.text=pe>>8&1),512&U.flags&&(Tr[0]=255&pe,Tr[1]=pe>>>8&255,U.check=B(U.check,Tr,2,0)),Oe=pe=0,U.mode=3;case 3:for(;Oe<32;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}U.head&&(U.head.time=pe),512&U.flags&&(Tr[0]=255&pe,Tr[1]=pe>>>8&255,Tr[2]=pe>>>16&255,Tr[3]=pe>>>24&255,U.check=B(U.check,Tr,4,0)),Oe=pe=0,U.mode=4;case 4:for(;Oe<16;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}U.head&&(U.head.xflags=255&pe,U.head.os=pe>>8),512&U.flags&&(Tr[0]=255&pe,Tr[1]=pe>>>8&255,U.check=B(U.check,Tr,2,0)),Oe=pe=0,U.mode=5;case 5:if(1024&U.flags){for(;Oe<16;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}U.length=pe,U.head&&(U.head.extra_len=pe),512&U.flags&&(Tr[0]=255&pe,Tr[1]=pe>>>8&255,U.check=B(U.check,Tr,2,0)),Oe=pe=0}else U.head&&(U.head.extra=null);U.mode=6;case 6:if(1024&U.flags&&(Te<(Be=U.length)&&(Be=Te),Be&&(U.head&&(yt=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Array(U.head.extra_len)),v.arraySet(U.head.extra,Y,J,Be,yt)),512&U.flags&&(U.check=B(U.check,Y,Be,J)),Te-=Be,J+=Be,U.length-=Be),U.length))break e;U.length=0,U.mode=7;case 7:if(2048&U.flags){if(Te===0)break e;for(Be=0;yt=Y[J+Be++],U.head&&yt&&U.length<65536&&(U.head.name+=String.fromCharCode(yt)),yt&&Be<Te;);if(512&U.flags&&(U.check=B(U.check,Y,Be,J)),Te-=Be,J+=Be,yt)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=8;case 8:if(4096&U.flags){if(Te===0)break e;for(Be=0;yt=Y[J+Be++],U.head&&yt&&U.length<65536&&(U.head.comment+=String.fromCharCode(yt)),yt&&Be<Te;);if(512&U.flags&&(U.check=B(U.check,Y,Be,J)),Te-=Be,J+=Be,yt)break e}else U.head&&(U.head.comment=null);U.mode=9;case 9:if(512&U.flags){for(;Oe<16;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(pe!==(65535&U.check)){R.msg="header crc mismatch",U.mode=30;break}Oe=pe=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),R.adler=U.check=0,U.mode=12;break;case 10:for(;Oe<32;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}R.adler=U.check=X(pe),Oe=pe=0,U.mode=11;case 11:if(U.havedict===0)return R.next_out=xe,R.avail_out=Ue,R.next_in=J,R.avail_in=Te,U.hold=pe,U.bits=Oe,2;R.adler=U.check=1,U.mode=12;case 12:if(N===5||N===6)break e;case 13:if(U.last){pe>>>=7&Oe,Oe-=7&Oe,U.mode=27;break}for(;Oe<3;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}switch(U.last=1&pe,Oe-=1,3&(pe>>>=1)){case 0:U.mode=14;break;case 1:if(z(U),U.mode=20,N!==6)break;pe>>>=2,Oe-=2;break e;case 2:U.mode=17;break;case 3:R.msg="invalid block type",U.mode=30}pe>>>=2,Oe-=2;break;case 14:for(pe>>>=7&Oe,Oe-=7&Oe;Oe<32;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if((65535&pe)!=(pe>>>16^65535)){R.msg="invalid stored block lengths",U.mode=30;break}if(U.length=65535&pe,Oe=pe=0,U.mode=15,N===6)break e;case 15:U.mode=16;case 16:if(Be=U.length){if(Te<Be&&(Be=Te),Ue<Be&&(Be=Ue),Be===0)break e;v.arraySet(de,Y,J,Be,xe),Te-=Be,J+=Be,Ue-=Be,xe+=Be,U.length-=Be;break}U.mode=12;break;case 17:for(;Oe<14;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(U.nlen=257+(31&pe),pe>>>=5,Oe-=5,U.ndist=1+(31&pe),pe>>>=5,Oe-=5,U.ncode=4+(15&pe),pe>>>=4,Oe-=4,286<U.nlen||30<U.ndist){R.msg="too many length or distance symbols",U.mode=30;break}U.have=0,U.mode=18;case 18:for(;U.have<U.ncode;){for(;Oe<3;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}U.lens[yr[U.have++]]=7&pe,pe>>>=3,Oe-=3}for(;U.have<19;)U.lens[yr[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,kt={bits:U.lenbits},Nt=O(0,U.lens,0,19,U.lencode,0,U.work,kt),U.lenbits=kt.bits,Nt){R.msg="invalid code lengths set",U.mode=30;break}U.have=0,U.mode=19;case 19:for(;U.have<U.nlen+U.ndist;){for(;st=(fr=U.lencode[pe&(1<<U.lenbits)-1])>>>16&255,ot=65535&fr,!((Ne=fr>>>24)<=Oe);){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(ot<16)pe>>>=Ne,Oe-=Ne,U.lens[U.have++]=ot;else{if(ot===16){for(Gt=Ne+2;Oe<Gt;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(pe>>>=Ne,Oe-=Ne,U.have===0){R.msg="invalid bit length repeat",U.mode=30;break}yt=U.lens[U.have-1],Be=3+(3&pe),pe>>>=2,Oe-=2}else if(ot===17){for(Gt=Ne+3;Oe<Gt;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}Oe-=Ne,yt=0,Be=3+(7&(pe>>>=Ne)),pe>>>=3,Oe-=3}else{for(Gt=Ne+7;Oe<Gt;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}Oe-=Ne,yt=0,Be=11+(127&(pe>>>=Ne)),pe>>>=7,Oe-=7}if(U.have+Be>U.nlen+U.ndist){R.msg="invalid bit length repeat",U.mode=30;break}for(;Be--;)U.lens[U.have++]=yt}}if(U.mode===30)break;if(U.lens[256]===0){R.msg="invalid code -- missing end-of-block",U.mode=30;break}if(U.lenbits=9,kt={bits:U.lenbits},Nt=O(1,U.lens,0,U.nlen,U.lencode,0,U.work,kt),U.lenbits=kt.bits,Nt){R.msg="invalid literal/lengths set",U.mode=30;break}if(U.distbits=6,U.distcode=U.distdyn,kt={bits:U.distbits},Nt=O(2,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,kt),U.distbits=kt.bits,Nt){R.msg="invalid distances set",U.mode=30;break}if(U.mode=20,N===6)break e;case 20:U.mode=21;case 21:if(6<=Te&&258<=Ue){R.next_out=xe,R.avail_out=Ue,R.next_in=J,R.avail_in=Te,U.hold=pe,U.bits=Oe,F(R,ie),xe=R.next_out,de=R.output,Ue=R.avail_out,J=R.next_in,Y=R.input,Te=R.avail_in,pe=U.hold,Oe=U.bits,U.mode===12&&(U.back=-1);break}for(U.back=0;st=(fr=U.lencode[pe&(1<<U.lenbits)-1])>>>16&255,ot=65535&fr,!((Ne=fr>>>24)<=Oe);){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(st&&(240&st)==0){for(Je=Ne,Ze=st,bt=ot;st=(fr=U.lencode[bt+((pe&(1<<Je+Ze)-1)>>Je)])>>>16&255,ot=65535&fr,!(Je+(Ne=fr>>>24)<=Oe);){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}pe>>>=Je,Oe-=Je,U.back+=Je}if(pe>>>=Ne,Oe-=Ne,U.back+=Ne,U.length=ot,st===0){U.mode=26;break}if(32&st){U.back=-1,U.mode=12;break}if(64&st){R.msg="invalid literal/length code",U.mode=30;break}U.extra=15&st,U.mode=22;case 22:if(U.extra){for(Gt=U.extra;Oe<Gt;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}U.length+=pe&(1<<U.extra)-1,pe>>>=U.extra,Oe-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=23;case 23:for(;st=(fr=U.distcode[pe&(1<<U.distbits)-1])>>>16&255,ot=65535&fr,!((Ne=fr>>>24)<=Oe);){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if((240&st)==0){for(Je=Ne,Ze=st,bt=ot;st=(fr=U.distcode[bt+((pe&(1<<Je+Ze)-1)>>Je)])>>>16&255,ot=65535&fr,!(Je+(Ne=fr>>>24)<=Oe);){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}pe>>>=Je,Oe-=Je,U.back+=Je}if(pe>>>=Ne,Oe-=Ne,U.back+=Ne,64&st){R.msg="invalid distance code",U.mode=30;break}U.offset=ot,U.extra=15&st,U.mode=24;case 24:if(U.extra){for(Gt=U.extra;Oe<Gt;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}U.offset+=pe&(1<<U.extra)-1,pe>>>=U.extra,Oe-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){R.msg="invalid distance too far back",U.mode=30;break}U.mode=25;case 25:if(Ue===0)break e;if(Be=ie-Ue,U.offset>Be){if((Be=U.offset-Be)>U.whave&&U.sane){R.msg="invalid distance too far back",U.mode=30;break}He=Be>U.wnext?(Be-=U.wnext,U.wsize-Be):U.wnext-Be,Be>U.length&&(Be=U.length),Ge=U.window}else Ge=de,He=xe-U.offset,Be=U.length;for(Ue<Be&&(Be=Ue),Ue-=Be,U.length-=Be;de[xe++]=Ge[He++],--Be;);U.length===0&&(U.mode=21);break;case 26:if(Ue===0)break e;de[xe++]=U.length,Ue--,U.mode=21;break;case 27:if(U.wrap){for(;Oe<32;){if(Te===0)break e;Te--,pe|=Y[J++]<<Oe,Oe+=8}if(ie-=Ue,R.total_out+=ie,U.total+=ie,ie&&(R.adler=U.check=U.flags?B(U.check,de,ie,xe-ie):S(U.check,de,ie,xe-ie)),ie=Ue,(U.flags?pe:X(pe))!==U.check){R.msg="incorrect data check",U.mode=30;break}Oe=pe=0}U.mode=28;case 28:if(U.wrap&&U.flags){for(;Oe<32;){if(Te===0)break e;Te--,pe+=Y[J++]<<Oe,Oe+=8}if(pe!==(4294967295&U.total)){R.msg="incorrect length check",U.mode=30;break}Oe=pe=0}U.mode=29;case 29:Nt=1;break e;case 30:Nt=-3;break e;case 31:return-4;case 32:default:return V}return R.next_out=xe,R.avail_out=Ue,R.next_in=J,R.avail_in=Te,U.hold=pe,U.bits=Oe,(U.wsize||ie!==R.avail_out&&U.mode<30&&(U.mode<27||N!==4))&&k(R,R.output,R.next_out,ie-R.avail_out)?(U.mode=31,-4):(re-=R.avail_in,ie-=R.avail_out,R.total_in+=re,R.total_out+=ie,U.total+=ie,U.wrap&&ie&&(R.adler=U.check=U.flags?B(U.check,de,ie,R.next_out-ie):S(U.check,de,ie,R.next_out-ie)),R.data_type=U.bits+(U.last?64:0)+(U.mode===12?128:0)+(U.mode===20||U.mode===15?256:0),(re==0&&ie===0||N===4)&&Nt===0&&(Nt=-5),Nt)},x.inflateEnd=function(R){if(!R||!R.state)return V;var N=R.state;return N.window&&(N.window=null),R.state=null,0},x.inflateGetHeader=function(R,N){var U;return R&&R.state?(2&(U=R.state).wrap)==0?V:((U.head=N).done=!1,0):V},x.inflateSetDictionary=function(R,N){var U,Y=N.length;return R&&R.state?(U=R.state).wrap!==0&&U.mode!==11?V:U.mode===11&&S(1,N,Y,0)!==U.check?-3:k(R,N,Y,Y)?(U.mode=31,-4):(U.havedict=1,0):V},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(m,b,x){var v=m("../utils/common"),S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],B=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],O=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(V,X,Q,ee,ne,Ae,fe,ce){var G,Z,z,k,R,N,U,Y,de,J=ce.bits,xe=0,Te=0,Ue=0,pe=0,Oe=0,re=0,ie=0,Be=0,He=0,Ge=0,Ne=null,st=0,ot=new v.Buf16(16),Je=new v.Buf16(16),Ze=null,bt=0;for(xe=0;xe<=15;xe++)ot[xe]=0;for(Te=0;Te<ee;Te++)ot[X[Q+Te]]++;for(Oe=J,pe=15;1<=pe&&ot[pe]===0;pe--);if(pe<Oe&&(Oe=pe),pe===0)return ne[Ae++]=20971520,ne[Ae++]=20971520,ce.bits=1,0;for(Ue=1;Ue<pe&&ot[Ue]===0;Ue++);for(Oe<Ue&&(Oe=Ue),xe=Be=1;xe<=15;xe++)if(Be<<=1,(Be-=ot[xe])<0)return-1;if(0<Be&&(V===0||pe!==1))return-1;for(Je[1]=0,xe=1;xe<15;xe++)Je[xe+1]=Je[xe]+ot[xe];for(Te=0;Te<ee;Te++)X[Q+Te]!==0&&(fe[Je[X[Q+Te]]++]=Te);if(N=V===0?(Ne=Ze=fe,19):V===1?(Ne=S,st-=257,Ze=B,bt-=257,256):(Ne=F,Ze=O,-1),xe=Ue,R=Ae,ie=Te=Ge=0,z=-1,k=(He=1<<(re=Oe))-1,V===1&&852<He||V===2&&592<He)return 1;for(;;){for(U=xe-ie,de=fe[Te]<N?(Y=0,fe[Te]):fe[Te]>N?(Y=Ze[bt+fe[Te]],Ne[st+fe[Te]]):(Y=96,0),G=1<<xe-ie,Ue=Z=1<<re;ne[R+(Ge>>ie)+(Z-=G)]=U<<24|Y<<16|de|0,Z!==0;);for(G=1<<xe-1;Ge&G;)G>>=1;if(G!==0?(Ge&=G-1,Ge+=G):Ge=0,Te++,--ot[xe]==0){if(xe===pe)break;xe=X[Q+fe[Te]]}if(Oe<xe&&(Ge&k)!==z){for(ie===0&&(ie=Oe),R+=Ue,Be=1<<(re=xe-ie);re+ie<pe&&!((Be-=ot[re+ie])<=0);)re++,Be<<=1;if(He+=1<<re,V===1&&852<He||V===2&&592<He)return 1;ne[z=Ge&k]=Oe<<24|re<<16|R-Ae|0}}return Ge!==0&&(ne[R+Ge]=xe-ie<<24|64<<16|0),ce.bits=Oe,0}},{"../utils/common":41}],51:[function(m,b,x){b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(m,b,x){var v=m("../utils/common");function S(Ze){for(var bt=Ze.length;0<=--bt;)Ze[bt]=0}var B=256,F=286,O=30,V=15,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ae=new Array(576);S(Ae);var fe=new Array(60);S(fe);var ce=new Array(512);S(ce);var G=new Array(256);S(G);var Z=new Array(29);S(Z);var z,k,R,N=new Array(O);function U(Ze,bt,yt,Nt,kt){this.static_tree=Ze,this.extra_bits=bt,this.extra_base=yt,this.elems=Nt,this.max_length=kt,this.has_stree=Ze&&Ze.length}function Y(Ze,bt){this.dyn_tree=Ze,this.max_code=0,this.stat_desc=bt}function de(Ze){return Ze<256?ce[Ze]:ce[256+(Ze>>>7)]}function J(Ze,bt){Ze.pending_buf[Ze.pending++]=255&bt,Ze.pending_buf[Ze.pending++]=bt>>>8&255}function xe(Ze,bt,yt){Ze.bi_valid>16-yt?(Ze.bi_buf|=bt<<Ze.bi_valid&65535,J(Ze,Ze.bi_buf),Ze.bi_buf=bt>>16-Ze.bi_valid,Ze.bi_valid+=yt-16):(Ze.bi_buf|=bt<<Ze.bi_valid&65535,Ze.bi_valid+=yt)}function Te(Ze,bt,yt){xe(Ze,yt[2*bt],yt[2*bt+1])}function Ue(Ze,bt){for(var yt=0;yt|=1&Ze,Ze>>>=1,yt<<=1,0<--bt;);return yt>>>1}function pe(Ze,bt,yt){var Nt,kt,Gt=new Array(16),fr=0;for(Nt=1;Nt<=V;Nt++)Gt[Nt]=fr=fr+yt[Nt-1]<<1;for(kt=0;kt<=bt;kt++){var Tr=Ze[2*kt+1];Tr!==0&&(Ze[2*kt]=Ue(Gt[Tr]++,Tr))}}function Oe(Ze){var bt;for(bt=0;bt<F;bt++)Ze.dyn_ltree[2*bt]=0;for(bt=0;bt<O;bt++)Ze.dyn_dtree[2*bt]=0;for(bt=0;bt<19;bt++)Ze.bl_tree[2*bt]=0;Ze.dyn_ltree[512]=1,Ze.opt_len=Ze.static_len=0,Ze.last_lit=Ze.matches=0}function re(Ze){8<Ze.bi_valid?J(Ze,Ze.bi_buf):0<Ze.bi_valid&&(Ze.pending_buf[Ze.pending++]=Ze.bi_buf),Ze.bi_buf=0,Ze.bi_valid=0}function ie(Ze,bt,yt,Nt){var kt=2*bt,Gt=2*yt;return Ze[kt]<Ze[Gt]||Ze[kt]===Ze[Gt]&&Nt[bt]<=Nt[yt]}function Be(Ze,bt,yt){for(var Nt=Ze.heap[yt],kt=yt<<1;kt<=Ze.heap_len&&(kt<Ze.heap_len&&ie(bt,Ze.heap[kt+1],Ze.heap[kt],Ze.depth)&&kt++,!ie(bt,Nt,Ze.heap[kt],Ze.depth));)Ze.heap[yt]=Ze.heap[kt],yt=kt,kt<<=1;Ze.heap[yt]=Nt}function He(Ze,bt,yt){var Nt,kt,Gt,fr,Tr=0;if(Ze.last_lit!==0)for(;Nt=Ze.pending_buf[Ze.d_buf+2*Tr]<<8|Ze.pending_buf[Ze.d_buf+2*Tr+1],kt=Ze.pending_buf[Ze.l_buf+Tr],Tr++,Nt===0?Te(Ze,kt,bt):(Te(Ze,(Gt=G[kt])+B+1,bt),(fr=X[Gt])!==0&&xe(Ze,kt-=Z[Gt],fr),Te(Ze,Gt=de(--Nt),yt),(fr=Q[Gt])!==0&&xe(Ze,Nt-=N[Gt],fr)),Tr<Ze.last_lit;);Te(Ze,256,bt)}function Ge(Ze,bt){var yt,Nt,kt,Gt=bt.dyn_tree,fr=bt.stat_desc.static_tree,Tr=bt.stat_desc.has_stree,yr=bt.stat_desc.elems,Dr=-1;for(Ze.heap_len=0,Ze.heap_max=573,yt=0;yt<yr;yt++)Gt[2*yt]!==0?(Ze.heap[++Ze.heap_len]=Dr=yt,Ze.depth[yt]=0):Gt[2*yt+1]=0;for(;Ze.heap_len<2;)Gt[2*(kt=Ze.heap[++Ze.heap_len]=Dr<2?++Dr:0)]=1,Ze.depth[kt]=0,Ze.opt_len--,Tr&&(Ze.static_len-=fr[2*kt+1]);for(bt.max_code=Dr,yt=Ze.heap_len>>1;1<=yt;yt--)Be(Ze,Gt,yt);for(kt=yr;yt=Ze.heap[1],Ze.heap[1]=Ze.heap[Ze.heap_len--],Be(Ze,Gt,1),Nt=Ze.heap[1],Ze.heap[--Ze.heap_max]=yt,Ze.heap[--Ze.heap_max]=Nt,Gt[2*kt]=Gt[2*yt]+Gt[2*Nt],Ze.depth[kt]=(Ze.depth[yt]>=Ze.depth[Nt]?Ze.depth[yt]:Ze.depth[Nt])+1,Gt[2*yt+1]=Gt[2*Nt+1]=kt,Ze.heap[1]=kt++,Be(Ze,Gt,1),2<=Ze.heap_len;);Ze.heap[--Ze.heap_max]=Ze.heap[1],function(jt,Jt){var pr,Ft,er,ur,Yt,mr,Mr=Jt.dyn_tree,sn=Jt.max_code,Un=Jt.stat_desc.static_tree,wn=Jt.stat_desc.has_stree,Zi=Jt.stat_desc.extra_bits,ai=Jt.stat_desc.extra_base,_i=Jt.stat_desc.max_length,Zn=0;for(ur=0;ur<=V;ur++)jt.bl_count[ur]=0;for(Mr[2*jt.heap[jt.heap_max]+1]=0,pr=jt.heap_max+1;pr<573;pr++)_i<(ur=Mr[2*Mr[2*(Ft=jt.heap[pr])+1]+1]+1)&&(ur=_i,Zn++),Mr[2*Ft+1]=ur,sn<Ft||(jt.bl_count[ur]++,Yt=0,ai<=Ft&&(Yt=Zi[Ft-ai]),mr=Mr[2*Ft],jt.opt_len+=mr*(ur+Yt),wn&&(jt.static_len+=mr*(Un[2*Ft+1]+Yt)));if(Zn!==0){do{for(ur=_i-1;jt.bl_count[ur]===0;)ur--;jt.bl_count[ur]--,jt.bl_count[ur+1]+=2,jt.bl_count[_i]--,Zn-=2}while(0<Zn);for(ur=_i;ur!==0;ur--)for(Ft=jt.bl_count[ur];Ft!==0;)sn<(er=jt.heap[--pr])||(Mr[2*er+1]!==ur&&(jt.opt_len+=(ur-Mr[2*er+1])*Mr[2*er],Mr[2*er+1]=ur),Ft--)}}(Ze,bt),pe(Gt,Dr,Ze.bl_count)}function Ne(Ze,bt,yt){var Nt,kt,Gt=-1,fr=bt[1],Tr=0,yr=7,Dr=4;for(fr===0&&(yr=138,Dr=3),bt[2*(yt+1)+1]=65535,Nt=0;Nt<=yt;Nt++)kt=fr,fr=bt[2*(Nt+1)+1],++Tr<yr&&kt===fr||(Tr<Dr?Ze.bl_tree[2*kt]+=Tr:kt!==0?(kt!==Gt&&Ze.bl_tree[2*kt]++,Ze.bl_tree[32]++):Tr<=10?Ze.bl_tree[34]++:Ze.bl_tree[36]++,Gt=kt,Dr=(Tr=0)===fr?(yr=138,3):kt===fr?(yr=6,3):(yr=7,4))}function st(Ze,bt,yt){var Nt,kt,Gt=-1,fr=bt[1],Tr=0,yr=7,Dr=4;for(fr===0&&(yr=138,Dr=3),Nt=0;Nt<=yt;Nt++)if(kt=fr,fr=bt[2*(Nt+1)+1],!(++Tr<yr&&kt===fr)){if(Tr<Dr)for(;Te(Ze,kt,Ze.bl_tree),--Tr!=0;);else kt!==0?(kt!==Gt&&(Te(Ze,kt,Ze.bl_tree),Tr--),Te(Ze,16,Ze.bl_tree),xe(Ze,Tr-3,2)):Tr<=10?(Te(Ze,17,Ze.bl_tree),xe(Ze,Tr-3,3)):(Te(Ze,18,Ze.bl_tree),xe(Ze,Tr-11,7));Gt=kt,Dr=(Tr=0)===fr?(yr=138,3):kt===fr?(yr=6,3):(yr=7,4)}}S(N);var ot=!1;function Je(Ze,bt,yt,Nt){xe(Ze,0+(Nt?1:0),3),function(kt,Gt,fr,Tr){re(kt),J(kt,fr),J(kt,~fr),v.arraySet(kt.pending_buf,kt.window,Gt,fr,kt.pending),kt.pending+=fr}(Ze,bt,yt)}x._tr_init=function(Ze){ot||(function(){var bt,yt,Nt,kt,Gt,fr=new Array(16);for(kt=Nt=0;kt<28;kt++)for(Z[kt]=Nt,bt=0;bt<1<<X[kt];bt++)G[Nt++]=kt;for(G[Nt-1]=kt,kt=Gt=0;kt<16;kt++)for(N[kt]=Gt,bt=0;bt<1<<Q[kt];bt++)ce[Gt++]=kt;for(Gt>>=7;kt<O;kt++)for(N[kt]=Gt<<7,bt=0;bt<1<<Q[kt]-7;bt++)ce[256+Gt++]=kt;for(yt=0;yt<=V;yt++)fr[yt]=0;for(bt=0;bt<=143;)Ae[2*bt+1]=8,bt++,fr[8]++;for(;bt<=255;)Ae[2*bt+1]=9,bt++,fr[9]++;for(;bt<=279;)Ae[2*bt+1]=7,bt++,fr[7]++;for(;bt<=287;)Ae[2*bt+1]=8,bt++,fr[8]++;for(pe(Ae,287,fr),bt=0;bt<O;bt++)fe[2*bt+1]=5,fe[2*bt]=Ue(bt,5);z=new U(Ae,X,257,F,V),k=new U(fe,Q,0,O,V),R=new U(new Array(0),ee,0,19,7)}(),ot=!0),Ze.l_desc=new Y(Ze.dyn_ltree,z),Ze.d_desc=new Y(Ze.dyn_dtree,k),Ze.bl_desc=new Y(Ze.bl_tree,R),Ze.bi_buf=0,Ze.bi_valid=0,Oe(Ze)},x._tr_stored_block=Je,x._tr_flush_block=function(Ze,bt,yt,Nt){var kt,Gt,fr=0;0<Ze.level?(Ze.strm.data_type===2&&(Ze.strm.data_type=function(Tr){var yr,Dr=4093624447;for(yr=0;yr<=31;yr++,Dr>>>=1)if(1&Dr&&Tr.dyn_ltree[2*yr]!==0)return 0;if(Tr.dyn_ltree[18]!==0||Tr.dyn_ltree[20]!==0||Tr.dyn_ltree[26]!==0)return 1;for(yr=32;yr<B;yr++)if(Tr.dyn_ltree[2*yr]!==0)return 1;return 0}(Ze)),Ge(Ze,Ze.l_desc),Ge(Ze,Ze.d_desc),fr=function(Tr){var yr;for(Ne(Tr,Tr.dyn_ltree,Tr.l_desc.max_code),Ne(Tr,Tr.dyn_dtree,Tr.d_desc.max_code),Ge(Tr,Tr.bl_desc),yr=18;3<=yr&&Tr.bl_tree[2*ne[yr]+1]===0;yr--);return Tr.opt_len+=3*(yr+1)+5+5+4,yr}(Ze),kt=Ze.opt_len+3+7>>>3,(Gt=Ze.static_len+3+7>>>3)<=kt&&(kt=Gt)):kt=Gt=yt+5,yt+4<=kt&&bt!==-1?Je(Ze,bt,yt,Nt):Ze.strategy===4||Gt===kt?(xe(Ze,2+(Nt?1:0),3),He(Ze,Ae,fe)):(xe(Ze,4+(Nt?1:0),3),function(Tr,yr,Dr,jt){var Jt;for(xe(Tr,yr-257,5),xe(Tr,Dr-1,5),xe(Tr,jt-4,4),Jt=0;Jt<jt;Jt++)xe(Tr,Tr.bl_tree[2*ne[Jt]+1],3);st(Tr,Tr.dyn_ltree,yr-1),st(Tr,Tr.dyn_dtree,Dr-1)}(Ze,Ze.l_desc.max_code+1,Ze.d_desc.max_code+1,fr+1),He(Ze,Ze.dyn_ltree,Ze.dyn_dtree)),Oe(Ze),Nt&&re(Ze)},x._tr_tally=function(Ze,bt,yt){return Ze.pending_buf[Ze.d_buf+2*Ze.last_lit]=bt>>>8&255,Ze.pending_buf[Ze.d_buf+2*Ze.last_lit+1]=255&bt,Ze.pending_buf[Ze.l_buf+Ze.last_lit]=255&yt,Ze.last_lit++,bt===0?Ze.dyn_ltree[2*yt]++:(Ze.matches++,bt--,Ze.dyn_ltree[2*(G[yt]+B+1)]++,Ze.dyn_dtree[2*de(bt)]++),Ze.last_lit===Ze.lit_bufsize-1},x._tr_align=function(Ze){xe(Ze,2,3),Te(Ze,256,Ae),function(bt){bt.bi_valid===16?(J(bt,bt.bi_buf),bt.bi_buf=0,bt.bi_valid=0):8<=bt.bi_valid&&(bt.pending_buf[bt.pending++]=255&bt.bi_buf,bt.bi_buf>>=8,bt.bi_valid-=8)}(Ze)}},{"../utils/common":41}],53:[function(m,b,x){b.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(m,b,x){(function(v){(function(S,B){if(!S.setImmediate){var F,O,V,X,Q=1,ee={},ne=!1,Ae=S.document,fe=Object.getPrototypeOf&&Object.getPrototypeOf(S);fe=fe&&fe.setTimeout?fe:S,F={}.toString.call(S.process)==="[object process]"?function(z){a.nextTick(function(){G(z)})}:function(){if(S.postMessage&&!S.importScripts){var z=!0,k=S.onmessage;return S.onmessage=function(){z=!1},S.postMessage("","*"),S.onmessage=k,z}}()?(X="setImmediate$"+Math.random()+"$",S.addEventListener?S.addEventListener("message",Z,!1):S.attachEvent("onmessage",Z),function(z){S.postMessage(X+z,"*")}):S.MessageChannel?((V=new MessageChannel).port1.onmessage=function(z){G(z.data)},function(z){V.port2.postMessage(z)}):Ae&&"onreadystatechange"in Ae.createElement("script")?(O=Ae.documentElement,function(z){var k=Ae.createElement("script");k.onreadystatechange=function(){G(z),k.onreadystatechange=null,O.removeChild(k),k=null},O.appendChild(k)}):function(z){setTimeout(G,0,z)},fe.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var k=new Array(arguments.length-1),R=0;R<k.length;R++)k[R]=arguments[R+1];var N={callback:z,args:k};return ee[Q]=N,F(Q),Q++},fe.clearImmediate=ce}function ce(z){delete ee[z]}function G(z){if(ne)setTimeout(G,0,z);else{var k=ee[z];if(k){ne=!0;try{(function(R){var N=R.callback,U=R.args;switch(U.length){case 0:N();break;case 1:N(U[0]);break;case 2:N(U[0],U[1]);break;case 3:N(U[0],U[1],U[2]);break;default:N.apply(void 0,U)}})(k)}finally{ce(z),ne=!1}}}}function Z(z){z.source===S&&typeof z.data=="string"&&z.data.indexOf(X)===0&&G(+z.data.slice(X.length))}})(typeof self>"u"?v===void 0?this:v:self)}).call(this,l!==void 0?l:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(e,i,o){(function(a){(function(){var l=/[\\^$.*+?()[\]{}|]/g,t=RegExp(l.source),h=typeof a=="object"&&a&&a.Object===Object&&a,f=typeof self=="object"&&self&&self.Object===Object&&self,p=h||f||Function("return this")(),_=Object.prototype.toString,g=p.Symbol,m=g?g.prototype:void 0,b=m?m.toString:void 0;function x(v){if(typeof v=="string")return v;if(function(B){return typeof B=="symbol"||function(F){return!!F&&typeof F=="object"}(B)&&_.call(B)=="[object Symbol]"}(v))return b?b.call(v):"";var S=v+"";return S=="0"&&1/v==-1/0?"-0":S}i.exports=function(v){var S;return(v=(S=v)==null?"":x(S))&&t.test(v)?v.replace(l,"\\$&"):v}}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(e,i,o){(function(a){(function(){var l="[object Arguments]",t="[object Map]",h="[object Object]",f="[object Set]",p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_=/^\w*$/,g=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b=/\\(\\)?/g,x=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[l]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object Boolean]"]=S["[object DataView]"]=S["[object Date]"]=S["[object Error]"]=S["[object Function]"]=S[t]=S["[object Number]"]=S[h]=S["[object RegExp]"]=S[f]=S["[object String]"]=S["[object WeakMap]"]=!1;var B=typeof a=="object"&&a&&a.Object===Object&&a,F=typeof self=="object"&&self&&self.Object===Object&&self,O=B||F||Function("return this")(),V=typeof o=="object"&&o&&!o.nodeType&&o,X=V&&typeof i=="object"&&i&&!i.nodeType&&i,Q=X&&X.exports===V&&B.process,ee=function(){try{return Q&&Q.binding("util")}catch{}}(),ne=ee&&ee.isTypedArray;function Ae(Zt,$r,kn,vn){for(var si=-1,qn=Zt?Zt.length:0;++si<qn;){var Yn=Zt[si];$r(vn,Yn,kn(Yn),Zt)}return vn}function fe(Zt,$r){for(var kn=-1,vn=Zt?Zt.length:0;++kn<vn;)if($r(Zt[kn],kn,Zt))return!0;return!1}function ce(Zt){var $r=!1;if(Zt!=null&&typeof Zt.toString!="function")try{$r=!!(Zt+"")}catch{}return $r}function G(Zt){var $r=-1,kn=Array(Zt.size);return Zt.forEach(function(vn,si){kn[++$r]=[si,vn]}),kn}function Z(Zt){var $r=-1,kn=Array(Zt.size);return Zt.forEach(function(vn){kn[++$r]=vn}),kn}var z,k,R,N=Array.prototype,U=Function.prototype,Y=Object.prototype,de=O["__core-js_shared__"],J=(z=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",xe=U.toString,Te=Y.hasOwnProperty,Ue=Y.toString,pe=RegExp("^"+xe.call(Te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=O.Symbol,re=O.Uint8Array,ie=Y.propertyIsEnumerable,Be=N.splice,He=(k=Object.keys,R=Object,function(Zt){return k(R(Zt))}),Ge=zn(O,"DataView"),Ne=zn(O,"Map"),st=zn(O,"Promise"),ot=zn(O,"Set"),Je=zn(O,"WeakMap"),Ze=zn(Object,"create"),bt=tt(Ge),yt=tt(Ne),Nt=tt(st),kt=tt(ot),Gt=tt(Je),fr=Oe?Oe.prototype:void 0,Tr=fr?fr.valueOf:void 0,yr=fr?fr.toString:void 0;function Dr(Zt){var $r=-1,kn=Zt?Zt.length:0;for(this.clear();++$r<kn;){var vn=Zt[$r];this.set(vn[0],vn[1])}}function jt(Zt){var $r=-1,kn=Zt?Zt.length:0;for(this.clear();++$r<kn;){var vn=Zt[$r];this.set(vn[0],vn[1])}}function Jt(Zt){var $r=-1,kn=Zt?Zt.length:0;for(this.clear();++$r<kn;){var vn=Zt[$r];this.set(vn[0],vn[1])}}function pr(Zt){var $r=-1,kn=Zt?Zt.length:0;for(this.__data__=new Jt;++$r<kn;)this.add(Zt[$r])}function Ft(Zt){this.__data__=new jt(Zt)}function er(Zt,$r){var kn=Fr(Zt)||nr(Zt)?function(Yn,Wi){for(var us=-1,xs=Array(Yn);++us<Yn;)xs[us]=Wi(us);return xs}(Zt.length,String):[],vn=kn.length,si=!!vn;for(var qn in Zt)!Te.call(Zt,qn)||si&&(qn=="length"||Qs(qn,vn))||kn.push(qn);return kn}function ur(Zt,$r){for(var kn=Zt.length;kn--;)if(Et(Zt[kn][0],$r))return kn;return-1}function Yt(Zt,$r,kn,vn){return Mr(Zt,function(si,qn,Yn){$r(vn,si,kn(si),Yn)}),vn}Dr.prototype.clear=function(){this.__data__=Ze?Ze(null):{}},Dr.prototype.delete=function(Zt){return this.has(Zt)&&delete this.__data__[Zt]},Dr.prototype.get=function(Zt){var $r=this.__data__;if(Ze){var kn=$r[Zt];return kn==="__lodash_hash_undefined__"?void 0:kn}return Te.call($r,Zt)?$r[Zt]:void 0},Dr.prototype.has=function(Zt){var $r=this.__data__;return Ze?$r[Zt]!==void 0:Te.call($r,Zt)},Dr.prototype.set=function(Zt,$r){return this.__data__[Zt]=Ze&&$r===void 0?"__lodash_hash_undefined__":$r,this},jt.prototype.clear=function(){this.__data__=[]},jt.prototype.delete=function(Zt){var $r=this.__data__,kn=ur($r,Zt);return!(kn<0)&&(kn==$r.length-1?$r.pop():Be.call($r,kn,1),!0)},jt.prototype.get=function(Zt){var $r=this.__data__,kn=ur($r,Zt);return kn<0?void 0:$r[kn][1]},jt.prototype.has=function(Zt){return ur(this.__data__,Zt)>-1},jt.prototype.set=function(Zt,$r){var kn=this.__data__,vn=ur(kn,Zt);return vn<0?kn.push([Zt,$r]):kn[vn][1]=$r,this},Jt.prototype.clear=function(){this.__data__={hash:new Dr,map:new(Ne||jt),string:new Dr}},Jt.prototype.delete=function(Zt){return tr(this,Zt).delete(Zt)},Jt.prototype.get=function(Zt){return tr(this,Zt).get(Zt)},Jt.prototype.has=function(Zt){return tr(this,Zt).has(Zt)},Jt.prototype.set=function(Zt,$r){return tr(this,Zt).set(Zt,$r),this},pr.prototype.add=pr.prototype.push=function(Zt){return this.__data__.set(Zt,"__lodash_hash_undefined__"),this},pr.prototype.has=function(Zt){return this.__data__.has(Zt)},Ft.prototype.clear=function(){this.__data__=new jt},Ft.prototype.delete=function(Zt){return this.__data__.delete(Zt)},Ft.prototype.get=function(Zt){return this.__data__.get(Zt)},Ft.prototype.has=function(Zt){return this.__data__.has(Zt)},Ft.prototype.set=function(Zt,$r){var kn=this.__data__;if(kn instanceof jt){var vn=kn.__data__;if(!Ne||vn.length<199)return vn.push([Zt,$r]),this;kn=this.__data__=new Jt(vn)}return kn.set(Zt,$r),this};var mr,Mr=(mr=function(Zt,$r){return Zt&&sn(Zt,$r,ds)},function(Zt,$r){if(Zt==null)return Zt;if(!_r(Zt))return mr(Zt,$r);for(var kn=Zt.length,vn=-1,si=Object(Zt);++vn<kn&&$r(si[vn],vn,si)!==!1;);return Zt}),sn=function(Zt){return function($r,kn,vn){for(var si=-1,qn=Object($r),Yn=vn($r),Wi=Yn.length;Wi--;){var us=Yn[++si];if(kn(qn[us],us,qn)===!1)break}return $r}}();function Un(Zt,$r){for(var kn=0,vn=($r=li($r,Zt)?[$r]:Bn($r)).length;Zt!=null&&kn<vn;)Zt=Zt[We($r[kn++])];return kn&&kn==vn?Zt:void 0}function wn(Zt,$r){return Zt!=null&&$r in Object(Zt)}function Zi(Zt,$r,kn,vn,si){return Zt===$r||(Zt==null||$r==null||!Vn(Zt)&&!Bi($r)?Zt!=Zt&&$r!=$r:function(qn,Yn,Wi,us,xs,zi){var uo=Fr(qn),Ji=Fr(Yn),ks="[object Array]",Co="[object Array]";uo||(ks=(ks=Ki(qn))==l?h:ks),Ji||(Co=(Co=Ki(Yn))==l?h:Co);var Do=ks==h&&!ce(qn),ba=Co==h&&!ce(Yn),il=ks==Co;if(il&&!Do)return zi||(zi=new Ft),uo||Di(qn)?On(qn,Yn,Wi,us,xs,zi):function(ro,Hs,zo,wl,Ha,Fa,Pa){switch(zo){case"[object DataView]":if(ro.byteLength!=Hs.byteLength||ro.byteOffset!=Hs.byteOffset)return!1;ro=ro.buffer,Hs=Hs.buffer;case"[object ArrayBuffer]":return!(ro.byteLength!=Hs.byteLength||!wl(new re(ro),new re(Hs)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Et(+ro,+Hs);case"[object Error]":return ro.name==Hs.name&&ro.message==Hs.message;case"[object RegExp]":case"[object String]":return ro==Hs+"";case t:var wa=G;case f:var Sl=2&Fa;if(wa||(wa=Z),ro.size!=Hs.size&&!Sl)return!1;var Jl=Pa.get(ro);if(Jl)return Jl==Hs;Fa|=1,Pa.set(ro,Hs);var pl=On(wa(ro),wa(Hs),wl,Ha,Fa,Pa);return Pa.delete(ro),pl;case"[object Symbol]":if(Tr)return Tr.call(ro)==Tr.call(Hs)}return!1}(qn,Yn,ks,Wi,us,xs,zi);if(!(2&xs)){var Ma=Do&&Te.call(qn,"__wrapped__"),Uo=ba&&Te.call(Yn,"__wrapped__");if(Ma||Uo){var xa=Ma?qn.value():qn,Gl=Uo?Yn.value():Yn;return zi||(zi=new Ft),Wi(xa,Gl,us,xs,zi)}}return il?(zi||(zi=new Ft),function(ro,Hs,zo,wl,Ha,Fa){var Pa=2&Ha,wa=ds(ro),Sl=wa.length,Jl=ds(Hs).length;if(Sl!=Jl&&!Pa)return!1;for(var pl=Sl;pl--;){var sl=wa[pl];if(!(Pa?sl in Hs:Te.call(Hs,sl)))return!1}var hc=Fa.get(ro);if(hc&&Fa.get(Hs))return hc==Hs;var na=!0;Fa.set(ro,Hs),Fa.set(Hs,ro);for(var La=Pa;++pl<Sl;){sl=wa[pl];var zc=ro[sl],Cc=Hs[sl];if(wl)var Os=Pa?wl(Cc,zc,sl,Hs,ro,Fa):wl(zc,Cc,sl,ro,Hs,Fa);if(!(Os===void 0?zc===Cc||zo(zc,Cc,wl,Ha,Fa):Os)){na=!1;break}La||(La=sl=="constructor")}if(na&&!La){var qu=ro.constructor,Jc=Hs.constructor;qu==Jc||!("constructor"in ro)||!("constructor"in Hs)||typeof qu=="function"&&qu instanceof qu&&typeof Jc=="function"&&Jc instanceof Jc||(na=!1)}return Fa.delete(ro),Fa.delete(Hs),na}(qn,Yn,Wi,us,xs,zi)):!1}(Zt,$r,Zi,kn,vn,si))}function ai(Zt){return!(!Vn(Zt)||function($r){return!!J&&J in $r}(Zt))&&(pn(Zt)||ce(Zt)?pe:x).test(tt(Zt))}function _i(Zt){return typeof Zt=="function"?Zt:Zt==null?Qi:typeof Zt=="object"?Fr(Zt)?function(vn,si){return li(vn)&&Qt(si)?Ve(We(vn),si):function(qn){var Yn=function(Wi,us,xs){var zi=Wi==null?void 0:Un(Wi,us);return zi===void 0?xs:zi}(qn,vn);return Yn===void 0&&Yn===si?function(Wi,us){return Wi!=null&&function(xs,zi,uo){zi=li(zi,xs)?[zi]:Bn(zi);for(var Ji,ks=-1,Co=zi.length;++ks<Co;){var Do=We(zi[ks]);if(!(Ji=xs!=null&&uo(xs,Do)))break;xs=xs[Do]}return Ji||!!(Co=xs?xs.length:0)&&Tn(Co)&&Qs(Do,Co)&&(Fr(xs)||nr(xs))}(Wi,us,wn)}(qn,vn):Zi(si,Yn,void 0,3)}}(Zt[0],Zt[1]):function(vn){var si=function(qn){for(var Yn=ds(qn),Wi=Yn.length;Wi--;){var us=Yn[Wi],xs=qn[us];Yn[Wi]=[us,xs,Qt(xs)]}return Yn}(vn);return si.length==1&&si[0][2]?Ve(si[0][0],si[0][1]):function(qn){return qn===vn||function(Yn,Wi,us,xs){var zi=us.length,uo=zi;if(Yn==null)return!uo;for(Yn=Object(Yn);zi--;){var Ji=us[zi];if(Ji[2]?Ji[1]!==Yn[Ji[0]]:!(Ji[0]in Yn))return!1}for(;++zi<uo;){var ks=(Ji=us[zi])[0],Co=Yn[ks],Do=Ji[1];if(Ji[2]){if(Co===void 0&&!(ks in Yn))return!1}else{var ba=new Ft,il;if(!(il===void 0?Zi(Do,Co,xs,3,ba):il))return!1}}return!0}(qn,vn,si)}}(Zt):li($r=Zt)?(kn=We($r),function(vn){return vn==null?void 0:vn[kn]}):function(vn){return function(si){return Un(si,vn)}}($r);var $r,kn}function Zn(Zt){if(kn=($r=Zt)&&$r.constructor,vn=typeof kn=="function"&&kn.prototype||Y,$r!==vn)return He(Zt);var $r,kn,vn,si=[];for(var qn in Object(Zt))Te.call(Zt,qn)&&qn!="constructor"&&si.push(qn);return si}function Bn(Zt){return Fr(Zt)?Zt:et(Zt)}function On(Zt,$r,kn,vn,si,qn){var Yn=2&si,Wi=Zt.length,us=$r.length;if(Wi!=us&&!(Yn&&us>Wi))return!1;var xs=qn.get(Zt);if(xs&&qn.get($r))return xs==$r;var zi=-1,uo=!0,Ji=1&si?new pr:void 0;for(qn.set(Zt,$r),qn.set($r,Zt);++zi<Wi;){var ks=Zt[zi],Co=$r[zi];if(vn)var Do=Yn?vn(Co,ks,zi,$r,Zt,qn):vn(ks,Co,zi,Zt,$r,qn);if(Do!==void 0){if(Do)continue;uo=!1;break}if(Ji){if(!fe($r,function(ba,il){if(!Ji.has(il)&&(ks===ba||kn(ks,ba,vn,si,qn)))return Ji.add(il)})){uo=!1;break}}else if(ks!==Co&&!kn(ks,Co,vn,si,qn)){uo=!1;break}}return qn.delete(Zt),qn.delete($r),uo}function tr(Zt,$r){var kn,vn,si=Zt.__data__;return((vn=typeof(kn=$r))=="string"||vn=="number"||vn=="symbol"||vn=="boolean"?kn!=="__proto__":kn===null)?si[typeof $r=="string"?"string":"hash"]:si.map}function zn(Zt,$r){var kn=function(vn,si){return vn==null?void 0:vn[si]}(Zt,$r);return ai(kn)?kn:void 0}var Ki=function(Zt){return Ue.call(Zt)};function Qs(Zt,$r){return!!($r=$r??9007199254740991)&&(typeof Zt=="number"||v.test(Zt))&&Zt>-1&&Zt%1==0&&Zt<$r}function li(Zt,$r){if(Fr(Zt))return!1;var kn=typeof Zt;return!(kn!="number"&&kn!="symbol"&&kn!="boolean"&&Zt!=null&&!Si(Zt))||_.test(Zt)||!p.test(Zt)||$r!=null&&Zt in Object($r)}function Qt(Zt){return Zt==Zt&&!Vn(Zt)}function Ve(Zt,$r){return function(kn){return kn!=null&&kn[Zt]===$r&&($r!==void 0||Zt in Object(kn))}}(Ge&&Ki(new Ge(new ArrayBuffer(1)))!="[object DataView]"||Ne&&Ki(new Ne)!=t||st&&Ki(st.resolve())!="[object Promise]"||ot&&Ki(new ot)!=f||Je&&Ki(new Je)!="[object WeakMap]")&&(Ki=function(Zt){var $r=Ue.call(Zt),kn=$r==h?Zt.constructor:void 0,vn=kn?tt(kn):void 0;if(vn)switch(vn){case bt:return"[object DataView]";case yt:return t;case Nt:return"[object Promise]";case kt:return f;case Gt:return"[object WeakMap]"}return $r});var et=rr(function(Zt){var $r;Zt=($r=Zt)==null?"":function(vn){if(typeof vn=="string")return vn;if(Si(vn))return yr?yr.call(vn):"";var si=vn+"";return si=="0"&&1/vn==-1/0?"-0":si}($r);var kn=[];return g.test(Zt)&&kn.push(""),Zt.replace(m,function(vn,si,qn,Yn){kn.push(qn?Yn.replace(b,"$1"):si||vn)}),kn});function We(Zt){if(typeof Zt=="string"||Si(Zt))return Zt;var $r=Zt+"";return $r=="0"&&1/Zt==-1/0?"-0":$r}function tt(Zt){if(Zt!=null){try{return xe.call(Zt)}catch{}try{return Zt+""}catch{}}return""}var nt,Ct=(nt=function(Zt,$r,kn){Te.call(Zt,kn)?Zt[kn].push($r):Zt[kn]=[$r]},function(Zt,$r){var kn=Fr(Zt)?Ae:Yt,vn={};return kn(Zt,nt,_i($r),vn)});function rr(Zt,$r){if(typeof Zt!="function"||$r&&typeof $r!="function")throw new TypeError("Expected a function");var kn=function(){var vn=arguments,si=$r?$r.apply(this,vn):vn[0],qn=kn.cache;if(qn.has(si))return qn.get(si);var Yn=Zt.apply(this,vn);return kn.cache=qn.set(si,Yn),Yn};return kn.cache=new(rr.Cache||Jt),kn}function Et(Zt,$r){return Zt===$r||Zt!=Zt&&$r!=$r}function nr(Zt){return function($r){return Bi($r)&&_r($r)}(Zt)&&Te.call(Zt,"callee")&&(!ie.call(Zt,"callee")||Ue.call(Zt)==l)}rr.Cache=Jt;var Fr=Array.isArray;function _r(Zt){return Zt!=null&&Tn(Zt.length)&&!pn(Zt)}function pn(Zt){var $r=Vn(Zt)?Ue.call(Zt):"";return $r=="[object Function]"||$r=="[object GeneratorFunction]"}function Tn(Zt){return typeof Zt=="number"&&Zt>-1&&Zt%1==0&&Zt<=9007199254740991}function Vn(Zt){var $r=typeof Zt;return!!Zt&&($r=="object"||$r=="function")}function Bi(Zt){return!!Zt&&typeof Zt=="object"}function Si(Zt){return typeof Zt=="symbol"||Bi(Zt)&&Ue.call(Zt)=="[object Symbol]"}var Di=ne?function(Zt){return function($r){return Zt($r)}}(ne):function(Zt){return Bi(Zt)&&Tn(Zt.length)&&!!S[Ue.call(Zt)]};function ds(Zt){return _r(Zt)?er(Zt):Zn(Zt)}function Qi(Zt){return Zt}i.exports=Ct}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(e,i,o){var a=Object.prototype.toString;i.exports=function(l){return l===!0||l===!1||function(t){return!!t&&typeof t=="object"}(l)&&a.call(l)=="[object Boolean]"}},{}],445:[function(e,i,o){(function(a){(function(){var l="[object Arguments]",t="[object Map]",h="[object Object]",f="[object Set]",p=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[l]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g["[object Function]"]=g[t]=g["[object Number]"]=g[h]=g["[object RegExp]"]=g[f]=g["[object String]"]=g["[object WeakMap]"]=!1;var m=typeof a=="object"&&a&&a.Object===Object&&a,b=typeof self=="object"&&self&&self.Object===Object&&self,x=m||b||Function("return this")(),v=typeof o=="object"&&o&&!o.nodeType&&o,S=v&&typeof i=="object"&&i&&!i.nodeType&&i,B=S&&S.exports===v,F=B&&m.process,O=function(){try{return F&&F.binding&&F.binding("util")}catch{}}(),V=O&&O.isTypedArray;function X(We,tt){for(var nt=-1,Ct=We==null?0:We.length;++nt<Ct;)if(tt(We[nt],nt,We))return!0;return!1}function Q(We){var tt=-1,nt=Array(We.size);return We.forEach(function(Ct,rr){nt[++tt]=[rr,Ct]}),nt}function ee(We){var tt=-1,nt=Array(We.size);return We.forEach(function(Ct){nt[++tt]=Ct}),nt}var ne,Ae,fe,ce=Array.prototype,G=Function.prototype,Z=Object.prototype,z=x["__core-js_shared__"],k=G.toString,R=Z.hasOwnProperty,N=(ne=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+ne:"",U=Z.toString,Y=RegExp("^"+k.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),de=B?x.Buffer:void 0,J=x.Symbol,xe=x.Uint8Array,Te=Z.propertyIsEnumerable,Ue=ce.splice,pe=J?J.toStringTag:void 0,Oe=Object.getOwnPropertySymbols,re=de?de.isBuffer:void 0,ie=(Ae=Object.keys,fe=Object,function(We){return Ae(fe(We))}),Be=wn(x,"DataView"),He=wn(x,"Map"),Ge=wn(x,"Promise"),Ne=wn(x,"Set"),st=wn(x,"WeakMap"),ot=wn(Object,"create"),Je=Zn(Be),Ze=Zn(He),bt=Zn(Ge),yt=Zn(Ne),Nt=Zn(st),kt=J?J.prototype:void 0,Gt=kt?kt.valueOf:void 0;function fr(We){var tt=-1,nt=We==null?0:We.length;for(this.clear();++tt<nt;){var Ct=We[tt];this.set(Ct[0],Ct[1])}}function Tr(We){var tt=-1,nt=We==null?0:We.length;for(this.clear();++tt<nt;){var Ct=We[tt];this.set(Ct[0],Ct[1])}}function yr(We){var tt=-1,nt=We==null?0:We.length;for(this.clear();++tt<nt;){var Ct=We[tt];this.set(Ct[0],Ct[1])}}function Dr(We){var tt=-1,nt=We==null?0:We.length;for(this.__data__=new yr;++tt<nt;)this.add(We[tt])}function jt(We){var tt=this.__data__=new Tr(We);this.size=tt.size}function Jt(We,tt){var nt=tr(We),Ct=!nt&&On(We),rr=!nt&&!Ct&&zn(We),Et=!nt&&!Ct&&!rr&&Ve(We),nr=nt||Ct||rr||Et,Fr=nr?function(Tn,Vn){for(var Bi=-1,Si=Array(Tn);++Bi<Tn;)Si[Bi]=Vn(Bi);return Si}(We.length,String):[],_r=Fr.length;for(var pn in We)!R.call(We,pn)||nr&&(pn=="length"||rr&&(pn=="offset"||pn=="parent")||Et&&(pn=="buffer"||pn=="byteLength"||pn=="byteOffset")||_i(pn,_r))||Fr.push(pn);return Fr}function pr(We,tt){for(var nt=We.length;nt--;)if(Bn(We[nt][0],tt))return nt;return-1}function Ft(We){return We==null?We===void 0?"[object Undefined]":"[object Null]":pe&&pe in Object(We)?function(tt){var nt=R.call(tt,pe),Ct=tt[pe];try{tt[pe]=void 0;var rr=!0}catch{}var Et=U.call(tt);return rr&&(nt?tt[pe]=Ct:delete tt[pe]),Et}(We):function(tt){return U.call(tt)}(We)}function er(We){return Qt(We)&&Ft(We)==l}function ur(We,tt,nt,Ct,rr){return We===tt||(We==null||tt==null||!Qt(We)&&!Qt(tt)?We!=We&&tt!=tt:function(Et,nr,Fr,_r,pn,Tn){var Vn=tr(Et),Bi=tr(nr),Si=Vn?"[object Array]":ai(Et),Di=Bi?"[object Array]":ai(nr),ds=(Si=Si==l?h:Si)==h,Qi=(Di=Di==l?h:Di)==h,Zt=Si==Di;if(Zt&&zn(Et)){if(!zn(nr))return!1;Vn=!0,ds=!1}if(Zt&&!ds)return Tn||(Tn=new jt),Vn||Ve(Et)?Mr(Et,nr,Fr,_r,pn,Tn):function(qn,Yn,Wi,us,xs,zi,uo){switch(Wi){case"[object DataView]":if(qn.byteLength!=Yn.byteLength||qn.byteOffset!=Yn.byteOffset)return!1;qn=qn.buffer,Yn=Yn.buffer;case"[object ArrayBuffer]":return!(qn.byteLength!=Yn.byteLength||!zi(new xe(qn),new xe(Yn)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Bn(+qn,+Yn);case"[object Error]":return qn.name==Yn.name&&qn.message==Yn.message;case"[object RegExp]":case"[object String]":return qn==Yn+"";case t:var Ji=Q;case f:var ks=1&us;if(Ji||(Ji=ee),qn.size!=Yn.size&&!ks)return!1;var Co=uo.get(qn);if(Co)return Co==Yn;us|=2,uo.set(qn,Yn);var Do=Mr(Ji(qn),Ji(Yn),us,xs,zi,uo);return uo.delete(qn),Do;case"[object Symbol]":if(Gt)return Gt.call(qn)==Gt.call(Yn)}return!1}(Et,nr,Si,Fr,_r,pn,Tn);if(!(1&Fr)){var $r=ds&&R.call(Et,"__wrapped__"),kn=Qi&&R.call(nr,"__wrapped__");if($r||kn){var vn=$r?Et.value():Et,si=kn?nr.value():nr;return Tn||(Tn=new jt),pn(vn,si,Fr,_r,Tn)}}return Zt?(Tn||(Tn=new jt),function(qn,Yn,Wi,us,xs,zi){var uo=1&Wi,Ji=sn(qn),ks=Ji.length,Co=sn(Yn).length;if(ks!=Co&&!uo)return!1;for(var Do=ks;Do--;){var ba=Ji[Do];if(!(uo?ba in Yn:R.call(Yn,ba)))return!1}var il=zi.get(qn);if(il&&zi.get(Yn))return il==Yn;var Ma=!0;zi.set(qn,Yn),zi.set(Yn,qn);for(var Uo=uo;++Do<ks;){ba=Ji[Do];var xa=qn[ba],Gl=Yn[ba];if(us)var ro=uo?us(Gl,xa,ba,Yn,qn,zi):us(xa,Gl,ba,qn,Yn,zi);if(!(ro===void 0?xa===Gl||xs(xa,Gl,Wi,us,zi):ro)){Ma=!1;break}Uo||(Uo=ba=="constructor")}if(Ma&&!Uo){var Hs=qn.constructor,zo=Yn.constructor;Hs==zo||!("constructor"in qn)||!("constructor"in Yn)||typeof Hs=="function"&&Hs instanceof Hs&&typeof zo=="function"&&zo instanceof zo||(Ma=!1)}return zi.delete(qn),zi.delete(Yn),Ma}(Et,nr,Fr,_r,pn,Tn)):!1}(We,tt,nt,Ct,ur,rr))}function Yt(We){return!(!li(We)||function(tt){return!!N&&N in tt}(We))&&(Ki(We)?Y:p).test(Zn(We))}function mr(We){if(nt=(tt=We)&&tt.constructor,Ct=typeof nt=="function"&&nt.prototype||Z,tt!==Ct)return ie(We);var tt,nt,Ct,rr=[];for(var Et in Object(We))R.call(We,Et)&&Et!="constructor"&&rr.push(Et);return rr}function Mr(We,tt,nt,Ct,rr,Et){var nr=1&nt,Fr=We.length,_r=tt.length;if(Fr!=_r&&!(nr&&_r>Fr))return!1;var pn=Et.get(We);if(pn&&Et.get(tt))return pn==tt;var Tn=-1,Vn=!0,Bi=2&nt?new Dr:void 0;for(Et.set(We,tt),Et.set(tt,We);++Tn<Fr;){var Si=We[Tn],Di=tt[Tn];if(Ct)var ds=nr?Ct(Di,Si,Tn,tt,We,Et):Ct(Si,Di,Tn,We,tt,Et);if(ds!==void 0){if(ds)continue;Vn=!1;break}if(Bi){if(!X(tt,function(Qi,Zt){if($r=Zt,!Bi.has($r)&&(Si===Qi||rr(Si,Qi,nt,Ct,Et)))return Bi.push(Zt);var $r})){Vn=!1;break}}else if(Si!==Di&&!rr(Si,Di,nt,Ct,Et)){Vn=!1;break}}return Et.delete(We),Et.delete(tt),Vn}function sn(We){return function(tt,nt,Ct){var rr=nt(tt);return tr(tt)?rr:function(Et,nr){for(var Fr=-1,_r=nr.length,pn=Et.length;++Fr<_r;)Et[pn+Fr]=nr[Fr];return Et}(rr,Ct(tt))}(We,et,Zi)}function Un(We,tt){var nt,Ct,rr=We.__data__;return((Ct=typeof(nt=tt))=="string"||Ct=="number"||Ct=="symbol"||Ct=="boolean"?nt!=="__proto__":nt===null)?rr[typeof tt=="string"?"string":"hash"]:rr.map}function wn(We,tt){var nt=function(Ct,rr){return Ct==null?void 0:Ct[rr]}(We,tt);return Yt(nt)?nt:void 0}fr.prototype.clear=function(){this.__data__=ot?ot(null):{},this.size=0},fr.prototype.delete=function(We){var tt=this.has(We)&&delete this.__data__[We];return this.size-=tt?1:0,tt},fr.prototype.get=function(We){var tt=this.__data__;if(ot){var nt=tt[We];return nt==="__lodash_hash_undefined__"?void 0:nt}return R.call(tt,We)?tt[We]:void 0},fr.prototype.has=function(We){var tt=this.__data__;return ot?tt[We]!==void 0:R.call(tt,We)},fr.prototype.set=function(We,tt){var nt=this.__data__;return this.size+=this.has(We)?0:1,nt[We]=ot&&tt===void 0?"__lodash_hash_undefined__":tt,this},Tr.prototype.clear=function(){this.__data__=[],this.size=0},Tr.prototype.delete=function(We){var tt=this.__data__,nt=pr(tt,We);return!(nt<0)&&(nt==tt.length-1?tt.pop():Ue.call(tt,nt,1),--this.size,!0)},Tr.prototype.get=function(We){var tt=this.__data__,nt=pr(tt,We);return nt<0?void 0:tt[nt][1]},Tr.prototype.has=function(We){return pr(this.__data__,We)>-1},Tr.prototype.set=function(We,tt){var nt=this.__data__,Ct=pr(nt,We);return Ct<0?(++this.size,nt.push([We,tt])):nt[Ct][1]=tt,this},yr.prototype.clear=function(){this.size=0,this.__data__={hash:new fr,map:new(He||Tr),string:new fr}},yr.prototype.delete=function(We){var tt=Un(this,We).delete(We);return this.size-=tt?1:0,tt},yr.prototype.get=function(We){return Un(this,We).get(We)},yr.prototype.has=function(We){return Un(this,We).has(We)},yr.prototype.set=function(We,tt){var nt=Un(this,We),Ct=nt.size;return nt.set(We,tt),this.size+=nt.size==Ct?0:1,this},Dr.prototype.add=Dr.prototype.push=function(We){return this.__data__.set(We,"__lodash_hash_undefined__"),this},Dr.prototype.has=function(We){return this.__data__.has(We)},jt.prototype.clear=function(){this.__data__=new Tr,this.size=0},jt.prototype.delete=function(We){var tt=this.__data__,nt=tt.delete(We);return this.size=tt.size,nt},jt.prototype.get=function(We){return this.__data__.get(We)},jt.prototype.has=function(We){return this.__data__.has(We)},jt.prototype.set=function(We,tt){var nt=this.__data__;if(nt instanceof Tr){var Ct=nt.__data__;if(!He||Ct.length<199)return Ct.push([We,tt]),this.size=++nt.size,this;nt=this.__data__=new yr(Ct)}return nt.set(We,tt),this.size=nt.size,this};var Zi=Oe?function(We){return We==null?[]:(We=Object(We),function(tt,nt){for(var Ct=-1,rr=tt==null?0:tt.length,Et=0,nr=[];++Ct<rr;){var Fr=tt[Ct];nt(Fr,Ct,tt)&&(nr[Et++]=Fr)}return nr}(Oe(We),function(tt){return Te.call(We,tt)}))}:function(){return[]},ai=Ft;function _i(We,tt){return!!(tt=tt??9007199254740991)&&(typeof We=="number"||_.test(We))&&We>-1&&We%1==0&&We<tt}function Zn(We){if(We!=null){try{return k.call(We)}catch{}try{return We+""}catch{}}return""}function Bn(We,tt){return We===tt||We!=We&&tt!=tt}(Be&&ai(new Be(new ArrayBuffer(1)))!="[object DataView]"||He&&ai(new He)!=t||Ge&&ai(Ge.resolve())!="[object Promise]"||Ne&&ai(new Ne)!=f||st&&ai(new st)!="[object WeakMap]")&&(ai=function(We){var tt=Ft(We),nt=tt==h?We.constructor:void 0,Ct=nt?Zn(nt):"";if(Ct)switch(Ct){case Je:return"[object DataView]";case Ze:return t;case bt:return"[object Promise]";case yt:return f;case Nt:return"[object WeakMap]"}return tt});var On=er(function(){return arguments}())?er:function(We){return Qt(We)&&R.call(We,"callee")&&!Te.call(We,"callee")},tr=Array.isArray,zn=re||function(){return!1};function Ki(We){if(!li(We))return!1;var tt=Ft(We);return tt=="[object Function]"||tt=="[object GeneratorFunction]"||tt=="[object AsyncFunction]"||tt=="[object Proxy]"}function Qs(We){return typeof We=="number"&&We>-1&&We%1==0&&We<=9007199254740991}function li(We){var tt=typeof We;return We!=null&&(tt=="object"||tt=="function")}function Qt(We){return We!=null&&typeof We=="object"}var Ve=V?function(We){return function(tt){return We(tt)}}(V):function(We){return Qt(We)&&Qs(We.length)&&!!g[Ft(We)]};function et(We){return(tt=We)!=null&&Qs(tt.length)&&!Ki(tt)?Jt(We):mr(We);var tt}i.exports=function(We,tt){return ur(We,tt)}}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(e,i,o){(function(a){(function(){var l=typeof a=="object"&&a&&a.Object===Object&&a,t=typeof self=="object"&&self&&self.Object===Object&&self,h=l||t||Function("return this")(),f=Object.prototype,p=f.hasOwnProperty,_=f.toString,g=h.Symbol,m=g?g.toStringTag:void 0;function b(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":m&&m in Object(x)?function(v){var S=p.call(v,m),B=v[m];try{v[m]=void 0;var F=!0}catch{}var O=_.call(v);return F&&(S?v[m]=B:delete v[m]),O}(x):function(v){return _.call(v)}(x)}i.exports=function(x){if(!function(S){var B=typeof S;return S!=null&&(B=="object"||B=="function")}(x))return!1;var v=b(x);return v=="[object Function]"||v=="[object GeneratorFunction]"||v=="[object AsyncFunction]"||v=="[object Proxy]"}}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(e,i,o){i.exports=function(a){return a==null}},{}],448:[function(e,i,o){i.exports=function(a){return a===void 0}},{}],449:[function(e,i,o){(function(a){(function(){var l=/^\[object .+?Constructor\]$/,t=typeof a=="object"&&a&&a.Object===Object&&a,h=typeof self=="object"&&self&&self.Object===Object&&self,f=t||h||Function("return this")();function p(J,xe){return!!(J&&J.length)&&function(Te,Ue,pe){if(Ue!=Ue)return function(ie,Be,He,Ge){for(var Ne=ie.length,st=He+-1;++st<Ne;)if(Be(ie[st],st,ie))return st;return-1}(Te,_,pe);for(var Oe=pe-1,re=Te.length;++Oe<re;)if(Te[Oe]===Ue)return Oe;return-1}(J,xe,0)>-1}function _(J){return J!=J}function g(J,xe){return J.has(xe)}function m(J){var xe=-1,Te=Array(J.size);return J.forEach(function(Ue){Te[++xe]=Ue}),Te}var b,x=Array.prototype,v=Function.prototype,S=Object.prototype,B=f["__core-js_shared__"],F=(b=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",O=v.toString,V=S.hasOwnProperty,X=S.toString,Q=RegExp("^"+O.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=x.splice,ne=Y(f,"Map"),Ae=Y(f,"Set"),fe=Y(Object,"create");function ce(J){var xe=-1,Te=J?J.length:0;for(this.clear();++xe<Te;){var Ue=J[xe];this.set(Ue[0],Ue[1])}}function G(J){var xe=-1,Te=J?J.length:0;for(this.clear();++xe<Te;){var Ue=J[xe];this.set(Ue[0],Ue[1])}}function Z(J){var xe=-1,Te=J?J.length:0;for(this.clear();++xe<Te;){var Ue=J[xe];this.set(Ue[0],Ue[1])}}function z(J){var xe=-1,Te=J?J.length:0;for(this.__data__=new Z;++xe<Te;)this.add(J[xe])}function k(J,xe){for(var Te,Ue,pe=J.length;pe--;)if((Te=J[pe][0])===(Ue=xe)||Te!=Te&&Ue!=Ue)return pe;return-1}function R(J){return!(!de(J)||(xe=J,F&&F in xe))&&(function(Te){var Ue=de(Te)?X.call(Te):"";return Ue=="[object Function]"||Ue=="[object GeneratorFunction]"}(J)||function(Te){var Ue=!1;if(Te!=null&&typeof Te.toString!="function")try{Ue=!!(Te+"")}catch{}return Ue}(J)?Q:l).test(function(Te){if(Te!=null){try{return O.call(Te)}catch{}try{return Te+""}catch{}}return""}(J));var xe}ce.prototype.clear=function(){this.__data__=fe?fe(null):{}},ce.prototype.delete=function(J){return this.has(J)&&delete this.__data__[J]},ce.prototype.get=function(J){var xe=this.__data__;if(fe){var Te=xe[J];return Te==="__lodash_hash_undefined__"?void 0:Te}return V.call(xe,J)?xe[J]:void 0},ce.prototype.has=function(J){var xe=this.__data__;return fe?xe[J]!==void 0:V.call(xe,J)},ce.prototype.set=function(J,xe){return this.__data__[J]=fe&&xe===void 0?"__lodash_hash_undefined__":xe,this},G.prototype.clear=function(){this.__data__=[]},G.prototype.delete=function(J){var xe=this.__data__,Te=k(xe,J);return!(Te<0)&&(Te==xe.length-1?xe.pop():ee.call(xe,Te,1),!0)},G.prototype.get=function(J){var xe=this.__data__,Te=k(xe,J);return Te<0?void 0:xe[Te][1]},G.prototype.has=function(J){return k(this.__data__,J)>-1},G.prototype.set=function(J,xe){var Te=this.__data__,Ue=k(Te,J);return Ue<0?Te.push([J,xe]):Te[Ue][1]=xe,this},Z.prototype.clear=function(){this.__data__={hash:new ce,map:new(ne||G),string:new ce}},Z.prototype.delete=function(J){return U(this,J).delete(J)},Z.prototype.get=function(J){return U(this,J).get(J)},Z.prototype.has=function(J){return U(this,J).has(J)},Z.prototype.set=function(J,xe){return U(this,J).set(J,xe),this},z.prototype.add=z.prototype.push=function(J){return this.__data__.set(J,"__lodash_hash_undefined__"),this},z.prototype.has=function(J){return this.__data__.has(J)};var N=Ae&&1/m(new Ae([,-0]))[1]==1/0?function(J){return new Ae(J)}:function(){};function U(J,xe){var Te,Ue,pe=J.__data__;return((Ue=typeof(Te=xe))=="string"||Ue=="number"||Ue=="symbol"||Ue=="boolean"?Te!=="__proto__":Te===null)?pe[typeof xe=="string"?"string":"hash"]:pe.map}function Y(J,xe){var Te=function(Ue,pe){return Ue==null?void 0:Ue[pe]}(J,xe);return R(Te)?Te:void 0}function de(J){var xe=typeof J;return!!J&&(xe=="object"||xe=="function")}i.exports=function(J){return J&&J.length?function(xe,Te,Ue){var pe=-1,Oe=p,re=xe.length,ie=!0,Be=[],He=Be;if(re>=200){var Ge=N(xe);if(Ge)return m(Ge);ie=!1,Oe=g,He=new z}else He=Be;e:for(;++pe<re;){var Ne=xe[pe],st=Ne;if(Ne=Ne!==0?Ne:0,ie&&st==st){for(var ot=He.length;ot--;)if(He[ot]===st)continue e;Be.push(Ne)}else Oe(He,st,Ue)||(He!==Be&&He.push(st),Be.push(Ne))}return Be}(J):[]}}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(e,i,o){var a=e("inherits"),l=e("hash-base"),t=e("safe-buffer").Buffer,h=new Array(16);function f(){l.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function p(x,v){return x<<v|x>>>32-v}function _(x,v,S,B,F,O,V){return p(x+(v&S|~v&B)+F+O|0,V)+v|0}function g(x,v,S,B,F,O,V){return p(x+(v&B|S&~B)+F+O|0,V)+v|0}function m(x,v,S,B,F,O,V){return p(x+(v^S^B)+F+O|0,V)+v|0}function b(x,v,S,B,F,O,V){return p(x+(S^(v|~B))+F+O|0,V)+v|0}a(f,l),f.prototype._update=function(){for(var x=h,v=0;v<16;++v)x[v]=this._block.readInt32LE(4*v);var S=this._a,B=this._b,F=this._c,O=this._d;S=_(S,B,F,O,x[0],3614090360,7),O=_(O,S,B,F,x[1],3905402710,12),F=_(F,O,S,B,x[2],606105819,17),B=_(B,F,O,S,x[3],3250441966,22),S=_(S,B,F,O,x[4],4118548399,7),O=_(O,S,B,F,x[5],1200080426,12),F=_(F,O,S,B,x[6],2821735955,17),B=_(B,F,O,S,x[7],4249261313,22),S=_(S,B,F,O,x[8],1770035416,7),O=_(O,S,B,F,x[9],2336552879,12),F=_(F,O,S,B,x[10],4294925233,17),B=_(B,F,O,S,x[11],2304563134,22),S=_(S,B,F,O,x[12],1804603682,7),O=_(O,S,B,F,x[13],4254626195,12),F=_(F,O,S,B,x[14],2792965006,17),S=g(S,B=_(B,F,O,S,x[15],1236535329,22),F,O,x[1],4129170786,5),O=g(O,S,B,F,x[6],3225465664,9),F=g(F,O,S,B,x[11],643717713,14),B=g(B,F,O,S,x[0],3921069994,20),S=g(S,B,F,O,x[5],3593408605,5),O=g(O,S,B,F,x[10],38016083,9),F=g(F,O,S,B,x[15],3634488961,14),B=g(B,F,O,S,x[4],3889429448,20),S=g(S,B,F,O,x[9],568446438,5),O=g(O,S,B,F,x[14],3275163606,9),F=g(F,O,S,B,x[3],4107603335,14),B=g(B,F,O,S,x[8],1163531501,20),S=g(S,B,F,O,x[13],2850285829,5),O=g(O,S,B,F,x[2],4243563512,9),F=g(F,O,S,B,x[7],1735328473,14),S=m(S,B=g(B,F,O,S,x[12],2368359562,20),F,O,x[5],4294588738,4),O=m(O,S,B,F,x[8],2272392833,11),F=m(F,O,S,B,x[11],1839030562,16),B=m(B,F,O,S,x[14],4259657740,23),S=m(S,B,F,O,x[1],2763975236,4),O=m(O,S,B,F,x[4],1272893353,11),F=m(F,O,S,B,x[7],4139469664,16),B=m(B,F,O,S,x[10],3200236656,23),S=m(S,B,F,O,x[13],681279174,4),O=m(O,S,B,F,x[0],3936430074,11),F=m(F,O,S,B,x[3],3572445317,16),B=m(B,F,O,S,x[6],76029189,23),S=m(S,B,F,O,x[9],3654602809,4),O=m(O,S,B,F,x[12],3873151461,11),F=m(F,O,S,B,x[15],530742520,16),S=b(S,B=m(B,F,O,S,x[2],3299628645,23),F,O,x[0],4096336452,6),O=b(O,S,B,F,x[7],1126891415,10),F=b(F,O,S,B,x[14],2878612391,15),B=b(B,F,O,S,x[5],4237533241,21),S=b(S,B,F,O,x[12],1700485571,6),O=b(O,S,B,F,x[3],2399980690,10),F=b(F,O,S,B,x[10],4293915773,15),B=b(B,F,O,S,x[1],2240044497,21),S=b(S,B,F,O,x[8],1873313359,6),O=b(O,S,B,F,x[15],4264355552,10),F=b(F,O,S,B,x[6],2734768916,15),B=b(B,F,O,S,x[13],1309151649,21),S=b(S,B,F,O,x[4],4149444226,6),O=b(O,S,B,F,x[11],3174756917,10),F=b(F,O,S,B,x[2],718787259,15),B=b(B,F,O,S,x[9],3951481745,21),this._a=this._a+S|0,this._b=this._b+B|0,this._c=this._c+F|0,this._d=this._d+O|0},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var x=t.allocUnsafe(16);return x.writeInt32LE(this._a,0),x.writeInt32LE(this._b,4),x.writeInt32LE(this._c,8),x.writeInt32LE(this._d,12),x},i.exports=f},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(e,i,o){var a=e("bn.js"),l=e("brorand");function t(h){this.rand=h||new l.Rand}i.exports=t,t.create=function(h){return new t(h)},t.prototype._randbelow=function(h){var f=h.bitLength(),p=Math.ceil(f/8);do var _=new a(this.rand.generate(p));while(_.cmp(h)>=0);return _},t.prototype._randrange=function(h,f){var p=f.sub(h);return h.add(this._randbelow(p))},t.prototype.test=function(h,f,p){var _=h.bitLength(),g=a.mont(h),m=new a(1).toRed(g);f||(f=Math.max(1,_/48|0));for(var b=h.subn(1),x=0;!b.testn(x);x++);for(var v=h.shrn(x),S=b.toRed(g);f>0;f--){var B=this._randrange(new a(2),b);p&&p(B);var F=B.toRed(g).redPow(v);if(F.cmp(m)!==0&&F.cmp(S)!==0){for(var O=1;O<x;O++){if((F=F.redSqr()).cmp(m)===0)return!1;if(F.cmp(S)===0)break}if(O===x)return!1}}return!0},t.prototype.getDivisor=function(h,f){var p=h.bitLength(),_=a.mont(h),g=new a(1).toRed(_);f||(f=Math.max(1,p/48|0));for(var m=h.subn(1),b=0;!m.testn(b);b++);for(var x=h.shrn(b),v=m.toRed(_);f>0;f--){var S=this._randrange(new a(2),m),B=h.gcd(S);if(B.cmpn(1)!==0)return B;var F=S.toRed(_).redPow(x);if(F.cmp(g)!==0&&F.cmp(v)!==0){for(var O=1;O<b;O++){if((F=F.redSqr()).cmp(g)===0)return F.fromRed().subn(1).gcd(h);if(F.cmp(v)===0)break}if(O===b)return(F=F.redSqr()).fromRed().subn(1).gcd(h)}}return!1}},{"bn.js":452,brorand:187}],452:[function(e,i,o){arguments[4][184][0].apply(o,arguments)},{buffer:188,dup:184}],453:[function(e,i,o){function a(l,t){if(!l)throw new Error(t||"Assertion failed")}i.exports=a,a.equal=function(l,t,h){if(l!=t)throw new Error(h||"Assertion failed: "+l+" != "+t)}},{}],454:[function(e,i,o){var a=o;function l(h){return h.length===1?"0"+h:h}function t(h){for(var f="",p=0;p<h.length;p++)f+=l(h[p].toString(16));return f}a.toArray=function(h,f){if(Array.isArray(h))return h.slice();if(!h)return[];var p=[];if(typeof h!="string"){for(var _=0;_<h.length;_++)p[_]=0|h[_];return p}if(f==="hex")for((h=h.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(h="0"+h),_=0;_<h.length;_+=2)p.push(parseInt(h[_]+h[_+1],16));else for(_=0;_<h.length;_++){var g=h.charCodeAt(_),m=g>>8,b=255&g;m?p.push(m,b):p.push(b)}return p},a.zero2=l,a.toHex=t,a.encode=function(h,f){return f==="hex"?t(h):h}},{}],455:[function(e,i,o){i.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(e,i,o){var a=e("asn1.js");o.certificate=e("./certificate");var l=a.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});o.RSAPrivateKey=l;var t=a.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});o.RSAPublicKey=t;var h=a.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(f),this.key("subjectPublicKey").bitstr())});o.PublicKey=h;var f=a.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),p=a.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(f),this.key("subjectPrivateKey").octstr())});o.PrivateKey=p;var _=a.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});o.EncryptedPrivateKey=_;var g=a.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});o.DSAPrivateKey=g,o.DSAparam=a.define("DSAparam",function(){this.int()});var m=a.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(b),this.key("publicKey").optional().explicit(1).bitstr())});o.ECPrivateKey=m;var b=a.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});o.signature=a.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(e,i,o){var a=e("asn1.js"),l=a.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),t=a.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),h=a.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),f=a.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(h),this.key("subjectPublicKey").bitstr())}),p=a.define("RelativeDistinguishedName",function(){this.setof(t)}),_=a.define("RDNSequence",function(){this.seqof(p)}),g=a.define("Name",function(){this.choice({rdnSequence:this.use(_)})}),m=a.define("Validity",function(){this.seq().obj(this.key("notBefore").use(l),this.key("notAfter").use(l))}),b=a.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),x=a.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(h),this.key("issuer").use(g),this.key("validity").use(m),this.key("subject").use(g),this.key("subjectPublicKeyInfo").use(f),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(b).optional())}),v=a.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(x),this.key("signatureAlgorithm").use(h),this.key("signatureValue").bitstr())});i.exports=v},{"asn1.js":170}],458:[function(e,i,o){var a=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,l=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,t=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,h=e("evp_bytestokey"),f=e("browserify-aes"),p=e("safe-buffer").Buffer;i.exports=function(_,g){var m,b=_.toString(),x=b.match(a);if(x){var v="aes"+x[1],S=p.from(x[2],"hex"),B=p.from(x[3].replace(/[\r\n]/g,""),"base64"),F=h(g,S.slice(0,8),parseInt(x[1],10)).key,O=[],V=f.createDecipheriv(v,F,S);O.push(V.update(B)),O.push(V.final()),m=p.concat(O)}else{var X=b.match(t);m=p.from(X[2].replace(/[\r\n]/g,""),"base64")}return{tag:b.match(l)[1],data:m}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(e,i,o){var a=e("./asn1"),l=e("./aesid.json"),t=e("./fixProc"),h=e("browserify-aes"),f=e("pbkdf2"),p=e("safe-buffer").Buffer;function _(g){var m;typeof g!="object"||p.isBuffer(g)||(m=g.passphrase,g=g.key),typeof g=="string"&&(g=p.from(g));var b,x,v=t(g,m),S=v.tag,B=v.data;switch(S){case"CERTIFICATE":x=a.certificate.decode(B,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(x||(x=a.PublicKey.decode(B,"der")),b=x.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return a.RSAPublicKey.decode(x.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return x.subjectPrivateKey=x.subjectPublicKey,{type:"ec",data:x};case"1.2.840.10040.4.1":return x.algorithm.params.pub_key=a.DSAparam.decode(x.subjectPublicKey.data,"der"),{type:"dsa",data:x.algorithm.params};default:throw new Error("unknown key id "+b)}case"ENCRYPTED PRIVATE KEY":B=function(F,O){var V=F.algorithm.decrypt.kde.kdeparams.salt,X=parseInt(F.algorithm.decrypt.kde.kdeparams.iters.toString(),10),Q=l[F.algorithm.decrypt.cipher.algo.join(".")],ee=F.algorithm.decrypt.cipher.iv,ne=F.subjectPrivateKey,Ae=parseInt(Q.split("-")[1],10)/8,fe=f.pbkdf2Sync(O,V,X,Ae,"sha1"),ce=h.createDecipheriv(Q,fe,ee),G=[];return G.push(ce.update(ne)),G.push(ce.final()),p.concat(G)}(B=a.EncryptedPrivateKey.decode(B,"der"),m);case"PRIVATE KEY":switch(b=(x=a.PrivateKey.decode(B,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return a.RSAPrivateKey.decode(x.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:x.algorithm.curve,privateKey:a.ECPrivateKey.decode(x.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return x.algorithm.params.priv_key=a.DSAparam.decode(x.subjectPrivateKey,"der"),{type:"dsa",params:x.algorithm.params};default:throw new Error("unknown key id "+b)}case"RSA PUBLIC KEY":return a.RSAPublicKey.decode(B,"der");case"RSA PRIVATE KEY":return a.RSAPrivateKey.decode(B,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:a.DSAPrivateKey.decode(B,"der")};case"EC PRIVATE KEY":return{curve:(B=a.ECPrivateKey.decode(B,"der")).parameters.value,privateKey:B.privateKey};default:throw new Error("unknown key type "+S)}}i.exports=_,_.signature=a.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(e,i,o){o.pbkdf2=e("./lib/async"),o.pbkdf2Sync=e("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(e,i,o){(function(a){(function(){var l,t,h=e("safe-buffer").Buffer,f=e("./precondition"),p=e("./default-encoding"),_=e("./sync"),g=e("./to-buffer"),m=a.crypto&&a.crypto.subtle,b={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},x=[];function v(){return t||(t=a.process&&a.process.nextTick?a.process.nextTick:a.queueMicrotask?a.queueMicrotask:a.setImmediate?a.setImmediate:a.setTimeout)}function S(B,F,O,V,X){return m.importKey("raw",B,{name:"PBKDF2"},!1,["deriveBits"]).then(function(Q){return m.deriveBits({name:"PBKDF2",salt:F,iterations:O,hash:{name:X}},Q,V<<3)}).then(function(Q){return h.from(Q)})}i.exports=function(B,F,O,V,X,Q){typeof X=="function"&&(Q=X,X=void 0);var ee=b[(X=X||"sha1").toLowerCase()];if(ee&&typeof a.Promise=="function"){if(f(O,V),B=g(B,p,"Password"),F=g(F,p,"Salt"),typeof Q!="function")throw new Error("No callback provided to pbkdf2");(function(ne,Ae){ne.then(function(fe){v()(function(){Ae(null,fe)})},function(fe){v()(function(){Ae(fe)})})})(function(ne){if(a.process&&!a.process.browser||!m||!m.importKey||!m.deriveBits)return Promise.resolve(!1);if(x[ne]!==void 0)return x[ne];var Ae=S(l=l||h.alloc(8),l,10,128,ne).then(function(){return!0}).catch(function(){return!1});return x[ne]=Ae,Ae}(ee).then(function(ne){return ne?S(B,F,O,V,ee):_(B,F,O,V,X)}),Q)}else v()(function(){var ne;try{ne=_(B,F,O,V,X)}catch(Ae){return Q(Ae)}Q(null,ne)})}}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(e,i,o){(function(a,l){(function(){var t;l.process&&l.process.browser?t="utf-8":l.process&&l.process.version?t=parseInt(a.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":t="utf-8",i.exports=t}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(e,i,o){var a=Math.pow(2,30)-1;i.exports=function(l,t){if(typeof l!="number")throw new TypeError("Iterations not a number");if(l<0)throw new TypeError("Bad iterations");if(typeof t!="number")throw new TypeError("Key length not a number");if(t<0||t>a||t!=t)throw new TypeError("Bad key length")}},{}],464:[function(e,i,o){var a=e("create-hash/md5"),l=e("ripemd160"),t=e("sha.js"),h=e("safe-buffer").Buffer,f=e("./precondition"),p=e("./default-encoding"),_=e("./to-buffer"),g=h.alloc(128),m={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function b(x,v,S){var B=function(ee){function ne(Ae){return t(ee).update(Ae).digest()}return ee==="rmd160"||ee==="ripemd160"?function(Ae){return new l().update(Ae).digest()}:ee==="md5"?a:ne}(x),F=x==="sha512"||x==="sha384"?128:64;v.length>F?v=B(v):v.length<F&&(v=h.concat([v,g],F));for(var O=h.allocUnsafe(F+m[x]),V=h.allocUnsafe(F+m[x]),X=0;X<F;X++)O[X]=54^v[X],V[X]=92^v[X];var Q=h.allocUnsafe(F+S+4);O.copy(Q,0,0,F),this.ipad1=Q,this.ipad2=O,this.opad=V,this.alg=x,this.blocksize=F,this.hash=B,this.size=m[x]}b.prototype.run=function(x,v){return x.copy(v,this.blocksize),this.hash(v).copy(this.opad,this.blocksize),this.hash(this.opad)},i.exports=function(x,v,S,B,F){f(S,B);var O=new b(F=F||"sha1",x=_(x,p,"Password"),(v=_(v,p,"Salt")).length),V=h.allocUnsafe(B),X=h.allocUnsafe(v.length+4);v.copy(X,0,0,v.length);for(var Q=0,ee=m[F],ne=Math.ceil(B/ee),Ae=1;Ae<=ne;Ae++){X.writeUInt32BE(Ae,v.length);for(var fe=O.run(X,O.ipad1),ce=fe,G=1;G<S;G++){ce=O.run(ce,O.ipad2);for(var Z=0;Z<ee;Z++)fe[Z]^=ce[Z]}fe.copy(V,Q),Q+=ee}return V}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(e,i,o){var a=e("safe-buffer").Buffer;i.exports=function(l,t,h){if(a.isBuffer(l))return l;if(typeof l=="string")return a.from(l,t);if(ArrayBuffer.isView(l))return a.from(l.buffer);throw new TypeError(h+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(e,i,o){(function(a){(function(){a===void 0||!a.version||a.version.indexOf("v0.")===0||a.version.indexOf("v1.")===0&&a.version.indexOf("v1.8.")!==0?i.exports={nextTick:function(l,t,h,f){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var p,_,g=arguments.length;switch(g){case 0:case 1:return a.nextTick(l);case 2:return a.nextTick(function(){l.call(null,t)});case 3:return a.nextTick(function(){l.call(null,t,h)});case 4:return a.nextTick(function(){l.call(null,t,h,f)});default:for(p=new Array(g-1),_=0;_<p.length;)p[_++]=arguments[_];return a.nextTick(function(){l.apply(null,p)})}}}:i.exports=a}).call(this)}).call(this,e("_process"))},{_process:467}],467:[function(e,i,o){var a,l,t=i.exports={};function h(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function p(F){if(a===setTimeout)return setTimeout(F,0);if((a===h||!a)&&setTimeout)return a=setTimeout,setTimeout(F,0);try{return a(F,0)}catch{try{return a.call(null,F,0)}catch{return a.call(this,F,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:h}catch{a=h}try{l=typeof clearTimeout=="function"?clearTimeout:f}catch{l=f}})();var _,g=[],m=!1,b=-1;function x(){m&&_&&(m=!1,_.length?g=_.concat(g):b=-1,g.length&&v())}function v(){if(!m){var F=p(x);m=!0;for(var O=g.length;O;){for(_=g,g=[];++b<O;)_&&_[b].run();b=-1,O=g.length}_=null,m=!1,function(V){if(l===clearTimeout)return clearTimeout(V);if((l===f||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(V);try{l(V)}catch{try{return l.call(null,V)}catch{return l.call(this,V)}}}(F)}}function S(F,O){this.fun=F,this.array=O}function B(){}t.nextTick=function(F){var O=new Array(arguments.length-1);if(arguments.length>1)for(var V=1;V<arguments.length;V++)O[V-1]=arguments[V];g.push(new S(F,O)),g.length!==1||m||p(v)},S.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=B,t.addListener=B,t.once=B,t.off=B,t.removeListener=B,t.removeAllListeners=B,t.emit=B,t.prependListener=B,t.prependOnceListener=B,t.listeners=function(F){return[]},t.binding=function(F){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(F){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],468:[function(e,i,o){o.publicEncrypt=e("./publicEncrypt"),o.privateDecrypt=e("./privateDecrypt"),o.privateEncrypt=function(a,l){return o.publicEncrypt(a,l,!0)},o.publicDecrypt=function(a,l){return o.privateDecrypt(a,l,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(e,i,o){var a=e("create-hash"),l=e("safe-buffer").Buffer;function t(h){var f=l.allocUnsafe(4);return f.writeUInt32BE(h,0),f}i.exports=function(h,f){for(var p,_=l.alloc(0),g=0;_.length<f;)p=t(g++),_=l.concat([_,a("sha1").update(h).update(p).digest()]);return _.slice(0,f)}},{"create-hash":386,"safe-buffer":494}],470:[function(e,i,o){arguments[4][184][0].apply(o,arguments)},{buffer:188,dup:184}],471:[function(e,i,o){var a=e("parse-asn1"),l=e("./mgf"),t=e("./xor"),h=e("bn.js"),f=e("browserify-rsa"),p=e("create-hash"),_=e("./withPublic"),g=e("safe-buffer").Buffer;i.exports=function(m,b,x){var v;v=m.padding?m.padding:x?1:4;var S,B=a(m),F=B.modulus.byteLength();if(b.length>F||new h(b).cmp(B.modulus)>=0)throw new Error("decryption error");S=x?_(new h(b),B):f(b,B);var O=g.alloc(F-S.length);if(S=g.concat([O,S],F),v===4)return function(V,X){var Q=V.modulus.byteLength(),ee=p("sha1").update(g.alloc(0)).digest(),ne=ee.length;if(X[0]!==0)throw new Error("decryption error");var Ae=X.slice(1,ne+1),fe=X.slice(ne+1),ce=t(Ae,l(fe,ne)),G=t(fe,l(ce,Q-ne-1));if(function(z,k){z=g.from(z),k=g.from(k);var R=0,N=z.length;z.length!==k.length&&(R++,N=Math.min(z.length,k.length));for(var U=-1;++U<N;)R+=z[U]^k[U];return R}(ee,G.slice(0,ne)))throw new Error("decryption error");for(var Z=ne;G[Z]===0;)Z++;if(G[Z++]!==1)throw new Error("decryption error");return G.slice(Z)}(B,S);if(v===1)return function(V,X,Q){for(var ee=X.slice(0,2),ne=2,Ae=0;X[ne++]!==0;)if(ne>=X.length){Ae++;break}var fe=X.slice(2,ne-1);if((ee.toString("hex")!=="0002"&&!Q||ee.toString("hex")!=="0001"&&Q)&&Ae++,fe.length<8&&Ae++,Ae)throw new Error("decryption error");return X.slice(ne)}(0,S,x);if(v===3)return S;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(e,i,o){var a=e("parse-asn1"),l=e("randombytes"),t=e("create-hash"),h=e("./mgf"),f=e("./xor"),p=e("bn.js"),_=e("./withPublic"),g=e("browserify-rsa"),m=e("safe-buffer").Buffer;i.exports=function(b,x,v){var S;S=b.padding?b.padding:v?1:4;var B,F=a(b);if(S===4)B=function(O,V){var X=O.modulus.byteLength(),Q=V.length,ee=t("sha1").update(m.alloc(0)).digest(),ne=ee.length,Ae=2*ne;if(Q>X-Ae-2)throw new Error("message too long");var fe=m.alloc(X-Q-Ae-2),ce=X-ne-1,G=l(ne),Z=f(m.concat([ee,fe,m.alloc(1,1),V],ce),h(G,ce)),z=f(G,h(Z,ne));return new p(m.concat([m.alloc(1),z,Z],X))}(F,x);else if(S===1)B=function(O,V,X){var Q,ee=V.length,ne=O.modulus.byteLength();if(ee>ne-11)throw new Error("message too long");return Q=X?m.alloc(ne-ee-3,255):function(Ae){for(var fe,ce=m.allocUnsafe(Ae),G=0,Z=l(2*Ae),z=0;G<Ae;)z===Z.length&&(Z=l(2*Ae),z=0),(fe=Z[z++])&&(ce[G++]=fe);return ce}(ne-ee-3),new p(m.concat([m.from([0,X?1:2]),Q,m.alloc(1),V],ne))}(F,x,v);else{if(S!==3)throw new Error("unknown padding");if((B=new p(x)).cmp(F.modulus)>=0)throw new Error("data too long for modulus")}return v?g(B,F):_(B,F)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(e,i,o){var a=e("bn.js"),l=e("safe-buffer").Buffer;i.exports=function(t,h){return l.from(t.toRed(a.mont(h.modulus)).redPow(new a(h.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(e,i,o){i.exports=function(a,l){for(var t=a.length,h=-1;++h<t;)a[h]^=l[h];return a}},{}],475:[function(e,i,o){(function(a,l){(function(){var t=e("safe-buffer").Buffer,h=l.crypto||l.msCrypto;h&&h.getRandomValues?i.exports=function(f,p){if(f>4294967295)throw new RangeError("requested too many random bytes");var _=t.allocUnsafe(f);if(f>0)if(f>65536)for(var g=0;g<f;g+=65536)h.getRandomValues(_.slice(g,g+65536));else h.getRandomValues(_);return typeof p=="function"?a.nextTick(function(){p(null,_)}):_}:i.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(e,i,o){(function(a,l){(function(){function t(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var h=e("safe-buffer"),f=e("randombytes"),p=h.Buffer,_=h.kMaxLength,g=l.crypto||l.msCrypto,m=Math.pow(2,32)-1;function b(S,B){if(typeof S!="number"||S!=S)throw new TypeError("offset must be a number");if(S>m||S<0)throw new TypeError("offset must be a uint32");if(S>_||S>B)throw new RangeError("offset out of range")}function x(S,B,F){if(typeof S!="number"||S!=S)throw new TypeError("size must be a number");if(S>m||S<0)throw new TypeError("size must be a uint32");if(S+B>F||S>_)throw new RangeError("buffer too small")}function v(S,B,F,O){if(a.browser){var V=S.buffer,X=new Uint8Array(V,B,F);return g.getRandomValues(X),O?void a.nextTick(function(){O(null,S)}):S}if(!O)return f(F).copy(S,B),S;f(F,function(Q,ee){if(Q)return O(Q);ee.copy(S,B),O(null,S)})}g&&g.getRandomValues||!a.browser?(o.randomFill=function(S,B,F,O){if(!(p.isBuffer(S)||S instanceof l.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof B=="function")O=B,B=0,F=S.length;else if(typeof F=="function")O=F,F=S.length-B;else if(typeof O!="function")throw new TypeError('"cb" argument must be a function');return b(B,S.length),x(F,B,S.length),v(S,B,F,O)},o.randomFillSync=function(S,B,F){if(B===void 0&&(B=0),!(p.isBuffer(S)||S instanceof l.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return b(B,S.length),F===void 0&&(F=S.length-B),x(F,B,S.length),v(S,B,F)}):(o.randomFill=t,o.randomFillSync=t)}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(e,i,o){var a={};function l(h,f,p){p||(p=Error);var _=function(g){var m,b;function x(v,S,B){return g.call(this,function(F,O,V){return typeof f=="string"?f:f(F,O,V)}(v,S,B))||this}return b=g,(m=x).prototype=Object.create(b.prototype),m.prototype.constructor=m,m.__proto__=b,x}(p);_.prototype.name=p.name,_.prototype.code=h,a[h]=_}function t(h,f){if(Array.isArray(h)){var p=h.length;return h=h.map(function(_){return String(_)}),p>2?"one of ".concat(f," ").concat(h.slice(0,p-1).join(", "),", or ")+h[p-1]:p===2?"one of ".concat(f," ").concat(h[0]," or ").concat(h[1]):"of ".concat(f," ").concat(h[0])}return"of ".concat(f," ").concat(String(h))}l("ERR_INVALID_OPT_VALUE",function(h,f){return'The value "'+f+'" is invalid for option "'+h+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(h,f,p){var _,g,m;if(typeof f=="string"&&(g="not ",f.substr(0,g.length)===g)?(_="must not be",f=f.replace(/^not /,"")):_="must be",function(x,v,S){return(S===void 0||S>x.length)&&(S=x.length),x.substring(S-v.length,S)===v}(h," argument"))m="The ".concat(h," ").concat(_," ").concat(t(f,"type"));else{var b=function(x,v,S){return typeof S!="number"&&(S=0),!(S+v.length>x.length)&&x.indexOf(v,S)!==-1}(h,".")?"property":"argument";m='The "'.concat(h,'" ').concat(b," ").concat(_," ").concat(t(f,"type"))}return m+=". Received type ".concat(typeof p)},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=a},{}],478:[function(e,i,o){(function(a){(function(){var l=Object.keys||function(x){var v=[];for(var S in x)v.push(S);return v};i.exports=g;var t=e("./_stream_readable"),h=e("./_stream_writable");e("inherits")(g,t);for(var f=l(h.prototype),p=0;p<f.length;p++){var _=f[p];g.prototype[_]||(g.prototype[_]=h.prototype[_])}function g(x){if(!(this instanceof g))return new g(x);t.call(this,x),h.call(this,x),this.allowHalfOpen=!0,x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||a.nextTick(b,this)}function b(x){x.end()}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=x,this._writableState.destroyed=x)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(e,i,o){i.exports=l;var a=e("./_stream_transform");function l(t){if(!(this instanceof l))return new l(t);a.call(this,t)}e("inherits")(l,a),l.prototype._transform=function(t,h,f){f(null,t)}},{"./_stream_transform":481,inherits:440}],480:[function(e,i,o){(function(a,l){(function(){var t;i.exports=ce,ce.ReadableState=fe,e("events").EventEmitter;var h=function(re,ie){return re.listeners(ie).length},f=e("./internal/streams/stream"),p=e("buffer").Buffer,_=(l!==void 0?l:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},g,m=e("util");g=m&&m.debuglog?m.debuglog("stream"):function(){};var b,x,v,S=e("./internal/streams/buffer_list"),B=e("./internal/streams/destroy"),F=e("./internal/streams/state").getHighWaterMark,O=e("../errors").codes,V=O.ERR_INVALID_ARG_TYPE,X=O.ERR_STREAM_PUSH_AFTER_EOF,Q=O.ERR_METHOD_NOT_IMPLEMENTED,ee=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(ce,f);var ne=B.errorOrDestroy,Ae=["error","close","destroy","pause","resume"];function fe(re,ie,Be){t=t||e("./_stream_duplex"),re=re||{},typeof Be!="boolean"&&(Be=ie instanceof t),this.objectMode=!!re.objectMode,Be&&(this.objectMode=this.objectMode||!!re.readableObjectMode),this.highWaterMark=F(this,re,"readableHighWaterMark",Be),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=re.emitClose!==!1,this.autoDestroy=!!re.autoDestroy,this.destroyed=!1,this.defaultEncoding=re.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,re.encoding&&(b||(b=e("string_decoder/").StringDecoder),this.decoder=new b(re.encoding),this.encoding=re.encoding)}function ce(re){if(t=t||e("./_stream_duplex"),!(this instanceof ce))return new ce(re);var ie=this instanceof t;this._readableState=new fe(re,this,ie),this.readable=!0,re&&(typeof re.read=="function"&&(this._read=re.read),typeof re.destroy=="function"&&(this._destroy=re.destroy)),f.call(this)}function G(re,ie,Be,He,Ge){g("readableAddChunk",ie);var Ne,st=re._readableState;if(ie===null)st.reading=!1,function(ot,Je){if(g("onEofChunk"),!Je.ended){if(Je.decoder){var Ze=Je.decoder.end();Ze&&Ze.length&&(Je.buffer.push(Ze),Je.length+=Je.objectMode?1:Ze.length)}Je.ended=!0,Je.sync?k(ot):(Je.needReadable=!1,Je.emittedReadable||(Je.emittedReadable=!0,R(ot)))}}(re,st);else if(Ge||(Ne=function(ot,Je){var Ze;bt=Je,p.isBuffer(bt)||bt instanceof _||typeof Je=="string"||Je===void 0||ot.objectMode||(Ze=new V("chunk",["string","Buffer","Uint8Array"],Je));var bt;return Ze}(st,ie)),Ne)ne(re,Ne);else if(st.objectMode||ie&&ie.length>0)if(typeof ie=="string"||st.objectMode||Object.getPrototypeOf(ie)===p.prototype||(ie=function(ot){return p.from(ot)}(ie)),He)st.endEmitted?ne(re,new ee):Z(re,st,ie,!0);else if(st.ended)ne(re,new X);else{if(st.destroyed)return!1;st.reading=!1,st.decoder&&!Be?(ie=st.decoder.write(ie),st.objectMode||ie.length!==0?Z(re,st,ie,!1):N(re,st)):Z(re,st,ie,!1)}else He||(st.reading=!1,N(re,st));return!st.ended&&(st.length<st.highWaterMark||st.length===0)}function Z(re,ie,Be,He){ie.flowing&&ie.length===0&&!ie.sync?(ie.awaitDrain=0,re.emit("data",Be)):(ie.length+=ie.objectMode?1:Be.length,He?ie.buffer.unshift(Be):ie.buffer.push(Be),ie.needReadable&&k(re)),N(re,ie)}Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(re){this._readableState&&(this._readableState.destroyed=re)}}),ce.prototype.destroy=B.destroy,ce.prototype._undestroy=B.undestroy,ce.prototype._destroy=function(re,ie){ie(re)},ce.prototype.push=function(re,ie){var Be,He=this._readableState;return He.objectMode?Be=!0:typeof re=="string"&&((ie=ie||He.defaultEncoding)!==He.encoding&&(re=p.from(re,ie),ie=""),Be=!0),G(this,re,ie,!1,Be)},ce.prototype.unshift=function(re){return G(this,re,null,!0,!1)},ce.prototype.isPaused=function(){return this._readableState.flowing===!1},ce.prototype.setEncoding=function(re){b||(b=e("string_decoder/").StringDecoder);var ie=new b(re);this._readableState.decoder=ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,He="";Be!==null;)He+=ie.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),He!==""&&this._readableState.buffer.push(He),this._readableState.length=He.length,this};function z(re,ie){return re<=0||ie.length===0&&ie.ended?0:ie.objectMode?1:re!=re?ie.flowing&&ie.length?ie.buffer.head.data.length:ie.length:(re>ie.highWaterMark&&(ie.highWaterMark=function(Be){return Be>=1073741824?Be=1073741824:(Be--,Be|=Be>>>1,Be|=Be>>>2,Be|=Be>>>4,Be|=Be>>>8,Be|=Be>>>16,Be++),Be}(re)),re<=ie.length?re:ie.ended?ie.length:(ie.needReadable=!0,0))}function k(re){var ie=re._readableState;g("emitReadable",ie.needReadable,ie.emittedReadable),ie.needReadable=!1,ie.emittedReadable||(g("emitReadable",ie.flowing),ie.emittedReadable=!0,a.nextTick(R,re))}function R(re){var ie=re._readableState;g("emitReadable_",ie.destroyed,ie.length,ie.ended),ie.destroyed||!ie.length&&!ie.ended||(re.emit("readable"),ie.emittedReadable=!1),ie.needReadable=!ie.flowing&&!ie.ended&&ie.length<=ie.highWaterMark,xe(re)}function N(re,ie){ie.readingMore||(ie.readingMore=!0,a.nextTick(U,re,ie))}function U(re,ie){for(;!ie.reading&&!ie.ended&&(ie.length<ie.highWaterMark||ie.flowing&&ie.length===0);){var Be=ie.length;if(g("maybeReadMore read 0"),re.read(0),Be===ie.length)break}ie.readingMore=!1}function Y(re){var ie=re._readableState;ie.readableListening=re.listenerCount("readable")>0,ie.resumeScheduled&&!ie.paused?ie.flowing=!0:re.listenerCount("data")>0&&re.resume()}function de(re){g("readable nexttick read 0"),re.read(0)}function J(re,ie){g("resume",ie.reading),ie.reading||re.read(0),ie.resumeScheduled=!1,re.emit("resume"),xe(re),ie.flowing&&!ie.reading&&re.read(0)}function xe(re){var ie=re._readableState;for(g("flow",ie.flowing);ie.flowing&&re.read()!==null;);}function Te(re,ie){return ie.length===0?null:(ie.objectMode?Be=ie.buffer.shift():!re||re>=ie.length?(Be=ie.decoder?ie.buffer.join(""):ie.buffer.length===1?ie.buffer.first():ie.buffer.concat(ie.length),ie.buffer.clear()):Be=ie.buffer.consume(re,ie.decoder),Be);var Be}function Ue(re){var ie=re._readableState;g("endReadable",ie.endEmitted),ie.endEmitted||(ie.ended=!0,a.nextTick(pe,ie,re))}function pe(re,ie){if(g("endReadableNT",re.endEmitted,re.length),!re.endEmitted&&re.length===0&&(re.endEmitted=!0,ie.readable=!1,ie.emit("end"),re.autoDestroy)){var Be=ie._writableState;(!Be||Be.autoDestroy&&Be.finished)&&ie.destroy()}}function Oe(re,ie){for(var Be=0,He=re.length;Be<He;Be++)if(re[Be]===ie)return Be;return-1}ce.prototype.read=function(re){g("read",re),re=parseInt(re,10);var ie=this._readableState,Be=re;if(re!==0&&(ie.emittedReadable=!1),re===0&&ie.needReadable&&((ie.highWaterMark!==0?ie.length>=ie.highWaterMark:ie.length>0)||ie.ended))return g("read: emitReadable",ie.length,ie.ended),ie.length===0&&ie.ended?Ue(this):k(this),null;if((re=z(re,ie))===0&&ie.ended)return ie.length===0&&Ue(this),null;var He,Ge=ie.needReadable;return g("need readable",Ge),(ie.length===0||ie.length-re<ie.highWaterMark)&&g("length less than watermark",Ge=!0),ie.ended||ie.reading?g("reading or ended",Ge=!1):Ge&&(g("do read"),ie.reading=!0,ie.sync=!0,ie.length===0&&(ie.needReadable=!0),this._read(ie.highWaterMark),ie.sync=!1,ie.reading||(re=z(Be,ie))),(He=re>0?Te(re,ie):null)===null?(ie.needReadable=ie.length<=ie.highWaterMark,re=0):(ie.length-=re,ie.awaitDrain=0),ie.length===0&&(ie.ended||(ie.needReadable=!0),Be!==re&&ie.ended&&Ue(this)),He!==null&&this.emit("data",He),He},ce.prototype._read=function(re){ne(this,new Q("_read()"))},ce.prototype.pipe=function(re,ie){var Be=this,He=this._readableState;switch(He.pipesCount){case 0:He.pipes=re;break;case 1:He.pipes=[He.pipes,re];break;default:He.pipes.push(re)}He.pipesCount+=1,g("pipe count=%d opts=%j",He.pipesCount,ie);var Ge=(!ie||ie.end!==!1)&&re!==a.stdout&&re!==a.stderr?st:kt;function Ne(Gt,fr){g("onunpipe"),Gt===Be&&fr&&fr.hasUnpiped===!1&&(fr.hasUnpiped=!0,g("cleanup"),re.removeListener("close",yt),re.removeListener("finish",Nt),re.removeListener("drain",ot),re.removeListener("error",bt),re.removeListener("unpipe",Ne),Be.removeListener("end",st),Be.removeListener("end",kt),Be.removeListener("data",Ze),Je=!0,!He.awaitDrain||re._writableState&&!re._writableState.needDrain||ot())}function st(){g("onend"),re.end()}He.endEmitted?a.nextTick(Ge):Be.once("end",Ge),re.on("unpipe",Ne);var ot=function(Gt){return function(){var fr=Gt._readableState;g("pipeOnDrain",fr.awaitDrain),fr.awaitDrain&&fr.awaitDrain--,fr.awaitDrain===0&&h(Gt,"data")&&(fr.flowing=!0,xe(Gt))}}(Be);re.on("drain",ot);var Je=!1;function Ze(Gt){g("ondata");var fr=re.write(Gt);g("dest.write",fr),fr===!1&&((He.pipesCount===1&&He.pipes===re||He.pipesCount>1&&Oe(He.pipes,re)!==-1)&&!Je&&(g("false write response, pause",He.awaitDrain),He.awaitDrain++),Be.pause())}function bt(Gt){g("onerror",Gt),kt(),re.removeListener("error",bt),h(re,"error")===0&&ne(re,Gt)}function yt(){re.removeListener("finish",Nt),kt()}function Nt(){g("onfinish"),re.removeListener("close",yt),kt()}function kt(){g("unpipe"),Be.unpipe(re)}return Be.on("data",Ze),function(Gt,fr,Tr){if(typeof Gt.prependListener=="function")return Gt.prependListener(fr,Tr);Gt._events&&Gt._events[fr]?Array.isArray(Gt._events[fr])?Gt._events[fr].unshift(Tr):Gt._events[fr]=[Tr,Gt._events[fr]]:Gt.on(fr,Tr)}(re,"error",bt),re.once("close",yt),re.once("finish",Nt),re.emit("pipe",Be),He.flowing||(g("pipe resume"),Be.resume()),re},ce.prototype.unpipe=function(re){var ie=this._readableState,Be={hasUnpiped:!1};if(ie.pipesCount===0)return this;if(ie.pipesCount===1)return re&&re!==ie.pipes||(re||(re=ie.pipes),ie.pipes=null,ie.pipesCount=0,ie.flowing=!1,re&&re.emit("unpipe",this,Be)),this;if(!re){var He=ie.pipes,Ge=ie.pipesCount;ie.pipes=null,ie.pipesCount=0,ie.flowing=!1;for(var Ne=0;Ne<Ge;Ne++)He[Ne].emit("unpipe",this,{hasUnpiped:!1});return this}var st=Oe(ie.pipes,re);return st===-1||(ie.pipes.splice(st,1),ie.pipesCount-=1,ie.pipesCount===1&&(ie.pipes=ie.pipes[0]),re.emit("unpipe",this,Be)),this},ce.prototype.on=function(re,ie){var Be=f.prototype.on.call(this,re,ie),He=this._readableState;return re==="data"?(He.readableListening=this.listenerCount("readable")>0,He.flowing!==!1&&this.resume()):re==="readable"&&(He.endEmitted||He.readableListening||(He.readableListening=He.needReadable=!0,He.flowing=!1,He.emittedReadable=!1,g("on readable",He.length,He.reading),He.length?k(this):He.reading||a.nextTick(de,this))),Be},ce.prototype.addListener=ce.prototype.on,ce.prototype.removeListener=function(re,ie){var Be=f.prototype.removeListener.call(this,re,ie);return re==="readable"&&a.nextTick(Y,this),Be},ce.prototype.removeAllListeners=function(re){var ie=f.prototype.removeAllListeners.apply(this,arguments);return re!=="readable"&&re!==void 0||a.nextTick(Y,this),ie},ce.prototype.resume=function(){var re=this._readableState;return re.flowing||(g("resume"),re.flowing=!re.readableListening,function(ie,Be){Be.resumeScheduled||(Be.resumeScheduled=!0,a.nextTick(J,ie,Be))}(this,re)),re.paused=!1,this},ce.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ce.prototype.wrap=function(re){var ie=this,Be=this._readableState,He=!1;for(var Ge in re.on("end",function(){if(g("wrapped end"),Be.decoder&&!Be.ended){var st=Be.decoder.end();st&&st.length&&ie.push(st)}ie.push(null)}),re.on("data",function(st){g("wrapped data"),Be.decoder&&(st=Be.decoder.write(st)),Be.objectMode&&st==null||(Be.objectMode||st&&st.length)&&(ie.push(st)||(He=!0,re.pause()))}),re)this[Ge]===void 0&&typeof re[Ge]=="function"&&(this[Ge]=function(st){return function(){return re[st].apply(re,arguments)}}(Ge));for(var Ne=0;Ne<Ae.length;Ne++)re.on(Ae[Ne],this.emit.bind(this,Ae[Ne]));return this._read=function(st){g("wrapped _read",st),He&&(He=!1,re.resume())},this},typeof Symbol=="function"&&(ce.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=e("./internal/streams/async_iterator")),x(this)}),Object.defineProperty(ce.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ce.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ce.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(re){this._readableState&&(this._readableState.flowing=re)}}),ce._fromList=Te,Object.defineProperty(ce.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ce.from=function(re,ie){return v===void 0&&(v=e("./internal/streams/from")),v(ce,re,ie)})}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(e,i,o){i.exports=g;var a=e("../errors").codes,l=a.ERR_METHOD_NOT_IMPLEMENTED,t=a.ERR_MULTIPLE_CALLBACK,h=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=a.ERR_TRANSFORM_WITH_LENGTH_0,p=e("./_stream_duplex");function _(x,v){var S=this._transformState;S.transforming=!1;var B=S.writecb;if(B===null)return this.emit("error",new t);S.writechunk=null,S.writecb=null,v!=null&&this.push(v),B(x);var F=this._readableState;F.reading=!1,(F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}function g(x){if(!(this instanceof g))return new g(x);p.call(this,x),this._transformState={afterTransform:_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),this.on("prefinish",m)}function m(){var x=this;typeof this._flush!="function"||this._readableState.destroyed?b(this,null,null):this._flush(function(v,S){b(x,v,S)})}function b(x,v,S){if(v)return x.emit("error",v);if(S!=null&&x.push(S),x._writableState.length)throw new f;if(x._transformState.transforming)throw new h;return x.push(null)}e("inherits")(g,p),g.prototype.push=function(x,v){return this._transformState.needTransform=!1,p.prototype.push.call(this,x,v)},g.prototype._transform=function(x,v,S){S(new l("_transform()"))},g.prototype._write=function(x,v,S){var B=this._transformState;if(B.writecb=S,B.writechunk=x,B.writeencoding=v,!B.transforming){var F=this._readableState;(B.needTransform||F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}},g.prototype._read=function(x){var v=this._transformState;v.writechunk===null||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},g.prototype._destroy=function(x,v){p.prototype._destroy.call(this,x,function(S){v(S)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(e,i,o){(function(a,l){(function(){function t(U){var Y=this;this.next=null,this.entry=null,this.finish=function(){(function(de,J,xe){var Te=de.entry;for(de.entry=null;Te;){var Ue=Te.callback;J.pendingcb--,Ue(xe),Te=Te.next}J.corkedRequestsFree.next=de})(Y,U)}}var h;i.exports=ce,ce.WritableState=fe;var f={deprecate:e("util-deprecate")},p=e("./internal/streams/stream"),_=e("buffer").Buffer,g=(l!==void 0?l:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m,b=e("./internal/streams/destroy"),x=e("./internal/streams/state").getHighWaterMark,v=e("../errors").codes,S=v.ERR_INVALID_ARG_TYPE,B=v.ERR_METHOD_NOT_IMPLEMENTED,F=v.ERR_MULTIPLE_CALLBACK,O=v.ERR_STREAM_CANNOT_PIPE,V=v.ERR_STREAM_DESTROYED,X=v.ERR_STREAM_NULL_VALUES,Q=v.ERR_STREAM_WRITE_AFTER_END,ee=v.ERR_UNKNOWN_ENCODING,ne=b.errorOrDestroy;function Ae(){}function fe(U,Y,de){h=h||e("./_stream_duplex"),U=U||{},typeof de!="boolean"&&(de=Y instanceof h),this.objectMode=!!U.objectMode,de&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=x(this,U,"writableHighWaterMark",de),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var J=U.decodeStrings===!1;this.decodeStrings=!J,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(xe){(function(Te,Ue){var pe=Te._writableState,Oe=pe.sync,re=pe.writecb;if(typeof re!="function")throw new F;if(function(Be){Be.writing=!1,Be.writecb=null,Be.length-=Be.writelen,Be.writelen=0}(pe),Ue)(function(Be,He,Ge,Ne,st){--He.pendingcb,Ge?(a.nextTick(st,Ne),a.nextTick(N,Be,He),Be._writableState.errorEmitted=!0,ne(Be,Ne)):(st(Ne),Be._writableState.errorEmitted=!0,ne(Be,Ne),N(Be,He))})(Te,pe,Oe,Ue,re);else{var ie=k(pe)||Te.destroyed;ie||pe.corked||pe.bufferProcessing||!pe.bufferedRequest||z(Te,pe),Oe?a.nextTick(Z,Te,pe,ie,re):Z(Te,pe,ie,re)}})(Y,xe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function ce(U){var Y=this instanceof(h=h||e("./_stream_duplex"));if(!Y&&!m.call(ce,this))return new ce(U);this._writableState=new fe(U,this,Y),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),p.call(this)}function G(U,Y,de,J,xe,Te,Ue){Y.writelen=J,Y.writecb=Ue,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new V("write")):de?U._writev(xe,Y.onwrite):U._write(xe,Te,Y.onwrite),Y.sync=!1}function Z(U,Y,de,J){de||function(xe,Te){Te.length===0&&Te.needDrain&&(Te.needDrain=!1,xe.emit("drain"))}(U,Y),Y.pendingcb--,J(),N(U,Y)}function z(U,Y){Y.bufferProcessing=!0;var de=Y.bufferedRequest;if(U._writev&&de&&de.next){var J=Y.bufferedRequestCount,xe=new Array(J),Te=Y.corkedRequestsFree;Te.entry=de;for(var Ue=0,pe=!0;de;)xe[Ue]=de,de.isBuf||(pe=!1),de=de.next,Ue+=1;xe.allBuffers=pe,G(U,Y,!0,Y.length,xe,"",Te.finish),Y.pendingcb++,Y.lastBufferedRequest=null,Te.next?(Y.corkedRequestsFree=Te.next,Te.next=null):Y.corkedRequestsFree=new t(Y),Y.bufferedRequestCount=0}else{for(;de;){var Oe=de.chunk,re=de.encoding,ie=de.callback;if(G(U,Y,!1,Y.objectMode?1:Oe.length,Oe,re,ie),de=de.next,Y.bufferedRequestCount--,Y.writing)break}de===null&&(Y.lastBufferedRequest=null)}Y.bufferedRequest=de,Y.bufferProcessing=!1}function k(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function R(U,Y){U._final(function(de){Y.pendingcb--,de&&ne(U,de),Y.prefinished=!0,U.emit("prefinish"),N(U,Y)})}function N(U,Y){var de=k(Y);if(de&&(function(xe,Te){Te.prefinished||Te.finalCalled||(typeof xe._final!="function"||Te.destroyed?(Te.prefinished=!0,xe.emit("prefinish")):(Te.pendingcb++,Te.finalCalled=!0,a.nextTick(R,xe,Te)))}(U,Y),Y.pendingcb===0&&(Y.finished=!0,U.emit("finish"),Y.autoDestroy))){var J=U._readableState;(!J||J.autoDestroy&&J.endEmitted)&&U.destroy()}return de}e("inherits")(ce,p),fe.prototype.getBuffer=function(){for(var U=this.bufferedRequest,Y=[];U;)Y.push(U),U=U.next;return Y},function(){try{Object.defineProperty(fe.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(ce,Symbol.hasInstance,{value:function(U){return!!m.call(this,U)||this===ce&&U&&U._writableState instanceof fe}})):m=function(U){return U instanceof this},ce.prototype.pipe=function(){ne(this,new O)},ce.prototype.write=function(U,Y,de){var J,xe=this._writableState,Te=!1,Ue=!xe.objectMode&&(J=U,_.isBuffer(J)||J instanceof g);return Ue&&!_.isBuffer(U)&&(U=function(pe){return _.from(pe)}(U)),typeof Y=="function"&&(de=Y,Y=null),Ue?Y="buffer":Y||(Y=xe.defaultEncoding),typeof de!="function"&&(de=Ae),xe.ending?function(pe,Oe){var re=new Q;ne(pe,re),a.nextTick(Oe,re)}(this,de):(Ue||function(pe,Oe,re,ie){var Be;return re===null?Be=new X:typeof re=="string"||Oe.objectMode||(Be=new S("chunk",["string","Buffer"],re)),!Be||(ne(pe,Be),a.nextTick(ie,Be),!1)}(this,xe,U,de))&&(xe.pendingcb++,Te=function(pe,Oe,re,ie,Be,He){if(!re){var Ge=function(Je,Ze,bt){return Je.objectMode||Je.decodeStrings===!1||typeof Ze!="string"||(Ze=_.from(Ze,bt)),Ze}(Oe,ie,Be);ie!==Ge&&(re=!0,Be="buffer",ie=Ge)}var Ne=Oe.objectMode?1:ie.length;Oe.length+=Ne;var st=Oe.length<Oe.highWaterMark;if(st||(Oe.needDrain=!0),Oe.writing||Oe.corked){var ot=Oe.lastBufferedRequest;Oe.lastBufferedRequest={chunk:ie,encoding:Be,isBuf:re,callback:He,next:null},ot?ot.next=Oe.lastBufferedRequest:Oe.bufferedRequest=Oe.lastBufferedRequest,Oe.bufferedRequestCount+=1}else G(pe,Oe,!1,Ne,ie,Be,He);return st}(this,xe,Ue,U,Y,de)),Te},ce.prototype.cork=function(){this._writableState.corked++},ce.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,U.writing||U.corked||U.bufferProcessing||!U.bufferedRequest||z(this,U))},ce.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new ee(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ce.prototype._write=function(U,Y,de){de(new B("_write()"))},ce.prototype._writev=null,ce.prototype.end=function(U,Y,de){var J=this._writableState;return typeof U=="function"?(de=U,U=null,Y=null):typeof Y=="function"&&(de=Y,Y=null),U!=null&&this.write(U,Y),J.corked&&(J.corked=1,this.uncork()),J.ending||function(xe,Te,Ue){Te.ending=!0,N(xe,Te),Ue&&(Te.finished?a.nextTick(Ue):xe.once("finish",Ue)),Te.ended=!0,xe.writable=!1}(this,J,de),this},Object.defineProperty(ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),ce.prototype.destroy=b.destroy,ce.prototype._undestroy=b.undestroy,ce.prototype._destroy=function(U,Y){Y(U)}}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(e,i,o){(function(a){(function(){var l;function t(V,X,Q){return(X=function(ee){var ne=function(Ae,fe){if(typeof Ae!="object"||Ae===null)return Ae;var ce=Ae[Symbol.toPrimitive];if(ce!==void 0){var G=ce.call(Ae,fe);if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(fe==="string"?String:Number)(Ae)}(ee,"string");return typeof ne=="symbol"?ne:String(ne)}(X))in V?Object.defineProperty(V,X,{value:Q,enumerable:!0,configurable:!0,writable:!0}):V[X]=Q,V}var h=e("./end-of-stream"),f=Symbol("lastResolve"),p=Symbol("lastReject"),_=Symbol("error"),g=Symbol("ended"),m=Symbol("lastPromise"),b=Symbol("handlePromise"),x=Symbol("stream");function v(V,X){return{value:V,done:X}}function S(V){var X=V[f];if(X!==null){var Q=V[x].read();Q!==null&&(V[m]=null,V[f]=null,V[p]=null,X(v(Q,!1)))}}function B(V){a.nextTick(S,V)}var F=Object.getPrototypeOf(function(){}),O=Object.setPrototypeOf((t(l={get stream(){return this[x]},next:function(){var V=this,X=this[_];if(X!==null)return Promise.reject(X);if(this[g])return Promise.resolve(v(void 0,!0));if(this[x].destroyed)return new Promise(function(Ae,fe){a.nextTick(function(){V[_]?fe(V[_]):Ae(v(void 0,!0))})});var Q,ee=this[m];if(ee)Q=new Promise(function(Ae,fe){return function(ce,G){Ae.then(function(){fe[g]?ce(v(void 0,!0)):fe[b](ce,G)},G)}}(ee,this));else{var ne=this[x].read();if(ne!==null)return Promise.resolve(v(ne,!1));Q=new Promise(this[b])}return this[m]=Q,Q}},Symbol.asyncIterator,function(){return this}),t(l,"return",function(){var V=this;return new Promise(function(X,Q){V[x].destroy(null,function(ee){ee?Q(ee):X(v(void 0,!0))})})}),l),F);i.exports=function(V){var X,Q=Object.create(O,(t(X={},x,{value:V,writable:!0}),t(X,f,{value:null,writable:!0}),t(X,p,{value:null,writable:!0}),t(X,_,{value:null,writable:!0}),t(X,g,{value:V._readableState.endEmitted,writable:!0}),t(X,b,{value:function(ee,ne){var Ae=Q[x].read();Ae?(Q[m]=null,Q[f]=null,Q[p]=null,ee(v(Ae,!1))):(Q[f]=ee,Q[p]=ne)},writable:!0}),X));return Q[m]=null,h(V,function(ee){if(ee&&ee.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ne=Q[p];return ne!==null&&(Q[m]=null,Q[f]=null,Q[p]=null,ne(ee)),void(Q[_]=ee)}var Ae=Q[f];Ae!==null&&(Q[m]=null,Q[f]=null,Q[p]=null,Ae(v(void 0,!0))),Q[g]=!0}),V.on("readable",B.bind(null,Q)),Q}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":486,_process:467}],484:[function(e,i,o){function a(m,b){var x=Object.keys(m);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(m);b&&(v=v.filter(function(S){return Object.getOwnPropertyDescriptor(m,S).enumerable})),x.push.apply(x,v)}return x}function l(m){for(var b=1;b<arguments.length;b++){var x=arguments[b]!=null?arguments[b]:{};b%2?a(Object(x),!0).forEach(function(v){t(m,v,x[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(x)):a(Object(x)).forEach(function(v){Object.defineProperty(m,v,Object.getOwnPropertyDescriptor(x,v))})}return m}function t(m,b,x){return(b=f(b))in m?Object.defineProperty(m,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[b]=x,m}function h(m,b){for(var x=0;x<b.length;x++){var v=b[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,f(v.key),v)}}function f(m){var b=function(x,v){if(typeof x!="object"||x===null)return x;var S=x[Symbol.toPrimitive];if(S!==void 0){var B=S.call(x,v);if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(x)}(m,"string");return typeof b=="symbol"?b:String(b)}var p=e("buffer").Buffer,_=e("util").inspect,g=_&&_.custom||"inspect";i.exports=function(){function m(){(function(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")})(this,m),this.head=null,this.tail=null,this.length=0}var b,x;return b=m,(x=[{key:"push",value:function(v){var S={data:v,next:null};this.length>0?this.tail.next=S:this.head=S,this.tail=S,++this.length}},{key:"unshift",value:function(v){var S={data:v,next:this.head};this.length===0&&(this.tail=S),this.head=S,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var S=this.head,B=""+S.data;S=S.next;)B+=v+S.data;return B}},{key:"concat",value:function(v){if(this.length===0)return p.alloc(0);for(var S,B,F,O=p.allocUnsafe(v>>>0),V=this.head,X=0;V;)S=V.data,B=O,F=X,p.prototype.copy.call(S,B,F),X+=V.data.length,V=V.next;return O}},{key:"consume",value:function(v,S){var B;return v<this.head.data.length?(B=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):B=v===this.head.data.length?this.shift():S?this._getString(v):this._getBuffer(v),B}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var S=this.head,B=1,F=S.data;for(v-=F.length;S=S.next;){var O=S.data,V=v>O.length?O.length:v;if(V===O.length?F+=O:F+=O.slice(0,v),(v-=V)==0){V===O.length?(++B,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=O.slice(V));break}++B}return this.length-=B,F}},{key:"_getBuffer",value:function(v){var S=p.allocUnsafe(v),B=this.head,F=1;for(B.data.copy(S),v-=B.data.length;B=B.next;){var O=B.data,V=v>O.length?O.length:v;if(O.copy(S,S.length-v,0,V),(v-=V)==0){V===O.length?(++F,B.next?this.head=B.next:this.head=this.tail=null):(this.head=B,B.data=O.slice(V));break}++F}return this.length-=F,S}},{key:g,value:function(v,S){return _(this,l(l({},S),{},{depth:0,customInspect:!1}))}}])&&h(b.prototype,x),Object.defineProperty(b,"prototype",{writable:!1}),m}()},{buffer:220,util:188}],485:[function(e,i,o){(function(a){(function(){function l(f,p){h(f,p),t(f)}function t(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function h(f,p){f.emit("error",p)}i.exports={destroy:function(f,p){var _=this,g=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return g||m?(p?p(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,a.nextTick(h,this,f)):a.nextTick(h,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(b){!p&&b?_._writableState?_._writableState.errorEmitted?a.nextTick(t,_):(_._writableState.errorEmitted=!0,a.nextTick(l,_,b)):a.nextTick(l,_,b):p?(a.nextTick(t,_),p(b)):a.nextTick(t,_)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,p){var _=f._readableState,g=f._writableState;_&&_.autoDestroy||g&&g.autoDestroy?f.destroy(p):f.emit("error",p)}}}).call(this)}).call(this,e("_process"))},{_process:467}],486:[function(e,i,o){var a=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function l(){}i.exports=function t(h,f,p){if(typeof f=="function")return t(h,null,f);f||(f={}),p=function(V){var X=!1;return function(){if(!X){X=!0;for(var Q=arguments.length,ee=new Array(Q),ne=0;ne<Q;ne++)ee[ne]=arguments[ne];V.apply(this,ee)}}}(p||l);var _=f.readable||f.readable!==!1&&h.readable,g=f.writable||f.writable!==!1&&h.writable,m=function(){h.writable||x()},b=h._writableState&&h._writableState.finished,x=function(){g=!1,b=!0,_||p.call(h)},v=h._readableState&&h._readableState.endEmitted,S=function(){_=!1,v=!0,g||p.call(h)},B=function(V){p.call(h,V)},F=function(){var V;return _&&!v?(h._readableState&&h._readableState.ended||(V=new a),p.call(h,V)):g&&!b?(h._writableState&&h._writableState.ended||(V=new a),p.call(h,V)):void 0},O=function(){h.req.on("finish",x)};return function(V){return V.setHeader&&typeof V.abort=="function"}(h)?(h.on("complete",x),h.on("abort",F),h.req?O():h.on("request",O)):g&&!h._writableState&&(h.on("end",m),h.on("close",m)),h.on("end",S),h.on("finish",x),f.error!==!1&&h.on("error",B),h.on("close",F),function(){h.removeListener("complete",x),h.removeListener("abort",F),h.removeListener("request",O),h.req&&h.req.removeListener("finish",x),h.removeListener("end",m),h.removeListener("close",m),h.removeListener("finish",x),h.removeListener("end",S),h.removeListener("error",B),h.removeListener("close",F)}}},{"../../../errors":477}],487:[function(e,i,o){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(e,i,o){var a,l=e("../../../errors").codes,t=l.ERR_MISSING_ARGS,h=l.ERR_STREAM_DESTROYED;function f(b){if(b)throw b}function p(b,x,v,S){S=function(O){var V=!1;return function(){V||(V=!0,O.apply(void 0,arguments))}}(S);var B=!1;b.on("close",function(){B=!0}),a===void 0&&(a=e("./end-of-stream")),a(b,{readable:x,writable:v},function(O){if(O)return S(O);B=!0,S()});var F=!1;return function(O){if(!B&&!F)return F=!0,function(V){return V.setHeader&&typeof V.abort=="function"}(b)?b.abort():typeof b.destroy=="function"?b.destroy():void S(O||new h("pipe"))}}function _(b){b()}function g(b,x){return b.pipe(x)}function m(b){return b.length?typeof b[b.length-1]!="function"?f:b.pop():f}i.exports=function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var S,B=m(x);if(Array.isArray(x[0])&&(x=x[0]),x.length<2)throw new t("streams");var F=x.map(function(O,V){var X=V<x.length-1;return p(O,X,V>0,function(Q){S||(S=Q),Q&&F.forEach(_),X||(F.forEach(_),B(S))})});return x.reduce(g)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(e,i,o){var a=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function(l,t,h,f){var p=function(_,g,m){return _.highWaterMark!=null?_.highWaterMark:g?_[m]:null}(t,f,h);if(p!=null){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new a(f?h:"highWaterMark",p);return Math.floor(p)}return l.objectMode?16:16384}}},{"../../../errors":477}],490:[function(e,i,o){i.exports=e("events").EventEmitter},{events:422}],491:[function(e,i,o){(o=i.exports=e("./lib/_stream_readable.js")).Stream=o,o.Readable=o,o.Writable=e("./lib/_stream_writable.js"),o.Duplex=e("./lib/_stream_duplex.js"),o.Transform=e("./lib/_stream_transform.js"),o.PassThrough=e("./lib/_stream_passthrough.js"),o.finished=e("./lib/internal/streams/end-of-stream.js"),o.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(e,i,o){var a=function(l){var t=Object.prototype,h=t.hasOwnProperty,f=Object.defineProperty||function(N,U,Y){N[U]=Y.value},p=typeof Symbol=="function"?Symbol:{},_=p.iterator||"@@iterator",g=p.asyncIterator||"@@asyncIterator",m=p.toStringTag||"@@toStringTag";function b(N,U,Y){return Object.defineProperty(N,U,{value:Y,enumerable:!0,configurable:!0,writable:!0}),N[U]}try{b({},"")}catch{b=function(U,Y,de){return U[Y]=de}}function x(N,U,Y,de){var J=U&&U.prototype instanceof B?U:B,xe=Object.create(J.prototype),Te=new z(de||[]);return f(xe,"_invoke",{value:fe(N,Y,Te)}),xe}function v(N,U,Y){try{return{type:"normal",arg:N.call(U,Y)}}catch(de){return{type:"throw",arg:de}}}l.wrap=x;var S={};function B(){}function F(){}function O(){}var V={};b(V,_,function(){return this});var X=Object.getPrototypeOf,Q=X&&X(X(k([])));Q&&Q!==t&&h.call(Q,_)&&(V=Q);var ee=O.prototype=B.prototype=Object.create(V);function ne(N){["next","throw","return"].forEach(function(U){b(N,U,function(Y){return this._invoke(U,Y)})})}function Ae(N,U){var Y;f(this,"_invoke",{value:function(de,J){function xe(){return new U(function(Te,Ue){(function pe(Oe,re,ie,Be){var He=v(N[Oe],N,re);if(He.type!=="throw"){var Ge=He.arg,Ne=Ge.value;return Ne&&typeof Ne=="object"&&h.call(Ne,"__await")?U.resolve(Ne.__await).then(function(st){pe("next",st,ie,Be)},function(st){pe("throw",st,ie,Be)}):U.resolve(Ne).then(function(st){Ge.value=st,ie(Ge)},function(st){return pe("throw",st,ie,Be)})}Be(He.arg)})(de,J,Te,Ue)})}return Y=Y?Y.then(xe,xe):xe()}})}function fe(N,U,Y){var de="suspendedStart";return function(J,xe){if(de==="executing")throw new Error("Generator is already running");if(de==="completed"){if(J==="throw")throw xe;return R()}for(Y.method=J,Y.arg=xe;;){var Te=Y.delegate;if(Te){var Ue=ce(Te,Y);if(Ue){if(Ue===S)continue;return Ue}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(de==="suspendedStart")throw de="completed",Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);de="executing";var pe=v(N,U,Y);if(pe.type==="normal"){if(de=Y.done?"completed":"suspendedYield",pe.arg===S)continue;return{value:pe.arg,done:Y.done}}pe.type==="throw"&&(de="completed",Y.method="throw",Y.arg=pe.arg)}}}function ce(N,U){var Y=U.method,de=N.iterator[Y];if(de===void 0)return U.delegate=null,Y==="throw"&&N.iterator.return&&(U.method="return",U.arg=void 0,ce(N,U),U.method==="throw")||Y!=="return"&&(U.method="throw",U.arg=new TypeError("The iterator does not provide a '"+Y+"' method")),S;var J=v(de,N.iterator,U.arg);if(J.type==="throw")return U.method="throw",U.arg=J.arg,U.delegate=null,S;var xe=J.arg;return xe?xe.done?(U[N.resultName]=xe.value,U.next=N.nextLoc,U.method!=="return"&&(U.method="next",U.arg=void 0),U.delegate=null,S):xe:(U.method="throw",U.arg=new TypeError("iterator result is not an object"),U.delegate=null,S)}function G(N){var U={tryLoc:N[0]};1 in N&&(U.catchLoc=N[1]),2 in N&&(U.finallyLoc=N[2],U.afterLoc=N[3]),this.tryEntries.push(U)}function Z(N){var U=N.completion||{};U.type="normal",delete U.arg,N.completion=U}function z(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(G,this),this.reset(!0)}function k(N){if(N){var U=N[_];if(U)return U.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var Y=-1,de=function J(){for(;++Y<N.length;)if(h.call(N,Y))return J.value=N[Y],J.done=!1,J;return J.value=void 0,J.done=!0,J};return de.next=de}}return{next:R}}function R(){return{value:void 0,done:!0}}return F.prototype=O,f(ee,"constructor",{value:O,configurable:!0}),f(O,"constructor",{value:F,configurable:!0}),F.displayName=b(O,m,"GeneratorFunction"),l.isGeneratorFunction=function(N){var U=typeof N=="function"&&N.constructor;return!!U&&(U===F||(U.displayName||U.name)==="GeneratorFunction")},l.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,O):(N.__proto__=O,b(N,m,"GeneratorFunction")),N.prototype=Object.create(ee),N},l.awrap=function(N){return{__await:N}},ne(Ae.prototype),b(Ae.prototype,g,function(){return this}),l.AsyncIterator=Ae,l.async=function(N,U,Y,de,J){J===void 0&&(J=Promise);var xe=new Ae(x(N,U,Y,de),J);return l.isGeneratorFunction(U)?xe:xe.next().then(function(Te){return Te.done?Te.value:xe.next()})},ne(ee),b(ee,m,"Generator"),b(ee,_,function(){return this}),b(ee,"toString",function(){return"[object Generator]"}),l.keys=function(N){var U=Object(N),Y=[];for(var de in U)Y.push(de);return Y.reverse(),function J(){for(;Y.length;){var xe=Y.pop();if(xe in U)return J.value=xe,J.done=!1,J}return J.done=!0,J}},l.values=k,z.prototype={constructor:z,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Z),!N)for(var U in this)U.charAt(0)==="t"&&h.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=void 0)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var U=this;function Y(pe,Oe){return xe.type="throw",xe.arg=N,U.next=pe,Oe&&(U.method="next",U.arg=void 0),!!Oe}for(var de=this.tryEntries.length-1;de>=0;--de){var J=this.tryEntries[de],xe=J.completion;if(J.tryLoc==="root")return Y("end");if(J.tryLoc<=this.prev){var Te=h.call(J,"catchLoc"),Ue=h.call(J,"finallyLoc");if(Te&&Ue){if(this.prev<J.catchLoc)return Y(J.catchLoc,!0);if(this.prev<J.finallyLoc)return Y(J.finallyLoc)}else if(Te){if(this.prev<J.catchLoc)return Y(J.catchLoc,!0)}else{if(!Ue)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return Y(J.finallyLoc)}}}},abrupt:function(N,U){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var de=this.tryEntries[Y];if(de.tryLoc<=this.prev&&h.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var J=de;break}}J&&(N==="break"||N==="continue")&&J.tryLoc<=U&&U<=J.finallyLoc&&(J=null);var xe=J?J.completion:{};return xe.type=N,xe.arg=U,J?(this.method="next",this.next=J.finallyLoc,S):this.complete(xe)},complete:function(N,U){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&U&&(this.next=U),S},finish:function(N){for(var U=this.tryEntries.length-1;U>=0;--U){var Y=this.tryEntries[U];if(Y.finallyLoc===N)return this.complete(Y.completion,Y.afterLoc),Z(Y),S}},catch:function(N){for(var U=this.tryEntries.length-1;U>=0;--U){var Y=this.tryEntries[U];if(Y.tryLoc===N){var de=Y.completion;if(de.type==="throw"){var J=de.arg;Z(Y)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(N,U,Y){return this.delegate={iterator:k(N),resultName:U,nextLoc:Y},this.method==="next"&&(this.arg=void 0),S}},l}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},{}],493:[function(e,i,o){var a=e("buffer").Buffer,l=e("inherits"),t=e("hash-base"),h=new Array(16),f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],m=[0,1518500249,1859775393,2400959708,2840853838],b=[1352829926,1548603684,1836072691,2053994217,0];function x(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function v(X,Q){return X<<Q|X>>>32-Q}function S(X,Q,ee,ne,Ae,fe,ce,G){return v(X+(Q^ee^ne)+fe+ce|0,G)+Ae|0}function B(X,Q,ee,ne,Ae,fe,ce,G){return v(X+(Q&ee|~Q&ne)+fe+ce|0,G)+Ae|0}function F(X,Q,ee,ne,Ae,fe,ce,G){return v(X+((Q|~ee)^ne)+fe+ce|0,G)+Ae|0}function O(X,Q,ee,ne,Ae,fe,ce,G){return v(X+(Q&ne|ee&~ne)+fe+ce|0,G)+Ae|0}function V(X,Q,ee,ne,Ae,fe,ce,G){return v(X+(Q^(ee|~ne))+fe+ce|0,G)+Ae|0}l(x,t),x.prototype._update=function(){for(var X=h,Q=0;Q<16;++Q)X[Q]=this._block.readInt32LE(4*Q);for(var ee=0|this._a,ne=0|this._b,Ae=0|this._c,fe=0|this._d,ce=0|this._e,G=0|this._a,Z=0|this._b,z=0|this._c,k=0|this._d,R=0|this._e,N=0;N<80;N+=1){var U,Y;N<16?(U=S(ee,ne,Ae,fe,ce,X[f[N]],m[0],_[N]),Y=V(G,Z,z,k,R,X[p[N]],b[0],g[N])):N<32?(U=B(ee,ne,Ae,fe,ce,X[f[N]],m[1],_[N]),Y=O(G,Z,z,k,R,X[p[N]],b[1],g[N])):N<48?(U=F(ee,ne,Ae,fe,ce,X[f[N]],m[2],_[N]),Y=F(G,Z,z,k,R,X[p[N]],b[2],g[N])):N<64?(U=O(ee,ne,Ae,fe,ce,X[f[N]],m[3],_[N]),Y=B(G,Z,z,k,R,X[p[N]],b[3],g[N])):(U=V(ee,ne,Ae,fe,ce,X[f[N]],m[4],_[N]),Y=S(G,Z,z,k,R,X[p[N]],b[4],g[N])),ee=ce,ce=fe,fe=v(Ae,10),Ae=ne,ne=U,G=R,R=k,k=v(z,10),z=Z,Z=Y}var de=this._b+Ae+k|0;this._b=this._c+fe+R|0,this._c=this._d+ce+G|0,this._d=this._e+ee+Z|0,this._e=this._a+ne+z|0,this._a=de},x.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var X=a.alloc?a.alloc(20):new a(20);return X.writeInt32LE(this._a,0),X.writeInt32LE(this._b,4),X.writeInt32LE(this._c,8),X.writeInt32LE(this._d,12),X.writeInt32LE(this._e,16),X},i.exports=x},{buffer:220,"hash-base":425,inherits:440}],494:[function(e,i,o){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var a=e("buffer"),l=a.Buffer;function t(f,p){for(var _ in f)p[_]=f[_]}function h(f,p,_){return l(f,p,_)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?i.exports=a:(t(a,o),o.Buffer=h),h.prototype=Object.create(l.prototype),t(l,h),h.from=function(f,p,_){if(typeof f=="number")throw new TypeError("Argument must not be a number");return l(f,p,_)},h.alloc=function(f,p,_){if(typeof f!="number")throw new TypeError("Argument must be a number");var g=l(f);return p!==void 0?typeof _=="string"?g.fill(p,_):g.fill(p):g.fill(0),g},h.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return l(f)},h.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(f)}},{buffer:220}],495:[function(e,i,o){(function(a){(function(){var l,t=e("buffer"),h=t.Buffer,f={};for(l in t)t.hasOwnProperty(l)&&l!=="SlowBuffer"&&l!=="Buffer"&&(f[l]=t[l]);var p=f.Buffer={};for(l in h)h.hasOwnProperty(l)&&l!=="allocUnsafe"&&l!=="allocUnsafeSlow"&&(p[l]=h[l]);if(f.Buffer.prototype=h.prototype,p.from&&p.from!==Uint8Array.from||(p.from=function(_,g,m){if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof _);if(_&&_.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);return h(_,g,m)}),p.alloc||(p.alloc=function(_,g,m){if(typeof _!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof _);if(_<0||_>=2*(1<<30))throw new RangeError('The value "'+_+'" is invalid for option "size"');var b=h(_);return g&&g.length!==0?typeof m=="string"?b.fill(g,m):b.fill(g):b.fill(0),b}),!f.kStringMaxLength)try{f.kStringMaxLength=a.binding("buffer").kStringMaxLength}catch{}f.constants||(f.constants={MAX_LENGTH:f.kMaxLength},f.kStringMaxLength&&(f.constants.MAX_STRING_LENGTH=f.kStringMaxLength)),i.exports=f}).call(this)}).call(this,e("_process"))},{_process:467,buffer:220}],496:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0});const a=e("xmlchars/xml/1.0/ed5"),l=e("xmlchars/xml/1.1/ed2"),t=e("xmlchars/xmlns/1.0/ed3");var h=a.isS,f=a.isChar,p=a.isNameStartChar,_=a.isNameChar,g=a.S_LIST,m=a.NAME_RE,b=l.isChar,x=t.isNCNameStartChar,v=t.isNCNameChar,S=t.NC_NAME_RE;const B="http://www.w3.org/XML/1998/namespace",F="http://www.w3.org/2000/xmlns/",O={__proto__:null,xml:B,xmlns:F},V={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},X=k=>k===34||k===39,Q=[34,39],ee=[...Q,91,62],ne=[...Q,60,93],Ae=[61,63,...g],fe=[...g,62,38,60];function ce(k,R,N){switch(R){case"xml":N!==B&&k.fail(`xml prefix must be bound to ${B}.`);break;case"xmlns":N!==F&&k.fail(`xmlns prefix must be bound to ${F}.`)}switch(N){case F:k.fail(R===""?`the default namespace may not be set to ${N}.`:`may not assign a prefix (even "xmlns") to the URI ${F}.`);break;case B:switch(R){case"xml":break;case"":k.fail(`the default namespace may not be set to ${N}.`);break;default:k.fail("may not assign the xml namespace to another prefix.")}}}const G=k=>S.test(k),Z=k=>m.test(k);o.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const z={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};o.SaxesParser=class{constructor(k){this.opt=k??{},this.fragmentOpt=!!this.opt.fragment;const R=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,R){this.nameStartCheck=x,this.nameCheck=v,this.isName=G,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},O);const N=this.opt.additionalNamespaces;N!=null&&(function(U,Y){for(const de of Object.keys(Y))ce(U,de,Y[de])}(this,N),Object.assign(this.ns,N))}else this.nameStartCheck=p,this.nameCheck=_,this.isName=Z,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var k;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:R}=this;this.state=R?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=R,this.xmlDeclPossible=!R,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:N}=this.opt;if(N===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");N="1.0"}this.setXMLVersion(N),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(V),(k=this.readyHandler)===null||k===void 0||k.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(k,R){this[z[k]]=R}off(k){this[z[k]]=void 0}makeError(k){var R;let N=(R=this.fileName)!==null&&R!==void 0?R:"";return this.trackPosition&&(N.length>0&&(N+=":"),N+=`${this.line}:${this.column}`),N.length>0&&(N+=": "),new Error(N+k)}fail(k){const R=this.makeError(k),N=this.errorHandler;if(N===void 0)throw R;return N(R),this}write(k){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let R=!1;k===null?(R=!0,k=""):typeof k=="object"&&(k=k.toString()),this.carriedFromPrevious!==void 0&&(k=`${this.carriedFromPrevious}${k}`,this.carriedFromPrevious=void 0);let N=k.length;const U=k.charCodeAt(N-1);!R&&(U===13||U>=55296&&U<=56319)&&(this.carriedFromPrevious=k[N-1],N--,k=k.slice(0,N));const{stateTable:Y}=this;for(this.chunk=k,this.i=0;this.i<N;)Y[this.state].call(this);return this.chunkPosition+=N,R?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:k,i:R}=this;if(this.prevI=R,this.i=R+1,R>=k.length)return-1;const N=k.charCodeAt(R);if(this.column++,N<55296){if(N>=32||N===9)return N;switch(N){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return k.charCodeAt(R+1)===10&&(this.i=R+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),N}}if(N>56319)return N>=57344&&N<=65533||this.fail("disallowed character."),N;const U=65536+1024*(N-55296)+(k.charCodeAt(R+1)-56320);return this.i=R+2,U>1114111&&this.fail("disallowed character."),U}getCode11(){const{chunk:k,i:R}=this;if(this.prevI=R,this.i=R+1,R>=k.length)return-1;const N=k.charCodeAt(R);if(this.column++,N<55296){if(N>31&&N<127||N>159&&N!==8232||N===9)return N;switch(N){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const Y=k.charCodeAt(R+1);Y!==10&&Y!==133||(this.i=R+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),N}}if(N>56319)return N>=57344&&N<=65533||this.fail("disallowed character."),N;const U=65536+1024*(N-55296)+(k.charCodeAt(R+1)-56320);return this.i=R+2,U>1114111&&this.fail("disallowed character."),U}getCodeNorm(){const k=this.getCode();return k===-2?10:k}unget(){this.i=this.prevI,this.column--}captureTo(k){let{i:R}=this;const{chunk:N}=this;for(;;){const U=this.getCode(),Y=U===-2,de=Y?10:U;if(de===-1||k.includes(de))return this.text+=N.slice(R,this.prevI),de;Y&&(this.text+=N.slice(R,this.prevI)+`
`,R=this.i)}}captureToChar(k){let{i:R}=this;const{chunk:N}=this;for(;;){let U=this.getCode();switch(U){case-2:this.text+=N.slice(R,this.prevI)+`
`,R=this.i,U=10;break;case-1:return this.text+=N.slice(R),!1}if(U===k)return this.text+=N.slice(R,this.prevI),!0}}captureNameChars(){const{chunk:k,i:R}=this;for(;;){const N=this.getCode();if(N===-1)return this.name+=k.slice(R),-1;if(!_(N))return this.name+=k.slice(R,this.prevI),N===-2?10:N}}skipSpaces(){for(;;){const k=this.getCodeNorm();if(k===-1||!h(k))return k}}setXMLVersion(k){this.currentXMLVersion=k,k==="1.0"?(this.isChar=f,this.getCode=this.getCode10):(this.isChar=b,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const k=this.i,R=this.skipSpaces();switch(this.prevI!==k&&(this.xmlDeclPossible=!1),R){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var k;const R=this.captureTo(ee);switch(R){case 62:(k=this.doctypeHandler)===null||k===void 0||k.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(R),R===91?this.state=4:X(R)&&(this.state=3,this.q=R)}}sDoctypeQuote(){const k=this.q;this.captureToChar(k)&&(this.text+=String.fromCodePoint(k),this.q=null,this.state=2)}sDTD(){const k=this.captureTo(ne);k!==-1&&(this.text+=String.fromCodePoint(k),k===93?this.state=2:k===60?this.state=6:X(k)&&(this.state=5,this.q=k))}sDTDQuoted(){const k=this.q;this.captureToChar(k)&&(this.text+=String.fromCodePoint(k),this.state=4,this.q=null)}sDTDOpenWaka(){const k=this.getCodeNorm();switch(this.text+=String.fromCodePoint(k),k){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const k=String.fromCodePoint(this.getCodeNorm()),R=this.openWakaBang+=k;this.text+=k,R!=="-"&&(this.state=R==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),this.state=k===45?10:8}sDTDCommentEnded(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),k===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),k===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:k}=this;const{chunk:R}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=R.slice(k,this.prevI)+`
`,k=this.i;break;case 59:{const{entityReturnState:N}=this,U=this.entity+R.slice(k,this.prevI);let Y;this.state=N,U===""?(this.fail("empty entity name."),Y="&;"):(Y=this.parseEntity(U),this.entity=""),N===13&&this.textHandler===void 0||(this.text+=Y);break e}case-1:this.entity+=R.slice(k);break e}}sOpenWaka(){const k=this.getCode();if(p(k))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(k){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var k;const R=this.getCodeNorm();R===45?(this.state=19,(k=this.commentHandler)===null||k===void 0||k.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(R),this.state=17)}sCommentEnded(){const k=this.getCodeNorm();k!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(k),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const k=this.getCodeNorm();k===93?this.state=22:(this.text+="]"+String.fromCodePoint(k),this.state=20)}sCDataEnding2(){var k;const R=this.getCodeNorm();switch(R){case 62:(k=this.cdataHandler)===null||k===void 0||k.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(R),this.state=20}}sPIFirstChar(){const k=this.getCodeNorm();this.nameStartCheck(k)?(this.piTarget+=String.fromCodePoint(k),this.state=24):k===63||h(k)?(this.fail("processing instruction without a target."),this.state=k===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k),this.state=24)}sPIRest(){const{chunk:k,i:R}=this;for(;;){const N=this.getCodeNorm();if(N===-1)return void(this.piTarget+=k.slice(R));if(!this.nameCheck(N)){this.piTarget+=k.slice(R,this.prevI);const U=N===63;U||h(N)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=U?33:27):this.state=U?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(N));break}}}sPIBody(){if(this.text.length===0){const k=this.getCodeNorm();k===63?this.state=26:h(k)||(this.text=String.fromCodePoint(k))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var k;const R=this.getCodeNorm();if(R===62){const{piTarget:N}=this;N.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(k=this.piHandler)===null||k===void 0||k.call(this,{target:N,body:this.text}),this.piTarget=this.text="",this.state=13}else R===63?this.text+="?":(this.text+="?"+String.fromCodePoint(R),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const k=this.skipSpaces();k!==63?k!==-1&&(this.state=28,this.name=String.fromCodePoint(k)):this.state=33}sXMLDeclName(){const k=this.captureTo(Ae);if(k===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(h(k)||k===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=k===61?30:29}}sXMLDeclEq(){const k=this.getCodeNorm();if(k===63)return this.state=33,void this.fail("XML declaration is incomplete.");h(k)||(k!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const k=this.getCodeNorm();if(k===63)return this.state=33,void this.fail("XML declaration is incomplete.");h(k)||(X(k)?this.q=k:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const k=this.captureTo([this.q,63]);if(k===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(k===-1)return;const R=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const N=R;this.xmlDecl.version=N,/^1\.[0-9]+$/.test(N)?this.opt.forceXMLVersion||this.setXMLVersion(N):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(R)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=R;break;case"standalone":R!=="yes"&&R!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=R}this.name="",this.state=32}sXMLDeclSeparator(){const k=this.getCodeNorm();k!==63?(h(k)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var k;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(k=this.xmldeclHandler)===null||k===void 0||k.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var k;const R=this.captureNameChars();if(R===-1)return;const N=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=N.ns=Object.create(null)),(k=this.openTagStartHandler)===null||k===void 0||k.call(this,N),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),R){case 62:this.openTag();break;case 47:this.state=35;break;default:h(R)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const k=this.skipSpaces();k!==-1&&(p(k)?(this.unget(),this.state=37):k===62?this.openTag():k===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const k=this.captureNameChars();k===61?this.state=39:h(k)?this.state=38:k===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):k!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const k=this.skipSpaces();switch(k){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",k===62?this.openTag():p(k)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const k=this.getCodeNorm();X(k)?(this.q=k,this.state=40):h(k)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:k,chunk:R}=this;let{i:N}=this;for(;;)switch(this.getCode()){case k:return this.pushAttrib(this.name,this.text+R.slice(N,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=R.slice(N,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=R.slice(N,this.prevI)+" ",N=this.i;break;case 60:return this.text+=R.slice(N,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=R.slice(N))}}sAttribValueClosed(){const k=this.getCodeNorm();h(k)?this.state=36:k===62?this.openTag():k===47?this.state=35:p(k)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const k=this.captureTo(fe);switch(k){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",k===62?this.openTag():this.state=36}}sCloseTag(){const k=this.captureNameChars();k===62?this.closeTag():h(k)?this.state=44:k!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:k,forbiddenState:R}=this;const{chunk:N,textHandler:U}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,U!==void 0){const{text:Y}=this,de=N.slice(k,this.prevI);Y.length!==0?(U(Y+de),this.text=""):de.length!==0&&U(de)}R=0;break e;case 38:this.state=14,this.entityReturnState=13,U!==void 0&&(this.text+=N.slice(k,this.prevI)),R=0;break e;case 93:switch(R){case 0:R=1;break;case 1:R=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:R===2&&this.fail('the string "]]>" is disallowed in char data.'),R=0;break;case-2:U!==void 0&&(this.text+=N.slice(k,this.prevI)+`
`),k=this.i,R=0;break;case-1:U!==void 0&&(this.text+=N.slice(k));break e;default:R=0}this.forbiddenState=R}handleTextOutsideRoot(){let{i:k}=this;const{chunk:R,textHandler:N}=this;let U=!1;e:for(;;){const Y=this.getCode();switch(Y){case 60:if(this.state=15,N!==void 0){const{text:de}=this,J=R.slice(k,this.prevI);de.length!==0?(N(de+J),this.text=""):J.length!==0&&N(J)}break e;case 38:this.state=14,this.entityReturnState=13,N!==void 0&&(this.text+=R.slice(k,this.prevI)),U=!0;break e;case-2:N!==void 0&&(this.text+=R.slice(k,this.prevI)+`
`),k=this.i;break;case-1:N!==void 0&&(this.text+=R.slice(k));break e;default:h(Y)||(U=!0)}}U&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(k,R){var N;const{prefix:U,local:Y}=this.qname(k),de={name:k,prefix:U,local:Y,value:R};if(this.attribList.push(de),(N=this.attributeHandler)===null||N===void 0||N.call(this,de),U==="xmlns"){const J=R.trim();this.currentXMLVersion==="1.0"&&J===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Y]=J,ce(this,Y,J)}else if(k==="xmlns"){const J=R.trim();this.topNS[""]=J,ce(this,"",J)}}pushAttribPlain(k,R){var N;const U={name:k,value:R};this.attribList.push(U),(N=this.attributeHandler)===null||N===void 0||N.call(this,U)}end(){var k,R;this.sawRoot||this.fail("document must contain a root element.");const{tags:N}=this;for(;N.length>0;){const Y=N.pop();this.fail("unclosed tag: "+Y.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:U}=this;return U.length!==0&&((k=this.textHandler)===null||k===void 0||k.call(this,U),this.text=""),this._closed=!0,(R=this.endHandler)===null||R===void 0||R.call(this),this._init(),this}resolve(k){var R,N;let U=this.topNS[k];if(U!==void 0)return U;const{tags:Y}=this;for(let de=Y.length-1;de>=0;de--)if(U=Y[de].ns[k],U!==void 0)return U;return U=this.ns[k],U!==void 0?U:(N=(R=this.opt).resolvePrefix)===null||N===void 0?void 0:N.call(R,k)}qname(k){const R=k.indexOf(":");if(R===-1)return{prefix:"",local:k};const N=k.slice(R+1),U=k.slice(0,R);return(U===""||N===""||N.includes(":"))&&this.fail(`malformed name: ${k}.`),{prefix:U,local:N}}processAttribsNS(){var k;const{attribList:R}=this,N=this.tag;{const{prefix:de,local:J}=this.qname(N.name);N.prefix=de,N.local=J;const xe=N.uri=(k=this.resolve(de))!==null&&k!==void 0?k:"";de!==""&&(de==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),xe===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(de)}.`),N.uri=de))}if(R.length===0)return;const{attributes:U}=N,Y=new Set;for(const de of R){const{name:J,prefix:xe,local:Te}=de;let Ue,pe;xe===""?(Ue=J==="xmlns"?F:"",pe=J):(Ue=this.resolve(xe),Ue===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(xe)}.`),Ue=xe),pe=`{${Ue}}${Te}`),Y.has(pe)&&this.fail(`duplicate attribute: ${pe}.`),Y.add(pe),de.uri=Ue,U[J]=de}this.attribList=[]}processAttribsPlain(){const{attribList:k}=this,R=this.tag.attributes;for(const{name:N,value:U}of k)R[N]!==void 0&&this.fail(`duplicate attribute: ${N}.`),R[N]=U;this.attribList=[]}openTag(){var k;this.processAttribs();const{tags:R}=this,N=this.tag;N.isSelfClosing=!1,(k=this.openTagHandler)===null||k===void 0||k.call(this,N),R.push(N),this.state=13,this.name=""}openSelfClosingTag(){var k,R,N;this.processAttribs();const{tags:U}=this,Y=this.tag;Y.isSelfClosing=!0,(k=this.openTagHandler)===null||k===void 0||k.call(this,Y),(R=this.closeTagHandler)===null||R===void 0||R.call(this,Y),(this.tag=(N=U[U.length-1])!==null&&N!==void 0?N:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:k,name:R}=this;if(this.state=13,this.name="",R==="")return this.fail("weird empty close tag."),void(this.text+="</>");const N=this.closeTagHandler;let U=k.length;for(;U-- >0;){const Y=this.tag=k.pop();if(this.topNS=Y.ns,N==null||N(Y),Y.name===R)break;this.fail("unexpected close tag.")}U===0?this.closedRoot=!0:U<0&&(this.fail(`unmatched closing tag: ${R}.`),this.text+=`</${R}>`)}parseEntity(k){if(k[0]!=="#"){const N=this.ENTITIES[k];return N!==void 0?N:(this.fail(this.isName(k)?"undefined entity.":"disallowed character in entity name."),`&${k};`)}let R=NaN;return k[1]==="x"&&/^#x[0-9a-f]+$/i.test(k)?R=parseInt(k.slice(2),16):/^#[0-9]+$/.test(k)&&(R=parseInt(k.slice(1),10)),this.isChar(R)?String.fromCodePoint(R):(this.fail("malformed character entity."),`&${k};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(e,i,o){var a=e("safe-buffer").Buffer;function l(t,h){this._block=a.alloc(t),this._finalSize=h,this._blockSize=t,this._len=0}l.prototype.update=function(t,h){typeof t=="string"&&(h=h||"utf8",t=a.from(t,h));for(var f=this._block,p=this._blockSize,_=t.length,g=this._len,m=0;m<_;){for(var b=g%p,x=Math.min(_-m,p-b),v=0;v<x;v++)f[b+v]=t[m+v];m+=x,(g+=x)%p==0&&this._update(f)}return this._len+=_,this},l.prototype.digest=function(t){var h=this._len%this._blockSize;this._block[h]=128,this._block.fill(0,h+1),h>=this._finalSize&&(this._update(this._block),this._block.fill(0));var f=8*this._len;if(f<=4294967295)this._block.writeUInt32BE(f,this._blockSize-4);else{var p=(4294967295&f)>>>0,_=(f-p)/4294967296;this._block.writeUInt32BE(_,this._blockSize-8),this._block.writeUInt32BE(p,this._blockSize-4)}this._update(this._block);var g=this._hash();return t?g.toString(t):g},l.prototype._update=function(){throw new Error("_update must be implemented by subclass")},i.exports=l},{"safe-buffer":494}],498:[function(e,i,o){var a=i.exports=function(l){l=l.toLowerCase();var t=a[l];if(!t)throw new Error(l+" is not supported (we accept pull requests)");return new t};a.sha=e("./sha"),a.sha1=e("./sha1"),a.sha224=e("./sha224"),a.sha256=e("./sha256"),a.sha384=e("./sha384"),a.sha512=e("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(e,i,o){var a=e("inherits"),l=e("./hash"),t=e("safe-buffer").Buffer,h=[1518500249,1859775393,-1894007588,-899497514],f=new Array(80);function p(){this.init(),this._w=f,l.call(this,64,56)}function _(m){return m<<30|m>>>2}function g(m,b,x,v){return m===0?b&x|~b&v:m===2?b&x|b&v|x&v:b^x^v}a(p,l),p.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},p.prototype._update=function(m){for(var b,x=this._w,v=0|this._a,S=0|this._b,B=0|this._c,F=0|this._d,O=0|this._e,V=0;V<16;++V)x[V]=m.readInt32BE(4*V);for(;V<80;++V)x[V]=x[V-3]^x[V-8]^x[V-14]^x[V-16];for(var X=0;X<80;++X){var Q=~~(X/20),ee=0|((b=v)<<5|b>>>27)+g(Q,S,B,F)+O+x[X]+h[Q];O=F,F=B,B=_(S),S=v,v=ee}this._a=v+this._a|0,this._b=S+this._b|0,this._c=B+this._c|0,this._d=F+this._d|0,this._e=O+this._e|0},p.prototype._hash=function(){var m=t.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},i.exports=p},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(e,i,o){var a=e("inherits"),l=e("./hash"),t=e("safe-buffer").Buffer,h=[1518500249,1859775393,-1894007588,-899497514],f=new Array(80);function p(){this.init(),this._w=f,l.call(this,64,56)}function _(b){return b<<5|b>>>27}function g(b){return b<<30|b>>>2}function m(b,x,v,S){return b===0?x&v|~x&S:b===2?x&v|x&S|v&S:x^v^S}a(p,l),p.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},p.prototype._update=function(b){for(var x,v=this._w,S=0|this._a,B=0|this._b,F=0|this._c,O=0|this._d,V=0|this._e,X=0;X<16;++X)v[X]=b.readInt32BE(4*X);for(;X<80;++X)v[X]=(x=v[X-3]^v[X-8]^v[X-14]^v[X-16])<<1|x>>>31;for(var Q=0;Q<80;++Q){var ee=~~(Q/20),ne=_(S)+m(ee,B,F,O)+V+v[Q]+h[ee]|0;V=O,O=F,F=g(B),B=S,S=ne}this._a=S+this._a|0,this._b=B+this._b|0,this._c=F+this._c|0,this._d=O+this._d|0,this._e=V+this._e|0},p.prototype._hash=function(){var b=t.allocUnsafe(20);return b.writeInt32BE(0|this._a,0),b.writeInt32BE(0|this._b,4),b.writeInt32BE(0|this._c,8),b.writeInt32BE(0|this._d,12),b.writeInt32BE(0|this._e,16),b},i.exports=p},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(e,i,o){var a=e("inherits"),l=e("./sha256"),t=e("./hash"),h=e("safe-buffer").Buffer,f=new Array(64);function p(){this.init(),this._w=f,t.call(this,64,56)}a(p,l),p.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},p.prototype._hash=function(){var _=h.allocUnsafe(28);return _.writeInt32BE(this._a,0),_.writeInt32BE(this._b,4),_.writeInt32BE(this._c,8),_.writeInt32BE(this._d,12),_.writeInt32BE(this._e,16),_.writeInt32BE(this._f,20),_.writeInt32BE(this._g,24),_},i.exports=p},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(e,i,o){var a=e("inherits"),l=e("./hash"),t=e("safe-buffer").Buffer,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=new Array(64);function p(){this.init(),this._w=f,l.call(this,64,56)}function _(v,S,B){return B^v&(S^B)}function g(v,S,B){return v&S|B&(v|S)}function m(v){return(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10)}function b(v){return(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7)}function x(v){return(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3}a(p,l),p.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},p.prototype._update=function(v){for(var S,B=this._w,F=0|this._a,O=0|this._b,V=0|this._c,X=0|this._d,Q=0|this._e,ee=0|this._f,ne=0|this._g,Ae=0|this._h,fe=0;fe<16;++fe)B[fe]=v.readInt32BE(4*fe);for(;fe<64;++fe)B[fe]=0|(((S=B[fe-2])>>>17|S<<15)^(S>>>19|S<<13)^S>>>10)+B[fe-7]+x(B[fe-15])+B[fe-16];for(var ce=0;ce<64;++ce){var G=Ae+b(Q)+_(Q,ee,ne)+h[ce]+B[ce]|0,Z=m(F)+g(F,O,V)|0;Ae=ne,ne=ee,ee=Q,Q=X+G|0,X=V,V=O,O=F,F=G+Z|0}this._a=F+this._a|0,this._b=O+this._b|0,this._c=V+this._c|0,this._d=X+this._d|0,this._e=Q+this._e|0,this._f=ee+this._f|0,this._g=ne+this._g|0,this._h=Ae+this._h|0},p.prototype._hash=function(){var v=t.allocUnsafe(32);return v.writeInt32BE(this._a,0),v.writeInt32BE(this._b,4),v.writeInt32BE(this._c,8),v.writeInt32BE(this._d,12),v.writeInt32BE(this._e,16),v.writeInt32BE(this._f,20),v.writeInt32BE(this._g,24),v.writeInt32BE(this._h,28),v},i.exports=p},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(e,i,o){var a=e("inherits"),l=e("./sha512"),t=e("./hash"),h=e("safe-buffer").Buffer,f=new Array(160);function p(){this.init(),this._w=f,t.call(this,128,112)}a(p,l),p.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},p.prototype._hash=function(){var _=h.allocUnsafe(48);function g(m,b,x){_.writeInt32BE(m,x),_.writeInt32BE(b,x+4)}return g(this._ah,this._al,0),g(this._bh,this._bl,8),g(this._ch,this._cl,16),g(this._dh,this._dl,24),g(this._eh,this._el,32),g(this._fh,this._fl,40),_},i.exports=p},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(e,i,o){var a=e("inherits"),l=e("./hash"),t=e("safe-buffer").Buffer,h=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],f=new Array(160);function p(){this.init(),this._w=f,l.call(this,128,112)}function _(O,V,X){return X^O&(V^X)}function g(O,V,X){return O&V|X&(O|V)}function m(O,V){return(O>>>28|V<<4)^(V>>>2|O<<30)^(V>>>7|O<<25)}function b(O,V){return(O>>>14|V<<18)^(O>>>18|V<<14)^(V>>>9|O<<23)}function x(O,V){return(O>>>1|V<<31)^(O>>>8|V<<24)^O>>>7}function v(O,V){return(O>>>1|V<<31)^(O>>>8|V<<24)^(O>>>7|V<<25)}function S(O,V){return(O>>>19|V<<13)^(V>>>29|O<<3)^O>>>6}function B(O,V){return(O>>>19|V<<13)^(V>>>29|O<<3)^(O>>>6|V<<26)}function F(O,V){return O>>>0<V>>>0?1:0}a(p,l),p.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},p.prototype._update=function(O){for(var V=this._w,X=0|this._ah,Q=0|this._bh,ee=0|this._ch,ne=0|this._dh,Ae=0|this._eh,fe=0|this._fh,ce=0|this._gh,G=0|this._hh,Z=0|this._al,z=0|this._bl,k=0|this._cl,R=0|this._dl,N=0|this._el,U=0|this._fl,Y=0|this._gl,de=0|this._hl,J=0;J<32;J+=2)V[J]=O.readInt32BE(4*J),V[J+1]=O.readInt32BE(4*J+4);for(;J<160;J+=2){var xe=V[J-30],Te=V[J-30+1],Ue=x(xe,Te),pe=v(Te,xe),Oe=S(xe=V[J-4],Te=V[J-4+1]),re=B(Te,xe),ie=V[J-14],Be=V[J-14+1],He=V[J-32],Ge=V[J-32+1],Ne=pe+Be|0,st=Ue+ie+F(Ne,pe)|0;st=(st=st+Oe+F(Ne=Ne+re|0,re)|0)+He+F(Ne=Ne+Ge|0,Ge)|0,V[J]=st,V[J+1]=Ne}for(var ot=0;ot<160;ot+=2){st=V[ot],Ne=V[ot+1];var Je=g(X,Q,ee),Ze=g(Z,z,k),bt=m(X,Z),yt=m(Z,X),Nt=b(Ae,N),kt=b(N,Ae),Gt=h[ot],fr=h[ot+1],Tr=_(Ae,fe,ce),yr=_(N,U,Y),Dr=de+kt|0,jt=G+Nt+F(Dr,de)|0;jt=(jt=(jt=jt+Tr+F(Dr=Dr+yr|0,yr)|0)+Gt+F(Dr=Dr+fr|0,fr)|0)+st+F(Dr=Dr+Ne|0,Ne)|0;var Jt=yt+Ze|0,pr=bt+Je+F(Jt,yt)|0;G=ce,de=Y,ce=fe,Y=U,fe=Ae,U=N,Ae=ne+jt+F(N=R+Dr|0,R)|0,ne=ee,R=k,ee=Q,k=z,Q=X,z=Z,X=jt+pr+F(Z=Dr+Jt|0,Dr)|0}this._al=this._al+Z|0,this._bl=this._bl+z|0,this._cl=this._cl+k|0,this._dl=this._dl+R|0,this._el=this._el+N|0,this._fl=this._fl+U|0,this._gl=this._gl+Y|0,this._hl=this._hl+de|0,this._ah=this._ah+X+F(this._al,Z)|0,this._bh=this._bh+Q+F(this._bl,z)|0,this._ch=this._ch+ee+F(this._cl,k)|0,this._dh=this._dh+ne+F(this._dl,R)|0,this._eh=this._eh+Ae+F(this._el,N)|0,this._fh=this._fh+fe+F(this._fl,U)|0,this._gh=this._gh+ce+F(this._gl,Y)|0,this._hh=this._hh+G+F(this._hl,de)|0},p.prototype._hash=function(){var O=t.allocUnsafe(64);function V(X,Q,ee){O.writeInt32BE(X,ee),O.writeInt32BE(Q,ee+4)}return V(this._ah,this._al,0),V(this._bh,this._bl,8),V(this._ch,this._cl,16),V(this._dh,this._dl,24),V(this._eh,this._el,32),V(this._fh,this._fl,40),V(this._gh,this._gl,48),V(this._hh,this._hl,56),O},i.exports=p},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(e,i,o){i.exports=l;var a=e("events").EventEmitter;function l(){a.call(this)}e("inherits")(l,a),l.Readable=e("readable-stream/readable.js"),l.Writable=e("readable-stream/writable.js"),l.Duplex=e("readable-stream/duplex.js"),l.Transform=e("readable-stream/transform.js"),l.PassThrough=e("readable-stream/passthrough.js"),l.Stream=l,l.prototype.pipe=function(t,h){var f=this;function p(S){t.writable&&t.write(S)===!1&&f.pause&&f.pause()}function _(){f.readable&&f.resume&&f.resume()}f.on("data",p),t.on("drain",_),t._isStdio||h&&h.end===!1||(f.on("end",m),f.on("close",b));var g=!1;function m(){g||(g=!0,t.end())}function b(){g||(g=!0,typeof t.destroy=="function"&&t.destroy())}function x(S){if(v(),a.listenerCount(this,"error")===0)throw S}function v(){f.removeListener("data",p),t.removeListener("drain",_),f.removeListener("end",m),f.removeListener("close",b),f.removeListener("error",x),t.removeListener("error",x),f.removeListener("end",v),f.removeListener("close",v),t.removeListener("close",v)}return f.on("error",x),t.on("error",x),f.on("end",v),f.on("close",v),t.on("close",v),t.emit("pipe",f),t}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(e,i,o){var a={}.toString;i.exports=Array.isArray||function(l){return a.call(l)=="[object Array]"}},{}],507:[function(e,i,o){i.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(e,i,o){var a=e("process-nextick-args"),l=Object.keys||function(v){var S=[];for(var B in v)S.push(B);return S};i.exports=m;var t=Object.create(e("core-util-is"));t.inherits=e("inherits");var h=e("./_stream_readable"),f=e("./_stream_writable");t.inherits(m,h);for(var p=l(f.prototype),_=0;_<p.length;_++){var g=p[_];m.prototype[g]||(m.prototype[g]=f.prototype[g])}function m(v){if(!(this instanceof m))return new m(v);h.call(this,v),f.call(this,v),v&&v.readable===!1&&(this.readable=!1),v&&v.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,v&&v.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||a.nextTick(x,this)}function x(v){v.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}}),m.prototype._destroy=function(v,S){this.push(null),this.end(),a.nextTick(S,v)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(e,i,o){i.exports=t;var a=e("./_stream_transform"),l=Object.create(e("core-util-is"));function t(h){if(!(this instanceof t))return new t(h);a.call(this,h)}l.inherits=e("inherits"),l.inherits(t,a),t.prototype._transform=function(h,f,p){p(null,h)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(e,i,o){(function(a,l){(function(){var t=e("process-nextick-args");i.exports=X;var h,f=e("isarray");X.ReadableState=V,e("events").EventEmitter;var p=function(de,J){return de.listeners(J).length},_=e("./internal/streams/stream"),g=e("safe-buffer").Buffer,m=(l!==void 0?l:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b=Object.create(e("core-util-is"));b.inherits=e("inherits");var x=e("util"),v=void 0;v=x&&x.debuglog?x.debuglog("stream"):function(){};var S,B=e("./internal/streams/BufferList"),F=e("./internal/streams/destroy");b.inherits(X,_);var O=["error","close","destroy","pause","resume"];function V(de,J){de=de||{};var xe=J instanceof(h=h||e("./_stream_duplex"));this.objectMode=!!de.objectMode,xe&&(this.objectMode=this.objectMode||!!de.readableObjectMode);var Te=de.highWaterMark,Ue=de.readableHighWaterMark,pe=this.objectMode?16:16384;this.highWaterMark=Te||Te===0?Te:xe&&(Ue||Ue===0)?Ue:pe,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=de.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,de.encoding&&(S||(S=e("string_decoder/").StringDecoder),this.decoder=new S(de.encoding),this.encoding=de.encoding)}function X(de){if(h=h||e("./_stream_duplex"),!(this instanceof X))return new X(de);this._readableState=new V(de,this),this.readable=!0,de&&(typeof de.read=="function"&&(this._read=de.read),typeof de.destroy=="function"&&(this._destroy=de.destroy)),_.call(this)}function Q(de,J,xe,Te,Ue){var pe,Oe=de._readableState;return J===null?(Oe.reading=!1,function(re,ie){if(!ie.ended){if(ie.decoder){var Be=ie.decoder.end();Be&&Be.length&&(ie.buffer.push(Be),ie.length+=ie.objectMode?1:Be.length)}ie.ended=!0,Ae(re)}}(de,Oe)):(Ue||(pe=function(re,ie){var Be;He=ie,g.isBuffer(He)||He instanceof m||typeof ie=="string"||ie===void 0||re.objectMode||(Be=new TypeError("Invalid non-string/buffer chunk"));var He;return Be}(Oe,J)),pe?de.emit("error",pe):Oe.objectMode||J&&J.length>0?(typeof J=="string"||Oe.objectMode||Object.getPrototypeOf(J)===g.prototype||(J=function(re){return g.from(re)}(J)),Te?Oe.endEmitted?de.emit("error",new Error("stream.unshift() after end event")):ee(de,Oe,J,!0):Oe.ended?de.emit("error",new Error("stream.push() after EOF")):(Oe.reading=!1,Oe.decoder&&!xe?(J=Oe.decoder.write(J),Oe.objectMode||J.length!==0?ee(de,Oe,J,!1):ce(de,Oe)):ee(de,Oe,J,!1))):Te||(Oe.reading=!1)),function(re){return!re.ended&&(re.needReadable||re.length<re.highWaterMark||re.length===0)}(Oe)}function ee(de,J,xe,Te){J.flowing&&J.length===0&&!J.sync?(de.emit("data",xe),de.read(0)):(J.length+=J.objectMode?1:xe.length,Te?J.buffer.unshift(xe):J.buffer.push(xe),J.needReadable&&Ae(de)),ce(de,J)}Object.defineProperty(X.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(de){this._readableState&&(this._readableState.destroyed=de)}}),X.prototype.destroy=F.destroy,X.prototype._undestroy=F.undestroy,X.prototype._destroy=function(de,J){this.push(null),J(de)},X.prototype.push=function(de,J){var xe,Te=this._readableState;return Te.objectMode?xe=!0:typeof de=="string"&&((J=J||Te.defaultEncoding)!==Te.encoding&&(de=g.from(de,J),J=""),xe=!0),Q(this,de,J,!1,xe)},X.prototype.unshift=function(de){return Q(this,de,null,!0,!1)},X.prototype.isPaused=function(){return this._readableState.flowing===!1},X.prototype.setEncoding=function(de){return S||(S=e("string_decoder/").StringDecoder),this._readableState.decoder=new S(de),this._readableState.encoding=de,this};function ne(de,J){return de<=0||J.length===0&&J.ended?0:J.objectMode?1:de!=de?J.flowing&&J.length?J.buffer.head.data.length:J.length:(de>J.highWaterMark&&(J.highWaterMark=function(xe){return xe>=8388608?xe=8388608:(xe--,xe|=xe>>>1,xe|=xe>>>2,xe|=xe>>>4,xe|=xe>>>8,xe|=xe>>>16,xe++),xe}(de)),de<=J.length?de:J.ended?J.length:(J.needReadable=!0,0))}function Ae(de){var J=de._readableState;J.needReadable=!1,J.emittedReadable||(v("emitReadable",J.flowing),J.emittedReadable=!0,J.sync?t.nextTick(fe,de):fe(de))}function fe(de){v("emit readable"),de.emit("readable"),k(de)}function ce(de,J){J.readingMore||(J.readingMore=!0,t.nextTick(G,de,J))}function G(de,J){for(var xe=J.length;!J.reading&&!J.flowing&&!J.ended&&J.length<J.highWaterMark&&(v("maybeReadMore read 0"),de.read(0),xe!==J.length);)xe=J.length;J.readingMore=!1}function Z(de){v("readable nexttick read 0"),de.read(0)}function z(de,J){J.reading||(v("resume read 0"),de.read(0)),J.resumeScheduled=!1,J.awaitDrain=0,de.emit("resume"),k(de),J.flowing&&!J.reading&&de.read(0)}function k(de){var J=de._readableState;for(v("flow",J.flowing);J.flowing&&de.read()!==null;);}function R(de,J){return J.length===0?null:(J.objectMode?xe=J.buffer.shift():!de||de>=J.length?(xe=J.decoder?J.buffer.join(""):J.buffer.length===1?J.buffer.head.data:J.buffer.concat(J.length),J.buffer.clear()):xe=function(Te,Ue,pe){var Oe;return Te<Ue.head.data.length?(Oe=Ue.head.data.slice(0,Te),Ue.head.data=Ue.head.data.slice(Te)):Oe=Te===Ue.head.data.length?Ue.shift():pe?function(re,ie){var Be=ie.head,He=1,Ge=Be.data;for(re-=Ge.length;Be=Be.next;){var Ne=Be.data,st=re>Ne.length?Ne.length:re;if(st===Ne.length?Ge+=Ne:Ge+=Ne.slice(0,re),(re-=st)===0){st===Ne.length?(++He,Be.next?ie.head=Be.next:ie.head=ie.tail=null):(ie.head=Be,Be.data=Ne.slice(st));break}++He}return ie.length-=He,Ge}(Te,Ue):function(re,ie){var Be=g.allocUnsafe(re),He=ie.head,Ge=1;for(He.data.copy(Be),re-=He.data.length;He=He.next;){var Ne=He.data,st=re>Ne.length?Ne.length:re;if(Ne.copy(Be,Be.length-re,0,st),(re-=st)===0){st===Ne.length?(++Ge,He.next?ie.head=He.next:ie.head=ie.tail=null):(ie.head=He,He.data=Ne.slice(st));break}++Ge}return ie.length-=Ge,Be}(Te,Ue),Oe}(de,J.buffer,J.decoder),xe);var xe}function N(de){var J=de._readableState;if(J.length>0)throw new Error('"endReadable()" called on non-empty stream');J.endEmitted||(J.ended=!0,t.nextTick(U,J,de))}function U(de,J){de.endEmitted||de.length!==0||(de.endEmitted=!0,J.readable=!1,J.emit("end"))}function Y(de,J){for(var xe=0,Te=de.length;xe<Te;xe++)if(de[xe]===J)return xe;return-1}X.prototype.read=function(de){v("read",de),de=parseInt(de,10);var J=this._readableState,xe=de;if(de!==0&&(J.emittedReadable=!1),de===0&&J.needReadable&&(J.length>=J.highWaterMark||J.ended))return v("read: emitReadable",J.length,J.ended),J.length===0&&J.ended?N(this):Ae(this),null;if((de=ne(de,J))===0&&J.ended)return J.length===0&&N(this),null;var Te,Ue=J.needReadable;return v("need readable",Ue),(J.length===0||J.length-de<J.highWaterMark)&&v("length less than watermark",Ue=!0),J.ended||J.reading?v("reading or ended",Ue=!1):Ue&&(v("do read"),J.reading=!0,J.sync=!0,J.length===0&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1,J.reading||(de=ne(xe,J))),(Te=de>0?R(de,J):null)===null?(J.needReadable=!0,de=0):J.length-=de,J.length===0&&(J.ended||(J.needReadable=!0),xe!==de&&J.ended&&N(this)),Te!==null&&this.emit("data",Te),Te},X.prototype._read=function(de){this.emit("error",new Error("_read() is not implemented"))},X.prototype.pipe=function(de,J){var xe=this,Te=this._readableState;switch(Te.pipesCount){case 0:Te.pipes=de;break;case 1:Te.pipes=[Te.pipes,de];break;default:Te.pipes.push(de)}Te.pipesCount+=1,v("pipe count=%d opts=%j",Te.pipesCount,J);var Ue=(!J||J.end!==!1)&&de!==a.stdout&&de!==a.stderr?Oe:ot;function pe(Je,Ze){v("onunpipe"),Je===xe&&Ze&&Ze.hasUnpiped===!1&&(Ze.hasUnpiped=!0,v("cleanup"),de.removeListener("close",Ne),de.removeListener("finish",st),de.removeListener("drain",re),de.removeListener("error",Ge),de.removeListener("unpipe",pe),xe.removeListener("end",Oe),xe.removeListener("end",ot),xe.removeListener("data",He),ie=!0,!Te.awaitDrain||de._writableState&&!de._writableState.needDrain||re())}function Oe(){v("onend"),de.end()}Te.endEmitted?t.nextTick(Ue):xe.once("end",Ue),de.on("unpipe",pe);var re=function(Je){return function(){var Ze=Je._readableState;v("pipeOnDrain",Ze.awaitDrain),Ze.awaitDrain&&Ze.awaitDrain--,Ze.awaitDrain===0&&p(Je,"data")&&(Ze.flowing=!0,k(Je))}}(xe);de.on("drain",re);var ie=!1,Be=!1;function He(Je){v("ondata"),Be=!1,de.write(Je)!==!1||Be||((Te.pipesCount===1&&Te.pipes===de||Te.pipesCount>1&&Y(Te.pipes,de)!==-1)&&!ie&&(v("false write response, pause",Te.awaitDrain),Te.awaitDrain++,Be=!0),xe.pause())}function Ge(Je){v("onerror",Je),ot(),de.removeListener("error",Ge),p(de,"error")===0&&de.emit("error",Je)}function Ne(){de.removeListener("finish",st),ot()}function st(){v("onfinish"),de.removeListener("close",Ne),ot()}function ot(){v("unpipe"),xe.unpipe(de)}return xe.on("data",He),function(Je,Ze,bt){if(typeof Je.prependListener=="function")return Je.prependListener(Ze,bt);Je._events&&Je._events[Ze]?f(Je._events[Ze])?Je._events[Ze].unshift(bt):Je._events[Ze]=[bt,Je._events[Ze]]:Je.on(Ze,bt)}(de,"error",Ge),de.once("close",Ne),de.once("finish",st),de.emit("pipe",xe),Te.flowing||(v("pipe resume"),xe.resume()),de},X.prototype.unpipe=function(de){var J=this._readableState,xe={hasUnpiped:!1};if(J.pipesCount===0)return this;if(J.pipesCount===1)return de&&de!==J.pipes||(de||(de=J.pipes),J.pipes=null,J.pipesCount=0,J.flowing=!1,de&&de.emit("unpipe",this,xe)),this;if(!de){var Te=J.pipes,Ue=J.pipesCount;J.pipes=null,J.pipesCount=0,J.flowing=!1;for(var pe=0;pe<Ue;pe++)Te[pe].emit("unpipe",this,{hasUnpiped:!1});return this}var Oe=Y(J.pipes,de);return Oe===-1||(J.pipes.splice(Oe,1),J.pipesCount-=1,J.pipesCount===1&&(J.pipes=J.pipes[0]),de.emit("unpipe",this,xe)),this},X.prototype.on=function(de,J){var xe=_.prototype.on.call(this,de,J);if(de==="data")this._readableState.flowing!==!1&&this.resume();else if(de==="readable"){var Te=this._readableState;Te.endEmitted||Te.readableListening||(Te.readableListening=Te.needReadable=!0,Te.emittedReadable=!1,Te.reading?Te.length&&Ae(this):t.nextTick(Z,this))}return xe},X.prototype.addListener=X.prototype.on,X.prototype.resume=function(){var de=this._readableState;return de.flowing||(v("resume"),de.flowing=!0,function(J,xe){xe.resumeScheduled||(xe.resumeScheduled=!0,t.nextTick(z,J,xe))}(this,de)),this},X.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this},X.prototype.wrap=function(de){var J=this,xe=this._readableState,Te=!1;for(var Ue in de.on("end",function(){if(v("wrapped end"),xe.decoder&&!xe.ended){var Oe=xe.decoder.end();Oe&&Oe.length&&J.push(Oe)}J.push(null)}),de.on("data",function(Oe){v("wrapped data"),xe.decoder&&(Oe=xe.decoder.write(Oe)),xe.objectMode&&Oe==null||(xe.objectMode||Oe&&Oe.length)&&(J.push(Oe)||(Te=!0,de.pause()))}),de)this[Ue]===void 0&&typeof de[Ue]=="function"&&(this[Ue]=function(Oe){return function(){return de[Oe].apply(de,arguments)}}(Ue));for(var pe=0;pe<O.length;pe++)de.on(O[pe],this.emit.bind(this,O[pe]));return this._read=function(Oe){v("wrapped _read",Oe),Te&&(Te=!1,de.resume())},this},Object.defineProperty(X.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),X._fromList=R}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(e,i,o){i.exports=h;var a=e("./_stream_duplex"),l=Object.create(e("core-util-is"));function t(_,g){var m=this._transformState;m.transforming=!1;var b=m.writecb;if(!b)return this.emit("error",new Error("write callback called multiple times"));m.writechunk=null,m.writecb=null,g!=null&&this.push(g),b(_);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function h(_){if(!(this instanceof h))return new h(_);a.call(this,_),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&(typeof _.transform=="function"&&(this._transform=_.transform),typeof _.flush=="function"&&(this._flush=_.flush)),this.on("prefinish",f)}function f(){var _=this;typeof this._flush=="function"?this._flush(function(g,m){p(_,g,m)}):p(this,null,null)}function p(_,g,m){if(g)return _.emit("error",g);if(m!=null&&_.push(m),_._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(_._transformState.transforming)throw new Error("Calling transform done when still transforming");return _.push(null)}l.inherits=e("inherits"),l.inherits(h,a),h.prototype.push=function(_,g){return this._transformState.needTransform=!1,a.prototype.push.call(this,_,g)},h.prototype._transform=function(_,g,m){throw new Error("_transform() is not implemented")},h.prototype._write=function(_,g,m){var b=this._transformState;if(b.writecb=m,b.writechunk=_,b.writeencoding=g,!b.transforming){var x=this._readableState;(b.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},h.prototype._read=function(_){var g=this._transformState;g.writechunk!==null&&g.writecb&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},h.prototype._destroy=function(_,g){var m=this;a.prototype._destroy.call(this,_,function(b){g(b),m.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(e,i,o){(function(a,l,t){(function(){var h=e("process-nextick-args");function f(ce){var G=this;this.next=null,this.entry=null,this.finish=function(){(function(Z,z,k){var R=Z.entry;for(Z.entry=null;R;){var N=R.callback;z.pendingcb--,N(k),R=R.next}z.corkedRequestsFree.next=Z})(G,ce)}}i.exports=V;var p,_=!a.browser&&["v0.10","v0.9."].indexOf(a.version.slice(0,5))>-1?t:h.nextTick;V.WritableState=O;var g=Object.create(e("core-util-is"));g.inherits=e("inherits");var m={deprecate:e("util-deprecate")},b=e("./internal/streams/stream"),x=e("safe-buffer").Buffer,v=(l!==void 0?l:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},S,B=e("./internal/streams/destroy");function F(){}function O(ce,G){p=p||e("./_stream_duplex"),ce=ce||{};var Z=G instanceof p;this.objectMode=!!ce.objectMode,Z&&(this.objectMode=this.objectMode||!!ce.writableObjectMode);var z=ce.highWaterMark,k=ce.writableHighWaterMark,R=this.objectMode?16:16384;this.highWaterMark=z||z===0?z:Z&&(k||k===0)?k:R,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var N=ce.decodeStrings===!1;this.decodeStrings=!N,this.defaultEncoding=ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(U){(function(Y,de){var J=Y._writableState,xe=J.sync,Te=J.writecb;if(function(pe){pe.writing=!1,pe.writecb=null,pe.length-=pe.writelen,pe.writelen=0}(J),de)(function(pe,Oe,re,ie,Be){--Oe.pendingcb,re?(h.nextTick(Be,ie),h.nextTick(fe,pe,Oe),pe._writableState.errorEmitted=!0,pe.emit("error",ie)):(Be(ie),pe._writableState.errorEmitted=!0,pe.emit("error",ie),fe(pe,Oe))})(Y,J,xe,de,Te);else{var Ue=ne(J);Ue||J.corked||J.bufferProcessing||!J.bufferedRequest||ee(Y,J),xe?_(Q,Y,J,Ue,Te):Q(Y,J,Ue,Te)}})(G,U)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}function V(ce){if(p=p||e("./_stream_duplex"),!(S.call(V,this)||this instanceof p))return new V(ce);this._writableState=new O(ce,this),this.writable=!0,ce&&(typeof ce.write=="function"&&(this._write=ce.write),typeof ce.writev=="function"&&(this._writev=ce.writev),typeof ce.destroy=="function"&&(this._destroy=ce.destroy),typeof ce.final=="function"&&(this._final=ce.final)),b.call(this)}function X(ce,G,Z,z,k,R,N){G.writelen=z,G.writecb=N,G.writing=!0,G.sync=!0,Z?ce._writev(k,G.onwrite):ce._write(k,R,G.onwrite),G.sync=!1}function Q(ce,G,Z,z){Z||function(k,R){R.length===0&&R.needDrain&&(R.needDrain=!1,k.emit("drain"))}(ce,G),G.pendingcb--,z(),fe(ce,G)}function ee(ce,G){G.bufferProcessing=!0;var Z=G.bufferedRequest;if(ce._writev&&Z&&Z.next){var z=G.bufferedRequestCount,k=new Array(z),R=G.corkedRequestsFree;R.entry=Z;for(var N=0,U=!0;Z;)k[N]=Z,Z.isBuf||(U=!1),Z=Z.next,N+=1;k.allBuffers=U,X(ce,G,!0,G.length,k,"",R.finish),G.pendingcb++,G.lastBufferedRequest=null,R.next?(G.corkedRequestsFree=R.next,R.next=null):G.corkedRequestsFree=new f(G),G.bufferedRequestCount=0}else{for(;Z;){var Y=Z.chunk,de=Z.encoding,J=Z.callback;if(X(ce,G,!1,G.objectMode?1:Y.length,Y,de,J),Z=Z.next,G.bufferedRequestCount--,G.writing)break}Z===null&&(G.lastBufferedRequest=null)}G.bufferedRequest=Z,G.bufferProcessing=!1}function ne(ce){return ce.ending&&ce.length===0&&ce.bufferedRequest===null&&!ce.finished&&!ce.writing}function Ae(ce,G){ce._final(function(Z){G.pendingcb--,Z&&ce.emit("error",Z),G.prefinished=!0,ce.emit("prefinish"),fe(ce,G)})}function fe(ce,G){var Z=ne(G);return Z&&(function(z,k){k.prefinished||k.finalCalled||(typeof z._final=="function"?(k.pendingcb++,k.finalCalled=!0,h.nextTick(Ae,z,k)):(k.prefinished=!0,z.emit("prefinish")))}(ce,G),G.pendingcb===0&&(G.finished=!0,ce.emit("finish"))),Z}g.inherits(V,b),O.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,G=[];ce;)G.push(ce),ce=ce.next;return G},function(){try{Object.defineProperty(O.prototype,"buffer",{get:m.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(ce){return!!S.call(this,ce)||this===V&&ce&&ce._writableState instanceof O}})):S=function(ce){return ce instanceof this},V.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},V.prototype.write=function(ce,G,Z){var z,k=this._writableState,R=!1,N=!k.objectMode&&(z=ce,x.isBuffer(z)||z instanceof v);return N&&!x.isBuffer(ce)&&(ce=function(U){return x.from(U)}(ce)),typeof G=="function"&&(Z=G,G=null),N?G="buffer":G||(G=k.defaultEncoding),typeof Z!="function"&&(Z=F),k.ended?function(U,Y){var de=new Error("write after end");U.emit("error",de),h.nextTick(Y,de)}(this,Z):(N||function(U,Y,de,J){var xe=!0,Te=!1;return de===null?Te=new TypeError("May not write null values to stream"):typeof de=="string"||de===void 0||Y.objectMode||(Te=new TypeError("Invalid non-string/buffer chunk")),Te&&(U.emit("error",Te),h.nextTick(J,Te),xe=!1),xe}(this,k,ce,Z))&&(k.pendingcb++,R=function(U,Y,de,J,xe,Te){if(!de){var Ue=function(ie,Be,He){return ie.objectMode||ie.decodeStrings===!1||typeof Be!="string"||(Be=x.from(Be,He)),Be}(Y,J,xe);J!==Ue&&(de=!0,xe="buffer",J=Ue)}var pe=Y.objectMode?1:J.length;Y.length+=pe;var Oe=Y.length<Y.highWaterMark;if(Oe||(Y.needDrain=!0),Y.writing||Y.corked){var re=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:J,encoding:xe,isBuf:de,callback:Te,next:null},re?re.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else X(U,Y,!1,pe,J,xe,Te);return Oe}(this,k,N,ce,G,Z)),R},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var ce=this._writableState;ce.corked&&(ce.corked--,ce.writing||ce.corked||ce.bufferProcessing||!ce.bufferedRequest||ee(this,ce))},V.prototype.setDefaultEncoding=function(ce){if(typeof ce=="string"&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),V.prototype._write=function(ce,G,Z){Z(new Error("_write() is not implemented"))},V.prototype._writev=null,V.prototype.end=function(ce,G,Z){var z=this._writableState;typeof ce=="function"?(Z=ce,ce=null,G=null):typeof G=="function"&&(Z=G,G=null),ce!=null&&this.write(ce,G),z.corked&&(z.corked=1,this.uncork()),z.ending||function(k,R,N){R.ending=!0,fe(k,R),N&&(R.finished?h.nextTick(N):k.once("finish",N)),R.ended=!0,k.writable=!1}(this,z,Z)},Object.defineProperty(V.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(ce){this._writableState&&(this._writableState.destroyed=ce)}}),V.prototype.destroy=B.destroy,V.prototype._undestroy=B.undestroy,V.prototype._destroy=function(ce,G){this.end(),G(ce)}}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(e,i,o){var a=e("safe-buffer").Buffer,l=e("util");i.exports=function(){function t(){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(h){var f={data:h,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length},t.prototype.unshift=function(h){var f={data:h,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length},t.prototype.shift=function(){if(this.length!==0){var h=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,h}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(h){if(this.length===0)return"";for(var f=this.head,p=""+f.data;f=f.next;)p+=h+f.data;return p},t.prototype.concat=function(h){if(this.length===0)return a.alloc(0);for(var f,p,_,g=a.allocUnsafe(h>>>0),m=this.head,b=0;m;)f=m.data,p=g,_=b,f.copy(p,_),b+=m.data.length,m=m.next;return g},t}(),l&&l.inspect&&l.inspect.custom&&(i.exports.prototype[l.inspect.custom]=function(){var t=l.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":520,util:188}],514:[function(e,i,o){var a=e("process-nextick-args");function l(t,h){t.emit("error",h)}i.exports={destroy:function(t,h){var f=this,p=this._readableState&&this._readableState.destroyed,_=this._writableState&&this._writableState.destroyed;return p||_?(h?h(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,a.nextTick(l,this,t)):a.nextTick(l,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(g){!h&&g?f._writableState?f._writableState.errorEmitted||(f._writableState.errorEmitted=!0,a.nextTick(l,f,g)):a.nextTick(l,f,g):h&&h(g)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(e,i,o){arguments[4][490][0].apply(o,arguments)},{dup:490,events:422}],516:[function(e,i,o){i.exports=e("./readable").PassThrough},{"./readable":517}],517:[function(e,i,o){(o=i.exports=e("./lib/_stream_readable.js")).Stream=o,o.Readable=o,o.Writable=e("./lib/_stream_writable.js"),o.Duplex=e("./lib/_stream_duplex.js"),o.Transform=e("./lib/_stream_transform.js"),o.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(e,i,o){i.exports=e("./readable").Transform},{"./readable":517}],519:[function(e,i,o){i.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(e,i,o){arguments[4][217][0].apply(o,arguments)},{buffer:220,dup:217}],521:[function(e,i,o){arguments[4][218][0].apply(o,arguments)},{dup:218,"safe-buffer":520}],522:[function(e,i,o){arguments[4][218][0].apply(o,arguments)},{dup:218,"safe-buffer":494}],523:[function(e,i,o){(function(a,l){(function(){var t=e("process/browser.js").nextTick,h=Function.prototype.apply,f=Array.prototype.slice,p={},_=0;function g(m,b){this._id=m,this._clearFn=b}o.setTimeout=function(){return new g(h.call(setTimeout,window,arguments),clearTimeout)},o.setInterval=function(){return new g(h.call(setInterval,window,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(m){m.close()},g.prototype.unref=g.prototype.ref=function(){},g.prototype.close=function(){this._clearFn.call(window,this._id)},o.enroll=function(m,b){clearTimeout(m._idleTimeoutId),m._idleTimeout=b},o.unenroll=function(m){clearTimeout(m._idleTimeoutId),m._idleTimeout=-1},o._unrefActive=o.active=function(m){clearTimeout(m._idleTimeoutId);var b=m._idleTimeout;b>=0&&(m._idleTimeoutId=setTimeout(function(){m._onTimeout&&m._onTimeout()},b))},o.setImmediate=typeof a=="function"?a:function(m){var b=_++,x=!(arguments.length<2)&&f.call(arguments,1);return p[b]=!0,t(function(){p[b]&&(x?m.apply(null,x):m.call(null),o.clearImmediate(b))}),b},o.clearImmediate=typeof l=="function"?l:function(m){delete p[m]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(e,i,o){(function(a){(function(){function l(t){try{if(!a.localStorage)return!1}catch{return!1}var h=a.localStorage[t];return h!=null&&String(h).toLowerCase()==="true"}i.exports=function(t,h){if(l("noDeprecation"))return t;var f=!1;return function(){if(!f){if(l("throwDeprecation"))throw new Error(h);l("traceDeprecation")?console.trace(h):console.warn(h),f=!0}return t.apply(this,arguments)}}}).call(this)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(e,i,o){typeof Object.create=="function"?i.exports=function(a,l){a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(a,l){a.super_=l;var t=function(){};t.prototype=l.prototype,a.prototype=new t,a.prototype.constructor=a}},{}],526:[function(e,i,o){i.exports=function(a){return a&&typeof a=="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},{}],527:[function(e,i,o){(function(a,l){(function(){var t=/%[sdj%]/g;o.format=function(k){if(!O(k)){for(var R=[],N=0;N<arguments.length;N++)R.push(p(arguments[N]));return R.join(" ")}N=1;for(var U=arguments,Y=U.length,de=String(k).replace(t,function(xe){if(xe==="%%")return"%";if(N>=Y)return xe;switch(xe){case"%s":return String(U[N++]);case"%d":return Number(U[N++]);case"%j":try{return JSON.stringify(U[N++])}catch{return"[Circular]"}default:return xe}}),J=U[N];N<Y;J=U[++N])B(J)||!Q(J)?de+=" "+J:de+=" "+p(J);return de},o.deprecate=function(k,R){if(V(l.process))return function(){return o.deprecate(k,R).apply(this,arguments)};if(a.noDeprecation===!0)return k;var N=!1;return function(){if(!N){if(a.throwDeprecation)throw new Error(R);a.traceDeprecation?console.trace(R):console.error(R),N=!0}return k.apply(this,arguments)}};var h,f={};function p(k,R){var N={seen:[],stylize:g};return arguments.length>=3&&(N.depth=arguments[2]),arguments.length>=4&&(N.colors=arguments[3]),S(R)?N.showHidden=R:R&&o._extend(N,R),V(N.showHidden)&&(N.showHidden=!1),V(N.depth)&&(N.depth=2),V(N.colors)&&(N.colors=!1),V(N.customInspect)&&(N.customInspect=!0),N.colors&&(N.stylize=_),m(N,k,N.depth)}function _(k,R){var N=p.styles[R];return N?"\x1B["+p.colors[N][0]+"m"+k+"\x1B["+p.colors[N][1]+"m":k}function g(k,R){return k}function m(k,R,N){if(k.customInspect&&R&&Ae(R.inspect)&&R.inspect!==o.inspect&&(!R.constructor||R.constructor.prototype!==R)){var U=R.inspect(N,k);return O(U)||(U=m(k,U,N)),U}var Y=function(re,ie){if(V(ie))return re.stylize("undefined","undefined");if(O(ie)){var Be="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return re.stylize(Be,"string")}if(F(ie))return re.stylize(""+ie,"number");if(S(ie))return re.stylize(""+ie,"boolean");if(B(ie))return re.stylize("null","null")}(k,R);if(Y)return Y;var de=Object.keys(R),J=function(re){var ie={};return re.forEach(function(Be,He){ie[Be]=!0}),ie}(de);if(k.showHidden&&(de=Object.getOwnPropertyNames(R)),ne(R)&&(de.indexOf("message")>=0||de.indexOf("description")>=0))return b(R);if(de.length===0){if(Ae(R)){var xe=R.name?": "+R.name:"";return k.stylize("[Function"+xe+"]","special")}if(X(R))return k.stylize(RegExp.prototype.toString.call(R),"regexp");if(ee(R))return k.stylize(Date.prototype.toString.call(R),"date");if(ne(R))return b(R)}var Te,Ue="",pe=!1,Oe=["{","}"];return v(R)&&(pe=!0,Oe=["[","]"]),Ae(R)&&(Ue=" [Function"+(R.name?": "+R.name:"")+"]"),X(R)&&(Ue=" "+RegExp.prototype.toString.call(R)),ee(R)&&(Ue=" "+Date.prototype.toUTCString.call(R)),ne(R)&&(Ue=" "+b(R)),de.length!==0||pe&&R.length!=0?N<0?X(R)?k.stylize(RegExp.prototype.toString.call(R),"regexp"):k.stylize("[Object]","special"):(k.seen.push(R),Te=pe?function(re,ie,Be,He,Ge){for(var Ne=[],st=0,ot=ie.length;st<ot;++st)z(ie,String(st))?Ne.push(x(re,ie,Be,He,String(st),!0)):Ne.push("");return Ge.forEach(function(Je){Je.match(/^\d+$/)||Ne.push(x(re,ie,Be,He,Je,!0))}),Ne}(k,R,N,J,de):de.map(function(re){return x(k,R,N,J,re,pe)}),k.seen.pop(),function(re,ie,Be){return re.reduce(function(He,Ge){return Ge.indexOf(`
`)>=0,He+Ge.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Be[0]+(ie===""?"":ie+`
 `)+" "+re.join(`,
  `)+" "+Be[1]:Be[0]+ie+" "+re.join(", ")+" "+Be[1]}(Te,Ue,Oe)):Oe[0]+Ue+Oe[1]}function b(k){return"["+Error.prototype.toString.call(k)+"]"}function x(k,R,N,U,Y,de){var J,xe,Te;if((Te=Object.getOwnPropertyDescriptor(R,Y)||{value:R[Y]}).get?xe=Te.set?k.stylize("[Getter/Setter]","special"):k.stylize("[Getter]","special"):Te.set&&(xe=k.stylize("[Setter]","special")),z(U,Y)||(J="["+Y+"]"),xe||(k.seen.indexOf(Te.value)<0?(xe=B(N)?m(k,Te.value,null):m(k,Te.value,N-1)).indexOf(`
`)>-1&&(xe=de?xe.split(`
`).map(function(Ue){return"  "+Ue}).join(`
`).substr(2):`
`+xe.split(`
`).map(function(Ue){return"   "+Ue}).join(`
`)):xe=k.stylize("[Circular]","special")),V(J)){if(de&&Y.match(/^\d+$/))return xe;(J=JSON.stringify(""+Y)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(J=J.substr(1,J.length-2),J=k.stylize(J,"name")):(J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=k.stylize(J,"string"))}return J+": "+xe}function v(k){return Array.isArray(k)}function S(k){return typeof k=="boolean"}function B(k){return k===null}function F(k){return typeof k=="number"}function O(k){return typeof k=="string"}function V(k){return k===void 0}function X(k){return Q(k)&&fe(k)==="[object RegExp]"}function Q(k){return typeof k=="object"&&k!==null}function ee(k){return Q(k)&&fe(k)==="[object Date]"}function ne(k){return Q(k)&&(fe(k)==="[object Error]"||k instanceof Error)}function Ae(k){return typeof k=="function"}function fe(k){return Object.prototype.toString.call(k)}function ce(k){return k<10?"0"+k.toString(10):k.toString(10)}o.debuglog=function(k){if(V(h)&&(h=a.env.NODE_DEBUG||""),k=k.toUpperCase(),!f[k])if(new RegExp("\\b"+k+"\\b","i").test(h)){var R=a.pid;f[k]=function(){var N=o.format.apply(o,arguments);console.error("%s %d: %s",k,R,N)}}else f[k]=function(){};return f[k]},o.inspect=p,p.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},p.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=v,o.isBoolean=S,o.isNull=B,o.isNullOrUndefined=function(k){return k==null},o.isNumber=F,o.isString=O,o.isSymbol=function(k){return typeof k=="symbol"},o.isUndefined=V,o.isRegExp=X,o.isObject=Q,o.isDate=ee,o.isError=ne,o.isFunction=Ae,o.isPrimitive=function(k){return k===null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||typeof k=="symbol"||k===void 0},o.isBuffer=e("./support/isBuffer");var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Z(){var k=new Date,R=[ce(k.getHours()),ce(k.getMinutes()),ce(k.getSeconds())].join(":");return[k.getDate(),G[k.getMonth()],R].join(" ")}function z(k,R){return Object.prototype.hasOwnProperty.call(k,R)}o.log=function(){console.log("%s - %s",Z(),o.format.apply(o,arguments))},o.inherits=e("inherits"),o._extend=function(k,R){if(!R||!Q(R))return k;for(var N=Object.keys(R),U=N.length;U--;)k[N[U]]=R[N[U]];return k}}).call(this)}).call(this,e("_process"),typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"v1",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(o,"v3",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(o,"v4",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(o,"v5",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(o,"NIL",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(o,"validate",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(o,"stringify",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(o,"parse",{enumerable:!0,get:function(){return m.default}});var a=b(e("./v1.js")),l=b(e("./v3.js")),t=b(e("./v4.js")),h=b(e("./v5.js")),f=b(e("./nil.js")),p=b(e("./version.js")),_=b(e("./validate.js")),g=b(e("./stringify.js")),m=b(e("./parse.js"));function b(x){return x&&x.__esModule?x:{default:x}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(e,i,o){function a(m){return 14+(m+64>>>9<<4)+1}function l(m,b){const x=(65535&m)+(65535&b);return(m>>16)+(b>>16)+(x>>16)<<16|65535&x}function t(m,b,x,v,S,B){return l((F=l(l(b,m),l(v,B)))<<(O=S)|F>>>32-O,x);var F,O}function h(m,b,x,v,S,B,F){return t(b&x|~b&v,m,b,S,B,F)}function f(m,b,x,v,S,B,F){return t(b&v|x&~v,m,b,S,B,F)}function p(m,b,x,v,S,B,F){return t(b^x^v,m,b,S,B,F)}function _(m,b,x,v,S,B,F){return t(x^(b|~v),m,b,S,B,F)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var g=function(m){if(typeof m=="string"){const b=unescape(encodeURIComponent(m));m=new Uint8Array(b.length);for(let x=0;x<b.length;++x)m[x]=b.charCodeAt(x)}return function(b){const x=[],v=32*b.length;for(let S=0;S<v;S+=8){const B=b[S>>5]>>>S%32&255,F=parseInt("0123456789abcdef".charAt(B>>>4&15)+"0123456789abcdef".charAt(15&B),16);x.push(F)}return x}(function(b,x){b[x>>5]|=128<<x%32,b[a(x)-1]=x;let v=1732584193,S=-271733879,B=-1732584194,F=271733878;for(let O=0;O<b.length;O+=16){const V=v,X=S,Q=B,ee=F;v=h(v,S,B,F,b[O],7,-680876936),F=h(F,v,S,B,b[O+1],12,-389564586),B=h(B,F,v,S,b[O+2],17,606105819),S=h(S,B,F,v,b[O+3],22,-1044525330),v=h(v,S,B,F,b[O+4],7,-176418897),F=h(F,v,S,B,b[O+5],12,1200080426),B=h(B,F,v,S,b[O+6],17,-1473231341),S=h(S,B,F,v,b[O+7],22,-45705983),v=h(v,S,B,F,b[O+8],7,1770035416),F=h(F,v,S,B,b[O+9],12,-1958414417),B=h(B,F,v,S,b[O+10],17,-42063),S=h(S,B,F,v,b[O+11],22,-1990404162),v=h(v,S,B,F,b[O+12],7,1804603682),F=h(F,v,S,B,b[O+13],12,-40341101),B=h(B,F,v,S,b[O+14],17,-1502002290),S=h(S,B,F,v,b[O+15],22,1236535329),v=f(v,S,B,F,b[O+1],5,-165796510),F=f(F,v,S,B,b[O+6],9,-1069501632),B=f(B,F,v,S,b[O+11],14,643717713),S=f(S,B,F,v,b[O],20,-373897302),v=f(v,S,B,F,b[O+5],5,-701558691),F=f(F,v,S,B,b[O+10],9,38016083),B=f(B,F,v,S,b[O+15],14,-660478335),S=f(S,B,F,v,b[O+4],20,-405537848),v=f(v,S,B,F,b[O+9],5,568446438),F=f(F,v,S,B,b[O+14],9,-1019803690),B=f(B,F,v,S,b[O+3],14,-187363961),S=f(S,B,F,v,b[O+8],20,1163531501),v=f(v,S,B,F,b[O+13],5,-1444681467),F=f(F,v,S,B,b[O+2],9,-51403784),B=f(B,F,v,S,b[O+7],14,1735328473),S=f(S,B,F,v,b[O+12],20,-1926607734),v=p(v,S,B,F,b[O+5],4,-378558),F=p(F,v,S,B,b[O+8],11,-2022574463),B=p(B,F,v,S,b[O+11],16,1839030562),S=p(S,B,F,v,b[O+14],23,-35309556),v=p(v,S,B,F,b[O+1],4,-1530992060),F=p(F,v,S,B,b[O+4],11,1272893353),B=p(B,F,v,S,b[O+7],16,-155497632),S=p(S,B,F,v,b[O+10],23,-1094730640),v=p(v,S,B,F,b[O+13],4,681279174),F=p(F,v,S,B,b[O],11,-358537222),B=p(B,F,v,S,b[O+3],16,-722521979),S=p(S,B,F,v,b[O+6],23,76029189),v=p(v,S,B,F,b[O+9],4,-640364487),F=p(F,v,S,B,b[O+12],11,-421815835),B=p(B,F,v,S,b[O+15],16,530742520),S=p(S,B,F,v,b[O+2],23,-995338651),v=_(v,S,B,F,b[O],6,-198630844),F=_(F,v,S,B,b[O+7],10,1126891415),B=_(B,F,v,S,b[O+14],15,-1416354905),S=_(S,B,F,v,b[O+5],21,-57434055),v=_(v,S,B,F,b[O+12],6,1700485571),F=_(F,v,S,B,b[O+3],10,-1894986606),B=_(B,F,v,S,b[O+10],15,-1051523),S=_(S,B,F,v,b[O+1],21,-2054922799),v=_(v,S,B,F,b[O+8],6,1873313359),F=_(F,v,S,B,b[O+15],10,-30611744),B=_(B,F,v,S,b[O+6],15,-1560198380),S=_(S,B,F,v,b[O+13],21,1309151649),v=_(v,S,B,F,b[O+4],6,-145523070),F=_(F,v,S,B,b[O+11],10,-1120210379),B=_(B,F,v,S,b[O+2],15,718787259),S=_(S,B,F,v,b[O+9],21,-343485551),v=l(v,V),S=l(S,X),B=l(B,Q),F=l(F,ee)}return[v,S,B,F]}(function(b){if(b.length===0)return[];const x=8*b.length,v=new Uint32Array(a(x));for(let S=0;S<x;S+=8)v[S>>5]|=(255&b[S/8])<<S%32;return v}(m),8*m.length))};o.default=g},{}],530:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,l=(a=e("./validate.js"))&&a.__esModule?a:{default:a},t=function(h){if(!(0,l.default)(h))throw TypeError("Invalid UUID");let f;const p=new Uint8Array(16);return p[0]=(f=parseInt(h.slice(0,8),16))>>>24,p[1]=f>>>16&255,p[2]=f>>>8&255,p[3]=255&f,p[4]=(f=parseInt(h.slice(9,13),16))>>>8,p[5]=255&f,p[6]=(f=parseInt(h.slice(14,18),16))>>>8,p[7]=255&f,p[8]=(f=parseInt(h.slice(19,23),16))>>>8,p[9]=255&f,p[10]=(f=parseInt(h.slice(24,36),16))/1099511627776&255,p[11]=f/4294967296&255,p[12]=f>>>24&255,p[13]=f>>>16&255,p[14]=f>>>8&255,p[15]=255&f,p};o.default=t},{"./validate.js":541}],532:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(e,i,o){let a;Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){if(!a&&(a=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(l)};const l=new Uint8Array(16)},{}],534:[function(e,i,o){function a(h,f,p,_){switch(h){case 0:return f&p^~f&_;case 1:return f^p^_;case 2:return f&p^f&_^p&_;case 3:return f^p^_}}function l(h,f){return h<<f|h>>>32-f}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t=function(h){const f=[1518500249,1859775393,2400959708,3395469782],p=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof h=="string"){const b=unescape(encodeURIComponent(h));h=[];for(let x=0;x<b.length;++x)h.push(b.charCodeAt(x))}else Array.isArray(h)||(h=Array.prototype.slice.call(h));h.push(128);const _=h.length/4+2,g=Math.ceil(_/16),m=new Array(g);for(let b=0;b<g;++b){const x=new Uint32Array(16);for(let v=0;v<16;++v)x[v]=h[64*b+4*v]<<24|h[64*b+4*v+1]<<16|h[64*b+4*v+2]<<8|h[64*b+4*v+3];m[b]=x}m[g-1][14]=8*(h.length-1)/Math.pow(2,32),m[g-1][14]=Math.floor(m[g-1][14]),m[g-1][15]=8*(h.length-1)&4294967295;for(let b=0;b<g;++b){const x=new Uint32Array(80);for(let V=0;V<16;++V)x[V]=m[b][V];for(let V=16;V<80;++V)x[V]=l(x[V-3]^x[V-8]^x[V-14]^x[V-16],1);let v=p[0],S=p[1],B=p[2],F=p[3],O=p[4];for(let V=0;V<80;++V){const X=Math.floor(V/20),Q=l(v,5)+a(X,S,B,F)+O+f[X]+x[V]>>>0;O=F,F=B,B=l(S,30)>>>0,S=v,v=Q}p[0]=p[0]+v>>>0,p[1]=p[1]+S>>>0,p[2]=p[2]+B>>>0,p[3]=p[3]+F>>>0,p[4]=p[4]+O>>>0}return[p[0]>>24&255,p[0]>>16&255,p[0]>>8&255,255&p[0],p[1]>>24&255,p[1]>>16&255,p[1]>>8&255,255&p[1],p[2]>>24&255,p[2]>>16&255,p[2]>>8&255,255&p[2],p[3]>>24&255,p[3]>>16&255,p[3]>>8&255,255&p[3],p[4]>>24&255,p[4]>>16&255,p[4]>>8&255,255&p[4]]};o.default=t},{}],535:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,l=(a=e("./validate.js"))&&a.__esModule?a:{default:a};const t=[];for(let f=0;f<256;++f)t.push((f+256).toString(16).substr(1));var h=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const _=(t[f[p+0]]+t[f[p+1]]+t[f[p+2]]+t[f[p+3]]+"-"+t[f[p+4]]+t[f[p+5]]+"-"+t[f[p+6]]+t[f[p+7]]+"-"+t[f[p+8]]+t[f[p+9]]+"-"+t[f[p+10]]+t[f[p+11]]+t[f[p+12]]+t[f[p+13]]+t[f[p+14]]+t[f[p+15]]).toLowerCase();if(!(0,l.default)(_))throw TypeError("Stringified UUID is invalid");return _};o.default=h},{"./validate.js":541}],536:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=t(e("./rng.js")),l=t(e("./stringify.js"));function t(m){return m&&m.__esModule?m:{default:m}}let h,f,p=0,_=0;var g=function(m,b,x){let v=b&&x||0;const S=b||new Array(16);let B=(m=m||{}).node||h,F=m.clockseq!==void 0?m.clockseq:f;if(B==null||F==null){const ne=m.random||(m.rng||a.default)();B==null&&(B=h=[1|ne[0],ne[1],ne[2],ne[3],ne[4],ne[5]]),F==null&&(F=f=16383&(ne[6]<<8|ne[7]))}let O=m.msecs!==void 0?m.msecs:Date.now(),V=m.nsecs!==void 0?m.nsecs:_+1;const X=O-p+(V-_)/1e4;if(X<0&&m.clockseq===void 0&&(F=F+1&16383),(X<0||O>p)&&m.nsecs===void 0&&(V=0),V>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=O,_=V,f=F,O+=122192928e5;const Q=(1e4*(268435455&O)+V)%4294967296;S[v++]=Q>>>24&255,S[v++]=Q>>>16&255,S[v++]=Q>>>8&255,S[v++]=255&Q;const ee=O/4294967296*1e4&268435455;S[v++]=ee>>>8&255,S[v++]=255&ee,S[v++]=ee>>>24&15|16,S[v++]=ee>>>16&255,S[v++]=F>>>8|128,S[v++]=255&F;for(let ne=0;ne<6;++ne)S[v+ne]=B[ne];return b||(0,l.default)(S)};o.default=g},{"./rng.js":533,"./stringify.js":535}],537:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=t(e("./v35.js")),l=t(e("./md5.js"));function t(f){return f&&f.__esModule?f:{default:f}}var h=(0,a.default)("v3",48,l.default);o.default=h},{"./md5.js":529,"./v35.js":538}],538:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(p,_,g){function m(b,x,v,S){if(typeof b=="string"&&(b=function(F){F=unescape(encodeURIComponent(F));const O=[];for(let V=0;V<F.length;++V)O.push(F.charCodeAt(V));return O}(b)),typeof x=="string"&&(x=(0,l.default)(x)),x.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let B=new Uint8Array(16+b.length);if(B.set(x),B.set(b,x.length),B=g(B),B[6]=15&B[6]|_,B[8]=63&B[8]|128,v){S=S||0;for(let F=0;F<16;++F)v[S+F]=B[F];return v}return(0,a.default)(B)}try{m.name=p}catch{}return m.DNS=h,m.URL=f,m},o.URL=o.DNS=void 0;var a=t(e("./stringify.js")),l=t(e("./parse.js"));function t(p){return p&&p.__esModule?p:{default:p}}const h="6ba7b810-9dad-11d1-80b4-00c04fd430c8";o.DNS=h;const f="6ba7b811-9dad-11d1-80b4-00c04fd430c8";o.URL=f},{"./parse.js":531,"./stringify.js":535}],539:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=t(e("./rng.js")),l=t(e("./stringify.js"));function t(f){return f&&f.__esModule?f:{default:f}}var h=function(f,p,_){const g=(f=f||{}).random||(f.rng||a.default)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,p){_=_||0;for(let m=0;m<16;++m)p[_+m]=g[m];return p}return(0,l.default)(g)};o.default=h},{"./rng.js":533,"./stringify.js":535}],540:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=t(e("./v35.js")),l=t(e("./sha1.js"));function t(f){return f&&f.__esModule?f:{default:f}}var h=(0,a.default)("v5",80,l.default);o.default=h},{"./sha1.js":534,"./v35.js":538}],541:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,l=(a=e("./regex.js"))&&a.__esModule?a:{default:a},t=function(h){return typeof h=="string"&&l.default.test(h)};o.default=t},{"./regex.js":532}],542:[function(e,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,l=(a=e("./validate.js"))&&a.__esModule?a:{default:a},t=function(h){if(!(0,l.default)(h))throw TypeError("Invalid UUID");return parseInt(h.substr(14,1),16)};o.default=t},{"./validate.js":541}],543:[function(e,i,o){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(o,"__esModule",{value:!0}),o.CHAR=`	
\r -í¿î-ï¿½ð-ô¿¿`,o.S=` 	\r
`,o.NAME_START_CHAR=":A-Z_a-zÃ-ÃÃ-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿âââ°-ââ°-â¿¯ã-í¿ï¤-ï·ï·°-ï¿½ð-ó¯¿¿",o.NAME_CHAR="-"+o.NAME_START_CHAR+".0-9Â·Ì-Í¯â¿-â",o.CHAR_RE=new RegExp("^["+o.CHAR+"]$","u"),o.S_RE=new RegExp("^["+o.S+"]+$","u"),o.NAME_START_CHAR_RE=new RegExp("^["+o.NAME_START_CHAR+"]$","u"),o.NAME_CHAR_RE=new RegExp("^["+o.NAME_CHAR+"]$","u"),o.NAME_RE=new RegExp("^["+o.NAME_START_CHAR+"]["+o.NAME_CHAR+"]*$","u"),o.NMTOKEN_RE=new RegExp("^["+o.NAME_CHAR+"]+$","u");function a(l){return l>=65&&l<=90||l>=97&&l<=122||l===58||l===95||l===8204||l===8205||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}o.S_LIST=[32,10,13,9],o.isChar=function(l){return l>=32&&l<=55295||l===10||l===13||l===9||l>=57344&&l<=65533||l>=65536&&l<=1114111},o.isS=function(l){return l===32||l===10||l===13||l===9},o.isNameStartChar=a,o.isNameChar=function(l){return a(l)||l>=48&&l<=57||l===45||l===46||l===183||l>=768&&l<=879||l>=8255&&l<=8256}},{}],544:[function(e,i,o){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(o,"__esModule",{value:!0}),o.CHAR="-í¿î-ï¿½ð-ô¿¿",o.RESTRICTED_CHAR="-\b\v\f--ÂÂ-Â",o.S=` 	\r
`,o.NAME_START_CHAR=":A-Z_a-zÃ-ÃÃ-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿âââ°-ââ°-â¿¯ã-í¿ï¤-ï·ï·°-ï¿½ð-ó¯¿¿",o.NAME_CHAR="-"+o.NAME_START_CHAR+".0-9Â·Ì-Í¯â¿-â",o.CHAR_RE=new RegExp("^["+o.CHAR+"]$","u"),o.RESTRICTED_CHAR_RE=new RegExp("^["+o.RESTRICTED_CHAR+"]$","u"),o.S_RE=new RegExp("^["+o.S+"]+$","u"),o.NAME_START_CHAR_RE=new RegExp("^["+o.NAME_START_CHAR+"]$","u"),o.NAME_CHAR_RE=new RegExp("^["+o.NAME_CHAR+"]$","u"),o.NAME_RE=new RegExp("^["+o.NAME_START_CHAR+"]["+o.NAME_CHAR+"]*$","u"),o.NMTOKEN_RE=new RegExp("^["+o.NAME_CHAR+"]+$","u");function a(l){return l>=65&&l<=90||l>=97&&l<=122||l===58||l===95||l===8204||l===8205||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}o.S_LIST=[32,10,13,9],o.isChar=function(l){return l>=1&&l<=55295||l>=57344&&l<=65533||l>=65536&&l<=1114111},o.isRestrictedChar=function(l){return l>=1&&l<=8||l===11||l===12||l>=14&&l<=31||l>=127&&l<=132||l>=134&&l<=159},o.isCharAndNotRestricted=function(l){return l===9||l===10||l===13||l>31&&l<127||l===133||l>159&&l<=55295||l>=57344&&l<=65533||l>=65536&&l<=1114111},o.isS=function(l){return l===32||l===10||l===13||l===9},o.isNameStartChar=a,o.isNameChar=function(l){return a(l)||l>=48&&l<=57||l===45||l===46||l===183||l>=768&&l<=879||l>=8255&&l<=8256}},{}],545:[function(e,i,o){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function a(l){return l>=65&&l<=90||l===95||l>=97&&l<=122||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8204&&l<=8205||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}Object.defineProperty(o,"__esModule",{value:!0}),o.NC_NAME_START_CHAR="A-Z_a-zÃ-ÃÃ-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â-ââ°-ââ°-â¿¯ã-í¿ï¤-ï·ï·°-ï¿½ð-ó¯¿¿",o.NC_NAME_CHAR="-"+o.NC_NAME_START_CHAR+".0-9Â·Ì-Í¯â¿-â",o.NC_NAME_START_CHAR_RE=new RegExp("^["+o.NC_NAME_START_CHAR+"]$","u"),o.NC_NAME_CHAR_RE=new RegExp("^["+o.NC_NAME_CHAR+"]$","u"),o.NC_NAME_RE=new RegExp("^["+o.NC_NAME_START_CHAR+"]["+o.NC_NAME_CHAR+"]*$","u"),o.isNCNameStartChar=a,o.isNCNameChar=function(l){return a(l)||l===45||l===46||l>=48&&l<=57||l===183||l>=768&&l<=879||l>=8255&&l<=8256}},{}]},{},[15])(15)})}(W4)),W4.exports}var see=iee();const oee=s0(see);var aw={exports:{}},aee=aw.exports,hF;function lee(){return hF||(hF=1,function(n,r){(function(e,i){i()})(aee,function(){function e(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function i(f,p,_){var g=new XMLHttpRequest;g.open("GET",f),g.responseType="blob",g.onload=function(){h(g.response,p,_)},g.onerror=function(){console.error("could not download file")},g.send()}function o(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function a(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof So=="object"&&So.global===So?So:void 0,t=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!t?function(f,p,_){var g=l.URL||l.webkitURL,m=document.createElement("a");p=p||f.name||"download",m.download=p,m.rel="noopener",typeof f=="string"?(m.href=f,m.origin===location.origin?a(m):o(m.href)?i(f,p,_):a(m,m.target="_blank")):(m.href=g.createObjectURL(f),setTimeout(function(){g.revokeObjectURL(m.href)},4e4),setTimeout(function(){a(m)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,_){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(e(f,_),p);else if(o(f))i(f,p,_);else{var g=document.createElement("a");g.href=f,g.target="_blank",setTimeout(function(){a(g)})}}:function(f,p,_,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof f=="string")return i(f,p,_);var m=f.type==="application/octet-stream",b=/constructor/i.test(l.HTMLElement)||l.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||m&&b||t)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var F=v.result;F=x?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=F:location=F,g=null},v.readAsDataURL(f)}else{var S=l.URL||l.webkitURL,B=S.createObjectURL(f);g?g.location=B:location.href=B,g=null,setTimeout(function(){S.revokeObjectURL(B)},4e4)}});l.saveAs=h.saveAs=h,n.exports=h})}(aw)),aw.exports}var cee=lee(),lw={exports:{}},uee=lw.exports,fF;function hee(){return fF||(fF=1,function(n,r){(function(e,i){n.exports=i()})(uee,function(){var e,i,o;function a(t,h){if(!e)e=h;else if(!i)i=h;else{var f="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",p={};e(p),o=h(p),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(o.workerUrl=window.URL.createObjectURL(new Blob([f],{type:"text/javascript"})))}}a(["exports"],function(t){var h=1e-6,f=typeof Float32Array<"u"?Float32Array:Array;function p(d,s){var u=s[0],y=s[1],w=s[2],T=s[3],I=u*T-w*y;return I?(d[0]=T*(I=1/I),d[1]=-y*I,d[2]=-w*I,d[3]=u*I,d):null}function _(){var d=new f(9);return f!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function g(d,s){var u=s[0],y=s[1],w=s[2],T=s[3],I=s[4],L=s[5],H=s[6],W=s[7],se=s[8];return d[0]=I*se-L*W,d[1]=w*W-y*se,d[2]=y*L-w*I,d[3]=L*H-T*se,d[4]=u*se-w*H,d[5]=w*T-u*L,d[6]=T*W-I*H,d[7]=y*H-u*W,d[8]=u*I-y*T,d}function m(d,s,u){var y=s[0],w=s[1],T=s[2],I=s[3],L=s[4],H=s[5],W=s[6],se=s[7],ue=s[8],me=u[0],Ee=u[1],Ie=u[2],Re=u[3],ze=u[4],Xe=u[5],ht=u[6],ut=u[7],mt=u[8];return d[0]=me*y+Ee*I+Ie*W,d[1]=me*w+Ee*L+Ie*se,d[2]=me*T+Ee*H+Ie*ue,d[3]=Re*y+ze*I+Xe*W,d[4]=Re*w+ze*L+Xe*se,d[5]=Re*T+ze*H+Xe*ue,d[6]=ht*y+ut*I+mt*W,d[7]=ht*w+ut*L+mt*se,d[8]=ht*T+ut*H+mt*ue,d}function b(){var d=new f(16);return f!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d}function x(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function v(d,s){var u=s[0],y=s[1],w=s[2],T=s[3],I=s[4],L=s[5],H=s[6],W=s[7],se=s[8],ue=s[9],me=s[10],Ee=s[11],Ie=s[12],Re=s[13],ze=s[14],Xe=s[15],ht=u*L-y*I,ut=u*H-w*I,mt=u*W-T*I,$t=y*H-w*L,Ut=y*W-T*L,Ht=w*W-T*H,or=se*Re-ue*Ie,cr=se*ze-me*Ie,Gr=se*Xe-Ee*Ie,xr=ue*ze-me*Re,Yr=ue*Xe-Ee*Re,In=me*Xe-Ee*ze,nn=ht*In-ut*Yr+mt*xr+$t*Gr-Ut*cr+Ht*or;return nn?(d[0]=(L*In-H*Yr+W*xr)*(nn=1/nn),d[1]=(w*Yr-y*In-T*xr)*nn,d[2]=(Re*Ht-ze*Ut+Xe*$t)*nn,d[3]=(me*Ut-ue*Ht-Ee*$t)*nn,d[4]=(H*Gr-I*In-W*cr)*nn,d[5]=(u*In-w*Gr+T*cr)*nn,d[6]=(ze*mt-Ie*Ht-Xe*ut)*nn,d[7]=(se*Ht-me*mt+Ee*ut)*nn,d[8]=(I*Yr-L*Gr+W*or)*nn,d[9]=(y*Gr-u*Yr-T*or)*nn,d[10]=(Ie*Ut-Re*mt+Xe*ht)*nn,d[11]=(ue*mt-se*Ut-Ee*ht)*nn,d[12]=(L*cr-I*xr-H*or)*nn,d[13]=(u*xr-y*cr+w*or)*nn,d[14]=(Re*ut-Ie*$t-ze*ht)*nn,d[15]=(se*$t-ue*ut+me*ht)*nn,d):null}function S(d,s,u){var y=s[0],w=s[1],T=s[2],I=s[3],L=s[4],H=s[5],W=s[6],se=s[7],ue=s[8],me=s[9],Ee=s[10],Ie=s[11],Re=s[12],ze=s[13],Xe=s[14],ht=s[15],ut=u[0],mt=u[1],$t=u[2],Ut=u[3];return d[0]=ut*y+mt*L+$t*ue+Ut*Re,d[1]=ut*w+mt*H+$t*me+Ut*ze,d[2]=ut*T+mt*W+$t*Ee+Ut*Xe,d[3]=ut*I+mt*se+$t*Ie+Ut*ht,d[4]=(ut=u[4])*y+(mt=u[5])*L+($t=u[6])*ue+(Ut=u[7])*Re,d[5]=ut*w+mt*H+$t*me+Ut*ze,d[6]=ut*T+mt*W+$t*Ee+Ut*Xe,d[7]=ut*I+mt*se+$t*Ie+Ut*ht,d[8]=(ut=u[8])*y+(mt=u[9])*L+($t=u[10])*ue+(Ut=u[11])*Re,d[9]=ut*w+mt*H+$t*me+Ut*ze,d[10]=ut*T+mt*W+$t*Ee+Ut*Xe,d[11]=ut*I+mt*se+$t*Ie+Ut*ht,d[12]=(ut=u[12])*y+(mt=u[13])*L+($t=u[14])*ue+(Ut=u[15])*Re,d[13]=ut*w+mt*H+$t*me+Ut*ze,d[14]=ut*T+mt*W+$t*Ee+Ut*Xe,d[15]=ut*I+mt*se+$t*Ie+Ut*ht,d}function B(d,s,u){var y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re=u[0],ze=u[1],Xe=u[2];return s===d?(d[12]=s[0]*Re+s[4]*ze+s[8]*Xe+s[12],d[13]=s[1]*Re+s[5]*ze+s[9]*Xe+s[13],d[14]=s[2]*Re+s[6]*ze+s[10]*Xe+s[14],d[15]=s[3]*Re+s[7]*ze+s[11]*Xe+s[15]):(w=s[1],T=s[2],I=s[3],L=s[4],H=s[5],W=s[6],se=s[7],ue=s[8],me=s[9],Ee=s[10],Ie=s[11],d[0]=y=s[0],d[1]=w,d[2]=T,d[3]=I,d[4]=L,d[5]=H,d[6]=W,d[7]=se,d[8]=ue,d[9]=me,d[10]=Ee,d[11]=Ie,d[12]=y*Re+L*ze+ue*Xe+s[12],d[13]=w*Re+H*ze+me*Xe+s[13],d[14]=T*Re+W*ze+Ee*Xe+s[14],d[15]=I*Re+se*ze+Ie*Xe+s[15]),d}function F(d,s,u){var y=u[0],w=u[1],T=u[2];return d[0]=s[0]*y,d[1]=s[1]*y,d[2]=s[2]*y,d[3]=s[3]*y,d[4]=s[4]*w,d[5]=s[5]*w,d[6]=s[6]*w,d[7]=s[7]*w,d[8]=s[8]*T,d[9]=s[9]*T,d[10]=s[10]*T,d[11]=s[11]*T,d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15],d}function O(d,s,u){var y=Math.sin(u),w=Math.cos(u),T=s[4],I=s[5],L=s[6],H=s[7],W=s[8],se=s[9],ue=s[10],me=s[11];return s!==d&&(d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[3],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[4]=T*w+W*y,d[5]=I*w+se*y,d[6]=L*w+ue*y,d[7]=H*w+me*y,d[8]=W*w-T*y,d[9]=se*w-I*y,d[10]=ue*w-L*y,d[11]=me*w-H*y,d}function V(d,s,u){var y=Math.sin(u),w=Math.cos(u),T=s[0],I=s[1],L=s[2],H=s[3],W=s[8],se=s[9],ue=s[10],me=s[11];return s!==d&&(d[4]=s[4],d[5]=s[5],d[6]=s[6],d[7]=s[7],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[0]=T*w-W*y,d[1]=I*w-se*y,d[2]=L*w-ue*y,d[3]=H*w-me*y,d[8]=T*y+W*w,d[9]=I*y+se*w,d[10]=L*y+ue*w,d[11]=H*y+me*w,d}function X(d,s,u){var y=Math.sin(u),w=Math.cos(u),T=s[0],I=s[1],L=s[2],H=s[3],W=s[4],se=s[5],ue=s[6],me=s[7];return s!==d&&(d[8]=s[8],d[9]=s[9],d[10]=s[10],d[11]=s[11],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[0]=T*w+W*y,d[1]=I*w+se*y,d[2]=L*w+ue*y,d[3]=H*w+me*y,d[4]=W*w-T*y,d[5]=se*w-I*y,d[6]=ue*w-L*y,d[7]=me*w-H*y,d}function Q(d,s){return d[0]=s[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=s[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=s[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function ee(d,s,u){var y,w,T,I=u[0],L=u[1],H=u[2],W=Math.hypot(I,L,H);return W<h?null:(I*=W=1/W,L*=W,H*=W,y=Math.sin(s),w=Math.cos(s),d[0]=I*I*(T=1-w)+w,d[1]=L*I*T+H*y,d[2]=H*I*T-L*y,d[3]=0,d[4]=I*L*T-H*y,d[5]=L*L*T+w,d[6]=H*L*T+I*y,d[7]=0,d[8]=I*H*T+L*y,d[9]=L*H*T-I*y,d[10]=H*H*T+w,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d)}function ne(d,s){var u=s[0],y=s[1],w=s[2],T=s[3],I=u+u,L=y+y,H=w+w,W=u*I,se=y*I,ue=y*L,me=w*I,Ee=w*L,Ie=w*H,Re=T*I,ze=T*L,Xe=T*H;return d[0]=1-ue-Ie,d[1]=se+Xe,d[2]=me-ze,d[3]=0,d[4]=se-Xe,d[5]=1-W-Ie,d[6]=Ee+Re,d[7]=0,d[8]=me+ze,d[9]=Ee-Re,d[10]=1-W-ue,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}Math.hypot||(Math.hypot=function(){for(var d=0,s=arguments.length;s--;)d+=arguments[s]*arguments[s];return Math.sqrt(d)});var Ae=S;function fe(){var d=new f(3);return f!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function ce(d){var s=new f(3);return s[0]=d[0],s[1]=d[1],s[2]=d[2],s}function G(d){return Math.hypot(d[0],d[1],d[2])}function Z(d,s,u){var y=new f(3);return y[0]=d,y[1]=s,y[2]=u,y}function z(d,s,u,y){return d[0]=s,d[1]=u,d[2]=y,d}function k(d,s,u){return d[0]=s[0]+u[0],d[1]=s[1]+u[1],d[2]=s[2]+u[2],d}function R(d,s,u){return d[0]=s[0]-u[0],d[1]=s[1]-u[1],d[2]=s[2]-u[2],d}function N(d,s,u){return d[0]=s[0]*u[0],d[1]=s[1]*u[1],d[2]=s[2]*u[2],d}function U(d,s,u){return d[0]=Math.min(s[0],u[0]),d[1]=Math.min(s[1],u[1]),d[2]=Math.min(s[2],u[2]),d}function Y(d,s,u){return d[0]=Math.max(s[0],u[0]),d[1]=Math.max(s[1],u[1]),d[2]=Math.max(s[2],u[2]),d}function de(d,s,u){return d[0]=s[0]*u,d[1]=s[1]*u,d[2]=s[2]*u,d}function J(d,s,u,y){return d[0]=s[0]+u[0]*y,d[1]=s[1]+u[1]*y,d[2]=s[2]+u[2]*y,d}function xe(d,s){var u=s[0]-d[0],y=s[1]-d[1],w=s[2]-d[2];return u*u+y*y+w*w}function Te(d){var s=d[0],u=d[1],y=d[2];return s*s+u*u+y*y}function Ue(d,s){return d[0]=-s[0],d[1]=-s[1],d[2]=-s[2],d}function pe(d,s){var u=s[0],y=s[1],w=s[2],T=u*u+y*y+w*w;return T>0&&(T=1/Math.sqrt(T)),d[0]=s[0]*T,d[1]=s[1]*T,d[2]=s[2]*T,d}function Oe(d,s){return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]}function re(d,s,u){var y=s[0],w=s[1],T=s[2],I=u[0],L=u[1],H=u[2];return d[0]=w*H-T*L,d[1]=T*I-y*H,d[2]=y*L-w*I,d}function ie(d,s,u,y){var w=s[0],T=s[1],I=s[2];return d[0]=w+y*(u[0]-w),d[1]=T+y*(u[1]-T),d[2]=I+y*(u[2]-I),d}function Be(d,s,u){var y=s[0],w=s[1],T=s[2],I=u[3]*y+u[7]*w+u[11]*T+u[15];return d[0]=(u[0]*y+u[4]*w+u[8]*T+u[12])/(I=I||1),d[1]=(u[1]*y+u[5]*w+u[9]*T+u[13])/I,d[2]=(u[2]*y+u[6]*w+u[10]*T+u[14])/I,d}function He(d,s,u){var y=s[0],w=s[1],T=s[2];return d[0]=y*u[0]+w*u[3]+T*u[6],d[1]=y*u[1]+w*u[4]+T*u[7],d[2]=y*u[2]+w*u[5]+T*u[8],d}function Ge(d,s,u){var y=u[0],w=u[1],T=u[2],I=s[0],L=s[1],H=s[2],W=w*H-T*L,se=T*I-y*H,ue=y*L-w*I,me=w*ue-T*se,Ee=T*W-y*ue,Ie=y*se-w*W,Re=2*u[3];return se*=Re,ue*=Re,Ee*=2,Ie*=2,d[0]=I+(W*=Re)+(me*=2),d[1]=L+se+Ee,d[2]=H+ue+Ie,d}function Ne(d){return d[0]=0,d[1]=0,d[2]=0,d}function st(d,s){return d[0]===s[0]&&d[1]===s[1]&&d[2]===s[2]}var ot=R,Je=N,Ze=G;function bt(){var d=new f(4);return f!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),d}function yt(d,s,u){return d[0]=s[0]*u,d[1]=s[1]*u,d[2]=s[2]*u,d[3]=s[3]*u,d}function Nt(d,s){var u=s[0],y=s[1],w=s[2],T=s[3],I=u*u+y*y+w*w+T*T;return I>0&&(I=1/Math.sqrt(I)),d[0]=u*I,d[1]=y*I,d[2]=w*I,d[3]=T*I,d}function kt(d,s,u){var y=s[0],w=s[1],T=s[2],I=s[3];return d[0]=u[0]*y+u[4]*w+u[8]*T+u[12]*I,d[1]=u[1]*y+u[5]*w+u[9]*T+u[13]*I,d[2]=u[2]*y+u[6]*w+u[10]*T+u[14]*I,d[3]=u[3]*y+u[7]*w+u[11]*T+u[15]*I,d}function Gt(){var d=new f(4);return f!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function fr(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d}function Tr(d,s,u){u*=.5;var y=s[0],w=s[1],T=s[2],I=s[3],L=Math.sin(u),H=Math.cos(u);return d[0]=y*H+I*L,d[1]=w*H+T*L,d[2]=T*H-w*L,d[3]=I*H-y*L,d}function yr(d,s,u){u*=.5;var y=s[0],w=s[1],T=s[2],I=s[3],L=Math.sin(u),H=Math.cos(u);return d[0]=y*H-T*L,d[1]=w*H+I*L,d[2]=T*H+y*L,d[3]=I*H-w*L,d}fe(),bt();var Dr,jt,Jt,pr=Nt,Ft=(Dr=fe(),jt=Z(1,0,0),Jt=Z(0,1,0),function(d,s,u){var y=Oe(s,u);return y<-.999999?(re(Dr,jt,s),Ze(Dr)<1e-6&&re(Dr,Jt,s),pe(Dr,Dr),function(w,T,I){I*=.5;var L=Math.sin(I);w[0]=L*T[0],w[1]=L*T[1],w[2]=L*T[2],w[3]=Math.cos(I)}(d,Dr,Math.PI),d):y>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(re(Dr,s,u),d[0]=Dr[0],d[1]=Dr[1],d[2]=Dr[2],d[3]=1+y,pr(d,d))});function er(){var d=new f(2);return f!=Float32Array&&(d[0]=0,d[1]=0),d}function ur(d,s){var u=new f(2);return u[0]=d,u[1]=s,u}function Yt(d,s,u){return d[0]=s[0]+u[0],d[1]=s[1]+u[1],d}function mr(d,s,u){return d[0]=s[0]-u[0],d[1]=s[1]-u[1],d}function Mr(d,s,u){return d[0]=s[0]*u,d[1]=s[1]*u,d}function sn(d){return Math.hypot(d[0],d[1])}function Un(d,s){var u=s[0],y=s[1],w=u*u+y*y;return w>0&&(w=1/Math.sqrt(w)),d[0]=s[0]*w,d[1]=s[1]*w,d}function wn(d,s){return d[0]*s[0]+d[1]*s[1]}Gt(),Gt(),_();var Zi,ai,_i=mr;function Zn(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}er();var Bn=function(){if(ai)return Zi;function d(s,u,y,w){this.cx=3*s,this.bx=3*(y-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(w-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=y,this.p2y=w}return ai=1,Zi=d,d.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var y=s,w=0;w<8;w++){var T=this.sampleCurveX(y)-s;if(Math.abs(T)<u)return y;var I=this.sampleCurveDerivativeX(y);if(Math.abs(I)<1e-6)break;y-=T/I}var L=0,H=1;for(y=s,w=0;w<20&&(T=this.sampleCurveX(y),!(Math.abs(T-s)<u));w++)s>T?L=y:H=y,y=.5*(H-L)+L;return y},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},Zi}(),On=Zn(Bn);function tr(d,s){this.x=d,this.y=s}function zn(d,s){if(Array.isArray(d)){if(!Array.isArray(s)||d.length!==s.length)return!1;for(let u=0;u<d.length;u++)if(!zn(d[u],s[u]))return!1;return!0}if(typeof d=="object"&&d!==null&&s!==null){if(typeof s!="object"||Object.keys(d).length!==Object.keys(s).length)return!1;for(const u in d)if(!zn(d[u],s[u]))return!1;return!0}return d===s}tr.prototype={clone(){return new tr(this.x,this.y)},add(d){return this.clone()._add(d)},sub(d){return this.clone()._sub(d)},multByPoint(d){return this.clone()._multByPoint(d)},divByPoint(d){return this.clone()._divByPoint(d)},mult(d){return this.clone()._mult(d)},div(d){return this.clone()._div(d)},rotate(d){return this.clone()._rotate(d)},rotateAround(d,s){return this.clone()._rotateAround(d,s)},matMult(d){return this.clone()._matMult(d)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(d){return this.x===d.x&&this.y===d.y},dist(d){return Math.sqrt(this.distSqr(d))},distSqr(d){const s=d.x-this.x,u=d.y-this.y;return s*s+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith(d){return this.angleWithSep(d.x,d.y)},angleWithSep(d,s){return Math.atan2(this.x*s-this.y*d,this.x*d+this.y*s)},_matMult(d){const s=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=s,this},_add(d){return this.x+=d.x,this.y+=d.y,this},_sub(d){return this.x-=d.x,this.y-=d.y,this},_mult(d){return this.x*=d,this.y*=d,this},_div(d){return this.x/=d,this.y/=d,this},_multByPoint(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint(d){return this.x/=d.x,this.y/=d.y,this},_unit(){return this._div(this.mag()),this},_perp(){const d=this.y;return this.y=this.x,this.x=-d,this},_rotate(d){const s=Math.cos(d),u=Math.sin(d),y=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=y,this},_rotateAround(d,s){const u=Math.cos(d),y=Math.sin(d),w=s.y+y*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-y*(this.y-s.y),this.y=w,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:tr},tr.convert=function(d){if(d instanceof tr)return d;if(Array.isArray(d))return new tr(+d[0],+d[1]);if(d.x!==void 0&&d.y!==void 0)return new tr(+d.x,+d.y);throw new Error("Expected [x, y] or {x, y} point format")};const Ki=Math.PI/180,Qs=180/Math.PI;function li(d){return d*Ki}function Qt(d){return d*Qs}const Ve=[[0,0],[1,0],[1,1],[0,1]];function et(d){if(d<=0)return 0;if(d>=1)return 1;const s=d*d,u=s*d;return 4*(d<.5?u:3*(d-s)+u-.75)}function We(d,s,u,y){const w=new On(d,s,u,y);return function(T){return w.solve(T)}}const tt=We(.25,.1,.25,1);function nt(d,s,u){return Math.min(u,Math.max(s,d))}function Ct(d,s,u){return(u=nt((u-d)/(s-d),0,1))*u*(3-2*u)}function rr(d,s,u){const y=u-s,w=((d-s)%y+y)%y+s;return w===s?u:w}function Et(d,s,u){if(!d.length)return u(null,[]);let y=d.length;const w=new Array(d.length);let T=null;d.forEach((I,L)=>{s(I,(H,W)=>{H&&(T=H),w[L]=W,--y==0&&u(T,w)})})}function nr(d,...s){for(const u of s)for(const y in u)d[y]=u[y];return d}let Fr=1;function _r(){return Fr++}function pn(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function Tn(d,s){d.forEach(u=>{s[u]&&(s[u]=s[u].bind(s))})}function Vn(d,s,u){const y={};for(const w in d)y[w]=s.call(this,d[w],w,d);return y}function Bi(d,s,u){const y={};for(const w in d)s.call(this,d[w],w,d)&&(y[w]=d[w]);return y}function Si(d){return Array.isArray(d)?d.map(Si):typeof d=="object"&&d?Vn(d,Si):d}function Di(d,s){for(let u=0;u<d.length;u++)if(s.indexOf(d[u])>=0)return!0;return!1}const ds={};function Qi(d){ds[d]||(typeof console<"u"&&console.warn(d),ds[d]=!0)}function Zt(d,s,u){return(u.y-d.y)*(s.x-d.x)>(s.y-d.y)*(u.x-d.x)}function $r(d){let s=0;for(let u,y,w=0,T=d.length,I=T-1;w<T;I=w++)u=d[w],y=d[I],s+=(y.x-u.x)*(u.y+y.y);return s}function kn([d,s,u]){const y=li(s+90),w=li(u);return{x:d*Math.cos(y)*Math.sin(w),y:d*Math.sin(y)*Math.sin(w),z:d*Math.cos(w),azimuthal:s,polar:u}}function vn(d){return(typeof self<"u"||d!==void 0)&&typeof WorkerGlobalScope<"u"&&(d!==void 0?d:self)instanceof WorkerGlobalScope}function si(d){const s={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,y,w,T)=>{const I=w||T;return s[y]=!I||I.toLowerCase(),""}),s["max-age"]){const u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s}let qn=null;function Yn(d,s){return[d[4*s],d[4*s+1],d[4*s+2],d[4*s+3]]}function Wi(d,s,u,y){for(;s<u;){const w=s+u>>1;d[w]<y?s=w+1:u=w}return s}function us(d,s,u,y){for(;s<u;){const w=s+u>>1;d[w]<=y?s=w+1:u=w}return s}function xs(d){return d>0?1/(1.001-d):1+d}function zi(d){return d>0?1-1/(1.001-d):-d}function uo(d,s,u){return(d-s.min)*(u.max-u.min)/(s.max-s.min)+u.min}const Ji={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ji.API_URL)return null;try{const d=new URL(Ji.API_URL);return d.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":d.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",BUILDING_GEN_URL:"https://api.mapbox.com/mapbox-gl-js/building-gen/building_gen_v1.2.1.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function ks(d){return Ji.API_URL_REGEX.test(d)}function Co(d){return Ji.API_SPRITE_REGEX.test(d)}let Do,ba,il,Ma,Uo,xa;function Gl(){return Do==null&&(Do=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Do}const ro={now:()=>Ma!==void 0?Ma:performance.now(),setNow(d){Ma=d},restoreNow(){Ma=void 0},frame(d){const s=requestAnimationFrame(d);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(d,s=0){const{width:u,height:y}=d;Uo||(Uo=document.createElement("canvas"));const w=Uo.getContext("2d",{willReadFrequently:!0});if(!w)throw new Error("failed to create canvas 2d context");return(u>Uo.width||y>Uo.height)&&(Uo.width=u,Uo.height=y),w.clearRect(-s,-s,u+2*s,y+2*s),w.drawImage(d,0,0,u,y),w.getImageData(-s,-s,u+2*s,y+2*s)},resolveURL:d=>(ba||(ba=document.createElement("a")),ba.href=d,ba.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(il==null&&(il=window.matchMedia("(prefers-reduced-motion: reduce)")),il.matches)},hasCanvasFingerprintNoise(){if(xa!==void 0)return xa;if(!Gl())return xa=!1,!1;const d=new OffscreenCanvas(85,1),s=d.getContext("2d",{willReadFrequently:!0});let u=0;for(let w=0;w<d.width;++w)s.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,s.fillRect(w,0,1,1);const y=s.getImageData(0,0,d.width,d.height);u=0;for(let w=0;w<y.data.length;++w)if(w%4!=3&&u++!==y.data[w])return xa=!0,!0;return xa=!1,!1}};function Hs(d,s){const u=d.indexOf("?");if(u<0)return`${d}?${new URLSearchParams(s).toString()}`;const y=new URLSearchParams(d.slice(u));for(const w in s)y.set(w,s[w]);return`${d.slice(0,u)}?${y.toString()}`}function zo(d,s={persistentParams:[]}){const u=d.indexOf("?");if(u<0)return d;const y=new URLSearchParams,w=new URLSearchParams(d.slice(u));for(const I of s.persistentParams){const L=w.get(I);L&&y.set(I,L)}const T=y.toString();return`${d.slice(0,u)}${T.length>0?`?${T}`:""}`}const wl="mapbox-tiles";let Ha=500,Fa=50;const Pa=["language","worldview","jobid"];let wa,Sl;function Jl(){try{return caches}catch{}}function pl(){const d=Jl();d&&wa==null&&(wa=d.open(wl))}let sl=1/0;const hc={supported:!1,testSupport:function(d){!zc&&La&&(Cc?qu(d):na=d)}};let na,La,zc=!1,Cc=!1;const Os=typeof self<"u"?self:{};function qu(d){const s=d.createTexture();d.bindTexture(d.TEXTURE_2D,s);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,La),d.isContextLost())return;hc.supported=!0}catch{}d.deleteTexture(s),zc=!0}Os.document&&(La=Os.document.createElement("img"),La.onload=function(){na&&qu(na),na=null,Cc=!0},La.onerror=function(){zc=!0,na=null},La.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Jc={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Jc);class bs extends Error{constructor(s,u,y){u===401&&ks(y)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=u,this.url=y}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Dh=vn()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,mu=function(d,s){if(!(/^file:/.test(u=d.url)||/^file:/.test(Dh())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(y,w){const T=new AbortController,I=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:Dh(),referrerPolicy:y.referrerPolicy,signal:T.signal});let L=!1,H=!1;const W=(se=I.url).indexOf("sku=")>0&&ks(se);var se;y.type==="json"&&I.headers.set("Accept","application/json");const ue=(Ee,Ie,Re)=>{if(H)return;if(Ee&&Ee.message!=="SecurityError"&&Qi(Ee.toString()),Ie&&Re)return me(Ie);const ze=Date.now();fetch(I).then(Xe=>{if(Xe.ok){const ht=W?Xe.clone():null;return me(Xe,ht,ze)}return w(new bs(Xe.statusText,Xe.status,y.url))}).catch(Xe=>{Xe.name!=="AbortError"&&w(new Error(`${Xe.message} ${y.url}`))})},me=(Ee,Ie,Re)=>{(y.type==="arrayBuffer"?Ee.arrayBuffer():y.type==="json"?Ee.json():Ee.text()).then(ze=>{H||(Ie&&Re&&function(Xe,ht,ut){if(pl(),wa==null)return;const mt=si(ht.headers.get("Cache-Control")||"");if(mt["no-store"])return;const $t={status:ht.status,statusText:ht.statusText,headers:new Headers};ht.headers.forEach((or,cr)=>$t.headers.set(cr,or)),mt["max-age"]&&$t.headers.set("Expires",new Date(ut+1e3*mt["max-age"]).toUTCString());const Ut=$t.headers.get("Expires");if(!Ut||new Date(Ut).getTime()-ut<42e4)return;let Ht=zo(Xe.url,{persistentParams:Pa});if(ht.status===206){const or=Xe.headers.get("Range");if(!or)return;$t.status=200,Ht=Hs(Ht,{range:or})}(function(or,cr){if(Sl===void 0)try{new Response(new ReadableStream),Sl=!0}catch{Sl=!1}Sl?cr(or.body):or.blob().then(cr).catch(Gr=>Qi(Gr.message))})(ht,or=>{const cr=new Response((Gr=ht.status)!==200&&Gr!==404&&[101,103,204,205,304].includes(Gr)?null:or,$t);var Gr;pl(),wa!=null&&wa.then(xr=>xr.put(Ht,cr)).catch(xr=>Qi(xr.message))})}(I,Ie,Re),L=!0,w(null,ze,Ee.headers.get("Cache-Control"),Ee.headers.get("Expires")))}).catch(ze=>{H||w(new Error(ze.message))})};return W?function(Ee,Ie){if(pl(),wa==null)return Ie(null);wa.then(Re=>{let ze=zo(Ee.url,{persistentParams:Pa});const Xe=Ee.headers.get("Range");Xe&&(ze=Hs(ze,{range:Xe})),Re.match(ze).then(ht=>{const ut=function(mt){if(!mt)return!1;const $t=new Date(mt.headers.get("Expires")||0),Ut=si(mt.headers.get("Cache-Control")||"");return Number($t)>Date.now()&&!Ut["no-cache"]}(ht);Re.delete(ze).catch(Ie),ut&&Re.put(ze,ht.clone()).catch(Ie),Ie(null,ht,ut)}).catch(Ie)}).catch(Ie)}(I,ue):ue(null,null),{cancel:()=>{H=!0,L||T.abort()}}}(d,s);if(vn(self)&&self.worker.actor)return self.worker.actor.send("getResource",d,s,void 0,!0)}var u;return function(y,w){const T=new XMLHttpRequest;T.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(T.responseType="arraybuffer");for(const I in y.headers)T.setRequestHeader(I,y.headers[I]);return y.type==="json"&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials=y.credentials==="include",T.onerror=()=>{w(new Error(T.statusText))},T.onload=()=>{if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let I=T.response;if(y.type==="json")try{I=JSON.parse(T.response)}catch(L){return w(L)}w(null,I,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else w(new bs(T.statusText,T.status,y.url))},T.send(y.body),{cancel:()=>T.abort()}}(d,s)},Fu=function(d,s){return mu(nr(d,{type:"arrayBuffer"}),s)};function Ec(d){const s=document.createElement("a");return s.href=d,s.protocol===location.protocol&&s.host===location.host}const fh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Pu,gu;Pu=[],gu=0;const Ho=function(d,s){if(hc.supported&&(d.headers||(d.headers={}),d.headers.accept="image/webp,*/*"),gu>=Ji.MAX_PARALLEL_IMAGE_REQUESTS){const T={requestParameters:d,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Pu.push(T),T}gu++;let u=!1;const y=()=>{if(!u)for(u=!0,gu--;Pu.length&&gu<Ji.MAX_PARALLEL_IMAGE_REQUESTS;){const T=Pu.shift(),{requestParameters:I,callback:L,cancelled:H}=T;H||(T.cancel=Ho(I,L).cancel)}},w=Fu(d,(T,I,L,H)=>{y(),T?s(T):I&&(self.createImageBitmap?function(W,se){const ue=new Blob([new Uint8Array(W)],{type:"image/png"});createImageBitmap(ue).then(me=>{se(null,me)}).catch(me=>{se(new Error(`Could not load image because of ${me.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(I,(W,se)=>s(W,se,L,H)):function(W,se){const ue=new Image;ue.onload=()=>{se(null,ue),URL.revokeObjectURL(ue.src),ue.onload=null,requestAnimationFrame(()=>{ue.src=fh})},ue.onerror=()=>se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const me=new Blob([new Uint8Array(W)],{type:"image/png"});ue.src=W.byteLength?URL.createObjectURL(me):fh}(I,(W,se)=>s(W,se,L,H)))});return{cancel:()=>{w.cancel(),y()}}};var Ro,eu,Rh,Bc={exports:{}},Hc={exports:{}},Yu={exports:{}},dh=function(){if(Rh)return Bc.exports;Rh=1;var d=(Ro||(Ro=1,Hc.exports=function(u,y){var w,T,I,L,H,W,se,ue;for(T=u.length-(w=3&u.length),I=y,H=3432918353,W=461845907,ue=0;ue<T;)se=255&u.charCodeAt(ue)|(255&u.charCodeAt(++ue))<<8|(255&u.charCodeAt(++ue))<<16|(255&u.charCodeAt(++ue))<<24,++ue,I=27492+(65535&(L=5*(65535&(I=(I^=se=(65535&(se=(se=(65535&se)*H+(((se>>>16)*H&65535)<<16)&4294967295)<<15|se>>>17))*W+(((se>>>16)*W&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(L>>>16)&65535)<<16);switch(se=0,w){case 3:se^=(255&u.charCodeAt(ue+2))<<16;case 2:se^=(255&u.charCodeAt(ue+1))<<8;case 1:I^=se=(65535&(se=(se=(65535&(se^=255&u.charCodeAt(ue)))*H+(((se>>>16)*H&65535)<<16)&4294967295)<<15|se>>>17))*W+(((se>>>16)*W&65535)<<16)&4294967295}return I^=u.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0}),Hc.exports),s=(eu||(eu=1,Yu.exports=function(u,y){for(var w,T=u.length,I=y^T,L=0;T>=4;)w=1540483477*(65535&(w=255&u.charCodeAt(L)|(255&u.charCodeAt(++L))<<8|(255&u.charCodeAt(++L))<<16|(255&u.charCodeAt(++L))<<24))+((1540483477*(w>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),T-=4,++L;switch(T){case 3:I^=(255&u.charCodeAt(L+2))<<16;case 2:I^=(255&u.charCodeAt(L+1))<<8;case 1:I=1540483477*(65535&(I^=255&u.charCodeAt(L)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0}),Yu.exports);return Bc.exports=d,Bc.exports.murmur3=d,Bc.exports.murmur2=s,Bc.exports}(),Qa=Zn(dh);class tu{constructor(s,...u){nr(this,u[0]||{}),this.type=s}}class go extends tu{constructor(s,u={}){super("error",nr({error:s},u))}}function fc(d,s,u){u[d]&&u[d].indexOf(s)!==-1||(u[d]=u[d]||[],u[d].push(s))}function Pl(d,s,u){if(u&&u[d]){const y=u[d].indexOf(s);y!==-1&&u[d].splice(y,1)}}class Lu{on(s,u){return this._listeners=this._listeners||{},fc(s,u,this._listeners),this}off(s,u){return Pl(s,u,this._listeners),Pl(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},fc(s,u,this._oneTimeListeners),this):new Promise(y=>{this.once(s,y)})}fire(s,u){const y=typeof s=="string"?new tu(s,u):s,w=y.type;if(this.listens(w)){y.target=this;const T=this._listeners&&this._listeners[w]?this._listeners[w].slice():[];for(const H of T)H.call(this,y);const I=this._oneTimeListeners&&this._oneTimeListeners[w]?this._oneTimeListeners[w].slice():[];for(const H of I)Pl(w,H,this._oneTimeListeners),H.call(this,y);const L=this._eventedParent;L&&(nr(y,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),L.fire(y))}else y instanceof go&&console.error(y.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}class ol{constructor(s){typeof s=="string"?this.name=s:(this.name=s.name,this.iconsetId=s.iconsetId)}static from(s){return new ol(s)}static toString(s){return s.iconsetId?`${s.name}${s.iconsetId}`:s.name}static parse(s){const[u,y]=s.split("");return new ol({name:u,iconsetId:y})}static isEqual(s,u){return s.name===u.name&&s.iconsetId===u.iconsetId}toString(){return ol.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var ka,ae={},we=function(){if(ka)return ae;ka=1;var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(T){return(T=Math.round(T))<0?0:T>255?255:T}function u(T){return s(T[T.length-1]==="%"?parseFloat(T)/100*255:parseInt(T))}function y(T){return(I=T[T.length-1]==="%"?parseFloat(T)/100:parseFloat(T))<0?0:I>1?1:I;var I}function w(T,I,L){return L<0?L+=1:L>1&&(L-=1),6*L<1?T+(I-T)*L*6:2*L<1?I:3*L<2?T+(I-T)*(2/3-L)*6:T}try{ae.parseCSSColor=function(T){var I,L=T.replace(/ /g,"").toLowerCase();if(L in d)return d[L].slice();if(L[0]==="#")return L.length===4?(I=parseInt(L.substr(1),16))>=0&&I<=4095?[(3840&I)>>4|(3840&I)>>8,240&I|(240&I)>>4,15&I|(15&I)<<4,1]:null:L.length===7&&(I=parseInt(L.substr(1),16))>=0&&I<=16777215?[(16711680&I)>>16,(65280&I)>>8,255&I,1]:null;var H=L.indexOf("("),W=L.indexOf(")");if(H!==-1&&W+1===L.length){var se=L.substr(0,H),ue=L.substr(H+1,W-(H+1)).split(","),me=1;switch(se){case"rgba":if(ue.length!==4)return null;me=y(ue.pop());case"rgb":return ue.length!==3?null:[u(ue[0]),u(ue[1]),u(ue[2]),me];case"hsla":if(ue.length!==4)return null;me=y(ue.pop());case"hsl":if(ue.length!==3)return null;var Ee=(parseFloat(ue[0])%360+360)%360/360,Ie=y(ue[1]),Re=y(ue[2]),ze=Re<=.5?Re*(Ie+1):Re+Ie-Re*Ie,Xe=2*Re-ze;return[s(255*w(Xe,ze,Ee+1/3)),s(255*w(Xe,ze,Ee)),s(255*w(Xe,ze,Ee-1/3)),me];default:return null}}return null}}catch{}return ae}();class Le{constructor(s,u,y,w=1){this.r=s,this.g=u,this.b=y,this.a=w}static parse(s){if(!s)return;if(s instanceof Le)return s;if(typeof s!="string")return;const u=we.parseCSSColor(s);return u?new Le(u[0]/255,u[1]/255,u[2]/255,u[3]):void 0}toString(){const[s,u,y,w]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*s)},${Math.round(255*u)},${Math.round(255*y)},${w})`}toNonPremultipliedRenderColor(s){const{r:u,g:y,b:w,a:T}=this;return new ct(s,u,y,w,T)}toPremultipliedRenderColor(s){const{r:u,g:y,b:w,a:T}=this;return new ft(s,u*T,y*T,w*T,T)}clone(){return new Le(this.r,this.g,this.b,this.a)}}class $e{constructor(s,u,y,w,T,I=!1){if(this.premultiplied=!1,this.premultiplied=I,s){const L=s.image.height,H=L*L;this.premultiplied?(u=T===0?0:u/T*(L-1),y=T===0?0:y/T*(L-1),w=T===0?0:w/T*(L-1)):(u*=L-1,y*=L-1,w*=L-1);const W=Math.floor(u),se=Math.floor(y),ue=Math.floor(w),me=Math.ceil(u),Ee=Math.ceil(y),Ie=Math.ceil(w),Re=u-W,ze=y-se,Xe=w-ue,ht=s.image.data,ut=4*(W+se*H+ue*L),mt=4*(W+se*H+Ie*L),$t=4*(W+Ee*H+ue*L),Ut=4*(W+Ee*H+Ie*L),Ht=4*(me+se*H+ue*L),or=4*(me+se*H+Ie*L),cr=4*(me+Ee*H+ue*L),Gr=4*(me+Ee*H+Ie*L);if(ut<0||Gr>=ht.length)throw new Error("out of range");this.r=at(at(at(ht[ut],ht[mt],Xe),at(ht[$t],ht[Ut],Xe),ze),at(at(ht[Ht],ht[or],Xe),at(ht[cr],ht[Gr],Xe),ze),Re)/255*(this.premultiplied?T:1),this.g=at(at(at(ht[ut+1],ht[mt+1],Xe),at(ht[$t+1],ht[Ut+1],Xe),ze),at(at(ht[Ht+1],ht[or+1],Xe),at(ht[cr+1],ht[Gr+1],Xe),ze),Re)/255*(this.premultiplied?T:1),this.b=at(at(at(ht[ut+2],ht[mt+2],Xe),at(ht[$t+2],ht[Ut+2],Xe),ze),at(at(ht[Ht+2],ht[or+2],Xe),at(ht[cr+2],ht[Gr+2],Xe),ze),Re)/255*(this.premultiplied?T:1),this.a=T}else this.r=u,this.g=y,this.b=w,this.a=T}toArray(){const{r:s,g:u,b:y,a:w}=this;return[255*s,255*u,255*y,w]}toHslaArray(){let{r:s,g:u,b:y,a:w}=this;if(this.premultiplied){if(w===0)return[0,0,0,0];s/=w,u/=w,y/=w}const T=Math.min(Math.max(s,0),1),I=Math.min(Math.max(u,0),1),L=Math.min(Math.max(y,0),1),H=Math.min(T,I,L),W=Math.max(T,I,L),se=(H+W)/2;if(H===W)return[0,0,100*se,w];const ue=W-H,me=se>.5?ue/(2-W-H):ue/(W+H);let Ee=0;return W===T?Ee=(I-L)/ue+(I<L?6:0):W===I?Ee=(L-T)/ue+2:W===L&&(Ee=(T-I)/ue+4),Ee*=60,[Math.min(Math.max(Ee,0),360),Math.min(Math.max(100*me,0),100),Math.min(Math.max(100*se,0),100),w]}toArray01(){const{r:s,g:u,b:y,a:w}=this;return[s,u,y,w]}toArray01Scaled(s){const{r:u,g:y,b:w}=this;return[u*s,y*s,w*s]}toArray01Linear(){const{r:s,g:u,b:y,a:w}=this;return[Math.pow(s,2.2),Math.pow(u,2.2),Math.pow(y,2.2),w]}}class ct extends $e{constructor(s,u,y,w,T){super(s,u,y,w,T,!1)}}class ft extends $e{constructor(s,u,y,w,T){super(s,u,y,w,T,!0)}}function at(d,s,u){return d*(1-u)+s*u}function Er(d,s,u){return d.map((y,w)=>at(y,s[w],u))}Le.black=new Le(0,0,0,1),Le.white=new Le(1,1,1,1),Le.transparent=new Le(0,0,0,0),Le.red=new Le(1,0,0,1),Le.blue=new Le(0,0,1,1);var hr=Object.freeze({__proto__:null,array:Er,color:function(d,s,u){return new Le(at(d.r,s.r,u),at(d.g,s.g,u),at(d.b,s.b,u),at(d.a,s.a,u))},number:at});function Wr(d,...s){for(const u of s)for(const y in u)d[y]=u[y];return d}class bn extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class Hn{constructor(s,u=[]){this.parent=s,this.bindings={};for(const[y,w]of u)this.bindings[y]=w}concat(s){return new Hn(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const cn={kind:"null"},Hr={kind:"number"},ei={kind:"string"},Ti={kind:"boolean"},vs={kind:"color"},ma={kind:"object"},Fe={kind:"value"},pt={kind:"collator"},lr={kind:"formatted"},gr={kind:"resolvedImage"};function Kr(d,s){return{kind:"array",itemType:d,N:s}}function Zr(d){if(d.kind==="array"){const s=Zr(d.itemType);return typeof d.N=="number"?`array<${s}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${s}>`}return d.kind}const Gn=[cn,Hr,ei,Ti,vs,lr,ma,Kr(Fe),gr];function Hi(d,s){if(s.kind==="error")return null;if(d.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Hi(d.itemType,s.itemType))&&(typeof d.N!="number"||d.N===s.N))return null}else{if(d.kind===s.kind)return null;if(d.kind==="value"){for(const u of Gn)if(!Hi(u,s))return null}}return`Expected ${Zr(d)} but found ${Zr(s)} instead.`}function ps(d,s){return s.some(u=>u.kind===d.kind)}function ws(d,s){return s.some(u=>u==="null"?d===null:u==="array"?Array.isArray(d):u==="object"?d&&!Array.isArray(d)&&typeof d=="object":u===typeof d)}function Ns(d,s){return d.kind==="array"&&s.kind==="array"?d.N===s.N&&Ns(d.itemType,s.itemType):d.kind===s.kind}class Ws{constructor(s,u,y){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class vo{constructor(s,u,y,w,T){this.text=s.normalize?s.normalize():s,this.image=u,this.scale=y,this.fontStack=w,this.textColor=T}}class qs{constructor(s){this.sections=s}static fromString(s){return new qs([new vo(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||!!s.image&&s.image.hasPrimary())}static factory(s){return s instanceof qs?s:qs.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const u of this.sections){if(u.image){const w=u.image.getPrimary().id.toString();s.push(["image",w]);continue}s.push(u.text);const y={};u.fontStack&&(y["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(y["font-scale"]=u.scale),u.textColor&&(y["text-color"]=["rgba"].concat(u.textColor.toNonPremultipliedRenderColor(null).toArray())),s.push(y)}return s}}class as{constructor(s,u={}){if(this.id=ol.from(s),this.options=Object.assign({},u),u.transform){const{a:y,b:w,c:T,d:I,e:L,f:H}=u.transform;this.options.transform=new DOMMatrix([y,w,T,I,L,H])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:s,b:u,c:y,d:w,e:T,f:I}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:s,b:u,c:y,d:w,e:T,f:I}})}static parse(s){let u,y,w,T;try{({name:u,iconsetId:y,params:w,transform:T}=JSON.parse(s)||{})}catch{return null}if(!u)return null;const{a:I,b:L,c:H,d:W,e:se,f:ue}=T||{};return new as({name:u,iconsetId:y},{params:w,transform:new DOMMatrix([I,L,H,W,se,ue])})}scaleSelf(s,u){return this.options.transform.scaleSelf(s,u),this}}class Qo{constructor(s,u,y,w,T=!1){this.primaryId=ol.from(s),this.primaryOptions=u,y&&(this.secondaryId=ol.from(y)),this.secondaryOptions=w,this.available=T}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new as(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new as(this.secondaryId,this.secondaryOptions):null}static from(s){return typeof s=="string"?Qo.build({name:s}):s}static build(s,u,y,w){return!s||typeof s=="object"&&!("name"in s)?null:new Qo(s,y,u,w)}}function Vo(d,s,u,y){return typeof d=="number"&&d>=0&&d<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[d,s,u,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[d,s,u,y]:[d,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Li(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Le||d instanceof Ws||d instanceof qs||d instanceof Qo)return!0;if(Array.isArray(d)){for(const s of d)if(!Li(s))return!1;return!0}if(typeof d=="object"){for(const s in d)if(!Li(d[s]))return!1;return!0}return!1}function Sn(d){if(d===null)return cn;if(typeof d=="string")return ei;if(typeof d=="boolean")return Ti;if(typeof d=="number")return Hr;if(d instanceof Le)return vs;if(d instanceof Ws)return pt;if(d instanceof qs)return lr;if(d instanceof Qo)return gr;if(Array.isArray(d)){const s=d.length;let u;for(const y of d){const w=Sn(y);if(u){if(u===w)continue;u=Fe;break}u=w}return Kr(u||Fe,s)}return ma}function ia(d){const s=typeof d;return d===null?"":s==="string"||s==="number"||s==="boolean"?String(d):d instanceof qs||d instanceof Qo||d instanceof Le?d.toString():JSON.stringify(d)}class Ii{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(s.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Li(s[1]))return u.error("invalid value");const y=s[1];let w=Sn(y);const T=u.expectedType;return w.kind!=="array"||w.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(w=T),new Ii(w,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Le?["rgba"].concat(this.value.toNonPremultipliedRenderColor(null).toArray()):this.value instanceof qs?this.value.serialize():this.value}}class As{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const sa={string:ei,number:Hr,boolean:Ti,object:ma};class Ai{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let y,w=1;const T=s[0];if(T==="array"){let L,H;if(s.length>2){const W=s[1];if(typeof W!="string"||!(W in sa)||W==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);L=sa[W],w++}else L=Fe;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);H=s[2],w++}y=Kr(L,H)}else y=sa[T];const I=[];for(;w<s.length;w++){const L=u.parse(s[w],w,Fe);if(!L)return null;I.push(L)}return new Ai(y,I)}evaluate(s){for(let u=0;u<this.args.length;u++){const y=this.args[u].evaluate(s);if(!Hi(this.type,Sn(y)))return y;if(u===this.args.length-1)throw new As(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${Zr(Sn(y))} but was expected to be of type ${Zr(this.type)}.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,u=[s.kind];if(s.kind==="array"){const y=s.itemType;if(y.kind==="string"||y.kind==="number"||y.kind==="boolean"){u.push(y.kind);const w=s.N;(typeof w=="number"||this.args.length>1)&&u.push(w)}}return u.concat(this.args.map(y=>y.serialize()))}}class aa{constructor(s){this.type=lr,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const y=s[1];if(!Array.isArray(y)&&typeof y=="object")return u.error("First argument must be an image or text section.");const w=[];let T=!1;for(let I=1;I<=s.length-1;++I){const L=s[I];if(T&&typeof L=="object"&&!Array.isArray(L)){T=!1;let H=null;if(L["font-scale"]&&(H=u.parseObjectValue(L["font-scale"],I,"font-scale",Hr),!H))return null;let W=null;if(L["text-font"]&&(W=u.parseObjectValue(L["text-font"],I,"text-font",Kr(ei)),!W))return null;let se=null;if(L["text-color"]&&(se=u.parseObjectValue(L["text-color"],I,"text-color",vs),!se))return null;const ue=w[w.length-1];ue.scale=H,ue.font=W,ue.textColor=se}else{const H=u.parse(s[I],I,Fe);if(!H)return null;const W=H.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,w.push({content:H,scale:null,font:null,textColor:null})}}return new aa(w)}evaluate(s){return new qs(this.sections.map(u=>{const y=u.content.evaluate(s);return Ns(Sn(y),gr)?new vo("",y,null,null,null):new vo(ia(y),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)}))}eachChild(s){for(const u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const u of this.sections){s.push(u.content.serialize());const y={};u.scale&&(y["font-scale"]=u.scale.serialize()),u.font&&(y["text-font"]=u.font.serialize()),u.textColor&&(y["text-color"]=u.textColor.serialize()),s.push(y)}return s}}class ru{constructor(s,u,y,w){this._imageWarnHistory={},this.type=gr,this.namePrimary=s,this.nameSecondary=u,y&&(this.paramsPrimary=y.params,this.iconsetIdPrimary=y.iconset?y.iconset.id:void 0),w&&(this.paramsSecondary=w.params,this.iconsetIdSecondary=w.iconset?w.iconset.id:void 0)}static parse(s,u){if(s.length<2)return u.error("Expected two or more arguments.");let y=1;const w=[];function T(){if(y<s.length){const L=u.parse(s[y],y++,ei);return L?(w.push({image:L,options:{}}),!0):(u.error(w.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function I(){if(y<s.length){const H=s[y];if((L=H)===null||typeof L!="object"||Array.isArray(L))return!0;const W=H.params,se=H.iconset,ue=u.concat(y);if(!W&&!se)return y++,!0;if(W){if(typeof W!="object"||W.constructor!==Object)return ue.error('Image options "params" should be an object'),!1;const me={},Ee=ue.concat(void 0,"params");for(const Ie in W){if(!Ie)return Ee.error("Image parameter name should be non-empty"),!1;const Re=Ee.concat(void 0,Ie).parse(W[Ie],void 0,vs,void 0,{typeAnnotation:"coerce"});if(!Re)return!1;me[Ie]=Re}w[w.length-1].options.params=me}if(se){if(typeof se!="object"||se.constructor!==Object)return ue.error('Image options "iconset" should be an object'),!1;if(!se.id)return ue.error('Image options "iconset" should have an "id" property'),!1;w[w.length-1].options.iconset=se}return y++,!0}var L;return!0}for(let L=0;L<2;L++)if(!T()||!I())return;return new ru(w[0].image,w[1]?w[1].image:void 0,w[0].options,w[1]?w[1].options:void 0)}evaluateParams(s,u){const y={};if(u){for(const w in u)if(u[w])try{y[w]=u[w].evaluate(s)}catch{continue}if(Object.keys(y).length!==0)return{params:y}}}evaluate(s){const u={name:this.namePrimary.evaluate(s),iconsetId:this.iconsetIdPrimary},y=this.nameSecondary?{name:this.nameSecondary.evaluate(s),iconsetId:this.iconsetIdSecondary}:void 0,w=Qo.build(u,y,this.paramsPrimary?this.evaluateParams(s,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(s,this.paramsSecondary):void 0);if(w&&s.availableImages){const T=w.getPrimary().id;if(w.available=s.availableImages.some(I=>ol.isEqual(I,T)),w.available){const I=w.getSecondary()?w.getSecondary().id:null;I&&(w.available=s.availableImages.some(L=>ol.isEqual(L,I)))}}return w}eachChild(s){if(s(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&s(this.paramsPrimary[u]);if(this.nameSecondary&&(s(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&s(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(s,u){const y={};if(u&&(y.iconset={id:u}),s){y.params={};for(const w in s)s[w]&&(y.params[w]=s[w].serialize())}return Object.keys(y).length>0?y:void 0}serialize(){const s=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&s.push(u)}if(this.nameSecondary&&(s.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&s.push(u)}return s}}function Tl(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}const al={"to-boolean":Ti,"to-color":vs,"to-number":Hr,"to-string":ei};class Us{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const y=s[0],w=[];let T=cn;if(y==="to-array"){if(!Array.isArray(s[1]))return null;const I=s[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);T=Kr(u.expectedType.itemType,I)}else{if(!(I>0&&Li(s[1][0])))return null;T=Kr(Sn(s[1][0]),I)}for(let L=0;L<I;L++){const H=s[1][L];let W;if(Tl(H)==="array")W=u.parse(H,void 0,T.itemType);else{const se=Tl(H);if(se!==T.itemType.kind)return u.error(`Expected ${T.itemType.kind} but found ${se}.`);W=u.registry.literal.parse(["literal",H===void 0?null:H],u)}if(!W)return null;w.push(W)}}else{if((y==="to-boolean"||y==="to-string")&&s.length!==2)return u.error("Expected one argument.");T=al[y];for(let I=1;I<s.length;I++){const L=u.parse(s[I],I,Fe);if(!L)return null;w.push(L)}}return new Us(T,w)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let u,y;for(const w of this.args){if(u=w.evaluate(s),y=null,u instanceof Le)return u;if(typeof u=="string"){const T=s.parseColor(u);if(T)return T}else if(Array.isArray(u)&&(y=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Vo(u[0],u[1],u[2],u[3]),!y))return new Le(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new As(y||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const y of this.args){if(u=y.evaluate(s),u===null)return 0;const w=Number(u);if(!isNaN(w))return w}throw new As(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?qs.fromString(ia(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?Qo.build(ia(this.args[0].evaluate(s))):this.type.kind==="array"?this.args.map(u=>u.evaluate(s)):ia(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if(this.type.kind==="formatted")return new aa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ru(this.args[0]).serialize();const s=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{s.push(u.serialize())}),s}}const Xa=["Unknown","Point","LineString","Polygon"];class jl{constructor(s,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=s,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(s){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:y,y:w}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(y*u-s[0])+this.featureDistanceData.bearing[1]*(w*u-s[1])}return 0}parseColor(s){let u=this._parseColorCache[s];return u||(u=this._parseColorCache[s]=Le.parse(s)),u}getConfig(s){return this.options?this.options.get(s):null}}class Sa{constructor(s,u,y,w,T){this.name=s,this.type=u,this._evaluate=y,this.args=w,this._overloadIndex=T}evaluate(s){if(!this._evaluate){const u=Sa.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,u){const y=s[0],w=Sa.definitions[y];if(!w)return u.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(w)?w[0]:w.type,I=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,L=[];let H=null,W=-1;for(const[se,ue]of I){if(Array.isArray(se)&&se.length!==s.length-1)continue;L.push(se),W++,H=new up(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const me=[];let Ee=!1;for(let Ie=1;Ie<s.length;Ie++){const Re=s[Ie],ze=Array.isArray(se)?se[Ie-1]:se.type,Xe=H.parse(Re,1+me.length,ze);if(!Xe){Ee=!0;break}me.push(Xe)}if(!Ee)if(Array.isArray(se)&&se.length!==me.length)H.error(`Expected ${se.length} arguments, but found ${me.length} instead.`);else{for(let Ie=0;Ie<me.length;Ie++){const Re=Array.isArray(se)?se[Ie]:se.type,ze=me[Ie];H.concat(Ie+1).checkSubtype(Re,ze.type)}if(H.errors.length===0)return new Sa(y,T,ue,me,W)}}if(L.length===1)u.errors.push(...H.errors);else{const se=(L.length?L:I.map(([me])=>me)).map(Al).join(" | "),ue=[];for(let me=1;me<s.length;me++){const Ee=u.parse(s[me],1+ue.length);if(!Ee)return null;ue.push(Zr(Ee.type))}u.error(`Expected arguments of type ${se}, but found (${ue.join(", ")}) instead.`)}return null}static register(s,u){Sa.definitions=u;for(const y in u)s[y]=Sa}}function Al(d){return Array.isArray(d)?`(${d.map(Zr).join(", ")})`:`(${Zr(d.type)}...)`}class Va{constructor(s,u,y){this.type=pt,this.locale=y,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(s.length!==2)return u.error("Expected one argument.");const y=s[1];if(typeof y!="object"||Array.isArray(y))return u.error("Collator options argument must be an object.");const w=y["case-sensitive"]===void 0?u.parse(!1,1,Ti):u.parseObjectValue(y["case-sensitive"],1,"case-sensitive",Ti);if(!w)return null;const T=y["diacritic-sensitive"]===void 0?u.parse(!1,1,Ti):u.parseObjectValue(y["diacritic-sensitive"],1,"diacritic-sensitive",Ti);if(!T)return null;let I=null;return y.locale&&(I=u.parseObjectValue(y.locale,1,"locale",ei),!I)?null:new Va(w,T,I)}evaluate(s){return new Ws(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}function Ca(d,s,u=0,y=d.length-1,w=ll){for(;y>u;){if(y-u>600){const H=y-u+1,W=s-u+1,se=Math.log(H),ue=.5*Math.exp(2*se/3),me=.5*Math.sqrt(se*ue*(H-ue)/H)*(W-H/2<0?-1:1);Ca(d,s,Math.max(u,Math.floor(s-W*ue/H+me)),Math.min(y,Math.floor(s+(H-W)*ue/H+me)),w)}const T=d[s];let I=u,L=y;for(yu(d,u,s),w(d[y],T)>0&&yu(d,u,y);I<L;){for(yu(d,I,L),I++,L--;w(d[I],T)<0;)I++;for(;w(d[L],T)>0;)L--}w(d[u],T)===0?yu(d,u,L):(L++,yu(d,L,y)),L<=s&&(u=L+1),s<=L&&(y=L-1)}}function yu(d,s,u){const y=d[s];d[s]=d[u],d[u]=y}function ll(d,s){return d<s?-1:d>s?1:0}function ec(d){let s=0;for(let u,y,w=0,T=d.length,I=T-1;w<T;I=w++)u=d[w],y=d[I],s+=(y.x-u.x)*(u.y+y.y);return s}function Ga(d,s){d[0]=Math.min(d[0],s[0]),d[1]=Math.min(d[1],s[1]),d[2]=Math.max(d[2],s[0]),d[3]=Math.max(d[3],s[1])}function bo(d,s){return!(d[0]<=s[0]||d[2]>=s[2]||d[1]<=s[1]||d[3]>=s[3])}function ml(d,s,u){const y=d[0]-s[0],w=d[1]-s[1],T=d[0]-u[0],I=d[1]-u[1];return y*I-T*w==0&&y*T<=0&&w*I<=0}function dc(d,s,u=!1){let y=!1;for(let L=0,H=s.length;L<H;L++){const W=s[L];for(let se=0,ue=W.length,me=ue-1;se<ue;me=se++){const Ee=W[me],Ie=W[se];if(ml(d,Ee,Ie))return u;(T=Ee)[1]>(w=d)[1]!=(I=Ie)[1]>w[1]&&w[0]<(I[0]-T[0])*(w[1]-T[1])/(I[1]-T[1])+T[0]&&(y=!y)}}var w,T,I;return y}function Wl(d,s,u,y){const w=y[0]-u[0],T=y[1]-u[1],I=(d[0]-u[0])*T-w*(d[1]-u[1]),L=(s[0]-u[0])*T-w*(s[1]-u[1]);return I>0&&L<0||I<0&&L>0}function ir(d,s,u,y){return(w=[y[0]-u[0],y[1]-u[1]])[0]*(T=[s[0]-d[0],s[1]-d[1]])[1]-w[1]*T[0]!=0&&!(!Wl(d,s,u,y)||!Wl(u,y,d,s));var w,T}function Lr(d){const s=new tr(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),u=new tr(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const y of d[0])s.x>y.x&&(s.x=y.x),s.y>y.y&&(s.y=y.y),u.x<y.x&&(u.x=y.x),u.y<y.y&&(u.y=y.y);return{min:s,max:u}}const rn=8192;function fn(d,s){const u=(180+d[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,w=Math.pow(2,s.z);return[Math.round(u*w*rn),Math.round(y*w*rn)]}function Kt(d,s){for(let u=0;u<s.length;u++)if(dc(d,s[u]))return!0;return!1}function Pr(d,s,u){for(const y of u)for(let w=0,T=y.length,I=T-1;w<T;I=w++)if(ir(d,s,y[I],y[w]))return!0;return!1}function Cr(d,s){for(let u=0;u<d.length;++u)if(!dc(d[u],s))return!1;for(let u=0;u<d.length-1;++u)if(Pr(d[u],d[u+1],s))return!1;return!0}function Nn(d,s){for(let u=0;u<s.length;u++)if(Cr(d,s[u]))return!0;return!1}function Qn(d,s,u){const y=[];for(let w=0;w<d.length;w++){const T=[];for(let I=0;I<d[w].length;I++){const L=fn(d[w][I],u);Ga(s,L),T.push(L)}y.push(T)}return y}function ki(d,s,u){const y=[];for(let w=0;w<d.length;w++){const T=Qn(d[w],s,u);y.push(T)}return y}function es(d,s,u,y){if(d[0]<u[0]||d[0]>u[2]){const w=.5*y;let T=d[0]-u[0]>w?-y:u[0]-d[0]>w?y:0;T===0&&(T=d[0]-u[2]>w?-y:u[2]-d[0]>w?y:0),d[0]+=T}Ga(s,d)}function Oi(d,s,u,y){const w=Math.pow(2,y.z)*rn,T=[y.x*rn,y.y*rn],I=[];if(!d)return I;for(const L of d)for(const H of L){const W=[H.x+T[0],H.y+T[1]];es(W,s,u,w),I.push(W)}return I}function Zs(d,s,u,y){const w=Math.pow(2,y.z)*rn,T=[y.x*rn,y.y*rn],I=[];if(!d)return I;for(const H of d){const W=[];for(const se of H){const ue=[se.x+T[0],se.y+T[1]];Ga(s,ue),W.push(ue)}I.push(W)}if(s[2]-s[0]<=w/2){(L=s)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(const H of I)for(const W of H)es(W,s,u,w)}var L;return I}class ms{constructor(s,u){this.type=Ti,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Li(s[1])){const y=s[1];if(y.type==="FeatureCollection")for(let w=0;w<y.features.length;++w){const T=y.features[w].geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new ms(y,y.features[w].geometry)}else if(y.type==="Feature"){const w=y.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new ms(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new ms(y,y)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,y){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(!I)return!1;if(y.type==="Polygon"){const L=Qn(y.coordinates,T,I),H=Oi(u.geometry(),w,T,I);if(!bo(w,T))return!1;for(const W of H)if(!dc(W,L))return!1}if(y.type==="MultiPolygon"){const L=ki(y.coordinates,T,I),H=Oi(u.geometry(),w,T,I);if(!bo(w,T))return!1;for(const W of H)if(!Kt(W,L))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,y){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(!I)return!1;if(y.type==="Polygon"){const L=Qn(y.coordinates,T,I),H=Zs(u.geometry(),w,T,I);if(!bo(w,T))return!1;for(const W of H)if(!Cr(W,L))return!1}if(y.type==="MultiPolygon"){const L=ki(y.coordinates,T,I),H=Zs(u.geometry(),w,T,I);if(!bo(w,T))return!1;for(const W of H)if(!Nn(W,L))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Js={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},xo=1/298.257223563,Za=xo*(2-xo),Ea=Math.PI/180;class Wa{static fromTile(s,u,y){const w=Math.PI*(1-2*(s+.5)/Math.pow(2,u)),T=Math.atan(.5*(Math.exp(w)-Math.exp(-w)))/Ea;return new Wa(T,y)}static get units(){return Js}constructor(s,u){if(s===void 0)throw new Error("No latitude given.");if(u&&!Js[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Js).join(", ")}`);const y=6378.137*Ea*(u?Js[u]:1),w=Math.cos(s*Ea),T=1/(1-Za*(1-w*w)),I=Math.sqrt(T);this.kx=y*I*w,this.ky=y*I*T*(1-Za)}distance(s,u){const y=cl(s[0]-u[0])*this.kx,w=(s[1]-u[1])*this.ky;return Math.sqrt(y*y+w*w)}bearing(s,u){const y=cl(u[0]-s[0])*this.kx;return Math.atan2(y,(u[1]-s[1])*this.ky)/Ea}destination(s,u,y){const w=y*Ea;return this.offset(s,Math.sin(w)*u,Math.cos(w)*u)}offset(s,u,y){return[s[0]+u/this.kx,s[1]+y/this.ky]}lineDistance(s){let u=0;for(let y=0;y<s.length-1;y++)u+=this.distance(s[y],s[y+1]);return u}area(s){let u=0;for(let y=0;y<s.length;y++){const w=s[y];for(let T=0,I=w.length,L=I-1;T<I;L=T++)u+=cl(w[T][0]-w[L][0])*(w[T][1]+w[L][1])*(y?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(s,u){let y=0;if(u<=0)return s[0];for(let w=0;w<s.length-1;w++){const T=s[w],I=s[w+1],L=this.distance(T,I);if(y+=L,y>u)return Vs(T,I,(u-(y-L))/L)}return s[s.length-1]}pointToSegmentDistance(s,u,y){let[w,T]=u,I=cl(y[0]-w)*this.kx,L=(y[1]-T)*this.ky;if(I!==0||L!==0){const H=(cl(s[0]-w)*this.kx*I+(s[1]-T)*this.ky*L)/(I*I+L*L);H>1?(w=y[0],T=y[1]):H>0&&(w+=I/this.kx*H,T+=L/this.ky*H)}return I=cl(s[0]-w)*this.kx,L=(s[1]-T)*this.ky,Math.sqrt(I*I+L*L)}pointOnLine(s,u){let y=1/0,w=s[0][0],T=s[0][1],I=0,L=0;for(let H=0;H<s.length-1;H++){let W=s[H][0],se=s[H][1],ue=cl(s[H+1][0]-W)*this.kx,me=(s[H+1][1]-se)*this.ky,Ee=0;ue===0&&me===0||(Ee=(cl(u[0]-W)*this.kx*ue+(u[1]-se)*this.ky*me)/(ue*ue+me*me),Ee>1?(W=s[H+1][0],se=s[H+1][1]):Ee>0&&(W+=ue/this.kx*Ee,se+=me/this.ky*Ee)),ue=cl(u[0]-W)*this.kx,me=(u[1]-se)*this.ky;const Ie=ue*ue+me*me;Ie<y&&(y=Ie,w=W,T=se,I=H,L=Ee)}return{point:[w,T],index:I,t:Math.max(0,Math.min(1,L))}}lineSlice(s,u,y){let w=this.pointOnLine(y,s),T=this.pointOnLine(y,u);if(w.index>T.index||w.index===T.index&&w.t>T.t){const W=w;w=T,T=W}const I=[w.point],L=w.index+1,H=T.index;!Ll(y[L],I[0])&&L<=H&&I.push(y[L]);for(let W=L+1;W<=H;W++)I.push(y[W]);return Ll(y[H],T.point)||I.push(T.point),I}lineSliceAlong(s,u,y){let w=0;const T=[];for(let I=0;I<y.length-1;I++){const L=y[I],H=y[I+1],W=this.distance(L,H);if(w+=W,w>s&&T.length===0&&T.push(Vs(L,H,(s-(w-W))/W)),w>=u)return T.push(Vs(L,H,(u-(w-W))/W)),T;w>s&&T.push(H)}return T}bufferPoint(s,u){const y=u/this.ky,w=u/this.kx;return[s[0]-w,s[1]-y,s[0]+w,s[1]+y]}bufferBBox(s,u){const y=u/this.ky,w=u/this.kx;return[s[0]-w,s[1]-y,s[2]+w,s[3]+y]}insideBBox(s,u){return cl(s[0]-u[0])>=0&&cl(s[0]-u[2])<=0&&s[1]>=u[1]&&s[1]<=u[3]}}function Ll(d,s){return d[0]===s[0]&&d[1]===s[1]}function Vs(d,s,u){const y=cl(s[0]-d[0]);return[d[0]+y*u,d[1]+(s[1]-d[1])*u]}function cl(d){for(;d<-180;)d+=360;for(;d>180;)d-=360;return d}class pc{constructor(s=[],u=(y,w)=>y<w?-1:y>w?1:0){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:u,compare:y}=this,w=u[s];for(;s>0;){const T=s-1>>1,I=u[T];if(y(w,I)>=0)break;u[s]=I,s=T}u[s]=w}_down(s){const{data:u,compare:y}=this,w=this.length>>1,T=u[s];for(;s<w;){let I=1+(s<<1);const L=I+1;if(L<this.length&&y(u[L],u[I])<0&&(I=L),y(u[I],T)>=0)break;u[s]=u[I],s=I}u[s]=T}}var tn=8192;function Oa(d,s){return s.dist-d.dist}const gl=100,ul=50;function Tc(d){const s=[1/0,1/0,-1/0,-1/0];if(s.length!==d.length)return!1;for(let u=0;u<s.length;u++)if(s[u]!==d[u])return!1;return!0}function tc(d){return d[1]-d[0]+1}function Il(d,s){const u=d[1]>=d[0]&&d[1]<s;return u||console.warn("Distance Expression: Index is out of range"),u}function Yh(d,s){if(d[0]>d[1])return[null,null];const u=tc(d);if(s){if(u===2)return[d,null];const y=Math.floor(u/2);return[[d[0],d[0]+y],[d[0]+y,d[1]]]}{if(u===1)return[d,null];const y=Math.floor(u/2)-1;return[[d[0],d[0]+y],[d[0]+y+1,d[1]]]}}function nu(d,s){const u=[1/0,1/0,-1/0,-1/0];if(!Il(s,d.length))return u;for(let y=s[0];y<=s[1];++y)Ga(u,d[y]);return u}function Nh(d){const s=[1/0,1/0,-1/0,-1/0];for(let u=0;u<d.length;++u)for(let y=0;y<d[u].length;++y)Ga(s,d[u][y]);return s}function yl(d,s,u){if(Tc(d)||Tc(s))return NaN;let y=0,w=0;return d[2]<s[0]&&(y=s[0]-d[2]),d[0]>s[2]&&(y=d[0]-s[2]),d[1]>s[3]&&(w=d[1]-s[3]),d[3]<s[1]&&(w=s[1]-d[3]),u.distance([0,0],[y,w])}function hs(d){return 360*d-180}function Bd(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function ph(d,s){const u=Math.pow(2,s.z),y=(d.y/tn+s.y)/u;return[hs((d.x/tn+s.x)/u),Bd(y)]}function _u(d,s){const u=[];for(let y=0;y<d.length;++y)u.push(ph(d[y],s));return u}function jh(d,s,u){const y=u.pointOnLine(s,d).point;return u.distance(d,y)}function Td(d,s,u,y,w){const T=u.slice(y[0],y[1]+1);let I=1/0;for(let L=s[0];L<=s[1];++L)if((I=Math.min(I,jh(d[L],T,w)))===0)return 0;return I}function Eo(d,s,u,y,w){const T=Math.min(w.pointToSegmentDistance(d,u,y),w.pointToSegmentDistance(s,u,y)),I=Math.min(w.pointToSegmentDistance(u,d,s),w.pointToSegmentDistance(y,d,s));return Math.min(T,I)}function FA(d,s,u,y,w){if(!Il(s,d.length)||!Il(y,u.length))return NaN;let T=1/0;for(let I=s[0];I<s[1];++I)for(let L=y[0];L<y[1];++L){if(ir(d[I],d[I+1],u[L],u[L+1]))return 0;T=Math.min(T,Eo(d[I],d[I+1],u[L],u[L+1],w))}return T}function Xf(d,s,u,y,w){if(!Il(s,d.length)||!Il(y,u.length))return NaN;let T=1/0;for(let I=s[0];I<=s[1];++I)for(let L=y[0];L<=y[1];++L)if((T=Math.min(T,w.distance(d[I],u[L])))===0)return T;return T}function Zf(d,s,u){if(dc(d,s,!0))return 0;let y=1/0;for(const w of s){const T=w.length;if(T<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(w[0]!==w[T-1]&&(y=Math.min(y,u.pointToSegmentDistance(d,w[T-1],w[0])))===0||(y=Math.min(y,jh(d,w,u)))===0)return y}return y}function Jf(d,s,u,y){if(!Il(s,d.length))return NaN;for(let T=s[0];T<=s[1];++T)if(dc(d[T],u,!0))return 0;let w=1/0;for(let T=s[0];T<s[1];++T)for(const I of u)for(let L=0,H=I.length,W=H-1;L<H;W=L++){if(ir(d[T],d[T+1],I[W],I[L]))return 0;w=Math.min(w,Eo(d[T],d[T+1],I[W],I[L],y))}return w}function Pf(d,s){for(const u of d)for(let y=0;y<=u.length-1;++y)if(dc(u[y],s,!0))return!0;return!1}function PA(d,s,u,y=1/0){const w=Nh(d),T=Nh(s);if(y!==1/0&&yl(w,T,u)>=y)return y;if(bo(w,T)){if(Pf(d,s))return 0}else if(Pf(s,d))return 0;let I=y;for(const L of d)for(let H=0,W=L.length,se=W-1;H<W;se=H++)for(const ue of s)for(let me=0,Ee=ue.length,Ie=Ee-1;me<Ee;Ie=me++){if(ir(L[se],L[H],ue[Ie],ue[me]))return 0;I=Math.min(I,Eo(L[se],L[H],ue[Ie],ue[me],u))}return I}function lp(d,s,u,y,w,T,I){if(T===null||I===null)return;const L=yl(nu(y,T),nu(w,I),u);L<s&&d.push({dist:L,range1:T,range2:I})}function LA(d,s,u,y,w=1/0){let T=Math.min(y.distance(d[0],u[0][0]),w);if(T===0)return T;const I=new pc([{dist:0,range1:[0,d.length-1],range2:[0,0]}],Oa),L=s?ul:gl,H=Nh(u);for(;I.length;){const W=I.pop();if(W.dist>=T)continue;const se=W.range1;if(tc(se)<=L){if(!Il(se,d.length))return NaN;if(s){const ue=Jf(d,se,u,y);if((T=Math.min(T,ue))===0)return T}else for(let ue=se[0];ue<=se[1];++ue){const me=Zf(d[ue],u,y);if((T=Math.min(T,me))===0)return T}}else{const ue=Yh(se,s);if(ue[0]!==null){const me=yl(nu(d,ue[0]),H,y);me<T&&I.push({dist:me,range1:ue[0],range2:[0,0]})}if(ue[1]!==null){const me=yl(nu(d,ue[1]),H,y);me<T&&I.push({dist:me,range1:ue[1],range2:[0,0]})}}}return T}function Ul(d,s,u,y,w,T=1/0){let I=Math.min(T,w.distance(d[0],u[0]));if(I===0)return I;const L=new pc([{dist:0,range1:[0,d.length-1],range2:[0,u.length-1]}],Oa),H=s?ul:gl,W=y?ul:gl;for(;L.length;){const se=L.pop();if(se.dist>=I)continue;const ue=se.range1,me=se.range2;if(tc(ue)<=H&&tc(me)<=W){if(!Il(ue,d.length)||!Il(me,u.length))return NaN;if(s&&y?I=Math.min(I,FA(d,ue,u,me,w)):s||y?s&&!y?I=Math.min(I,Td(u,me,d,ue,w)):!s&&y&&(I=Math.min(I,Td(d,ue,u,me,w))):I=Math.min(I,Xf(d,ue,u,me,w)),I===0)return I}else{const Ee=Yh(ue,s),Ie=Yh(me,y);lp(L,I,w,d,u,Ee[0],Ie[0]),lp(L,I,w,d,u,Ee[0],Ie[1]),lp(L,I,w,d,u,Ee[1],Ie[0]),lp(L,I,w,d,u,Ee[1],Ie[1])}}return I}function kl(d,s,u,y,w=1/0){let T=w;const I=nu(d,[0,d.length-1]);for(const L of u)if(!(T!==1/0&&yl(I,nu(L,[0,L.length-1]),y)>=T)&&(T=Math.min(T,Ul(d,s,L,!0,y,T)),T===0))return T;return T}function cp(d,s,u,y,w=1/0){let T=w;const I=nu(d,[0,d.length-1]);for(const L of u){if(T!==1/0&&yl(I,Nh(L),y)>=T)continue;const H=LA(d,s,L,y,T);if(isNaN(H))return H;if((T=Math.min(T,H))===0)return T}return T}function Gp(d){return d==="Point"||d==="MultiPoint"||d==="LineString"||d==="MultiLineString"||d==="Polygon"||d==="MultiPolygon"}class Xh{constructor(s,u){this.type=Hr,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${s.length-1} instead.`);if(Li(s[1])){const y=s[1];if(y.type==="FeatureCollection"){for(let w=0;w<y.features.length;++w)if(Gp(y.features[w].geometry.type))return new Xh(y,y.features[w].geometry)}else if(y.type==="Feature"){if(Gp(y.geometry.type))return new Xh(y,y.geometry)}else if(Gp(y.type))return new Xh(y,y)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(s){const u=s.geometry(),y=s.canonicalID();if(u!=null&&y!=null){if(s.geometryType()==="Point")return function(w,T,I){const L=[];for(const W of w)for(const se of W)L.push(ph(se,T));const H=new Wa(L[0][1],"meters");return I.type==="Point"||I.type==="MultiPoint"||I.type==="LineString"?Ul(L,!1,I.type==="Point"?[I.coordinates]:I.coordinates,I.type==="LineString",H):I.type==="MultiLineString"?kl(L,!1,I.coordinates,H):I.type==="Polygon"||I.type==="MultiPolygon"?cp(L,!1,I.type==="Polygon"?[I.coordinates]:I.coordinates,H):null}(u,y,this.geometries);if(s.geometryType()==="LineString")return function(w,T,I){const L=[];for(const W of w){const se=[];for(const ue of W)se.push(ph(ue,T));L.push(se)}const H=new Wa(L[0][0][1],"meters");if(I.type==="Point"||I.type==="MultiPoint"||I.type==="LineString")return kl(I.type==="Point"?[I.coordinates]:I.coordinates,I.type==="LineString",L,H);if(I.type==="MultiLineString"){let W=1/0;for(let se=0;se<I.coordinates.length;se++){const ue=kl(I.coordinates[se],!0,L,H,W);if(isNaN(ue))return ue;if((W=Math.min(W,ue))===0)return W}return W}if(I.type==="Polygon"||I.type==="MultiPolygon"){let W=1/0;for(let se=0;se<L.length;se++){const ue=cp(L[se],!0,I.type==="Polygon"?[I.coordinates]:I.coordinates,H,W);if(isNaN(ue))return ue;if((W=Math.min(W,ue))===0)return W}return W}return null}(u,y,this.geometries);if(s.geometryType()==="Polygon")return function(w,T,I){const L=[];for(const W of function(se,ue){const me=se.length;if(me<=1)return[se];const Ee=[];let Ie,Re;for(let ze=0;ze<me;ze++){const Xe=ec(se[ze]);Xe!==0&&(se[ze].area=Math.abs(Xe),Re===void 0&&(Re=Xe<0),Re===Xe<0?(Ie&&Ee.push(Ie),Ie=[se[ze]]):Ie.push(se[ze]))}return Ie&&Ee.push(Ie),Ee}(w)){const se=[];for(let ue=0;ue<W.length;++ue)se.push(_u(W[ue],T));L.push(se)}const H=new Wa(L[0][0][0][1],"meters");if(I.type==="Point"||I.type==="MultiPoint"||I.type==="LineString")return cp(I.type==="Point"?[I.coordinates]:I.coordinates,I.type==="LineString",L,H);if(I.type==="MultiLineString"){let W=1/0;for(let se=0;se<I.coordinates.length;se++){const ue=cp(I.coordinates[se],!0,L,H,W);if(isNaN(ue))return ue;if((W=Math.min(W,ue))===0)return W}return W}return I.type==="Polygon"||I.type==="MultiPolygon"?function(W,se,ue){let me=1/0;for(const Ee of W)for(const Ie of se){const Re=PA(Ee,Ie,ue,me);if(isNaN(Re))return Re;if((me=Math.min(me,Re))===0)return me}return me}(I.type==="Polygon"?[I.coordinates]:I.coordinates,L,H):null}(u,y,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Zh(d){if(d instanceof Sa&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof ms||d instanceof Xh)return!1;if(d instanceof Uh)return d.featureConstant;let s=!0;return d.eachChild(u=>{s&&!Zh(u)&&(s=!1)}),s}function Xu(d){if(d instanceof Sa&&d.name==="feature-state")return!1;let s=!0;return d.eachChild(u=>{s&&!Xu(u)&&(s=!1)}),s}function ku(d){if(d instanceof Uh)return new Set([d.key]);let s=new Set;return d.eachChild(u=>{s=new Set([...s,...ku(u)])}),s}function Jh(d,s){if(d instanceof Sa&&s.indexOf(d.name)>=0)return!1;let u=!0;return d.eachChild(y=>{u&&!Jh(y,s)&&(u=!1)}),u}function Lf(d,s,u){return[d,s,u].filter(Boolean).join("")}function ef(d,s){switch(d){case"string":return ia(s);case"number":return+s;case"boolean":return!!s;case"color":return Le.parse(s);case"formatted":return qs.fromString(ia(s));case"resolvedImage":return Qo.build(ia(s))}return s}function ed(d,s,u,y){return y!==void 0&&(d=y*Math.round(d/y)),s!==void 0&&d<s&&(d=s),u!==void 0&&d>u&&(d=u),d}class Uh{constructor(s,u,y,w=!1){this.type=s,this.key=u,this.scope=y,this.featureConstant=w}static parse(s,u){let y=u.expectedType;if(y==null&&(y=Fe),s.length<2||s.length>3)return u.error("Invalid number of arguments for 'config' expression.");const w=u.parse(s[1],1);if(!(w instanceof Ii))return u.error("Key name of 'config' expression must be a string literal.");let T,I=!0;const L=ia(w.value);if(s.length>=3){const H=u.parse(s[2],2);if(!(H instanceof Ii))return u.error("Scope of 'config' expression must be a string literal.");T=ia(H.value)}if(u.options){const H=Lf(L,T,u._scope),W=u.options.get(H);W&&(I=Zh(W.value||W.default))}return new Uh(y,L,T,I)}evaluate(s){const u=Lf(this.key,this.scope,s.scope),y=s.getConfig(u);if(!y)return null;const{type:w,value:T,values:I,minValue:L,maxValue:H,stepValue:W}=y,se=y.default.evaluate(s);let ue=se;if(T){const me=s.scope;s.scope=(me||"").split("").slice(1).join(""),ue=T.evaluate(s),s.scope=me}return w&&(ue=ef(w,ue)),ue===void 0||L===void 0&&H===void 0&&W===void 0||(typeof ue=="number"?ue=ed(ue,L,H,W):Array.isArray(ue)&&(ue=ue.map(me=>typeof me=="number"?ed(me,L,H,W):me))),T!==void 0&&ue!==void 0&&I&&!I.includes(ue)&&(ue=se,w&&(ue=ef(w,ue))),(w&&w!==this.type||ue!==void 0&&!Ns(Sn(ue),this.type))&&(ue=ef(this.type.kind,ue)),ue}eachChild(){}outputDefined(){return!1}serialize(){const s=["config",this.key];return this.scope&&s.concat(this.scope),s}}class zh{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const y=s[1];return u.scope.has(y)?new zh(y,u.scope.get(y)):u.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class up{constructor(s,u=[],y,w=new Hn,T=[],I,L){this.registry=s,this.path=u,this.key=u.map(H=>typeof H=="string"?`['${H}']`:`[${H}]`).join(""),this.scope=w,this.errors=T,this.expectedType=y,this._scope=I,this.options=L}parse(s,u,y,w,T={}){return u||y?this.concat(u,null,y,w)._parse(s,T):this._parse(s,T)}parseObjectValue(s,u,y,w,T,I={}){return this.concat(u,y,w,T)._parse(s,I)}_parse(s,u){function y(w,T,I){return I==="assert"?new Ai(T,[w]):I==="coerce"?new Us(T,[w]):w}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=typeof s[0]=="string"?this.registry[s[0]]:void 0;if(w){let T=w.parse(s,this);if(!T)return null;if(this.expectedType){const I=this.expectedType,L=T.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||L.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string"){if(this.checkSubtype(I,L))return null}else T=y(T,I,u.typeAnnotation||"coerce");else T=y(T,I,u.typeAnnotation||"assert")}if(!(T instanceof Ii)&&T.type.kind!=="resolvedImage"&&Ah(T)){const I=new jl(this._scope,this.options);try{T=new Ii(T.type,T.evaluate(I))}catch(L){return this.error(L.message),null}}return T}return Us.parse(["to-array",s],this)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,u,y,w){let T=typeof s=="number"?this.path.concat(s):this.path;T=typeof u=="string"?T.concat(u):T;const I=w?this.scope.concat(w):this.scope;return new up(this.registry,T,y||null,I,this.errors,this._scope,this.options)}error(s,...u){const y=`${this.key}${u.map(w=>`[${w}]`).join("")}`;this.errors.push(new bn(y,s))}checkSubtype(s,u){const y=Hi(s,u);return y&&this.error(y),y}}function Ah(d){if(d instanceof zh)return Ah(d.boundExpression);if(d instanceof Sa&&d.name==="error"||d instanceof Va||d instanceof ms||d instanceof Xh||d instanceof Uh)return!1;const s=d instanceof Us||d instanceof Ai;let u=!0;return d.eachChild(y=>{u=s?u&&Ah(y):u&&y instanceof Ii}),!!u&&Zh(d)&&Jh(d,["zoom","heatmap-density","worldview","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function iu(d,s){const u=d.length-1;let y,w,T=0,I=u,L=0;for(;T<=I;)if(L=Math.floor((T+I)/2),y=d[L],w=d[L+1],y<=s){if(L===u||s<w)return L;T=L+1}else{if(!(y>s))throw new As("Input is not a number.");I=L-1}return 0}class Ic{constructor(s,u,y){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(const[w,T]of y)this.labels.push(w),this.outputs.push(T)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");const y=u.parse(s[1],1,Hr);if(!y)return null;const w=[];let T=null;u.expectedType&&u.expectedType.kind!=="value"&&(T=u.expectedType);for(let I=1;I<s.length;I+=2){const L=I===1?-1/0:s[I],H=s[I+1],W=I,se=I+1;if(typeof L!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(w.length&&w[w.length-1][0]>=L)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ue=u.parse(H,se,T);if(!ue)return null;T=T||ue.type,w.push([L,ue])}return new Ic(T,y,w)}evaluate(s){const u=this.labels,y=this.outputs;if(u.length===1)return y[0].evaluate(s);const w=this.input.evaluate(s);if(w<=u[0])return y[0].evaluate(s);const T=u.length;return w>=u[T-1]?y[T-1].evaluate(s):y[iu(u,w)].evaluate(s)}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&s.push(this.labels[u]),s.push(this.outputs[u].serialize());return s}}const kA=.95047,td=1.08883,su=4/29,rc=6/29,Ot=3*rc*rc,mh=rc*rc*rc,tf=Math.PI/180,ou=180/Math.PI;function Bo(d){return d>mh?Math.pow(d,1/3):d/Ot+su}function hp(d){return d>rc?d*d*d:Ot*(d-su)}function Wp(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function kf(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Ou(d){const s=kf(d.r),u=kf(d.g),y=kf(d.b),w=Bo((.4124564*s+.3575761*u+.1804375*y)/kA),T=Bo((.2126729*s+.7151522*u+.072175*y)/1);return{l:116*T-16,a:500*(w-T),b:200*(T-Bo((.0193339*s+.119192*u+.9503041*y)/td)),alpha:d.a}}function au(d){let s=(d.l+16)/116,u=isNaN(d.a)?s:s+d.a/500,y=isNaN(d.b)?s:s-d.b/200;return s=1*hp(s),u=kA*hp(u),y=td*hp(y),new Le(Wp(3.2404542*u-1.5371385*s-.4985314*y),Wp(-.969266*u+1.8760108*s+.041556*y),Wp(.0556434*u-.2040259*s+1.0572252*y),d.alpha)}function fp(d,s,u){const y=s-d;return d+u*(y>180||y<-180?y-360*Math.round(y/360):y)}const rd={forward:Ou,reverse:au,interpolate:function(d,s,u){return{l:at(d.l,s.l,u),a:at(d.a,s.a,u),b:at(d.b,s.b,u),alpha:at(d.alpha,s.alpha,u)}}},nd={forward:function(d){const{l:s,a:u,b:y}=Ou(d),w=Math.atan2(y,u)*ou;return{h:w<0?w+360:w,c:Math.sqrt(u*u+y*y),l:s,alpha:d.a}},reverse:function(d){const s=d.h*tf,u=d.c;return au({l:d.l,a:Math.cos(s)*u,b:Math.sin(s)*u,alpha:d.alpha})},interpolate:function(d,s,u){return{h:fp(d.h,s.h,u),c:at(d.c,s.c,u),l:at(d.l,s.l,u),alpha:at(d.alpha,s.alpha,u)}}};var dp=Object.freeze({__proto__:null,hcl:nd,lab:rd});class Cl{constructor(s,u,y,w,T){this.type=s,this.operator=u,this.interpolation=y,this.input=w,this.labels=[],this.outputs=[];for(const[I,L]of T)this.labels.push(I),this.outputs.push(L)}static interpolationFactor(s,u,y,w){let T=0;if(s.name==="exponential")T=$p(u,s.base,y,w);else if(s.name==="linear")T=$p(u,1,y,w);else if(s.name==="cubic-bezier"){const I=s.controlPoints;T=new On(I[0],I[1],I[2],I[3]).solve($p(u,1,y,w))}return T}static parse(s,u){let[y,w,T,...I]=s;if(!Array.isArray(w)||w.length===0)return u.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const W=w[1];if(typeof W!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:W}}else{if(w[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const W=w.slice(1);if(W.length!==4||W.some(se=>typeof se!="number"||se<0||se>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:W}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length-1>3&&(s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(T=u.parse(T,2,Hr),!T)return null;const L=[];let H=null;y==="interpolate-hcl"||y==="interpolate-lab"?H=vs:u.expectedType&&u.expectedType.kind!=="value"&&(H=u.expectedType);for(let W=0;W<I.length;W+=2){const se=I[W],ue=I[W+1],me=W+3,Ee=W+4;if(typeof se!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',me);if(L.length&&L[L.length-1][0]>=se)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',me);const Ie=u.parse(ue,Ee,H);if(!Ie)return null;H=H||Ie.type,L.push([se,Ie])}return H.kind==="number"||H.kind==="color"||H.kind==="array"&&H.itemType.kind==="number"&&typeof H.N=="number"?new Cl(H,y,w,T,L):u.error(`Type ${Zr(H)} is not interpolatable.`)}evaluate(s){const u=this.labels,y=this.outputs;if(u.length===1)return y[0].evaluate(s);const w=this.input.evaluate(s);if(w<=u[0])return y[0].evaluate(s);const T=u.length;if(w>=u[T-1])return y[T-1].evaluate(s);const I=iu(u,w),L=Cl.interpolationFactor(this.interpolation,w,u[I],u[I+1]),H=y[I].evaluate(s),W=y[I+1].evaluate(s);return this.operator==="interpolate"?hr[this.type.kind.toLowerCase()](H,W,L):this.operator==="interpolate-hcl"?nd.reverse(nd.interpolate(nd.forward(H),nd.forward(W),L)):rd.reverse(rd.interpolate(rd.forward(H),rd.forward(W),L))}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,s,this.input.serialize()];for(let y=0;y<this.labels.length;y++)u.push(this.labels[y],this.outputs[y].serialize());return u}}function $p(d,s,u,y){const w=y-u,T=d-u;return w===0?0:s===1?T/w:(Math.pow(s,T)-1)/(Math.pow(s,w)-1)}class pp{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expectected at least one argument.");let y=null;const w=u.expectedType;w&&w.kind!=="value"&&(y=w);const T=[];for(const L of s.slice(1)){const H=u.parse(L,1+T.length,y,void 0,{typeAnnotation:"omit"});if(!H)return null;y=y||H.type,T.push(H)}const I=w&&T.some(L=>Hi(w,L.type));return new pp(I?Fe:y,T)}evaluate(s){let u,y=null,w=0;for(const T of this.args){if(w++,y=T.evaluate(s),y&&y instanceof Qo&&!y.available&&(u||(u=y),y=null,w===this.args.length))return u;if(y!==null)break}return y}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class Id{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const y=[];for(let T=1;T<s.length-1;T+=2){const I=s[T];if(typeof I!="string")return u.error(`Expected string, but found ${typeof I} instead.`,T);if(/[^a-zA-Z0-9_]/.test(I))return u.error("Variable names must contain only alphanumeric characters or '_'.",T);const L=u.parse(s[T+1],T+1);if(!L)return null;y.push([I,L])}const w=u.parse(s[s.length-1],s.length-1,u.expectedType,y);return w?new Id(y,w):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[u,y]of this.bindings)s.push(u,y.serialize());return s.push(this.result.serialize()),s}}class Ap{constructor(s,u,y){this.type=s,this.index=u,this.input=y}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=u.parse(s[1],1,Hr),w=u.parse(s[2],2,Kr(u.expectedType||Fe));return y&&w?new Ap(w.type.itemType,y,w):null}evaluate(s){const u=this.index.evaluate(s),y=this.input.evaluate(s);if(u<0)throw new As(`Array index out of bounds: ${u} < 0.`);if(u>=y.length)throw new As(`Array index out of bounds: ${u} > ${y.length-1}.`);if(u!==Math.floor(u))throw new As(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return y[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class mp{constructor(s,u,y){this.type=s,this.index=u,this.input=y}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=u.parse(s[1],1,Hr),w=u.parse(s[2],2,Kr(u.expectedType||Fe));return y&&w?new mp(w.type.itemType,y,w):null}evaluate(s){const u=this.index.evaluate(s),y=this.input.evaluate(s);if(u<0)throw new As(`Array index out of bounds: ${u} < 0.`);if(u>y.length-1)throw new As(`Array index out of bounds: ${u} > ${y.length-1}.`);if(u===Math.floor(u))return y[u];const w=Math.floor(u),T=Math.ceil(u),I=y[w],L=y[T];if(typeof I!="number"||typeof L!="number")throw new As(`Cannot interpolate between non-number values at index ${u}.`);const H=u-w;return I*(1-H)+L*H}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class lu{constructor(s,u){this.type=Ti,this.needle=s,this.haystack=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=u.parse(s[1],1,Fe),w=u.parse(s[2],2,Fe);return y&&w?ps(y.type,[Ti,ei,Hr,cn,Fe])?new lu(y,w):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(y.type)} instead`):null}evaluate(s){const u=this.needle.evaluate(s),y=this.haystack.evaluate(s);if(y==null)return!1;if(!ws(u,["boolean","string","number","null"]))throw new As(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(Sn(u))} instead.`);if(!ws(y,["string","array"]))throw new As(`Expected second argument to be of type array or string, but found ${Zr(Sn(y))} instead.`);return y.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class gp{constructor(s,u,y){this.type=Hr,this.needle=s,this.haystack=u,this.fromIndex=y}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const y=u.parse(s[1],1,Fe),w=u.parse(s[2],2,Fe);if(!y||!w)return null;if(!ps(y.type,[Ti,ei,Hr,cn,Fe]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(y.type)} instead`);if(s.length===4){const T=u.parse(s[3],3,Hr);return T?new gp(y,w,T):null}return new gp(y,w)}evaluate(s){const u=this.needle.evaluate(s),y=this.haystack.evaluate(s);if(!ws(u,["boolean","string","number","null"]))throw new As(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(Sn(u))} instead.`);if(!ws(y,["string","array"]))throw new As(`Expected second argument to be of type array or string, but found ${Zr(Sn(y))} instead.`);if(this.fromIndex){const w=this.fromIndex.evaluate(s);return y.indexOf(u,w)}return y.indexOf(u)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Md{constructor(s,u,y,w,T,I){this.inputType=s,this.type=u,this.input=y,this.cases=w,this.outputs=T,this.otherwise=I}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let y,w;u.expectedType&&u.expectedType.kind!=="value"&&(w=u.expectedType);const T={},I=[];for(let W=2;W<s.length-1;W+=2){let se=s[W];const ue=s[W+1];Array.isArray(se)||(se=[se]);const me=u.concat(W);if(se.length===0)return me.error("Expected at least one branch label.");for(const Ie of se){if(typeof Ie!="number"&&typeof Ie!="string")return me.error("Branch labels must be numbers or strings.");if(typeof Ie=="number"&&Math.abs(Ie)>Number.MAX_SAFE_INTEGER)return me.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ie=="number"&&Math.floor(Ie)!==Ie)return me.error("Numeric branch labels must be integer values.");if(y){if(me.checkSubtype(y,Sn(Ie)))return null}else y=Sn(Ie);if(T[String(Ie)]!==void 0)return me.error("Branch labels must be unique.");T[String(Ie)]=I.length}const Ee=u.parse(ue,W,w);if(!Ee)return null;w=w||Ee.type,I.push(Ee)}const L=u.parse(s[1],1,Fe);if(!L)return null;const H=u.parse(s[s.length-1],s.length-1,w);return H?L.type.kind!=="value"&&u.concat(1).checkSubtype(y,L.type)?null:new Md(y,w,L,T,I,H):null}evaluate(s){const u=this.input.evaluate(s);return(Ns(Sn(u),this.inputType)&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),y=[],w={};for(const I of u){const L=w[this.cases[I]];L===void 0?(w[this.cases[I]]=y.length,y.push([this.cases[I],[I]])):y[L][1].push(I)}const T=I=>this.inputType.kind==="number"?Number(I):I;for(const[I,L]of y)s.push(L.length===1?T(L[0]):L.map(T)),s.push(this.outputs[I].serialize());return s.push(this.otherwise.serialize()),s}}class Fd{constructor(s,u,y){this.type=s,this.branches=u,this.otherwise=y}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let y;u.expectedType&&u.expectedType.kind!=="value"&&(y=u.expectedType);const w=[];for(let I=1;I<s.length-1;I+=2){const L=u.parse(s[I],I,Ti);if(!L)return null;const H=u.parse(s[I+1],I+1,y);if(!H)return null;w.push([L,H]),y=y||H.type}const T=u.parse(s[s.length-1],s.length-1,y);return T?new Fd(y,w,T):null}evaluate(s){for(const[u,y]of this.branches)if(u.evaluate(s))return y.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[u,y]of this.branches)s(u),s(y);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class oe{constructor(s,u,y,w){this.type=s,this.input=u,this.beginIndex=y,this.endIndex=w}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const y=u.parse(s[1],1,Fe),w=u.parse(s[2],2,Hr);if(!y||!w)return null;if(!ps(y.type,[Kr(Fe),ei,Fe]))return u.error(`Expected first argument to be of type array or string, but found ${Zr(y.type)} instead`);if(s.length===4){const T=u.parse(s[3],3,Hr);return T?new oe(y.type,y,w,T):null}return new oe(y.type,y,w)}evaluate(s){const u=this.input.evaluate(s),y=this.beginIndex.evaluate(s);if(!ws(u,["string","array"]))throw new As(`Expected first argument to be of type array or string, but found ${Zr(Sn(u))} instead.`);if(this.endIndex){const w=this.endIndex.evaluate(s);return u.slice(y,w)}return u.slice(y)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}class be{constructor(s,u){this.type=Kr(ei),this.str=s,this.delimiter=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=u.parse(s[1],1,ei),w=u.parse(s[2],2,ei);return y&&w?new be(y,w):void 0}evaluate(s){const u=this.str.evaluate(s),y=this.delimiter.evaluate(s);return u.split(y)}eachChild(s){s(this.str),s(this.delimiter)}outputDefined(){return!1}serialize(){return["split",this.str.serialize(),this.delimiter.serialize()]}}function ke(d,s){return d==="=="||d==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function rt(d,s,u,y){return y.compare(s,u)===0}function gt(d,s,u){const y=d!=="=="&&d!=="!=";return class QD{constructor(T,I,L){this.type=Ti,this.lhs=T,this.rhs=I,this.collator=L,this.hasUntypedArgument=T.type.kind==="value"||I.type.kind==="value"}static parse(T,I){if(T.length!==3&&T.length!==4)return I.error("Expected two or three arguments.");const L=T[0];let H=I.parse(T[1],1,Fe);if(!H)return null;if(!ke(L,H.type))return I.concat(1).error(`"${L}" comparisons are not supported for type '${Zr(H.type)}'.`);let W=I.parse(T[2],2,Fe);if(!W)return null;if(!ke(L,W.type))return I.concat(2).error(`"${L}" comparisons are not supported for type '${Zr(W.type)}'.`);if(H.type.kind!==W.type.kind&&H.type.kind!=="value"&&W.type.kind!=="value")return I.error(`Cannot compare types '${Zr(H.type)}' and '${Zr(W.type)}'.`);y&&(H.type.kind==="value"&&W.type.kind!=="value"?H=new Ai(W.type,[H]):H.type.kind!=="value"&&W.type.kind==="value"&&(W=new Ai(H.type,[W])));let se=null;if(T.length===4){if(H.type.kind!=="string"&&W.type.kind!=="string"&&H.type.kind!=="value"&&W.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(se=I.parse(T[3],3,pt),!se)return null}return new QD(H,W,se)}evaluate(T){const I=this.lhs.evaluate(T),L=this.rhs.evaluate(T);if(y&&this.hasUntypedArgument){const H=Sn(I),W=Sn(L);if(H.kind!==W.kind||H.kind!=="string"&&H.kind!=="number")throw new As(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${H.kind}, ${W.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const H=Sn(I),W=Sn(L);if(H.kind!=="string"||W.kind!=="string")return s(T,I,L)}return this.collator?u(T,I,L,this.collator.evaluate(T)):s(T,I,L)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}serialize(){const T=[d];return this.eachChild(I=>{T.push(I.serialize())}),T}}}const xt=gt("==",function(d,s,u){return s===u},rt),Bt=gt("!=",function(d,s,u){return s!==u},function(d,s,u,y){return!rt(0,s,u,y)}),Lt=gt("<",function(d,s,u){return s<u},function(d,s,u,y){return y.compare(s,u)<0}),Wt=gt(">",function(d,s,u){return s>u},function(d,s,u,y){return y.compare(s,u)>0}),ar=gt("<=",function(d,s,u){return s<=u},function(d,s,u,y){return y.compare(s,u)<=0}),jr=gt(">=",function(d,s,u){return s>=u},function(d,s,u,y){return y.compare(s,u)>=0});class un{constructor(s,u,y,w,T,I){this.type=ei,this.number=s,this.locale=u,this.currency=y,this.unit=w,this.minFractionDigits=T,this.maxFractionDigits=I}static parse(s,u){if(s.length!==3)return u.error("Expected two arguments.");const y=u.parse(s[1],1,Hr);if(!y)return null;const w=s[2];if(typeof w!="object"||Array.isArray(w))return u.error("NumberFormat options argument must be an object.");let T=null;if(w.locale&&(T=u.parseObjectValue(w.locale,2,"locale",ei),!T))return null;let I=null;if(w.currency&&(I=u.parseObjectValue(w.currency,2,"currency",ei),!I))return null;let L=null;if(w.unit&&(L=u.parseObjectValue(w.unit,2,"unit",ei),!L))return null;let H=null;if(w["min-fraction-digits"]&&(H=u.parseObjectValue(w["min-fraction-digits"],2,"min-fraction-digits",Hr),!H))return null;let W=null;return w["max-fraction-digits"]&&(W=u.parseObjectValue(w["max-fraction-digits"],2,"max-fraction-digits",Hr),!W)?null:new un(y,T,I,L,H,W)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class hn{constructor(s){this.type=Hr,this.input=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);const y=u.parse(s[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Zr(y.type)} instead.`):new hn(y):null}evaluate(s){const u=this.input.evaluate(s);if(typeof u=="string"||Array.isArray(u))return u.length;throw new As(`Expected value to be of type string or array, but found ${Zr(Sn(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(u=>{s.push(u.serialize())}),s}}function en(d){return function(){d=1831565813+(d|=0)|0;let s=Math.imul(d^d>>>15,1|d);return s=s+Math.imul(s^s>>>7,61|s)^s,((s^s>>>14)>>>0)/4294967296}}const jn={"==":xt,"!=":Bt,">":Wt,"<":Lt,">=":jr,"<=":ar,array:Ai,at:Ap,"at-interpolated":mp,boolean:Ai,case:Fd,coalesce:pp,collator:Va,format:aa,image:ru,in:lu,"index-of":gp,interpolate:Cl,"interpolate-hcl":Cl,"interpolate-lab":Cl,length:hn,let:Id,literal:Ii,match:Md,number:Ai,"number-format":un,object:Ai,slice:oe,step:Ic,string:Ai,"to-boolean":Us,"to-color":Us,"to-number":Us,"to-string":Us,var:zh,within:ms,distance:Xh,config:Uh,split:be};function Dn(d,[s,u,y,w]){s=s.evaluate(d),u=u.evaluate(d),y=y.evaluate(d);const T=w?w.evaluate(d):1,I=Vo(s,u,y,T);if(I)throw new As(I);return new Le(s/255,u/255,y/255,T)}function Nr(d,[s,u,y,w]){s=s.evaluate(d),u=u.evaluate(d),y=y.evaluate(d);const T=w?w.evaluate(d):1,I=function(W,se,ue,me){return typeof W=="number"&&W>=0&&W<=360?typeof se=="number"&&se>=0&&se<=100&&typeof ue=="number"&&ue>=0&&ue<=100?me===void 0||typeof me=="number"&&me>=0&&me<=1?null:`Invalid hsla value [${[W,se,ue,me].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof me=="number"?[W,se,ue,me]:[W,se,ue]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof me=="number"?[W,se,ue,me]:[W,se,ue]).join(", ")}]: 'h' must be between 0 and 360.`}(s,u,y,T);if(I)throw new As(I);const L=`hsla(${s}, ${u}%, ${y}%, ${T})`,H=Le.parse(L);if(!H)throw new As(`Failed to parse HSLA color: ${L}`);return H}function qr(d,s){return d in s}function ri(d,s){const u=s[d];return u===void 0?null:u}function ci(d){return{type:d}}function ni(d){return{result:"success",value:d}}function Ni(d){return{result:"error",value:d}}function Fi(d,s){return!!d&&!!d.parameters&&d.parameters.indexOf(s)>-1}function Ss(d){return d["property-type"]==="data-driven"}function Pi(d){return Fi(d.expression,"measure-light")}function pa(d){return Fi(d.expression,"zoom")}function la(d){return!!d.expression&&d.expression.interpolated}function Fo(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function fi(d){return d}function Go(d,s){const u=s.type==="color",y=d.stops&&typeof d.stops[0][0]=="object",w=y||!(y||d.property!==void 0),T=d.type||(la(s)?"exponential":"interval");if(u&&((d=Wr({},d)).stops&&(d.stops=d.stops.map(W=>[W[0],Le.parse(W[1])])),d.default=Le.parse(d.default?d.default:s.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!dp[d.colorSpace])throw new Error(`Unknown color space: ${d.colorSpace}`);let I,L,H;if(T==="exponential")I=Qc;else if(T==="interval")I=ca;else if(T==="categorical"){I=ho,L=Object.create(null);for(const W of d.stops)L[W[0]]=W[1];H=typeof d.stops[0][0]}else{if(T!=="identity")throw new Error(`Unknown function type "${T}"`);I=Da}if(y){const W={},se=[];for(let Ee=0;Ee<d.stops.length;Ee++){const Ie=d.stops[Ee],Re=Ie[0].zoom;W[Re]===void 0&&(W[Re]={zoom:Re,type:d.type,property:d.property,default:d.default,stops:[]},se.push(Re)),W[Re].stops.push([Ie[0].value,Ie[1]])}const ue=[];for(const Ee of se)ue.push([W[Ee].zoom,Go(W[Ee],s)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Cl.interpolationFactor.bind(void 0,me),zoomStops:ue.map(Ee=>Ee[0]),evaluate:({zoom:Ee},Ie)=>Qc({stops:ue,base:d.base},s,Ee).evaluate(Ee,Ie)}}if(w){const W=T==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:Cl.interpolationFactor.bind(void 0,W),zoomStops:d.stops.map(se=>se[0]),evaluate:({zoom:se})=>I(d,s,se,L,H)}}return{kind:"source",evaluate(W,se){const ue=se&&se.properties?se.properties[d.property]:void 0;return ue===void 0?Jo(d.default,s.default):I(d,s,ue,L,H)}}}function Jo(d,s,u){return d!==void 0?d:s!==void 0?s:u!==void 0?u:void 0}function ho(d,s,u,y,w){return Jo(typeof u===w?y[u]:void 0,d.default,s.default)}function ca(d,s,u){if(Tl(u)!=="number")return Jo(d.default,s.default);const y=d.stops.length;if(y===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[y-1][0])return d.stops[y-1][1];const w=iu(d.stops.map(T=>T[0]),u);return d.stops[w][1]}function Qc(d,s,u){const y=d.base!==void 0?d.base:1;if(Tl(u)!=="number")return Jo(d.default,s.default);const w=d.stops.length;if(w===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[w-1][0])return d.stops[w-1][1];const T=iu(d.stops.map(se=>se[0]),u),I=function(se,ue,me,Ee){const Ie=Ee-me,Re=se-me;return Ie===0?0:ue===1?Re/Ie:(Math.pow(ue,Re)-1)/(Math.pow(ue,Ie)-1)}(u,y,d.stops[T][0],d.stops[T+1][0]),L=d.stops[T][1],H=d.stops[T+1][1];let W=hr[s.type]||fi;if(d.colorSpace&&d.colorSpace!=="rgb"){const se=dp[d.colorSpace];W=(ue,me)=>se.reverse(se.interpolate(se.forward(ue),se.forward(me),I))}return typeof L.evaluate=="function"?{evaluate(...se){const ue=L.evaluate.apply(void 0,se),me=H.evaluate.apply(void 0,se);if(ue!==void 0&&me!==void 0)return W(ue,me,I)}}:W(L,H,I)}function Da(d,s,u){return s.type==="color"?u=Le.parse(u):s.type==="formatted"?u=qs.fromString(u.toString()):s.type==="resolvedImage"?u=Qo.build(u.toString()):Tl(u)===s.type||s.type==="enum"&&s.values[u]||(u=void 0),Jo(u,d.default,s.default)}Sa.register(jn,{error:[{kind:"error"},[ei],(d,[s])=>{throw new As(s.evaluate(d))}],typeof:[ei,[Fe],(d,[s])=>Zr(Sn(s.evaluate(d)))],"to-rgba":[Kr(Hr,4),[vs],(d,[s])=>s.evaluate(d).toNonPremultipliedRenderColor(null).toArray()],"to-hsla":[Kr(Hr,4),[vs],(d,[s])=>s.evaluate(d).toNonPremultipliedRenderColor(null).toHslaArray()],rgb:[vs,[Hr,Hr,Hr],Dn],rgba:[vs,[Hr,Hr,Hr,Hr],Dn],hsl:[vs,[Hr,Hr,Hr],Nr],hsla:[vs,[Hr,Hr,Hr,Hr],Nr],has:{type:Ti,overloads:[[[ei],(d,[s])=>qr(s.evaluate(d),d.properties())],[[ei,ma],(d,[s,u])=>qr(s.evaluate(d),u.evaluate(d))]]},get:{type:Fe,overloads:[[[ei],(d,[s])=>ri(s.evaluate(d),d.properties())],[[ei,ma],(d,[s,u])=>ri(s.evaluate(d),u.evaluate(d))]]},"feature-state":[Fe,[ei],(d,[s])=>ri(s.evaluate(d),d.featureState||{})],properties:[ma,[],d=>d.properties()],"geometry-type":[ei,[],d=>d.geometryType()],worldview:[ei,[],d=>d.globals.worldview||""],id:[Fe,[],d=>d.id()],zoom:[Hr,[],d=>d.globals.zoom],pitch:[Hr,[],d=>d.globals.pitch||0],"distance-from-center":[Hr,[],d=>d.distanceFromCenter()],"measure-light":[Hr,[ei],(d,[s])=>d.measureLight(s.evaluate(d))],"heatmap-density":[Hr,[],d=>d.globals.heatmapDensity||0],"line-progress":[Hr,[],d=>d.globals.lineProgress||0],"raster-value":[Hr,[],d=>d.globals.rasterValue||0],"raster-particle-speed":[Hr,[],d=>d.globals.rasterParticleSpeed||0],"sky-radial-progress":[Hr,[],d=>d.globals.skyRadialProgress||0],accumulated:[Fe,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[Hr,ci(Hr),(d,s)=>{let u=0;for(const y of s)u+=y.evaluate(d);return u}],"*":[Hr,ci(Hr),(d,s)=>{let u=1;for(const y of s)u*=y.evaluate(d);return u}],"-":{type:Hr,overloads:[[[Hr,Hr],(d,[s,u])=>s.evaluate(d)-u.evaluate(d)],[[Hr],(d,[s])=>-s.evaluate(d)]]},"/":[Hr,[Hr,Hr],(d,[s,u])=>s.evaluate(d)/u.evaluate(d)],"%":[Hr,[Hr,Hr],(d,[s,u])=>s.evaluate(d)%u.evaluate(d)],ln2:[Hr,[],()=>Math.LN2],pi:[Hr,[],()=>Math.PI],e:[Hr,[],()=>Math.E],"^":[Hr,[Hr,Hr],(d,[s,u])=>Math.pow(s.evaluate(d),u.evaluate(d))],sqrt:[Hr,[Hr],(d,[s])=>Math.sqrt(s.evaluate(d))],log10:[Hr,[Hr],(d,[s])=>Math.log(s.evaluate(d))/Math.LN10],ln:[Hr,[Hr],(d,[s])=>Math.log(s.evaluate(d))],log2:[Hr,[Hr],(d,[s])=>Math.log(s.evaluate(d))/Math.LN2],sin:[Hr,[Hr],(d,[s])=>Math.sin(s.evaluate(d))],cos:[Hr,[Hr],(d,[s])=>Math.cos(s.evaluate(d))],tan:[Hr,[Hr],(d,[s])=>Math.tan(s.evaluate(d))],asin:[Hr,[Hr],(d,[s])=>Math.asin(s.evaluate(d))],acos:[Hr,[Hr],(d,[s])=>Math.acos(s.evaluate(d))],atan:[Hr,[Hr],(d,[s])=>Math.atan(s.evaluate(d))],min:[Hr,ci(Hr),(d,s)=>Math.min(...s.map(u=>u.evaluate(d)))],max:[Hr,ci(Hr),(d,s)=>Math.max(...s.map(u=>u.evaluate(d)))],abs:[Hr,[Hr],(d,[s])=>Math.abs(s.evaluate(d))],round:[Hr,[Hr],(d,[s])=>{const u=s.evaluate(d);return u<0?-Math.round(-u):Math.round(u)}],floor:[Hr,[Hr],(d,[s])=>Math.floor(s.evaluate(d))],ceil:[Hr,[Hr],(d,[s])=>Math.ceil(s.evaluate(d))],"filter-==":[Ti,[ei,Fe],(d,[s,u])=>d.properties()[s.value]===u.value],"filter-id-==":[Ti,[Fe],(d,[s])=>d.id()===s.value],"filter-type-==":[Ti,[ei],(d,[s])=>d.geometryType()===s.value],"filter-<":[Ti,[ei,Fe],(d,[s,u])=>{const y=d.properties()[s.value],w=u.value;return typeof y==typeof w&&y<w}],"filter-id-<":[Ti,[Fe],(d,[s])=>{const u=d.id(),y=s.value;return typeof u==typeof y&&u<y}],"filter->":[Ti,[ei,Fe],(d,[s,u])=>{const y=d.properties()[s.value],w=u.value;return typeof y==typeof w&&y>w}],"filter-id->":[Ti,[Fe],(d,[s])=>{const u=d.id(),y=s.value;return typeof u==typeof y&&u>y}],"filter-<=":[Ti,[ei,Fe],(d,[s,u])=>{const y=d.properties()[s.value],w=u.value;return typeof y==typeof w&&y<=w}],"filter-id-<=":[Ti,[Fe],(d,[s])=>{const u=d.id(),y=s.value;return typeof u==typeof y&&u<=y}],"filter->=":[Ti,[ei,Fe],(d,[s,u])=>{const y=d.properties()[s.value],w=u.value;return typeof y==typeof w&&y>=w}],"filter-id->=":[Ti,[Fe],(d,[s])=>{const u=d.id(),y=s.value;return typeof u==typeof y&&u>=y}],"filter-has":[Ti,[Fe],(d,[s])=>s.value in d.properties()],"filter-has-id":[Ti,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[Ti,[Kr(ei)],(d,[s])=>s.value.indexOf(d.geometryType())>=0],"filter-id-in":[Ti,[Kr(Fe)],(d,[s])=>s.value.indexOf(d.id())>=0],"filter-in-small":[Ti,[ei,Kr(Fe)],(d,[s,u])=>u.value.indexOf(d.properties()[s.value])>=0],"filter-in-large":[Ti,[ei,Kr(Fe)],(d,[s,u])=>function(y,w,T,I){for(;T<=I;){const L=T+I>>1;if(w[L]===y)return!0;w[L]>y?I=L-1:T=L+1}return!1}(d.properties()[s.value],u.value,0,u.value.length-1)],all:{type:Ti,overloads:[[[Ti,Ti],(d,[s,u])=>s.evaluate(d)&&u.evaluate(d)],[ci(Ti),(d,s)=>{for(const u of s)if(!u.evaluate(d))return!1;return!0}]]},any:{type:Ti,overloads:[[[Ti,Ti],(d,[s,u])=>s.evaluate(d)||u.evaluate(d)],[ci(Ti),(d,s)=>{for(const u of s)if(u.evaluate(d))return!0;return!1}]]},"!":[Ti,[Ti],(d,[s])=>!s.evaluate(d)],"is-supported-script":[Ti,[ei],(d,[s])=>{const u=d.globals&&d.globals.isSupportedScript;return!u||u(s.evaluate(d))}],upcase:[ei,[ei],(d,[s])=>s.evaluate(d).toUpperCase()],downcase:[ei,[ei],(d,[s])=>s.evaluate(d).toLowerCase()],concat:[ei,ci(Fe),(d,s)=>s.map(u=>ia(u.evaluate(d))).join("")],"resolved-locale":[ei,[pt],(d,[s])=>s.evaluate(d).resolvedLocale()],random:[Hr,[Hr,Hr,Fe],(d,s)=>{const[u,y,w]=s.map(I=>I.evaluate(d));if(u>y||u===y)return u;let T;if(typeof w=="string")T=function(I){let L=0;if(I.length===0)return L;for(let H=0;H<I.length;H++)L=(L<<5)-L+I.charCodeAt(H),L|=0;return L}(w);else{if(typeof w!="number")throw new As(`Invalid seed input: ${w}`);T=w}return u+en(T)()*(y-u)}]});class Wo{constructor(s,u,y,w){this.expression=s,this._warningHistory={},this._evaluator=new jl(y,w),this._defaultValue=u?function(T){return T.type==="color"&&(Fo(T.default)||Array.isArray(T.default))?new Le(0,0,0,0):T.type==="color"?Le.parse(T.default)||null:T.default===void 0?null:T.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=ku(s)}evaluateWithoutErrorHandling(s,u,y,w,T,I,L,H){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=y,this._evaluator.canonical=w||null,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=I,this._evaluator.featureTileCoord=L||null,this._evaluator.featureDistanceData=H||null,this.expression.evaluate(this._evaluator)}evaluate(s,u,y,w,T,I,L,H){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=y||null,this._evaluator.canonical=w||null,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=I||null,this._evaluator.featureTileCoord=L||null,this._evaluator.featureDistanceData=H||null;try{const W=this.expression.evaluate(this._evaluator);if(W==null||typeof W=="number"&&W!=W)return this._defaultValue;if(this._enumValues&&!(W in this._enumValues))throw new As(`Expected value to be one of ${Object.keys(this._enumValues).map(se=>JSON.stringify(se)).join(", ")}, but found ${JSON.stringify(W)} instead.`);return W}catch(W){return this._warningHistory[W.message]||(this._warningHistory[W.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${W.message}`)),this._defaultValue}}}function $o(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in jn}function zl(d,s,u,y){const w=new up(jn,[],s?function(I){const L={color:vs,string:ei,number:Hr,enum:ei,boolean:Ti,formatted:lr,resolvedImage:gr};return I.type==="array"?Kr(L[I.value]||Fe,I.length):L[I.type]}(s):void 0,void 0,void 0,u,y),T=w.parse(d,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return T?ni(new Wo(T,s,u,y)):Ni(w.errors)}class hl{constructor(s,u,y,w){this.kind=s,this._styleExpression=u,this.isLightConstant=y,this.isLineProgressConstant=w,this.isStateDependent=s!=="constant"&&!Xu(u.expression),this.configDependencies=ku(u.expression)}evaluateWithoutErrorHandling(s,u,y,w,T,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,y,w,T,I)}evaluate(s,u,y,w,T,I){return this._styleExpression.evaluate(s,u,y,w,T,I)}}class $a{constructor(s,u,y,w,T,I){this.kind=s,this.zoomStops=y,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!Xu(u.expression),this.isLightConstant=T,this.isLineProgressConstant=I,this.configDependencies=ku(u.expression),this.interpolationType=w}evaluateWithoutErrorHandling(s,u,y,w,T,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,y,w,T,I)}evaluate(s,u,y,w,T,I){return this._styleExpression.evaluate(s,u,y,w,T,I)}interpolationFactor(s,u,y){return this.interpolationType?Cl.interpolationFactor(this.interpolationType,s,u,y):0}}function ja(d,s,u,y){if((d=zl(d,s,u,y)).result==="error")return d;const w=d.value.expression,T=Zh(w);if(!T&&!Ss(s))return Ni([new bn("","data expressions not supported")]);const I=Jh(w,["zoom","pitch","distance-from-center"]);if(!I&&!pa(s))return Ni([new bn("","zoom expressions not supported")]);const L=Jh(w,["measure-light"]);if(!L&&!Pi(s))return Ni([new bn("","measure-light expression not supported")]);const H=Jh(w,["line-progress"]);if(!H&&!function(ue){return Fi(ue.expression,"line-progress")}(s))return Ni([new bn("","line-progress expression not supported")]);const W=s.expression&&s.expression.relaxZoomRestriction,se=$l(w);return se||I||W?se instanceof bn?Ni([se]):se instanceof Cl&&!la(s)?Ni([new bn("",'"interpolate" expressions cannot be used with this property')]):ni(se?new $a(T&&H?"camera":"composite",d.value,se.labels,se instanceof Cl?se.interpolation:void 0,L,H):new hl(T&&H?"constant":"source",d.value,L,H)):Ni([new bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Ra{constructor(s,u){this._parameters=s,this._specification=u,Wr(this,Go(this._parameters,this._specification))}static deserialize(s){return new Ra(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function $l(d){let s=null;if(d instanceof Id)s=$l(d.result);else if(d instanceof pp){for(const u of d.args)if(s=$l(u),s)break}else(d instanceof Ic||d instanceof Cl)&&d.input instanceof Sa&&d.input.name==="zoom"&&(s=d);return s instanceof bn||d.eachChild(u=>{const y=$l(u);y instanceof bn?s=y:s&&y&&s!==y&&(s=new bn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}var Ja,Ml,Zu=function(){if(Ml)return Ja;Ml=1,Ja=s;var d=3;function s(u,y,w){var T=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var I=new Int32Array(this.arrayBuffer);u=I[0],this.d=(y=I[1])+2*(w=I[2]);for(var L=0;L<this.d*this.d;L++){var H=I[d+L],W=I[d+L+1];T.push(H===W?null:I.subarray(H,W))}var se=I[d+T.length+1];this.keys=I.subarray(I[d+T.length],se),this.bboxes=I.subarray(se),this.insert=this._insertReadonly}else{this.d=y+2*w;for(var ue=0;ue<this.d*this.d;ue++)T.push([]);this.keys=[],this.bboxes=[]}this.n=y,this.extent=u,this.padding=w,this.scale=y/u,this.uid=0;var me=w/y*u;this.min=-me,this.max=u+me}return s.prototype.insert=function(u,y,w,T,I){this._forEachCell(y,w,T,I,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(T),this.bboxes.push(I)},s.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},s.prototype._insertCell=function(u,y,w,T,I,L){this.cells[I].push(L)},s.prototype.query=function(u,y,w,T,I){var L=this.min,H=this.max;if(u<=L&&y<=L&&H<=w&&H<=T&&!I)return Array.prototype.slice.call(this.keys);var W=[];return this._forEachCell(u,y,w,T,this._queryCell,W,{},I),W},s.prototype._queryCell=function(u,y,w,T,I,L,H,W){var se=this.cells[I];if(se!==null)for(var ue=this.keys,me=this.bboxes,Ee=0;Ee<se.length;Ee++){var Ie=se[Ee];if(H[Ie]===void 0){var Re=4*Ie;(W?W(me[Re+0],me[Re+1],me[Re+2],me[Re+3]):u<=me[Re+2]&&y<=me[Re+3]&&w>=me[Re+0]&&T>=me[Re+1])?(H[Ie]=!0,L.push(ue[Ie])):H[Ie]=!1}}},s.prototype._forEachCell=function(u,y,w,T,I,L,H,W){for(var se=this._convertToCellCoord(u),ue=this._convertToCellCoord(y),me=this._convertToCellCoord(w),Ee=this._convertToCellCoord(T),Ie=se;Ie<=me;Ie++)for(var Re=ue;Re<=Ee;Re++){var ze=this.d*Re+Ie;if((!W||W(this._convertFromCellCoord(Ie),this._convertFromCellCoord(Re),this._convertFromCellCoord(Ie+1),this._convertFromCellCoord(Re+1)))&&I.call(this,u,y,w,T,ze,L,H,W))return}},s.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},s.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},s.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,y=d+this.cells.length+1+1,w=0,T=0;T<this.cells.length;T++)w+=this.cells[T].length;var I=new Int32Array(y+w+this.keys.length+this.bboxes.length);I[0]=this.extent,I[1]=this.n,I[2]=this.padding;for(var L=y,H=0;H<u.length;H++){var W=u[H];I[d+H]=L,I.set(W,L),L+=W.length}return I[d+u.length]=L,I.set(this.keys,L),I[d+u.length+1]=L+=this.keys.length,I.set(this.bboxes,L),L+=this.bboxes.length,I.buffer},Ja}(),Mc=Zn(Zu);const gh={};function Xn(d,s,u={}){Object.defineProperty(d,"_classRegistryKey",{value:s,writable:!1}),gh[s]={klass:d,omit:u.omit||[]}}Xn(Object,"Object"),Mc.serialize=function(d,s){const u=d.toArrayBuffer();return s&&s.add(u),{buffer:u}},Mc.deserialize=function(d){return new Mc(d.buffer)},Object.defineProperty(Mc,"name",{value:"Grid"}),Xn(Mc,"Grid"),delete tr.prototype.constructor,typeof DOMMatrix<"u"&&Xn(DOMMatrix,"DOMMatrix"),Xn(Le,"Color"),Xn(Error,"Error"),Xn(qs,"Formatted"),Xn(vo,"FormattedSection"),Xn(bs,"AJAXError"),Xn(Qo,"ResolvedImage"),Xn(Ra,"StylePropertyFunction"),Xn(Wo,"StyleExpression",{omit:["_evaluator"]}),Xn(ol,"ImageId"),Xn(as,"ImageVariant"),Xn($a,"ZoomDependentExpression"),Xn(hl,"ZoomConstantExpression"),Xn(Sa,"CompoundExpression",{omit:["_evaluate"]});for(const d in jn)gh[jn[d]._classRegistryKey]||Xn(jn[d],`Expression${d}`);function fl(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Ju(d){return self.ImageBitmap&&d instanceof ImageBitmap}function eh(d,s){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(fl(d)||Ju(d))return s&&s.add(d),d;if(ArrayBuffer.isView(d))return s&&s.add(d.buffer),d;if(d instanceof ImageData)return s&&s.add(d.data.buffer),d;if(Array.isArray(d)){const u=[];for(const y of d)u.push(eh(y,s));return u}if(d instanceof Map){const u={$name:"Map",entries:[]};for(const[y,w]of d.entries())u.entries.push(eh(y),eh(w,s));return u}if(d instanceof Set){const u={$name:"Set"};let y=0;for(const w of d.values())u[++y]=eh(w);return u}if(d instanceof DOMMatrix){const u={$name:"DOMMatrix"},y=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const w of y)u[w]=d[w];return u}if(typeof d=="bigint")return{$name:"BigInt",value:d.toString()};if(typeof d=="object"){const u=d.constructor,y=u._classRegistryKey;if(!y)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const w=u.serialize?u.serialize(d,s):{};if(!u.serialize){for(const T in d)d.hasOwnProperty(T)&&(gh[y].omit.indexOf(T)>=0||(w[T]=eh(d[T],s)));d instanceof Error&&(w.message=d.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return y!=="Object"&&(w.$name=y),w}throw new Error("can't serialize object of type "+typeof d)}function Fc(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||fl(d)||Ju(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(Fc);if(typeof d=="object"){const s=d.$name||"Object";if(s==="Map"){const w=d.entries||[],T=new Map;for(let I=0;I<w.length;I+=2)T.set(Fc(w[I]),Fc(w[I+1]));return T}if(s==="Set"){const w=new Set;for(const T of Object.keys(d))T!=="$name"&&w.add(Fc(d[T]));return w}if(s==="DOMMatrix"){let w;return w=d.is2D?[d.a,d.b,d.c,d.d,d.e,d.f]:[d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44],new DOMMatrix(w)}if(s==="BigInt")return BigInt(d.value);const{klass:u}=gh[s];if(!u)throw new Error(`Can't deserialize unregistered class "${s}".`);if(u.deserialize)return u.deserialize(d);const y=Object.create(u.prototype);for(const w of Object.keys(d))w!=="$name"&&(y[w]=Fc(d[w]));return y}throw new Error("can't deserialize object of type "+typeof d)}const Mi={"Latin-1 Supplement":d=>d>=128&&d<=255,Arabic:d=>d>=1536&&d<=1791,"Arabic Supplement":d=>d>=1872&&d<=1919,"Arabic Extended-A":d=>d>=2208&&d<=2303,"Hangul Jamo":d=>d>=4352&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>d>=5120&&d<=5759,Khmer:d=>d>=6016&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>d>=6320&&d<=6399,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"CJK Radicals Supplement":d=>d>=11904&&d<=12031,"Kangxi Radicals":d=>d>=12032&&d<=12255,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Bopomofo:d=>d>=12544&&d<=12591,"Hangul Compatibility Jamo":d=>d>=12592&&d<=12687,Kanbun:d=>d>=12688&&d<=12703,"Bopomofo Extended":d=>d>=12704&&d<=12735,"CJK Strokes":d=>d>=12736&&d<=12783,"Katakana Phonetic Extensions":d=>d>=12784&&d<=12799,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"CJK Unified Ideographs Extension A":d=>d>=13312&&d<=19903,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Yi Syllables":d=>d>=40960&&d<=42127,"Yi Radicals":d=>d>=42128&&d<=42191,"Hangul Jamo Extended-A":d=>d>=43360&&d<=43391,"Hangul Syllables":d=>d>=44032&&d<=55215,"Hangul Jamo Extended-B":d=>d>=55216&&d<=55295,"Private Use Area":d=>d>=57344&&d<=63743,"CJK Compatibility Ideographs":d=>d>=63744&&d<=64255,"Arabic Presentation Forms-A":d=>d>=64336&&d<=65023,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Arabic Presentation Forms-B":d=>d>=65136&&d<=65279,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519,Osage:d=>d>=66736&&d<=66815,"CJK Unified Ideographs Extension B":d=>d>=131072&&d<=173791};function th(d){for(const s of d)if(nh(s.charCodeAt(0)))return!0;return!1}function Pd(d){for(const s of d)if(!rh(s.charCodeAt(0)))return!1;return!0}function rh(d){return!(Mi.Arabic(d)||Mi["Arabic Supplement"](d)||Mi["Arabic Extended-A"](d)||Mi["Arabic Presentation Forms-A"](d)||Mi["Arabic Presentation Forms-B"](d))}function nh(d){return!(d!==746&&d!==747&&(d<4352||!(Mi["Bopomofo Extended"](d)||Mi.Bopomofo(d)||Mi["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Mi["CJK Compatibility Ideographs"](d)||Mi["CJK Compatibility"](d)||Mi["CJK Radicals Supplement"](d)||Mi["CJK Strokes"](d)||!(!Mi["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Mi["CJK Unified Ideographs Extension A"](d)||Mi["CJK Unified Ideographs"](d)||Mi["Enclosed CJK Letters and Months"](d)||Mi["Hangul Compatibility Jamo"](d)||Mi["Hangul Jamo Extended-A"](d)||Mi["Hangul Jamo Extended-B"](d)||Mi["Hangul Jamo"](d)||Mi["Hangul Syllables"](d)||Mi.Hiragana(d)||Mi["Ideographic Description Characters"](d)||Mi.Kanbun(d)||Mi["Kangxi Radicals"](d)||Mi["Katakana Phonetic Extensions"](d)||Mi.Katakana(d)&&d!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Mi["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Mi["Unified Canadian Aboriginal Syllabics"](d)||Mi["Unified Canadian Aboriginal Syllabics Extended"](d)||Mi["Vertical Forms"](d)||Mi["Yijing Hexagram Symbols"](d)||Mi["Yi Syllables"](d)||Mi["Yi Radicals"](d))))}function yh(d){return!(nh(d)||function(s){return!!(Mi["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Mi["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Mi["Letterlike Symbols"](s)||Mi["Number Forms"](s)||Mi["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Mi["Control Pictures"](s)&&s!==9251||Mi["Optical Character Recognition"](s)||Mi["Enclosed Alphanumerics"](s)||Mi["Geometric Shapes"](s)||Mi["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Mi["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Mi["CJK Symbols and Punctuation"](s)||Mi.Katakana(s)||Mi["Private Use Area"](s)||Mi["CJK Compatibility Forms"](s)||Mi["Small Form Variants"](s)||Mi["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(d))}function yp(d){return Mi.Arabic(d)||Mi["Arabic Supplement"](d)||Mi["Arabic Extended-A"](d)||Mi["Arabic Presentation Forms-A"](d)||Mi["Arabic Presentation Forms-B"](d)}function Of(d){return d>=1424&&d<=2303||Mi["Arabic Presentation Forms-A"](d)||Mi["Arabic Presentation Forms-B"](d)}function Ld(d,s){return!(!s&&Of(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Mi.Khmer(d))}function kd(d){for(const s of d)if(Of(s.charCodeAt(0)))return!0;return!1}const Hl={unavailable:"unavailable",deferred:"deferred",loading:"loading",parsing:"parsing",parsed:"parsed",loaded:"loaded",error:"error"};let rf=null,El=Hl.unavailable,_h=null;const Kp=function(d){d&&typeof d=="string"&&d.indexOf("NetworkError")>-1&&(El=Hl.error),rf&&rf(d)};function Df(){Vc.fire(new tu("pluginStateChange",{pluginStatus:El,pluginURL:_h}))}const Vc=new Lu,Od=function(){return El},_p=function(){if(El!==Hl.deferred||!_h)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");El=Hl.loading,Df(),_h&&Fu({url:_h},d=>{d?Kp(d):(El=Hl.loaded,Df())})},Du={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>El===Hl.loaded||Du.applyArabicShaping!=null,isLoading:()=>El===Hl.loading,setState(d){El=d.pluginStatus,_h=d.pluginURL},isParsing:()=>El===Hl.parsing,isParsed:()=>El===Hl.parsed,getPluginURL:()=>_h};class Ao{constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness,this.worldview=u.worldview):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(s){return function(u,y){for(const w of u)if(!Ld(w.charCodeAt(0),y))return!1;return!0}(s,Du.isLoaded())}}class vh{constructor(s,u,y,w){this.property=s,this.value=u,this.expression=function(T,I,L,H){if(Fo(T))return new Ra(T,I);if($o(T)||Array.isArray(T)&&T.length>0){const W=ja(T,I,L,H);if(W.result==="error")throw new Error(W.value.map(se=>`${se.key}: ${se.message}`).join(", "));return W.value}{let W=T;return typeof T=="string"&&I.type==="color"&&(W=Le.parse(T)),{kind:"constant",configDependencies:new Set,evaluate:()=>W}}}(u===void 0?s.specification.default:u,s.specification,y,w)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,u,y){return this.property.possiblyEvaluate(this,s,u,y)}}class Rf{constructor(s,u,y){this.property=s,this.value=new vh(s,void 0,u,y)}transitioned(s,u){return new id(this.property,this.value,u,nr({},s.transition,this.transition),s.now)}untransitioned(){return new id(this.property,this.value,null,{},0)}}class nf{constructor(s,u,y){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._scope=u,this._options=y,this.configDependencies=new Set}getValue(s){return Si(this._values[s].value.value)}setValue(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Rf(this._values[s].property,this._scope,this._options)),this._values[s].value=new vh(this._values[s].property,u===null?void 0:Si(u),this._scope,this._options),this._values[s].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].value.expression.configDependencies]))}setTransitionOrValue(s,u){u&&(this._options=u);const y=this._properties.properties;if(s)for(const w in s){const T=s[w];if(w.endsWith("-transition")){const I=w.slice(0,-11);y[I]&&this.setTransition(I,T)}else y.hasOwnProperty(w)&&this.setValue(w,T)}}getTransition(s){return Si(this._values[s].transition)}setTransition(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Rf(this._values[s].property)),this._values[s].transition=Si(u)||void 0}serialize(){const s={};for(const u of Object.keys(this._values)){const y=this.getValue(u);y!==void 0&&(s[u]=y);const w=this.getTransition(u);w!==void 0&&(s[`${u}-transition`]=w)}return s}transitioned(s,u){const y=new sd(this._properties);for(const w of Object.keys(this._values))y._values[w]=this._values[w].transitioned(s,u._values[w]);return y}untransitioned(){const s=new sd(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class id{constructor(s,u,y,w,T){const I=w.delay||0,L=w.duration||0;T=T||0,this.property=s,this.value=u,this.begin=T+I,this.end=this.begin+L,s.specification.transition&&(w.delay||w.duration)&&(this.prior=y)}possiblyEvaluate(s,u,y){const w=s.now||0,T=this.value.possiblyEvaluate(s,u,y),I=this.prior;if(I){if(w>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(w<this.begin)return I.possiblyEvaluate(s,u,y);{const L=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(s,u,y),T,et(L))}}return T}}class sd{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,y){const w=new eo(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(s,u,y);return w}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Bl{constructor(s,u,y){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._scope=u,this._options=y,this.configDependencies=new Set}getValue(s){return Si(this._values[s].value)}setValue(s,u){this._values[s]=new vh(this._values[s].property,u===null?void 0:Si(u),this._scope,this._options),this._values[s].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].expression.configDependencies]))}serialize(){const s={};for(const u of Object.keys(this._values)){const y=this.getValue(u);y!==void 0&&(s[u]=y)}return s}possiblyEvaluate(s,u,y){const w=new eo(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(s,u,y);return w}}class Ru{constructor(s,u,y){this.property=s,this.value=u,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,u,y,w){return this.property.evaluate(this.value,this.parameters,s,u,y,w)}}class eo{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class mn{constructor(s){this.specification=s}possiblyEvaluate(s,u){return s.expression.evaluate(u)}interpolate(s,u,y){const w=hr[this.specification.type];return w?w(s,u,y):s}}class Jn{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,y,w){return new Ru(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},y,w)}:s.expression,u)}interpolate(s,u,y){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new Ru(this,{kind:"constant",value:void 0},s.parameters);const w=hr[this.specification.type];return w?new Ru(this,{kind:"constant",value:w(s.value.value,u.value.value,y)},s.parameters):s}evaluate(s,u,y,w,T,I){return s.kind==="constant"?s.value:s.evaluate(u,y,w,T,I)}}class Nu{constructor(s){this.specification=s}possiblyEvaluate(s,u,y,w){return!!s.expression.evaluate(u,null,{},y,w)}interpolate(){return!1}}class Po{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new Ao(0,{});for(const y in s){const w=s[y];w.specification.overridable&&this.overridableProperties.push(y);const T=this.defaultPropertyValues[y]=new vh(w,void 0),I=this.defaultTransitionablePropertyValues[y]=new Rf(w);this.defaultTransitioningPropertyValues[y]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[y]=T.possiblyEvaluate(u)}}}Xn(Jn,"DataDrivenProperty"),Xn(mn,"DataConstantProperty"),Xn(Nu,"ColorRampProperty");var Ar=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"},"appearances":{"type":"array","value":"appearance","supported-layer-types":["symbol"]}},"appearance":{"condition":{"type":"expression"},"name":{"type":"string"},"properties":{"type":"*"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-facade":{"type":"boolean","default":false,"expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-facade-floors":{"type":"number","minimum":1,"maximum":200,"default":3,"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-facade-window":{"type":"array","length":2,"value":"number","minimum":0.1,"maximum":1,"default":[0.9,0.9],"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"appearance":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","expression":{}},"buildingFeaturesetId":{"type":"string","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"parameters":[]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","use-theme":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"},"building-facade-emissive-chance":{"type":"number","default":0.35,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["measure-light","zoom"]}},"building-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-gradient":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"use-theme":true,"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"use-theme":true,"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white","use-theme":true},"sky-atmosphere-color":{"type":"color","default":"white","use-theme":true},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"use-theme":true,"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function qp(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Pc(d){if(Array.isArray(d))return d.map(Pc);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const s={};for(const u in d)s[u]=Pc(d[u]);return s}return qp(d)}function od(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const s of d.slice(1))if(!od(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}function Gc(d,s="",u=null,y="fill"){if(d==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};od(d)||(d=Nf(d));const w=d;let T=!0;try{T=function(se){if(!of(se))return se;let ue=Pc(se);return sf(ue),ue=Dd(ue),ue}(w)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(w,null,2)}
        `)}let I=null,L=null;if(y!=="background"&&y!=="sky"&&y!=="slot"){L=Ar[`filter_${y}`];const se=zl(T,L,s,u);if(se.result==="error")throw new Error(se.value.map(ue=>`${ue.key}: ${ue.message}`).join(", "));I=(ue,me,Ee)=>se.value.evaluate(ue,me,{},Ee)}let H=null,W=null;if(T!==w){const se=zl(w,L,s,u);if(se.result==="error")throw new Error(se.value.map(ue=>`${ue.key}: ${ue.message}`).join(", "));H=(ue,me,Ee,Ie,Re)=>se.value.evaluate(ue,me,{},Ee,void 0,void 0,Ie,Re),W=!Zh(se.value.expression)}return{filter:I,dynamicFilter:H||void 0,needGeometry:Hh(T),needFeature:!!W}}function Dd(d){if(!Array.isArray(d))return d;const s=function(u){if(To.has(u[0])){for(let y=1;y<u.length;y++)if(of(u[y]))return!0}return u}(d);return s===!0?s:s.map(u=>Dd(u))}function sf(d){let s=!1;const u=[];if(d[0]==="case"){for(let y=1;y<d.length-1;y+=2)s=s||of(d[y]),u.push(d[y+1]);u.push(d[d.length-1])}else if(d[0]==="match"){s=s||of(d[1]);for(let y=2;y<d.length-1;y+=2)u.push(d[y+1]);u.push(d[d.length-1])}else if(d[0]==="step"){s=s||of(d[1]);for(let y=1;y<d.length-1;y+=2)u.push(d[y+1])}s&&(d.length=0,d.push("any",...u));for(let y=1;y<d.length;y++)sf(d[y])}function of(d){if(!Array.isArray(d))return!1;if((s=d[0])==="pitch"||s==="distance-from-center")return!0;var s;for(let u=1;u<d.length;u++)if(of(d[u]))return!0;return!1}const To=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ju(d,s){return d<s?-1:d>s?1:0}function Hh(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let s=1;s<d.length;s++)if(Hh(d[s]))return!0;return!1}function Nf(d){if(!d)return!0;const s=d[0];return d.length<=1?s!=="any":s==="=="?bh(d[1],d[2],"=="):s==="!="?Uu(bh(d[1],d[2],"==")):s==="<"||s===">"||s==="<="||s===">="?bh(d[1],d[2],s):s==="any"?(u=d.slice(1),["any"].concat(u.map(Nf))):s==="all"?["all"].concat(d.slice(1).map(Nf)):s==="none"?["all"].concat(d.slice(1).map(Nf).map(Uu)):s==="in"?vu(d[1],d.slice(2)):s==="!in"?Uu(vu(d[1],d.slice(2))):s==="has"?ih(d[1]):s!=="!has"||Uu(ih(d[1]));var u}function bh(d,s,u){switch(d){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,d,s]}}function vu(d,s){if(s.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",d,["literal",s.sort(ju)]]:["filter-in-small",d,["literal",s]]}}function ih(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Uu(d){return["!",d]}const xh="";function wh(d,s){return s?`${d}${xh}${s}`:d}const Sh="-transition",bm=new Set(["fill","line","background","hillshade","raster"]);class el extends Lu{constructor(s,u,y,w,T){if(super(),this.id=s.id,this.fqid=wh(this.id,y),this.type=s.type,this.scope=y,this.lut=w,this.options=T,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,s.type!=="custom"){if(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type&&s.type!=="background"&&s.type!=="sky"&&s.type!=="slot"){this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter;const I=zl(this.filter,Ar[`filter_${s.type}`]);I.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...I.value.configDependencies]))}if(s.slot&&(this.slot=s.slot),u.layout&&(this._unevaluatedLayout=new Bl(u.layout,this.scope,T),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new nf(u.paint,this.scope,T);for(const I in s.paint)this.setPaintProperty(I,s.paint[I]);for(const I in s.layout)this.setLayoutProperty(I,s.layout[I]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eo(u.paint)}}}onAdd(s){}onRemove(s){}isDraped(s){return!this.is3D(!0)&&bm.has(this.type)}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u){if(this.type==="custom"&&s==="visibility")return void(this.visibility=u);const y=this._unevaluatedLayout;y._properties.properties[s]&&(y.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...y.configDependencies]),s==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(s){return s.endsWith(Sh)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u){const y=this._transitionablePaint,w=y._properties.properties;if(s.endsWith(Sh)){const ue=s.slice(0,-11);return w[ue]&&y.setTransition(ue,u||void 0),!1}if(!w[s])return!1;const T=y._values[s],I=T.value.isDataDriven(),L=T.value;y.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...y.configDependencies]),this._handleSpecialPaintPropertyUpdate(s);const H=y._values[s].value,W=H.isDataDriven(),se=s.endsWith("pattern")||s==="line-dasharray";return W||I||se||this._handleOverridablePaintPropertyUpdate(s,L,H)}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getDefaultProgramParams(s,u,y){return null}_handleOverridablePaintPropertyUpdate(s,u,y){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){return Bi({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(s,u)=>!(s===void 0||u==="layout"&&!Object.keys(s).length||u==="paint"&&!Object.keys(s).length))}is3D(s){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}_clear(){}isStateDependent(){for(const s in this.paint._values){const u=this.paint.get(s);if(u instanceof Ru&&Ss(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(s){this._filterCompiled||(this._featureFilter=Gc(this.filter,this.scope,s),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(s){this._stats&&(s.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(s){}queryIntersectsFeature(s,u,y,w,T,I,L,H,W){}}const vp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Rd{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class No{constructor(){this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&u.add(s.arrayBuffer),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...s){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...s){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Gs(d,s=1){let u=0,y=0;return{members:d.map(w=>{const T=vp[w.type].BYTES_PER_ELEMENT,I=u=OA(u,Math.max(s,T)),L=w.components||1;return y=Math.max(y,T),u+=T*L,{name:w.name,type:w.type,components:L,offset:I}}),size:OA(u,Math.max(y,s)),alignment:s}}function OA(d,s){return Math.ceil(d/s)*s}class Wc extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){const y=this.length;return this.resize(y+1),this.emplace(y,s,u)}emplace(s,u,y){const w=2*s;return this.int16[w+0]=u,this.int16[w+1]=y,s}}Wc.prototype.bytesPerElement=4,Xn(Wc,"StructArrayLayout2i4");class Nd extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,u,y)}emplace(s,u,y,w){const T=3*s;return this.int16[T+0]=u,this.int16[T+1]=y,this.int16[T+2]=w,s}}Nd.prototype.bytesPerElement=6,Xn(Nd,"StructArrayLayout3i6");class jd extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,y,w){const T=this.length;return this.resize(T+1),this.emplace(T,s,u,y,w)}emplace(s,u,y,w,T){const I=4*s;return this.int16[I+0]=u,this.int16[I+1]=y,this.int16[I+2]=w,this.int16[I+3]=T,s}}jd.prototype.bytesPerElement=8,Xn(jd,"StructArrayLayout4i8");class Ud extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}Ud.prototype.bytesPerElement=4,Xn(Ud,"StructArrayLayout1f4");class DA extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,u,y)}emplace(s,u,y,w){const T=4*s,I=2*s;return this.int16[T+0]=u,this.int16[T+1]=y,this.float32[I+1]=w,s}}DA.prototype.bytesPerElement=8,Xn(DA,"StructArrayLayout2i1f8");class zd extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,u,y)}emplace(s,u,y,w){const T=4*s;return this.int16[T+0]=u,this.int16[T+1]=y,this.int16[T+2]=w,s}}zd.prototype.bytesPerElement=8,Xn(zd,"StructArrayLayout3i8");class nc extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,y,w,T)}emplace(s,u,y,w,T,I){const L=5*s;return this.int16[L+0]=u,this.int16[L+1]=y,this.int16[L+2]=w,this.int16[L+3]=T,this.int16[L+4]=I,s}}nc.prototype.bytesPerElement=10,Xn(nc,"StructArrayLayout5i10");class sh extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L){const H=this.length;return this.resize(H+1),this.emplace(H,s,u,y,w,T,I,L)}emplace(s,u,y,w,T,I,L,H){const W=6*s,se=12*s,ue=3*s;return this.int16[W+0]=u,this.int16[W+1]=y,this.uint8[se+4]=w,this.uint8[se+5]=T,this.uint8[se+6]=I,this.uint8[se+7]=L,this.float32[ue+2]=H,s}}sh.prototype.bytesPerElement=12,Xn(sh,"StructArrayLayout2i4ub1f12");class zu extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,u,y)}emplace(s,u,y,w){const T=3*s;return this.float32[T+0]=u,this.float32[T+1]=y,this.float32[T+2]=w,s}}zu.prototype.bytesPerElement=12,Xn(zu,"StructArrayLayout3f12");class af extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,y,w,T)}emplace(s,u,y,w,T,I){const L=6*s,H=3*s;return this.uint16[L+0]=u,this.uint16[L+1]=y,this.uint16[L+2]=w,this.uint16[L+3]=T,this.float32[H+2]=I,s}}af.prototype.bytesPerElement=12,Xn(af,"StructArrayLayout4ui1f12");class lf extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,y,w){const T=this.length;return this.resize(T+1),this.emplace(T,s,u,y,w)}emplace(s,u,y,w,T){const I=4*s;return this.uint16[I+0]=u,this.uint16[I+1]=y,this.uint16[I+2]=w,this.uint16[I+3]=T,s}}lf.prototype.bytesPerElement=8,Xn(lf,"StructArrayLayout4ui8");class cf extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I){const L=this.length;return this.resize(L+1),this.emplace(L,s,u,y,w,T,I)}emplace(s,u,y,w,T,I,L){const H=6*s;return this.int16[H+0]=u,this.int16[H+1]=y,this.int16[H+2]=w,this.int16[H+3]=T,this.int16[H+4]=I,this.int16[H+5]=L,s}}cf.prototype.bytesPerElement=12,Xn(cf,"StructArrayLayout6i12");class bp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L,H,W,se,ue,me){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,s,u,y,w,T,I,L,H,W,se,ue,me)}emplace(s,u,y,w,T,I,L,H,W,se,ue,me,Ee){const Ie=12*s;return this.int16[Ie+0]=u,this.int16[Ie+1]=y,this.int16[Ie+2]=w,this.int16[Ie+3]=T,this.uint16[Ie+4]=I,this.uint16[Ie+5]=L,this.uint16[Ie+6]=H,this.uint16[Ie+7]=W,this.int16[Ie+8]=se,this.int16[Ie+9]=ue,this.int16[Ie+10]=me,this.int16[Ie+11]=Ee,s}}bp.prototype.bytesPerElement=24,Xn(bp,"StructArrayLayout4i4ui4i24");class Hd extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I){const L=this.length;return this.resize(L+1),this.emplace(L,s,u,y,w,T,I)}emplace(s,u,y,w,T,I,L){const H=10*s,W=5*s;return this.int16[H+0]=u,this.int16[H+1]=y,this.int16[H+2]=w,this.float32[W+2]=T,this.float32[W+3]=I,this.float32[W+4]=L,s}}Hd.prototype.bytesPerElement=20,Xn(Hd,"StructArrayLayout3i3f20");class Qh extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w){const T=this.length;return this.resize(T+1),this.emplace(T,s,u,y,w)}emplace(s,u,y,w,T){const I=4*s;return this.float32[I+0]=u,this.float32[I+1]=y,this.float32[I+2]=w,this.float32[I+3]=T,s}}Qh.prototype.bytesPerElement=16,Xn(Qh,"StructArrayLayout4f16");class Yp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}Yp.prototype.bytesPerElement=4,Xn(Yp,"StructArrayLayout1ul4");class cu extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){const y=this.length;return this.resize(y+1),this.emplace(y,s,u)}emplace(s,u,y){const w=2*s;return this.uint16[w+0]=u,this.uint16[w+1]=y,s}}cu.prototype.bytesPerElement=4,Xn(cu,"StructArrayLayout2ui4");class Qd extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L,H,W,se,ue,me,Ee){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,s,u,y,w,T,I,L,H,W,se,ue,me,Ee)}emplace(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie){const Re=20*s,ze=10*s;return this.int16[Re+0]=u,this.int16[Re+1]=y,this.int16[Re+2]=w,this.int16[Re+3]=T,this.int16[Re+4]=I,this.float32[ze+3]=L,this.float32[ze+4]=H,this.float32[ze+5]=W,this.float32[ze+6]=se,this.int16[Re+14]=ue,this.uint32[ze+8]=me,this.uint16[Re+18]=Ee,this.uint16[Re+19]=Ie,s}}Qd.prototype.bytesPerElement=40,Xn(Qd,"StructArrayLayout5i4f1i1ul2ui40");class RA extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L){const H=this.length;return this.resize(H+1),this.emplace(H,s,u,y,w,T,I,L)}emplace(s,u,y,w,T,I,L,H){const W=8*s;return this.int16[W+0]=u,this.int16[W+1]=y,this.int16[W+2]=w,this.int16[W+4]=T,this.int16[W+5]=I,this.int16[W+6]=L,this.int16[W+7]=H,s}}RA.prototype.bytesPerElement=16,Xn(RA,"StructArrayLayout3i2i2i16");class ad extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,y,w,T)}emplace(s,u,y,w,T,I){const L=4*s,H=8*s;return this.float32[L+0]=u,this.float32[L+1]=y,this.float32[L+2]=w,this.int16[H+6]=T,this.int16[H+7]=I,s}}ad.prototype.bytesPerElement=16,Xn(ad,"StructArrayLayout2f1f2i16");class Ch extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I){const L=this.length;return this.resize(L+1),this.emplace(L,s,u,y,w,T,I)}emplace(s,u,y,w,T,I,L){const H=20*s,W=5*s;return this.uint8[H+0]=u,this.uint8[H+1]=y,this.float32[W+1]=w,this.float32[W+2]=T,this.float32[W+3]=I,this.float32[W+4]=L,s}}Ch.prototype.bytesPerElement=20,Xn(Ch,"StructArrayLayout2ub4f20");class Lo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,u,y)}emplace(s,u,y,w){const T=3*s;return this.uint16[T+0]=u,this.uint16[T+1]=y,this.uint16[T+2]=w,s}}Lo.prototype.bytesPerElement=6,Xn(Lo,"StructArrayLayout3ui6");class uf extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe,ht,ut,mt,$t){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe,ht,ut,mt,$t)}emplace(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe,ht,ut,mt,$t,Ut){const Ht=30*s,or=15*s,cr=60*s;return this.int16[Ht+0]=u,this.int16[Ht+1]=y,this.int16[Ht+2]=w,this.float32[or+2]=T,this.float32[or+3]=I,this.uint16[Ht+8]=L,this.uint16[Ht+9]=H,this.uint32[or+5]=W,this.uint32[or+6]=se,this.uint32[or+7]=ue,this.uint16[Ht+16]=me,this.uint16[Ht+17]=Ee,this.uint16[Ht+18]=Ie,this.float32[or+10]=Re,this.float32[or+11]=ze,this.uint8[cr+48]=Xe,this.uint8[cr+49]=ht,this.uint8[cr+50]=ut,this.uint32[or+13]=mt,this.int16[Ht+28]=$t,this.uint8[cr+58]=Ut,s}}uf.prototype.bytesPerElement=60,Xn(uf,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class xp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe,ht,ut,mt,$t,Ut,Ht,or,cr,Gr,xr,Yr,In,nn,gn,En,zr){const _n=this.length;return this.resize(_n+1),this.emplace(_n,s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe,ht,ut,mt,$t,Ut,Ht,or,cr,Gr,xr,Yr,In,nn,gn,En,zr)}emplace(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe,ht,ut,mt,$t,Ut,Ht,or,cr,Gr,xr,Yr,In,nn,gn,En,zr,_n){const wr=20*s,Vr=40*s,Pn=80*s;return this.float32[wr+0]=u,this.float32[wr+1]=y,this.int16[Vr+4]=w,this.int16[Vr+5]=T,this.int16[Vr+6]=I,this.int16[Vr+7]=L,this.int16[Vr+8]=H,this.int16[Vr+9]=W,this.int16[Vr+10]=se,this.int16[Vr+11]=ue,this.int16[Vr+12]=me,this.uint16[Vr+13]=Ee,this.uint16[Vr+14]=Ie,this.uint16[Vr+15]=Re,this.uint16[Vr+16]=ze,this.uint16[Vr+17]=Xe,this.uint16[Vr+18]=ht,this.uint16[Vr+19]=ut,this.uint16[Vr+20]=mt,this.uint16[Vr+21]=$t,this.uint16[Vr+22]=Ut,this.uint16[Vr+23]=Ht,this.uint16[Vr+24]=or,this.uint16[Vr+25]=cr,this.uint16[Vr+26]=Gr,this.uint16[Vr+27]=xr,this.uint32[wr+14]=Yr,this.float32[wr+15]=In,this.float32[wr+16]=nn,this.float32[wr+17]=gn,this.float32[wr+18]=En,this.uint8[Pn+76]=zr,this.uint16[Vr+39]=_n,s}}xp.prototype.bytesPerElement=80,Xn(xp,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Xp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I){const L=this.length;return this.resize(L+1),this.emplace(L,s,u,y,w,T,I)}emplace(s,u,y,w,T,I,L){const H=6*s;return this.float32[H+0]=u,this.float32[H+1]=y,this.float32[H+2]=w,this.float32[H+3]=T,this.float32[H+4]=I,this.float32[H+5]=L,s}}Xp.prototype.bytesPerElement=24,Xn(Xp,"StructArrayLayout6f24");class hf extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,y,w,T)}emplace(s,u,y,w,T,I){const L=5*s;return this.float32[L+0]=u,this.float32[L+1]=y,this.float32[L+2]=w,this.float32[L+3]=T,this.float32[L+4]=I,s}}hf.prototype.bytesPerElement=20,Xn(hf,"StructArrayLayout5f20");class xm extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L){const H=this.length;return this.resize(H+1),this.emplace(H,s,u,y,w,T,I,L)}emplace(s,u,y,w,T,I,L,H){const W=7*s;return this.float32[W+0]=u,this.float32[W+1]=y,this.float32[W+2]=w,this.float32[W+3]=T,this.float32[W+4]=I,this.float32[W+5]=L,this.float32[W+6]=H,s}}xm.prototype.bytesPerElement=28,Xn(xm,"StructArrayLayout7f28");class Vd extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L,H,W,se,ue){const me=this.length;return this.resize(me+1),this.emplace(me,s,u,y,w,T,I,L,H,W,se,ue)}emplace(s,u,y,w,T,I,L,H,W,se,ue,me){const Ee=11*s;return this.float32[Ee+0]=u,this.float32[Ee+1]=y,this.float32[Ee+2]=w,this.float32[Ee+3]=T,this.float32[Ee+4]=I,this.float32[Ee+5]=L,this.float32[Ee+6]=H,this.float32[Ee+7]=W,this.float32[Ee+8]=se,this.float32[Ee+9]=ue,this.float32[Ee+10]=me,s}}Vd.prototype.bytesPerElement=44,Xn(Vd,"StructArrayLayout11f44");class ld extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L,H,W){const se=this.length;return this.resize(se+1),this.emplace(se,s,u,y,w,T,I,L,H,W)}emplace(s,u,y,w,T,I,L,H,W,se){const ue=9*s;return this.float32[ue+0]=u,this.float32[ue+1]=y,this.float32[ue+2]=w,this.float32[ue+3]=T,this.float32[ue+4]=I,this.float32[ue+5]=L,this.float32[ue+6]=H,this.float32[ue+7]=W,this.float32[ue+8]=se,s}}ld.prototype.bytesPerElement=36,Xn(ld,"StructArrayLayout9f36");class ff extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){const y=this.length;return this.resize(y+1),this.emplace(y,s,u)}emplace(s,u,y){const w=2*s;return this.float32[w+0]=u,this.float32[w+1]=y,s}}ff.prototype.bytesPerElement=8,Xn(ff,"StructArrayLayout2f8");class wp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,y,w){const T=this.length;return this.resize(T+1),this.emplace(T,s,u,y,w)}emplace(s,u,y,w,T){const I=6*s;return this.uint32[3*s+0]=u,this.uint16[I+2]=y,this.uint16[I+3]=w,this.uint16[I+4]=T,s}}wp.prototype.bytesPerElement=12,Xn(wp,"StructArrayLayout1ul3ui12");class Zp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}Zp.prototype.bytesPerElement=2,Xn(Zp,"StructArrayLayout1ui2");class Sp extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze){const Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze)}emplace(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe){const ht=16*s;return this.float32[ht+0]=u,this.float32[ht+1]=y,this.float32[ht+2]=w,this.float32[ht+3]=T,this.float32[ht+4]=I,this.float32[ht+5]=L,this.float32[ht+6]=H,this.float32[ht+7]=W,this.float32[ht+8]=se,this.float32[ht+9]=ue,this.float32[ht+10]=me,this.float32[ht+11]=Ee,this.float32[ht+12]=Ie,this.float32[ht+13]=Re,this.float32[ht+14]=ze,this.float32[ht+15]=Xe,s}}Sp.prototype.bytesPerElement=64,Xn(Sp,"StructArrayLayout16f64");class bu extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,y,w,T,I,L){const H=this.length;return this.resize(H+1),this.emplace(H,s,u,y,w,T,I,L)}emplace(s,u,y,w,T,I,L,H){const W=10*s,se=5*s;return this.uint16[W+0]=u,this.uint16[W+1]=y,this.uint16[W+2]=w,this.uint16[W+3]=T,this.float32[se+2]=I,this.float32[se+3]=L,this.float32[se+4]=H,s}}bu.prototype.bytesPerElement=20,Xn(bu,"StructArrayLayout4ui3f20");class NA extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.int16[1*s+0]=u,s}}NA.prototype.bytesPerElement=2,Xn(NA,"StructArrayLayout1i2");class cd extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint8[1*s+0]=u,s}}cd.prototype.bytesPerElement=1,Xn(cd,"StructArrayLayout1ub1");class Cp extends Rd{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Cp.prototype.size=40;class jA extends Qd{get(s){return new Cp(this,s)}}Xn(jA,"CollisionBoxArray");class Jp extends Rd{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}Jp.prototype.size=60;class eA extends uf{get(s){return new Jp(this,s)}}Xn(eA,"PlacedSymbolArray");class Eh extends Rd{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(s){this._structArray.uint32[this._pos4+14]=s}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(s){this._structArray.float32[this._pos4+18]=s}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}Eh.prototype.size=80;class tA extends xp{get(s){return new Eh(this,s)}}Xn(tA,"SymbolInstanceArray");class rA extends Ud{getoffsetX(s){return this.float32[1*s+0]}}Xn(rA,"GlyphOffsetArray");class UA extends Wc{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}Xn(UA,"SymbolLineVertexArray");class Bh extends Rd{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Bh.prototype.size=12;class ud extends wp{get(s){return new Bh(this,s)}}Xn(ud,"FeatureIndexArray");class ls extends cu{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}Xn(ls,"FillExtrusionCentroidArray");class Vh extends Rd{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Vh.prototype.size=6;class jf extends Nd{get(s){return new Vh(this,s)}}Xn(jf,"FillExtrusionWallArray");const xu=Gs([{name:"a_pos",components:2,type:"Int16"}],4),hd=Gs([{name:"a_circle_z_offset",components:1,type:"Float32"}],4),Gd=Gs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class wo{constructor(s=[]){this.segments=s}_prepareSegment(s,u,y,w){let T=this.segments[this.segments.length-1];return s>wo.MAX_VERTEX_ARRAY_LENGTH&&Qi(`Max vertices per segment is ${wo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!T||T.vertexLength+s>wo.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==w)&&(T={vertexOffset:u,primitiveOffset:y,vertexLength:0,primitiveLength:0},w!==void 0&&(T.sortKey=w),this.segments.push(T)),T}prepareSegment(s,u,y,w){return this._prepareSegment(s,u.length,y.length,w)}get(){return this.segments}destroy(){for(const s of this.segments)for(const u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,y,w){return new wo([{vertexOffset:s,primitiveOffset:u,vertexLength:y,primitiveLength:w,vaos:{},sortKey:0}])}}function Lc(d,s){return 256*(d=nt(Math.floor(d),0,255))+nt(Math.floor(s),0,255)}wo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xn(wo,"SegmentVector");const ig=Gs([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),zA=Gs([{name:"a_pattern_b",components:4,type:"Uint16"}]),HA=Gs([{name:"a_dash",components:4,type:"Uint16"}]);class Uf{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(s,u,y,w){this.ids.push(Wd(s)),this.positions.push(u,y,w)}eachPosition(s,u){const y=Wd(s);let w=0,T=this.ids.length-1;for(;w<T;){const I=w+T>>1;this.ids[I]>=y?T=I:w=I+1}for(;this.ids[w]===y;)u(this.positions[3*w],this.positions[3*w+1],this.positions[3*w+2]),w++}static serialize(s,u){const y=new Float64Array(s.ids),w=new Uint32Array(s.positions);return QA(y,w,0,y.length-1),u&&(u.add(y.buffer),u.add(w.buffer)),{ids:y,positions:w}}static deserialize(s){const u=new Uf;let y;u.ids=s.ids,u.positions=s.positions;for(const w of u.ids)w!==y&&u.uniqueIds.push(w),y=w;return u.indexed=!0,u}}function Wd(d){const s=+d;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:Qa(String(d))}function QA(d,s,u,y){for(;u<y;){const w=d[u+y>>1];let T=u-1,I=y+1;for(;;){do T++;while(d[T]<w);do I--;while(d[I]>w);if(T>=I)break;fd(d,T,I),fd(s,3*T,3*I),fd(s,3*T+1,3*I+1),fd(s,3*T+2,3*I+2)}I-u<y-I?(QA(d,s,u,I),u=I+1):(QA(d,s,I+1,y),y=I)}}function fd(d,s,u){const y=d[s];d[s]=d[u],d[u]=y}Xn(Uf,"FeaturePositionMap");class Th{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,u),this.initialized=!0),!!this.location}set(s,u,y){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Ih extends Th{constructor(s){super(s),this.current=0}set(s,u,y){this.fetchUniformLocation(s,u)&&this.current!==y&&(this.current=y,this.gl.uniform1i(this.location,y))}}class Io extends Th{constructor(s){super(s),this.current=0}set(s,u,y){this.fetchUniformLocation(s,u)&&this.current!==y&&(this.current=y,this.gl.uniform1f(this.location,y))}}class Mh extends Th{constructor(s){super(s),this.current=[0,0]}set(s,u,y){this.fetchUniformLocation(s,u)&&(y[0]===this.current[0]&&y[1]===this.current[1]||(this.current=y,this.gl.uniform2f(this.location,y[0],y[1])))}}class Ep extends Th{constructor(s){super(s),this.current=[0,0,0]}set(s,u,y){this.fetchUniformLocation(s,u)&&(y[0]===this.current[0]&&y[1]===this.current[1]&&y[2]===this.current[2]||(this.current=y,this.gl.uniform3f(this.location,y[0],y[1],y[2])))}}class zf extends Th{constructor(s){super(s),this.current=[0,0,0,0]}set(s,u,y){this.fetchUniformLocation(s,u)&&(y[0]===this.current[0]&&y[1]===this.current[1]&&y[2]===this.current[2]&&y[3]===this.current[3]||(this.current=y,this.gl.uniform4f(this.location,y[0],y[1],y[2],y[3])))}}class wm extends Th{constructor(s){super(s),this.current=Le.transparent.toPremultipliedRenderColor(null)}set(s,u,y){this.fetchUniformLocation(s,u)&&(y.r===this.current.r&&y.g===this.current.g&&y.b===this.current.b&&y.a===this.current.a||(this.current=y,this.gl.uniform4f(this.location,y.r,y.g,y.b,y.a)))}}const sg=new Float32Array(16);class Hf extends Th{constructor(s){super(s),this.current=sg}set(s,u,y){if(this.fetchUniformLocation(s,u)){if(y[12]!==this.current[12]||y[0]!==this.current[0])return this.current=y,void this.gl.uniformMatrix4fv(this.location,!1,y);for(let w=1;w<16;w++)if(y[w]!==this.current[w]){this.current=y,this.gl.uniformMatrix4fv(this.location,!1,y);break}}}}const og=new Float32Array(9),Sm=new Float32Array(4);class nA extends Th{constructor(s){super(s),this.current=Sm}set(s,u,y){if(this.fetchUniformLocation(s,u)){for(let w=0;w<4;w++)if(y[w]!==this.current[w]){this.current=y,this.gl.uniformMatrix2fv(this.location,!1,y);break}}}}function iA(d){return[Lc(255*d.r,255*d.g),Lc(255*d.b,255*d.a)]}class Bp{constructor(s,u,y,w){this.value=s,this.uniformNames=u.map(T=>`u_${T}`),this.type=y,this.context=w}setUniform(s,u,y,w,T){const I=w.constantOr(this.value);u.set(s,T,I instanceof Le?I.toPremultipliedRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):I)}getBinding(s,u){return this.type==="color"?new wm(s):new Io(s)}}class Tp{constructor(s,u){this.uniformNames=u.map(y=>`u_${y}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(s,u){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br),this.patternTransition=u?u.tl.concat(u.br):this.pattern}setUniform(s,u,y,w,T){let I=null;T!=="u_pattern"&&T!=="u_dash"||(I=this.pattern),T==="u_pattern_b"&&(I=this.patternTransition),T==="u_pixel_ratio"&&(I=this.pixelRatio),I&&u.set(s,T,I)}getBinding(s,u){return u==="u_pattern"||u==="u_pattern_b"||u==="u_dash"?new zf(s):new Io(s)}}class df{constructor(s,u,y,w){this.expression=s,this.type=y,this.maxValue=0,this.paintVertexAttributes=u.map(T=>({name:`a_${T}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(s,u,y,w,T,I,L,H){const W=this.paintVertexArray.length,se=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Ao(0,{brightness:I,worldview:H}),u,{},T,w,L):this.expression.kind==="constant"&&this.expression.value,ue=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ao(0,{brightness:I,worldview:H}),u,{},T,w,L):this.lutExpression.value)==="none";this.paintVertexArray.resize(s),this._setPaintValue(W,s,se,ue?null:this.context.lut)}updatePaintArray(s,u,y,w,T,I,L,H){const W=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:L,worldview:H},y,w,void 0,T):this.expression.kind==="constant"&&this.expression.value,se=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ao(0,{brightness:L,worldview:H}),y,w,void 0,T):this.lutExpression.value)==="none";this._setPaintValue(s,u,W,se?null:this.context.lut)}_setPaintValue(s,u,y,w){if(this.type==="color"){const T=iA(y.toPremultipliedRenderColor(w));for(let I=s;I<u;I++)this.paintVertexArray.emplace(I,T[0],T[1])}else{for(let T=s;T<u;T++)this.paintVertexArray.emplace(T,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hu{constructor(s,u,y,w,T,I){this.expression=s,this.uniformNames=u.map(L=>`u_${L}_t`),this.type=y,this.useIntegerZoom=w,this.context=T,this.maxValue=0,this.paintVertexAttributes=u.map(L=>({name:`a_${L}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(s,u,y,w,T,I,L,H){const W=this.expression.evaluate(new Ao(this.context.zoom,{brightness:I,worldview:H}),u,{},T,w,L),se=this.expression.evaluate(new Ao(this.context.zoom+1,{brightness:I,worldview:H}),u,{},T,w,L),ue=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ao(0,{brightness:I,worldview:H}),u,{},T,w,L):this.lutExpression.value)==="none",me=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(me,s,W,se,ue?null:this.context.lut)}updatePaintArray(s,u,y,w,T,I,L,H){const W=this.expression.evaluate({zoom:this.context.zoom,brightness:L,worldview:H},y,w,void 0,T),se=this.expression.evaluate({zoom:this.context.zoom+1,brightness:L,worldview:H},y,w,void 0,T),ue=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ao(0,{brightness:L,worldview:H}),y,w,void 0,T):this.lutExpression.value)==="none";this._setPaintValue(s,u,W,se,ue?null:this.context.lut)}_setPaintValue(s,u,y,w,T){if(this.type==="color"){const I=iA(y.toPremultipliedRenderColor(T)),L=iA(y.toPremultipliedRenderColor(T));for(let H=s;H<u;H++)this.paintVertexArray.emplace(H,I[0],I[1],L[0],L[1])}else{for(let I=s;I<u;I++)this.paintVertexArray.emplace(I,y,w);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(w))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u,y,w,T){const I=this.useIntegerZoom?Math.floor(y.zoom):y.zoom,L=nt(this.expression.interpolationFactor(I,this.context.zoom,this.context.zoom+1),0,1);u.set(s,T,L)}getBinding(s,u){return new Io(s)}}class oh{constructor(s,u,y,w,T){this.expression=s,this.layerId=T,this.paintVertexAttributes=(y==="array"?HA:ig).members;for(let I=0;I<u.length;++I);this.paintVertexArray=new w,this.paintTransitionVertexArray=new lf}populatePaintArray(s,u,y,w){const T=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(T,s,u.patterns&&u.patterns[this.layerId],y)}updatePaintArray(s,u,y,w,T,I,L){this._setPaintValues(s,u,y.patterns&&y.patterns[this.layerId],I)}_setPaintValues(s,u,y,w){if(!w||!y)return;const T=w[y[0]],I=w[y[1]];if(T){if(T){const{tl:L,br:H,pixelRatio:W}=T;for(let se=s;se<u;se++)this.paintVertexArray.emplace(se,L[0],L[1],H[0],H[1],W)}if(I){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:L,br:H}=I;for(let W=s;W<u;W++)this.paintTransitionVertexArray.emplace(W,L[0],L[1],H[0],H[1])}}}upload(s){const u=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,u)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=s.createVertexBuffer(this.paintTransitionVertexArray,zA.members,u))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class kc{constructor(s,u,y=()=>!0){this.binders={},this._buffers=[],this.context=u;const w=[];for(const T in s.paint._values){const I=s.paint.get(T);if(T.endsWith("-use-theme")||!y(T)||!(I instanceof Ru&&Ss(I.property.specification)))continue;const L=Cm(T,s.type),H=I.value,W=I.property.specification.type,se=!!I.property.useIntegerZoom,ue=T==="line-dasharray"||T.endsWith("pattern"),me=s.paint.get(`${T}-use-theme`),Ee=T==="line-dasharray"&&s.layout.get("line-cap").value.kind!=="constant"||me&&me.value.kind!=="constant";if(H.kind!=="constant"||Ee)if(H.kind==="source"||Ee||ue){const Ie=$d(T,W,"source");this.binders[T]=ue?new oh(H,L,W,Ie,s.id):new df(H,L,W,Ie),w.push(`/a_${T}`)}else{const Ie=$d(T,W,"composite");this.binders[T]=new Hu(H,L,W,se,u,Ie),w.push(`/z_${T}`)}else this.binders[T]=ue?new Tp(H.value,L):new Bp(H.value,L,W,u),w.push(`/u_${T}`);me&&(this.binders[T].lutExpression=me.value)}this.cacheKey=w.sort().join("")}getMaxValue(s){const u=this.binders[s];return u instanceof df||u instanceof Hu?u.maxValue:0}populatePaintArrays(s,u,y,w,T,I,L,H){for(const W in this.binders){const se=this.binders[W];se.context=this.context,(se instanceof df||se instanceof Hu||se instanceof oh)&&se.populatePaintArray(s,u,y,w,T,I,L,H)}}setConstantPatternPositions(s,u){for(const y in this.binders){const w=this.binders[y];w instanceof Tp&&w.setConstantPatternPositions(s,u)}}getPatternTransitionVertexBuffer(s){const u=this.binders[s];return u instanceof oh?u.paintTransitionVertexBuffer:null}updatePaintArrays(s,u,y,w,T,I,L,H,W,se){let ue=!1;const me=Object.keys(s),Ee=me.length!==0&&!H,Ie=Ee?me:u.uniqueIds;this.context.lut=T.lut;for(const Re in this.binders){const ze=this.binders[Re];if(ze.context=this.context,(ze instanceof df||ze instanceof Hu||ze instanceof oh)&&ze.expression&&ze.expression.kind&&ze.expression.kind!=="constant"&&(ze.expression.isStateDependent===!0||ze.expression.isLightConstant===!1)){const Xe=T.paint.get(Re);ze.expression=Xe.value;for(const ht of Ie){const ut=s[ht.toString()];u.eachPosition(ht,(mt,$t,Ut)=>{const Ht=w.feature(mt);ze.updatePaintArray($t,Ut,Ht,ut,I,L,W,se)})}if(!Ee)for(const ht of y.uniqueIds){const ut=s[ht.toString()];y.eachPosition(ht,(mt,$t,Ut)=>{const Ht=w.feature(mt);ze.updatePaintArray($t,Ut,Ht,ut,I,L,W,se)})}ue=!0}}return ue}defines(){const s=[];for(const u in this.binders){const y=this.binders[u];(y instanceof Bp||y instanceof Tp)&&s.push(...y.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return s}getBinderAttributes(){const s=[];for(const u in this.binders){const y=this.binders[u];if(y instanceof df||y instanceof Hu||y instanceof oh)for(let w=0;w<y.paintVertexAttributes.length;w++)s.push(y.paintVertexAttributes[w].name);if(y instanceof oh)for(let w=0;w<zA.members.length;w++)s.push(zA.members[w].name)}return s}getBinderUniforms(){const s=[];for(const u in this.binders){const y=this.binders[u];if(y instanceof Bp||y instanceof Tp||y instanceof Hu)for(const w of y.uniformNames)s.push(w)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const u=[];for(const y in this.binders){const w=this.binders[y];if(w instanceof Bp||w instanceof Tp||w instanceof Hu)for(const T of w.uniformNames)u.push({name:T,property:y,binding:w.getBinding(s,T)})}return u}setUniforms(s,u,y,w,T){for(const{name:I,property:L,binding:H}of y)this.binders[L].setUniform(s,H,T,w.get(L),I)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const u=this.binders[s];(u instanceof df||u instanceof Hu||u instanceof oh)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer),u instanceof oh&&u.paintTransitionVertexBuffer&&this._buffers.push(u.paintTransitionVertexBuffer)}}upload(s){for(const u in this.binders){const y=this.binders[u];(y instanceof df||y instanceof Hu||y instanceof oh)&&y.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const u=this.binders[s];(u instanceof df||u instanceof Hu||u instanceof oh)&&u.destroy()}}}class Qu{constructor(s,u,y=()=>!0){this.programConfigurations={};for(const w of s)this.programConfigurations[w.id]=new kc(w,u,y);this.needsUpload=!1,this._featureMap=new Uf,this._featureMapWithoutIds=new Uf,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(s,u,y,w,T,I,L,H,W){for(const se in this.programConfigurations)this.programConfigurations[se].populatePaintArrays(s,u,w,T,I,L,H,W);u.id!==void 0?this._featureMap.add(u.id,y,this._bufferOffset,s):(this._featureMapWithoutIds.add(this._idlessCounter,y,this._bufferOffset,s),this._idlessCounter+=1),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,y,w,T,I,L,H){for(const W of y)this.needsUpload=this.programConfigurations[W.id].updatePaintArrays(s,this._featureMap,this._featureMapWithoutIds,u,W,w,T,I,L||0,H)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const sA={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"],"fill-bridge-guard-rail-color":["structure_color"],"fill-tunnel-structure-color":["structure_color"]};function Cm(d,s){return sA[d]||[d.replace(`${s}-`,"").replace(/-/g,"_")]}const VA={"line-pattern":{source:af,composite:af},"fill-pattern":{source:af,composite:af},"fill-extrusion-pattern":{source:af,composite:af},"line-dasharray":{source:lf,composite:lf}},ag={color:{source:ff,composite:Qh},number:{source:Ud,composite:ff}};function $d(d,s,u){const y=VA[d];return y&&y[u]||ag[s][u]}Xn(Bp,"ConstantBinder"),Xn(Tp,"PatternConstantBinder"),Xn(df,"SourceExpressionBinder"),Xn(oh,"PatternCompositeBinder"),Xn(Hu,"CompositeExpressionBinder"),Xn(kc,"ProgramConfiguration",{omit:["_buffers"]}),Xn(Qu,"ProgramConfigurationSet");const Oc=tn/Math.PI/2,Gi=5,C=6,c=16383,A=64,E=[A,32,16],M=-Oc,P=Oc;function j(d,s,u,y=Oc){return u=li(u),[d*Math.sin(u)*y,-s*y,d*Math.cos(u)*y]}function K(d,s,u){return j(Math.cos(li(d)),Math.sin(li(d)),s,u)}const te=63710088e-1,ge=2*Math.PI*te;class ve{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ve(rr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const u=Math.PI/180,y=this.lat*u,w=s.lat*u,T=Math.sin(y)*Math.sin(w)+Math.cos(y)*Math.cos(w)*Math.cos((s.lng-this.lng)*u);return te*Math.acos(Math.min(T,1))}toBounds(s=0){const u=360*s/40075017,y=u/Math.cos(Math.PI/180*this.lat);return new Me({lng:this.lng-y,lat:this.lat-u},{lng:this.lng+y,lat:this.lat+u})}toEcef(s){return K(this.lat,this.lng,Oc+s*Oc/te)}static convert(s){if(s instanceof ve)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new ve(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new ve(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Me{constructor(s,u){if(s)if(u)this.setSouthWest(s).setNorthEast(u);else if(s.length===4){const y=s;this.setSouthWest([y[0],y[1]]).setNorthEast([y[2],y[3]])}else{const y=s;this.setSouthWest(y[0]).setNorthEast(y[1])}}setNorthEast(s){return this._ne=s instanceof ve?new ve(s.lng,s.lat):ve.convert(s),this}setSouthWest(s){return this._sw=s instanceof ve?new ve(s.lng,s.lat):ve.convert(s),this}extend(s){const u=this._sw,y=this._ne;let w,T;if(s instanceof ve)w=s,T=s;else{if(!(s instanceof Me))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Me.convert(s)):this.extend(ve.convert(s)):typeof s=="object"&&s!==null&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(ve.convert(s)):this;if(w=s._sw,T=s._ne,!w||!T)return this}return u||y?(u.lng=Math.min(w.lng,u.lng),u.lat=Math.min(w.lat,u.lat),y.lng=Math.max(T.lng,y.lng),y.lat=Math.max(T.lat,y.lat)):(this._sw=new ve(w.lng,w.lat),this._ne=new ve(T.lng,T.lat)),this}getCenter(){return new ve((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ve(this.getWest(),this.getNorth())}getSouthEast(){return new ve(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:u,lat:y}=ve.convert(s);let w=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&w}static convert(s){if(s)return s instanceof Me?s:new Me(s)}}const Ce=0,Pe=25.5;function Qe(d){return ge*Math.cos(d*Math.PI/180)}function je(d){return(180+d)/360}function qe(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function Ke(d,s){return d/Qe(s)}function lt(d){return 360*d-180}function dt(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function vt(d,s){return d*Qe(dt(s))}const Tt=85.051129;function Dt(d){return Math.cos(li(nt(d,-Tt,Tt)))}function Vt(d,s){const u=nt(s,Ce,Pe),y=Math.pow(2,u);return Dt(d)*ge/(512*y)}function It(d){return 1/Math.cos(d*Math.PI/180)}function Mt(d,s=0){const u=Math.exp(Math.PI*(1-(d.y+s/tn)/(1<<d.z)*2));return 80150034*u/(u*u+1)/tn/(1<<d.z)}class Pt{constructor(s,u,y=0){this.x=+s,this.y=+u,this.z=+y}static fromLngLat(s,u=0){const y=ve.convert(s);return new Pt(je(y.lng),qe(y.lat),Ke(u,y.lat))}toLngLat(){return new ve(lt(this.x),dt(this.y))}toAltitude(){return vt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ge*It(dt(this.y))}}function dr(d,s,u,y,w,T,I,L,H){const W=(s+y)/2,se=(u+w)/2,ue=new tr(W,se);L(ue),function(me,Ee,Ie,Re,ze,Xe){const ht=Ie-ze,ut=Re-Xe;return Math.abs((Re-Ee)*ht-(Ie-me)*ut)/Math.hypot(ht,ut)}(ue.x,ue.y,T.x,T.y,I.x,I.y)>=H?(dr(d,s,u,W,se,T,ue,L,H),dr(d,W,se,y,w,ue,I,L,H)):d.push(I)}function sr(d,s,u){let y=d[0],w=y.x,T=y.y;s(y);const I=[y];for(let L=1;L<d.length;L++){const H=d[L],{x:W,y:se}=H;s(H),dr(I,w,T,W,se,y,H,s,u),w=W,T=se,y=H}return I}function Qr(d,s,u,y){if(y(s,u)){const w=s.add(u)._mult(.5);Qr(d,s,w,y),Qr(d,w,u,y)}else d.push(u)}function Br(d,s){let u=d[0];const y=[u];for(let w=1;w<d.length;w++){const T=d[w];Qr(y,u,T,s),u=T}return y}const Jr=Math.pow(2,14)-1,yn=-Jr-1;function vr(d,s){const u=Math.round(d.x*s),y=Math.round(d.y*s);return d.x=nt(u,yn,Jr),d.y=nt(y,yn,Jr),(u<d.x||u>d.x+1||y<d.y||y>d.y+1)&&Qi("Geometry exceeds allowed extent, reduce your vector tile buffer size"),d}function qt(d,s,u){const y=d.loadGeometry(),w=d.extent,T=tn/w;if(s&&u&&u.projection.isReprojectedInTileSpace){const I=1<<s.z,{scale:L,x:H,y:W,projection:se}=u,ue=me=>{const Ee=lt((s.x+me.x/w)/I),Ie=dt((s.y+me.y/w)/I),Re=se.project(Ee,Ie);me.x=(Re.x*L-H)*w,me.y=(Re.y*L-W)*w};for(let me=0;me<y.length;me++)if(d.type!==1)y[me]=sr(y[me],ue,1);else{const Ee=[];for(const Ie of y[me])Ie.x<0||Ie.x>=w||Ie.y<0||Ie.y>=w||(ue(Ie),Ee.push(Ie));y[me]=Ee}}for(const I of y)for(const L of I)vr(L,T);return y}function kr(d,s){return{type:d.type,id:d.id,properties:d.properties,geometry:s?qt(d):[]}}class br{constructor(s,u,y,w,T){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=s,this._geometry=-1,this._keys=w,this._values=T,s.readFields(an,this,u)}loadGeometry(){const s=this._pbf;s.pos=this._geometry;const u=s.readVarint()+s.pos,y=[];let w,T=1,I=0,L=0,H=0;for(;s.pos<u;){if(I<=0){const W=s.readVarint();T=7&W,I=W>>3}if(I--,T===1||T===2)L+=s.readSVarint(),H+=s.readSVarint(),T===1&&(w&&y.push(w),w=[]),w&&w.push(new tr(L,H));else{if(T!==7)throw new Error(`unknown command ${T}`);w&&w.push(w[0].clone())}}return w&&y.push(w),y}bbox(){const s=this._pbf;s.pos=this._geometry;const u=s.readVarint()+s.pos;let y=1,w=0,T=0,I=0,L=1/0,H=-1/0,W=1/0,se=-1/0;for(;s.pos<u;){if(w<=0){const ue=s.readVarint();y=7&ue,w=ue>>3}if(w--,y===1||y===2)T+=s.readSVarint(),I+=s.readSVarint(),T<L&&(L=T),T>H&&(H=T),I<W&&(W=I),I>se&&(se=I);else if(y!==7)throw new Error(`unknown command ${y}`)}return[L,W,H,se]}toGeoJSON(s,u,y){const w=this.extent*Math.pow(2,y),T=this.extent*s,I=this.extent*u,L=this.loadGeometry();function H(me){return[360*(me.x+T)/w-180,360/Math.PI*Math.atan(Math.exp((1-2*(me.y+I)/w)*Math.PI))-90]}function W(me){return me.map(H)}let se;if(this.type===1){const me=[];for(const Ie of L)me.push(Ie[0]);const Ee=W(me);se=me.length===1?{type:"Point",coordinates:Ee[0]}:{type:"MultiPoint",coordinates:Ee}}else if(this.type===2){const me=L.map(W);se=me.length===1?{type:"LineString",coordinates:me[0]}:{type:"MultiLineString",coordinates:me}}else{if(this.type!==3)throw new Error("unknown feature type");{const me=function(Ie){const Re=Ie.length;if(Re<=1)return[Ie];const ze=[];let Xe,ht;for(let ut=0;ut<Re;ut++){const mt=ln(Ie[ut]);mt!==0&&(ht===void 0&&(ht=mt<0),ht===mt<0?(Xe&&ze.push(Xe),Xe=[Ie[ut]]):Xe&&Xe.push(Ie[ut]))}return Xe&&ze.push(Xe),ze}(L),Ee=[];for(const Ie of me)Ee.push(Ie.map(W));se=Ee.length===1?{type:"Polygon",coordinates:Ee[0]}:{type:"MultiPolygon",coordinates:Ee}}}const ue={type:"Feature",geometry:se,properties:this.properties};return this.id!=null&&(ue.id=this.id),ue}}function an(d,s,u){d===1?s.id=u.readVarint():d===2?function(y,w){const T=y.readVarint()+y.pos;for(;y.pos<T;){const I=w._keys[y.readVarint()],L=w._values[y.readVarint()];w.properties[I]=L}}(u,s):d===3?s.type=u.readVarint():d===4&&(s._geometry=u.pos)}function ln(d){let s=0;for(let u,y,w=0,T=d.length,I=T-1;w<T;I=w++)u=d[w],y=d[I],s+=(y.x-u.x)*(u.y+y.y);return s}br.types=["Unknown","Point","LineString","Polygon"];class dn{constructor(s,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(Mn,this,u),this.length=this._features.length}feature(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];const u=this._pbf.readVarint()+this._pbf.pos;return new br(this._pbf,u,this.extent,this._keys,this._values)}}function Mn(d,s,u){d===15?s.version=u.readVarint():d===1?s.name=u.readString():d===5?s.extent=u.readVarint():d===2?s._features.push(u.pos):d===3?s._keys.push(u.readString()):d===4&&s._values.push(function(y){let w=null;const T=y.readVarint()+y.pos;for(;y.pos<T;){const I=y.readVarint()>>3;w=I===1?y.readString():I===2?y.readFloat():I===3?y.readDouble():I===4?y.readVarint64():I===5?y.readVarint():I===6?y.readSVarint():I===7?y.readBoolean():null}if(w==null)throw new Error("unknown feature value");return w}(u))}class di{constructor(s,u){this.layers=s.readFields(Ci,{},u)}}function Ci(d,s,u){if(d===3){const y=new dn(u,u.readVarint()+u.pos);y.length&&(s[y.name]=y)}}const ti="3d_elevation_id",xi="level";class vi{constructor(){this._valid=!1}reset(s){return this.feature=s,this._valid=!0,this._geometry=s.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(s,u){return this._valid&&s(u(this._geometry)),this}require(s,u,y){return this.get(s,!0,u,y)}optional(s,u,y){return this.get(s,!1,u,y)}success(){return this._valid}get(s,u,y,w){const T=this.feature.properties.hasOwnProperty(s)?+this.feature.properties[s]:void 0;return this._valid&&T!==void 0&&!Number.isNaN(T)?y(w?w(T):T):u&&(this._valid=!1),this}}class qi{constructor(s,u){this.featureFunc=s,this.vertexFunc=u}parseFeature(s,u,y){return this.featureFunc(s,u,y)}parseVertex(s,u,y){return this.vertexFunc(s,u,y)}}const fs=new qi((d,s,u)=>d.reset(s).require(ti,y=>{u.id=y}).optional("fixed_height_relative",y=>{u.constantHeight=y},no.decodeRelativeHeight).geometry(y=>{u.bounds=y},Lr).success(),(d,s,u)=>d.reset(s).require(ti,y=>{u.id=y}).require("elevation_idx",y=>{u.idx=y}).require("extent",y=>{u.extent=y}).require("height_relative",y=>{u.height=y},no.decodeRelativeHeight).geometry(y=>{u.position=y},no.getPoint).success()),Bs=new qi((d,s,u)=>d.reset(s).require(ti,y=>{u.id=y}).optional("fixed_height",y=>{u.constantHeight=y},no.decodeMetricHeight).geometry(y=>{u.bounds=y},Lr).success(),(d,s,u)=>d.reset(s).require(ti,y=>{u.id=y}).require("elevation_idx",y=>{u.idx=y}).require("extent",y=>{u.extent=y}).require("height",y=>{u.height=y},no.decodeMetricHeight).geometry(y=>{u.position=y},no.getPoint).success());class no{static getPoint(s){return ur(s[0][0].x,s[0][0].y)}static decodeRelativeHeight(s){return 1e-4*s*5}static decodeMetricHeight(s){return 1e-4*s}static parse(s){const u=[],y=[],w=s.length,T=new vi;for(let L=0;L<w;L++){const H=s.feature(L),W=H.properties.version,se=(I=W)?I==="1.0.1"?Bs:void 0:fs;if(se===void 0){Qi(`Unknown elevation feature version number ${W||"(unknown)"}`);continue}const ue=H.properties.hasOwnProperty("type")?H.properties.type:void 0;if(ue){if(br.types[H.type]==="Point"&&ue==="curve_point"){const me={};se.parseVertex(T,H,me)&&u.push(me)}else if(br.types[H.type]==="Polygon"&&ue==="curve_meta"){const me={};se.parseFeature(T,H,me)&&y.push(me)}}}var I;return{vertices:u,features:y}}}class rs{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,y){const w=wn(u,this.dir);if(Math.abs(w)<1e-6)return!1;const T=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1])/w;return y[0]=this.pos[0]+this.dir[0]*T,y[1]=this.pos[1]+this.dir[1]*T,!0}}class io{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,y){const w=Oe(u,this.dir);if(Math.abs(w)<1e-6)return!1;const T=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1]+(s[2]-this.pos[2])*u[2])/w;return y[0]=this.pos[0]+this.dir[0]*T,y[1]=this.pos[1]+this.dir[1]*T,y[2]=this.pos[2]+this.dir[2]*T,!0}closestPointOnSphere(s,u,y){if(function(Ee,Ie){var Re=Ee[0],ze=Ee[1],Xe=Ee[2],ht=Ie[0],ut=Ie[1],mt=Ie[2];return Math.abs(Re-ht)<=h*Math.max(1,Math.abs(Re),Math.abs(ht))&&Math.abs(ze-ut)<=h*Math.max(1,Math.abs(ze),Math.abs(ut))&&Math.abs(Xe-mt)<=h*Math.max(1,Math.abs(Xe),Math.abs(mt))}(this.pos,s)||u===0)return y[0]=y[1]=y[2]=0,!1;const[w,T,I]=this.dir,L=this.pos[0]-s[0],H=this.pos[1]-s[1],W=this.pos[2]-s[2],se=w*w+T*T+I*I,ue=2*(L*w+H*T+W*I),me=ue*ue-4*se*(L*L+H*H+W*W-u*u);if(me<0){const Ee=Math.max(-ue/2,0),Ie=L+w*Ee,Re=H+T*Ee,ze=W+I*Ee,Xe=Math.hypot(Ie,Re,ze);return y[0]=Ie*u/Xe,y[1]=Re*u/Xe,y[2]=ze*u/Xe,!1}{const Ee=(-ue-Math.sqrt(me))/(2*se);if(Ee<0){const Ie=Math.hypot(L,H,W);return y[0]=L*u/Ie,y[1]=H*u/Ie,y[2]=W*u/Ie,!1}return y[0]=L+w*Ee,y[1]=H+T*Ee,y[2]=W+I*Ee,!0}}}class fo{constructor(s,u,y,w,T){this.TL=s,this.TR=u,this.BR=y,this.BL=w,this.horizon=T}static fromInvProjectionMatrix(s,u,y){const w=[-1,1,1],T=[1,1,1],I=[1,-1,1],L=[-1,-1,1],H=Be(w,w,s),W=Be(T,T,s),se=Be(I,I,s),ue=Be(L,L,s);return new fo(H,W,se,ue,u/y)}}function ko(d,s,u){let y=1/0,w=-1/0;const T=[];for(const I of d){ot(T,I,s);const L=Oe(T,u);y=Math.min(y,L),w=Math.max(w,L)}return[y,w]}function Cs(d,s){let u=!0;for(let y=0;y<d.planes.length;y++){const w=d.planes[y];let T=0;for(let I=0;I<s.length;I++)T+=Oe(w,s[I])+w[3]>=0;if(T===0)return 0;T!==s.length&&(u=!1)}return u?2:1}function so(d,s){for(const u of d.projections){const y=ko(s,d.points[0],u.axis);if(u.projection[1]<y[0]||u.projection[0]>y[1])return 0}return 1}function he(d,s){let u=0;const y=[0,0,0,0];for(let I=0;I<d.length;I++)y[0]=d[I][0],y[1]=d[I][1],y[2]=d[I][2],y[3]=1,(w=y)[0]*(T=s)[0]+w[1]*T[1]+w[2]*T[2]+w[3]*T[3]>=0&&u++;var w,T;return u}class le{constructor(s,u){this.points=s||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=ye.fromPoints(this.points),this.projections=[],this.frustumEdges=[ot([],this.points[2],this.points[3]),ot([],this.points[0],this.points[3]),ot([],this.points[4],this.points[0]),ot([],this.points[5],this.points[1]),ot([],this.points[6],this.points[2]),ot([],this.points[7],this.points[3])];for(const y of this.frustumEdges){const w=[0,-y[2],y[1]],T=[y[2],0,-y[0]];this.projections.push({axis:w,projection:ko(this.points,this.points[0],w)}),this.projections.push({axis:T,projection:ko(this.points,this.points[0],T)})}}static fromInvProjectionMatrix(s,u,y,w){const T=Math.pow(2,y),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(W=>{const se=kt([],W,s),ue=1/se[3]/u*T;return(me=se)[0]=(Ee=se)[0]*(Ie=[ue,ue,w?1/se[3]:ue,ue])[0],me[1]=Ee[1]*Ie[1],me[2]=Ee[2]*Ie[2],me[3]=Ee[3]*Ie[3],me;var me,Ee,Ie}),L=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(W=>{const se=pe([],re([],ot([],I[W[0]],I[W[1]]),ot([],I[W[2]],I[W[1]]))),ue=-Oe(se,I[W[1]]);return se.concat(ue)}),H=[];for(let W=0;W<I.length;W++)H.push([I[W][0],I[W][1],I[W][2]]);return new le(H,L)}intersectsPrecise(s,u,y){for(let w=0;w<u.length;w++)if(!he(s,u[w]))return 0;for(let w=0;w<this.planes.length;w++)if(!he(s,this.planes[w]))return 0;for(const w of y)for(const T of this.frustumEdges){const I=re([],w,T),L=G(I);if(L===0)continue;de(I,I,1/L);const H=ko(this.points,this.points[0],I),W=ko(s,this.points[0],I);if(H[0]>W[1]||W[0]>H[1])return 0}return 1}containsPoint(s){for(const u of this.planes){const y=u[3];if(Oe([u[0],u[1],u[2]],s)+y<0)return!1}return!0}}class ye{static fromPoints(s){const u=[1/0,1/0,1/0],y=[-1/0,-1/0,-1/0];for(const w of s)U(u,u,w),Y(y,y,w);return new ye(u,y)}static fromTileIdAndHeight(s,u,y){const w=1<<s.canonical.z,T=s.canonical.x,I=s.canonical.y;return new ye([T/w,I/w,u],[(T+1)/w,(I+1)/w,y])}static applyTransform(s,u){const y=s.getCorners();for(let w=0;w<y.length;++w)Be(y[w],y[w],u);return ye.fromPoints(y)}static applyTransformFast(s,u){const y=[u[12],u[13],u[14]],w=[...y];for(let T=0;T<3;T++)for(let I=0;I<3;I++){const L=u[4*I+T],H=L*s.min[I],W=L*s.max[I];y[T]+=Math.min(H,W),w[T]+=Math.max(H,W)}return new ye(y,w)}static projectAabbCorners(s,u){const y=s.getCorners();for(let w=0;w<y.length;++w)Be(y[w],y[w],u);return y}constructor(s,u){this.min=s,this.max=u,this.center=de([],k([],this.min,this.max),.5)}quadrant(s){const u=[s%2==0,s<2],y=ce(this.min),w=ce(this.max);for(let T=0;T<u.length;T++)y[T]=u[T]?this.min[T]:this.center[T],w[T]=u[T]?this.center[T]:this.max[T];return w[2]=this.max[2],new ye(y,w)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,u=this.max;return[[s[0],s[1],s[2]],[u[0],s[1],s[2]],[u[0],u[1],s[2]],[s[0],u[1],s[2]],[s[0],s[1],u[2]],[u[0],s[1],u[2]],[u[0],u[1],u[2]],[s[0],u[1],u[2]]]}intersects(s){return this.intersectsAabb(s.bounds)?Cs(s,this.getCorners()):0}intersectsFlat(s){return this.intersectsAabb(s.bounds)?Cs(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(s,u){return u||this.intersects(s)?so(s,this.getCorners()):0}intersectsPreciseFlat(s,u){return u||this.intersectsFlat(s)?so(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(s){for(let u=0;u<3;++u)if(this.min[u]>s.max[u]||s.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(s){return!(this.min[0]>s.max[0]||s.min[0]>this.max[0]||this.min[1]>s.max[1]||s.min[1]>this.max[1])}encapsulate(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s.min[u]),this.max[u]=Math.max(this.max[u],s.max[u])}encapsulatePoint(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s[u]),this.max[u]=Math.max(this.max[u],s[u])}closestPoint(s){return[Math.max(Math.min(this.max[0],s[0]),this.min[0]),Math.max(Math.min(this.max[1],s[1]),this.min[1]),Math.max(Math.min(this.max[2],s[2]),this.min[2])]}}Xn(ye,"Aabb");class _e{constructor(s,u){this.feature=s,this.metersToTile=u,this.index=0}get(){const s=this.feature.vertices[this.index],u=this.feature.vertexProps[this.index].dir,y=u[1],w=-u[0],T=(s.extent+1)*this.metersToTile;return[new tr(Math.trunc(s.position[0]+y*T),Math.trunc(s.position[1]+w*T)),new tr(Math.trunc(s.position[0]-y*T),Math.trunc(s.position[1]-w*T))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class De{constructor(s,u,y,w,T,I){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=s,this.heightRange={min:y,max:y},this.safeArea=u,this.constantHeight=y,this.constantHeight==null&&(this.constantHeight!=null||w.length!==0)){this.vertices=w,this.edges=T,this.edges=this.edges.filter(L=>{return L.a<this.vertices.length&&L.b<this.vertices.length&&!((H=this.vertices[L.a].position)[0]===(W=this.vertices[L.b].position)[0]&&H[1]===W[1]);var H,W}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const L of this.vertices)this.vertexProps.push({dir:ur(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,L.height),this.heightRange.max=Math.max(this.heightRange.max,L.height);for(const L of this.edges){const H=this.vertices[L.a].position,W=this.vertices[L.b].position,se=mr(er(),W,H),ue=sn(se),me=Mr(er(),se,1/ue);this.edgeProps.push({vec:se,dir:me,len:ue});const Ee=this.vertexProps[L.a].dir,Ie=this.vertexProps[L.b].dir;Yt(Ee,Ee,me),Yt(Ie,Ie,me)}for(const L of this.vertexProps)L.dir[0]===0&&L.dir[1]===0||Un(L.dir,L.dir);this.tessellate(I)}}pointElevation(s){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(s);if(u==null)return 0;const[y,w]=u;return at(this.vertices[this.edges[y].a].height,this.vertices[this.edges[y].b].height,w)}computeSlopeNormal(s,u){const y=this.getClosestEdge(s);if(!y)return Z(0,0,1);const w=y[0],T=this.edges[w],I=this.edgeProps[w].vec,L=Z(I[0],I[1],(this.vertices[T.b].height-this.vertices[T.a].height)*u),H=Z(L[1],-L[0],0);re(H,H,L);const W=G(H);return W>0?de(H,H,1/W):Z(0,0,1)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(s){if(this.edges.length===0)return;let u=0,y=Number.POSITIVE_INFINITY,w=0;const T=ur(s.x,s.y);for(let I=0;I<this.edges.length;I++){const L=this.edges[I],H=this.edgeProps[I].dir,W=new rs(T,this.edgeProps[I].dir),se=this.vertices[L.a].position,ue=this.vertices[L.b].position,me=er(),Ee=er(),Ie=W.intersectsPlane(se,this.vertexProps[L.a].dir,me),Re=W.intersectsPlane(ue,this.vertexProps[L.b].dir,Ee);if(!Ie||!Re)continue;const ze=mr(er(),Ee,me),Xe=mr(er(),T,me),ht=wn(ze,ze),ut=ht>0?wn(Xe,ze)/ht:0,mt=nt(ut,0,1),$t=Math.abs((ut-mt)*this.edgeProps[I].len),Ut=mr(er(),T,se),Ht=$t+Math.abs(wn(Ut,ur(H[1],-H[0])));Ht<y&&(u=I,y=Ht,w=mt)}return[u,w]}tessellate(s){for(let u=this.edges.length-1;u>=0;--u){const y=this.edges[u].a,w=this.edges[u].b,{position:T,height:I,extent:L}=this.vertices[y],{position:H,height:W,extent:se}=this.vertices[w],ue=this.vertexProps[y].dir,me=this.vertexProps[w].dir,Ee=Z(T[0]/s,T[1]/s,I),Ie=Z(H[0]/s,H[1]/s,W),Re=Z(ue[1],-ue[0],0);de(Re,Re,L);const ze=Z(me[1],-me[0],0);if(de(ze,ze,se),this.distSqLines(Z(Ee[0]+.5*Re[0],Ee[1]+.5*Re[1],Ee[2]+.5*Re[2]),Z(Ie[0]-.5*ze[0],Ie[1]-.5*ze[1],Ie[2]-.5*ze[2]),Z(Ee[0]-.5*Re[0],Ee[1]-.5*Re[1],Ee[2]-.5*Re[2]),Z(Ie[0]+.5*ze[0],Ie[1]+.5*ze[1],Ie[2]+.5*ze[2]))<=.0025000000000000005)continue;const Xe=this.vertices.length,ht=Yt(er(),T,H);this.vertices.push({position:Mr(ht,ht,.5),height:.5*(I+W),extent:.5*(L+se)});const ut=Yt(er(),ue,me);this.vertexProps.push({dir:Un(ut,ut)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:y,b:Xe}),this.edges.push({a:Xe,b:w});const mt=mr(er(),this.vertices[Xe].position,T),$t=sn(mt),Ut={vec:mt,dir:Mr(er(),mt,1/$t),len:$t};this.edgeProps.push(Ut),this.edgeProps.push(Ut)}}distSqLines(s,u,y,w){const T=R(fe(),u,s),I=R(fe(),w,y),L=R(fe(),s,y),H=Oe(T,T),W=Oe(T,I),se=Oe(T,L),ue=Oe(I,I),me=Oe(I,L),Ee=H*ue-W*W;if(Ee===0){const ze=Oe(L,I)/Oe(I,I);return xe(ie(fe(),y,w,ze),s)}const Ie=(W*me-se*ue)/Ee,Re=(H*me-W*se)/Ee;return xe(ie(fe(),s,u,Ie),ie(fe(),y,w,Re))}}class it{static parseFrom(s,u){const y=no.parse(s);if(!y)return[];let{vertices:w,features:T}=y;const I=1/Mt(u);T.sort((se,ue)=>se.id-ue.id),w.sort((se,ue)=>se.id-ue.id||se.idx-ue.idx),w=w.filter((se,ue,me)=>ue===me.findIndex(Ee=>Ee.id===se.id&&Ee.idx===se.idx));const L=new Array;let H=0;const W=w.length;for(const se of T){if(se.constantHeight){L.push(new De(se.id,se.bounds,se.constantHeight));continue}for(;H!==W&&w[H].id<se.id;)H++;if(H===W||w[H].id!==se.id)continue;const ue=new Array,me=new Array,Ee=H;for(;H!==W&&w[H].id===se.id;){const Ie=w[H];if(ue.push({position:Ie.position,height:Ie.height,extent:Ie.extent}),H!==Ee&&w[H-1].idx===Ie.idx-1){const Re=H-Ee;me.push({a:Re-1,b:Re})}H++}L.push(new De(se.id,se.bounds,void 0,ue,me,I))}return L}static getElevationFeature(s,u){if(!u)return;const y=+s.properties[ti];return Number.isNaN(y)?void 0:u.find(w=>w.id===y)}}class At{constructor(s,u){this.zScale=1,this.xOffset=0,this.yOffset=0,s.equals(u)||(this.zScale=Math.pow(2,u.z-s.z),this.xOffset=(s.x*this.zScale-u.x)*tn,this.yOffset=(s.y*this.zScale-u.y)*tn)}constantElevation(s,u){if(s.constantHeight!=null)return this.computeBiasedHeight(s.constantHeight,u)}pointElevation(s,u,y){const w=this.constantElevation(u,y);return w??(s.x=s.x*this.zScale+this.xOffset,s.y=s.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(s),y))}computeBiasedHeight(s,u){return u<=0?s:s+u*Ct(0,u,s>=0?s:Math.abs(.5*s))}}Xn(De,"ElevationFeature");class Rt{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new Wc,this.indexArray=new Lo,this.segments=new wo,this.programConfigurations=new Qu(s.layers,{zoom:s.zoom,lut:s.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.elevationMode=this.layers[0].layout.get("circle-elevation-reference"),this.hasElevation=!1,this.elevationMode!=="none"&&(this.elevatedLayoutVertexArray=new Ud),this.worldview=s.worldview}updateFootprints(s,u){}populate(s,u,y,w){const T=this.layers[0],I=[];let L=null;T.type==="circle"&&(L=T.layout.get("circle-sort-key"));for(const{feature:W,id:se,index:ue,sourceLayerIndex:me}of s){const Ee=this.layers[0]._featureFilter.needGeometry,Ie=kr(W,Ee);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom,{worldview:this.worldview}),Ie,y))continue;const Re=L?L.evaluate(Ie,{},y):void 0,ze={id:se,properties:W.properties,type:W.type,sourceLayerIndex:me,index:ue,geometry:Ee?Ie.geometry:qt(W,y,w),patterns:{},sortKey:Re};I.push(ze)}L&&I.sort((W,se)=>W.sortKey-se.sortKey);let H=null;w.projection.name==="globe"&&(this.globeExtVertexArray=new cf,H=w.projection);for(const W of I){const{geometry:se,index:ue,sourceLayerIndex:me}=W,Ee=s[ue].feature;this.addFeature(W,se,ue,u.availableImages,y,H,u.brightness,u.elevationFeatures),u.featureIndex.insert(Ee,se,ue,me,this.index)}this.hasElevation||(this.elevatedLayoutVertexArray=void 0)}update(s,u,y,w,T,I,L){this.programConfigurations.updatePaintArrays(s,u,T,y,w,I,L,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,xu.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,Gd.members)),this.elevatedLayoutVertexArray&&(this.elevatedLayoutVertexBuffer=s.createVertexBuffer(this.elevatedLayoutVertexArray,hd.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy())}addFeature(s,u,y,w,T,I,L,H){let W;this.elevationMode!=="none"&&(W=it.getElevationFeature(s,H));for(const se of u)for(const ue of se){const me=ue.x,Ee=ue.y;if(me<0||me>=tn||Ee<0||Ee>=tn)continue;if(I){const ze=I.projectTilePoint(me,Ee,T),Xe=I.upVector(T,me,Ee);this.addGlobeExtVertex(ze,Xe),this.addGlobeExtVertex(ze,Xe),this.addGlobeExtVertex(ze,Xe),this.addGlobeExtVertex(ze,Xe)}const Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),Re=Ie.vertexLength;if(this.addCircleVertex(me,Ee,-1,-1),this.addCircleVertex(me,Ee,1,-1),this.addCircleVertex(me,Ee,1,1),this.addCircleVertex(me,Ee,-1,1),this.elevationMode!=="none"){const ze=W?W.pointElevation(new tr(me,Ee)):0;this.hasElevation=this.hasElevation||ze!==0;for(let Xe=0;Xe<4;Xe++)this.elevatedLayoutVertexArray.emplaceBack(ze)}this.indexArray.emplaceBack(Re,Re+1,Re+2),this.indexArray.emplaceBack(Re,Re+2,Re+3),Ie.vertexLength+=4,Ie.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,{},w,T,L,void 0,this.worldview)}addCircleVertex(s,u,y,w){this.layoutVertexArray.emplaceBack(2*s+(y+1)/2,2*u+(w+1)/2)}addGlobeExtVertex(s,u){this.globeExtVertexArray.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}}function zt(d,s){for(let u=0;u<d.length;u++)if(oo(s,d[u]))return!0;for(let u=0;u<s.length;u++)if(oo(d,s[u]))return!0;return!!Fn(d,s)}function Ir(d,s,u){return!!oo(d,s)||!!js(s,d,u)}function Or(d,s){if(d.length===1)return ns(s,d[0]);for(let u=0;u<s.length;u++){const y=s[u];for(let w=0;w<y.length;w++)if(oo(d,y[w]))return!0}for(let u=0;u<d.length;u++)if(ns(s,d[u]))return!0;for(let u=0;u<s.length;u++)if(Fn(d,s[u]))return!0;return!1}function Xr(d,s,u){if(d.length>1){if(Fn(d,s))return!0;for(let y=0;y<s.length;y++)if(js(s[y],d,u))return!0}for(let y=0;y<d.length;y++)if(js(d[y],s,u))return!0;return!1}function Fn(d,s){if(d.length===0||s.length===0)return!1;for(let u=0;u<d.length-1;u++){const y=d[u],w=d[u+1];for(let T=0;T<s.length-1;T++)if(Vi(y,w,s[T],s[T+1]))return!0}return!1}function Vi(d,s,u,y){return Zt(d,u,y)!==Zt(s,u,y)&&Zt(d,s,u)!==Zt(d,s,y)}function wi(d,s,u){return(d.x-u.x)*(s.y-u.y)-(d.y-u.y)*(s.x-u.x)}function Ri(d,s,u,y){const w=wi(d,s,y),T=wi(d,s,u);if(Math.sign(w)===Math.sign(T))return;const I=wi(u,y,d),L=I+T-w;return Math.sign(I)!==Math.sign(L)?[I/(I-L),T/(T-w)]:void 0}function js(d,s,u){const y=u*u;if(s.length===1)return d.distSqr(s[0])<y;for(let w=1;w<s.length;w++)if(os(d,s[w-1],s[w])<y)return!0;return!1}function os(d,s,u){const y=s.distSqr(u);if(y===0)return d.distSqr(s);const w=((d.x-s.x)*(u.x-s.x)+(d.y-s.y)*(u.y-s.y))/y;return d.distSqr(w<0?s:w>1?u:u.sub(s)._mult(w)._add(s))}function ns(d,s){let u,y,w,T=!1;for(let I=0;I<d.length;I++){u=d[I];for(let L=0,H=u.length-1;L<u.length;H=L++)y=u[L],w=u[H],y.y>s.y!=w.y>s.y&&s.x<(w.x-y.x)*(s.y-y.y)/(w.y-y.y)+y.x&&(T=!T)}return T}function oo(d,s){let u=!1;for(let y=0,w=d.length-1;y<d.length;w=y++){const T=d[y],I=d[w];T.y>s.y!=I.y>s.y&&s.x<(I.x-T.x)*(s.y-T.y)/(I.y-T.y)+T.x&&(u=!u)}return u}function ys(d,s,u,y,w){for(const I of d)if(s<=I.x&&u<=I.y&&y>=I.x&&w>=I.y)return!0;const T=[new tr(s,u),new tr(s,w),new tr(y,w),new tr(y,u)];if(d.length>2){for(const I of T)if(oo(d,I))return!0}for(let I=0;I<d.length-1;I++)if(Xi(d[I],d[I+1],T))return!0;return!1}function Xi(d,s,u){const y=u[0],w=u[2];if(d.x<y.x&&s.x<y.x||d.x>w.x&&s.x>w.x||d.y<y.y&&s.y<y.y||d.y>w.y&&s.y>w.y)return!1;const T=Zt(d,s,u[0]);return T!==Zt(d,s,u[1])||T!==Zt(d,s,u[2])||T!==Zt(d,s,u[3])}function mi(d,s,u,y,w,T){let I=s.y-d.y,L=d.x-s.x;if(T=T||0){const H=I*I+L*L;if(H===0)return!0;const W=Math.sqrt(H);I/=W,L/=W}return!((u.x-d.x)*I+(u.y-d.y)*L-T<0||(y.x-d.x)*I+(y.y-d.y)*L-T<0||(w.x-d.x)*I+(w.y-d.y)*L-T<0)}function zs(d,s,u,y,w,T,I){return!(mi(d,s,y,w,T,I)||mi(s,u,y,w,T,I)||mi(u,d,y,w,T,I)||mi(y,w,d,s,u,I)||mi(w,T,d,s,u,I)||mi(T,y,d,s,u,I))}function Ys(d,s,u){const y=s.paint.get(d).value;return y.kind==="constant"?y.value:u.programConfigurations.get(s.id).getMaxValue(d)}function ss(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function Ba(d,s,u,y,w){if(!s[0]&&!s[1])return d;const T=tr.convert(s)._mult(w);u==="viewport"&&T._rotate(-y);const I=[];for(let L=0;L<d.length;L++)I.push(d[L].sub(T));return I}function ic(d,s,u,y){const w=tr.convert(d)._mult(y);return s==="viewport"&&w._rotate(-u),w}let sc,ga;function Ol(d,s,u){var y=2*Math.PI*6378137/256/Math.pow(2,u);return[d*y-2*Math.PI*6378137/2,s*y-2*Math.PI*6378137/2]}Xn(Rt,"CircleBucket",{omit:["layers"]});class Kl{constructor(s,u,y){this.z=s,this.x=u,this.y=y,this.key=Ac(0,s,s,u,y)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}isChildOf(s){const u=this.z-s.z;return s.z===0||s.z<this.z&&s.x===this.x>>u&&s.y===this.y>>u}url(s,u){const y=function(T,I,L){var H=Ol(256*T,256*(I=Math.pow(2,L)-I-1),L),W=Ol(256*(T+1),256*(I+1),L);return H[0]+","+H[1]+","+W[0]+","+W[1]}(this.x,this.y,this.z),w=function(T,I,L){let H,W="";for(let se=T;se>0;se--)H=1<<se-1,W+=(I&H?1:0)+(L&H?2:0);return W}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",w).replace("{bbox-epsg-3857}",y)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Dl{constructor(s,u){this.wrap=s,this.canonical=u,this.key=Ac(s,u.z,u.z,u.x,u.y)}}class ea{constructor(s,u,y,w,T){this.overscaledZ=s,this.wrap=u,this.canonical=new Kl(y,+w,+T),this.key=u===0&&s===y?this.canonical.key:Ac(u,s,y,w,T)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const u=this.canonical.z-s;return s>this.canonical.z?new ea(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ea(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u=!0){if(this.overscaledZ===s&&u)return this.key;if(s>this.canonical.z)return Ac(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y);{const y=this.canonical.z-s;return Ac(this.wrap*+u,s,s,this.canonical.x>>y,this.canonical.y>>y)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.z<this.canonical.z&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new ea(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,y=2*this.canonical.x,w=2*this.canonical.y;return[new ea(u,this.wrap,u,y,w),new ea(u,this.wrap,u,y+1,w),new ea(u,this.wrap,u,y,w+1),new ea(u,this.wrap,u,y+1,w+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ea(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ea(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Dl(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ac(d,s,u,y,w){const T=1<<Math.min(u,22);let I=T*(w%T)+y%T;return d&&u<22&&(I+=T*T*((d<0?-2*d-1:2*d)%(1<<2*(22-u)))),16*(32*I+u)+(s-u)}const uu=[d=>{let s=d.canonical.x-1,u=d.wrap;return s<0&&(s=(1<<d.canonical.z)-1,u--),new ea(d.overscaledZ,u,d.canonical.z,s,d.canonical.y)},d=>{let s=d.canonical.x+1,u=d.wrap;return s===1<<d.canonical.z&&(s=0,u++),new ea(d.overscaledZ,u,d.canonical.z,s,d.canonical.y)},d=>new ea(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,(d.canonical.y===0?1<<d.canonical.z:d.canonical.y)-1),d=>new ea(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y===(1<<d.canonical.z)-1?0:d.canonical.y+1)];Xn(Kl,"CanonicalTileID"),Xn(ea,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Qf=Gs([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:dd}=Qf,oA=Gs([{name:"a_pos_3",components:3,type:"Int16"}]);var pd=Gs([{name:"a_pos",type:"Int16",components:2}]);function Ad(d){return d*Oc/te}const Kd=[new ye([M,M,M],[P,P,P]),new ye([M,M,M],[0,0,P]),new ye([0,M,M],[P,0,P]),new ye([M,0,M],[0,P,P]),new ye([0,0,M],[P,P,P])];function aA(d,s,u,y=!0){const w=de([],d._camera.position,d.worldSize),T=[s,u,1,1];kt(T,T,d.pixelMatrixInverse),yt(T,T,1/T[3]);const I=pe([],ot([],T,w)),L=d.globeMatrix,H=[L[12],L[13],L[14]],W=ot([],H,w),se=G(W),ue=pe([],W),me=d.worldSize/(2*Math.PI),Ee=Oe(ue,I),Ie=Math.asin(me/se);if(Ie<Math.acos(Ee)){if(!y)return null;const Gr=[],xr=[];de(Gr,I,se/Ee),pe(xr,ot(xr,Gr,W)),pe(I,k(I,W,de(I,xr,Math.tan(Ie)*se)))}const Re=[];new io(w,I).closestPointOnSphere(H,me,Re);const ze=pe([],Yn(L,0)),Xe=pe([],Yn(L,1)),ht=pe([],Yn(L,2)),ut=Oe(ze,Re),mt=Oe(Xe,Re),$t=Oe(ht,Re),Ut=Qt(Math.asin(-mt/me));let Ht=Qt(Math.atan2(ut,$t));Ht=d.center.lng+function(Gr,xr){const Yr=(xr-Gr+180)%360-180;return Yr<-180?Yr+360:Yr}(d.center.lng,Ht);const or=je(Ht),cr=nt(qe(Ut),0,1);return new Pt(or,cr)}class Em{constructor(s,u,y){this.a=ot([],s,y),this.b=ot([],u,y),this.center=y;const w=pe([],this.a),T=pe([],this.b);this.angle=Math.acos(Oe(w,T))}}function Gy(d,s){if(d.angle===0)return null;let u;return u=d.a[s]===0?1/d.angle*.5*Math.PI:1/d.angle*Math.atan(d.b[s]/d.a[s]/Math.sin(d.angle)-1/Math.tan(d.angle)),u<0||u>1?null:function(y,w,T,I){const L=Math.sin(T);return y*(Math.sin((1-I)*T)/L)+w*(Math.sin(I*T)/L)}(d.a[s],d.b[s],d.angle,nt(u,0,1))+d.center[s]}function Ip(d){if(d.z<=1)return Kd[d.z+2*d.y+d.x];const s=S1(w1(d));return ye.fromPoints(s)}function lA(d,s,u){return de(d,d,1-u),J(d,d,s,u)}function vb(d,s,u){for(const y of d)Be(y,y,s),de(y,y,u)}function c0(d,s,u,y){const w=s/d.worldSize,T=d.globeMatrix;if(u.z<=1){const cr=Ip(u).getCorners();return vb(cr,T,w),ye.fromPoints(cr)}const I=w1(u,y),L=S1(I,Oc+Ad(d._tileCoverLift));vb(L,T,w);const H=Number.MAX_VALUE,W=[-H,-H,-H],se=[H,H,H];if(I.contains(d.center)){for(const xr of L)U(se,se,xr),Y(W,W,xr);W[2]=0;const cr=d.point,Gr=[cr.x*w,cr.y*w,0];return U(se,se,Gr),Y(W,W,Gr),new ye(se,W)}if(d._tileCoverLift>0){for(const cr of L)U(se,se,cr),Y(W,W,cr);return new ye(se,W)}const ue=[T[12]*w,T[13]*w,T[14]*w],me=I.getCenter(),Ee=nt(d.center.lat,-Tt,Tt),Ie=nt(me.lat,-Tt,Tt),Re=je(d.center.lng),ze=qe(Ee);let Xe=Re-je(me.lng);const ht=ze-qe(Ie);Xe>.5?Xe-=1:Xe<-.5&&(Xe+=1);let ut=0;Math.abs(Xe)>Math.abs(ht)?ut=Xe>=0?1:3:(ut=ht>=0?0:2,J(ue,ue,[T[4]*w,T[5]*w,T[6]*w],-Math.sin(li(ht>=0?I.getSouth():I.getNorth()))*Oc));const mt=L[ut],$t=L[(ut+1)%4],Ut=new Em(mt,$t,ue),Ht=[Gy(Ut,0)||mt[0],Gy(Ut,1)||mt[1],Gy(Ut,2)||mt[2]],or=GA(d.zoom);if(or>0){const cr=function({x:xr,y:Yr,z:In},nn,gn,En,zr){const _n=1/(1<<In);let wr=xr*_n,Vr=wr+_n,Pn=Yr*_n,xn=Pn+_n,Ei=0;const pi=(wr+Vr)/2-En;return pi>.5?Ei=-1:pi<-.5&&(Ei=1),wr=((wr+Ei)*nn-(En*=nn))*gn+En,Vr=((Vr+Ei)*nn-En)*gn+En,Pn=(Pn*nn-(zr*=nn))*gn+zr,xn=(xn*nn-zr)*gn+zr,[[wr,xn,0],[Vr,xn,0],[Vr,Pn,0],[wr,Pn,0]]}(u,s,d._pixelsPerMercatorPixel,Re,ze);for(let xr=0;xr<L.length;xr++)lA(L[xr],cr[xr],or);const Gr=k([],cr[ut],cr[(ut+1)%4]);de(Gr,Gr,.5),lA(Ht,Gr,or)}for(const cr of L)U(se,se,cr),Y(W,W,cr);return se[2]=Math.min(mt[2],$t[2]),U(se,se,Ht),Y(W,W,Ht),new ye(se,W)}function w1({x:d,y:s,z:u},y=!1){const w=1/(1<<u),T=new ve(lt(d*w),s===(1<<u)-1&&y?-90:dt((s+1)*w)),I=new ve(lt((d+1)*w),s===0&&y?90:dt(s*w));return new Me(T,I)}function S1(d,s=Oc){const u=li(d.getNorth()),y=li(d.getSouth()),w=Math.cos(u),T=Math.cos(y),I=Math.sin(u),L=Math.sin(y),H=d.getWest(),W=d.getEast();return[j(T,L,H,s),j(T,L,W,s),j(w,I,W,s),j(w,I,H,s)]}function lg(d,s,u,y){const w=1<<u.z,T=(d/tn+u.x)/w;return K(dt((s/tn+u.y)/w),lt(T),y)}function cg({min:d,max:s}){return c/Math.max(s[0]-d[0],s[1]-d[1],s[2]-d[2])}const Wy=new Float64Array(16);function u0(d){const s=cg(d),u=Q(Wy,[s,s,s]);return B(u,u,Ue([],d.min))}function C1(d){const s=(y=d.min,(u=Wy)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=y[0],u[13]=y[1],u[14]=y[2],u[15]=1,u);var u,y;const w=1/cg(d);return F(s,s,[w,w,w])}function E1(d){const s=tn/(2*Math.PI);return d/(2*Math.PI)/s}function bb(d,s){return tn/(512*Math.pow(2,d))*cg(Ip(s))}function xb(d,s,u,y,w){const T=E1(u),I=[d,s,-u/(2*Math.PI)],L=x(new Float64Array(16));return B(L,L,I),F(L,L,[T,T,T]),O(L,L,li(-w)),V(L,L,li(-y)),L}function GA(d){return Ct(Gi,C,d)}function h0(d,s){const u=K(s.lat,s.lng),y=function(Ie){const Re=K(Ie._center.lat,Ie._center.lng);let ze=re([],Z(0,1,0),Re);const Xe=ee([],-Ie.angle,Re);ze=Be(ze,ze,Xe),ee(Xe,-Ie._pitch,ze);const ht=pe([],Re);return de(ht,ht,Ad(Ie.cameraToCenterDistance/Ie.pixelsPerMeter)),Be(ht,ht,Xe),k([],Re,ht)}(d);return I=(w=R([],y,u))[0],L=w[1],H=w[2],W=(T=u)[0],se=T[1],ue=T[2],Ee=(me=Math.sqrt(I*I+L*L+H*H)*Math.sqrt(W*W+se*se+ue*ue))&&Oe(w,T)/me,Math.acos(Math.min(Math.max(Ee,-1),1));var w,T,I,L,H,W,se,ue,me,Ee}function ug(d,s){return h0(d,s)>Math.PI/2*1.01}const wb=li(85),F5=Math.cos(wb),$y=Math.sin(wb),Sb=b(),Cb=d=>{const s=[];return d.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),d.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s};function Eb(d,s,u,y,w,T,I,L,H){if(T&&d.queryGeometry.isAboveHorizon)return!1;T&&(H*=d.pixelToTileUnitsFactor);const W=d.tileID.canonical,se=u.projection.upVectorScale(W,u.center.lat,u.worldSize).metersToTile;for(const ue of s)for(const me of ue){const Ee=me.add(L),Ie=w&&u.elevation?u.elevation.exaggeration()*w.getElevationAt(Ee.x,Ee.y,!0):0,Re=u.projection.projectTilePoint(Ee.x,Ee.y,W);if(Ie>0){const ut=u.projection.upVector(W,Ee.x,Ee.y);Re.x+=ut[0]*se*Ie,Re.y+=ut[1]*se*Ie,Re.z+=ut[2]*se*Ie}const ze=T?Ee:P5(Re.x,Re.y,Re.z,y),Xe=T?d.tilespaceRays.map(ut=>k5(ut,Ie)):d.queryGeometry.screenGeometry,ht=kt([],[Re.x,Re.y,Re.z,1],y);if(!I&&T?H*=ht[3]/u.cameraToCenterDistance:I&&!T&&(H*=u.cameraToCenterDistance/ht[3]),T){const ut=dt((me.y/tn+W.y)/(1<<W.z));H/=u.projection.pixelsPerMeter(ut,1)/Ke(1,ut)}if(Ir(Xe,ze,H))return!0}return!1}function P5(d,s,u,y){const w=kt([],[d,s,u,1],y);return new tr(w[0]/w[3],w[1]/w[3])}const Bb=Z(0,0,0),L5=Z(0,0,1);function k5(d,s){const u=fe();return Bb[2]=s,d.intersectsPlane(Bb,L5,u),new tr(u[0],u[1])}class Tb extends Rt{}let Ib,Mb,Fb,Pb;function Lb(d,{width:s,height:u},y,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==s*u*y)throw new RangeError("mismatched image size")}else w=new Uint8Array(s*u*y);return d.width=s,d.height=u,d.data=w,d}function md(d,s,u){const{width:y,height:w}=s;y===d.width&&w===d.height||(Ky(d,s,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,y),height:Math.min(d.height,w)},u,null),d.width=y,d.height=w,d.data=s.data)}function Ky(d,s,u,y,w,T,I,L){if(w.width===0||w.height===0)return s;if(w.width>d.width||w.height>d.height||u.x>d.width-w.width||u.y>d.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>s.width||w.height>s.height||y.x>s.width-w.width||y.y>s.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const H=d.data,W=s.data,se=T===4&&L;for(let ue=0;ue<w.height;ue++){const me=((u.y+ue)*d.width+u.x)*T,Ee=((y.y+ue)*s.width+y.x)*T;if(se)for(let Ie=0;Ie<w.width;Ie++){const Re=me+Ie*T+3,ze=Ee+Ie*T;W[ze+0]=255,W[ze+1]=255,W[ze+2]=255,W[ze+3]=H[Re]}else if(I)for(let Ie=0;Ie<w.width;Ie++){const Re=me+Ie*T,ze=Ee+Ie*T,Xe=new Le(H[Re+0]/255,H[Re+1]/255,H[Re+2]/255,H[Re+3]).toNonPremultipliedRenderColor(I).toArray();W[ze+0]=Xe[0],W[ze+1]=Xe[1],W[ze+2]=Xe[2],W[ze+3]=Xe[3]}else for(let Ie=0;Ie<w.width*T;Ie++)W[Ee+Ie]=H[me+Ie]}return s}Xn(Tb,"HeatmapBucket",{omit:["layers"]});class WA{constructor(s,u){Lb(this,s,1,u)}resize(s){md(this,new WA(s),1)}clone(){return new WA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,y,w,T){Ky(s,u,y,w,T,1,null)}}class Ql{constructor(s,u){Lb(this,s,4,u)}resize(s){md(this,new Ql(s),4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Ql({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,y,w,T,I,L){Ky(s,u,y,w,T,4,I,L)}}class Oo{constructor(s,u){this.width=s.width,this.height=s.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function f0(d){const s={},u=d.resolution||256,y=d.clips?d.clips.length:1,w=d.image||new Ql({width:u,height:y}),T=(I,L,H)=>{s[d.evaluationKey]=H;const W=d.expression.evaluate(s),se=W?W.toNonPremultipliedRenderColor(null):null;se&&(w.data[I+L+0]=Math.floor(255*se.r),w.data[I+L+1]=Math.floor(255*se.g),w.data[I+L+2]=Math.floor(255*se.b),w.data[I+L+3]=Math.floor(255*se.a))};if(d.clips)for(let I=0,L=0;I<y;++I,L+=4*u)for(let H=0,W=0;H<u;H++,W+=4){const se=H/(u-1),{start:ue,end:me}=d.clips[I];T(L,W,ue*(1-se)+me*se)}else for(let I=0,L=0;I<u;I++,L+=4)T(0,L,I/(u-1));return w}Xn(WA,"AlphaImage"),Xn(Ql,"RGBAImage");const pf=Gs([{name:"a_pos",components:2,type:"Int16"}],4),$c=Gs([{name:"a_road_z_offset",components:1,type:"Float32"}],4),O5=Gs([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),$A=Gs([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function hg(d,s,u=2){const y=s&&s.length,w=y?s[0]*u:d.length;let T=kb(d,0,w,u,!0);const I=[];if(!T||T.next===T.prev)return I;let L,H,W;if(y&&(T=function(se,ue,me,Ee){const Ie=[];for(let Re=0,ze=ue.length;Re<ze;Re++){const Xe=kb(se,ue[Re]*Ee,Re<ze-1?ue[Re+1]*Ee:se.length,Ee,!1);Xe===Xe.next&&(Xe.steiner=!0),Ie.push(Db(Xe))}Ie.sort(Ob);for(let Re=0;Re<Ie.length;Re++)me=B1(Ie[Re],me);return me}(d,s,T,u)),d.length>80*u){L=d[0],H=d[1];let se=L,ue=H;for(let me=u;me<w;me+=u){const Ee=d[me],Ie=d[me+1];Ee<L&&(L=Ee),Ie<H&&(H=Ie),Ee>se&&(se=Ee),Ie>ue&&(ue=Ie)}W=Math.max(se-L,ue-H),W=W!==0?32767/W:0}return d0(T,I,u,L,H,W,0),I}function kb(d,s,u,y,w){let T;if(w===function(I,L,H,W){let se=0;for(let ue=L,me=H-W;ue<H;ue+=W)se+=(I[me]-I[ue])*(I[ue+1]+I[me+1]),me=ue;return se}(d,s,u,y)>0)for(let I=s;I<u;I+=y)T=Yy(I/y|0,d[I],d[I+1],T);else for(let I=u-y;I>=s;I-=y)T=Yy(I/y|0,d[I],d[I+1],T);return T&&fg(T,T.next)&&(qA(T),T=T.next),T}function Bm(d,s){if(!d)return d;s||(s=d);let u,y=d;do if(u=!1,y.steiner||!fg(y,y.next)&&gc(y.prev,y,y.next)!==0)y=y.next;else{if(qA(y),y=s=y.prev,y===y.next)break;u=!0}while(u||y!==s);return s}function d0(d,s,u,y,w,T,I){if(!d)return;!I&&T&&function(H,W,se,ue){let me=H;do me.z===0&&(me.z=oc(me.x,me.y,W,se,ue)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==H);me.prevZ.nextZ=null,me.prevZ=null,function(Ee){let Ie,Re=1;do{let ze,Xe=Ee;Ee=null;let ht=null;for(Ie=0;Xe;){Ie++;let ut=Xe,mt=0;for(let Ut=0;Ut<Re&&(mt++,ut=ut.nextZ,ut);Ut++);let $t=Re;for(;mt>0||$t>0&&ut;)mt!==0&&($t===0||!ut||Xe.z<=ut.z)?(ze=Xe,Xe=Xe.nextZ,mt--):(ze=ut,ut=ut.nextZ,$t--),ht?ht.nextZ=ze:Ee=ze,ze.prevZ=ht,ht=ze;Xe=ut}ht.nextZ=null,Re*=2}while(Ie>1)}(me)}(d,y,w,T);let L=d;for(;d.prev!==d.next;){const H=d.prev,W=d.next;if(T?qy(d,y,w,T):D5(d))s.push(H.i,d.i,W.i),qA(d),d=W.next,L=W.next;else if((d=W)===L){I?I===1?d0(d=R5(Bm(d),s),s,u,y,w,T,2):I===2&&cA(d,s,u,y,w,T):d0(Bm(d),s,u,y,w,T,1);break}}}function D5(d){const s=d.prev,u=d,y=d.next;if(gc(s,u,y)>=0)return!1;const w=s.x,T=u.x,I=y.x,L=s.y,H=u.y,W=y.y,se=Math.min(w,T,I),ue=Math.min(L,H,W),me=Math.max(w,T,I),Ee=Math.max(L,H,W);let Ie=y.next;for(;Ie!==s;){if(Ie.x>=se&&Ie.x<=me&&Ie.y>=ue&&Ie.y<=Ee&&p0(w,L,T,H,I,W,Ie.x,Ie.y)&&gc(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.next}return!0}function qy(d,s,u,y){const w=d.prev,T=d,I=d.next;if(gc(w,T,I)>=0)return!1;const L=w.x,H=T.x,W=I.x,se=w.y,ue=T.y,me=I.y,Ee=Math.min(L,H,W),Ie=Math.min(se,ue,me),Re=Math.max(L,H,W),ze=Math.max(se,ue,me),Xe=oc(Ee,Ie,s,u,y),ht=oc(Re,ze,s,u,y);let ut=d.prevZ,mt=d.nextZ;for(;ut&&ut.z>=Xe&&mt&&mt.z<=ht;){if(ut.x>=Ee&&ut.x<=Re&&ut.y>=Ie&&ut.y<=ze&&ut!==w&&ut!==I&&p0(L,se,H,ue,W,me,ut.x,ut.y)&&gc(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,mt.x>=Ee&&mt.x<=Re&&mt.y>=Ie&&mt.y<=ze&&mt!==w&&mt!==I&&p0(L,se,H,ue,W,me,mt.x,mt.y)&&gc(mt.prev,mt,mt.next)>=0))return!1;mt=mt.nextZ}for(;ut&&ut.z>=Xe;){if(ut.x>=Ee&&ut.x<=Re&&ut.y>=Ie&&ut.y<=ze&&ut!==w&&ut!==I&&p0(L,se,H,ue,W,me,ut.x,ut.y)&&gc(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;mt&&mt.z<=ht;){if(mt.x>=Ee&&mt.x<=Re&&mt.y>=Ie&&mt.y<=ze&&mt!==w&&mt!==I&&p0(L,se,H,ue,W,me,mt.x,mt.y)&&gc(mt.prev,mt,mt.next)>=0)return!1;mt=mt.nextZ}return!0}function R5(d,s){let u=d;do{const y=u.prev,w=u.next.next;!fg(y,w)&&Nb(y,u,u.next,w)&&Tm(y,w)&&Tm(w,y)&&(s.push(y.i,u.i,w.i),qA(u),qA(u.next),u=d=w),u=u.next}while(u!==d);return Bm(u)}function cA(d,s,u,y,w,T){let I=d;do{let L=I.next.next;for(;L!==I.prev;){if(I.i!==L.i&&N5(I,L)){let H=jb(I,L);return I=Bm(I,I.next),H=Bm(H,H.next),d0(I,s,u,y,w,T,0),void d0(H,s,u,y,w,T,0)}L=L.next}I=I.next}while(I!==d)}function Ob(d,s){let u=d.x-s.x;return u===0&&(u=d.y-s.y,u===0)&&(u=(d.next.y-d.y)/(d.next.x-d.x)-(s.next.y-s.y)/(s.next.x-s.x)),u}function B1(d,s){const u=function(w,T){let I=T;const L=w.x,H=w.y;let W,se=-1/0;if(fg(w,I))return I;do{if(fg(w,I.next))return I.next;if(H<=I.y&&H>=I.next.y&&I.next.y!==I.y){const Re=I.x+(H-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(Re<=L&&Re>se&&(se=Re,W=I.x<I.next.x?I:I.next,Re===L))return W}I=I.next}while(I!==T);if(!W)return null;const ue=W,me=W.x,Ee=W.y;let Ie=1/0;I=W;do{if(L>=I.x&&I.x>=me&&L!==I.x&&Rb(H<Ee?L:se,H,me,Ee,H<Ee?se:L,H,I.x,I.y)){const Re=Math.abs(H-I.y)/(L-I.x);Tm(I,w)&&(Re<Ie||Re===Ie&&(I.x>W.x||I.x===W.x&&mc(W,I)))&&(W=I,Ie=Re)}I=I.next}while(I!==ue);return W}(d,s);if(!u)return s;const y=jb(u,d);return Bm(y,y.next),Bm(u,u.next)}function mc(d,s){return gc(d.prev,d,s.prev)<0&&gc(s.next,d,d.next)<0}function oc(d,s,u,y,w){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-u)*w|0)|d<<8))|d<<4))|d<<2))|d<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-y)*w|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Db(d){let s=d,u=d;do(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next;while(s!==d);return u}function Rb(d,s,u,y,w,T,I,L){return(w-I)*(s-L)>=(d-I)*(T-L)&&(d-I)*(y-L)>=(u-I)*(s-L)&&(u-I)*(T-L)>=(w-I)*(y-L)}function p0(d,s,u,y,w,T,I,L){return!(d===I&&s===L)&&Rb(d,s,u,y,w,T,I,L)}function N5(d,s){return d.next.i!==s.i&&d.prev.i!==s.i&&!function(u,y){let w=u;do{if(w.i!==u.i&&w.next.i!==u.i&&w.i!==y.i&&w.next.i!==y.i&&Nb(w,w.next,u,y))return!0;w=w.next}while(w!==u);return!1}(d,s)&&(Tm(d,s)&&Tm(s,d)&&function(u,y){let w=u,T=!1;const I=(u.x+y.x)/2,L=(u.y+y.y)/2;do w.y>L!=w.next.y>L&&w.next.y!==w.y&&I<(w.next.x-w.x)*(L-w.y)/(w.next.y-w.y)+w.x&&(T=!T),w=w.next;while(w!==u);return T}(d,s)&&(gc(d.prev,d,s.prev)||gc(d,s.prev,s))||fg(d,s)&&gc(d.prev,d,d.next)>0&&gc(s.prev,s,s.next)>0)}function gc(d,s,u){return(s.y-d.y)*(u.x-s.x)-(s.x-d.x)*(u.y-s.y)}function fg(d,s){return d.x===s.x&&d.y===s.y}function Nb(d,s,u,y){const w=KA(gc(d,s,u)),T=KA(gc(d,s,y)),I=KA(gc(u,y,d)),L=KA(gc(u,y,s));return w!==T&&I!==L||!(w!==0||!A0(d,u,s))||!(T!==0||!A0(d,y,s))||!(I!==0||!A0(u,d,y))||!(L!==0||!A0(u,s,y))}function A0(d,s,u){return s.x<=Math.max(d.x,u.x)&&s.x>=Math.min(d.x,u.x)&&s.y<=Math.max(d.y,u.y)&&s.y>=Math.min(d.y,u.y)}function KA(d){return d>0?1:d<0?-1:0}function Tm(d,s){return gc(d.prev,d,d.next)<0?gc(d,s,d.next)>=0&&gc(d,d.prev,s)>=0:gc(d,s,d.prev)<0||gc(d,d.next,s)<0}function jb(d,s){const u=Gh(d.i,d.x,d.y),y=Gh(s.i,s.x,s.y),w=d.next,T=s.prev;return d.next=s,s.prev=d,u.next=w,w.prev=u,y.next=u,u.prev=y,T.next=y,y.prev=T,y}function Yy(d,s,u,y){const w=Gh(d,s,u);return y?(w.next=y.next,w.prev=y,y.next.prev=w,y.next=w):(w.prev=w,w.next=w),w}function qA(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Gh(d,s,u){return{i:d,x:s,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Mp(d,s){const u=d.length;if(u<=1)return[d];const y=[];let w,T;for(let I=0;I<u;I++){const L=$r(d[I]);L!==0&&(d[I].area=Math.abs(L),T===void 0&&(T=L<0),T===L<0?(w&&y.push(w),w=[d[I]]):w.push(d[I]))}if(w&&y.push(w),s>1)for(let I=0;I<y.length;I++)y[I].length<=s||(Ca(y[I],s,1,y[I].length-1,j5),y[I]=y[I].slice(0,s));return y}function j5(d,s){return s.area-d.area}function Ub(d,s,u=1){if(!d)return null;const y=typeof d=="string"?Qo.from(d).getPrimary():d.getPrimary(),w=typeof d=="string"?null:d.getSecondary();for(const T of[y,w]){if(!T)continue;const I=T.id.toString();s.has(I)||s.set(I,[]),T.scaleSelf(u),s.get(I).push(T)}return{primary:y.toString(),secondary:w?w.toString():null}}function Xy(d,s,u,y){const w=y.patternDependencies;let T=!1;for(const I of s){const L=I.paint.get(`${d}-pattern`);L.isConstant()||(T=!0),Ub(L.constantOr(null),w,u)&&(T=!0)}return T}function Zy(d,s,u,y,w,T){const I=T.patternDependencies;for(const L of s){const H=L.paint.get(`${d}-pattern`).value;if(H.kind!=="constant"){let W=H.evaluate({zoom:y},u,{},T.availableImages);W=W&&W.name?W.name:W;const se=Ub(W,I,w);if(!se)continue;const{primary:ue,secondary:me}=se;ue&&(u.patterns[L.id]=[ue,me].filter(Boolean))}}return u}class zb{constructor(){this.polygons=new Map}add(s,...u){this.polygons.has(s)?this.polygons.get(s).push(...u):this.polygons.set(s,u)}merge(s){for(const[u,y]of s.polygons)this.add(u,...y)}}class YA{constructor(){this.portals=[]}static evaluate(s){if(s.length===0)return new YA;let u=[];for(const W of s)u.push(...W.portals);if(u.length===0)return new YA;const y=(W,se)=>W<=0&&se<=0||W>=tn&&se>=tn;for(const W of u){const se=W.va,ue=W.vb;(y(se.x,ue.x)||y(se.y,ue.y))&&(W.type="border")}const w=u.filter(W=>W.type!=="unevaluated"),T=u.filter(W=>W.type==="unevaluated");if(T.length===0)return new YA;T.sort((W,se)=>W.hash===se.hash?W.isTunnel===se.isTunnel?0:W.isTunnel?-1:1:W.hash<se.hash?1:-1),u=w.concat(T);let I=w.length,L=I,H=I;do if(L++,L===u.length||u[I].hash!==u[L].hash){if(L-I==2){H<I&&(u[H]=u[I],u[I]=null);const W=u[H],se=u[L-1];W.type=W.isTunnel!==se.isTunnel?"tunnel":"polygon",W.connection={a:W.connection.a,b:se.connection.a},H++}I=L}while(I!==u.length);return u.splice(H),u.sort((W,se)=>W.hash<se.hash?1:-1),{portals:u}}}Xn(YA,"ElevationPortalGraph"),Xn(zb,"ElevationPolygons");class uA{constructor(s,u,y){this.outPositions=s,this.outNormals=u,this.outIndices=y,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(s,u,y){let w=s[2];y!=null&&(w*=y);const T=this.getVec3Bits(s)<<96n|this.getVec3Bits(u),I=this.vertexLookup.get(T);if(I!=null)return I;const L=this.outPositions.length;this.vertexLookup.set(T,L);const H=Math.trunc(16384*u[0]),W=Math.trunc(16384*u[1]),se=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(s[0],s[1],w),this.outNormals.emplaceBack(H,W,se),L}addTriangle(s,u,y){this.outIndices.emplaceBack(s,u,y)}addTriangles(s,u,y){if(s.length===0)return;const w=y.length===1,T=fe(),I=fe();for(let L=0;L<s.length;L+=3){const H=u[s[L+0]],W=u[s[L+1]],se=u[s[L+2]],ue=w?y[0]:y[s[L+1]],me=w?y[0]:y[s[L+2]];z(T,H.x,H.y,w?y[0]:y[s[L+0]]);const Ee=this.addVertex(T,I);z(T,W.x,W.y,ue);const Ie=this.addVertex(T,I);z(T,se.x,se.y,me);const Re=this.addVertex(T,I);this.outIndices.emplaceBack(Ee,Ie,Re)}}addQuad(s,u,y,w,T,I){const L=this.addVertex(s,T,I),H=this.addVertex(u,T,I),W=this.addVertex(y,T,I),se=this.addVertex(w,T,I);this.addTriangle(L,H,W),this.addTriangle(W,se,L)}getVertexCount(){return this.outPositions.length}clearVertexLookup(){this.vertexLookup.clear()}getBits(s){return this.view.setFloat32(0,s),BigInt(this.view.getUint32(0))}getVec3Bits(s){return this.getBits(s[0])<<64n|this.getBits(s[1])<<32n|this.getBits(s[2])}}class to{constructor(s,u,y,w){this.unevaluatedPortals=new YA,this.portalPolygons=new zb,this.bridgeFeatureSections=[],this.tunnelFeatureSections=[],this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new DA,this.vertexNormals=new zd,this.indexArray=new Lo,this.tileToMeters=Mt(s),this.bridgeProgramConfigurations=new Qu(u,{zoom:y,lut:w},T=>T!=="fill-tunnel-structure-color"),this.tunnelProgramConfigurations=new Qu(u,{zoom:y,lut:w},T=>T!=="fill-bridge-guard-rail-color")}addVertices(s,u){const y=this.unevalVertices.length;for(let w=0;w<s.length;w++)this.unevalVertices.push(s[w]),this.unevalHeights.push(u[w]);return y}addTriangles(s,u,y){const w=y?this.unevalTunnelTriangles:this.unevalTriangles;for(const T of s)w.push(T+u)}addRenderableRing(s,u,y,w,T,I){const L=[new tr(T.min.x,T.min.y),new tr(T.max.x,T.min.y),new tr(T.max.x,T.max.y),new tr(T.min.x,T.max.y)];for(let H=0;H<y-1;H++){const W=u+H,se=W+1,ue=this.unevalVertices[W],me=this.unevalVertices[se];if(!(ue.x>=T.min.x&&ue.x<=T.max.x&&ue.y>=T.min.y&&ue.y<=T.max.y||me.x>=T.min.x&&me.x<=T.max.x&&me.y>=T.min.y&&me.y<=T.max.y||Xi(ue,me,L))||this.isOnBorder(ue.x,me.x)||this.isOnBorder(ue.y,me.y))continue;const Ee=to.computeEdgeHash(this.unevalVertices[W],this.unevalVertices[se]);let Ie,Re=this.vertexHashLookup.get(to.computePosHash(ue));Re!=null?Ie=Re.next:(Re=this.vertexHashLookup.get(to.computePosHash(me)),Ie=Re!=null?Re.prev:Ee),this.unevalEdges.push({polygonIdx:s,a:W,b:se,hash:Ee,portalHash:Ie,isTunnel:w,type:"unevaluated",featureInfo:I})}}addPortalCandidates(s,u,y,w,T){if(u.length===0)return;this.portalPolygons.add(s,{geometry:u,zLevel:T});const I=u[0];this.vertexHashLookup.clear();let L=to.computeEdgeHash(I[I.length-2],I[I.length-1]);for(let H=0;H<I.length-1;H++){const W=I[H+0],se=I[H+1],ue=ur(se.x-W.x,se.y-W.y),me=sn(ue);if(me===0)continue;let Ee="unevaluated";const Ie=w.pointElevation(W),Re=w.pointElevation(se);Math.abs(Ie)<.01&&Math.abs(Re)<.01?Ee="entrance":(this.isOnBorder(W.x,se.x)||this.isOnBorder(W.y,se.y))&&(Ee="border");const ze=to.computeEdgeHash(W,se);this.unevaluatedPortals.portals.push({connection:{a:s,b:void 0},va:W,vb:se,vab:ue,length:me,hash:ze,isTunnel:y,type:Ee});const Xe=to.computePosHash(W);this.vertexHashLookup.set(Xe,{prev:L,next:ze}),L=ze}}construct(s){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),y=me=>{me.primitiveLength=this.indexArray.length-me.primitiveOffset},w=new uA(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(s.portals,this.unevalEdges);const T=u(),I=u(),L=u(),H=(me,Ee)=>{me.sort((Re,ze)=>Re.type===Ee&&ze.type!==Ee?-1:Re.type!==Ee&&ze.type===Ee?1:0);const Ie=me.findIndex(Re=>Re.type!==Ee);return Ie>=0?Ie:me.length};let W=0;this.unevalEdges.length>0&&(W=H(this.unevalEdges,"none"),this.constructBridgeStructures(w,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:W},this.tileToMeters)),y(L);const se=u(),ue=u();if(this.unevalEdges.length>0){const me=this.unevalEdges.splice(W),Ee=H(me,"tunnel")+W;this.unevalEdges.push(...me),this.constructTunnelStructures(w,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:W},{min:W,max:Ee})}y(se),w.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),y(ue),w.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),y(I),w.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),y(T),this.maskSegments=wo.simpleSegment(0,ue.primitiveOffset,0,ue.primitiveLength),this.depthSegments=wo.simpleSegment(0,I.primitiveOffset,0,I.primitiveLength),this.renderableBridgeSegments=wo.simpleSegment(0,L.primitiveOffset,0,L.primitiveLength),this.renderableTunnelSegments=wo.simpleSegment(0,se.primitiveOffset,0,se.primitiveLength),this.shadowCasterSegments=wo.simpleSegment(0,T.primitiveOffset,0,T.primitiveLength)}update(s,u,y,w,T,I,L,H){this.bridgeProgramConfigurations.updatePaintArrays(s,u,T,y,w,I,L,H),this.tunnelProgramConfigurations.updatePaintArrays(s,u,T,y,w,I,L,H)}upload(s){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=s.createVertexBuffer(this.vertexPositions,O5.members),this.vertexBufferNormal=s.createVertexBuffer(this.vertexNormals,$A.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.bridgeProgramConfigurations.upload(s),this.tunnelProgramConfigurations.upload(s))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableBridgeSegments.destroy(),this.renderableTunnelSegments.destroy(),this.shadowCasterSegments.destroy()),this.bridgeProgramConfigurations.destroy(),this.tunnelProgramConfigurations.destroy()}populatePaintArrays(s,u,y,w,T){const I=(L,H)=>{for(let W=0;W<H.length-1;W++){const se=H[W].featureIndex,ue=H[W+1].vertexStart,me=s.feature(se);L.populatePaintArrays(ue,me,se,{},y,u,w,void 0,T)}};I(this.bridgeProgramConfigurations,this.bridgeFeatureSections),I(this.tunnelProgramConfigurations,this.tunnelFeatureSections)}computeVertexConnections(s,u,y,w,T){const I=new Map;for(let L=w;L<T;L++){const H=y[L],W=H.a,se=H.b,ue=to.computePosHash(s[W]),me=to.computePosHash(s[se]);let Ee=I.get(ue);Ee||(Ee={},I.set(ue,Ee));let Ie=I.get(me);Ie||(Ie={},I.set(me,Ie)),u[W]<=0&&u[se]<=0||(Ee.to=se,Ie.from=W)}return I}isTerminalVertex(s,u){const y=to.computePosHash(this.unevalVertices[s]),w=u.get(y);return!w||!w.from||!w.to}constructBridgeStructures(s,u,y,w,T,I){s.clearVertexLookup();const L=this.computeVertexConnections(u,y,w,T.min,T.max),H=1/I,W=.5*H,se=(gn,En)=>z(gn,u[En].x,u[En].y,y[En]*H),ue=fe(),me=fe(),Ee=fe(),Ie=fe(),Re=fe(),ze=(gn,En)=>{const zr=L.get(to.computePosHash(u[En])),_n=zr.from,wr=zr.to;if(!_n||!wr)return;se(ue,_n),se(me,En),se(Ee,wr),Ne(Ie),st(ue,me)||(ot(Re,me,ue),pe(Ie,Re)),st(Ee,me)||(ot(Re,Ee,me),k(Ie,Ie,pe(Re,Re)));const Vr=Ze(Ie);return Vr>0?de(gn,Ie,1/Vr):void 0};let Xe=Number.POSITIVE_INFINITY;this.sortSubarray(w,T.min,T.max,(gn,En)=>gn.featureInfo.featureIndex-En.featureInfo.featureIndex);const ht=fe(),ut=fe(),mt=fe(),$t=fe(),Ut=fe(),Ht=fe(),or=fe(),cr=fe(),Gr=fe(),xr=[fe(),fe(),fe(),fe()],Yr=[fe(),fe(),fe(),fe()],In=[{coord:new tr(0,0),height:0},{coord:new tr(0,0),height:0}],nn=(gn,En)=>gn>En;for(let gn=T.min;gn<T.max;gn++){const En=w[gn];if(!En.featureInfo.guardRailEnabled||!this.prepareEdgePoints(In,u,y,En,nn))continue;const[zr,_n]=In;if(z(ht,zr.coord.x,zr.coord.y,H*zr.height),z(ut,_n.coord.x,_n.coord.y,H*_n.height),st(ht,ut))continue;ot(mt,ut,ht),pe(mt,mt);const wr=ze(cr,En.a)||mt,Vr=ze(Gr,En.b)||mt;z($t,wr[1],-wr[0],0),pe($t,$t),z(Ut,Vr[1],-Vr[0],0),pe(Ut,Ut),re(cr,$t,wr),pe(Ht,cr),re(cr,Ut,Vr),pe(or,cr),k(xr[0],ht,de(cr,ot(cr,$t,Ht),W)),k(xr[1],ht,de(cr,k(cr,$t,Ht),W)),k(xr[2],ht,de(cr,Ht,W)),xr[3]=ht,k(Yr[0],ut,de(cr,ot(cr,Ut,or),W)),k(Yr[1],ut,de(cr,k(cr,Ut,or),W)),k(Yr[2],ut,de(cr,or,W)),Yr[3]=ut,Xe=this.addFeatureSection(En.featureInfo.featureIndex,Xe,this.bridgeFeatureSections,s);const Pn=s.addVertex(xr[0],$t,I),xn=s.addVertex(xr[1],$t,I),Ei=s.addVertex(Yr[0],Ut,I),pi=s.addVertex(Yr[1],Ut,I);s.addTriangle(Pn,xn,Ei),s.addTriangle(xn,pi,Ei);const An=s.addVertex(xr[1],Ht,I),Cn=s.addVertex(xr[2],Ht,I),yi=s.addVertex(Yr[1],or,I),ii=s.addVertex(Yr[2],or,I);s.addTriangle(An,Cn,yi),s.addTriangle(Cn,ii,yi),Ue($t,$t),Ue(Ut,Ut);const Rn=s.addVertex(xr[2],$t,I),oi=s.addVertex(xr[3],$t,I),Ui=s.addVertex(Yr[2],Ut,I),ts=s.addVertex(Yr[3],Ut,I);s.addTriangle(Rn,oi,Ui),s.addTriangle(oi,ts,Ui);const Es=this.isTerminalVertex(En.a,L),gs=this.isTerminalVertex(En.b,L);zr.height<.01&&Es&&s.addQuad(xr[3],xr[2],xr[1],xr[0],Ue(wr,wr),I),_n.height<.01&&gs&&s.addQuad(Yr[0],Yr[1],Yr[2],Yr[3],Vr,I)}this.bridgeFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:s.getVertexCount()})}constructTunnelStructures(s,u,y,w,T,I){s.clearVertexLookup();let L=Number.POSITIVE_INFINITY;const H=(Xe,ht)=>Xe.featureInfo.featureIndex-ht.featureInfo.featureIndex;this.sortSubarray(w,T.min,T.max,H),this.sortSubarray(w,I.min,I.max,H);const W=Xe=>pe(Xe,Xe),se=[{coord:new tr(0,0),height:0},{coord:new tr(0,0),height:0}],ue=(Xe,ht)=>Xe<ht,me=fe(),Ee=fe(),Ie=fe(),Re=fe(),ze=fe();for(let Xe=T.min;Xe<T.max;Xe++){if(!this.prepareEdgePoints(se,u,y,w[Xe],ue))continue;const[ht,ut]=se,mt=W(z(ze,-(ut.coord.y-ht.coord.y),ut.coord.x-ht.coord.x,0));L=this.addFeatureSection(w[Xe].featureInfo.featureIndex,L,this.tunnelFeatureSections,s),s.addQuad(z(me,ht.coord.x,ht.coord.y,ht.height),z(Ee,ut.coord.x,ut.coord.y,ut.height),z(Ie,ut.coord.x,ut.coord.y,w[Xe].isTunnel?-.1:0),z(Re,ht.coord.x,ht.coord.y,w[Xe].isTunnel?-.1:0),mt)}for(let Xe=I.min;Xe<I.max;Xe++){const ht=w[Xe];ht.isTunnel&&([ht.a,ht.b]=[ht.b,ht.a]);const ut=u[ht.a],mt=u[ht.b],$t=W(z(ze,-(mt.y-ut.y),mt.x-ut.x,0));L=this.addFeatureSection(ht.featureInfo.featureIndex,L,this.tunnelFeatureSections,s),s.addQuad(z(me,mt.x,mt.y,0),z(Ee,ut.x,ut.y,0),z(Ie,ut.x,ut.y,y[ht.a]+4),z(Re,mt.x,mt.y,y[ht.b]+4),$t),s.addQuad(z(me,ut.x,ut.y,0),z(Ee,mt.x,mt.y,0),z(Ie,mt.x,mt.y,y[ht.b]+4),z(Re,ut.x,ut.y,y[ht.a]+4),$t)}this.tunnelFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:s.getVertexCount()})}setElevatedPoint(s,u,y,w){s.coord.x=u,s.coord.y=y,s.height=w}prepareEdgePoints(s,u,y,w,T){let I=u[w.a].x,L=u[w.a].y,H=u[w.b].x,W=u[w.b].y,se=y[w.a],ue=y[w.b];const me=T(se,0),Ee=T(ue,0);if(me&&Ee)return this.setElevatedPoint(s[0],I,L,se),this.setElevatedPoint(s[1],H,W,ue),!0;if(!me&&!Ee)return!1;if(me){if(!Ee){const Ie=ue/(ue-se);H=at(H,I,Ie),W=at(W,L,Ie),ue=at(ue,se,Ie)}}else{const Ie=se/(se-ue);I=at(I,H,Ie),L=at(L,W,Ie),se=at(se,ue,Ie)}return this.setElevatedPoint(s[0],I,L,se),this.setElevatedPoint(s[1],H,W,ue),!0}prepareEdges(s,u){if(u.length===0)return;u.sort((L,H)=>L.hash===H.hash?H.polygonIdx-L.polygonIdx:H.hash>L.hash?1:-1);let y=0,w=0,T=0,I=u[y].polygonIdx;do w++,(w===u.length||u[y].hash!==u[w].hash)&&((w-y==1||u[w-1].polygonIdx!==I)&&(T<y&&(u[T]=u[y],u[y]=null),u[T].type="none",T++),y=w,y!==u.length&&(I=u[y].polygonIdx));while(y!==u.length);if(u.splice(T),u.length!==0&&s.length!==0){u.sort((W,se)=>W.portalHash<se.portalHash?1:-1);let L=0,H=0;for(;L!==u.length&&H!==s.length;){const W=u[L],se=s[H];W.portalHash>se.hash?L++:se.hash>W.portalHash?H++:(W.type=se.type,L++)}}}isOnBorder(s,u){return s<=0&&u<=0||s>=tn&&u>=tn}addFeatureSection(s,u,y,w){return s!==u&&(u=s,y.push({featureIndex:s,vertexStart:w.getVertexCount()}),w.clearVertexLookup()),u}sortSubarray(s,u,y,w){const T=s.slice(u,y);T.sort(w),s.splice(u,T.length,...T)}static computeEdgeHash(s,u){return(s.y===u.y&&s.x>u.x||s.y>u.y)&&([s,u]=[u,s]),BigInt(to.computePosHash(s))<<32n|BigInt(to.computePosHash(u))}static computePosHash(s){return((65535&s.x)<<16|65535&s.y)>>>0}}var Jy,Vf={exports:{}},e_=(Jy||(Jy=1,function(d,s){(function(u){function y(wt,St){return wt>St?1:wt<St?-1:0}var w=function(wt,St){wt===void 0&&(wt=y),St===void 0&&(St=!1),this._compare=wt,this._root=null,this._size=0,this._noDuplicates=!!St},T={size:{configurable:!0}};function I(wt,St,Rr,Ln,Kn){var $n=Kn-Ln;if($n>0){var gi=Ln+Math.floor($n/2),Yi={key:St[gi],data:Rr[gi],parent:wt};return Yi.left=I(Yi,St,Rr,Ln,gi),Yi.right=I(Yi,St,Rr,gi+1,Kn),Yi}return null}function L(wt,St,Rr,Ln,Kn){if(!(Rr>=Ln)){for(var $n=wt[Rr+Ln>>1],gi=Rr-1,Yi=Ln+1;;){do gi++;while(Kn(wt[gi],$n)<0);do Yi--;while(Kn(wt[Yi],$n)>0);if(gi>=Yi)break;var $s=wt[gi];wt[gi]=wt[Yi],wt[Yi]=$s,$s=St[gi],St[gi]=St[Yi],St[Yi]=$s}L(wt,St,Rr,Yi,Kn),L(wt,St,Yi+1,Ln,Kn)}}w.prototype.rotateLeft=function(wt){var St=wt.right;St&&(wt.right=St.left,St.left&&(St.left.parent=wt),St.parent=wt.parent),wt.parent?wt===wt.parent.left?wt.parent.left=St:wt.parent.right=St:this._root=St,St&&(St.left=wt),wt.parent=St},w.prototype.rotateRight=function(wt){var St=wt.left;St&&(wt.left=St.right,St.right&&(St.right.parent=wt),St.parent=wt.parent),wt.parent?wt===wt.parent.left?wt.parent.left=St:wt.parent.right=St:this._root=St,St&&(St.right=wt),wt.parent=St},w.prototype._splay=function(wt){for(;wt.parent;){var St=wt.parent;St.parent?St.left===wt&&St.parent.left===St?(this.rotateRight(St.parent),this.rotateRight(St)):St.right===wt&&St.parent.right===St?(this.rotateLeft(St.parent),this.rotateLeft(St)):St.left===wt&&St.parent.right===St?(this.rotateRight(St),this.rotateLeft(St)):(this.rotateLeft(St),this.rotateRight(St)):St.left===wt?this.rotateRight(St):this.rotateLeft(St)}},w.prototype.splay=function(wt){for(var St,Rr,Ln,Kn,$n;wt.parent;)(Rr=(St=wt.parent).parent)&&Rr.parent?((Ln=Rr.parent).left===Rr?Ln.left=wt:Ln.right=wt,wt.parent=Ln):(wt.parent=null,this._root=wt),Kn=wt.left,$n=wt.right,wt===St.left?(Rr&&(Rr.left===St?(St.right?(Rr.left=St.right,Rr.left.parent=Rr):Rr.left=null,St.right=Rr,Rr.parent=St):(Kn?(Rr.right=Kn,Kn.parent=Rr):Rr.right=null,wt.left=Rr,Rr.parent=wt)),$n?(St.left=$n,$n.parent=St):St.left=null,wt.right=St,St.parent=wt):(Rr&&(Rr.right===St?(St.left?(Rr.right=St.left,Rr.right.parent=Rr):Rr.right=null,St.left=Rr,Rr.parent=St):($n?(Rr.left=$n,$n.parent=Rr):Rr.left=null,wt.right=Rr,Rr.parent=wt)),Kn?(St.right=Kn,Kn.parent=St):St.right=null,wt.left=St,St.parent=wt)},w.prototype.replace=function(wt,St){wt.parent?wt===wt.parent.left?wt.parent.left=St:wt.parent.right=St:this._root=St,St&&(St.parent=wt.parent)},w.prototype.minNode=function(wt){if(wt===void 0&&(wt=this._root),wt)for(;wt.left;)wt=wt.left;return wt},w.prototype.maxNode=function(wt){if(wt===void 0&&(wt=this._root),wt)for(;wt.right;)wt=wt.right;return wt},w.prototype.insert=function(wt,St){var Rr=this._root,Ln=null,Kn=this._compare;if(this._noDuplicates)for(;Rr;){if(Ln=Rr,Kn(Rr.key,wt)===0)return;Rr=Kn(Rr.key,wt)<0?Rr.right:Rr.left}else for(;Rr;)Ln=Rr,Rr=Kn(Rr.key,wt)<0?Rr.right:Rr.left;return Rr={key:wt,data:St,left:null,right:null,parent:Ln},Ln?Kn(Ln.key,Rr.key)<0?Ln.right=Rr:Ln.left=Rr:this._root=Rr,this.splay(Rr),this._size++,Rr},w.prototype.find=function(wt){for(var St=this._root,Rr=this._compare;St;){var Ln=Rr(St.key,wt);if(Ln<0)St=St.right;else{if(!(Ln>0))return St;St=St.left}}return null},w.prototype.contains=function(wt){for(var St=this._root,Rr=this._compare;St;){var Ln=Rr(wt,St.key);if(Ln===0)return!0;St=Ln<0?St.left:St.right}return!1},w.prototype.remove=function(wt){var St=this.find(wt);if(!St)return!1;if(this.splay(St),St.left)if(St.right){var Rr=this.minNode(St.right);Rr.parent!==St&&(this.replace(Rr,Rr.right),Rr.right=St.right,Rr.right.parent=Rr),this.replace(St,Rr),Rr.left=St.left,Rr.left.parent=Rr}else this.replace(St,St.left);else this.replace(St,St.right);return this._size--,!0},w.prototype.removeNode=function(wt){if(!wt)return!1;if(this.splay(wt),wt.left)if(wt.right){var St=this.minNode(wt.right);St.parent!==wt&&(this.replace(St,St.right),St.right=wt.right,St.right.parent=St),this.replace(wt,St),St.left=wt.left,St.left.parent=St}else this.replace(wt,wt.left);else this.replace(wt,wt.right);return this._size--,!0},w.prototype.erase=function(wt){var St=this.find(wt);if(St){this.splay(St);var Rr=St.left,Ln=St.right,Kn=null;Rr&&(Rr.parent=null,Kn=this.maxNode(Rr),this.splay(Kn),this._root=Kn),Ln&&(Rr?Kn.right=Ln:this._root=Ln,Ln.parent=Kn),this._size--}},w.prototype.pop=function(){var wt=this._root,St=null;if(wt){for(;wt.left;)wt=wt.left;St={key:wt.key,data:wt.data},this.remove(wt.key)}return St},w.prototype.next=function(wt){var St=wt;if(St)if(St.right)for(St=St.right;St&&St.left;)St=St.left;else for(St=wt.parent;St&&St.right===wt;)wt=St,St=St.parent;return St},w.prototype.prev=function(wt){var St=wt;if(St)if(St.left)for(St=St.left;St&&St.right;)St=St.right;else for(St=wt.parent;St&&St.left===wt;)wt=St,St=St.parent;return St},w.prototype.forEach=function(wt){for(var St=this._root,Rr=[],Ln=!1,Kn=0;!Ln;)St?(Rr.push(St),St=St.left):Rr.length>0?(wt(St=Rr.pop(),Kn++),St=St.right):Ln=!0;return this},w.prototype.range=function(wt,St,Rr,Ln){for(var Kn=[],$n=this._compare,gi=this._root;Kn.length!==0||gi;)if(gi)Kn.push(gi),gi=gi.left;else{if($n((gi=Kn.pop()).key,St)>0)break;if($n(gi.key,wt)>=0&&Rr.call(Ln,gi))return this;gi=gi.right}return this},w.prototype.keys=function(){for(var wt=this._root,St=[],Rr=[],Ln=!1;!Ln;)wt?(St.push(wt),wt=wt.left):St.length>0?(wt=St.pop(),Rr.push(wt.key),wt=wt.right):Ln=!0;return Rr},w.prototype.values=function(){for(var wt=this._root,St=[],Rr=[],Ln=!1;!Ln;)wt?(St.push(wt),wt=wt.left):St.length>0?(wt=St.pop(),Rr.push(wt.data),wt=wt.right):Ln=!0;return Rr},w.prototype.at=function(wt){for(var St=this._root,Rr=[],Ln=!1,Kn=0;!Ln;)if(St)Rr.push(St),St=St.left;else if(Rr.length>0){if(St=Rr.pop(),Kn===wt)return St;Kn++,St=St.right}else Ln=!0;return null},w.prototype.load=function(wt,St,Rr){if(wt===void 0&&(wt=[]),St===void 0&&(St=[]),Rr===void 0&&(Rr=!1),this._size!==0)throw new Error("bulk-load: tree is not empty");var Ln=wt.length;return Rr&&L(wt,St,0,Ln-1,this._compare),this._root=I(null,wt,St,0,Ln),this._size=Ln,this},w.prototype.min=function(){var wt=this.minNode(this._root);return wt?wt.key:null},w.prototype.max=function(){var wt=this.maxNode(this._root);return wt?wt.key:null},w.prototype.isEmpty=function(){return this._root===null},T.size.get=function(){return this._size},w.createTree=function(wt,St,Rr,Ln,Kn){return new w(Rr,Kn).load(wt,St,Ln)},Object.defineProperties(w.prototype,T);var H=0,W=1,se=2,ue=3,me=0,Ee=1,Ie=2,Re=3;function ze(wt,St,Rr){St===null?(wt.inOut=!1,wt.otherInOut=!0):(wt.isSubject===St.isSubject?(wt.inOut=!St.inOut,wt.otherInOut=St.otherInOut):(wt.inOut=!St.otherInOut,wt.otherInOut=St.isVertical()?!St.inOut:St.inOut),St&&(wt.prevInResult=!Xe(St,Rr)||St.isVertical()?St.prevInResult:St));var Ln=Xe(wt,Rr);wt.resultTransition=Ln?function(Kn,$n){var gi,Yi=!Kn.inOut,$s=!Kn.otherInOut;switch($n){case me:gi=Yi&&$s;break;case Ee:gi=Yi||$s;break;case Re:gi=Yi^$s;break;case Ie:gi=Kn.isSubject?Yi&&!$s:$s&&!Yi}return gi?1:-1}(wt,Rr):0}function Xe(wt,St){switch(wt.type){case H:switch(St){case me:return!wt.otherInOut;case Ee:return wt.otherInOut;case Ie:return wt.isSubject&&wt.otherInOut||!wt.isSubject&&!wt.otherInOut;case Re:return!0}break;case se:return St===me||St===Ee;case ue:return St===Ie;case W:return!1}return!1}var ht=function(wt,St,Rr,Ln,Kn){this.left=St,this.point=wt,this.otherEvent=Rr,this.isSubject=Ln,this.type=Kn||H,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},ut={inResult:{configurable:!0}};function mt(wt,St){return wt[0]===St[0]&&wt[1]===St[1]}ht.prototype.isBelow=function(wt){var St=this.point,Rr=this.otherEvent.point;return this.left?(St[0]-wt[0])*(Rr[1]-wt[1])-(Rr[0]-wt[0])*(St[1]-wt[1])>0:(Rr[0]-wt[0])*(St[1]-wt[1])-(St[0]-wt[0])*(Rr[1]-wt[1])>0},ht.prototype.isAbove=function(wt){return!this.isBelow(wt)},ht.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},ut.inResult.get=function(){return this.resultTransition!==0},ht.prototype.clone=function(){var wt=new ht(this.point,this.left,this.otherEvent,this.isSubject,this.type);return wt.contourId=this.contourId,wt.resultTransition=this.resultTransition,wt.prevInResult=this.prevInResult,wt.isExteriorRing=this.isExteriorRing,wt.inOut=this.inOut,wt.otherInOut=this.otherInOut,wt},Object.defineProperties(ht.prototype,ut);var $t=11102230246251565e-32,Ut=134217729,Ht=(3+8*$t)*$t;function or(wt,St,Rr,Ln,Kn){var $n,gi,Yi,$s,Ks=St[0],Ps=Ln[0],qo=0,tl=0;Ps>Ks==Ps>-Ks?($n=Ks,Ks=St[++qo]):($n=Ps,Ps=Ln[++tl]);var Ts=0;if(qo<wt&&tl<Rr)for(Ps>Ks==Ps>-Ks?(Yi=$n-((gi=Ks+$n)-Ks),Ks=St[++qo]):(Yi=$n-((gi=Ps+$n)-Ps),Ps=Ln[++tl]),$n=gi,Yi!==0&&(Kn[Ts++]=Yi);qo<wt&&tl<Rr;)Ps>Ks==Ps>-Ks?(Yi=$n-((gi=$n+Ks)-($s=gi-$n))+(Ks-$s),Ks=St[++qo]):(Yi=$n-((gi=$n+Ps)-($s=gi-$n))+(Ps-$s),Ps=Ln[++tl]),$n=gi,Yi!==0&&(Kn[Ts++]=Yi);for(;qo<wt;)Yi=$n-((gi=$n+Ks)-($s=gi-$n))+(Ks-$s),Ks=St[++qo],$n=gi,Yi!==0&&(Kn[Ts++]=Yi);for(;tl<Rr;)Yi=$n-((gi=$n+Ps)-($s=gi-$n))+(Ps-$s),Ps=Ln[++tl],$n=gi,Yi!==0&&(Kn[Ts++]=Yi);return $n===0&&Ts!==0||(Kn[Ts++]=$n),Ts}function cr(wt){return new Float64Array(wt)}var Gr=33306690738754716e-32,xr=22204460492503146e-32,Yr=11093356479670487e-47,In=cr(4),nn=cr(8),gn=cr(12),En=cr(16),zr=cr(4);function _n(wt,St,Rr){var Ln=function(Kn,$n,gi,Yi,$s,Ks){var Ps=($n-Ks)*(gi-$s),qo=(Kn-$s)*(Yi-Ks),tl=Ps-qo;if(Ps===0||qo===0||Ps>0!=qo>0)return tl;var Ts=Math.abs(Ps+qo);return Math.abs(tl)>=Gr*Ts?tl:-function(Ta,ha,Mo,Ka,_a,fa,Aa){var jo,Ls,Yo,qa,$i,po,va,dl,Ia,ac,ra,ql,mf,Vu,wu,gf,em,lc,Dc=Ta-_a,Gu=Mo-_a,Fh=ha-fa,lh=Ka-fa;In[0]=(wu=(dl=Dc-(va=(po=Ut*Dc)-(po-Dc)))*(ac=lh-(Ia=(po=Ut*lh)-(po-lh)))-((Vu=Dc*lh)-va*Ia-dl*Ia-va*ac))-((ra=wu-(em=(dl=Fh-(va=(po=Ut*Fh)-(po-Fh)))*(ac=Gu-(Ia=(po=Ut*Gu)-(po-Gu)))-((gf=Fh*Gu)-va*Ia-dl*Ia-va*ac)))+($i=wu-ra))+($i-em),In[1]=(mf=Vu-((ql=Vu+ra)-($i=ql-Vu))+(ra-$i))-((ra=mf-gf)+($i=mf-ra))+($i-gf),In[2]=ql-((lc=ql+ra)-($i=lc-ql))+(ra-$i),In[3]=lc;var vg=function(nre,j6){for(var U6=j6[0],W3=1;W3<4;W3++)U6+=j6[W3];return U6}(0,In),U_=xr*Aa;if(vg>=U_||-vg>=U_||(jo=Ta-(Dc+($i=Ta-Dc))+($i-_a),Yo=Mo-(Gu+($i=Mo-Gu))+($i-_a),Ls=ha-(Fh+($i=ha-Fh))+($i-fa),qa=Ka-(lh+($i=Ka-lh))+($i-fa),jo===0&&Ls===0&&Yo===0&&qa===0)||(U_=Yr*Aa+Ht*Math.abs(vg),(vg+=Dc*qa+lh*jo-(Fh*Yo+Gu*Ls))>=U_||-vg>=U_))return vg;zr[0]=(wu=(dl=jo-(va=(po=Ut*jo)-(po-jo)))*(ac=lh-(Ia=(po=Ut*lh)-(po-lh)))-((Vu=jo*lh)-va*Ia-dl*Ia-va*ac))-((ra=wu-(em=(dl=Ls-(va=(po=Ut*Ls)-(po-Ls)))*(ac=Gu-(Ia=(po=Ut*Gu)-(po-Gu)))-((gf=Ls*Gu)-va*Ia-dl*Ia-va*ac)))+($i=wu-ra))+($i-em),zr[1]=(mf=Vu-((ql=Vu+ra)-($i=ql-Vu))+(ra-$i))-((ra=mf-gf)+($i=mf-ra))+($i-gf),zr[2]=ql-((lc=ql+ra)-($i=lc-ql))+(ra-$i),zr[3]=lc;var S9=or(4,In,4,zr,nn);zr[0]=(wu=(dl=Dc-(va=(po=Ut*Dc)-(po-Dc)))*(ac=qa-(Ia=(po=Ut*qa)-(po-qa)))-((Vu=Dc*qa)-va*Ia-dl*Ia-va*ac))-((ra=wu-(em=(dl=Fh-(va=(po=Ut*Fh)-(po-Fh)))*(ac=Yo-(Ia=(po=Ut*Yo)-(po-Yo)))-((gf=Fh*Yo)-va*Ia-dl*Ia-va*ac)))+($i=wu-ra))+($i-em),zr[1]=(mf=Vu-((ql=Vu+ra)-($i=ql-Vu))+(ra-$i))-((ra=mf-gf)+($i=mf-ra))+($i-gf),zr[2]=ql-((lc=ql+ra)-($i=lc-ql))+(ra-$i),zr[3]=lc;var C9=or(S9,nn,4,zr,gn);zr[0]=(wu=(dl=jo-(va=(po=Ut*jo)-(po-jo)))*(ac=qa-(Ia=(po=Ut*qa)-(po-qa)))-((Vu=jo*qa)-va*Ia-dl*Ia-va*ac))-((ra=wu-(em=(dl=Ls-(va=(po=Ut*Ls)-(po-Ls)))*(ac=Yo-(Ia=(po=Ut*Yo)-(po-Yo)))-((gf=Ls*Yo)-va*Ia-dl*Ia-va*ac)))+($i=wu-ra))+($i-em),zr[1]=(mf=Vu-((ql=Vu+ra)-($i=ql-Vu))+(ra-$i))-((ra=mf-gf)+($i=mf-ra))+($i-gf),zr[2]=ql-((lc=ql+ra)-($i=lc-ql))+(ra-$i),zr[3]=lc;var E9=or(C9,gn,4,zr,En);return En[E9-1]}(Kn,$n,gi,Yi,$s,Ks,Ts)}(wt[0],wt[1],St[0],St[1],Rr[0],Rr[1]);return Ln>0?-1:Ln<0?1:0}function wr(wt,St){var Rr=wt.point,Ln=St.point;return Rr[0]>Ln[0]?1:Rr[0]<Ln[0]?-1:Rr[1]!==Ln[1]?Rr[1]>Ln[1]?1:-1:function(Kn,$n,gi,Yi){return Kn.left!==$n.left?Kn.left?1:-1:_n(gi,Kn.otherEvent.point,$n.otherEvent.point)!==0?Kn.isBelow($n.otherEvent.point)?-1:1:!Kn.isSubject&&$n.isSubject?1:-1}(wt,St,Rr)}function Vr(wt,St,Rr){var Ln=new ht(St,!1,wt,wt.isSubject),Kn=new ht(St,!0,wt.otherEvent,wt.isSubject);return mt(wt.point,wt.otherEvent.point)&&console.warn("what is that, a collapsed segment?",wt),Ln.contourId=Kn.contourId=wt.contourId,wr(Kn,wt.otherEvent)>0&&(wt.otherEvent.left=!0,Kn.left=!1),wt.otherEvent.otherEvent=Kn,wt.otherEvent=Ln,Rr.push(Kn),Rr.push(Ln),Rr}function Pn(wt,St){return wt[0]*St[1]-wt[1]*St[0]}function xn(wt,St){return wt[0]*St[0]+wt[1]*St[1]}function Ei(wt,St,Rr){var Ln=function($s,Ks,Ps,qo,tl){var Ts=[Ks[0]-$s[0],Ks[1]-$s[1]],Ta=[qo[0]-Ps[0],qo[1]-Ps[1]];function ha(po,va,dl){return[po[0]+va*dl[0],po[1]+va*dl[1]]}var Mo=[Ps[0]-$s[0],Ps[1]-$s[1]],Ka=Pn(Ts,Ta),_a=Ka*Ka,fa=xn(Ts,Ts);if(_a>0){var Aa=Pn(Mo,Ta)/Ka;if(Aa<0||Aa>1)return null;var jo=Pn(Mo,Ts)/Ka;return jo<0||jo>1?null:Aa===0||Aa===1?[ha($s,Aa,Ts)]:jo===0||jo===1?[ha(Ps,jo,Ta)]:[ha($s,Aa,Ts)]}if((_a=(Ka=Pn(Mo,Ts))*Ka)>0)return null;var Ls=xn(Ts,Mo)/fa,Yo=Ls+xn(Ts,Ta)/fa,qa=Math.min(Ls,Yo),$i=Math.max(Ls,Yo);return qa<=1&&$i>=0?qa===1?[ha($s,qa>0?qa:0,Ts)]:$i===0?[ha($s,$i<1?$i:1,Ts)]:[ha($s,qa>0?qa:0,Ts),ha($s,$i<1?$i:1,Ts)]:null}(wt.point,wt.otherEvent.point,St.point,St.otherEvent.point),Kn=Ln?Ln.length:0;if(Kn===0||Kn===1&&(mt(wt.point,St.point)||mt(wt.otherEvent.point,St.otherEvent.point))||Kn===2&&wt.isSubject===St.isSubject)return 0;if(Kn===1)return mt(wt.point,Ln[0])||mt(wt.otherEvent.point,Ln[0])||Vr(wt,Ln[0],Rr),mt(St.point,Ln[0])||mt(St.otherEvent.point,Ln[0])||Vr(St,Ln[0],Rr),1;var $n=[],gi=!1,Yi=!1;return mt(wt.point,St.point)?gi=!0:wr(wt,St)===1?$n.push(St,wt):$n.push(wt,St),mt(wt.otherEvent.point,St.otherEvent.point)?Yi=!0:wr(wt.otherEvent,St.otherEvent)===1?$n.push(St.otherEvent,wt.otherEvent):$n.push(wt.otherEvent,St.otherEvent),gi&&Yi||gi?(St.type=W,wt.type=St.inOut===wt.inOut?se:ue,gi&&!Yi&&Vr($n[1].otherEvent,$n[0].point,Rr),2):Yi?(Vr($n[0],$n[1].point,Rr),3):$n[0]!==$n[3].otherEvent?(Vr($n[0],$n[1].point,Rr),Vr($n[1],$n[2].point,Rr),3):(Vr($n[0],$n[1].point,Rr),Vr($n[3].otherEvent,$n[2].point,Rr),3)}function pi(wt,St){if(wt===St)return 0;if(_n(wt.point,wt.otherEvent.point,St.point)!==0||_n(wt.point,wt.otherEvent.point,St.otherEvent.point)!==0)return mt(wt.point,St.point)?wt.isBelow(St.otherEvent.point)?-1:1:wt.point[0]===St.point[0]?wt.point[1]<St.point[1]?-1:1:wr(wt,St)===1?St.isAbove(wt.point)?-1:1:wt.isBelow(St.point)?-1:1;if(wt.isSubject!==St.isSubject)return wt.isSubject?-1:1;var Rr=wt.point,Ln=St.point;return Rr[0]===Ln[0]&&Rr[1]===Ln[1]?(Rr=wt.otherEvent.point)[0]===(Ln=St.otherEvent.point)[0]&&Rr[1]===Ln[1]?0:wt.contourId>St.contourId?1:-1:wr(wt,St)===1?1:-1}var An=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function Cn(wt,St,Rr,Ln){var Kn,$n=wt+1,gi=St[wt].point,Yi=St.length;for($n<Yi&&(Kn=St[$n].point);$n<Yi&&Kn[0]===gi[0]&&Kn[1]===gi[1];){if(!Rr[$n])return $n;++$n<Yi&&(Kn=St[$n].point)}for($n=wt-1;Rr[$n]&&$n>Ln;)$n--;return $n}An.prototype.isExterior=function(){return this.holeOf==null};var yi=Rn,ii=Rn;function Rn(wt,St){if(!(this instanceof Rn))return new Rn(wt,St);if(this.data=wt||[],this.length=this.data.length,this.compare=St||oi,this.length>0)for(var Rr=(this.length>>1)-1;Rr>=0;Rr--)this._down(Rr)}function oi(wt,St){return wt<St?-1:wt>St?1:0}Rn.prototype={push:function(wt){this.data.push(wt),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var wt=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),wt}},peek:function(){return this.data[0]},_up:function(wt){for(var St=this.data,Rr=this.compare,Ln=St[wt];wt>0;){var Kn=wt-1>>1,$n=St[Kn];if(Rr(Ln,$n)>=0)break;St[wt]=$n,wt=Kn}St[wt]=Ln},_down:function(wt){for(var St=this.data,Rr=this.compare,Ln=this.length>>1,Kn=St[wt];wt<Ln;){var $n=1+(wt<<1),gi=$n+1,Yi=St[$n];if(gi<this.length&&Rr(St[gi],Yi)<0&&($n=gi,Yi=St[gi]),Rr(Yi,Kn)>=0)break;St[wt]=Yi,wt=$n}St[wt]=Kn}},yi.default=ii;var Ui=Math.max,ts=Math.min,Es=0;function gs(wt,St,Rr,Ln,Kn,$n){var gi,Yi,$s,Ks,Ps,qo;for(gi=0,Yi=wt.length-1;gi<Yi;gi++)if(Ks=wt[gi+1],Ps=new ht($s=wt[gi],!1,void 0,St),qo=new ht(Ks,!1,Ps,St),Ps.otherEvent=qo,$s[0]!==Ks[0]||$s[1]!==Ks[1]){Ps.contourId=qo.contourId=Rr,$n||(Ps.isExteriorRing=!1,qo.isExteriorRing=!1),wr(Ps,qo)>0?qo.left=!0:Ps.left=!0;var tl=$s[0],Ts=$s[1];Kn[0]=ts(Kn[0],tl),Kn[1]=ts(Kn[1],Ts),Kn[2]=Ui(Kn[2],tl),Kn[3]=Ui(Kn[3],Ts),Ln.push(Ps),Ln.push(qo)}}var Xs=[];function Ds(wt,St,Rr){typeof wt[0][0][0]=="number"&&(wt=[wt]),typeof St[0][0][0]=="number"&&(St=[St]);var Ln=function(Ts,Ta,ha){var Mo=null;return Ts.length*Ta.length==0&&(ha===me?Mo=Xs:ha===Ie?Mo=Ts:ha!==Ee&&ha!==Re||(Mo=Ts.length===0?Ta:Ts)),Mo}(wt,St,Rr);if(Ln)return Ln===Xs?null:Ln;var Kn=[1/0,1/0,-1/0,-1/0],$n=[1/0,1/0,-1/0,-1/0],gi=function(Ts,Ta,ha,Mo,Ka){var _a,fa,Aa,jo,Ls,Yo,qa=new yi(null,wr);for(Aa=0,jo=Ts.length;Aa<jo;Aa++)for(Ls=0,Yo=(_a=Ts[Aa]).length;Ls<Yo;Ls++)(fa=Ls===0)&&Es++,gs(_a[Ls],!0,Es,qa,ha,fa);for(Aa=0,jo=Ta.length;Aa<jo;Aa++)for(Ls=0,Yo=(_a=Ta[Aa]).length;Ls<Yo;Ls++)fa=Ls===0,Ka===Ie&&(fa=!1),fa&&Es++,gs(_a[Ls],!1,Es,qa,Mo,fa);return qa}(wt,St,Kn,$n,Rr);if(Ln=function(Ts,Ta,ha,Mo,Ka){var _a=null;return(ha[0]>Mo[2]||Mo[0]>ha[2]||ha[1]>Mo[3]||Mo[1]>ha[3])&&(Ka===me?_a=Xs:Ka===Ie?_a=Ts:Ka!==Ee&&Ka!==Re||(_a=Ts.concat(Ta))),_a}(wt,St,Kn,$n,Rr))return Ln===Xs?null:Ln;for(var Yi=function(Ts){var Ta,ha,Mo=function(Aa){var jo,Ls,Yo,qa,$i=[];for(Ls=0,Yo=Aa.length;Ls<Yo;Ls++)((jo=Aa[Ls]).left&&jo.inResult||!jo.left&&jo.otherEvent.inResult)&&$i.push(jo);for(var po=!1;!po;)for(po=!0,Ls=0,Yo=$i.length;Ls<Yo;Ls++)Ls+1<Yo&&wr($i[Ls],$i[Ls+1])===1&&(qa=$i[Ls],$i[Ls]=$i[Ls+1],$i[Ls+1]=qa,po=!1);for(Ls=0,Yo=$i.length;Ls<Yo;Ls++)(jo=$i[Ls]).otherPos=Ls;for(Ls=0,Yo=$i.length;Ls<Yo;Ls++)(jo=$i[Ls]).left||(qa=jo.otherPos,jo.otherPos=jo.otherEvent.otherPos,jo.otherEvent.otherPos=qa);return $i}(Ts),Ka={},_a=[],fa=function(){if(!Ka[Ta]){var Aa=_a.length,jo=function($i,po,va){var dl=new An;if($i.prevInResult!=null){var Ia=$i.prevInResult,ac=Ia.outputContourId;if(Ia.resultTransition>0){var ra=po[ac];if(ra.holeOf!=null){var ql=ra.holeOf;po[ql].holeIds.push(va),dl.holeOf=ql,dl.depth=po[ac].depth}else po[ac].holeIds.push(va),dl.holeOf=ac,dl.depth=po[ac].depth+1}else dl.holeOf=null,dl.depth=po[ac].depth}else dl.holeOf=null,dl.depth=0;return dl}(Mo[Ta],_a,Aa),Ls=function($i){Ka[$i]=!0,$i<Mo.length&&Mo[$i]&&(Mo[$i].outputContourId=Aa)},Yo=Ta,qa=Ta;for(jo.points.push(Mo[Ta].point);Ls(Yo),Ls(Yo=Mo[Yo].otherPos),jo.points.push(Mo[Yo].point),!((Yo=Cn(Yo,Mo,Ka,qa))==qa||Yo>=Mo.length)&&Mo[Yo];);_a.push(jo)}};for(Ta=0,ha=Mo.length;Ta<ha;Ta++)fa();return _a}(function(Ts,Ta,ha,Mo,Ka,_a){for(var fa,Aa,jo,Ls=new w(pi),Yo=[],qa=Math.min(Mo[2],Ka[2]);Ts.length!==0;){var $i=Ts.pop();if(Yo.push($i),_a===me&&$i.point[0]>qa||_a===Ie&&$i.point[0]>Mo[2])break;if($i.left){Aa=fa=Ls.insert($i),fa=fa!==(jo=Ls.minNode())?Ls.prev(fa):null,Aa=Ls.next(Aa);var po=fa?fa.key:null;if(ze($i,po,_a),Aa&&Ei($i,Aa.key,Ts)===2&&(ze($i,po,_a),ze(Aa.key,$i,_a)),fa&&Ei(fa.key,$i,Ts)===2){var va=fa;ze(po,(va=va!==jo?Ls.prev(va):null)?va.key:null,_a),ze($i,po,_a)}}else Aa=fa=Ls.find($i=$i.otherEvent),fa&&Aa&&(fa=fa!==jo?Ls.prev(fa):null,Aa=Ls.next(Aa),Ls.remove($i),Aa&&fa&&Ei(fa.key,Aa.key,Ts))}return Yo}(gi,0,0,Kn,$n,Rr)),$s=[],Ks=0;Ks<Yi.length;Ks++){var Ps=Yi[Ks];if(Ps.isExterior()){for(var qo=[Ps.points],tl=0;tl<Ps.holeIds.length;tl++)qo.push(Yi[Ps.holeIds[tl]].points);$s.push(qo)}}return $s}var ya={UNION:Ee,DIFFERENCE:Ie,INTERSECTION:me,XOR:Re};u.diff=function(wt,St){return Ds(wt,St,Ie)},u.intersection=function(wt,St){return Ds(wt,St,me)},u.operations=ya,u.union=function(wt,St){return Ds(wt,St,Ee)},u.xor=function(wt,St){return Ds(wt,St,Re)},Object.defineProperty(u,"__esModule",{value:!0})})(s)}(0,Vf.exports)),Vf.exports);/**
 * martinez v0.7.4
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */function T1(d,s,u,y){const w=[],T=y===0?(I,L,H,W,se,ue)=>{I.push(new tr(ue,H+(ue-L)/(W-L)*(se-H)))}:(I,L,H,W,se,ue)=>{I.push(new tr(L+(ue-H)/(se-H)*(W-L),ue))};for(const I of d){const L=[];for(const H of I){if(H.length<=2)continue;const W=[];for(let me=0;me<H.length-1;me++){const Ee=H[me].x,Ie=H[me].y,Re=H[me+1].x,ze=H[me+1].y,Xe=y===0?Ee:Ie,ht=y===0?Re:ze;Xe<s?ht>s&&T(W,Ee,Ie,Re,ze,s):Xe>u?ht<u&&T(W,Ee,Ie,Re,ze,u):W.push(H[me]),ht<s&&Xe>=s&&T(W,Ee,Ie,Re,ze,s),ht>u&&Xe<=u&&T(W,Ee,Ie,Re,ze,u)}let se=H[H.length-1];const ue=y===0?se.x:se.y;ue>=s&&ue<=u&&W.push(se),W.length&&(se=W[W.length-1],W[0].x===se.x&&W[0].y===se.y||W.push(W[0]),L.push(W))}L.length&&w.push(L)}return w}function _l(d,s){const u=I1(d),y=I1([s]),w=e_.intersection(u,y);return w==null?[]:m0(w)}function U5(d,s){let y=I1(d,65536);for(;s.valid();s.next()){const[w,T]=s.get(),I=w.x*65536,L=w.y*65536,H=T.x*65536,W=T.y*65536,se=H-I,ue=W-L,me=Math.hypot(se,ue),Ee=Math.trunc(ue/me*3),Ie=-Math.trunc(se/me*3);y=e_.diff(y,[[[I,L],[H,W],[H+Ee,W+Ie],[I+Ee,L+Ie],[I,L]]])}return m0(y,1/65536)}function I1(d,s=1){return[d.map(u=>u.map(y=>[y.x*s,y.y*s]))]}function m0(d,s=1){return d.map(u=>u.map((y,w)=>{const T=y.map(I=>new tr(I[0]*s,I[1]*s).round());return w>0&&T.reverse(),T}))}class t_{constructor(s,u){this.layoutVertexArray=new Wc,this.indexArray=new Lo,this.lineIndexArray=new cu,this.triangleSegments=new wo,this.lineSegments=new wo,this.programConfigurations=new Qu(s.layers,{zoom:s.zoom,lut:s.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new Ud)}update(s,u,y,w,T,I,L,H){this.programConfigurations.updatePaintArrays(s,u,T,y,w,I,L,H)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,pf.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.lineIndexBuffer=s.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=s.createVertexBuffer(this.elevatedLayoutVertexArray,$c.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(s,u,y,w,T,I,L){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,y,w,T,I,void 0,L)}}class r_{constructor(s){this.zoom=s.zoom,this.pixelRatio=s.pixelRatio,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lut=s.lut,this.bufferData=new t_(s,!1),this.elevationBufferData=new t_(s,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=s.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference"),this.sourceLayerIndex=s.sourceLayerIndex,this.worldview=s.worldview}updateFootprints(s,u){}populate(s,u,y,w){this.hasPattern=Xy("fill",this.layers,this.pixelRatio,u);const T=this.layers[0].layout.get("fill-sort-key"),I=[];for(const{feature:L,id:H,index:W,sourceLayerIndex:se}of s){const ue=this.layers[0]._featureFilter.needGeometry,me=kr(L,ue);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom,{worldview:this.worldview}),me,y))continue;const Ee=T?T.evaluate(me,{},y,u.availableImages):void 0,Ie={id:H,properties:L.properties,type:L.type,sourceLayerIndex:se,index:W,geometry:ue?me.geometry:qt(L,y,w),patterns:{},sortKey:Ee};I.push(Ie)}T&&I.sort((L,H)=>L.sortKey-H.sortKey);for(const L of I){const{geometry:H,index:W,sourceLayerIndex:se}=L;if(this.hasPattern){const ue=Zy("fill",this.layers,L,this.zoom,this.pixelRatio,u);this.patternFeatures.push(ue)}else this.addFeature(L,H,W,y,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(s[W].feature,H,W,se,this.index)}}update(s,u,y,w,T,I,L){this.bufferData.update(s,u,y,w,T,I,L,this.worldview),this.elevationBufferData.update(s,u,y,w,T,I,L,this.worldview),this.elevatedStructures&&this.elevatedStructures.update(s,u,y,w,T,I,L,this.worldview)}addFeatures(s,u,y,w,T,I){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,u,y,w,I,s.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(s){this.bufferData.upload(s),this.elevationBufferData.upload(s),this.elevatedStructures&&this.elevatedStructures.upload(s)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(s,u,y,w,T,I=[],L,H){const W=Mp(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(s,W,w,y,H):this.addGeometry(W,this.bufferData),this.bufferData.populatePaintArrays(s,y,T,I,w,L,this.worldview),this.elevationBufferData.populatePaintArrays(s,y,T,I,w,L,this.worldview)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(s,u,y,w,T){this.elevatedStructures&&(this.elevatedStructures.construct(s),this.elevatedStructures.populatePaintArrays(u,y,w,T,this.worldview))}addElevatedRoadFeature(s,u,y,w,T){const I=new Array,L=it.getElevationFeature(s,T);if(!L)return void this.addGeometry(u,this.bufferData);{const W=this.clipPolygonsToTile(u,1);W.length>0&&I.push({polygons:W,elevationFeature:L,elevationTileID:y})}const H={guardRailEnabled:this.layers[0].layout.get("fill-construct-bridge-guard-rail").evaluate(s,{},y),featureIndex:w};for(const W of I)if(W.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new to(W.elevationTileID,this.layers,this.zoom,this.lut));const ue=W.elevationFeature.isTunnel();let me=0;s.properties.hasOwnProperty(xi)&&(me=+s.properties[xi]);for(const Ee of W.polygons)this.elevatedStructures.addPortalCandidates(W.elevationFeature.id,Ee,ue,W.elevationFeature,me)}W.elevationFeature.constantHeight==null&&(W.polygons=this.prepareElevatedPolygons(W.polygons,W.elevationFeature,W.elevationTileID));const se=new At(y,W.elevationTileID);this.addElevatedGeometry(W.polygons,se,W.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,w,H)}}addElevatedGeometry(s,u,y,w,T,I){const L={elevation:y,elevationSampler:u,bias:w,index:T,featureInfo:I},[H,W]=this.addGeometry(s,this.elevationBufferData,L);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:H,max:W}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,H),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,W))}addGeometry(s,u,y){let w=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,I=null;y&&(I=y.elevationSampler.constantElevation(y.elevation,y.bias),I!=null&&(w=I,T=I));const L=(H,W,se)=>{if(y!=null)if(W.push(H),I!=null)u.elevatedLayoutVertexArray.emplaceBack(I),se.push(I);else{const ue=y.elevationSampler.pointElevation(H,y.elevation,y.bias);u.elevatedLayoutVertexArray.emplaceBack(ue),se.push(ue),w=Math.min(w,ue),T=Math.max(T,ue)}};for(const H of s){let W=0;for(const ut of H)W+=ut.length;const se=u.triangleSegments.prepareSegment(W,u.layoutVertexArray,u.indexArray),ue=se.vertexLength,me=[],Ee=[],Ie=[],Re=[],ze=[],Xe=u.layoutVertexArray.length;for(const ut of H){if(ut.length===0)continue;ut!==H[0]&&Ee.push(me.length/2);const mt=u.lineSegments.prepareSegment(ut.length,u.layoutVertexArray,u.lineIndexArray),$t=mt.vertexLength;y&&ze.push(u.layoutVertexArray.length-Xe),L(ut[0],Ie,Re),u.layoutVertexArray.emplaceBack(ut[0].x,ut[0].y),u.lineIndexArray.emplaceBack($t+ut.length-1,$t),me.push(ut[0].x),me.push(ut[0].y);for(let Ut=1;Ut<ut.length;Ut++)L(ut[Ut],Ie,Re),u.layoutVertexArray.emplaceBack(ut[Ut].x,ut[Ut].y),u.lineIndexArray.emplaceBack($t+Ut-1,$t+Ut),me.push(ut[Ut].x),me.push(ut[Ut].y);mt.vertexLength+=ut.length,mt.primitiveLength+=ut.length}const ht=hg(me,Ee);for(let ut=0;ut<ht.length;ut+=3)u.indexArray.emplaceBack(ue+ht[ut],ue+ht[ut+1],ue+ht[ut+2]);if(ht.length>0&&y&&this.elevationMode==="hd-road-base"){const ut=y.elevation.isTunnel(),mt=y.elevation.safeArea,$t=this.elevatedStructures.addVertices(Ie,Re);this.elevatedStructures.addTriangles(ht,$t,ut);const Ut=ze.length;if(Ut>0){for(let Ht=0;Ht<Ut-1;Ht++)this.elevatedStructures.addRenderableRing(y.index,ze[Ht]+$t,ze[Ht+1]-ze[Ht],ut,mt,y.featureInfo);this.elevatedStructures.addRenderableRing(y.index,ze[Ut-1]+$t,Ie.length-ze[Ut-1],ut,mt,y.featureInfo)}}se.vertexLength+=W,se.primitiveLength+=ht.length/3}return[w,T]}prepareElevatedPolygons(s,u,y){const w=1/Mt(y),T=[];for(const I of s){const L=U5(I,new _e(u,w));T.push(...L)}return T}clipPolygonsToTile(s,u){const y=-u,w=-u,T=tn+u,I=tn+u;let L=0;const H=[],W=[];for(;L<s.length;L++){const me=s[L],Ee=Lr(me);(Ee.min.x>=y&&Ee.max.x<=T&&Ee.min.y>=w&&Ee.max.y<=I?H:W).push(me)}if(H.length===s.length)return s;const se=[new tr(y,w),new tr(T,w),new tr(T,I),new tr(y,I),new tr(y,w)],ue=H;for(const me of W)ue.push(..._l(me,se));return ue}}let Hb,Qb,Vb,Gb;Xn(r_,"FillBucket",{omit:["layers","patternFeatures"]}),Xn(t_,"FillBufferData"),Xn(to,"ElevatedStructures");class M1{constructor(s,u,y,w){if(this.triangleCount=u.length/3,this.min=new tr(0,0),this.max=new tr(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||s.length===0)return;const[T,I]=[s[0].clone(),s[0].clone()];for(let ue=1;ue<s.length;++ue){const me=s[ue];T.x=Math.min(T.x,me.x),T.y=Math.min(T.y,me.y),I.x=Math.max(I.x,me.x),I.y=Math.max(I.y,me.y)}if(w){const ue=Math.ceil(Math.max(I.x-T.x,I.y-T.y)/w);y=Math.max(y,ue)}if(y===0)return;this.min=T,this.max=I;const L=this.max.sub(this.min);L.x=Math.max(L.x,1),L.y=Math.max(L.y,1);const H=Math.max(L.x,L.y)/y;this.cellsX=Math.max(1,Math.ceil(L.x/H)),this.cellsY=Math.max(1,Math.ceil(L.y/H)),this.xScale=1/H,this.yScale=1/H;const W=[];for(let ue=0;ue<this.triangleCount;ue++){const me=s[u[3*ue+0]].sub(this.min),Ee=s[u[3*ue+1]].sub(this.min),Ie=s[u[3*ue+2]].sub(this.min),Re=Fp(Math.floor(Math.min(me.x,Ee.x,Ie.x)),this.xScale,this.cellsX),ze=Fp(Math.floor(Math.max(me.x,Ee.x,Ie.x)),this.xScale,this.cellsX),Xe=Fp(Math.floor(Math.min(me.y,Ee.y,Ie.y)),this.yScale,this.cellsY),ht=Fp(Math.floor(Math.max(me.y,Ee.y,Ie.y)),this.yScale,this.cellsY),ut=new tr(0,0),mt=new tr(0,0),$t=new tr(0,0),Ut=new tr(0,0);for(let Ht=Xe;Ht<=ht;++Ht){ut.y=mt.y=Ht*H,$t.y=Ut.y=(Ht+1)*H;for(let or=Re;or<=ze;++or)ut.x=$t.x=or*H,mt.x=Ut.x=(or+1)*H,(zs(me,Ee,Ie,ut,mt,Ut)||zs(me,Ee,Ie,ut,Ut,$t))&&W.push({cellIdx:Ht*this.cellsX+or,triIdx:ue})}}if(W.length===0)return;W.sort((ue,me)=>ue.cellIdx-me.cellIdx||ue.triIdx-me.triIdx);let se=0;for(;se<W.length;){const ue=W[se].cellIdx,me={start:this.payload.length,len:0};for(;se<W.length&&W[se].cellIdx===ue;)++me.len,this.payload.push(W[se++].triIdx);this.cells[ue]=me}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(s,u){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>s.x||s.y>this.max.y||this.min.y>s.y)return;const y=Fp(s.x-this.min.x,this.xScale,this.cellsX),w=Fp(s.y-this.min.y,this.yScale,this.cellsY),T=this.cells[w*this.cellsX+y];if(T){this._lazyInitLookup();for(let I=0;I<T.len;I++){const L=this.payload[T.start+I],H=Math.floor(L/8),W=1<<L%8;if(!(this.lookup[H]&W)&&(this.lookup[H]|=W,u.push(L),u.length===this.triangleCount))return}}}query(s,u,y){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>u.x||s.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const w=Fp(s.x-this.min.x,this.xScale,this.cellsX),T=Fp(u.x-this.min.x,this.xScale,this.cellsX),I=Fp(s.y-this.min.y,this.yScale,this.cellsY),L=Fp(u.y-this.min.y,this.yScale,this.cellsY);for(let H=I;H<=L;H++)for(let W=w;W<=T;W++){const se=this.cells[H*this.cellsX+W];if(se)for(let ue=0;ue<se.len;ue++){const me=this.payload[se.start+ue],Ee=Math.floor(me/8),Ie=1<<me%8;if(!(this.lookup[Ee]&Ie)&&(this.lookup[Ee]|=Ie,y.push(me),y.length===this.triangleCount))return}}}}function Fp(d,s,u){return Math.max(0,Math.min(u-1,Math.floor(d*s)))}Xn(M1,"TriangleGridIndex");class Wb{constructor(s){this.zoom=s.zoom,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[],this.worldview=s.worldview}updateFootprints(s,u){for(const y of this.footprints)u.push({footprint:y,id:s})}populate(s,u,y,w){const T=[];for(const{feature:I,id:L,index:H,sourceLayerIndex:W}of s){const se=this.layers[0]._featureFilter.needGeometry,ue=kr(I,se);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom,{worldview:this.worldview}),ue,y))continue;const me={id:L,properties:I.properties,type:I.type,sourceLayerIndex:W,index:H,geometry:se?ue.geometry:qt(I,y,w),patterns:{}};T.push(me)}for(const I of T){const{geometry:L,index:H,sourceLayerIndex:W}=I;this.addFeature(I,L,H,y,{},u.availableImages,u.brightness),u.featureIndex.insert(s[H].feature,L,H,W,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(s){}update(s,u,y,w,T,I,L){}destroy(){}addFeature(s,u,y,w,T,I=[],L){for(const H of Mp(u,2)){const W=[],se=[],ue=[],me=new tr(1/0,1/0),Ee=new tr(-1/0,-1/0);for(const ze of H)if(ze.length!==0){ze!==H[0]&&ue.push(se.length/2);for(let Xe=0;Xe<ze.length;Xe++)se.push(ze[Xe].x),se.push(ze[Xe].y),W.push(ze[Xe]),me.x=Math.min(me.x,ze[Xe].x),me.y=Math.min(me.y,ze[Xe].y),Ee.x=Math.max(Ee.x,ze[Xe].x),Ee.y=Math.max(Ee.y,ze[Xe].y)}const Ie=hg(se,ue),Re=new M1(W,Ie,8,256);this.footprints.push({vertices:W,indices:Ie,grid:Re,min:me,max:Ee})}}}Xn(Wb,"ClipBucket",{omit:["layers"]});const z5=Gs([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),H5=Gs([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),Q5=Gs([{name:"a_centroid_pos",components:2,type:"Uint16"}]),V5=Gs([{name:"a_join_normal_inside",components:3,type:"Int16"}]),n_=Gs([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),G5=Gs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:i_}=z5,g0=Number.MAX_SAFE_INTEGER,$b=g0-1;function Kb(d,s,u,y){return d.order<s||d.order===g0||!(d.clipMask&u)||function(w,T){return T.length!==0&&T.find(I=>I===w)===void 0}(y,d.clipScope)}function Kc(d,s){return d.x-s.x||d.y-s.y}function Wh(d,s){return Kc(d.min,s.min)===0&&Kc(d.max,s.max)===0}function s_(d,s){return!(d.min.x>s.max.x||d.max.x<s.min.x||d.min.y>s.max.y||d.max.y<s.min.y)}function F1(d,s){if(d.length!==s.length)return!1;for(let u=0;u<d.length;u++)if(d[u].sourceId!==s[u].sourceId||!Wh(d[u],s[u])||d[u].order!==s[u].order||d[u].clipMask!==s[u].clipMask||!zn(d[u].clipScope,s[u].clipScope))return!1;return!0}function qb(d,s,u){const y=1/tn,w=1/(1<<u.canonical.z),T=(s.x*y+u.canonical.x)*w+u.wrap,I=(s.y*y+u.canonical.y)*w;return{min:new tr((d.x*y+u.canonical.x)*w+u.wrap,(d.y*y+u.canonical.y)*w),max:new tr(T,I)}}function Yb(d,s,u){const y=1<<u.canonical.z,w=((s.x-u.wrap)*y-u.canonical.x)*tn,T=(s.y*y-u.canonical.y)*tn;return{min:new tr(((d.x-u.wrap)*y-u.canonical.x)*tn,(d.y*y-u.canonical.y)*tn),max:new tr(w,T)}}function o_(d,s,u,y,w,T,I){const L=d.indices,H=d.vertices,W=[];for(let se=y;se<y+w;se+=3){const ue=s[u[se+0]+T],me=s[u[se+1]+T],Ee=s[u[se+2]+T],Ie=Math.min(ue.x,me.x,Ee.x),Re=Math.max(ue.x,me.x,Ee.x),ze=Math.min(ue.y,me.y,Ee.y),Xe=Math.max(ue.y,me.y,Ee.y);W.length=0,d.grid.query(new tr(Ie,ze),new tr(Re,Xe),W);for(let ht=0;ht<W.length;ht++){const ut=W[ht];if(zs(H[L[3*ut+0]],H[L[3*ut+1]],H[L[3*ut+2]],ue,me,Ee,I))return!0}}return!1}function Xb(d,s,u,y){if(!d||!u)return!1;let w=d.vertices;if(!s.canonical.equals(y.canonical)||s.wrap!==y.wrap){if(u.vertices.length<d.vertices.length)return Xb(u,y,d,s);const T=s.canonical,I=y.canonical,L=Math.pow(2,I.z-T.z);w=d.vertices.map(H=>new tr((H.x+T.x*tn)*L-I.x*tn,(H.y+T.y*tn)*L-I.y*tn))}return o_(u,w,d.indices,0,d.indices.length,0,0)}function Zb(d,s,u,y){const w=Math.pow(2,y.z-u.z);return new tr((d+u.x*tn)*w-y.x*tn,(s+u.y*tn)*w-y.y*tn)}function P1(d,s){const u=[];s.grid.queryPoint(d,u);const y=s.indices,w=s.vertices;for(let T=0;T<u.length;T++){const I=u[T];if(oo([w[y[3*I+0]],w[y[3*I+1]],w[y[3*I+2]]],d))return!0}return!1}const a_=[new tr(0,0),new tr(tn,0),new tr(tn,tn),new tr(0,tn)];function Jb(d,s){const u=[];let y=[];if(!s||d.length<2)return[d];if(d.length===2)return Xi(d[0],d[1],a_)?[d]:[];for(let w=0;w<d.length+2;w++){const T=d[w%d.length],I=d[(w+1)%d.length],L=Xi(w===0?d[d.length-1]:d[(w-1)%d.length],T,a_),H=Xi(T,I,a_),W=L||H;W&&y.push(T),W&&H||y.length>0&&(y.length>1&&u.push(y),y=[])}return y.length>1&&u.push(y),u}const l_=br.types,e2=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],t2=["fill-extrusion-flood-light-ground-radius"],W5=Math.pow(2,13),$5=Math.pow(2,15)-1,r2=new tr(0,1),XA=2147483648;function Pp(d,s,u,y,w,T,I,L){d.emplaceBack((s<<1)+I,(u<<1)+T,(Math.floor(y*W5)<<1)+w,Math.round(L))}function y0(d,s,u){d.emplaceBack(s.x*tn,s.y*tn,u?1:0)}function L1(d,s,u,y,w,T){d.emplaceBack(s.x,s.y,(u.x<<1)+y,(u.y<<1)+w,T)}function _0(d,s,u){d.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}class n2{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class i2{constructor(){this.centroidXY=new tr(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new tr(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new tr(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0,this.buildingId=0}span(){return new tr(this.max.x-this.min.x,this.max.y-this.min.y)}}class c_{constructor(){this.acc=new tr(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(s,u){s.min.x===Number.MAX_VALUE&&(s.min.x=s.max.x=u.x,s.min.y=s.max.y=u.y)}appendEdge(s,u,y){this.accCount++,this.acc._add(u);let w=!!this.borders;u.x<s.min.x?(s.min.x=u.x,w=!0):u.x>s.max.x&&(s.max.x=u.x,w=!0),u.y<s.min.y?(s.min.y=u.y,w=!0):u.y>s.max.y&&(s.max.y=u.y,w=!0),((u.x===0||u.x===tn)&&u.x===y.x)!=((u.y===0||u.y===tn)&&u.y===y.y)&&this.processBorderOverlap(u,y),w&&this.checkBorderIntersection(u,y)}checkBorderIntersection(s,u){u.x<0!=s.x<0&&this.addBorderIntersection(0,at(u.y,s.y,(0-u.x)/(s.x-u.x))),u.x>tn!=s.x>tn&&this.addBorderIntersection(1,at(u.y,s.y,(tn-u.x)/(s.x-u.x))),u.y<0!=s.y<0&&this.addBorderIntersection(2,at(u.x,s.x,(0-u.y)/(s.y-u.y))),u.y>tn!=s.y>tn&&this.addBorderIntersection(3,at(u.x,s.x,(tn-u.y)/(s.y-u.y)))}addBorderIntersection(s,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const y=this.borders[s];u<y[0]&&(y[0]=u),u>y[1]&&(y[1]=u)}processBorderOverlap(s,u){if(s.x===u.x){if(s.y===u.y)return;const y=s.x===0?0:1;this.addBorderIntersection(y,u.y),this.addBorderIntersection(y,s.y)}else{const y=s.y===0?2:3;this.addBorderIntersection(y,u.x),this.addBorderIntersection(y,s.x)}}centroid(){return this.accCount===0?new tr(0,0):new tr(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((s,u)=>s+ +(u[0]!==Number.MAX_VALUE),0):0}}function u_(d,s){const u=d.add(s)._unit(),y=nt(d.x*u.x+d.y*u.y,-1,1);var w,T,I;return w=Math.acos(y),Math.min(4,Math.max(-4,Math.tan(w)))/4*$5*((T=d).x*(I=s).y-T.y*I.x<0?-1:1)}const K5=[d=>d.x<0,d=>d.x>tn,d=>d.y<0,d=>d.y>tn];function q5(d,s,u,y){const w=[4];if(y===0)return w;u._mult(y);const T=d.sub(u),I=s.sub(u),L=[d,s,T,I];for(let H=0;H<4;H++)for(const W of L)if(K5[H](W)){w.push(H);break}return w}class h_{constructor(s){this.vertexArray=new nc,this.indexArray=new Lo,this.programConfigurations=new Qu(s.layers,{zoom:s.zoom,lut:s.lut},u=>t2.includes(u)),this._segments=new wo,this.hiddenByLandmarkVertexArray=new cd,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new wo}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(s,u,y,w=!1){const T=s.length;if(T>2){let I=Math.max(0,this._segments.get().length-1);const L=this._segments._prepareSegment(4*T,this.vertexArray.length,2*this._segmentToGroundQuads[I].length);let H;I!==this._segments.get().length-1&&(I++,this._segmentToGroundQuads[I]=[],this._segmentToRegionTriCounts[I]=[0,0,0,0,0]);{const W=s[0],se=s[1];H=u_(W.sub(s[T-1])._perp()._unit(),se.sub(W)._perp()._unit())}for(let W=0;W<T;W++){const se=W===T-1?0:W+1,ue=s[W],me=s[se],Ee=s[se===T-1?0:se+1],Ie=me.sub(ue)._perp()._unit(),Re=u_(Ie,Ee.sub(me)._perp()._unit()),ze=H,Xe=Re;if(f_(ue,me,u)||w&&a2(ue,u)&&a2(me,u)){H=Re;continue}const ht=L.vertexLength;L1(this.vertexArray,ue,me,1,1,ze),L1(this.vertexArray,ue,me,1,0,ze),L1(this.vertexArray,ue,me,0,1,Xe),L1(this.vertexArray,ue,me,0,0,Xe),L.vertexLength+=4;const ut=q5(ue,me,Ie,y);for(const mt of ut)this._segmentToGroundQuads[I].push({id:ht,region:mt}),this._segmentToRegionTriCounts[I][mt]+=2,L.primitiveLength+=2;H=Re}}}prepareBorderSegments(){if(!this.hasData())return;const s=this._segments.get(),u=s.length;for(let y=0;y<u;y++)this._segmentToGroundQuads[y].sort((w,T)=>w.region-T.region);for(let y=0;y<u;y++){const w=this._segmentToGroundQuads[y],T=s[y],I=this._segmentToRegionTriCounts[y];I.reduce((H,W)=>H+W,0);let L=0;for(let H=0;H<=4;H++){const W=I[H];if(W!==0){let se=this.regionSegments[H];se||(se=this.regionSegments[H]=new wo);const ue={vertexOffset:T.vertexOffset,primitiveOffset:T.primitiveOffset+L,vertexLength:T.vertexLength,primitiveLength:W};se.get().push(ue)}L+=W}for(let H=0;H<w.length;H++){const W=w[H].id;this.indexArray.emplaceBack(W,W+1,W+3),this.indexArray.emplaceBack(W,W+3,W+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(s,u,y,w,T,I,L){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,s,u,y,w,T,I,void 0,L)}upload(s){this.hasData()&&(this.vertexBuffer=s.createVertexBuffer(this.vertexArray,H5.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}uploadPaintProperties(s){this.hasData()&&this.programConfigurations.upload(s)}update(s,u,y,w,T,I,L,H){this.hasData()&&this.programConfigurations.updatePaintArrays(s,u,y,w,T,I,L,H)}updateHiddenByLandmark(s){this.updateHiddenByLandmarkRange(s.groundVertexArrayOffset,s.groundVertexCount,!!(s.flags&XA))}updateHiddenByLandmarkRange(s,u,y){if(!this.hasData())return;const w=u+s;if(u!==0){for(let T=s;T<w;++T)this.hiddenByLandmarkVertexArray.emplace(T,y?1:0);this._needsHiddenByLandmarkUpdate=!0}}uploadHiddenByLandmark(s){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=s.createVertexBuffer(this.hiddenByLandmarkVertexArray,n_.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let s=0;s<=4;s++){const u=this.regionSegments[s];u&&u.destroy()}}}}class k1{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.pixelRatio=s.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Lo,this.footprintVertices=new Wc,this.footprintSegments=[],this.layoutVertexArray=new jd,this.centroidVertexArray=new ls,this.wallVertexArray=new jf,this.indexArray=new Lo,this.programConfigurations=new Qu(s.layers,{zoom:s.zoom,lut:s.lut},u=>e2.includes(u)),this.segments=new wo,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new h_(s),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[],this.worldview=s.worldview}updateFootprints(s,u){}populate(s,u,y,w){this.features=[],this.hasPattern=Xy("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=Mt(y),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:T,id:I,index:L,sourceLayerIndex:H}of s){const W=this.layers[0]._featureFilter.needGeometry,se=kr(T,W);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom,{worldview:this.worldview}),se,y))continue;const ue={id:I,sourceLayerIndex:H,index:L,geometry:W?se.geometry:qt(T,y,w),properties:T.properties,type:T.type,patterns:{}},me=this.layoutVertexArray.length,Ee=l_[ue.type]==="Polygon";if(this.hasPattern)this.features.push({featureId:T.id,feature:Zy("fill-extrusion",this.layers,ue,this.zoom,this.pixelRatio,u)});else if(this.wallMode)for(const Ie of ue.geometry)for(const Re of Jb(Ie,Ee))this.addFeature(T.id,ue,[Re],L,y,{},u.availableImages,w,u.brightness);else this.addFeature(T.id,ue,ue.geometry,L,y,{},u.availableImages,w,u.brightness);u.featureIndex.insert(T,ue.geometry,L,H,this.index,me)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(s,u,y,w,T,I){for(const{featureId:L,feature:H}of this.features){const W=l_[H.type]==="Polygon",{geometry:se}=H;if(this.wallMode)for(const ue of se)for(const me of Jb(ue,W))this.addFeature(L,H,[me],H.index,u,y,w,T,I);else this.addFeature(L,H,se,H.index,u,y,w,T,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(s,u,y,w,T,I,L){this.programConfigurations.updatePaintArrays(s,u,T,y,w,I,L,this.worldview),this.groundEffect.update(s,u,T,y,w,I,L,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,i_),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.wallVertexBuffer=s.createVertexBuffer(this.wallVertexArray,V5.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,G5.members,!0)),this.groundEffect.upload(s)),this.groundEffect.uploadPaintProperties(s),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){this.groundEffect.uploadHiddenByLandmark(s),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,Q5.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,y,w,T,I,L,H,W){const se=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(u,{})/this.tileToMeter,ue=[new tr(0,0),new tr(tn,tn)],me=H.projection,Ee=me.name==="globe",Ie=this.wallMode||l_[u.type]==="Polygon",Re=new c_;Re.centroidDataIndex=this.centroidData.length;const ze=new i2;ze.buildingId=s,u.properties&&u.properties.hasOwnProperty("building_id")&&(ze.buildingId=u.properties.building_id);const Xe=this.layers[0].paint.get("fill-extrusion-base").evaluate(u,{},T)<=0,ht=this.layers[0].paint.get("fill-extrusion-height").evaluate(u,{},T);let ut;if(ze.height=ht,ze.vertexArrayOffset=this.layoutVertexArray.length,ze.groundVertexArrayOffset=this.groundEffect.vertexArray.length,Ee&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new cf),this.wallMode){if(Ee)return void Qi("Non zero fill-extrusion-line-width is not yet supported on globe.");if(y.length!==1)return;ut=function(xr){const Yr=xr[0].x===xr[xr.length-1].x&&xr[0].y===xr[xr.length-1].y;(function(Cn){let yi=0;const ii=Cn.length;for(let Rn=0;Rn<ii;Rn++)yi+=(Cn[(Rn+1)%ii].x-Cn[Rn].x)*(Cn[(Rn+1)%ii].y+Cn[Rn].y);return yi>=0})(xr)||(xr=xr.reverse());const nn={geometry:[],joinNormals:[],indices:[]},gn=[],En=[],zr=[];let _n=xr.length;for(;_n>=2&&xr[_n-1].equals(xr[_n-2]);)_n--;if(_n<(Yr?3:2))return nn;let wr,Vr,Pn,xn,Ei,pi=0;for(;pi<_n-1&&xr[pi].equals(xr[pi+1]);)pi++;Yr&&(wr=xr[_n-2],Ei=xr[pi].sub(wr)._unit()._perp());for(let Cn=pi;Cn<_n;Cn++){if(Pn=Cn===_n-1?Yr?xr[pi+1]:void 0:xr[Cn+1],Pn&&xr[Cn].equals(Pn))continue;Ei&&(xn=Ei),wr&&(Vr=wr),wr=xr[Cn],Ei=Pn?Pn.sub(wr)._unit()._perp():xn,xn=xn||Ei;let yi=xn.add(Ei);yi.x===0&&yi.y===0||yi._unit();const ii=yi.x*Ei.x+yi.y*Ei.y,Rn=ii!==0?1/ii:1/0,oi=xn.x*Ei.y-xn.y*Ei.x>0;let Ui="miter";const ts=2;Ui==="miter"&&Rn>ts&&(Ui="bevel"),Ui==="bevel"&&(Rn>100&&(Ui="flipbevel"),Rn<ts&&(Ui="miter"));const Es=(gs,Xs,Ds,ya)=>{const wt=new tr(gs.x,gs.y),St=new tr(gs.x,gs.y);wt.x+=Xs.x*ya,wt.y+=Xs.y*ya,St.x-=Xs.x*Math.max(Ds,1),St.y-=Xs.y*Math.max(Ds,1),zr.push(Xs),gn.push(wt),En.push(St)};if(Ui==="miter")yi._mult(Rn),Es(wr,yi,0,0);else if(Ui==="flipbevel")yi=Ei.mult(-1),Es(wr,yi,0,0),Es(wr,yi.mult(-1),0,0);else{const gs=-Math.sqrt(Rn*Rn-1),Xs=oi?gs:0,Ds=oi?0:gs;Vr&&Es(wr,xn,Xs,Ds),Pn&&Es(wr,Ei,Xs,Ds)}}nn.geometry=[...gn,...En.reverse(),gn[0]],nn.joinNormals=[...zr,...zr.reverse(),zr[zr.length-1]];const An=nn.geometry.length-1;for(let Cn=0;Cn<An/2;Cn++)if(Cn+1<An/2){let yi=Cn,ii=Cn+1,Rn=An-1-Cn,oi=An-2-Cn;yi=yi===0?An-1:yi-1,ii=ii===0?An-1:ii-1,Rn=Rn===0?An-1:Rn-1,oi=oi===0?An-1:oi-1,nn.indices.push(Rn),nn.indices.push(ii),nn.indices.push(yi),nn.indices.push(Rn),nn.indices.push(oi),nn.indices.push(ii)}return nn}(y[0]),y=[ut.geometry]}const mt=(xr,Yr)=>xr<(Yr.length-1)/2||xr===Yr.length-1,$t=this.wallMode?[y]:Mp(y,500);for(let xr=$t.length-1;xr>=0;xr--){const Yr=$t[xr];(Yr.length===0||(Ut=Yr[0]).every(In=>In.x<=0)||Ut.every(In=>In.x>=tn)||Ut.every(In=>In.y<=0)||Ut.every(In=>In.y>=tn))&&$t.splice(xr,1)}var Ut;let Ht;if(Ee)Ht=h2($t,ue,T);else{Ht=[];for(const xr of $t)Ht.push({polygon:xr,bounds:ue})}const or=Ie?this.edgeRadius:0,cr=or>0&&this.zoom<17,Gr=(xr,Yr)=>{if(xr.length===0)return!1;const In=xr[xr.length-1];return Yr.x===In.x&&Yr.y===In.y};for(const{polygon:xr,bounds:Yr}of Ht){let In=0,nn=0;for(const _n of xr)Ie&&!_n[0].equals(_n[_n.length-1])&&_n.push(_n[0]),nn+=Ie?_n.length-1:_n.length;const gn=this.segments.prepareSegment((Ie?5:4)*nn,this.layoutVertexArray,this.indexArray);ze.footprintSegIdx<0&&(ze.footprintSegIdx=this.footprintSegments.length),ze.polygonSegIdx<0&&(ze.polygonSegIdx=this.polygonSegments.length);const En={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},zr=new n2;if(zr.vertexOffset=this.footprintVertices.length,zr.indexOffset=3*this.footprintIndices.length,zr.ringIndices=[],Ie){const _n=[],wr=[];In=gn.vertexLength;for(let Pn=0;Pn<xr.length;Pn++){const xn=xr[Pn];xn.length&&Pn!==0&&wr.push(_n.length/2);const Ei=[];let pi,An;pi=xn[1].sub(xn[0])._perp()._unit(),zr.ringIndices.push(xn.length-1);for(let Cn=1;Cn<xn.length;Cn++){const yi=xn[Cn],ii=xn[Cn===xn.length-1?1:Cn+1],Rn=yi.clone();if(or){An=ii.sub(yi)._perp()._unit();const oi=pi.add(An)._unit(),Ui=or*Math.min(4,1/(pi.x*oi.x+pi.y*oi.y));Rn.x+=Ui*oi.x,Rn.y+=Ui*oi.y,Rn.x=Math.round(Rn.x),Rn.y=Math.round(Rn.y),pi=An}if(!Xe||or!==0&&!cr||Gr(Ei,Rn)||Ei.push(Rn),Pp(this.layoutVertexArray,Rn.x,Rn.y,0,0,1,1,0),this.wallMode){const oi=mt(Cn,xn);y0(this.wallVertexArray,ut.joinNormals[Cn],!oi)}gn.vertexLength++,this.footprintVertices.emplaceBack(yi.x,yi.y),_n.push(yi.x,yi.y),Ee&&_0(this.layoutVertexExtArray,me.projectTilePoint(Rn.x,Rn.y,T),me.upVector(T,Rn.x,Rn.y))}Xe&&(or===0||cr)&&(Ei.length!==0&&Gr(Ei,Ei[0])&&Ei.pop(),this.groundEffect.addData(Ei,Yr,se))}const Vr=this.wallMode?ut.indices:hg(_n,wr);for(let Pn=0;Pn<Vr.length;Pn+=3)this.footprintIndices.emplaceBack(zr.vertexOffset+Vr[Pn+0],zr.vertexOffset+Vr[Pn+1],zr.vertexOffset+Vr[Pn+2]),this.indexArray.emplaceBack(In+Vr[Pn],In+Vr[Pn+2],In+Vr[Pn+1]),gn.primitiveLength++;zr.indexCount+=Vr.length,zr.vertexCount+=this.footprintVertices.length-zr.vertexOffset}for(let _n=0;_n<xr.length;_n++){const wr=xr[_n];Re.startRing(ze,wr[0]);let Vr=wr.length>4&&l2(wr[wr.length-2],wr[0],wr[1]),Pn=or?Y5(wr[wr.length-2],wr[0],wr[1],or):0;const xn=[];let Ei,pi,An;pi=wr[1].sub(wr[0])._perp()._unit();let Cn=!0;for(let yi=1,ii=0;yi<wr.length;yi++){let Rn=wr[yi-1],oi=wr[yi];const Ui=wr[yi===wr.length-1?1:yi+1];if(Re.appendEdge(ze,oi,Rn),f_(oi,Rn,Yr)){or&&(pi=Ui.sub(oi)._perp()._unit(),Cn=!Cn);continue}const ts=oi.sub(Rn)._perp(),Es=ts.x/(Math.abs(ts.x)+Math.abs(ts.y)),gs=ts.y>0?1:0,Xs=Rn.dist(oi);if(ii+Xs>32768&&(ii=0),or){An=Ui.sub(oi)._perp()._unit();let St=o2(Rn,oi,Ui,s2(pi,An),or);isNaN(St)&&(St=0);const Rr=oi.sub(Rn)._unit();Rn=Rn.add(Rr.mult(Pn))._round(),oi=oi.add(Rr.mult(-St))._round(),Pn=St,pi=An,Xe&&this.zoom>=17&&(Gr(xn,Rn)||xn.push(Rn),Gr(xn,oi)||xn.push(oi))}const Ds=gn.vertexLength,ya=wr.length>4&&l2(Rn,oi,Ui);let wt=c2(ii,Vr,Cn);if(Pp(this.layoutVertexArray,Rn.x,Rn.y,Es,gs,0,0,wt),Pp(this.layoutVertexArray,Rn.x,Rn.y,Es,gs,0,1,wt),this.wallMode){const St=mt(yi-1,wr),Rr=ut.joinNormals[yi-1];y0(this.wallVertexArray,Rr,St),y0(this.wallVertexArray,Rr,St)}if(ii+=Xs,wt=c2(ii,ya,!Cn),Vr=ya,Pp(this.layoutVertexArray,oi.x,oi.y,Es,gs,0,0,wt),Pp(this.layoutVertexArray,oi.x,oi.y,Es,gs,0,1,wt),this.wallMode){const St=mt(yi,wr),Rr=ut.joinNormals[yi];y0(this.wallVertexArray,Rr,St),y0(this.wallVertexArray,Rr,St)}if(gn.vertexLength+=4,this.indexArray.emplaceBack(Ds+0,Ds+1,Ds+2),this.indexArray.emplaceBack(Ds+1,Ds+3,Ds+2),gn.primitiveLength+=2,or){const St=In+(yi===1?wr.length-2:yi-2),Rr=yi===1?In:St+1;if(this.indexArray.emplaceBack(Ds+1,St,Ds+3),this.indexArray.emplaceBack(St,Rr,Ds+3),gn.primitiveLength+=2,Ei===void 0&&(Ei=Ds),!f_(Ui,wr[yi],Yr)){const Ln=yi===wr.length-1?Ei:gn.vertexLength;this.indexArray.emplaceBack(Ds+2,Ds+3,Ln),this.indexArray.emplaceBack(Ds+3,Ln+1,Ln),this.indexArray.emplaceBack(Ds+3,Rr,Ln+1),gn.primitiveLength+=3}Cn=!Cn}if(Ee){const St=this.layoutVertexExtArray,Rr=me.projectTilePoint(Rn.x,Rn.y,T),Ln=me.projectTilePoint(oi.x,oi.y,T),Kn=me.upVector(T,Rn.x,Rn.y),$n=me.upVector(T,oi.x,oi.y);_0(St,Rr,Kn),_0(St,Rr,Kn),_0(St,Ln,$n),_0(St,Ln,$n)}}Ie&&(In+=wr.length-1),Xe&&or&&this.zoom>=17&&(xn.length!==0&&Gr(xn,xn[0])&&xn.pop(),this.groundEffect.addData(xn,Yr,se,or>0))}this.footprintSegments.push(zr),En.triangleCount=this.indexArray.length-En.triangleArrayOffset,this.polygonSegments.push(En),++ze.footprintSegLen,++ze.polygonSegLen}if(ze.vertexCount=this.layoutVertexArray.length-ze.vertexArrayOffset,ze.groundVertexCount=this.groundEffect.vertexArray.length-ze.groundVertexArrayOffset,ze.vertexCount!==0){if(ze.centroidXY=Re.borders?r2:this.encodeCentroid(Re,ze),this.centroidData.push(ze),Re.borders){this.featuresOnBorder.push(Re);const xr=this.featuresOnBorder.length-1;for(let Yr=0;Yr<Re.borders.length;Yr++)Re.borders[Yr][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Yr].push(xr)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,w,I,L,T,W,void 0,this.worldview),this.groundEffect.addPaintPropertiesData(u,w,I,L,T,W,this.worldview),this.maxHeight=Math.max(this.maxHeight,ht)}}sortBorders(){for(let s=0;s<this.borderFeatureIndices.length;s++)this.borderFeatureIndices[s].sort((u,y)=>this.featuresOnBorder[u].borders[s][0]-this.featuresOnBorder[y].borders[s][0])}splitToSubtiles(){const s=[];for(let L=0;L<this.centroidData.length;L++){const H=this.centroidData[L],W=+(H.min.y+H.max.y>tn),se=2*W+(+(H.min.x+H.max.x>tn)^W);for(let ue=0;ue<H.polygonSegLen;ue++){const me=H.polygonSegIdx+ue;s.push({centroidIdx:L,subtile:se,polygonSegmentIdx:me,triangleSegmentIdx:this.polygonSegments[me].triangleSegIdx})}}const u=new Lo;s.sort((L,H)=>L.triangleSegmentIdx===H.triangleSegmentIdx?L.subtile-H.subtile:L.triangleSegmentIdx-H.triangleSegmentIdx);let y=0,w=0,T=0;for(const L of s){if(L.triangleSegmentIdx!==y)break;T++}const I=s.length;for(;w!==s.length;){y=s[w].triangleSegmentIdx;let L=0,H=w,W=w;for(let se=H;se<T&&s[se].subtile===L;se++)W++;for(;H!==T;){const se=s[H];L=se.subtile;const ue=this.centroidData[se.centroidIdx].min.clone(),me=this.centroidData[se.centroidIdx].max.clone(),Ee={vertexOffset:this.segments.segments[y].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[y].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let Ie=H;Ie<W;Ie++){const Re=s[Ie],ze=this.polygonSegments[Re.polygonSegmentIdx],Xe=this.centroidData[Re.centroidIdx].min,ht=this.centroidData[Re.centroidIdx].max,ut=this.indexArray.uint16;for(let mt=ze.triangleArrayOffset;mt<ze.triangleArrayOffset+ze.triangleCount;mt++)u.emplaceBack(ut[3*mt],ut[3*mt+1],ut[3*mt+2]);Ee.primitiveLength+=ze.triangleCount,ue.x=Math.min(ue.x,Xe.x),ue.y=Math.min(ue.y,Xe.y),me.x=Math.max(me.x,ht.x),me.y=Math.max(me.y,ht.y)}Ee.primitiveLength>0&&this.triangleSubSegments.push({segment:Ee,min:ue,max:me}),H=W;for(let Ie=H;Ie<T&&s[Ie].subtile===s[H].subtile;Ie++)W++}w=T;for(let se=w;se<I&&s[se].triangleSegmentIdx===s[w].triangleSegmentIdx;se++)T++}u._trim(),this.indexArray=u}getVisibleSegments(s,u,y){const w=new wo;if(this.wallMode){for(const Re of this.triangleSubSegments)w.segments.push(Re.segment);return w}let T=0,I=0;const L=1<<s.canonical.z;if(u){const Re=u.getMinMaxForTile(s);Re&&(T=Re.min,I=Re.max)}I+=this.maxHeight;const H=s.toUnwrapped();let W;const se=[H.canonical.x/L+H.wrap,H.canonical.y/L],ue=[(H.canonical.x+1)/L+H.wrap,(H.canonical.y+1)/L],me=(Re,ze,Xe)=>[Re[0]*(1-Xe[0])+ze[0]*Xe[0],Re[1]*(1-Xe[1])+ze[1]*Xe[1]],Ee=[],Ie=[];for(const Re of this.triangleSubSegments){Ee[0]=Re.min.x/tn,Ee[1]=Re.min.y/tn,Ie[0]=Re.max.x/tn,Ie[1]=Re.max.y/tn;const ze=me(se,ue,Ee),Xe=me(se,ue,Ie);if(new ye([ze[0],ze[1],T],[Xe[0],Xe[1],I]).intersectsPrecise(y)===0){W&&(w.segments.push(W),W=void 0);continue}const ht=Re.segment;W&&W.vertexOffset!==ht.vertexOffset&&(w.segments.push(W),W=void 0),W?(W.vertexLength+=ht.vertexLength,W.primitiveLength+=ht.primitiveLength):W={vertexOffset:ht.vertexOffset,primitiveLength:ht.primitiveLength,vertexLength:ht.vertexLength,primitiveOffset:ht.primitiveOffset,sortKey:void 0,vaos:{}}}return W&&w.segments.push(W),w}encodeCentroid(s,u){const y=s.centroid(),w=u.span(),T=Math.min(7,Math.round(w.x*this.tileToMeter/10)),I=Math.min(7,Math.round(w.y*this.tileToMeter/10));return new tr(nt(y.x,1,tn-1)<<3|T,nt(y.y,1,tn-1)<<3|I)}encodeBorderCentroid(s){if(!s.borders)return new tr(0,0);const u=s.borders,y=Number.MAX_VALUE;if(u[0][0]!==y||u[1][0]!==y){const w=u[0][0]!==y?0:1;return new tr(6|(u[0][0]!==y?0:65528),(u[w][0]+u[w][1])/2<<3|6)}{const w=u[2][0]!==y?2:3;return new tr((u[w][0]+u[w][1])/2<<3|6,6|(u[2][0]!==y?0:65528))}}showCentroid(s){const u=this.centroidData[s.centroidDataIndex];u.flags&=2147483647,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(s){this.groundEffect.updateHiddenByLandmark(s);const u=s.vertexArrayOffset,y=s.vertexCount+s.vertexArrayOffset,w=s.flags&XA?r2:s.centroidXY,T=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==w.y||T!==w.x){for(let I=u;I<y;++I)this.centroidVertexArray.emplace(I,w.x,w.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const s of this.centroidData)this.writeCentroidToBuffer(s)}updateReplacement(s,u,y){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const w=u.getReplacementRegionsForTile(s.toUnwrapped());if(F1(this.activeReplacements,w))return;if(this.activeReplacements=w,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const I of this.centroidData)I.flags&=2147483647;const T=[];for(const I of this.activeReplacements){if(I.order<y)continue;const L=Math.max(1,Math.pow(2,I.footprintTileId.canonical.z-s.canonical.z));if(I.footprint.buildingId){const H=I.footprint.buildingId;for(const W of this.centroidData)W.buildingId===H&&(W.flags|=XA)}else for(const H of this.centroidData)if(!(H.flags&XA||I.min.x>H.max.x||H.min.x>I.max.x||I.min.y>H.max.y||H.min.y>I.max.y))for(let W=0;W<H.footprintSegLen;W++){const se=this.footprintSegments[H.footprintSegIdx+W];if(T.length=0,X5(this.footprintVertices,se.vertexOffset,se.vertexCount,I.footprintTileId.canonical,s.canonical,T),o_(I.footprint,T,this.footprintIndices.uint16,se.indexOffset,se.indexCount,-se.vertexOffset,-L)){H.flags|=XA;break}}}for(const I of this.centroidData)this.writeCentroidToBuffer(I);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(s,u,y){let w=!1;for(let T=0;T<y.footprintSegLen;T++){const I=this.footprintSegments[y.footprintSegIdx+T];let L=0;for(const H of I.ringIndices){for(let W=L,se=H+L-1;W<H+L;se=W++){const ue=this.footprintVertices.int16[2*(W+I.vertexOffset)+0],me=this.footprintVertices.int16[2*(W+I.vertexOffset)+1],Ee=this.footprintVertices.int16[2*(se+I.vertexOffset)+1];me>u!=Ee>u&&s<(this.footprintVertices.int16[2*(se+I.vertexOffset)+0]-ue)*(u-me)/(Ee-me)+ue&&(w=!w)}L=H}}return w}getHeightAtTileCoord(s,u){let y=Number.NEGATIVE_INFINITY,w=!0;const T=4*(s+tn)*tn+(u+tn);if(this.partLookup.hasOwnProperty(T)){const I=this.partLookup[T];return I?{height:I.height,hidden:!!(I.flags&XA)}:void 0}for(const I of this.centroidData)s>I.max.x||I.min.x>s||u>I.max.y||I.min.y>u||I.height<=y||this.footprintContainsPoint(s,u,I)&&(y=I.height,this.partLookup[T]=I,w=!!(I.flags&XA));if(y!==Number.NEGATIVE_INFINITY)return{height:y,hidden:w};this.partLookup[T]=void 0}}function s2(d,s){const u=d.add(s)._unit();return d.x*u.x+d.y*u.y}function Y5(d,s,u,y){const w=s.sub(d)._perp()._unit(),T=u.sub(s)._perp()._unit();return o2(d,s,u,s2(w,T),y)}function o2(d,s,u,y,w){const T=Math.sqrt(1-y*y);return Math.min(d.dist(s)/3,s.dist(u)/3,w*T/y)}function f_(d,s,u){return d.x<u[0].x&&s.x<u[0].x||d.x>u[1].x&&s.x>u[1].x||d.y<u[0].y&&s.y<u[0].y||d.y>u[1].y&&s.y>u[1].y}function a2(d,s){return d.x<s[0].x||d.x>s[1].x||d.y<s[0].y||d.y>s[1].y}function l2(d,s,u){if(d.x<0||d.x>=tn||s.x<0||s.x>=tn||u.x<0||u.x>=tn)return!1;const y=u.sub(s),w=y.perp(),T=d.sub(s);return(y.x*T.x+y.y*T.y)/Math.sqrt((y.x*y.x+y.y*y.y)*(T.x*T.x+T.y*T.y))>-.866&&w.x*T.x+w.y*T.y<0}function c2(d,s,u){const y=s?2|d:-3&d;return u?1|y:-2&y}function u2(){const d=Math.PI/32,s=Math.tan(d),u=te;return u*Math.sqrt(1+2*s*s)-u}function h2(d,s,u){const y=1<<u.z,w=lt(u.x/y),T=lt((u.x+1)/y),I=dt(u.y/y),L=dt((u.y+1)/y);return function(H,W,se,ue,me=0,Ee){const Ie=[];if(!H.length||!se||!ue)return Ie;const Re=(Ut,Ht)=>{for(const or of Ut)Ie.push({polygon:or,bounds:Ht})},ze=Math.ceil(Math.log2(se)),Xe=Math.ceil(Math.log2(ue)),ht=ze-Xe,ut=[];for(let Ut=0;Ut<Math.abs(ht);Ut++)ut.push(ht>0?0:1);for(let Ut=0;Ut<Math.min(ze,Xe);Ut++)ut.push(0),ut.push(1);let mt=H;if(mt=T1(mt,W[0].y-me,W[1].y+me,1),mt=T1(mt,W[0].x-me,W[1].x+me,0),!mt.length)return Ie;const $t=[];for(ut.length?$t.push({polygons:mt,bounds:W,depth:0}):Re(mt,W);$t.length;){const Ut=$t.pop(),Ht=Ut.depth,or=ut[Ht],cr=Ut.bounds[0],Gr=Ut.bounds[1],xr=or===0?cr.x:cr.y,Yr=or===0?Gr.x:Gr.y,In=Ee?Ee(or,xr,Yr):.5*(xr+Yr),nn=T1(Ut.polygons,xr-me,In+me,or),gn=T1(Ut.polygons,In-me,Yr+me,or);if(nn.length){const En=[cr,new tr(or===0?In:Gr.x,or===1?In:Gr.y)];ut.length>Ht+1?$t.push({polygons:nn,bounds:En,depth:Ht+1}):Re(nn,En)}if(gn.length){const En=[new tr(or===0?In:cr.x,or===1?In:cr.y),Gr];ut.length>Ht+1?$t.push({polygons:gn,bounds:En,depth:Ht+1}):Re(gn,En)}}return Ie}(d,s,Math.ceil((T-w)/11.25),Math.ceil((I-L)/11.25),1,(H,W,se)=>{if(H===0)return .5*(W+se);{const ue=dt((u.y+W/tn)/y);return(qe(.5*(dt((u.y+se/tn)/y)+ue))*y-u.y)*tn}})}function X5(d,s,u,y,w,T){const I=Math.pow(2,y.z-w.z);for(let L=0;L<u;L++){let H=d.int16[2*(L+s)+0],W=d.int16[2*(L+s)+1];H=(H+w.x*tn)*I-y.x*tn,W=(W+w.y*tn)*I-y.y*tn,T.push(new tr(H,W))}}let f2,d2;Xn(k1,"FillExtrusionBucket",{omit:["layers","features"]}),Xn(i2,"PartData"),Xn(n2,"FootprintSegment"),Xn(c_,"BorderCentroidData"),Xn(h_,"GroundEffect");class Im extends tr{constructor(s,u,y){super(s,u),this.z=y}}class p2 extends Im{constructor(s,u,y,w){super(s,u,y),this.w=w}}function A2(d,s,u,y){const w=u==="x"?"y":"x",T=(y-d[u])/(s[u]-d[u]);d[w]=Math.round(d[w]+(s[w]-d[w])*T),d[u]=y,d.hasOwnProperty("z")&&(d.z=at(d.z,s.z,T)),d.hasOwnProperty("w")&&(d.w=at(d.w,s.w,T))}function m2(d,s,u,y){const w=u,T=y;for(const I of["x","y"]){let L=d,H=s;L[I]>=H[I]&&(L=s,H=d),L[I]<w&&H[I]>w&&A2(L,H,I,w),L[I]<T&&H[I]>T&&A2(H,L,I,T)}}function O1(d,s,u,y,w,T){const I=[];for(let L=0;L<d.length;L++){const H=d[L];let W;const se=I.length;let ue=0;for(let me=0;me<H.length-1;me++){let Ee=H[me],Ie=H[me+1],Re=0;const ze=ue;let Xe,ht;T&&(Re=Math.hypot(Ie.x-Ee.x,Ie.y-Ee.y),ue+=Re,Xe=Ee,ht=Ie),Ee.x<s&&Ie.x<s||(Ee.x<s?Ee=new tr(s,Ee.y+(s-Ee.x)/(Ie.x-Ee.x)*(Ie.y-Ee.y))._round():Ie.x<s&&(Ie=new tr(s,Ee.y+(s-Ee.x)/(Ie.x-Ee.x)*(Ie.y-Ee.y))._round()),Ee.y<u&&Ie.y<u||(Ee.y<u?Ee=new tr(Ee.x+(u-Ee.y)/(Ie.y-Ee.y)*(Ie.x-Ee.x),u)._round():Ie.y<u&&(Ie=new tr(Ee.x+(u-Ee.y)/(Ie.y-Ee.y)*(Ie.x-Ee.x),u)._round()),Ee.x>=y&&Ie.x>=y||(Ee.x>=y?Ee=new tr(y,Ee.y+(y-Ee.x)/(Ie.x-Ee.x)*(Ie.y-Ee.y))._round():Ie.x>=y&&(Ie=new tr(y,Ee.y+(y-Ee.x)/(Ie.x-Ee.x)*(Ie.y-Ee.y))._round()),Ee.y>=w&&Ie.y>=w||(Ee.y>=w?Ee=new tr(Ee.x+(w-Ee.y)/(Ie.y-Ee.y)*(Ie.x-Ee.x),w)._round():Ie.y>=w&&(Ie=new tr(Ee.x+(w-Ee.y)/(Ie.y-Ee.y)*(Ie.x-Ee.x),w)._round()),W&&Ee.equals(W[W.length-1])||(W=[Ee],I.push(W),T&&T.push({progress:{min:ze+g2(Xe,ht,Ee)*Re,max:1},parentIndex:L,prevPoint:Xe,nextPoint:ht})),W.push(Ie),T&&(T[T.length-1].progress.max=ze+g2(Xe,ht,Ie)*Re,T[T.length-1].nextPoint=ht)))))}if(T&&ue>0)for(let me=se;me<I.length;me++)T[me].progress.min/=ue,T[me].progress.max/=ue}return I}function Z5(d,s,u,y,w){if(d.length<2)return void y.push(d);const T=[];for(;s.valid();){const[W,se]=s.get();for(let ue=0;ue<d.length-1;ue++){const me=d[ue],Ee=d[ue+1],Ie=Ri(me,Ee,W,se);if(Ie){const[Re]=Ie,ze=new tr(at(me.x,Ee.x,Re),at(me.y,Ee.y,Re));T.push({t:ue+Re,distance:0,point:ze})}}s.next()}if(T.length===0)return void y.push(d);T.sort((W,se)=>W.t-se.t);let I=0,L=0,H=[];for(y.push(H);I!==d.length;){if(L===T.length){for(;I!==d.length;)H.length!==0&&H[H.length-1].equals(d[I])||H.push(d[I]),I++;break}T[L].t<=I?(H.length!==0&&H[H.length-1].equals(T[L].point)||H.push(T[L].point),Math.trunc(T[L].t),L++):(H.length!==0&&H[H.length-1].equals(d[I])||H.push(d[I]),I++)}}function g2(d,s,u){return d.x!==s.x?(u.x-d.x)/(s.x-d.x):d.y!==s.y?(u.y-d.y)/(s.y-d.y):0}function v0(d,s){return d.x*s.x+d.y*s.y}function y2(d,s){if(d.length===1){let u=0;const y=s[u++];let w;for(;!w||y.equals(w);)if(w=s[u++],!w)return 1/0;for(;u<s.length;u++){const T=s[u],I=d[0],L=w.sub(y),H=T.sub(y),W=I.sub(y),se=v0(L,L),ue=v0(L,H),me=v0(H,H),Ee=v0(W,L),Ie=v0(W,H),Re=se*me-ue*ue,ze=(me*Ee-ue*Ie)/Re,Xe=(se*Ie-ue*Ee)/Re,ht=y.z*(1-ze-Xe)+w.z*ze+T.z*Xe;if(isFinite(ht))return ht}return 1/0}{let u=1/0;for(const y of s)u=Math.min(u,y.z);return u}}function D1(d,s,u,y,w,T,I,L){const H=I*w.getElevationAt(d,s,!0,!0),W=T[0]!==0,se=W?T[1]===0?I*(T[0]/7-450):I*function(ue,me,Ee){const Ie=Math.floor(me[0]/8),Re=Math.floor(me[1]/8),ze=10*(me[0]-8*Ie),Xe=10*(me[1]-8*Re),ht=ue.getElevationAt(Ie,Re,!0,!0),ut=ue.getMeterToDEM(Ee),mt=Math.floor(.5*(ze*ut-1)),$t=Math.floor(.5*(Xe*ut-1)),Ut=ue.tileCoordToPixel(Ie,Re),Ht=2*mt+1,or=2*$t+1,cr=function(gn,En,zr,_n,wr){return[gn.getElevationAtPixel(En,zr,!0),gn.getElevationAtPixel(En+wr,zr,!0),gn.getElevationAtPixel(En,zr+wr,!0),gn.getElevationAtPixel(En+_n,zr+wr,!0)]}(ue,Ut.x-mt,Ut.y-$t,Ht,or),Gr=Math.abs(cr[0]-cr[1]),xr=Math.abs(cr[2]-cr[3]),Yr=Math.abs(cr[0]-cr[2])+Math.abs(cr[1]-cr[3]),In=Math.min(.25,.5*ut*(Gr+xr)/Ht),nn=Math.min(.25,.5*ut*Yr/or);return ht+Math.max(In*ze,nn*Xe)}(w,T,L):H;return{base:H+(u===0?-1:u),top:W?Math.max(se+y,H+u+2):H+y}}class _2{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class v2{constructor(){this.tasks={},this.taskQueue=[],Tn(["process"],this),this.invoker=new _2(this.process),this.nextId=0}add(s,u){const y=this.nextId++,w=function({type:T,isSymbolTile:I,zoom:L}){return L=L||0,T==="message"?0:T!=="maybePrepare"||I?T!=="parseTile"||I?T==="parseTile"&&I?300-L:T==="maybePrepare"&&I?400-L:500:200-L:100-L}(u);if(w===0){try{s()}finally{}return null}return this.tasks[y]={fn:s,metadata:u,priority:w,id:y},this.taskQueue.push(y),this.invoker.trigger(),{cancel:()=>{delete this.tasks[y]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(y=>!!this.tasks[y]),!this.taskQueue.length)return;const s=this.pick();if(s===null)return;const u=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let s=null,u=1/0;for(let w=0;w<this.taskQueue.length;w++){const T=this.tasks[this.taskQueue[w]];T.priority<u&&(u=T.priority,s=w)}if(s===null)return null;const y=this.taskQueue[s];return this.taskQueue.splice(s,1),y}remove(){this.invoker.remove()}}class b2{constructor(s,u,y){this.target=s,this.parent=u,this.mapId=y,this.callbacks={},this.cancelCallbacks={},Tn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new v2}send(s,u,y,w,T=!1,I){const L=Math.round(1e18*Math.random()).toString(36).substring(0,10);y&&(y.metadata=I,this.callbacks[L]=y);const H=new Set;return this.target.postMessage({id:L,type:s,hasCallback:!!y,targetMapId:w,mustQueue:T,sourceMapId:this.mapId,data:eh(u,H)},H),{cancel:()=>{y&&delete this.callbacks[L],this.target.postMessage({id:L,type:"<cancel>",targetMapId:w,sourceMapId:this.mapId})}}}receive(s){const u=s.data;if(!u)return;const y=u.id;if(y&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const w=this.cancelCallbacks[y];delete this.cancelCallbacks[y],w&&w.cancel()}else if(u.mustQueue||vn(self)){const w=this.callbacks[y],T=this.scheduler.add(()=>this.processTask(y,u),w&&w.metadata||{type:"message"});T&&(this.cancelCallbacks[y]=T)}else this.processTask(y,u)}processTask(s,u){if(delete this.cancelCallbacks[s],u.type==="<response>"){const y=this.callbacks[s];delete this.callbacks[s],y&&(u.error?y(Fc(u.error)):y(null,Fc(u.data)))}else{const y=new Set,w=u.hasCallback?(I,L)=>{this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:I?eh(I):null,data:eh(L,y)},y)}:()=>{},T=Fc(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,T,w);else if(this.parent.getWorkerSource){const I=u.type.split("."),{source:L,scope:H}=T;this.parent.getWorkerSource(u.sourceMapId,I[0],L,H)[I[1]](T,w)}else w(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var b0={workerUrl:"",workerClass:null,workerParams:void 0};const d_="mapboxgl_preloaded_worker_pool";class hA{constructor(){this.active={}}acquire(s,u=hA.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(b0.workerClass!=null?new b0.workerClass:new self.Worker(b0.workerUrl,b0.workerParams));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[d_]}numActive(){return Object.keys(this.active).length}}hA.workerCount=2;class dg{constructor(s,u,y="Worker",w=hA.workerCount){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=_r();const T=this.workerPool.acquire(this.id,w);for(let I=0;I<T.length;I++){const L=new dg.Actor(T[I],u,this.id);L.name=`${y} ${I}`,this.actors.push(L)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,u,y){Et(this.actors,(w,T)=>{w.send(s,u,T)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}let x0,p_;function ah(){return x0||(x0=new hA),x0}dg.Actor=b2;class A_{constructor(s){this.module=s}createIntArray(s){const u=new Int32Array(s),y=this.module.malloc(u.length*u.BYTES_PER_ELEMENT);return this.module.heap32.set(u,y/u.BYTES_PER_ELEMENT),y}createFloatArray(s){const u=new Float32Array(s),y=this.module.malloc(u.length*u.BYTES_PER_ELEMENT);return this.module.heapF32.set(u,y/u.BYTES_PER_ELEMENT),y}createStringBuffer(s){const u=this.module.malloc(s.length+1);for(let y=0;y<s.length;++y)this.module.heapU8[u+y]=s.charCodeAt(y);return this.module.heapU8[u+s.length]=0,u}readStringBuffer(s){let u="";for(;this.module.heapU8[s]!==0;)u+=String.fromCharCode(this.module.heapU8[s]),++s;return u}setStyle(s){const u=s.entranceColorRgb,y=s.facadeGlazingColorRgb,w=s.roofColorRgb,T=s.wallColorRgb,I=s.normalScale;this.module.setStyle(u[0],u[1],u[2],y[0],y[1],y[2],w[0],w[1],w[2],T[0],T[1],T[2],I[0],I[1],I[2],s.tileToMeters)}setAOOptions(s,u){this.module.setAOOptions(s?1:0,u)}setMetricOptions(s,u){this.module.setMetricOptions(s?1:0,u)}setStructuralOptions(s){this.module.setStructuralOptions(s?1:0)}setFacadeOptions(s,u){this.module.setFacadeOptions(s,u?1:0)}setFauxFacadeOptions(s,u,y){this.module.setFauxFacadeOptions(s?1:0,u?1:0,y)}setFacadeClassifierOptions(s){this.module.setFacadeClassifierOptions(s)}generateMesh(s,u){for(const L of s){const H=this.createStringBuffer(L.roofType),W=[0],se=[];for(const Ee of L.coordinates)if(Array.isArray(Ee)){for(const Ie of Ee)se.push(Ie.x),se.push(Ie.y);W.push(se.length)}const ue=this.createIntArray(W),me=this.createFloatArray(se);this.module.addFeature(L.id,L.sourceId,L.minHeight,L.height,H,L.roofType.length,me,ue,W.length-1),this.module.free(H),this.module.free(ue),this.module.free(me)}for(const L of u){let H;H=L.entrances?JSON.parse(L.entrances):[];const W=this.createFloatArray(H),se=[];for(const me of L.coordinates)se.push(me.x),se.push(me.y);const ue=this.createFloatArray(se);this.module.addFacade(L.sourceId,L.crossPerc,L.distanceToRoad,W,H.length,ue,se.length),this.module.free(W),this.module.free(ue)}if(!this.module.generateMesh()){const L=this.module.getLastError();return this.readStringBuffer(L)}const y=this.module.getMeshCount(),w=new Array(y);for(let L=0;L<y;L++){const H=this.module.getPositionsPtr(L),W=this.module.getPositionsLength(L),se=new Float32Array(this.module.heapF32.buffer,H,W),ue=this.module.getNormalsPtr(L),me=this.module.getNormalsLength(L),Ee=new Float32Array(this.module.heapF32.buffer,ue,me),Ie=this.module.getColorsPtr(L),Re=this.module.getColorsLength(L),ze=new Uint8Array(this.module.heapU8.buffer,Ie,Re),Xe=this.module.getAOPtr(L),ht=this.module.getAOLength(L),ut=new Float32Array(this.module.heapF32.buffer,Xe,ht),mt=this.module.getUVPtr(L),$t=this.module.getUVLength(L),Ut=new Float32Array(this.module.heapF32.buffer,mt,$t),Ht=this.module.getFauxFacadePtr(L),or=this.module.getFauxFacadeLength(L),cr=new Uint8Array(this.module.heapU8.buffer,Ht,or),Gr=this.module.getIndicesPtr(L),xr=this.module.getIndicesLength(L),Yr=new Int32Array(this.module.heap32.buffer,Gr,xr),In=this.module.getBuildingPart(L),nn=this.readStringBuffer(In);w[L]={positions:se,normals:Ee,colors:ze,ao:ut,uv:Ut,isFauxFacade:cr,indices:Yr,buildingPart:nn}}const T=this.module.getRingCount(),I=[];for(let L=0;L<T;L++){const H=this.module.getRingPtr(L),W=this.module.getRingLength(L),se=new Float32Array(this.module.heapF32.buffer,H,W);I.push(se)}return{meshes:w,modifiedPolygonRings:I}}}let w0,m_,qd,pg,S0,Ag=null,ZA=null,x2=null,R1=null;function w2(){return vn(self)&&self.worker.dracoUrl?self.worker.dracoUrl:m_||Ji.DRACO_URL}function S2(){if(vn(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(pg)return pg;const d=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return pg=WebAssembly.validate(d)?Ji.MESHOPT_SIMD_URL:Ji.MESHOPT_URL,pg}function C2(){return R1}const N1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},J5={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},C0={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function j1(d,s,u){const y=u.json.bufferViews.length,w=u.buffers.length;s.bufferView=y,u.json.bufferViews[y]={buffer:w,byteLength:d.byteLength},u.buffers[w]=d}const E0="KHR_draco_mesh_compression";function e3(d,s){const u=d.extensions&&d.extensions[E0];if(!u)return;const y=new qd.Decoder,w=I2(s,u.bufferView),T=new qd.Mesh;if(!y.DecodeArrayToMesh(w,w.byteLength,T))throw new Error("Failed to decode Draco mesh");const I=s.json.accessors[d.indices],L=N1[I.componentType],H=I.count*L.BYTES_PER_ELEMENT,W=qd._malloc(H);L===Uint16Array?y.GetTrianglesUInt16Array(T,H,W):y.GetTrianglesUInt32Array(T,H,W),j1(qd.memory.buffer.slice(W,W+H),I,s),qd._free(W);for(const se of Object.keys(u.attributes)){const ue=y.GetAttributeByUniqueId(T,u.attributes[se]),me=s.json.accessors[d.attributes[se]],Ee=J5[me.componentType],Ie=me.count*C0[me.type]*N1[me.componentType].BYTES_PER_ELEMENT,Re=qd._malloc(Ie);y.GetAttributeDataArrayForAllPoints(T,ue,qd[Ee],Ie,Re),j1(qd.memory.buffer.slice(Re,Re+Ie),me,s),qd._free(Re)}y.destroy(),T.destroy(),delete d.extensions[E0]}const U1="EXT_meshopt_compression";function t3(d,s){if(!d.extensions||!d.extensions[U1])return;const u=d.extensions[U1],y=new Uint8Array(s.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),w=new Uint8Array(u.count*u.byteStride);S0.decodeGltfBuffer(w,u.count,u.byteStride,y,u.mode,u.filter),d.buffer=s.buffers.length,d.byteOffset=0,s.buffers[d.buffer]=w.buffer,delete d.extensions[U1]}const E2=1179937895,B2=new TextDecoder("utf8");function T2(d,s){return new URL(d,s).href}function r3(d,s,u,y){return fetch(T2(d.uri,y)).then(w=>w.arrayBuffer()).then(w=>{s.buffers[u]=w})}function I2(d,s){const u=d.json.bufferViews[s];return new Uint8Array(d.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function n3(d,s,u,y){if(d.uri){const w=T2(d.uri,y);return fetch(w).then(T=>T.blob()).then(T=>createImageBitmap(T)).then(T=>{s.images[u]=T})}if(d.bufferView!==void 0){const w=I2(s,d.bufferView),T=new Blob([w],{type:d.mimeType});return createImageBitmap(T).then(I=>{s.images[u]=I})}}function M2(d,s=0,u){const y={json:null,images:[],buffers:[]};if(new Uint32Array(d,s,1)[0]===E2){const se=new Uint32Array(d,s);let ue=2;const me=(se[ue++]>>2)-3,Ee=se[ue++]>>2;if(ue++,y.json=JSON.parse(B2.decode(se.subarray(ue,ue+Ee))),ue+=Ee,ue<me){const Ie=se[ue++];ue++;const Re=s+(ue<<2);y.buffers[0]=d.slice(Re,Re+Ie)}}else y.json=JSON.parse(B2.decode(new Uint8Array(d,s)));const{buffers:w,images:T,meshes:I,extensionsUsed:L,bufferViews:H}=y.json;let W=Promise.resolve();if(w){const se=[];for(let ue=0;ue<w.length;ue++){const me=w[ue];me.uri?se.push(r3(me,y,ue,u)):y.buffers[ue]||(y.buffers[ue]=null)}W=Promise.all(se)}return W.then(()=>{const se=[],ue=L&&L.includes(E0),me=L&&L.includes(U1);if(ue&&se.push(function(){if(!qd)return w0??(w0=function(Ee){let Ie,Re=null;function ze(){Ie=new Uint8Array(Re.buffer)}function Xe(){throw new Error("Unexpected Draco error.")}const ht={a:{a:Xe,d:function(ut,mt,$t){return Ie.copyWithin(ut,mt,mt+$t)},c:function(ut){const mt=Ie.length,$t=Math.max(ut>>>0,Math.ceil(1.2*mt)),Ut=Math.ceil(($t-mt)/65536);try{return Re.grow(Ut),ze(),!0}catch{return!1}},b:Xe}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(Ee,ht):Ee.then(ut=>ut.arrayBuffer()).then(ut=>WebAssembly.instantiate(ut,ht))).then(ut=>{const{Rb:mt,Qb:$t,P:Ut,T:Ht,X:or,Ja:cr,La:Gr,Qa:xr,Va:Yr,Wa:In,eb:nn,jb:gn,f:En,e:zr,yb:_n,zb:wr,Ab:Vr,Bb:Pn,Db:xn,Gb:Ei}=ut.instance.exports;Re=zr;const pi=(()=>{let An=0,Cn=0,yi=0,ii=0;return Rn=>{yi&&(mt(ii),mt(An),Cn+=yi,yi=An=0),An||(Cn+=128,An=$t(Cn));const oi=Rn.length+7&-8;let Ui=An;oi>=Cn&&(yi=oi,Ui=ii=$t(oi));for(let ts=0;ts<Rn.length;ts++)Ie[Ui+ts]=Rn[ts];return Ui}})();return ze(),En(),{memory:zr,_free:mt,_malloc:$t,Mesh:class{constructor(){this.ptr=Ut()}destroy(){Ht(this.ptr)}},Decoder:class{constructor(){this.ptr=cr()}destroy(){gn(this.ptr)}DecodeArrayToMesh(An,Cn,yi){const ii=pi(An),Rn=Gr(this.ptr,ii,Cn,yi.ptr);return!!or(Rn)}GetAttributeByUniqueId(An,Cn){return{ptr:xr(this.ptr,An.ptr,Cn)}}GetTrianglesUInt16Array(An,Cn,yi){Yr(this.ptr,An.ptr,Cn,yi)}GetTrianglesUInt32Array(An,Cn,yi){In(this.ptr,An.ptr,Cn,yi)}GetAttributeDataArrayForAllPoints(An,Cn,yi,ii,Rn){nn(this.ptr,An.ptr,Cn.ptr,yi,ii,Rn)}},DT_INT8:_n(),DT_UINT8:wr(),DT_INT16:Vr(),DT_UINT16:Pn(),DT_UINT32:xn(),DT_FLOAT32:Ei()}})}(fetch(w2())),w0.then(Ee=>{qd=Ee,w0=void 0}))}()),me&&se.push(function(){if(S0)return;const Ee=function(Ie){let Re;const ze=WebAssembly.instantiateStreaming(Ie,{}).then(ut=>{Re=ut.instance,Re.exports.__wasm_call_ctors()}),Xe={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ht={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:ze,supported:!0,decodeGltfBuffer(ut,mt,$t,Ut,Ht,or){(function(cr,Gr,xr,Yr,In,nn,gn){const En=cr.exports.sbrk,zr=Yr+3&-4,_n=En(zr*In),wr=En(nn.length),Vr=new Uint8Array(cr.exports.memory.buffer);Vr.set(nn,wr);const Pn=Gr(_n,Yr,In,wr,nn.length);if(Pn===0&&gn&&gn(_n,zr,In),xr.set(Vr.subarray(_n,_n+Yr*In)),En(_n-En(0)),Pn!==0)throw new Error(`Malformed buffer data: ${Pn}`)})(Re,Re.exports[ht[Ht]],ut,mt,$t,Ut,Re.exports[Xe[or]])}}}(fetch(S2()));return Ee.ready.then(()=>{S0=Ee})}()),T)for(let Ee=0;Ee<T.length;Ee++)se.push(n3(T[Ee],y,Ee,u));return(se.length?Promise.all(se):Promise.resolve()).then(()=>{if(ue&&I)for(const{primitives:Ee}of I)for(const Ie of Ee)e3(Ie,y);if(me&&I&&H)for(const Ee of H)t3(Ee,y);return y})})}function g_(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function y_(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class __{constructor(s,u,y,w){this.context=s,this.format=y,this.useMipmap=w&&w.useMipmap,this.texture=s.gl.createTexture(),this.update(u,{premultiply:w&&w.premultiply})}update(s,u){const y=s&&s instanceof HTMLVideoElement&&s.width===0?s.videoWidth:s.width,w=s&&s instanceof HTMLVideoElement&&s.height===0?s.videoHeight:s.height,{context:T}=this,{gl:I}=T,{x:L,y:H}=u&&u.position?u.position:{x:0,y:0},W=L+y,se=H+w;!this.size||this.size[0]===W&&this.size[1]===se||(I.bindTexture(I.TEXTURE_2D,null),I.deleteTexture(this.texture),this.texture=I.createTexture(),this.size=null),I.bindTexture(I.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA8&&(!u||u.premultiply!==!1));const ue=s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ImageBitmap&&s instanceof ImageBitmap;if(!this.size&&W>0&&se>0){const me=this.useMipmap?Math.floor(Math.log2(Math.max(W,se)))+1:1;I.texStorage2D(I.TEXTURE_2D,me,this.format,W,se),this.size=[W,se]}if(this.size)if(ue)I.texSubImage2D(I.TEXTURE_2D,0,L,H,g_(this.format),y_(this.format),s);else{const me=s.data;me&&I.texSubImage2D(I.TEXTURE_2D,0,L,H,y,w,g_(this.format),y_(this.format),me)}this.useMipmap&&I.generateMipmap(I.TEXTURE_2D)}bind(s,u,y=!1){const{context:w}=this,{gl:T}=w;T.bindTexture(T.TEXTURE_2D,this.texture),s!==this.minFilter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,s),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.useMipmap&&!y?s===T.NEAREST?T.NEAREST_MIPMAP_NEAREST:T.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),u!==this.wrapS&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,u),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(s,u,y,w,T){const{context:I}=this,{gl:L}=I;L.bindTexture(L.TEXTURE_2D,this.texture),u!==this.magFilter&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,u),this.magFilter=u),s!==this.minFilter&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,this.useMipmap?s===L.NEAREST?L.NEAREST_MIPMAP_NEAREST:L.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),y!==this.wrapS&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,y),this.wrapS=y),w!==this.wrapT&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,w),this.wrapT=w),T!==this.compareMode&&(T?(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_COMPARE_MODE,L.COMPARE_REF_TO_TEXTURE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_COMPARE_FUNC,T)):L.texParameteri(L.TEXTURE_2D,L.TEXTURE_COMPARE_MODE,L.NONE),this.compareMode=T)}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class B0{constructor(s,u){this.context=s,this.texture=u}bind(s,u){const{context:y}=this,{gl:w}=y;w.bindTexture(w.TEXTURE_2D,this.texture),s!==this.minFilter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,s),this.minFilter=s),u!==this.wrapS&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,u),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,u),this.wrapS=u)}}const i3=Gs([{name:"a_pos_3f",components:3,type:"Float32"}]),s3=Gs([{name:"a_color_3f",components:3,type:"Float32"}]),o3=Gs([{name:"a_color_4f",components:4,type:"Float32"}]),a3=Gs([{name:"a_uv_2f",components:2,type:"Float32"}]),l3=Gs([{name:"a_normal_3f",components:3,type:"Float32"}]),c3=Gs([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),u3=Gs([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);function D(d,s){const u=Se(d.projection,d.zoom,d.width,d.height),y=function(T,I,L,H,W){const se=new ve(L.lng-180*Ye,L.lat),ue=new ve(L.lng+180*Ye,L.lat),me=T.project(se.lng,se.lat),Ee=T.project(ue.lng,ue.lat),Ie=-Math.atan2(Ee.y-me.y,Ee.x-me.x),Re=Pt.fromLngLat(L);Re.y=nt(Re.y,-1+Ye,1-Ye);const ze=Re.toLngLat(),Xe=T.project(ze.lng,ze.lat),ht=Pt.fromLngLat(ze);ht.x+=Ye;const ut=ht.toLngLat(),mt=T.project(ut.lng,ut.lat),$t=Xt(mt.x-Xe.x,mt.y-Xe.y,Ie),Ut=Pt.fromLngLat(ze);Ut.y+=Ye;const Ht=Ut.toLngLat(),or=T.project(Ht.lng,Ht.lat),cr=Xt(or.x-Xe.x,or.y-Xe.y,Ie),Gr=Math.abs($t.x)/Math.abs(cr.y),xr=x([]);X(xr,xr,-Ie*(1-(W?0:H)));const Yr=x([]);return F(Yr,Yr,[1,1-(1-Gr)*H,1]),Yr[4]=-cr.x/cr.y*H,X(Yr,Yr,Ie),S(Yr,xr,Yr),Yr}(d.projection,0,d.center,u,s),w=q(d);return F(y,y,[w,w,1]),y}function q(d){const s=d.projection,u=Se(d.projection,d.zoom,d.width,d.height),y=_t(s,d.center),w=_t(s,ve.convert(s.center));return Math.pow(2,y*u+(1-u)*w)}function Se(d,s,u,y,w=1/0){const T=d.range;if(!T)return 0;const I=Math.min(w,Math.max(u,y)),L=Math.log(I/1024)/Math.LN2;return Ct(T[0]+L,T[1]+L,s)}const Ye=1/4e4;function _t(d,s){const u=nt(s.lat,-Tt,Tt),y=new ve(s.lng-180*Ye,u),w=new ve(s.lng+180*Ye,u),T=d.project(y.lng,u),I=d.project(w.lng,u),L=Pt.fromLngLat(y),H=Pt.fromLngLat(w),W=I.x-T.x,se=I.y-T.y,ue=H.x-L.x,me=H.y-L.y,Ee=Math.sqrt((ue*ue+me*me)/(W*W+se*se));return Math.log(Ee)/Math.LN2}function Xt(d,s,u){const y=Math.cos(u),w=Math.sin(u);return{x:d*y-s*w,y:d*w+s*y}}function Sr(d,s,u){x(d),X(d,d,li(s[2])),O(d,d,li(s[0])),V(d,d,li(s[1])),F(d,d,u),S(d,d,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Ur(d,s,u,y,w,T,I,L){const H=[u[0]-s[0],u[1]-s[1],0],W=[y[0]-s[0],y[1]-s[1],0];if(G(H)<1e-12||G(W)<1e-12)return fr(d);const se=re([],H,W);pe(se,se),R(W,y,s),H[2]=(T-w)*L,W[2]=(I-w)*L;const ue=H;return re(ue,H,W),pe(ue,ue),Ft(d,se,ue)}function on(d,s,u=!1){const y=GA(s.zoom),w=function(T,I,L){const H=I.worldSize,W=[T[12],T[13],T[14]],se=dt(W[1]/H),ue=lt(W[0]/H),me=x([]),Ee=Ke(1,se)*H,Ie=Ke(1,0)*H*Vt(se,I.zoom),Re=1/E1(H);let ze=Ie*Re;if(L){const mt=Se(I.projection,I.zoom,I.width,I.height,1024);ze=Re*I.projection.pixelSpaceConversion(I.center.lat,H,mt)}const Xe=K(se,ue);k(Xe,Xe,de([],pe([],Xe),Ee*ze*W[2]));const ht=function(mt){const $t=[mt[0],mt[1],mt[2]];let Ut=[0,1,0];const Ht=re([],Ut,$t);return re(Ut,$t,Ht),Te(Ut)===0&&(Ut=[0,1,0],re(Ht,$t,Ut)),pe(Ht,Ht),pe(Ut,Ut),pe($t,$t),[Ht[0],Ht[1],Ht[2],0,Ut[0],Ut[1],Ut[2],0,$t[0],$t[1],$t[2],0,mt[0],mt[1],mt[2],1]}(Xe);F(me,me,[ze,ze,ze*Ee]),B(me,me,[-W[0],-W[1],-W[2]]);const ut=S([],I.globeMatrix,ht);return S(ut,ut,me),S(ut,ut,T),ut}(d,s,u);if(y>0){const T=function(I,L){const H=L.worldSize,W=Ke(1,0)*H*Vt(L.center.lat,L.zoom)/E1(H),se=Ke(1,L.center.lat)*H,ue=x([]);return V(ue,ue,li(L.center.lng)),O(ue,ue,li(L.center.lat)),B(ue,ue,[0,0,Oc]),F(ue,ue,[W,W,W*se]),B(ue,ue,[L.point.x-.5*H,L.point.y-.5*H,0]),S(ue,ue,I),S(ue,L.globeMatrix,ue)}(d,s);return function(I,L,H){const W=(Ie,Re,ze)=>{const Xe=G(Ie),ht=G(Re),ut=lA(Ie,Re,ze);return de(ut,ut,1/G(ut)*at(Xe,ht,ze))},se=W([I[0],I[1],I[2]],[L[0],L[1],L[2]],H),ue=W([I[4],I[5],I[6]],[L[4],L[5],L[6]],H),me=W([I[8],I[9],I[10]],[L[8],L[9],L[10]],H),Ee=lA([I[12],I[13],I[14]],[L[12],L[13],L[14]],H);return[se[0],se[1],se[2],0,ue[0],ue[1],ue[2],0,me[0],me[1],me[2],0,Ee[0],Ee[1],Ee[2],1]}(w,T,y)}return w}function hi(d,s,u,y){const w=ye.projectAabbCorners(y,u);let T=Number.MAX_VALUE,I=-1;for(let W=0;W<w.length;++W){const se=w[W];se[0]=(.5*se[0]+.5)*s.width,se[1]=(.5-.5*se[1])*s.height,se[2]<T&&(I=W,T=se[2])}const L=W=>new tr(w[W][0],w[W][1]);let H;switch(I){case 0:case 6:H=[L(1),L(5),L(4),L(7),L(3),L(2),L(1)];break;case 1:case 7:H=[L(0),L(4),L(5),L(6),L(2),L(3),L(0)];break;case 3:case 5:H=[L(1),L(0),L(4),L(7),L(6),L(2),L(1)];break;default:H=[L(1),L(5),L(6),L(7),L(3),L(0),L(1)]}if(zt(d,H))return T}const ui=64,bi={CoordinateSpaceTile:1,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function cs(d,s,u,y,w,T,I,L,H,W=!1){const se=u.zoom,ue=u.project(y),me=Vt(y.lat,se),Ee=1/me;x(d),B(d,d,[ue.x+I[0]*Ee,ue.y+I[1]*Ee,I[2]]);let Ie=1,Re=1;const ze=u.worldSize;if(W){if(u.projection.name==="mercator"){let mt=0;u.elevation&&(mt=u.elevation.getAtPointOrZero(new Pt(ue.x/ze,ue.y/ze),0));const $t=kt([],[ue.x,ue.y,mt,1],u.projMatrix)[3]/u.cameraToCenterDistance;Ie=$t,Re=$t*Vt(u.center.lat,se)}else if(u.projection.name==="globe"){const mt=on(d,u),$t=[0,0,0,1];kt($t,$t,S([],u.projMatrix,mt));const Ut=$t[3]/u.cameraToCenterDistance,Ht=GA(se),or=u.projection.pixelsPerMeter(y.lat,ze)*Vt(y.lat,se),cr=u.projection.pixelsPerMeter(u.center.lat,ze)*Vt(u.center.lat,se);Ie=Ut/at(or,Dt(u.center.lat),Ht),Re=Ut*me/or,Ie*=cr,Re*=cr}}else Ie=Ee;F(d,d,[Ie,Ie,Re]);const Xe=[...d],ht=s.orientation,ut=[];if(Sr(ut,[ht[0]+w[0],ht[1]+w[1],ht[2]+w[2]],T),S(d,Xe,ut),L&&u.elevation){let mt=0;const $t=[];if(H&&u.elevation){mt=function(Ht,or,cr,Gr,xr){const Yr=or.elevation;if(!Yr)return 0;const In=ye.projectAabbCorners(cr,Gr),nn=Ke(1,xr.lat)*or.worldSize,gn=function(Cn,yi){const ii=[0,0,1],Rn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const oi of Rn){const Ui=Cn[oi.corners[0]],ts=Cn[oi.corners[1]],Es=Cn[oi.corners[2]],gs=[ts[0]-Ui[0],ts[1]-Ui[1],yi*(ts[2]-Ui[2])],Xs=re(gs,gs,[Es[0]-Ui[0],Es[1]-Ui[1],yi*(Es[2]-Ui[2])]);pe(Xs,Xs),oi.dotProductWithUp=Oe(Xs,ii)}return Rn.sort((oi,Ui)=>oi.dotProductWithUp-Ui.dotProductWithUp),Rn[0].corners}(In,nn),En=In[gn[0]],zr=In[gn[1]],_n=In[gn[2]],wr=In[gn[3]],Vr=Yr.getAtPointOrZero(new Pt(En[0]/or.worldSize,En[1]/or.worldSize),0),Pn=Yr.getAtPointOrZero(new Pt(zr[0]/or.worldSize,zr[1]/or.worldSize),0),xn=Yr.getAtPointOrZero(new Pt(_n[0]/or.worldSize,_n[1]/or.worldSize),0),Ei=Yr.getAtPointOrZero(new Pt(wr[0]/or.worldSize,wr[1]/or.worldSize),0),pi=(Vr+Ei)/2,An=(Pn+xn)/2;return pi>An?Pn<xn?Ur(Ht,zr,wr,En,Pn,Ei,Vr,nn):Ur(Ht,_n,En,wr,xn,Vr,Ei,nn):Vr<Ei?Ur(Ht,En,zr,_n,Vr,Pn,xn,nn):Ur(Ht,wr,_n,zr,Ei,xn,Pn,nn),Math.max(pi,An)}($t,u,s.aabb,d,y);const Ut=S([],ne([],$t),ut);S(d,Xe,Ut)}else mt=u.elevation.getAtPointOrZero(new Pt(ue.x/ze,ue.y/ze),0);mt!==0&&(d[14]+=mt)}}function Fs(d,s,u=!1){d.uploaded||(d.gfxTexture=new __(s,d.image,u?s.gl.R8:s.gl.RGBA8,{useMipmap:d.sampler.minFilter>=s.gl.NEAREST_MIPMAP_NEAREST}),d.uploaded=!0,d.image=null)}function mo(d,s,u){d.indexBuffer=s.createIndexBuffer(d.indexArray,!1,!0),d.vertexBuffer=s.createVertexBuffer(d.vertexArray,i3.members,!1,!0),d.normalArray&&(d.normalBuffer=s.createVertexBuffer(d.normalArray,l3.members,!1,!0)),d.texcoordArray&&(d.texcoordBuffer=s.createVertexBuffer(d.texcoordArray,a3.members,!1,!0)),d.colorArray&&(d.colorBuffer=s.createVertexBuffer(d.colorArray,(d.colorArray.bytesPerElement===12?s3:o3).members,!1,!0)),d.featureArray&&(d.pbrBuffer=s.createVertexBuffer(d.featureArray,u3.members,!0)),d.segments=wo.simpleSegment(0,0,d.vertexArray.length,d.indexArray.length);const y=d.material;y.pbrMetallicRoughness.baseColorTexture&&Fs(y.pbrMetallicRoughness.baseColorTexture,s),y.pbrMetallicRoughness.metallicRoughnessTexture&&Fs(y.pbrMetallicRoughness.metallicRoughnessTexture,s),y.normalTexture&&Fs(y.normalTexture,s),y.occlusionTexture&&Fs(y.occlusionTexture,s,u),y.emissionTexture&&Fs(y.emissionTexture,s)}function Ko(d,s,u){if(d.meshes)for(const y of d.meshes)mo(y,s,u);if(d.children)for(const y of d.children)Ko(y,s,u)}function ao(d){if(d.meshes)for(const s of d.meshes)s.indexArray.destroy(),s.vertexArray.destroy(),s.colorArray&&s.colorArray.destroy(),s.normalArray&&s.normalArray.destroy(),s.texcoordArray&&s.texcoordArray.destroy(),s.featureArray&&s.featureArray.destroy();if(d.children)for(const s of d.children)ao(s)}function ua(d){if(d.meshes)for(const u of d.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((s=u.material).pbrMetallicRoughness.baseColorTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),s.pbrMetallicRoughness.metallicRoughnessTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),s.normalTexture&&s.normalTexture.gfxTexture&&s.normalTexture.gfxTexture.destroy(),s.emissionTexture&&s.emissionTexture.gfxTexture&&s.emissionTexture.gfxTexture.destroy(),s.occlusionTexture&&s.occlusionTexture.gfxTexture&&s.occlusionTexture.gfxTexture.destroy()));var s;if(d.children)for(const u of d.children)ua(u)}function ta(d,s){const u=d.json.bufferViews[s.bufferView],y=N1[s.componentType];return new y(d.buffers[u.buffer],(s.byteOffset||0)+(u.byteOffset||0),s.count*(u.byteStride&&u.byteStride!==C0[s.type]*y.BYTES_PER_ELEMENT?u.byteStride/y.BYTES_PER_ELEMENT:C0[s.type]))}function $h(d,s,u,y){const w=N1[s.componentType],T=function(se){switch(se){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(w),I=d.json.bufferViews[s.bufferView],L=I.byteStride?I.byteStride/w.BYTES_PER_ELEMENT:C0[s.type],H=u.float32,W=H.length/u.capacity;for(let se=0,ue=0;se<s.count*L;se+=L,ue+=W)for(let me=0;me<W;me++)H[ue+me]=y[se+me]*T;u._trim()}function Kh(d,s,u){const y=d.indices,w=d.attributes,T={};T.indexArray=new Lo;const I=s.json.accessors[y],L=I.count/3;T.indexArray.reserve(L);const H=ta(s,I);for(let me=0;me<L;me++)T.indexArray.emplaceBack(H[3*me],H[3*me+1],H[3*me+2]);T.indexArray._trim(),T.vertexArray=new zu;const W=s.json.accessors[w.POSITION];T.vertexArray.reserve(W.count);const se=ta(s,W);for(let me=0;me<W.count;me++)T.vertexArray.emplaceBack(se[3*me],se[3*me+1],se[3*me+2]);if(T.vertexArray._trim(),T.aabb=new ye(W.min,W.max),T.centroid=function(me,Ee){const Ie=[0,0,0],Re=me.length;if(Re>0){for(let ze=0;ze<Re;ze++){const Xe=3*me[ze];Ie[0]+=Ee[Xe],Ie[1]+=Ee[Xe+1],Ie[2]+=Ee[Xe+2]}Ie[0]/=Re,Ie[1]/=Re,Ie[2]/=Re}return Ie}(H,se),w.COLOR_0!==void 0){const me=s.json.accessors[w.COLOR_0],Ee=C0[me.type],Ie=ta(s,me);T.colorArray=Ee===3?new zu:new Qh,T.colorArray.resize(me.count),$h(s,me,T.colorArray,Ie)}if(w.NORMAL!==void 0){T.normalArray=new zu;const me=s.json.accessors[w.NORMAL];T.normalArray.resize(me.count);const Ee=ta(s,me);$h(s,me,T.normalArray,Ee)}if(w.TEXCOORD_0!==void 0&&u.length>0){T.texcoordArray=new ff;const me=s.json.accessors[w.TEXCOORD_0];T.texcoordArray.resize(me.count);const Ee=ta(s,me);$h(s,me,T.texcoordArray,Ee)}if(w._FEATURE_ID_RGBA4444!==void 0){const me=s.json.accessors[w._FEATURE_ID_RGBA4444];s.json.extensionsUsed&&s.json.extensionsUsed.includes("EXT_meshopt_compression")&&(T.featureData=ta(s,me))}w._FEATURE_RGBA4444!==void 0&&(T.featureData=new Uint32Array(ta(s,s.json.accessors[w._FEATURE_RGBA4444]).buffer));const ue=d.material;return T.material=function(me,Ee){const{emissiveFactor:Ie=[0,0,0],alphaMode:Re="OPAQUE",alphaCutoff:ze=.5,normalTexture:Xe,occlusionTexture:ht,emissiveTexture:ut,doubleSided:mt}=me,{baseColorFactor:$t=[1,1,1,1],metallicFactor:Ut=1,roughnessFactor:Ht=1,baseColorTexture:or,metallicRoughnessTexture:cr}=me.pbrMetallicRoughness||{},Gr=ht?Ee[ht.index]:void 0;if(ht&&ht.extensions&&ht.extensions.KHR_texture_transform&&Gr){const xr=ht.extensions.KHR_texture_transform;Gr.offsetScale=[xr.offset[0],xr.offset[1],xr.scale[0],xr.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Le(...$t),metallicFactor:Ut,roughnessFactor:Ht,baseColorTexture:or?Ee[or.index]:void 0,metallicRoughnessTexture:cr?Ee[cr.index]:void 0},doubleSided:mt,emissiveFactor:new Le(...Ie),alphaMode:Re,alphaCutoff:ze,normalTexture:Xe?Ee[Xe.index]:void 0,occlusionTexture:Gr,emissionTexture:ut?Ee[ut.index]:void 0,defined:me.defined===void 0}}(ue!==void 0?s.json.materials[ue]:{defined:!1},u),T}function Af(d,s,u){const{matrix:y,rotation:w,translation:T,scale:I,mesh:L,extras:H,children:W}=d,se={};if(se.matrix=y||function(ue,me,Ee,Ie){var Re=me[0],ze=me[1],Xe=me[2],ht=me[3],ut=Re+Re,mt=ze+ze,$t=Xe+Xe,Ut=Re*ut,Ht=Re*mt,or=Re*$t,cr=ze*mt,Gr=ze*$t,xr=Xe*$t,Yr=ht*ut,In=ht*mt,nn=ht*$t,gn=Ie[0],En=Ie[1],zr=Ie[2];return ue[0]=(1-(cr+xr))*gn,ue[1]=(Ht+nn)*gn,ue[2]=(or-In)*gn,ue[3]=0,ue[4]=(Ht-nn)*En,ue[5]=(1-(Ut+xr))*En,ue[6]=(Gr+Yr)*En,ue[7]=0,ue[8]=(or+In)*zr,ue[9]=(Gr-Yr)*zr,ue[10]=(1-(Ut+cr))*zr,ue[11]=0,ue[12]=Ee[0],ue[13]=Ee[1],ue[14]=Ee[2],ue[15]=1,ue}([],w||[0,0,0,1],T||[0,0,0],I||[1,1,1]),L!==void 0){se.meshes=u[L];const ue=se.anchor=[0,0];for(const me of se.meshes){const{min:Ee,max:Ie}=me.aabb;ue[0]+=Ee[0]+Ie[0],ue[1]+=Ee[1]+Ie[1]}ue[0]=Math.floor(ue[0]/se.meshes.length/2),ue[1]=Math.floor(ue[1]/se.meshes.length/2)}if(H&&(H.id&&(se.id=H.id),H.lights&&(se.lights=function(ue){if(!ue.length)return[];const me=function(Xe){const ht=atob(Xe),ut=new Uint8Array(ht.length);for(let mt=0;mt<ht.length;mt++)ut[mt]=ht.codePointAt(mt);return ut}(ue),Ee=[],Ie=me.length/24,Re=new Uint16Array(me.buffer),ze=new Float32Array(me.buffer);for(let Xe=0;Xe<Ie;Xe++){const ht=Re[2*Xe*6]/30,ut=Re[2*Xe*6+1]/30,mt=Re[2*Xe*6+10]/100,$t=ze[6*Xe+1],Ut=ze[6*Xe+2],Ht=ze[6*Xe+3],or=ze[6*Xe+4],cr=Ht-$t,Gr=or-Ut,xr=Math.hypot(cr,Gr);Ee.push({pos:[$t+.5*cr,Ut+.5*Gr,ut],normal:[Gr/xr,-cr/xr,0],width:xr,height:ht,depth:mt,points:[$t,Ut,Ht,or]})}return Ee}(H.lights))),W){const ue=[];for(const me of W)ue.push(Af(s.json.nodes[me],s,u));se.children=ue}return se}function qc(d){if(d.vertices.length===0||d.indices.length===0)return null;const s=new M1(d.vertices,d.indices,8,256),[u,y]=[s.min.clone(),s.max.clone()];return{vertices:d.vertices,indices:d.indices,grid:s,min:u,max:y}}function Yd(d){if(!d.extras||!d.extras.ground)return null;const s=d.extras.ground;if(!s||!Array.isArray(s)||s.length===0)return null;const u=s[0];if(!u||!Array.isArray(u)||u.length===0)return null;const y=[];for(const I of u){if(!Array.isArray(I)||I.length!==2)continue;const L=I[0],H=I[1];typeof L=="number"&&typeof H=="number"&&y.push(new tr(L,H))}if(y.length<3)return null;y.length>1&&y[y.length-1].equals(y[0])&&y.pop();let w=0;for(let I=0;I<y.length;I++){const L=y[I],H=y[(I+1)%y.length],W=y[(I+2)%y.length];w+=(L.x-H.x)*(W.y-H.y)-(W.x-H.x)*(L.y-H.y)}w>0&&y.reverse();const T=hg(y.flatMap(I=>[I.x,I.y]),[]);return T.length===0?null:{vertices:y,indices:T}}function fA(d,s){const u=[],y=[];let w=0;const T=[];for(const I of d){w=u.length;const L=I.vertexArray.float32,H=I.indexArray.uint16;for(let W=0;W<I.vertexArray.length;W++)T[0]=L[3*W+0],T[1]=L[3*W+1],T[2]=L[3*W+2],Be(T,T,s),u.push(new tr(T[0],T[1]));for(let W=0;W<3*I.indexArray.length;W++)y.push(H[W]+w)}if(y.length%3!=0)return null;for(let I=0;I<y.length;I+=3){const L=u[y[I+0]],H=u[y[I+1]],W=u[y[I+2]];(L.x-H.x)*(W.y-H.y)-(W.x-H.x)*(L.y-H.y)>0&&([y[I+1],y[I+2]]=[y[I+2],y[I+1]])}return{vertices:u,indices:y}}function v_(d){const s=function(H,W){const se=[],ue=WebGL2RenderingContext;if(H.json.textures)for(const me of H.json.textures){const Ee={magFilter:ue.LINEAR,minFilter:ue.NEAREST,wrapS:ue.REPEAT,wrapT:ue.REPEAT};me.sampler!==void 0&&Object.assign(Ee,H.json.samplers[me.sampler]),se.push({image:W[me.source],sampler:Ee,uploaded:!1})}return se}(d,d.images),u=function(H,W){const se=[];for(const ue of H.json.meshes){const me=[];for(const Ee of ue.primitives)me.push(Kh(Ee,H,W));se.push(me)}return se}(d,s),{scenes:y,scene:w,nodes:T}=d.json,I=y?y[w||0].nodes:T,L=[];for(const H of I)L.push(Af(T[H],d,u));return function(H,W,se){const ue={},me=new Set;for(let Ee=0;Ee<H.length;Ee++){const Ie=se[W[Ee]];if(!Ie.extras)continue;const Re=Ie.extras["mapbox:footprint:version"],ze=Ie.extras["mapbox:footprint:id"];(Re||ze)&&me.add(Ee),Re==="1.0.0"&&ze&&(ue[ze]=Ee)}for(let Ee=0;Ee<H.length;Ee++){if(me.has(Ee))continue;const Ie=H[Ee],Re=se[W[Ee]];if(!Re.extras)continue;let ze=null;Ie.id in ue&&(ze=fA(H[ue[Ie.id]].meshes,Ie.matrix)),ze||(ze=Yd(Re)),ze&&(Ie.footprint=qc(ze))}if(me.size>0){const Ee=Array.from(me.values()).sort((Ie,Re)=>Ie-Re);for(let Ie=Ee.length-1;Ie>=0;Ie--)H.splice(Ee[Ie],1)}}(L,I,d.json.nodes),L}function hR(d){d.heightmap=new Float32Array(4096),d.heightmap.fill(-1);const s=d.vertexArray.float32,u=d.aabb.min[0]-1,y=d.aabb.min[1]-1,w=ui/(d.aabb.max[0]-u+2),T=ui/(d.aabb.max[1]-y+2);for(let I=0;I<s.length;I+=3){const L=s[I+2],H=(s[I+0]-u)*w|0,W=(s[I+1]-y)*T|0;L>d.heightmap[W*ui+H]&&(d.heightmap[W*ui+H]=L)}}function CB(d,s,u,y,w){u.reserve(u.length+4*d.length),y.reserve(y.length+10*d.length),w.reserve(w.length+10*d.length);let T=y.length;for(const I of d){const L=Math.min(10,Math.max(4,1.3*I.height))*s,H=[-I.normal[1],I.normal[0],0],W=Math.min(.29,.1*I.width/I.depth),se=I.width-2*I.depth*s*(W+.01),ue=J([],I.pos,H,se/2),me=J([],I.pos,H,-se/2),Ee=[ue[0],ue[1],ue[2]+I.height],Ie=[me[0],me[1],me[2]+I.height],Re=J([],I.normal,H,W);de(Re,Re,L);const ze=J([],I.normal,H,-W);de(ze,ze,L),k(Re,ue,Re),k(ze,me,ze),ue[2]+=.1,me[2]+=.1,y.emplaceBack(Re[0],Re[1],Re[2]),y.emplaceBack(ze[0],ze[1],ze[2]),y.emplaceBack(ue[0],ue[1],ue[2]),y.emplaceBack(me[0],me[1],me[2]),y.emplaceBack(Ee[0],Ee[1],Ee[2]),y.emplaceBack(Ie[0],Ie[1],Ie[2]),y.emplaceBack(ue[0],ue[1],ue[2]),y.emplaceBack(me[0],me[1],me[2]),y.emplaceBack(Re[0],Re[1],Re[2]),y.emplaceBack(ze[0],ze[1],ze[2]);const Xe=se/L/2;w.emplaceBack(-Xe-W,-1,Xe,.8),w.emplaceBack(Xe+W,-1,Xe,.8),w.emplaceBack(-Xe,0,Xe,1.3),w.emplaceBack(Xe,0,Xe,1.3),w.emplaceBack(Xe+W,-.8,Xe,.7),w.emplaceBack(Xe+W,-.8,Xe,.7),w.emplaceBack(0,0,Xe,1.3),w.emplaceBack(0,0,Xe,1.3),w.emplaceBack(Xe+W,-1.2,Xe,.8),w.emplaceBack(Xe+W,-1.2,Xe,.8),u.emplaceBack(6+T,4+T,8+T),u.emplaceBack(7+T,9+T,5+T),u.emplaceBack(0+T,1+T,2+T),u.emplaceBack(1+T,3+T,2+T),T+=10}}function fR(d,s){const u={};u.indexArray=new Lo,u.vertexArray=new zu,u.colorArray=new Qh,CB(d,s,u.indexArray,u.vertexArray,u.colorArray);const y={defined:!0};y.emissiveFactor=Le.black;const w={};return w.baseColorFactor=Le.white,y.pbrMetallicRoughness=w,u.material=y,u.aabb=new ye([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}const EB=Gs([{name:"a_pos_3f",components:3,type:"Float32"}]),dR=Gs([{name:"a_normal_3",components:3,type:"Int16"}]),BB=Gs([{name:"a_part_color_emissive",components:2,type:"Uint16"}]),pR=Gs([{name:"a_bloom_attenuation",components:4,type:"Float32"}]),TB=br.types,h3=32767;function AR(d,s){const u=tn+s;for(const y of d)for(const w of y)if(w.x<-s||w.x>u||w.y<-s||w.y>u)return!1;return!0}class IB{constructor(s){this.layoutAOArray=[],this.indexArrayForConflationUploaded=!1,this.maxHeight=0,this.replacementUpdateTime=0,this.activeReplacements=[],this.footprints=[],this.featuresOnBorder=[],this.buildingFeatures=[],this.footprintLookup={},this.zoom=s.zoom,this.canonical=s.canonical,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.worldview=s.worldview,this.layoutVertexArray=new zu,this.layoutNormalArray=new Nd,this.layoutColorArray=new cu,this.indexArray=new Lo,this.indexArrayForConflation=new Lo,this.entranceBloom={layoutVertexArray:new zu,layoutVertexBuffer:null,layoutAttenuationArray:new Qh,layoutAttenuationBuffer:null,layoutColorArray:new cu,layoutColorBuffer:null,indexArray:new Lo,indexArrayForConflation:new Lo,indexBuffer:null,segmentsBucket:new wo},this.programConfigurations=new Qu(s.layers,{zoom:s.zoom,lut:s.lut}),this.segmentsBucket=new wo,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=s.projection,this.groundEffect=new h_(s)}get segments(){return this.segmentsBucket}get bloomGeometry(){return this.entranceBloom}updateFootprints(s,u){for(const y of this.footprints)u.push({footprint:y,id:s})}prepare(){return function(){if(R1!=null||x2!=null)return null;if(ZA!=null)return ZA;const s=fetch(Ji.BUILDING_GEN_URL);return ZA=function(u){let y,w,T,I;function L(){y=new Uint8Array(I.buffer),w=new Int32Array(I.buffer),T=new Float32Array(I.buffer)}function H(){throw new Error("Unexpected BuildingGen error.")}const W=()=>{},se={a:{a:H,f:function(ue){const me=y.length,Ee=Math.max(ue>>>0,Math.ceil(1.2*me)),Ie=Math.ceil((Ee-me)/65536);try{return I.grow(Ie),L(),!0}catch{return!1}},g:H,b:W,c:W,d:W,e:W}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(u,se):u.then(ue=>ue.arrayBuffer()).then(ue=>WebAssembly.instantiate(ue,se))).then(ue=>{const me=ue.instance.exports;return(0,me.g)(),I=me.f,L(),new A_({setStyle:me.h,setAOOptions:me.i,setMetricOptions:me.j,setStructuralOptions:me.k,setFacadeOptions:me.l,setFauxFacadeOptions:me.m,setFacadeClassifierOptions:me.n,addFeature:me.o,addFacade:me.p,generateMesh:me.q,getLastError:me.r,getMeshCount:me.s,getPositionsPtr:me.t,getPositionsLength:me.u,getNormalsPtr:me.v,getNormalsLength:me.w,getColorsPtr:me.x,getColorsLength:me.y,getAOPtr:me.z,getAOLength:me.A,getUVPtr:me.B,getUVLength:me.C,getFauxFacadePtr:me.D,getFauxFacadeLength:me.E,getIndicesPtr:me.F,getIndicesLength:me.G,getBuildingPart:me.H,getRingCount:me.I,getRingPtr:me.J,getRingLength:me.K,free:me.L,malloc:me.M,heapU8:y,heap32:w,heapF32:T})})}(s).then(u=>(ZA=null,R1=u,R1)).catch(u=>{Qi("Could not load building-gen"),ZA=null,x2=u}),ZA}()}populate(s,u,y,w){const T=C2();if(!T)return;const I=Mt(y);this.tileToMeter=I,this.brightness=u.brightness,T.setStyle({convertToMeters:!1,entranceColorRgb:[1,1,1],facadeGlazingColorRgb:[.5607843137254902,.6745098039215687,.7215686274509804],normalScale:[1,-1,I],ridgeHeight:3,roofColorRgb:[.886274516,.784313738,.713725507],tileToMeters:I,tileZoom:16,wallColorRgb:[.988235294,.933333337,.811764717]}),T.setAOOptions(!1,.3),T.setMetricOptions(!1,16),T.setStructuralOptions(!0),T.setFacadeOptions(4,!0),T.setFauxFacadeOptions(!1,!1,1),T.setFacadeClassifierOptions(3);const L=new Map;for(const{feature:H}of s){if(TB[H.type]!=="LineString")continue;const W=this.layers[0]._featureFilter.needGeometry,se=kr(H,W);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom),se,y))continue;const ue=W?se.geometry:qt(H,y,w),me=[];for(const ze of ue)for(const Xe of ze)me.push({x:Xe.x,y:Xe.y});const Ee={coordinates:me,crossPerc:H.properties.cross_perc,distanceToRoad:H.properties.distance_to_road,entrances:H.properties.entrances,sourceId:0},Ie=H.properties.source_id;let Re=L.get(Ie);Re||(Re=[],L.set(Ie,Re)),Re.push(Ee)}this.maxHeight=0;for(const{feature:H,index:W}of s){if(TB[H.type]==="LineString")continue;const se=this.layers[0]._featureFilter.needGeometry,ue=kr(H,se);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom),ue,y))continue;const me=se?ue.geometry:qt(H,y,w),Ee=Mp(me,500);if(!AR(me,163))continue;const Ie=this.layers[0],Re=Ie.layout.get("building-base").evaluate(H,{},y),ze=Ie.layout.get("building-height").evaluate(H,{},y),Xe=Ie.layout.get("building-roof-shape").evaluate(H,{},y),ht=Ie.paint.get("building-ambient-occlusion-intensity"),ut=Ie.paint.get("building-ambient-occlusion-ground-radius")/this.tileToMeter;if(Xe==="flat")continue;const mt=H.properties.source_id;let $t;$t=L.has(mt)?L.get(mt):[];const Ut=[],Ht=new tr(1/0,1/0),or=new tr(-1/0,-1/0);for(const An of Ee)if(An.length>0){const Cn=[];for(const yi of An){const ii=[];for(let Rn=yi.length-1;Rn>=0;Rn--){const oi=yi[Rn];ii.push({x:oi.x,y:oi.y}),Ht.x=Math.min(Ht.x,oi.x),Ht.y=Math.min(Ht.y,oi.y),or.x=Math.max(or.x,oi.x),or.y=Math.max(or.y,oi.y)}Cn.push(ii)}Ut.push({id:H.id,height:ze,minHeight:Re,sourceId:0,roofType:Xe,coordinates:Cn})}const cr=T.generateMesh(Ut,$t);if(typeof cr=="string"||cr.meshes.length===0||cr.modifiedPolygonRings.length===0)continue;let Gr=0;for(const An of cr.meshes)Gr+=An.positions.length/3;const xr=this.segmentsBucket.prepareSegment(Gr,this.layoutVertexArray,this.indexArray),Yr=[];let In=null,nn=0,gn=-1;const En=this.indexArray.length;let zr=0;for(const An of cr.meshes){const Cn=this.layoutVertexArray.length;if(An.buildingPart==="entrance"){const ii=new Array;for(let ts=0;ts<An.indices.length;ts+=12){const Es=An.positions[ts+0],gs=An.positions[ts+1],Xs=An.positions[ts+3],Ds=An.positions[ts+4],ya=An.positions[ts+2],wt=An.positions[ts+8]-ya,St=1,Rr=Xs-Es,Ln=Ds-gs,Kn=Math.hypot(Rr,Ln);ii.push({pos:[Es+.5*Rr,gs+.5*Ln,ya],normal:[Ln/Kn,-Rr/Kn,0],width:Kn,height:wt,depth:St,points:[Es,gs,Xs,Ds]})}const Rn=this.entranceBloom.segmentsBucket.prepareSegment(10*ii.length,this.entranceBloom.layoutVertexArray,this.entranceBloom.indexArray),oi=this.entranceBloom.layoutVertexArray.length;nn=this.entranceBloom.indexArray.length,CB(ii,.5/this.tileToMeter,this.entranceBloom.indexArray,this.entranceBloom.layoutVertexArray,this.entranceBloom.layoutAttenuationArray);const Ui=this.entranceBloom.layoutVertexArray.length-oi;gn=this.entranceBloom.indexArray.length-nn;for(let ts=0;ts<Ui;ts++)this.entranceBloom.layoutColorArray.emplaceBack(65535,65535);Rn.vertexLength+=Ui,Rn.primitiveLength+=gn,In={part:An.buildingPart,vertexOffset:oi,vertexLength:Ui}}for(let ii=0;ii<An.positions.length;ii+=3)zr=Math.max(zr,An.positions[ii+2]),this.layoutVertexArray.emplaceBack(An.positions[ii],An.positions[ii+1],An.positions[ii+2]);for(let ii=0;ii<An.normals.length;ii+=3)this.layoutNormalArray.emplaceBack(An.normals[ii+0]*h3,An.normals[ii+1]*h3,An.normals[ii+2]*h3);for(let ii=0;ii<An.ao.length;ii++)this.layoutAOArray.push(An.ao[ii]);for(let ii=0;ii<An.colors.length;ii+=3){const Rn=1+(An.ao[ii/3]-1)*ht;this.layoutColorArray.emplaceBack(An.colors[ii]*Rn<<8|An.colors[ii+1]*Rn,An.colors[ii+2]*Rn<<8)}const yi=xr.vertexLength;for(let ii=0;ii<An.indices.length;ii+=3)this.indexArray.emplaceBack(yi+An.indices[ii],yi+An.indices[ii+1],yi+An.indices[ii+2]);xr.vertexLength+=An.positions.length/3,xr.primitiveLength+=An.indices.length/3,(An.buildingPart==="roof"||An.buildingPart==="wall"||An.buildingPart==="facade_glazing"||An.buildingPart==="entrance")&&Yr.push({part:An.buildingPart,vertexOffset:Cn,vertexLength:An.positions.length/3})}this.maxHeight=Math.max(this.maxHeight,zr),this.buildingFeatures.push({feature:ue,segment:xr,parts:Yr,buildingBloom:In});const _n=this.indexArray.length-En,wr=[],Vr=[],Pn=new tr(1/0,1/0),xn=new tr(-1/0,-1/0),Ei=this.groundEffect.vertexArray.length;for(const An of cr.modifiedPolygonRings){const Cn=[],yi=new tr(1/0,1/0),ii=new tr(-1/0,-1/0);for(let Rn=0;Rn<An.length;Rn+=2){const oi=An.length-Rn-2;yi.x=Math.min(yi.x,An[oi]),yi.y=Math.min(yi.y,An[oi+1]),ii.x=Math.max(ii.x,An[oi]),ii.y=Math.max(ii.y,An[oi+1]);const Ui=new tr(An[oi],An[oi+1]);Cn.push(Ui),wr.push(Ui.x,Ui.y),Vr.push(Ui.clone())}Pn.x=Math.min(Pn.x,yi.x),Pn.y=Math.min(Pn.y,yi.y),xn.x=Math.max(xn.x,ii.x),xn.y=Math.max(xn.y,ii.y),this.groundEffect.addData(Cn,[yi,ii],ut)}const pi=this.groundEffect.vertexArray.length-Ei;(Ht.x<0||or.x>tn||Ht.y<0||or.y>tn)&&this.featuresOnBorder.push({featureId:H.id,footprintIndex:this.footprints.length});{const An=hg(wr,null,2),Cn=new M1(Vr,An,8,256);let yi=H.id;H.properties&&H.properties.hasOwnProperty("building_id")&&(yi=H.properties.building_id),this.footprints.push({vertices:Vr,indices:An,grid:Cn,min:Pn,max:xn,buildingId:yi,hiddenFlags:0,indicesOffset:En,indicesLength:_n,bloomIndicesOffset:nn,bloomIndicesLength:gn,groundEffectVertexOffset:Ei,groundEffectVertexLength:pi,segment:xr,height:zr})}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,H,W,{},u.availableImages,y,u.brightness),this.groundEffect.addPaintPropertiesData(H,W,{},u.availableImages,y,u.brightness)}this.groundEffect.prepareBorderSegments(),this.evaluate(this.layers[0])}update(s,u,y,w,T,I,L){this.programConfigurations.updatePaintArrays(s,u,T,y,w,I,L),this.groundEffect.update(s,u,T,y,w,I,L)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,EB.members),this.layoutNormalBuffer=s.createVertexBuffer(this.layoutNormalArray,dR.members),this.entranceBloom.layoutVertexBuffer=s.createVertexBuffer(this.entranceBloom.layoutVertexArray,EB.members),this.entranceBloom.layoutAttenuationBuffer=s.createVertexBuffer(this.entranceBloom.layoutAttenuationArray,pR.members),this.uploadUpdatedColorBuffer(s),this.uploadUpdatedIndexBuffer(s),this.groundEffect.upload(s)),this.groundEffect.uploadPaintProperties(s),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.layoutNormalBuffer.destroy(),this.layoutColorBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segmentsBucket.destroy(),this.entranceBloom.layoutVertexBuffer.destroy(),this.entranceBloom.layoutColorBuffer.destroy(),this.entranceBloom.layoutAttenuationBuffer.destroy(),this.entranceBloom.indexBuffer.destroy(),this.entranceBloom.segmentsBucket.destroy())}updateFootprintHiddenFlags(s,u,y=!0){let w=!1;const T=y?u:0,I=0|(y?-1:~u);this.groundEffect.hiddenByLandmarkVertexArray.length===0&&this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const L of s){const H=this.footprints[L],W=H.hiddenFlags&I|T;H.hiddenFlags!==W&&(H.hiddenFlags=W,w=!0,this.groundEffect.updateHiddenByLandmarkRange(H.groundEffectVertexOffset,H.groundEffectVertexLength,H.hiddenFlags!==0))}return w&&(this.indexArrayForConflationUploaded=!1),w}uploadUpdatedIndexBuffer(s){if(this.groundEffect.uploadHiddenByLandmark(s),!this.indexArrayForConflationUploaded&&this.indexArray.length!==0){this.indexArrayForConflation.resize(this.indexArray.length),this.indexArrayForConflation.uint16.set(this.indexArray.uint16),this.entranceBloom.indexArrayForConflation.resize(this.entranceBloom.indexArray.length),this.entranceBloom.indexArrayForConflation.uint16.set(this.entranceBloom.indexArray.uint16);for(const u of this.footprints){const y=u.indicesOffset+u.indicesLength;if(u.hiddenFlags!==0){for(let T=u.indicesOffset;T<y;T++)this.indexArrayForConflation.uint16[3*T+0]=0,this.indexArrayForConflation.uint16[3*T+1]=0,this.indexArrayForConflation.uint16[3*T+2]=0;const w=u.bloomIndicesOffset+u.bloomIndicesLength;for(let T=u.bloomIndicesOffset;T<w;T++)this.entranceBloom.indexArrayForConflation.uint16[3*T+0]=0,this.entranceBloom.indexArrayForConflation.uint16[3*T+1]=0,this.entranceBloom.indexArrayForConflation.uint16[3*T+2]=0}}this.indexBuffer?this.indexBuffer.updateData(this.indexArrayForConflation):this.indexBuffer=s.createIndexBuffer(this.indexArrayForConflation,!0),this.entranceBloom.indexBuffer?this.entranceBloom.indexBuffer.updateData(this.entranceBloom.indexArrayForConflation):this.entranceBloom.indexBuffer=s.createIndexBuffer(this.entranceBloom.indexArrayForConflation,!0),this.indexArrayForConflationUploaded=!0}}uploadUpdatedColorBuffer(s){this.layoutColorBuffer?this.layoutColorBuffer.updateData(this.layoutColorArray):this.layoutColorBuffer=s.createVertexBuffer(this.layoutColorArray,BB.members,!0),this.entranceBloom.layoutColorBuffer?this.entranceBloom.layoutColorBuffer.updateData(this.entranceBloom.layoutColorArray):this.entranceBloom.layoutColorBuffer=s.createVertexBuffer(this.entranceBloom.layoutColorArray,BB.members,!0)}evaluate(s){const u=s.paint.get("building-ambient-occlusion-intensity");for(const y of this.buildingFeatures){const w=y.feature;w.properties["building-part"]="roof";const T=s.paint.get("building-color").evaluate(w,{},this.canonical),I=s.paint.get("building-emissive-strength").evaluate(w,{},this.canonical);w.properties["building-part"]="wall";const L=s.paint.get("building-color").evaluate(w,{},this.canonical),H=s.paint.get("building-emissive-strength").evaluate(w,{},this.canonical);w.properties["building-part"]="window";const W=s.paint.get("building-color").evaluate(w,{},this.canonical),se=s.paint.get("building-emissive-strength").evaluate(w,{},this.canonical);w.properties["building-part"]="door";const ue=s.paint.get("building-color").evaluate(w,{},this.canonical),me=s.paint.get("building-emissive-strength").evaluate(w,{},this.canonical);for(const Ie of y.parts){let Re,ze=T;Ie.part==="roof"?(ze=T,Re=I):Ie.part==="wall"?(ze=L,Re=H):Ie.part==="facade_glazing"?(ze=W,Re=se):Ie.part==="entrance"&&(ze=ue,Re=me),Re=nt(Re,0,1);for(let Xe=0;Xe<Ie.vertexLength;Xe++){const ht=Ie.vertexOffset+Xe,ut=1+(this.layoutAOArray[ht]-1)*u;this.layoutColorArray.emplace(ht,ze.r*ut*255<<8|ze.g*ut*255,ze.b*ut*255<<8|255*Re)}}const Ee=y.buildingBloom;if(Ee)for(let Ie=0;Ie<Ee.vertexLength;Ie++)this.bloomGeometry.layoutColorArray.emplace(Ee.vertexOffset+Ie,255*ue.r<<8|255*ue.g,255*ue.b<<8|51*me)}}needsEvaluation(s,u){const y=s.transform.projectionOptions,w=s.style.getBrightness();return!(this.uploaded&&y.name===this.projection.name&&this.brightness===w||(this.projection=y,this.brightness=w,0))}updateReplacement(s,u,y){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const w=u.getReplacementRegionsForTile(s.toUnwrapped());if(F1(this.activeReplacements,w))return;this.activeReplacements=w;for(const I of this.footprints)I.hiddenFlags&=-2;const T=[];for(const I of this.activeReplacements){if(I.order<=$b)continue;const L=Math.max(1,Math.pow(2,I.footprintTileId.canonical.z-s.canonical.z));for(const H of this.footprints)H.min.x>I.max.x||H.max.x<I.min.x||H.min.y>I.max.y||H.max.y<I.min.y||(T.length=0,mR(H.vertices,0,H.vertices.length,I.footprintTileId.canonical,s.canonical,T),o_(I.footprint,T,H.indices,0,H.indices.length,0,-L)&&(H.hiddenFlags|=1))}this.groundEffect.hiddenByLandmarkVertexArray.length===0&&this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const I of this.footprints)this.groundEffect.updateHiddenByLandmarkRange(I.groundEffectVertexOffset,I.groundEffectVertexLength,I.hiddenFlags!==0);this.indexArrayForConflationUploaded=!1}getHeightAtTileCoord(s,u){let y=Number.NEGATIVE_INFINITY,w=!0;const T=4*(s+tn)*tn+(u+tn);if(this.footprintLookup.hasOwnProperty(T)){const L=this.footprintLookup[T];return L?{height:L.height,hidden:L.hiddenFlags!==0}:void 0}const I=new tr(s,u);for(const L of this.footprints)s>L.max.x||L.min.x>s||u>L.max.y||L.min.y>u||L.height<=y||P1(I,L)&&(y=L.height,this.footprintLookup[T]=L,w=L.hiddenFlags!==0);if(y!==Number.NEGATIVE_INFINITY)return{height:y,hidden:w};this.footprintLookup[T]=void 0}}function mR(d,s,u,y,w,T){const I=Math.pow(2,y.z-w.z);for(let L=0;L<u;L++){let H=d[L+s].x,W=d[L+s].y;H=(H+w.x*tn)*I-y.x*tn,W=(W+w.y*tn)*I-y.y*tn,T.push(new tr(H,W))}}let MB,FB;Xn(IB,"BuildingBucket",{omit:["layers"]});const gR=Gs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),yR=Gs([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:_R}=gR,vR=Gs([{name:"a_packed",components:3,type:"Float32"}]),{members:bR}=vR,xR=Gs([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:wR}=xR;class PB{constructor(s,u){this.width=s,this.height=u,this.nextRow=0,this.image=new WA({width:s,height:u}),this.positions={},this.uploaded=!1}getDash(s,u){const y=this.getKey(s,u);return this.positions[y]}trim(){const s=this.width,u=this.height=pn(this.nextRow);this.image.resize({width:s,height:u})}getKey(s,u){return s.join(",")+u}getDashRanges(s,u,y){const w=[];let T=s.length%2==1?-s[s.length-1]*y:0,I=s[0]*y,L=!0;w.push({left:T,right:I,isDash:L,zeroLength:s[0]===0});let H=s[0];for(let W=1;W<s.length;W++){L=!L;const se=s[W];T=H*y,H+=se,I=H*y,w.push({left:T,right:I,isDash:L,zeroLength:se===0})}return w}addRoundDash(s,u,y){const w=u/2;for(let T=-y;T<=y;T++){const I=this.width*(this.nextRow+y+T);let L=0,H=s[L];for(let W=0;W<this.width;W++){W/H.right>1&&(H=s[++L]);const se=Math.abs(W-H.left),ue=Math.abs(W-H.right),me=Math.min(se,ue);let Ee;const Ie=T/y*(w+1);if(H.isDash){const Re=w-Math.abs(Ie);Ee=Math.sqrt(me*me+Re*Re)}else Ee=w-Math.sqrt(me*me+Ie*Ie);this.image.data[I+W]=Math.max(0,Math.min(255,Ee+128))}}}addRegularDash(s,u){for(let H=s.length-1;H>=0;--H){const W=s[H],se=s[H+1];W.zeroLength?s.splice(H,1):se&&se.isDash===W.isDash&&(se.left=W.left,s.splice(H,1))}const y=s[0],w=s[s.length-1];y.isDash===w.isDash&&(y.left=w.left-this.width,w.right=y.right+this.width);const T=this.width*this.nextRow;let I=0,L=s[I];for(let H=0;H<this.width;H++){H/L.right>1&&(L=s[++I]);const W=Math.abs(H-L.left),se=Math.abs(H-L.right),ue=Math.min(W,se);this.image.data[T+H]=Math.max(0,Math.min(255,(L.isDash?ue:-ue)+u+128))}}addDash(s,u){const y=this.getKey(s,u);if(this.positions[y])return this.positions[y];const w=u==="round",T=w?7:0,I=2*T+1;if(this.nextRow+I>this.height)return Qi("LineAtlas out of space"),null;s.length===0&&s.push(1);let L=0;for(let se=0;se<s.length;se++)s[se]<0&&(Qi("Negative value is found in line dasharray, replacing values with 0"),s[se]=0),L+=s[se];if(L!==0){const se=this.width/L,ue=this.getDashRanges(s,this.width,se);w?this.addRoundDash(ue,se,T):this.addRegularDash(ue,u==="square"?.5*se:0)}const H=this.nextRow+T;this.nextRow+=I;const W={tl:[H,T],br:[L,0]};return this.positions[y]=W,W}}Xn(PB,"LineAtlas");const SR=br.types,CR=Math.cos(Math.PI/180*37.5),ER=Math.cos(Math.PI/180*5);class f3{constructor(s){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=s.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=s.overscaling,this.pixelRatio=s.pixelRatio,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new sh,this.layoutVertexArray2=new zu,this.patternVertexArray=new zu,this.indexArray=new Lo,this.programConfigurations=new Qu(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new wo,this.maxLineLength=0,this.zOffsetVertexArray=new zu,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=s.tessellationStep?s.tessellationStep:tn/64,this.worldview=s.worldview}updateFootprints(s,u){}populate(s,u,y,w){this.hasPattern=Xy("line",this.layers,this.pixelRatio,u);const T=this.layers[0].layout.get("line-sort-key");this.tileToMeter=Mt(y);const I=this.layers[0].layout.get("line-elevation-reference");if(I==="hd-road-markup")this.elevationType="road";else{const me=this.layers[0].layout.get("line-z-offset"),Ee=me.isConstant()&&!me.constantOr(0);this.elevationType=I!=="sea"&&I!=="ground"&&Ee?"none":"offset",this.elevationType==="offset"&&I==="none"&&Qi(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const L=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&L!==void 0;const H=[];for(const{feature:me,id:Ee,index:Ie,sourceLayerIndex:Re}of s){const ze=this.layers[0]._featureFilter.needGeometry,Xe=kr(me,ze);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom,{worldview:this.worldview}),Xe,y))continue;const ht=T?T.evaluate(Xe,{},y):void 0,ut={id:Ee,properties:me.properties,type:me.type,sourceLayerIndex:Re,index:Ie,geometry:ze?Xe.geometry:qt(me,y,w),patterns:{},sortKey:ht};H.push(ut)}T&&H.sort((me,Ee)=>me.sortKey-Ee.sortKey);const{lineAtlas:W,featureIndex:se}=u,ue=this.addConstantDashes(W);for(const me of H){const{geometry:Ee,index:Ie,sourceLayerIndex:Re}=me;if(ue&&this.addFeatureDashes(me,W),this.hasPattern){const ze=Zy("line",this.layers,me,this.zoom,this.pixelRatio,u);this.patternFeatures.push(ze)}else this.addFeature(me,Ee,Ie,y,W.positions,u.availableImages,u.brightness,u.elevationFeatures);se.insert(s[Ie].feature,Ee,Ie,Re,this.index)}}addConstantDashes(s){let u=!1;for(const y of this.layers){const w=y.paint.get("line-dasharray").value,T=y.layout.get("line-cap").value;if(w.kind!=="constant"||T.kind!=="constant")u=!0;else{const I=T.value,L=w.value;if(!L)continue;s.addDash(L,I)}}return u}addFeatureDashes(s,u){const y=this.zoom;for(const w of this.layers){const T=w.paint.get("line-dasharray").value,I=w.layout.get("line-cap").value;if(T.kind==="constant"&&I.kind==="constant")continue;let L,H;if(T.kind==="constant"){if(L=T.value,!L)continue}else L=T.evaluate({zoom:y},s);H=I.kind==="constant"?I.value:I.evaluate({zoom:y},s),u.addDash(L,H),s.patterns[w.id]=[u.getKey(L,H)]}}update(s,u,y,w,T,I,L,H){this.programConfigurations.updatePaintArrays(s,u,T,y,w,I,L,H)}addFeatures(s,u,y,w,T,I){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,u,y,w,I)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,bR)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=s.createVertexBuffer(this.patternVertexArray,wR)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,yR.members,!0)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,_R),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,y,w,T,I,L,H){const W=this.layers[0].layout,se=W.get("line-join").evaluate(s,{}),ue=W.get("line-cap").evaluate(s,{}),me=W.get("line-miter-limit"),Ee=W.get("line-round-limit");this.lineClips=this.lineFeatureClips(s),this.lineFeature=s,this.zOffsetValue=W.get("line-z-offset").value;const Ie=this.layers[0].paint.get("line-width").value;if(Ie.kind!=="constant"&&Ie.isLineProgressConstant===!1&&(this.variableWidthValue=Ie),this.elevationType==="road"){const Re=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(s,u,w,H,se,ue,me,Ee)){const[ze,Xe]=this.clipRuntimeLinesToTile(u,1);for(let ht=0;ht<ze.length;ht++){const ut=ze[ht],mt=Xe[ht],$t={progress:{min:mt.progress.min,max:mt.progress.max},nextDir:this.computeSegNextDir(mt,ut),prevDir:this.computeSegPrevDir(mt,ut)};this.addLine(ut,s,w,se,ue,me,Ee,$t)}this.fillNonElevatedRoadSegment(Re)}}else for(const Re of u)this.addLine(Re,s,w,se,ue,me,Ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,T,I,w,L,void 0,this.worldview)}computeSegNextDir(s,u){return s.nextPoint.sub(u.at(-2)).unit()}computeSegPrevDir(s,u){return u[1].sub(s.prevPoint).unit()}clipLinesToTile(s,u){return O1(s,-u,-u,tn+u,tn+u)}clipRuntimeLinesToTile(s,u){const y=[];return[O1(s,-u,-u,tn+u,tn+u,y),y]}addElevatedRoadFeature(s,u,y,w,T,I,L,H){const W=[],se=it.getElevationFeature(s,w);if(se){const ue=this.clipLinesToTile(u,1),me=this.prepareElevatedLines(ue,se,y);for(const Ee of me)W.push({geometry:Ee,elevation:se,elevationTileID:y,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(W.length===0)return!1;for(const ue of W){const me=this.layoutVertexArray.length;this.addLine(ue.geometry,s,y,T,I,L,H);const Ee=new At(y,ue.elevationTileID);if(ue.elevation)for(let Ie=me;Ie<this.layoutVertexArray.length;Ie++){const Re=new tr(this.layoutVertexArray.int16[6*Ie]>>1,this.layoutVertexArray.int16[6*Ie+1]>>1),ze=Ee.pointElevation(Re,ue.elevation,.05);this.updateHeightRange(ze),this.zOffsetVertexArray.emplaceBack(ze,0,0)}else this.fillNonElevatedRoadSegment(me)}return!0}prepareElevatedLines(s,u,y){if(u.constantHeight!=null)return s;const w=[],T=1/Mt(y);for(const I of s)Z5(I,new _e(u,T),0,w);return w}fillNonElevatedRoadSegment(s){for(let u=s;u<this.layoutVertexArray.length;u++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(s){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,s),this.heightRange.max=Math.max(this.heightRange.max,s)):this.heightRange={min:s,max:s}}addLine(s,u,y,w,T,I,L,H){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const W=w==="none";this.patternJoinNone=this.hasPattern&&W,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const se=H&&H.progress.min>0,ue=H&&H.progress.max<1;if(this.lineClips){let or={min:this.lineClips.start,max:this.lineClips.end},cr=1;if(H){const Yr=this.lineClips.end-this.lineClips.start;or=function(In,nn,gn){return{min:uo(In.min,nn,gn),max:uo(In.max,nn,gn)}}(H.progress,{min:0,max:1},or),Yr>0&&(cr=(or.max-or.min)/Yr)}const Gr=+u.properties.mapbox_clip_feature_len,xr=+u.properties.mapbox_clip_seg_len;if(Number.isNaN(Gr)||Number.isNaN(xr)){for(let In=0;In<s.length-1;In++)this.totalDistance+=s[In].dist(s[In+1]);const Yr=this.totalDistance/(or.max-or.min);this.totalFeatureLength=Number.isFinite(Yr)?Yr:0,this.lineClips.start=or.min,this.lineClips.end=or.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=Gr,this.distance=xr*cr,this.lineClips.start=or.min,this.lineClips.end=or.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const me=SR[u.type]==="Polygon";let Ee=s.length;for(;Ee>=2&&s[Ee-1].equals(s[Ee-2]);)Ee--;let Ie=0;for(;Ie<Ee-1&&s[Ie].equals(s[Ie+1]);)Ie++;if(Ee<(me?3:2))return;w==="bevel"&&(I=1.05);const Re=this.segments.prepareSegment(10*Ee,this.layoutVertexArray,this.indexArray);let ze,Xe,ht,ut,mt,$t,Ut,Ht;H&&H.prevDir&&($t=H.prevDir.perp()),H&&H.nextDir&&(Ut=H.nextDir.perp()),this.e1=this.e2=-1,me&&(ze=s[Ee-2],mt=s[Ie].sub(ze)._unit()._perp());for(let or=Ie;or<Ee;or++){if(ht=or===Ee-1?me?s[Ie+1]:void 0:s[or+1],ht&&s[or].equals(ht))continue;mt&&(ut=mt),ze&&(Xe=ze),ze=s[or],Ht=this.evaluateLineProgressFeatures(Xe?Xe.dist(ze):0),mt=ht?ht.sub(ze)._unit()._perp():ut,ut=ut||mt;const cr=Xe&&ht;let Gr=cr?w:me||W?"butt":T;const xr=ut.x*mt.x+ut.y*mt.y;if(W){const wr=function(Vr){if(Vr.patternJoinNone){const Pn=Vr.segmentPoints.length/2,xn=Vr.lineSoFar-Vr.segmentStart;for(let Ei=0;Ei<Pn;++Ei){const pi=Vr.segmentPoints[2*Ei+1],An=Math.round(Vr.segmentPoints[2*Ei])+.5+.25*pi;Vr.patternVertexArray.emplaceBack(An,xn,Vr.segmentStart),Vr.patternVertexArray.emplaceBack(An,xn,Vr.segmentStart)}Vr.segmentPoints.length=0}Vr.e1=Vr.e2=-1};if(cr&&xr<ER){this.updateDistance(Xe,ze),this.addCurrentVertex(ze,ut,1,1,Re,Ht),wr(this),this.addCurrentVertex(ze,mt,-1,-1,Re,Ht);continue}if(Xe){if(!ht){this.updateDistance(Xe,ze),this.addCurrentVertex(ze,ut,1,1,Re,Ht),wr(this);continue}Gr="miter"}}let Yr=ut.add(mt);Yr.x===0&&Yr.y===0||Yr._unit();const In=Yr.x*mt.x+Yr.y*mt.y,nn=In!==0?1/In:1/0,gn=2*Math.sqrt(2-2*In),En=In<CR&&Xe&&ht,zr=ut.x*mt.y-ut.y*mt.x>0,_n=this.overscaling<=16?15*tn/(512*this.overscaling):0;if(cr&&Gr==="round"){if(nn<L)Gr="miter";else if(nn<=2){const wr=d3(ze,-10,tn+10);Gr=this.elevationType==="offset"&&(wr||this.hasCrossSlope)?"miter":"fakeround"}}if(Gr==="miter"&&nn>I&&(Gr="bevel"),Gr==="bevel"&&(nn>2&&(Gr="flipbevel"),nn<I&&(Gr="miter")),Xe&&!(Gr==="miter"&&En)&&this.updateDistance(Xe,ze),Gr==="miter")if(En){const wr=ze.dist(Xe);if(wr>2*_n){const Pn=ze.sub(ze.sub(Xe)._mult(_n/wr)._round());this.updateDistance(Xe,Pn),this.addCurrentVertex(Pn,ut,0,0,Re,Ht),Xe=Pn}this.updateDistance(Xe,ze),Yr._mult(nn),this.addCurrentVertex(ze,Yr,0,0,Re,Ht);const Vr=ze.dist(ht);if(Vr>2*_n){const Pn=ze.add(ht.sub(ze)._mult(_n/Vr)._round());this.updateDistance(ze,Pn),this.addCurrentVertex(Pn,mt,0,0,Re,Ht),ze=Pn}}else Yr._mult(nn),this.addCurrentVertex(ze,Yr,0,0,Re,Ht);else if(Gr==="flipbevel"){if(nn>100)Yr=mt.mult(-1);else{const wr=nn*ut.add(mt).mag()/ut.sub(mt).mag();Yr._perp()._mult(wr*(zr?-1:1))}this.addCurrentVertex(ze,Yr,0,0,Re,Ht),this.addCurrentVertex(ze,Yr.mult(-1),0,0,Re,Ht)}else if(Gr==="bevel"||Gr==="fakeround"){Ht!=null&&Xe&&this.addCurrentVertex(ze,Ut||ut,-1,-1,Re,Ht);const wr=ze.dist(Xe)<=2*_n&&Gr!=="bevel",Vr=Yr.mult(zr?1:-1);Vr._mult(nn);const Pn=mt.mult(zr?-1:1),xn=ut.mult(zr?-1:1),Ei=this.evaluateLineProgressFeatures(this.distance);if(Ht==null&&(this.addHalfVertex(ze,Vr.x,Vr.y,!1,!zr,0,Re,Ei),wr||this.addHalfVertex(ze,Vr.x+2*xn.x,Vr.y+2*xn.y,!1,zr,0,Re,Ei)),Gr==="fakeround"){const pi=Math.round(180*gn/Math.PI/20);this.addHalfVertex(ze,xn.x,xn.y,!1,zr,0,Re,Ei);for(let An=0;An<pi;An++){let Cn=An/pi;if(Cn!==.5){const ii=Cn-.5;Cn+=Cn*ii*(Cn-1)*((1.0904+xr*(xr*(3.55645-1.43519*xr)-3.2452))*ii*ii+(.848013+xr*(.215638*xr-1.06021)))}const yi=Pn.sub(xn)._mult(Cn)._add(xn)._unit();this.addHalfVertex(ze,yi.x,yi.y,!1,zr,0,Re,Ei)}this.addHalfVertex(ze,Pn.x,Pn.y,!1,zr,0,Re,Ei)}wr||Ht!=null||this.addHalfVertex(ze,Vr.x+2*Pn.x,Vr.y+2*Pn.y,!1,zr,0,Re,Ei),Ht!=null&&ht&&this.addCurrentVertex(ze,$t||mt,1,1,Re,Ht)}else if(Gr==="butt")this.addCurrentVertex(ze,Yr,0,0,Re,Ht);else if(Gr==="square"){if(!Xe){const wr=se?0:-1;this.addCurrentVertex(ze,Yr,wr,wr,Re,Ht)}if(this.addCurrentVertex(ze,Yr,0,0,Re,Ht),Xe){const wr=ue?0:1;this.addCurrentVertex(ze,Yr,wr,wr,Re,Ht)}}else if(Gr==="round"){if(Xe){const wr=!cr&&Ut?Ut:ut;this.addCurrentVertex(ze,wr,0,0,Re,Ht),!cr&&ue||this.addCurrentVertex(ze,wr,1,1,Re,Ht,!0)}if(ht){const wr=!cr&&$t?$t:mt;!cr&&se||this.addCurrentVertex(ze,wr,-1,-1,Re,Ht,!0),this.addCurrentVertex(ze,wr,0,0,Re,Ht)}}}}addVerticesTo(s,u,y,w,T,I,L,H,W,se){const ue=(u.w-s.w)/this.tessellationStep|0;let me=0;const Ee=this.scaledDistance;if(ue>1){this.lineSoFar=s.w;const Re=(u.x-s.x)/ue,ze=(u.y-s.y)/ue,Xe=(u.z-s.z)/ue,ht=(u.w-s.w)/ue;for(let ut=1;ut<ue;++ut){s.x+=Re,s.y+=ze,s.z+=Xe,this.lineSoFar+=ht,me+=ht;const mt=this.evaluateLineProgressFeatures(this.prevDistance+me);this.scaledDistance=(this.prevDistance+me)/this.totalDistance,this.addHalfVertex(s,y,w,se,!1,L,W,mt),this.addHalfVertex(s,T,I,se,!0,-H,W,mt)}}this.lineSoFar=u.w,this.scaledDistance=Ee;const Ie=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,y,w,se,!1,L,W,Ie),this.addHalfVertex(u,T,I,se,!0,-H,W,Ie)}evaluateLineProgressFeatures(s){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+s)/this.totalFeatureLength):Qi(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:u}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}}addCurrentVertex(s,u,y,w,T,I,L=!1){const H=u.x+u.y*y,W=u.y-u.x*y,se=u.y*w-u.x,ue=-u.y-u.x*w;if(I!=null){const me=this.elevationType==="offset",Ee=-10,Ie=tn+10,Re=I.zOffset,ze=new p2(s.x,s.y,Re,this.lineSoFar),Xe=!!me&&d3(s,Ee,Ie),ht=this.lineSoFar,ut=this.distance;if(this.currentVertex)if(Xe){const mt=this.currentVertexIsOutside,$t=this.currentVertex,Ut=new p2(s.x,s.y,Re,this.lineSoFar);if(m2($t,Ut,Ee,Ie),!d3(Ut,Ee,Ie)){if(mt){this.e1=this.e2=-1,this.distance-=$t.dist(ze),this.lineSoFar=$t.w;const Ht=this.evaluateLineProgressFeatures($t.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex($t,H,W,L,!1,y,T,Ht),this.addHalfVertex($t,se,ue,L,!0,-w,T,Ht),this.prevDistance=this.distance}this.distance=this.prevDistance+$t.dist(Ut),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo($t,Ut,H,W,se,ue,y,w,T,L),this.distance=ut,this.scaledDistance=this.distance/this.totalDistance}}else{const mt=this.currentVertex;if(this.currentVertexIsOutside){m2(mt,ze,Ee,Ie),this.e1=this.e2=-1,this.distance-=mt.dist(ze),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=mt.w;const $t=this.evaluateLineProgressFeatures(mt.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(mt,H,W,L,!1,y,T,$t),this.addHalfVertex(mt,se,ue,L,!0,-w,T,$t),this.prevDistance=this.distance,this.distance=ut,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(mt,ze,H,W,se,ue,y,w,T,L)}else Xe||(this.addHalfVertex(s,H,W,L,!1,y,T,I),this.addHalfVertex(s,se,ue,L,!0,-w,T,I));this.currentVertex=ze,this.currentVertexIsOutside=Xe,this.lineSoFar=ht}else this.addHalfVertex(s,H,W,L,!1,y,T,I),this.addHalfVertex(s,se,ue,L,!0,-w,T,I)}addHalfVertex({x:s,y:u},y,w,T,I,L,H,W){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),I||this.segmentPoints.push(this.lineSoFar-this.segmentStart,L)),this.layoutVertexArray.emplaceBack((s<<1)+(T?1:0),(u<<1)+(I?1:0),Math.round(63*y)+128,Math.round(63*w)+128,1+(L===0?0:L<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const ue=at(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,ue)}const se=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,se),H.primitiveLength++),I?this.e2=se:this.e1=se,W!=null&&this.zOffsetVertexArray.emplaceBack(W.zOffset,W.variableWidth,W.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(s,u){this.prevDistance=this.distance,this.distance+=s.dist(u),this.updateScaledDistance()}}function d3(d,s,u){return d.x<s||d.x>u||d.y<s||d.y>u}let LB,kB;function OB(d,s,u){return s*(tn/(d.tileSize*Math.pow(2,u-d.tileID.overscaledZ)))}Xn(f3,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const DB=(d,s,u)=>(1-u)*d+u*s;function RB(d,s){return 1/OB(d,1,s.tileZoom)}function NB(d,s,u,y){return d.translatePosMatrix(y||s.tileID.projMatrix,s,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const jB=d=>{const s=[];UB(d)&&s.push("RENDER_LINE_DASH"),d.paint.get("line-gradient")&&s.push("RENDER_LINE_GRADIENT");const u=d.paint.get("line-trim-offset");u[0]===0&&u[1]===0||s.push("RENDER_LINE_TRIM_OFFSET"),d.paint.get("line-border-width").constantOr(1)!==0&&s.push("RENDER_LINE_BORDER");const y=d.layout.get("line-join").constantOr("miter")==="none",w=!!d.paint.get("line-pattern").constantOr(1);return y&&w&&s.push("LINE_JOIN_NONE"),s};function UB(d){const s=d.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}let p3;const zB=()=>p3||(p3={layout:LB||(LB=new Po({"line-cap":new Jn(Ar.layout_line["line-cap"]),"line-join":new Jn(Ar.layout_line["line-join"]),"line-miter-limit":new mn(Ar.layout_line["line-miter-limit"]),"line-round-limit":new mn(Ar.layout_line["line-round-limit"]),"line-sort-key":new Jn(Ar.layout_line["line-sort-key"]),"line-z-offset":new Jn(Ar.layout_line["line-z-offset"]),"line-elevation-reference":new mn(Ar.layout_line["line-elevation-reference"]),"line-cross-slope":new mn(Ar.layout_line["line-cross-slope"]),visibility:new mn(Ar.layout_line.visibility),"line-width-unit":new mn(Ar.layout_line["line-width-unit"])})),paint:kB||(kB=new Po({"line-opacity":new Jn(Ar.paint_line["line-opacity"]),"line-color":new Jn(Ar.paint_line["line-color"]),"line-translate":new mn(Ar.paint_line["line-translate"]),"line-translate-anchor":new mn(Ar.paint_line["line-translate-anchor"]),"line-width":new Jn(Ar.paint_line["line-width"]),"line-gap-width":new Jn(Ar.paint_line["line-gap-width"]),"line-offset":new Jn(Ar.paint_line["line-offset"]),"line-blur":new Jn(Ar.paint_line["line-blur"]),"line-dasharray":new Jn(Ar.paint_line["line-dasharray"]),"line-pattern":new Jn(Ar.paint_line["line-pattern"]),"line-pattern-cross-fade":new mn(Ar.paint_line["line-pattern-cross-fade"]),"line-gradient":new Nu(Ar.paint_line["line-gradient"]),"line-trim-offset":new mn(Ar.paint_line["line-trim-offset"]),"line-trim-fade-range":new mn(Ar.paint_line["line-trim-fade-range"]),"line-trim-color":new mn(Ar.paint_line["line-trim-color"]),"line-emissive-strength":new mn(Ar.paint_line["line-emissive-strength"]),"line-border-width":new Jn(Ar.paint_line["line-border-width"]),"line-border-color":new Jn(Ar.paint_line["line-border-color"]),"line-occlusion-opacity":new mn(Ar.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},p3);class BR extends Jn{possiblyEvaluate(s,u){return u=new Ao(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition,worldview:u.worldview}),super.possiblyEvaluate(s,u)}evaluate(s,u,y,w){return u=nr({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,y,w)}}let b_;function HB(d,s){return s>0?s+2*d:d}const TR=Gs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),IR=Gs([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),MR=Gs([{name:"a_projected_pos",components:4,type:"Float32"}],4);Gs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const FR=Gs([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),PR=Gs([{name:"a_x_axis",components:3,type:"Float32"},{name:"a_y_axis",components:3,type:"Float32"}]),LR=Gs([{name:"a_texb",components:2,type:"Uint16"}]),kR=Gs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),OR=Gs([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Gs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const QB=Gs([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),DR=Gs([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Gs([{name:"triangle",components:3,type:"Uint16"}]),Gs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Gs([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),Gs([{type:"Float32",name:"offsetX"}]),Gs([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var hu=24;function RR(d,s,u){return d.sections.forEach(y=>{y.text=function(w,T,I){const L=T.layout.get("text-transform").evaluate(I,{});return L==="uppercase"?w=w.toLocaleUpperCase():L==="lowercase"&&(w=w.toLocaleLowerCase()),Du.applyArabicShaping&&(w=Du.applyArabicShaping(w)),w}(y.text,s,u)}),d}const x_={"!":"ï¸","#":"ï¼",$:"ï¼","%":"ï¼","&":"ï¼","(":"ï¸µ",")":"ï¸¶","*":"ï¼","+":"ï¼",",":"ï¸","-":"ï¸²",".":"ã»","/":"ï¼",":":"ï¸",";":"ï¸","<":"ï¸¿","=":"ï¼",">":"ï¹","?":"ï¸","@":"ï¼ ","[":"ï¹","\\":"ï¼¼","]":"ï¹","^":"ï¼¾",_:"ï¸³","`":"ï½","{":"ï¸·","|":"â","}":"ï¸¸","~":"ï½","Â¢":"ï¿ ","Â£":"ï¿¡","Â¥":"ï¿¥","Â¦":"ï¿¤","Â¬":"ï¿¢","Â¯":"ï¿£","â":"ï¸²","â":"ï¸±","â":"ï¹","â":"ï¹","â":"ï¹","â":"ï¹","â¦":"ï¸","â§":"ã»","â©":"ï¿¦","ã":"ï¸","ã":"ï¸","ã":"ï¸¿","ã":"ï¹","ã":"ï¸½","ã":"ï¸¾","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¸»","ã":"ï¸¼","ã":"ï¸¹","ã":"ï¸º","ã":"ï¸","ã":"ï¸","ï¼":"ï¸","ï¼":"ï¸µ","ï¼":"ï¸¶","ï¼":"ï¸","ï¼":"ï¸²","ï¼":"ã»","ï¼":"ï¸","ï¼":"ï¸","ï¼":"ï¸¿","ï¼":"ï¹","ï¼":"ï¸","ï¼»":"ï¹","ï¼½":"ï¹","ï¼¿":"ï¸³","ï½":"ï¸·","ï½":"â","ï½":"ï¸¸","ï½":"ï¸µ","ï½ ":"ï¸¶","ï½¡":"ï¸","ï½¢":"ï¹","ï½£":"ï¹","â":"â","â":"â"};function NR(d){return d==="ï¸¶"||d==="ï¹"||d==="ï¸¸"||d==="ï¹"||d==="ï¹"||d==="ï¸¾"||d==="ï¸¼"||d==="ï¸º"||d==="ï¸"||d==="ï¹"||d==="ï¸"||d==="ï¸"||d==="ï¸"||d==="ï½"||d==="ï¿£"||d==="ï¸"||d==="ï¸"}function jR(d){return d==="ï¸µ"||d==="ï¹"||d==="ï¸·"||d==="ï¹"||d==="ï¹"||d==="ï¸½"||d==="ï¸»"||d==="ï¸¹"||d==="ï¸"||d==="ï¸¿"}const A3=4294967296,VB=1/A3,GB=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");let F2=class{constructor(d=new Uint8Array(16)){this.buf=ArrayBuffer.isView(d)?d:new Uint8Array(d),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(d,s,u=this.length){for(;this.pos<u;){const y=this.readVarint(),w=y>>3,T=this.pos;this.type=7&y,d(w,s,this),this.pos===T&&this.skip(y)}return s}readMessage(d,s){return this.readFields(d,s,this.readVarint()+this.pos)}readFixed32(){const d=this.dataView.getUint32(this.pos,!0);return this.pos+=4,d}readSFixed32(){const d=this.dataView.getInt32(this.pos,!0);return this.pos+=4,d}readFixed64(){const d=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*A3;return this.pos+=8,d}readSFixed64(){const d=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*A3;return this.pos+=8,d}readFloat(){const d=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,d}readDouble(){const d=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,d}readVarint(d){const s=this.buf;let u,y;return y=s[this.pos++],u=127&y,y<128?u:(y=s[this.pos++],u|=(127&y)<<7,y<128?u:(y=s[this.pos++],u|=(127&y)<<14,y<128?u:(y=s[this.pos++],u|=(127&y)<<21,y<128?u:(y=s[this.pos],u|=(15&y)<<28,function(w,T,I){const L=I.buf;let H,W;if(W=L[I.pos++],H=(112&W)>>4,W<128||(W=L[I.pos++],H|=(127&W)<<3,W<128)||(W=L[I.pos++],H|=(127&W)<<10,W<128)||(W=L[I.pos++],H|=(127&W)<<17,W<128)||(W=L[I.pos++],H|=(127&W)<<24,W<128)||(W=L[I.pos++],H|=(1&W)<<31,W<128))return z1(w,H,T);throw new Error("Expected varint not more than 10 bytes")}(u,d,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const d=this.readVarint();return d%2==1?(d+1)/-2:d/2}readBoolean(){return!!this.readVarint()}readString(){const d=this.readVarint()+this.pos,s=this.pos;return this.pos=d,d-s>=12&&GB?GB.decode(this.buf.subarray(s,d)):function(u,y,w){let T="",I=y;for(;I<w;){const L=u[I];let H,W,se,ue=null,me=L>239?4:L>223?3:L>191?2:1;if(I+me>w)break;me===1?L<128&&(ue=L):me===2?(H=u[I+1],(192&H)==128&&(ue=(31&L)<<6|63&H,ue<=127&&(ue=null))):me===3?(H=u[I+1],W=u[I+2],(192&H)==128&&(192&W)==128&&(ue=(15&L)<<12|(63&H)<<6|63&W,(ue<=2047||ue>=55296&&ue<=57343)&&(ue=null))):me===4&&(H=u[I+1],W=u[I+2],se=u[I+3],(192&H)==128&&(192&W)==128&&(192&se)==128&&(ue=(15&L)<<18|(63&H)<<12|(63&W)<<6|63&se,(ue<=65535||ue>=1114112)&&(ue=null))),ue===null?(ue=65533,me=1):ue>65535&&(ue-=65536,T+=String.fromCharCode(ue>>>10&1023|55296),ue=56320|1023&ue),T+=String.fromCharCode(ue),I+=me}return T}(this.buf,s,d)}readBytes(){const d=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,d);return this.pos=d,s}readPackedVarint(d=[],s){const u=this.readPackedEnd();for(;this.pos<u;)d.push(this.readVarint(s));return d}readPackedSVarint(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readSVarint());return d}readPackedBoolean(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readBoolean());return d}readPackedFloat(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readFloat());return d}readPackedDouble(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readDouble());return d}readPackedFixed32(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readFixed32());return d}readPackedSFixed32(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readSFixed32());return d}readPackedFixed64(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readFixed64());return d}readPackedSFixed64(d=[]){const s=this.readPackedEnd();for(;this.pos<s;)d.push(this.readSFixed64());return d}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(d){const s=7&d;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(d,s){this.writeVarint(d<<3|s)}realloc(d){let s=this.length||16;for(;s<this.pos+d;)s*=2;if(s!==this.length){const u=new Uint8Array(s);u.set(this.buf),this.buf=u,this.dataView=new DataView(u.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(d){this.realloc(4),this.dataView.setInt32(this.pos,d,!0),this.pos+=4}writeSFixed32(d){this.realloc(4),this.dataView.setInt32(this.pos,d,!0),this.pos+=4}writeFixed64(d){this.realloc(8),this.dataView.setInt32(this.pos,-1&d,!0),this.dataView.setInt32(this.pos+4,Math.floor(d*VB),!0),this.pos+=8}writeSFixed64(d){this.realloc(8),this.dataView.setInt32(this.pos,-1&d,!0),this.dataView.setInt32(this.pos+4,Math.floor(d*VB),!0),this.pos+=8}writeVarint(d){(d=+d||0)>268435455||d<0?function(s,u){let y,w;if(s>=0?(y=s%4294967296|0,w=s/4294967296|0):(y=~(-s%4294967296),w=~(-s/4294967296),4294967295^y?y=y+1|0:(y=0,w=w+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(T,I,L){L.buf[L.pos++]=127&T|128,T>>>=7,L.buf[L.pos++]=127&T|128,T>>>=7,L.buf[L.pos++]=127&T|128,T>>>=7,L.buf[L.pos++]=127&T|128,L.buf[L.pos]=127&(T>>>=7)}(y,0,u),function(T,I){const L=(7&T)<<4;I.buf[I.pos++]|=L|((T>>>=3)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T|((T>>>=7)?128:0),T&&(I.buf[I.pos++]=127&T)))))}(w,u)}(d,this):(this.realloc(4),this.buf[this.pos++]=127&d|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=d>>>7&127))))}writeSVarint(d){this.writeVarint(d<0?2*-d-1:2*d)}writeBoolean(d){this.writeVarint(+d)}writeString(d){d=String(d),this.realloc(4*d.length),this.pos++;const s=this.pos;this.pos=function(y,w,T){for(let I,L,H=0;H<w.length;H++){if(I=w.charCodeAt(H),I>55295&&I<57344){if(!L){I>56319||H+1===w.length?(y[T++]=239,y[T++]=191,y[T++]=189):L=I;continue}if(I<56320){y[T++]=239,y[T++]=191,y[T++]=189,L=I;continue}I=L-55296<<10|I-56320|65536,L=null}else L&&(y[T++]=239,y[T++]=191,y[T++]=189,L=null);I<128?y[T++]=I:(I<2048?y[T++]=I>>6|192:(I<65536?y[T++]=I>>12|224:(y[T++]=I>>18|240,y[T++]=I>>12&63|128),y[T++]=I>>6&63|128),y[T++]=63&I|128)}return T}(this.buf,d,this.pos);const u=this.pos-s;u>=128&&WB(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u}writeFloat(d){this.realloc(4),this.dataView.setFloat32(this.pos,d,!0),this.pos+=4}writeDouble(d){this.realloc(8),this.dataView.setFloat64(this.pos,d,!0),this.pos+=8}writeBytes(d){const s=d.length;this.writeVarint(s),this.realloc(s);for(let u=0;u<s;u++)this.buf[this.pos++]=d[u]}writeRawMessage(d,s){this.pos++;const u=this.pos;d(s,this);const y=this.pos-u;y>=128&&WB(u,y,this),this.pos=u-1,this.writeVarint(y),this.pos+=y}writeMessage(d,s,u){this.writeTag(d,2),this.writeRawMessage(s,u)}writePackedVarint(d,s){s.length&&this.writeMessage(d,UR,s)}writePackedSVarint(d,s){s.length&&this.writeMessage(d,zR,s)}writePackedBoolean(d,s){s.length&&this.writeMessage(d,VR,s)}writePackedFloat(d,s){s.length&&this.writeMessage(d,HR,s)}writePackedDouble(d,s){s.length&&this.writeMessage(d,QR,s)}writePackedFixed32(d,s){s.length&&this.writeMessage(d,GR,s)}writePackedSFixed32(d,s){s.length&&this.writeMessage(d,WR,s)}writePackedFixed64(d,s){s.length&&this.writeMessage(d,$R,s)}writePackedSFixed64(d,s){s.length&&this.writeMessage(d,KR,s)}writeBytesField(d,s){this.writeTag(d,2),this.writeBytes(s)}writeFixed32Field(d,s){this.writeTag(d,5),this.writeFixed32(s)}writeSFixed32Field(d,s){this.writeTag(d,5),this.writeSFixed32(s)}writeFixed64Field(d,s){this.writeTag(d,1),this.writeFixed64(s)}writeSFixed64Field(d,s){this.writeTag(d,1),this.writeSFixed64(s)}writeVarintField(d,s){this.writeTag(d,0),this.writeVarint(s)}writeSVarintField(d,s){this.writeTag(d,0),this.writeSVarint(s)}writeStringField(d,s){this.writeTag(d,2),this.writeString(s)}writeFloatField(d,s){this.writeTag(d,5),this.writeFloat(s)}writeDoubleField(d,s){this.writeTag(d,1),this.writeDouble(s)}writeBooleanField(d,s){this.writeVarintField(d,+s)}};function z1(d,s,u){return u?4294967296*s+(d>>>0):4294967296*(s>>>0)+(d>>>0)}function WB(d,s,u){const y=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));u.realloc(y);for(let w=u.pos-1;w>=d;w--)u.buf[w+y]=u.buf[w]}function UR(d,s){for(let u=0;u<d.length;u++)s.writeVarint(d[u])}function zR(d,s){for(let u=0;u<d.length;u++)s.writeSVarint(d[u])}function HR(d,s){for(let u=0;u<d.length;u++)s.writeFloat(d[u])}function QR(d,s){for(let u=0;u<d.length;u++)s.writeDouble(d[u])}function VR(d,s){for(let u=0;u<d.length;u++)s.writeBoolean(d[u])}function GR(d,s){for(let u=0;u<d.length;u++)s.writeFixed32(d[u])}function WR(d,s){for(let u=0;u<d.length;u++)s.writeSFixed32(d[u])}function $R(d,s){for(let u=0;u<d.length;u++)s.writeFixed64(d[u])}function KR(d,s){for(let u=0;u<d.length;u++)s.writeSFixed64(d[u])}const m3=3;function qR(d,s,u){s.glyphs=[],d===1&&u.readMessage(YR,s)}function YR(d,s,u){if(d===3){const{id:y,bitmap:w,width:T,height:I,left:L,top:H,advance:W}=u.readMessage(XR,{});s.glyphs.push({id:y,bitmap:new WA({width:T+2*m3,height:I+2*m3},w),metrics:{width:T,height:I,left:L,top:H,advance:W}})}else d===4?s.ascender=u.readSVarint():d===5&&(s.descender=u.readSVarint())}function XR(d,s,u){d===1?s.id=u.readVarint():d===2?s.bitmap=u.readBytes():d===3?s.width=u.readVarint():d===4?s.height=u.readVarint():d===5?s.left=u.readSVarint():d===6?s.top=u.readSVarint():d===7&&(s.advance=u.readVarint())}const $B=m3,Gf={horizontal:1,vertical:2,horizontalOnly:3};class w_{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(s,u){const y=new w_;return y.scale=s||1,y.fontStack=u,y}static forImage(s){const u=new w_;return u.image=s,u}}class H1{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u,y){const w=new H1;for(let T=0;T<s.sections.length;T++){const I=s.sections[T];I.image?w.addImageSection(I,y):w.addTextSection(I,u)}return w}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCodePoint(s){return this.text.codePointAt(s)}verticalizePunctuation(s){this.text=function(u,y){let w="";for(let T=0;T<u.length;T++){const I=u.charCodeAt(T+1)||null,L=u.charCodeAt(T-1)||null;w+=!y&&(I&&yh(I)&&!x_[u[T+1]]||L&&yh(L)&&!x_[u[T-1]])||!x_[u[T]]?u[T]:x_[u[T]]}return w}(this.text,s)}trim(){let s=0;for(let y=0;y<this.text.length&&P2[this.text.charCodeAt(y)];y++)s++;let u=this.text.length;for(let y=this.text.length-1;y>=0&&y>=s&&P2[this.text.charCodeAt(y)];y--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){const y=new H1;return y.text=this.text.substring(s,u),y.sectionIndex=this.sectionIndex.slice(s,u),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}addTextSection(s,u){this.text+=s.text,this.sections.push(w_.forText(s.scale,s.fontStack||u));const y=this.sections.length-1;for(let w=0;w<s.text.length;++w)this.sectionIndex.push(y)}addImageSection(s,u){const y=s.image?s.image.getPrimary():null;if(!y)return void Qi("Can't add FormattedSection with an empty image.");y.scaleSelf(u);const w=this.getNextImageSectionCharCode();w?(this.text+=String.fromCodePoint(w),this.sections.push(w_.forImage(y)),this.sectionIndex.push(this.sections.length-1)):Qi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function g3(d,s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re=1){const ze=H1.fromFeature(d,w,Re);ue===Gf.vertical&&ze.verticalizePunctuation(me);let Xe=[];const ht=function(Ht,or,cr,Gr,xr,Yr){if(!Ht)return[];const In=[],nn=function(_n,wr,Vr,Pn,xn,Ei){let pi=0;for(let An=0;An<_n.length();An++){const Cn=_n.getSection(An);pi+=KB(_n.getCodePoint(An),Cn,Pn,xn,wr,Ei)}return pi/Math.max(1,Math.ceil(pi/Vr))}(Ht,or,cr,Gr,xr,Yr),gn=Ht.text.indexOf("â")>=0;let En=0;for(let _n=0;_n<Ht.length();_n++){const wr=Ht.getSection(_n),Vr=Ht.getCodePoint(_n);if(P2[Vr]||(En+=KB(Vr,wr,Gr,xr,or,Yr)),_n<Ht.length()-1){const Pn=!((zr=Vr)<11904||!(Mi["Bopomofo Extended"](zr)||Mi.Bopomofo(zr)||Mi["CJK Compatibility Forms"](zr)||Mi["CJK Compatibility Ideographs"](zr)||Mi["CJK Compatibility"](zr)||Mi["CJK Radicals Supplement"](zr)||Mi["CJK Strokes"](zr)||Mi["CJK Symbols and Punctuation"](zr)||Mi["CJK Unified Ideographs Extension A"](zr)||Mi["CJK Unified Ideographs"](zr)||Mi["Enclosed CJK Letters and Months"](zr)||Mi["Halfwidth and Fullwidth Forms"](zr)||Mi.Hiragana(zr)||Mi["Ideographic Description Characters"](zr)||Mi["Kangxi Radicals"](zr)||Mi["Katakana Phonetic Extensions"](zr)||Mi.Katakana(zr)||Mi["Vertical Forms"](zr)||Mi["Yi Radicals"](zr)||Mi["Yi Syllables"](zr)));(ZR[Vr]||Pn||wr.image)&&In.push(YB(_n+1,En,nn,In,JR(Vr,Ht.getCodePoint(_n+1),Pn&&gn),!1))}}var zr;return XB(YB(Ht.length(),En,nn,In,0,!0))}(ze,W,T,s,y,Ee),{processBidirectionalText:ut,processStyledBidirectionalText:mt}=Du;if(ut&&ze.sections.length===1){const Ht=ut(ze.toString(),ht);for(const or of Ht){const cr=new H1;cr.text=or,cr.sections=ze.sections;for(let Gr=0;Gr<or.length;Gr++)cr.sectionIndex.push(0);Xe.push(cr)}}else if(mt){const Ht=mt(ze.text,ze.sectionIndex,ht);for(const or of Ht){const cr=new H1;cr.text=or[0],cr.sectionIndex=or[1],cr.sections=ze.sections,Xe.push(cr)}}else Xe=function(Ht,or){const cr=[],Gr=Ht.text;let xr=0;for(const Yr of or)cr.push(Ht.substring(xr,Yr)),xr=Yr;return xr<Gr.length&&cr.push(Ht.substring(xr,Gr.length)),cr}(ze,ht);const $t=[],Ut={positionedLines:$t,text:ze.toString(),top:se[1],bottom:se[1],left:se[0],right:se[0],writingMode:ue,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Ht,or,cr,Gr,xr,Yr,In,nn,gn,En,zr,_n){let wr=0,Vr=0,Pn=0;const xn=nn==="right"?1:nn==="left"?0:.5;let Ei=!1;for(const Rn of xr){const oi=Rn.getSections();for(const Ui of oi){if(Ui.image)continue;const ts=or[Ui.fontStack];if(ts&&(Ei=ts.ascender!==void 0&&ts.descender!==void 0,!Ei))break}if(!Ei)break}let pi=0;for(const Rn of xr){Rn.trim();const oi=Rn.getMaxScale(),Ui=(oi-1)*hu,ts={positionedGlyphs:[],lineOffset:0};Ht.positionedLines[pi]=ts;const Es=ts.positionedGlyphs;let gs=0;if(!Rn.length()){Vr+=Yr,++pi;continue}let Xs=0,Ds=0;for(let wt=0;wt<Rn.length();wt++){const St=Rn.getSection(wt),Rr=Rn.getSectionIndex(wt),Ln=Rn.getCodePoint(wt);let Kn=St.scale,$n=null,gi=null,Yi=null,$s=hu,Ks=0,Ps=gn;Ps===Gf.vertical&&((An=Ln)===12312||An===12313||An===12316||An===12540||An===12448)&&(Ps=Gf.horizontal);const qo=!(Ps===Gf.horizontal||!zr&&!nh(Ln)||zr&&(P2[Ln]||yp(Ln)));if(St.image){const tl=Gr.get(St.image.toString());if(!tl)continue;Yi=St.image,Ht.iconsInText=Ht.iconsInText||!0,gi=tl.paddedRect;const Ts=tl.displaySize;Kn=Kn*hu/_n,$n={width:Ts[0],height:Ts[1],left:0,top:-$B,advance:qo?Ts[1]:Ts[0],localGlyph:!1},Ks=Ei?-$n.height*Kn:oi*hu-17-Ts[1]*Kn,$s=$n.advance;const Ta=(qo?Ts[0]:Ts[1])*Kn-hu*oi;Ta>0&&Ta>gs&&(gs=Ta)}else{const tl=cr[St.fontStack];if(!tl)continue;tl[Ln]&&(gi=tl[Ln]);const Ts=or[St.fontStack];if(!Ts)continue;const Ta=Ts.glyphs[Ln];if(!Ta)continue;if($n=Ta.metrics,$s=Ln!==8203?hu:0,Ei){const ha=Ts.ascender!==void 0?Math.abs(Ts.ascender):0,Mo=Ts.descender!==void 0?Math.abs(Ts.descender):0,Ka=(ha+Mo)*Kn;Xs<Ka&&(Xs=Ka,Ds=(ha-Mo)/2*Kn),Ks=-ha*Kn}else Ks=(oi-Kn)*hu-17}qo?(Ht.verticalizable=!0,Es.push({glyph:Ln,image:Yi,x:wr,y:Vr+Ks,vertical:qo,scale:Kn,localGlyph:$n.localGlyph,fontStack:St.fontStack,sectionIndex:Rr,metrics:$n,rect:gi}),wr+=$s*Kn+En):(Es.push({glyph:Ln,image:Yi,x:wr,y:Vr+Ks,vertical:qo,scale:Kn,localGlyph:$n.localGlyph,fontStack:St.fontStack,sectionIndex:Rr,metrics:$n,rect:gi}),wr+=$n.advance*Kn+En)}Es.length!==0&&(Pn=Math.max(wr-En,Pn),Ei?ZB(Es,xn,gs,Ds,Yr*oi/2):ZB(Es,xn,gs,0,Yr/2)),wr=0;const ya=Yr*oi+gs;ts.lineOffset=Math.max(gs,Ui),Vr+=ya,++pi}var An;const Cn=Vr,{horizontalAlign:yi,verticalAlign:ii}=y3(In);(function(Rn,oi,Ui,ts,Es,gs){const Xs=(oi-Ui)*Es,Ds=-gs*ts;for(const ya of Rn)for(const wt of ya.positionedGlyphs)wt.x+=Xs,wt.y+=Ds})(Ht.positionedLines,xn,yi,ii,Pn,Cn),Ht.top+=-ii*Cn,Ht.bottom=Ht.top+Cn,Ht.left+=-yi*Pn,Ht.right=Ht.left+Pn,Ht.hasBaseline=Ei}(Ut,s,u,y,Xe,I,L,H,ue,W,me,Ie),!function(Ht){for(const or of Ht)if(or.positionedGlyphs.length!==0)return!1;return!0}($t))return Ut}const P2={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ZR={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function KB(d,s,u,y,w,T){if(s.image){const I=y.get(s.image.toString());return I?I.displaySize[0]*s.scale*hu/T+w:0}{const I=u[s.fontStack],L=I&&I.glyphs[d];return L?L.metrics.advance*s.scale+w:0}}function qB(d,s,u,y){const w=Math.pow(d-s,2);return y?d<s?w/2:2*w:w+Math.abs(u)*u}function JR(d,s,u){let y=0;return d===10&&(y-=1e4),u&&(y+=150),d!==40&&d!==65288||(y+=50),s!==41&&s!==65289||(y+=50),y}function YB(d,s,u,y,w,T){let I=null,L=qB(s,u,w,T);for(const H of y){const W=qB(s-H.x,u,w,T)+H.badness;W<=L&&(I=H,L=W)}return{index:d,x:s,priorBreak:I,badness:L}}function XB(d){return d?XB(d.priorBreak).concat(d.index):[]}function y3(d){let s=.5,u=.5;switch(d){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function ZB(d,s,u,y,w){if(!(s||u||y||w))return;const T=d.length-1,I=d[T],L=(I.x+I.metrics.advance*I.scale)*s;for(let H=0;H<=T;H++)d[H].x-=L,d[H].y+=u+y+w}function JB(d){return d.imagePrimary!==void 0&&d.top!==void 0&&d.bottom!==void 0&&d.left!==void 0&&d.right!==void 0}function e7(d,s,u,y){const{horizontalAlign:w,verticalAlign:T}=y3(y),I=u[0]-d.displaySize[0]*w,L=u[1]-d.displaySize[1]*T;return{imagePrimary:d,imageSecondary:s,top:L,bottom:L+d.displaySize[1],left:I,right:I+d.displaySize[0]}}function eT(d,s,u,y,w,T){const I=d.imagePrimary;let L;if(I.content){const ze=I.content,Xe=I.pixelRatio||1;L=[ze[0]/Xe,ze[1]/Xe,I.displaySize[0]-ze[2]/Xe,I.displaySize[1]-ze[3]/Xe]}const H=s.left*T,W=s.right*T;let se,ue,me,Ee;u==="width"||u==="both"?(Ee=w[0]+H-y[3],ue=w[0]+W+y[1]):(Ee=w[0]+(H+W-I.displaySize[0])/2,ue=Ee+I.displaySize[0]);const Ie=s.top*T,Re=s.bottom*T;return u==="height"||u==="both"?(se=w[1]+Ie-y[0],me=w[1]+Re+y[2]):(se=w[1]+(Ie+Re-I.displaySize[1])/2,me=se+I.displaySize[1]),{imagePrimary:I,imageSecondary:void 0,top:se,right:ue,bottom:me,left:Ee,collisionPadding:L}}function tT(d){return!d.imagePrimary.stretchX}function rT(d){return!d.imagePrimary.stretchY}function nT(d){return{width:d.right-d.left,height:d.bottom-d.top}}const JA=128;function iT(d,s,u){const{expression:y}=s;if(y.kind==="constant")return{kind:"constant",layoutSize:y.evaluate(new Ao(d+1,{worldview:u}))};if(y.kind==="source")return{kind:"source"};{const{zoomStops:w,interpolationType:T}=y;let I=0;for(;I<w.length&&w[I]<=d;)I++;I=Math.max(0,I-1);let L=I;for(;L<w.length&&w[L]<d+1;)L++;L=Math.min(w.length-1,L);const H=w[I],W=w[L];return y.kind==="composite"?{kind:"composite",minZoom:H,maxZoom:W,interpolationType:T}:{kind:"camera",minZoom:H,maxZoom:W,minSize:y.evaluate(new Ao(H,{worldview:u})),maxSize:y.evaluate(new Ao(W,{worldview:u})),interpolationType:T}}}function _3(d,{uSize:s,uSizeT:u},{lowerSize:y,upperSize:w}){return d.kind==="source"?y/JA:d.kind==="composite"?at(y/JA,w/JA,u):s}function S_(d,s,u=1){let y=0,w=0;if(d.kind==="constant")w=d.layoutSize*u;else if(d.kind!=="source"){const{interpolationType:T,minZoom:I,maxZoom:L}=d,H=T?nt(Cl.interpolationFactor(T,s,I,L),0,1):0;d.kind==="camera"?w=at(d.minSize,d.maxSize,H)*u:y=H*u}return{uSizeT:y,uSize:w}}class Mm extends tr{constructor(s,u,y,w,T){super(s,u),this.angle=w,this.z=y,T!==void 0&&(this.segment=T)}clone(){return new Mm(this.x,this.y,this.z,this.angle,this.segment)}}function sT(d,s,u,y,w){if(s.segment===void 0)return!0;let T=s,I=s.segment+1,L=0;for(;L>-u/2;){if(I--,I<0)return!1;L-=d[I].dist(T),T=d[I]}L+=d[I].dist(d[I+1]),I++;const H=[];let W=0;for(;L<u/2;){const se=d[I],ue=d[I+1];if(!ue)return!1;let me=d[I-1].angleTo(se)-se.angleTo(ue);for(me=Math.abs((me+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:L,angleDelta:me}),W+=me;L-H[0].distance>y;)W-=H.shift().angleDelta;if(W>w)return!1;I++,L+=se.dist(ue)}return!0}function oT(d){let s=0;for(let u=0;u<d.length-1;u++)s+=d[u].dist(d[u+1]);return s}function aT(d,s,u){return d?.6*s*u:0}function lT(d,s){return Math.max(d?d.right-d.left:0,s?s.right-s.left:0)}function t7(d,s,u,y,w,T){const I=aT(u,w,T),L=lT(u,y)*T;let H=0;const W=oT(d)/2;for(let se=0;se<d.length-1;se++){const ue=d[se],me=d[se+1],Ee=ue.dist(me);if(H+Ee>W){const Ie=(W-H)/Ee,Re=at(ue.x,me.x,Ie),ze=at(ue.y,me.y,Ie),Xe=new Mm(Re,ze,0,me.angleTo(ue),se);return!I||sT(d,Xe,L,I,s)?Xe:void 0}H+=Ee}}function r7(d,s,u,y,w,T,I,L,H){const W=aT(y,T,I),se=lT(y,w),ue=se*I,me=d[0].x===0||d[0].x===H||d[0].y===0||d[0].y===H;return s-ue<s/4&&(s=ue+s/4),cT(d,me?s/2*L%s:(se/2+2*T)*I*L%s,s,W,u,ue,me,!1,H)}function cT(d,s,u,y,w,T,I,L,H){const W=T/2,se=oT(d);let ue=0,me=s-u,Ee=[];for(let Ie=0;Ie<d.length-1;Ie++){const Re=d[Ie],ze=d[Ie+1],Xe=Re.dist(ze),ht=ze.angleTo(Re);for(;me+u<ue+Xe;){me+=u;const ut=(me-ue)/Xe,mt=at(Re.x,ze.x,ut),$t=at(Re.y,ze.y,ut);if(mt>=0&&mt<H&&$t>=0&&$t<H&&me-W>=0&&me+W<=se){const Ut=new Mm(mt,$t,0,ht,Ie);y&&!sT(d,Ut,T,y,w)||Ee.push(Ut)}}ue+=Xe}return L||Ee.length||I||(Ee=cT(d,ue/2,u,y,w,T,I,!0,H)),Ee}function uT(d){let s=0,u=0;for(const I of d)s+=I.w*I.h,u=Math.max(u,I.w);d.sort((I,L)=>L.h-I.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}];let w=0,T=0;for(const I of d)for(let L=y.length-1;L>=0;L--){const H=y[L];if(!(I.w>H.w||I.h>H.h)){if(I.x=H.x,I.y=H.y,T=Math.max(T,I.y+I.h),w=Math.max(w,I.x+I.w),I.w===H.w&&I.h===H.h){const W=y.pop();W&&L<y.length&&(y[L]=W)}else I.h===H.h?(H.x+=I.w,H.w-=I.w):I.w===H.w?(H.y+=I.h,H.h-=I.h):(y.push({x:H.x+I.w,y:H.y,w:H.w-I.w,h:I.h}),H.y+=I.h,H.h-=I.h);break}}return{w,h:T,fill:s/(w*T)||0}}Xn(Mm,"Anchor");const T0=1;class C_{static getImagePositionScale(s,u,y){if(u&&s&&s.options&&s.options.transform){const w=s.options.transform;return{x:w.a,y:w.d}}return{x:y,y}}constructor(s,u,y,w){this.paddedRect=s;const{pixelRatio:T,version:I,stretchX:L,stretchY:H,content:W,sdf:se,usvg:ue}=u;this.pixelRatio=T,this.stretchX=L,this.stretchY=H,this.content=W,this.version=I,this.padding=y,this.sdf=se,this.usvg=ue,this.scale=C_.getImagePositionScale(w,ue,T)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function v3(d,s,u){const y=as.parse(d),w=function(T,I,L=[1,1]){return{x:0,y:0,w:(T.data?T.data.width:T.width*L[0])+2*I,h:(T.data?T.data.height:T.height*L[1])+2*I}}(s,u,[y.options.transform.a,y.options.transform.d]);return{bin:w,imagePosition:new C_(w,s,u,y),imageVariant:y}}class hT{constructor(s,u,y){const w=new Map,T=new Map;this.haveRenderCallbacks=[];const I=[];this.addImages(s,w,T0,I),this.addImages(u,T,2,I);const{w:L,h:H}=uT(I),W=new Ql({width:L||1,height:H||1});for(const[se,ue]of s.entries()){const me=w.get(se).paddedRect;Ql.copy(ue.data,W,{x:0,y:0},{x:me.x+T0,y:me.y+T0},ue.data,y,ue.sdf)}for(const[se,ue]of u.entries()){const me=T.get(se),Ee=me.paddedRect;let Ie=me.padding;const Re=Ee.x+Ie,ze=Ee.y+Ie,Xe=ue.data.width,ht=ue.data.height;Ie=Ie>1?Ie-1:Ie,Ql.copy(ue.data,W,{x:0,y:0},{x:Re,y:ze},ue.data,y),Ql.copy(ue.data,W,{x:0,y:ht-Ie},{x:Re,y:ze-Ie},{width:Xe,height:Ie},y),Ql.copy(ue.data,W,{x:0,y:0},{x:Re,y:ze+ht},{width:Xe,height:Ie},y),Ql.copy(ue.data,W,{x:Xe-Ie,y:0},{x:Re-Ie,y:ze},{width:Ie,height:ht},y),Ql.copy(ue.data,W,{x:0,y:0},{x:Re+Xe,y:ze},{width:Ie,height:ht},y),Ql.copy(ue.data,W,{x:Xe-Ie,y:ht-Ie},{x:Re-Ie,y:ze-Ie},{width:Ie,height:Ie},y),Ql.copy(ue.data,W,{x:0,y:ht-Ie},{x:Re+Xe,y:ze-Ie},{width:Ie,height:Ie},y),Ql.copy(ue.data,W,{x:0,y:0},{x:Re+Xe,y:ze+ht},{width:Ie,height:Ie},y),Ql.copy(ue.data,W,{x:Xe-Ie,y:0},{x:Re-Ie,y:ze+ht},{width:Ie,height:Ie},y)}this.lut=y,this.image=W,this.iconPositions=w,this.patternPositions=T}addImages(s,u,y,w){for(const[T,I]of s.entries()){const{bin:L,imagePosition:H,imageVariant:W}=v3(T,I,y);u.set(T,H),w.push(L),I.hasRenderCallback&&this.haveRenderCallbacks.push(W.id)}}patchUpdatedImages(s,u,y){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(w=>s.hasImage(w,y)),s.dispatchRenderCallbacks(this.haveRenderCallbacks,y);for(const w of s.getUpdatedImages(y)){for(const T of this.iconPositions.keys()){const I=as.parse(T);if(ol.isEqual(I.id,w)){const L=s.getImage(w,y);this.patchUpdatedImage(this.iconPositions.get(T),L,u)}}for(const T of this.patternPositions.keys()){const I=as.parse(T);if(ol.isEqual(I.id,w)){const L=s.getImage(w,y);this.patchUpdatedImage(this.patternPositions.get(T),L,u)}}}}patchUpdatedImage(s,u,y){if(!s||!u||s.version===u.version)return;s.version=u.version;const[w,T]=s.tl,I=s.sdf;if(this.lut||I){const L={width:u.data.width,height:u.data.height},H=new Ql(L);Ql.copy(u.data,H,{x:0,y:0},{x:0,y:0},L,this.lut,I),y.update(H,{position:{x:w,y:T}})}else y.update(u.data,{position:{x:w,y:T}})}}Xn(C_,"ImagePosition"),Xn(hT,"ImageAtlas");const E_=1e20;function fT(d,s,u,y,w,T,I,L,H){for(let W=s;W<s+y;W++)dT(d,u*T+W,T,w,I,L,H);for(let W=u;W<u+w;W++)dT(d,W*T+s,1,y,I,L,H)}function dT(d,s,u,y,w,T,I){T[0]=0,I[0]=-E_,I[1]=E_,w[0]=d[s];for(let L=1,H=0,W=0;L<y;L++){w[L]=d[s+L*u];const se=L*L;do{const ue=T[H];W=(w[L]-w[ue]+se-ue*ue)/(L-ue)/2}while(W<=I[H]&&--H>-1);H++,T[H]=L,I[H]=W,I[H+1]=E_}for(let L=0,H=0;L<y;L++){for(;I[H+1]<L;)H++;const W=T[H],se=L-W;d[s+L*u]=w[W]+se*se}}const dA=2,b3={none:0,ideographs:1,all:2};class Q1{constructor(s,u,y){this.requestManager=s,this.localGlyphMode=u,this.localFontFamily=y,this.url="",this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s){this.url=s}getGlyphs(s,u){const y=[],w=this.url||Ji.GLYPHS_URL;for(const T in s)for(const I of s[T])y.push({stack:T,id:I});Et(y,({stack:T,id:I},L)=>{let H=this.entries[T];H||(H=this.entries[T]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let W=H.glyphs[I];if(W!==void 0)return void L(null,{stack:T,id:I,glyph:W});if(W=this._tinySDF(H,T,I),W)return H.glyphs[I]=W,void L(null,{stack:T,id:I,glyph:W});const se=Math.floor(I/256);if(256*se>65535)return Qi("glyphs > 65535 not supported"),void L(null,{stack:T,id:I,glyph:W});if(H.ranges[se])return void L(null,{stack:T,id:I,glyph:W});let ue=H.requests[se];ue||(ue=H.requests[se]=[],Q1.loadGlyphRange(T,se,w,this.requestManager,(me,Ee)=>{if(Ee){H.ascender=Ee.ascender,H.descender=Ee.descender;for(const Ie in Ee.glyphs)this._doesCharSupportLocalGlyph(+Ie)||(H.glyphs[+Ie]=Ee.glyphs[+Ie]);H.ranges[se]=!0}for(const Ie of ue)Ie(me,Ee);delete H.requests[se]})),ue.push((me,Ee)=>{me?L(me):Ee&&L(null,{stack:T,id:I,glyph:Ee.glyphs[I]||null})})},(T,I)=>{if(T)u(T);else if(I){const L={};for(const{stack:H,id:W,glyph:se}of I)L[H]===void 0&&(L[H]={}),L[H].glyphs===void 0&&(L[H].glyphs={}),L[H].glyphs[W]=se&&{id:se.id,bitmap:se.bitmap.clone(),metrics:se.metrics},L[H].ascender=this.entries[H].ascender,L[H].descender=this.entries[H].descender;u(null,L)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==b3.none&&(this.localGlyphMode===b3.all?!!this.localFontFamily:!!this.localFontFamily&&(Mi["CJK Unified Ideographs"](s)||Mi["Hangul Syllables"](s)||Mi.Hiragana(s)||Mi.Katakana(s)||Mi["CJK Symbols and Punctuation"](s)||Mi["CJK Unified Ideographs Extension A"](s)||Mi["CJK Unified Ideographs Extension B"](s)||Mi.Osage(s)))}_tinySDF(s,u,y){const w=this.localFontFamily;if(!w||!this._doesCharSupportLocalGlyph(y))return;let T=s.tinySDF;if(!T){let Re="400";/bold/i.test(u)?Re="900":/medium/i.test(u)?Re="500":/light/i.test(u)&&(Re="200"),T=s.tinySDF=new Q1.TinySDF({fontFamily:w,fontWeight:Re,fontSize:24*dA,buffer:3*dA,radius:8*dA}),T.fontWeight=Re}if(this.localGlyphs[T.fontWeight][y])return this.localGlyphs[T.fontWeight][y];const I=String.fromCodePoint(y),{data:L,width:H,height:W,glyphWidth:se,glyphHeight:ue,glyphLeft:me,glyphTop:Ee,glyphAdvance:Ie}=T.draw(I);return this.localGlyphs[T.fontWeight][y]={id:y,bitmap:new WA({width:H,height:W},L),metrics:{width:se/dA,height:ue/dA,left:me/dA,top:Ee/dA-27,advance:Ie/dA,localGlyph:!0}}}}Q1.loadGlyphRange=function(d,s,u,y,w){const T=256*s,I=T+255,L=y.transformRequest(y.normalizeGlyphsURL(u).replace("{fontstack}",d).replace("{range}",`${T}-${I}`),Jc.Glyphs);Fu(L,(H,W)=>{if(H)w(H);else if(W){const se={},ue=function(me){return new F2(me).readFields(qR,{})}(W);for(const me of ue.glyphs)se[me.id]=me;w(null,{glyphs:se,ascender:ue.ascender,descender:ue.descender})}})},Q1.TinySDF=class{constructor({fontSize:d=24,buffer:s=3,radius:u=8,cutoff:y=.25,fontFamily:w="sans-serif",fontWeight:T="normal",fontStyle:I="normal"}={}){this.buffer=s,this.cutoff=y,this.radius=u;const L=this.size=d+4*s,H=this._createCanvas(L),W=this.ctx=H.getContext("2d",{willReadFrequently:!0});W.font=`${I} ${T} ${d}px ${w}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(d){const s=document.createElement("canvas");return s.width=s.height=d,s}draw(d){const{width:s,actualBoundingBoxAscent:u,actualBoundingBoxDescent:y,actualBoundingBoxLeft:w,actualBoundingBoxRight:T}=this.ctx.measureText(d),I=Math.ceil(u),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-w))),H=Math.min(this.size-this.buffer,I+Math.ceil(y)),W=L+2*this.buffer,se=H+2*this.buffer,ue=Math.max(W*se,0),me=new Uint8ClampedArray(ue),Ee={data:me,width:W,height:se,glyphWidth:L,glyphHeight:H,glyphTop:I,glyphLeft:0,glyphAdvance:s};if(L===0||H===0)return Ee;const{ctx:Ie,buffer:Re,gridInner:ze,gridOuter:Xe}=this;Ie.clearRect(Re,Re,L,H),Ie.fillText(d,Re,Re+I);const ht=Ie.getImageData(Re,Re,L,H);Xe.fill(E_,0,ue),ze.fill(0,0,ue);for(let ut=0;ut<H;ut++)for(let mt=0;mt<L;mt++){const $t=ht.data[4*(ut*L+mt)+3]/255;if($t===0)continue;const Ut=(ut+Re)*W+mt+Re;if($t===1)Xe[Ut]=0,ze[Ut]=E_;else{const Ht=.5-$t;Xe[Ut]=Ht>0?Ht*Ht:0,ze[Ut]=Ht<0?Ht*Ht:0}}fT(Xe,0,0,W,se,W,this.f,this.v,this.z),fT(ze,Re,Re,L,H,W,this.f,this.v,this.z);for(let ut=0;ut<ue;ut++){const mt=Math.sqrt(Xe[ut])-Math.sqrt(ze[ut]);me[ut]=Math.round(255-255*(mt/this.radius+this.cutoff))}return Ee}};const mg=T0;function pT(d,s){return d+s[1]-s[0]}function AT(d,s,u,y,w=1){const T=[],I=d.imagePrimary,L=I.pixelRatio,H=I.paddedRect.w-2*mg,W=I.paddedRect.h-2*mg,se=(d.right-d.left)*w,ue=(d.bottom-d.top)*w,me=I.stretchX||[[0,H]],Ee=I.stretchY||[[0,W]],Ie=me.reduce(pT,0),Re=Ee.reduce(pT,0),ze=H-Ie,Xe=W-Re;let ht=0,ut=Ie,mt=0,$t=Re,Ut=0,Ht=ze,or=0,cr=Xe;if(I.content&&y){const xr=I.content;ht=L2(me,0,xr[0]),mt=L2(Ee,0,xr[1]),ut=L2(me,xr[0],xr[2]),$t=L2(Ee,xr[1],xr[3]),Ut=xr[0]-ht,or=xr[1]-mt,Ht=xr[2]-xr[0]-ut,cr=xr[3]-xr[1]-$t}const Gr=(xr,Yr,In,nn)=>{const gn=k2(xr.stretch-ht,ut,se,d.left*w),En=O2(xr.fixed-Ut,Ht,xr.stretch,Ie),zr=k2(Yr.stretch-mt,$t,ue,d.top*w),_n=O2(Yr.fixed-or,cr,Yr.stretch,Re),wr=k2(In.stretch-ht,ut,se,d.left*w),Vr=O2(In.fixed-Ut,Ht,In.stretch,Ie),Pn=k2(nn.stretch-mt,$t,ue,d.top*w),xn=O2(nn.fixed-or,cr,nn.stretch,Re),Ei=new tr(gn,zr),pi=new tr(wr,zr),An=new tr(wr,Pn),Cn=new tr(gn,Pn),yi=new tr(En/L,_n/L),ii=new tr(Vr/L,xn/L),Rn=s*Math.PI/180;if(Rn){const Xs=Math.sin(Rn),Ds=Math.cos(Rn),ya=[Ds,-Xs,Xs,Ds];Ei._matMult(ya),pi._matMult(ya),Cn._matMult(ya),An._matMult(ya)}const oi=xr.stretch+xr.fixed,Ui=In.stretch+In.fixed,ts=Yr.stretch+Yr.fixed,Es=nn.stretch+nn.fixed,gs=d.imageSecondary;return{tl:Ei,tr:pi,bl:Cn,br:An,texPrimary:{x:I.paddedRect.x+mg+oi,y:I.paddedRect.y+mg+ts,w:Ui-oi,h:Es-ts},texSecondary:gs?{x:gs.paddedRect.x+mg+oi,y:gs.paddedRect.y+mg+ts,w:Ui-oi,h:Es-ts}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yi,pixelOffsetBR:ii,minFontScaleX:Ht/L/se,minFontScaleY:cr/L/ue,isSDF:u}};if(y&&(I.stretchX||I.stretchY)){const xr=mT(me,ze,Ie),Yr=mT(Ee,Xe,Re);for(let In=0;In<xr.length-1;In++){const nn=xr[In],gn=xr[In+1];for(let En=0;En<Yr.length-1;En++)T.push(Gr(nn,Yr[En],gn,Yr[En+1]))}}else T.push(Gr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:H+1},{fixed:0,stretch:W+1}));return T}function L2(d,s,u){let y=0;for(const w of d)y+=Math.max(s,Math.min(u,w[1]))-Math.max(s,Math.min(u,w[0]));return y}function mT(d,s,u){const y=[{fixed:-mg,stretch:0}];for(const[w,T]of d){const I=y[y.length-1];y.push({fixed:w-I.stretch,stretch:I.stretch}),y.push({fixed:w-I.stretch,stretch:I.stretch+(T-w)})}return y.push({fixed:s+mg,stretch:u}),y}function k2(d,s,u,y){return d/s*u+y}function O2(d,s,u,y){return d-s*u/y}function n7(d,s,u,y){const w=s+d.positionedLines[y].lineOffset;return y===0?u+w/2:u+(w+(s+d.positionedLines[y-1].lineOffset))/2}function i7(d,s=1,u=!1){let y=1/0,w=1/0,T=-1/0,I=-1/0;const L=d[0];for(let Ee=0;Ee<L.length;Ee++){const Ie=L[Ee];(!Ee||Ie.x<y)&&(y=Ie.x),(!Ee||Ie.y<w)&&(w=Ie.y),(!Ee||Ie.x>T)&&(T=Ie.x),(!Ee||Ie.y>I)&&(I=Ie.y)}const H=Math.min(T-y,I-w);let W=H/2;const se=new pc([],s7);if(H===0)return new tr(y,w);for(let Ee=y;Ee<T;Ee+=H)for(let Ie=w;Ie<I;Ie+=H)se.push(new V1(Ee+W,Ie+W,W,d));let ue=function(Ee){let Ie=0,Re=0,ze=0;const Xe=Ee[0];for(let ht=0,ut=Xe.length,mt=ut-1;ht<ut;mt=ht++){const $t=Xe[ht],Ut=Xe[mt],Ht=$t.x*Ut.y-Ut.x*$t.y;Re+=($t.x+Ut.x)*Ht,ze+=($t.y+Ut.y)*Ht,Ie+=3*Ht}return new V1(Re/Ie,ze/Ie,0,Ee)}(d),me=se.length;for(;se.length;){const Ee=se.pop();(Ee.d>ue.d||!ue.d)&&(ue=Ee,u&&console.log("found best %d after %d probes",Math.round(1e4*Ee.d)/1e4,me)),Ee.max-ue.d<=s||(W=Ee.h/2,se.push(new V1(Ee.p.x-W,Ee.p.y-W,W,d)),se.push(new V1(Ee.p.x+W,Ee.p.y-W,W,d)),se.push(new V1(Ee.p.x-W,Ee.p.y+W,W,d)),se.push(new V1(Ee.p.x+W,Ee.p.y+W,W,d)),me+=4)}return u&&(console.log(`num probes: ${me}`),console.log(`best distance: ${ue.d}`)),ue.p}function s7(d,s){return s.max-d.max}class V1{constructor(s,u,y,w){this.p=new tr(s,u),this.h=y,this.d=function(T,I){let L=!1,H=1/0;for(let W=0;W<I.length;W++){const se=I[W];for(let ue=0,me=se.length,Ee=me-1;ue<me;Ee=ue++){const Ie=se[ue],Re=se[Ee];Ie.y>T.y!=Re.y>T.y&&T.x<(Re.x-Ie.x)*(T.y-Ie.y)/(Re.y-Ie.y)+Ie.x&&(L=!L),H=Math.min(H,os(T,Ie,Re))}}return(L?1:-1)*Math.sqrt(H)}(this.p,w),this.max=this.d+this.h*Math.SQRT2}}const o7=Object.keys,x3=Number.POSITIVE_INFINITY,a7=Math.sqrt(2);function gT(d,[s,u]){let y=0,w=0;if(u===x3){s<0&&(s=0);const T=s/a7;switch(d){case"top-right":case"top-left":w=T-7;break;case"bottom-right":case"bottom-left":w=7-T;break;case"bottom":w=7-s;break;case"top":w=s-7}switch(d){case"top-right":case"bottom-right":y=-T;break;case"top-left":case"bottom-left":y=T;break;case"left":y=s;break;case"right":y=-s}}else{switch(s=Math.abs(s),u=Math.abs(u),d){case"top-right":case"top-left":case"top":w=u-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-u}switch(d){case"top-right":case"bottom-right":case"right":y=-s;break;case"top-left":case"bottom-left":case"left":y=s}}return[y,w]}function D2(d,s,u,y,w,T,I,L,H){if(!s||!s.usvg)return;const W=nT(y),se=nT(w),ue=T!=="both"&&T!=="width"||!tT(y)?1:se.width/W.width,me=T!=="both"&&T!=="height"||!rT(y)?1:se.height/W.height;u.scaleSelf(ue,me);const Ee=u.toString();I.set(Ee,u),L.set(Ee,s);const{imagePosition:Ie}=v3(Ee,s,T0);H.set(Ee,Ie)}function yT(d,s,u,y,w,T,I,L,H){if(!d)return;const W=function(se,ue,me,Ee,Ie,Re){if(se.kind==="camera")return se.maxSize;if(se.kind==="composite"){const ze=ue.possiblyEvaluate(new Ao(se.maxZoom,{worldview:Re}),me).evaluate(Ie,{},me),Xe=ue.possiblyEvaluate(new Ao(se.minZoom,{worldview:Re}),me).evaluate(Ie,{},me);return Math.max(ze,Xe)}return ue.possiblyEvaluate(new Ao(Ee,{worldview:Re})).evaluate(Ie,{},me)}(s,u,y,w,T,H);return d.scaleSelf(W*L*I)}function _T(d,s,u,y,w,T,I,L,H){return{iconPrimary:yT(d.getPrimary(),s,u,y,w,T,I,L,H),iconSecondary:yT(d.getSecondary(),s,u,y,w,T,I,L,H)}}function l7(d,s,u){if(!s)return;const y=u.get(d.toString()),w=u.get(s.toString());w&&(y.paddedRect.w===w.paddedRect.w&&y.paddedRect.h===w.paddedRect.h||Qi(`Mismatch in icon variant sizes: ${d.toString()} and ${s.toString()}`),y.usvg!==w.usvg&&Qi(`Mismatch in icon variant image types: ${d.id} and ${s.id}`))}function vT(d,s,u,y){if(!d)return;const w=s.get(u.toString());if(d.imagePrimary=w,y){const T=s.get(y.toString());d.imageSecondary=T}}function c7(d,s){for(const u in d.horizontal)bT(d.horizontal[u],s);bT(d.vertical,s)}function bT(d,s){if(d){for(const u of d.positionedLines)for(const y of u.positionedGlyphs)if(y.image!==null){const w=y.image.toString();y.rect=s.get(w).paddedRect}}}function w3(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function u7(d,s,u,y,w,T,I,L,H){const W=S3(T.horizontal)||T.vertical,se=u.get("icon-text-fit-padding").evaluate(y,{},w);let ue,me=s;return s&&H!=="none"&&(d.allowVerticalPlacement&&T.vertical&&(ue=eT(s,T.vertical,H,se,L,I)),W&&(me=eT(s,W,H,se,L,I))),{defaultShapedIcon:me,verticallyShapedIcon:ue}}function h7(d,s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe,ht,ut){let mt=I.textMaxSize.evaluate(s,{},me);mt===void 0?mt=L*I.textScaleFactor:mt*=I.textScaleFactor;const $t=d.layers[0].layout,Ut=S3(u.horizontal)||u.vertical,Ht=Ee.name==="globe",or=hu,cr=d.tilePixelRatio*mt/or,Gr=(En=d.overscaling,d.zoom>18&&En>2&&(En>>=1),Math.max(tn/(512*En),1)*$t.get("symbol-spacing")),xr=$t.get("text-padding")*d.tilePixelRatio,Yr=$t.get("icon-padding")*d.tilePixelRatio,In=li($t.get("text-max-angle")),nn=$t.get("icon-rotation-alignment")==="map"&&ut!=="point",gn=Gr/2;var En;d.hasAnyIconTextFit===!1&&ze!=="none"&&(d.hasAnyIconTextFit=!0);const zr=s.properties?+s.properties[ti]:null,_n=zr&&d.elevationFeatureIdToIndex?d.elevationFeatureIdToIndex.get(zr):65535,wr=(Vr,Pn,xn)=>{if(Pn.x<0||Pn.x>=tn||Pn.y<0||Pn.y>=tn)return;let Ei=null;if(Ht){const{x:pi,y:An,z:Cn}=Ee.projectTilePoint(Pn.x,Pn.y,xn);Ei={anchor:new Mm(pi,An,Cn,0,void 0),up:Ee.upVector(xn,Pn.x,Pn.y)}}(function(pi,An,Cn,yi,ii,Rn,oi,Ui,ts,Es,gs,Xs,Ds,ya,wt,St,Rr,Ln,Kn,$n,gi,Yi,$s,Ks,Ps,qo,tl,Ts,Ta){const ha=pi.addToLineVertexArray(An,yi);let Mo,Ka,_a,fa,Aa,jo,Ls,Yo=0,qa=0,$i=0,po=0,va=-1,dl=-1;const Ia={};let ac=Qa("");const ra=Cn?Cn.anchor:An,ql=Ts!=="none";let mf=0,Vu=0;if(ts._unevaluatedLayout.getValue("text-radial-offset")===void 0){const lc=ts.layout.get("text-offset").evaluate(gi,{},Ps);mf=lc[0]*hu,Vu=lc[1]*hu}else mf=ts.layout.get("text-radial-offset").evaluate(gi,{},Ps)*hu,Vu=x3;if(pi.allowVerticalPlacement&&ii.vertical){const lc=ii.vertical;if(wt)jo=C3(lc),Ui&&(Ls=C3(Ui));else{const Dc=ts.layout.get("text-rotate").evaluate(gi,{},Ps)+90;_a=R2(Es,ra,An,gs,Xs,Ds,lc,ya,Dc,St),Ui&&(fa=R2(Es,ra,An,gs,Xs,Ds,Ui,Ln,Dc))}}if(Rn){const lc=pi.iconSizeData,Dc=ts.layout.get("icon-rotate").evaluate(gi,{},Ps),Gu=AT(Rn,Dc,$s,ql,Yi.iconScaleFactor),Fh=Ui?AT(Ui,Dc,$s,ql,Yi.iconScaleFactor):void 0;Ka=R2(Es,ra,An,gs,Xs,Ds,Rn,Ln,Dc,null),Yo=4*Gu.length;let lh=null;lc.kind==="source"?(lh=[JA*ts.layout.get("icon-size").evaluate(gi,{},Ps)*Yi.iconScaleFactor],lh[0]>gg&&Qi(`${pi.layerIds[0]}: Value for "icon-size" is >= ${B_}. Reduce your "icon-size".`)):lc.kind==="composite"&&(lh=[JA*Yi.compositeIconSizes[0].evaluate(gi,{},Ps)*Yi.iconScaleFactor,JA*Yi.compositeIconSizes[1].evaluate(gi,{},Ps)*Yi.iconScaleFactor],(lh[0]>gg||lh[1]>gg)&&Qi(`${pi.layerIds[0]}: Value for "icon-size" is >= ${B_}. Reduce your "icon-size".`)),pi.addSymbols(pi.icon,Gu,lh,$n,Kn,gi,void 0,Cn,An,ha.lineStartIndex,ha.lineLength,-1,Ks,Ps,qo,tl),va=pi.icon.placedSymbolArray.length-1,Fh&&(qa=4*Fh.length,pi.addSymbols(pi.icon,Fh,lh,$n,Kn,gi,Gf.vertical,Cn,An,ha.lineStartIndex,ha.lineLength,-1,Ks,Ps,qo,tl),dl=pi.icon.placedSymbolArray.length-1)}for(const lc in ii.horizontal){const Dc=lc,Gu=ii.horizontal[Dc];Mo||(ac=Qa(Gu.text),wt?Aa=C3(Gu):Mo=R2(Es,ra,An,gs,Xs,Ds,Gu,ya,ts.layout.get("text-rotate").evaluate(gi,{},Ps),St));const Fh=Gu.positionedLines.length===1;if($i+=xT(pi,Cn,An,Gu,oi,ts,wt,gi,St,ha,ii.vertical?Gf.horizontal:Gf.horizontalOnly,Fh?o7(ii.horizontal):[Dc],Ia,va,Yi,Ks,Ps,qo),Fh)break}ii.vertical&&(po+=xT(pi,Cn,An,ii.vertical,oi,ts,wt,gi,St,ha,Gf.vertical,["vertical"],Ia,dl,Yi,Ks,Ps,qo));let wu=-1;const gf=(lc,Dc)=>lc?Math.max(lc,Dc):Dc;wu=gf(Aa,wu),wu=gf(jo,wu),wu=gf(Ls,wu);const em=wu>-1?1:0;pi.glyphOffsetArray.length>=65535&&Qi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),gi.sortKey!==void 0&&pi.addToSortKeyRanges(pi.symbolInstances.length,gi.sortKey),pi.symbolInstances.emplaceBack(An.x,An.y,ra.x,ra.y,ra.z,Ia.right>=0?Ia.right:-1,Ia.center>=0?Ia.center:-1,Ia.left>=0?Ia.left:-1,Ia.vertical>=0?Ia.vertical:-1,va,dl,ac,Mo!==void 0?Mo:pi.collisionBoxArray.length,Mo!==void 0?Mo+1:pi.collisionBoxArray.length,_a!==void 0?_a:pi.collisionBoxArray.length,_a!==void 0?_a+1:pi.collisionBoxArray.length,Ka!==void 0?Ka:pi.collisionBoxArray.length,Ka!==void 0?Ka+1:pi.collisionBoxArray.length,fa||pi.collisionBoxArray.length,fa?fa+1:pi.collisionBoxArray.length,gs,$i,po,Yo,qa,em,0,mf,Vu,wu,0,ql?1:0,Ta)})(d,Pn,Ei,Vr,u,y,T,w,d.layers[0],d.collisionBoxArray,s.index,s.sourceLayerIndex,d.index,xr,ht,W,0,Yr,nn,Xe,s,I,se,ue,me,Ie,Re,ze,_n)};if(ut==="line")for(const Vr of O1(s.geometry,0,0,tn,tn)){const Pn=r7(Vr,Gr,In,u.vertical||Ut,y,or,cr,d.overscaling,tn);for(const xn of Pn)Ut&&f7(d,Ut.text,gn,xn)||wr(Vr,xn,me)}else if(ut==="line-center"){for(const Vr of s.geometry)if(Vr.length>1){const Pn=t7(Vr,In,u.vertical||Ut,y,or,cr);Pn&&wr(Vr,Pn,me)}}else if(s.type==="Polygon")for(const Vr of Mp(s.geometry,0)){const Pn=i7(Vr,16);wr(Vr[0],new Mm(Pn.x,Pn.y,0,0,void 0),me)}else if(s.type==="LineString")for(const Vr of s.geometry)wr(Vr,new Mm(Vr[0].x,Vr[0].y,0,0,void 0),me);else if(s.type==="Point")for(const Vr of s.geometry)for(const Pn of Vr)wr([Pn],new Mm(Pn.x,Pn.y,0,0,void 0),me)}const B_=255,gg=B_*JA;function xT(d,s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze,Xe){const ht=function($t,Ut,Ht,or,cr,Gr,xr,Yr){const In=[];if(Ut.positionedLines.length===0)return In;const nn=or.layout.get("text-rotate").evaluate(Gr,{})*Math.PI/180,gn=function(Vr){const Pn=Vr[0],xn=Vr[1],Ei=Pn*xn;return Ei>0?[Pn,-xn]:Ei<0?[-Pn,xn]:Pn===0?[xn,Pn]:[xn,-Pn]}(Ht);let En=Math.abs(Ut.top-Ut.bottom);for(const Vr of Ut.positionedLines)En-=Vr.lineOffset;const zr=Ut.positionedLines.length,_n=En/zr;let wr=Ut.top-Ht[1];for(let Vr=0;Vr<zr;++Vr){const Pn=Ut.positionedLines[Vr];wr=n7(Ut,_n,wr,Vr);for(const xn of Pn.positionedGlyphs){if(!xn.rect)continue;const Ei=xn.rect||{};let pi=$B+1,An=!0,Cn=1,yi=0;if(xn.image){const gi=xr.get(xn.image.toString());if(!gi)continue;if(gi.sdf){Qi("SDF images are not supported in formatted text and will be ignored.");continue}An=!1,Cn=gi.pixelRatio,pi=T0/Cn}const ii=(cr||Yr)&&xn.vertical,Rn=xn.metrics.advance*xn.scale/2,oi=xn.metrics,Ui=xn.rect;if(Ui===null)continue;Yr&&Ut.verticalizable&&(yi=xn.image?Rn-xn.metrics.width*xn.scale/2:0);const ts=cr?[xn.x+Rn,xn.y]:[0,0];let Es=[0,0],gs=[0,0],Xs=!1;cr||(ii?(gs=[xn.x+Rn+gn[0],xn.y+gn[1]-yi],Xs=!0):Es=[xn.x+Rn+Ht[0],xn.y+Ht[1]-yi]);const Ds=Ui.w*xn.scale/(Cn*(xn.localGlyph?dA:1)),ya=Ui.h*xn.scale/(Cn*(xn.localGlyph?dA:1));let wt,St,Rr,Ln;if(ii){const gi=xn.y-wr,Yi=new tr(-Rn,Rn-gi),$s=-Math.PI/2,Ks=new tr(...gs);wt=new tr(-Rn+Es[0],Es[1]),wt._rotateAround($s,Yi)._add(Ks),wt.x+=-gi+Rn,wt.y-=(oi.left-pi)*xn.scale;const Ps=xn.image?oi.advance*xn.scale:hu*xn.scale,qo=String.fromCodePoint(xn.glyph);NR(qo)?wt.x+=(1-pi)*xn.scale:jR(qo)?wt.x+=Ps-oi.height*xn.scale+(-pi-1)*xn.scale:wt.x+=xn.image||oi.width+2*pi===Ui.w&&oi.height+2*pi===Ui.h?(Ps-ya)/2:(Ps-(oi.height+2*pi)*xn.scale)/2,St=new tr(wt.x,wt.y-Ds),Rr=new tr(wt.x+ya,wt.y),Ln=new tr(wt.x+ya,wt.y-Ds)}else{const gi=(oi.left-pi)*xn.scale-Rn+Es[0],Yi=(-oi.top-pi)*xn.scale+Es[1],$s=gi+Ds,Ks=Yi+ya;wt=new tr(gi,Yi),St=new tr($s,Yi),Rr=new tr(gi,Ks),Ln=new tr($s,Ks)}if(nn){let gi;gi=cr?new tr(0,0):Xs?new tr(gn[0],gn[1]):new tr(Ht[0],Ht[1]),wt._rotateAround(nn,gi),St._rotateAround(nn,gi),Rr._rotateAround(nn,gi),Ln._rotateAround(nn,gi)}const Kn=new tr(0,0),$n=new tr(0,0);In.push({tl:wt,tr:St,bl:Rr,br:Ln,texPrimary:Ei,texSecondary:void 0,writingMode:Ut.writingMode,glyphOffset:ts,sectionIndex:xn.sectionIndex,isSDF:An,pixelOffsetTL:Kn,pixelOffsetBR:$n,minFontScaleX:0,minFontScaleY:0})}}return In}(0,y,H,T,I,L,w,d.allowVerticalPlacement),ut=d.textSizeData;let mt=null;ut.kind==="source"?(mt=[JA*T.layout.get("text-size").evaluate(L,{},ze)*Ie.textScaleFactor],mt[0]>gg&&Qi(`${d.layerIds[0]}: Value for "text-size" is >= ${B_}. Reduce your "text-size".`)):ut.kind==="composite"&&(mt=[JA*Ie.compositeTextSizes[0].evaluate(L,{},ze)*Ie.textScaleFactor,JA*Ie.compositeTextSizes[1].evaluate(L,{},ze)*Ie.textScaleFactor],(mt[0]>gg||mt[1]>gg)&&Qi(`${d.layerIds[0]}: Value for "text-size" is >= ${B_}. Reduce your "text-size".`)),d.addSymbols(d.text,ht,mt,H,I,L,se,s,u,W.lineStartIndex,W.lineLength,Ee,Re,ze,Xe,!1);for(const $t of ue)me[$t]=d.text.placedSymbolArray.length-1;return 4*ht.length}function S3(d){for(const s in d)return d[s];return null}function R2(d,s,u,y,w,T,I,L,H,W){let se=I.top,ue=I.bottom,me=I.left,Ee=I.right;if(JB(I)&&I.collisionPadding){const Ie=I.collisionPadding;me-=Ie[0],se-=Ie[1],Ee+=Ie[2],ue+=Ie[3]}if(H){const Ie=new tr(me,se),Re=new tr(Ee,se),ze=new tr(me,ue),Xe=new tr(Ee,ue),ht=li(H);let ut=new tr(0,0);W&&(ut=new tr(W[0],W[1])),Ie._rotateAround(ht,ut),Re._rotateAround(ht,ut),ze._rotateAround(ht,ut),Xe._rotateAround(ht,ut),me=Math.min(Ie.x,Re.x,ze.x,Xe.x),Ee=Math.max(Ie.x,Re.x,ze.x,Xe.x),se=Math.min(Ie.y,Re.y,ze.y,Xe.y),ue=Math.max(Ie.y,Re.y,ze.y,Xe.y)}return d.emplaceBack(s.x,s.y,s.z,u.x,u.y,me,se,Ee,ue,L,y,w,T),d.length-1}function C3(d){JB(d)&&d.collisionPadding&&(d.top-=d.collisionPadding[1],d.bottom+=d.collisionPadding[3]);const s=d.bottom-d.top;return s>0?Math.max(10,s):null}function f7(d,s,u,y){const w=d.compareText;if(s in w){const T=w[s];for(let I=T.length-1;I>=0;I--)if(y.dist(T[I])<u)return!0}else w[s]=[];return w[s].push(y),!1}function wT(d,s){const u=d.fovAboveCenter,y=d.elevation?d.elevation.getMinElevationBelowMSL()*s:0,w=(d._camera.position[2]*d.worldSize-y)/Math.cos(d._pitch),T=Math.sin(u)*w/Math.sin(Math.max(Math.PI/2-d._pitch-u,.01));let I=Math.sin(d._pitch)*T+w;const L=w*(1/d._horizonShift);if(!d.elevation||d.elevation.exaggeration()===0){let H=Math.max(d.zoom-17,0);d.isOrthographic&&(H/=10),I*=1+H}return Math.min(1.01*I,L)}function T_(d,s){if(!s.isReprojectedInTileSpace)return{scale:1<<d.z,x:d.x,y:d.y,x2:d.x+1,y2:d.y+1,projection:s};const u=Math.pow(2,-d.z),y=d.x*u,w=(d.x+1)*u,T=d.y*u,I=(d.y+1)*u,L=lt(y),H=lt(w),W=dt(T),se=dt(I),ue=s.project(L,W),me=s.project(H,W),Ee=s.project(H,se),Ie=s.project(L,se);let Re=Math.min(ue.x,me.x,Ee.x,Ie.x),ze=Math.min(ue.y,me.y,Ee.y,Ie.y),Xe=Math.max(ue.x,me.x,Ee.x,Ie.x),ht=Math.max(ue.y,me.y,Ee.y,Ie.y);const ut=u/16;function mt(Ut,Ht,or,cr,Gr,xr){const Yr=(or+Gr)/2,In=(cr+xr)/2,nn=s.project(lt(Yr),dt(In)),gn=Math.max(0,Re-nn.x,ze-nn.y,nn.x-Xe,nn.y-ht);Re=Math.min(Re,nn.x),Xe=Math.max(Xe,nn.x),ze=Math.min(ze,nn.y),ht=Math.max(ht,nn.y),gn>ut&&(mt(Ut,nn,or,cr,Yr,In),mt(nn,Ht,Yr,In,Gr,xr))}mt(ue,me,y,T,w,T),mt(me,Ee,w,T,w,I),mt(Ee,Ie,w,I,y,I),mt(Ie,ue,y,I,y,T),Re-=ut,ze-=ut,Xe+=ut,ht+=ut;const $t=1/Math.max(Xe-Re,ht-ze);return{scale:$t,x:Re*$t,y:ze*$t,x2:Xe*$t,y2:ht*$t,projection:s}}function ST(d,{x:s,y:u},y=0){return new tr(((s-y)*d.scale-d.x)*tn,(u*d.scale-d.y)*tn)}const d7=x(new Float32Array(16));class yg{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,u){return{x:0,y:0,z:0}}unproject(s,u){return new ve(0,0)}projectTilePoint(s,u,y){return{x:s,y:u,z:0}}locationPoint(s,u,y,w=!0){return s._coordinatePoint(s.locationCoordinate(u,y),w)}pixelsPerMeter(s,u){return Ke(1,s)*u}pixelSpaceConversion(s,u,y){return 1}farthestPixelDistance(s){return wT(s,s.pixelsPerMeter)}pointCoordinate(s,u,y,w){const T=s.horizonLineFromTop(!1),I=new tr(u,Math.max(T,y));return s.rayIntersectionCoordinate(s.pointRayIntersection(I,w))}pointCoordinate3D(s,u,y){const w=new tr(u,y);if(s.elevation)return s.elevation.pointCoordinate(w);{const T=this.pointCoordinate(s,w.x,w.y,0);return[T.x,T.y,T.z]}}isPointAboveHorizon(s,u){if(s.elevation&&s.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(s,u.x,u.y);const y=s.horizonLineFromTop();return u.y<y}createInversionMatrix(s,u){return d7}createTileMatrix(s,u,y){let w,T,I;const L=y.canonical,H=x(new Float64Array(16));if(this.isReprojectedInTileSpace){const W=T_(L,this);w=1,T=W.x+y.wrap*W.scale,I=W.y,F(H,H,[w/W.scale,w/W.scale,s.pixelsPerMeter/u])}else w=u/s.zoomScale(L.z),T=(L.x+Math.pow(2,L.z)*y.wrap)*w,I=L.y*w;return B(H,H,[T,I,0]),F(H,H,[w/tn,w/tn,1]),H}upVector(s,u,y){return[0,0,1]}upVectorScale(s,u,y){return{metersToTile:1}}}class p7 extends yg{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[u,y]=this.parallels=s.parallels||[29.5,45.5],w=Math.sin(li(u));this.n=(w+Math.sin(li(y)))/2,this.c=1+w*(2*this.n-w),this.r0=Math.sqrt(this.c)/this.n}project(s,u){const{n:y,c:w,r0:T}=this,I=li(s-this.center[0]),L=li(u),H=Math.sqrt(w-2*y*Math.sin(L))/y;return{x:H*Math.sin(I*y),y:H*Math.cos(I*y)-T,z:0}}unproject(s,u){const{n:y,c:w,r0:T}=this,I=T+u;let L=Math.atan2(s,Math.abs(I))*Math.sign(I);I*y<0&&(L-=Math.PI*Math.sign(s)*Math.sign(I));const H=li(this.center[0])*y;L=rr(L,-Math.PI-H,Math.PI-H);const W=nt(Qt(L/y)+this.center[0],-180,180),se=Math.asin(nt((w-(s*s+I*I)*y*y)/(2*y),-1,1)),ue=nt(Qt(se),-Tt,Tt);return new ve(W,ue)}}const I_=1.340264,M_=-.081106,F_=893e-6,P_=.003796,N2=Math.sqrt(3)/2;class A7 extends yg{project(s,u){u=u/180*Math.PI,s=s/180*Math.PI;const y=Math.asin(N2*Math.sin(u)),w=y*y,T=w*w*w;return{x:.5*(s*Math.cos(y)/(N2*(I_+3*M_*w+T*(7*F_+9*P_*w)))/Math.PI+.5),y:1-.5*(y*(I_+M_*w+T*(F_+P_*w))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let y=u=(2*(1-u)-1)*Math.PI,w=y*y,T=w*w*w;for(let se,ue,me,Ee=0;Ee<12&&(ue=y*(I_+M_*w+T*(F_+P_*w))-u,me=I_+3*M_*w+T*(7*F_+9*P_*w),se=ue/me,y=nt(y-se,-Math.PI/3,Math.PI/3),w=y*y,T=w*w*w,!(Math.abs(se)<1e-12));++Ee);const I=N2*s*(I_+3*M_*w+T*(7*F_+9*P_*w))/Math.cos(y),L=Math.asin(Math.sin(y)/N2),H=nt(180*I/Math.PI,-180,180),W=nt(180*L/Math.PI,-Tt,Tt);return new ve(H,W)}}class m7 extends yg{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){return{x:.5+s/360,y:.5-u/360,z:0}}unproject(s,u){const y=360*(s-.5),w=nt(360*(.5-u),-Tt,Tt);return new ve(y,w)}}const G1=Math.PI/2;function j2(d){return Math.tan((G1+d)/2)}class g7 extends yg{constructor(s){super(s),this.center=s.center||[0,30];const[u,y]=this.parallels=s.parallels||[30,30];let w=li(u),T=li(y);this.southernCenter=w+T<0,this.southernCenter&&(w=-w,T=-T);const I=Math.cos(w),L=j2(w);this.n=w===T?Math.sin(w):Math.log(I/Math.cos(T))/Math.log(j2(T)/L),this.f=I*Math.pow(j2(w),this.n)/this.n}project(s,u){u=li(u),this.southernCenter&&(u=-u),s=li(s-this.center[0]);const y=1e-6,{n:w,f:T}=this;T>0?u<-G1+y&&(u=-G1+y):u>G1-y&&(u=G1-y);const I=T/Math.pow(j2(u),w);let L=I*Math.sin(w*s),H=T-I*Math.cos(w*s);return L=.5*(L/Math.PI+.5),H=.5*(H/Math.PI+.5),{x:L,y:this.southernCenter?H:1-H,z:0}}unproject(s,u){s=(2*s-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:y,f:w}=this,T=w-u,I=Math.sign(T),L=Math.sign(y)*Math.sqrt(s*s+T*T);let H=Math.atan2(s,Math.abs(T))*I;T*y<0&&(H-=Math.PI*Math.sign(s)*I);const W=nt(Qt(H/y)+this.center[0],-180,180),se=nt(Qt(2*Math.atan(Math.pow(w/L,1/y))-G1),-Tt,Tt);return new ve(W,this.southernCenter?-se:se)}}class CT extends yg{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,u){return{x:je(s),y:qe(u),z:0}}unproject(s,u){const y=lt(s),w=dt(u);return new ve(y,w)}}const ET=li(Tt);class y7 extends yg{project(s,u){const y=(u=li(u))*u,w=y*y;return{x:.5*((s=li(s))*(.8707-.131979*y+w*(w*(.003971*y-.001529*w)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+y*(.015085+w*(.028874*y-.044475-.005916*w)))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let y=u=(2*(1-u)-1)*Math.PI,w=25,T=0,I=y*y;do{I=y*y;const W=I*I;T=(y*(1.007226+I*(.015085+W*(.028874*I-.044475-.005916*W)))-u)/(1.007226+I*(.045255+W*(.259866*I-.311325-.005916*11*W))),y=nt(y-T,-ET,ET)}while(Math.abs(T)>1e-6&&--w>0);I=y*y;const L=nt(Qt(s/(.8707+I*(I*(I*I*I*(.003971-.001529*I)-.013791)-.131979))),-180,180),H=Qt(y);return new ve(L,H)}}const BT=li(Tt);class _7 extends yg{project(s,u){u=li(u),s=li(s);const y=Math.cos(u),w=2/Math.PI,T=Math.acos(y*Math.cos(s/2)),I=Math.sin(T)/T,L=.5*(s*w+2*y*Math.sin(s/2)/I)||0,H=.5*(u+Math.sin(u)/I)||0;return{x:.5*(L/Math.PI+.5),y:1-.5*(H/Math.PI+1),z:0}}unproject(s,u){let y=s=(2*s-.5)*Math.PI,w=u=(2*(1-u)-1)*Math.PI,T=25;const I=1e-6;let L=0,H=0;do{const W=Math.cos(w),se=Math.sin(w),ue=2*se*W,me=se*se,Ee=W*W,Ie=Math.cos(y/2),Re=Math.sin(y/2),ze=2*Ie*Re,Xe=Re*Re,ht=1-Ee*Ie*Ie,ut=ht?1/ht:0,mt=ht?Math.acos(W*Ie)*Math.sqrt(1/ht):0,$t=.5*(2*mt*W*Re+2*y/Math.PI)-s,Ut=.5*(mt*se+w)-u,Ht=.5*ut*(Ee*Xe+mt*W*Ie*me)+1/Math.PI,or=ut*(ze*ue/4-mt*se*Re),cr=.125*ut*(ue*Re-mt*se*Ee*ze),Gr=.5*ut*(me*Ie+mt*Xe*W)+.5,xr=or*cr-Gr*Ht;L=(Ut*or-$t*Gr)/xr,H=($t*cr-Ut*Ht)/xr,y=nt(y-L,-Math.PI,Math.PI),w=nt(w-H,-BT,BT)}while((Math.abs(L)>I||Math.abs(H)>I)&&--T>0);return new ve(Qt(y),Qt(w))}}class TT extends yg{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(li(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){const{scale:y,cosPhi:w}=this;return{x:li(s)*w*y+.5,y:-Math.sin(li(u))/w*y+.5,z:0}}unproject(s,u){const{scale:y,cosPhi:w}=this,T=-(u-.5)/y,I=nt(Qt((s-.5)/y)/w,-180,180),L=Math.asin(nt(T*w,-1,1)),H=nt(Qt(L),-Tt,Tt);return new ve(I,H)}}class v7 extends CT{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,u,y){const w=lg(s,u,y);return Be(w,w,u0(Ip(y))),{x:w[0],y:w[1],z:w[2]}}locationPoint(s,u,y){const w=K(u.lat,u.lng),T=pe([],w),I=y?s._centerAltitude+y:s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(u),s._centerAltitude):s._centerAltitude;J(w,w,T,Ke(1,0)*tn*I);const L=x(new Float64Array(16));return S(L,s.pixelMatrix,s.globeMatrix),Be(w,w,L),new tr(w[0],w[1])}pixelsPerMeter(s,u){return Ke(1,0)*u}pixelSpaceConversion(s,u,y){const w=Ke(1,s)*u,T=at(Ke(1,45)*u,w,y);return this.pixelsPerMeter(s,u)/T}createTileMatrix(s,u,y){const w=C1(Ip(y.canonical));return S(new Float64Array(16),s.globeMatrix,w)}createInversionMatrix(s,u){const{center:y}=s,w=u0(Ip(u));return V(w,w,li(y.lng)),O(w,w,li(y.lat)),F(w,w,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(w)}pointCoordinate(s,u,y,w){return aA(s,u,y,!0)||new Pt(0,0)}pointCoordinate3D(s,u,y){const w=this.pointCoordinate(s,u,y,0);return[w.x,w.y,w.z]}isPointAboveHorizon(s,u){return!aA(s,u.x,u.y,!1)}farthestPixelDistance(s){const u=function(w,T){const I=w.cameraToCenterDistance,L=w._centerAltitude*T,H=w._camera,W=w._camera.forward(),se=k([],de([],W,-I),[0,0,L]),ue=w.worldSize/(2*Math.PI),me=[0,0,-ue],Ee=w.width/w.height,Ie=Math.tan(w.fovAboveCenter),Re=de([],H.up(),Ie),ze=de([],H.right(),Ie*Ee),Xe=pe([],k([],k([],W,Re),ze)),ht=[];let ut;if(new io(se,Xe).closestPointOnSphere(me,ue,ht)){const mt=k([],ht,me),$t=ot([],mt,se);ut=Math.cos(w.fovAboveCenter)*G($t)}else{const mt=ot([],se,me),$t=ot([],me,se);pe($t,$t);const Ut=G(mt)-ue;ut=Math.sqrt(Ut*(Ut+2*ue));const Ht=Math.acos(ut/(ue+Ut))-Math.acos(Oe(W,$t));ut*=Math.cos(Ht)}return 1.01*ut}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),y=GA(s.zoom);if(y>0){const w=wT(s,Ke(1,s.center.lat)*s.worldSize),T=s.worldSize/(2*Math.PI),I=Math.max(s.width,s.height)/s.worldSize*Math.PI;return at(u,w+T*(1-Math.cos(I)),Math.pow(y,10))}return u}upVector(s,u,y){return lg(u,y,s,1)}upVectorScale(s){return{metersToTile:Ad(cg(Ip(s)))}}}function IT(d){const s=d.parallels,u=!!s&&Math.abs(s[0]+s[1])<.01;switch(d.name){case"mercator":return new CT(d);case"equirectangular":return new m7(d);case"naturalEarth":return new y7(d);case"equalEarth":return new A7(d);case"winkelTripel":return new _7(d);case"albers":return u?new TT(d):new p7(d);case"lambertConformalConic":return u?new TT(d):new g7(d);case"globe":return new v7(d)}throw new Error(`Invalid projection name: ${d.name}`)}const b7=br.types,x7=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function U2(d,s,u,y,w,T,I,L,H,W,se,ue,me){const Ee=L?Math.min(gg,Math.round(L[0])):0,Ie=L?Math.min(gg,Math.round(L[1])):0;d.emplaceBack(s,u,Math.round(32*y),Math.round(32*w),T,I,(Ee<<1)+(H?1:0),Ie,16*W,16*se,256*ue,256*me)}function z2(d,s,u){d.emplaceBack(s,u)}function H2(d,s,u,y,w,T,I){d.emplaceBack(s,u,y,w,T,I)}const Q2=(d,s,u,y)=>{for(let w=0;w<s;w++)d.emplaceBack(u[0],u[1],u[2],y[0],y[1],y[2])};function V2(d,s,u,y,w){d.emplaceBack(s,u,y,w),d.emplaceBack(s,u,y,w),d.emplaceBack(s,u,y,w),d.emplaceBack(s,u,y,w)}function w7(d){for(const s of d.sections)if(kd(s.text))return!0;return!1}class E3{constructor(s){this.layoutVertexArray=new bp,this.indexArray=new Lo,this.programConfigurations=s,this.segments=new wo,this.dynamicLayoutVertexArray=new Qh,this.opacityVertexArray=new Yp,this.placedSymbolArray=new eA,this.iconTransitioningVertexArray=new cu,this.globeExtVertexArray=new Hd,this.zOffsetVertexArray=new Ud,this.orientationVertexArray=new Xp}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(s,u,y,w,T){this.isEmpty()||(y&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,TR.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,MR.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,x7,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=s.createVertexBuffer(this.iconTransitioningVertexArray,LR.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,IR.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||T)&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,FR.members,!0)),!this.orientationVertexBuffer&&this.orientationVertexArray&&this.orientationVertexArray.length>0&&(this.orientationVertexBuffer=s.createVertexBuffer(this.orientationVertexArray,PR.members,!0)),this.opacityVertexBuffer.itemSize=1),(y||w)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.orientationVertexBuffer&&this.orientationVertexBuffer.destroy())}}Xn(E3,"SymbolBuffers");class B3{constructor(s,u,y){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new y,this.segments=new wo,this.collisionVertexArray=new Ch,this.collisionVertexArrayExt=new Qh}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,kR.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,OR.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Xn(B3,"CollisionBuffers");class G2{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.lut=s.lut,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(I=>I.fqid),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=x([]),this.placementViewportMatrix=x([]);const u=this.layers[0]._unevaluatedLayout._values;this.worldview=s.worldview,this.textSizeData=iT(this.zoom,u["text-size"],this.worldview),this.iconSizeData=iT(this.zoom,u["icon-size"],this.worldview);const y=this.layers[0].layout,w=y.get("symbol-sort-key"),T=y.get("symbol-z-order");this.canOverlap=y.get("text-allow-overlap")||y.get("icon-allow-overlap")||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&w.constantOr(1)!==void 0,this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=y.get("text-writing-mode").map(I=>Gf[I]),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=s.sourceID,this.projection=s.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.hasAnySecondaryIcon=!1}createArrays(){this.text=new E3(new Qu(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("text")||s.startsWith("symbol"))),this.icon=new E3(new Qu(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("icon")||s.startsWith("symbol"))),this.glyphOffsetArray=new rA,this.lineVertexArray=new UA,this.symbolInstances=new tA}calculateGlyphDependencies(s,u,y,w,T){for(const I of s){const L=I.codePointAt(0);if(L===void 0)break;if(u[L]=!0,w&&T&&L<=65535){const H=x_[I];H&&(u[H.charCodeAt(0)]=!0)}}}updateFootprints(s,u){}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const y=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);return!F1(this.activeReplacements,y)&&(this.activeReplacements=y,!0)}populate(s,u,y,w){const T=this.layers[0],I=T.layout,L=this.projection.name==="globe",H=I.get("text-font"),W=I.get("text-field"),se=I.get("icon-image"),[ue,me]=I.get("icon-size-scale-range"),Ee=nt(u.scaleFactor||1,ue,me),Ie=(W.value.kind!=="constant"||W.value.value instanceof qs&&!W.value.value.isEmpty()||W.value.value.toString().length>0)&&(H.value.kind!=="constant"||H.value.value.length>0),Re=se.value.kind!=="constant"||!!se.value.value||Object.keys(se.parameters).length>0,ze=I.get("symbol-sort-key");if(this.features=[],!Ie&&!Re)return;const Xe=u.iconDependencies,ht=u.glyphDependencies,ut=u.availableImages,mt=new Ao(this.zoom,{worldview:this.worldview});for(const{feature:$t,id:Ut,index:Ht,sourceLayerIndex:or}of s){const cr=T._featureFilter.needGeometry,Gr=kr($t,cr);if(!T._featureFilter.filter(mt,Gr,y))continue;if(cr||(Gr.geometry=qt($t,y,w)),L&&$t.type!==1&&y.z<=5){const gn=Gr.geometry,En=.98078528056,zr=(_n,wr)=>Oe(lg(_n.x,_n.y,y,1),lg(wr.x,wr.y,y,1))<En;for(let _n=0;_n<gn.length;_n++)gn[_n]=Br(gn[_n],zr)}let xr,Yr;if(Ie){const gn=T.getValueAndResolveTokens("text-field",Gr,y,ut),En=qs.factory(gn);w7(En)&&(this.hasRTLText=!0),(!this.hasRTLText||Od()==="unavailable"||this.hasRTLText&&Du.isParsed())&&(xr=RR(En,T,Gr))}if(Re){const gn=T.getValueAndResolveTokens("icon-image",Gr,y,ut);Yr=typeof gn=="string"?Qo.build(gn):gn}if(!xr&&!Yr)continue;const In=this.sortFeaturesByKey?ze.evaluate(Gr,{},y):void 0,nn={id:Ut,text:xr,icon:Yr,index:Ht,sourceLayerIndex:or,geometry:Gr.geometry,properties:$t.properties,type:b7[$t.type],sortKey:In};if(this.features.push(nn),Yr){const gn=this.layers[0]._unevaluatedLayout._values,{iconPrimary:En,iconSecondary:zr}=_T(Yr,this.iconSizeData,gn["icon-size"],y,this.zoom,nn,this.pixelRatio,Ee,this.worldview),_n=En.id.toString();if(Xe.has(_n)?Xe.get(_n).push(En):Xe.set(_n,[En]),zr){this.hasAnySecondaryIcon=!0;const wr=zr.id.toString();Xe.has(wr)?Xe.get(wr).push(zr):Xe.set(wr,[zr])}}if(xr){const gn=H.evaluate(Gr,{},y).join(","),En=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Gf.vertical)>=0;for(const zr of xr.sections)if(zr.image){const _n=zr.image.getPrimary().scaleSelf(this.pixelRatio),wr=_n.id.toString(),Vr=Xe.get(wr)||[];Vr.push(_n),Xe.set(wr,Vr)}else{const _n=th(xr.toString()),wr=zr.fontStack||gn,Vr=ht[wr]=ht[wr]||{};this.calculateGlyphDependencies(zr.text,Vr,En,this.allowVerticalPlacement,_n)}}}if(I.get("symbol-placement")==="line"&&(this.features=function($t){const Ut={},Ht={},or=[];let cr=0;function Gr(nn){or.push($t[nn]),cr++}function xr(nn,gn,En){const zr=Ht[nn];return delete Ht[nn],Ht[gn]=zr,or[zr].geometry[0].pop(),or[zr].geometry[0]=or[zr].geometry[0].concat(En[0]),zr}function Yr(nn,gn,En){const zr=Ut[gn];return delete Ut[gn],Ut[nn]=zr,or[zr].geometry[0].shift(),or[zr].geometry[0]=En[0].concat(or[zr].geometry[0]),zr}function In(nn,gn,En){const zr=En?gn[0][gn[0].length-1]:gn[0][0];return`${nn}:${zr.x}:${zr.y}`}for(let nn=0;nn<$t.length;nn++){const gn=$t[nn],En=gn.geometry,zr=gn.text?gn.text.toString():null;if(!zr){Gr(nn);continue}const _n=In(zr,En),wr=In(zr,En,!0);if(_n in Ht&&wr in Ut&&Ht[_n]!==Ut[wr]){const Vr=Yr(_n,wr,En),Pn=xr(_n,wr,or[Vr].geometry);delete Ut[_n],delete Ht[wr],Ht[In(zr,or[Pn].geometry,!0)]=Pn,or[Vr].geometry=null}else _n in Ht?xr(_n,wr,En):wr in Ut?Yr(_n,wr,En):(Gr(nn),Ut[_n]=cr-1,Ht[wr]=cr-1)}return or.filter(nn=>nn.geometry)}(this.features)),I.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const $t of u.elevationFeatures)this.elevationFeatureIdToIndex.set($t.id,this.elevationFeatures.length),this.elevationFeatures.push($t)}}else I.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort(($t,Ut)=>$t.sortKey-Ut.sortKey)}update(s,u,y,w,T,I,L){this.text.programConfigurations.updatePaintArrays(s,u,T,y,w,I,L,this.worldview),this.icon.programConfigurations.updatePaintArrays(s,u,T,y,w,I,L,this.worldview)}updateRoadElevation(s){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let u=!1;const y=Mt(s),w=1/y;let T=!1,I=!1;for(let L=0;L<this.symbolInstances.length;L++){const H=this.symbolInstances.get(L),W=Z(1,0,0),se=Z(0,1,0),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:me,numIconVertices:Ee,numVerticalIconVertices:Ie}=H,Re=ue>0||me>0,ze=Ee>0,Xe=this.elevationFeatures[H.elevationFeatureIndex];if(Xe){const ht=new tr(H.tileAnchorX,H.tileAnchorY),ut=.075+Xe.pointElevation(ht);H.zOffset!==ut&&(u=!0,H.zOffset=ut);const mt=Xe.computeSlopeNormal(ht,w),$t=Ft(Gt(),Z(0,0,1),mt);Ge(W,W,$t),Ge(se,se,$t),W[2]*=y,se[2]*=y,W[0]===1&&W[1]===0&&W[2]===0&&se[0]===0&&se[1]===1&&se[2]===0||(T=T||Re,I=I||ze)}if(Re&&(Q2(this.text.orientationVertexArray,ue,W,se),Q2(this.text.orientationVertexArray,me,W,se)),ze){const{placedIconSymbolIndex:ht,verticalPlacedIconSymbolIndex:ut}=H;ht>=0&&Q2(this.icon.orientationVertexArray,Ee,W,se),ut>=0&&Q2(this.icon.orientationVertexArray,Ie,W,se)}}T||(this.text.orientationVertexArray=void 0),I||(this.icon.orientationVertexArray=void 0),u&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const s=(T,I,L)=>{y+=I,y>T.length&&T.resize(y);for(let H=-I;H<0;H++)T.emplace(H+y,L)},u=(T,I,L)=>{w+=I,w>T.length&&T.resize(w);for(let H=-I;H<0;H++)T.emplace(H+w,L)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let y=0,w=0;for(let T=0;T<this.symbolInstances.length;T++){const I=this.symbolInstances.get(T),{numHorizontalGlyphVertices:L,numVerticalGlyphVertices:H,numIconVertices:W}=I,se=I.zOffset,ue=W>0;if((L>0||H>0)&&(s(this.text.zOffsetVertexArray,L,se),s(this.text.zOffsetVertexArray,H,se)),ue){const{placedIconSymbolIndex:me,verticalPlacedIconSymbolIndex:Ee}=I;me>=0&&u(this.icon.zOffsetVertexArray,W,se),Ee>=0&&u(this.icon.zOffsetVertexArray,I.numVerticalIconVertices,se)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=IT(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){const y=this.lineVertexArray.length;if(s.segment!==void 0)for(const{x:w,y:T}of u)this.lineVertexArray.emplaceBack(w,T);return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re,ze){const Xe=s.indexArray,ht=s.layoutVertexArray,ut=s.globeExtVertexArray,mt=s.segments.prepareSegment(4*u.length,ht,Xe,this.canOverlap?I.sortKey:void 0),$t=this.glyphOffsetArray.length,Ut=mt.vertexLength,Ht=this.allowVerticalPlacement&&L===Gf.vertical?Math.PI/2:0,or=I.text&&I.text.sections;for(let Gr=0;Gr<u.length;Gr++){const{tl:xr,tr:Yr,bl:In,br:nn,texPrimary:gn,texSecondary:En,pixelOffsetTL:zr,pixelOffsetBR:_n,minFontScaleX:wr,minFontScaleY:Vr,glyphOffset:Pn,isSDF:xn,sectionIndex:Ei}=u[Gr],pi=mt.vertexLength,An=Pn[1];if(U2(ht,W.x,W.y,xr.x,An+xr.y,gn.x,gn.y,y,xn,zr.x,zr.y,wr,Vr),U2(ht,W.x,W.y,Yr.x,An+Yr.y,gn.x+gn.w,gn.y,y,xn,_n.x,zr.y,wr,Vr),U2(ht,W.x,W.y,In.x,An+In.y,gn.x,gn.y+gn.h,y,xn,zr.x,_n.y,wr,Vr),U2(ht,W.x,W.y,nn.x,An+nn.y,gn.x+gn.w,gn.y+gn.h,y,xn,_n.x,_n.y,wr,Vr),H){const{x:Cn,y:yi,z:ii}=H.anchor,[Rn,oi,Ui]=H.up;H2(ut,Cn,yi,ii,Rn,oi,Ui),H2(ut,Cn,yi,ii,Rn,oi,Ui),H2(ut,Cn,yi,ii,Rn,oi,Ui),H2(ut,Cn,yi,ii,Rn,oi,Ui),V2(s.dynamicLayoutVertexArray,Cn,yi,ii,Ht)}else V2(s.dynamicLayoutVertexArray,W.x,W.y,W.z,Ht);if(ze){const Cn=En||gn;z2(s.iconTransitioningVertexArray,Cn.x,Cn.y),z2(s.iconTransitioningVertexArray,Cn.x+Cn.w,Cn.y),z2(s.iconTransitioningVertexArray,Cn.x,Cn.y+Cn.h),z2(s.iconTransitioningVertexArray,Cn.x+Cn.w,Cn.y+Cn.h)}Xe.emplaceBack(pi,pi+1,pi+2),Xe.emplaceBack(pi+1,pi+2,pi+3),mt.vertexLength+=4,mt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pn[0]),Gr!==u.length-1&&Ei===u[Gr+1].sectionIndex||s.programConfigurations.populatePaintArrays(ht.length,I,I.index,{},Ee,Ie,Re,or&&or[Ei],this.worldview)}const cr=H?H.anchor:W;s.placedSymbolArray.emplaceBack(cr.x,cr.y,cr.z,W.x,W.y,$t,this.glyphOffsetArray.length-$t,Ut,se,ue,W.segment,y?y[0]:0,y?y[1]:0,w[0],w[1],L,0,0,0,me,0)}_commitLayoutVertex(s,u,y,w,T,I,L){s.emplaceBack(u,y,w,T,I,Math.round(L.x),Math.round(L.y))}_addCollisionDebugVertices(s,u,y,w,T,I,L){const H=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),W=H.vertexLength,se=L.tileAnchorX,ue=L.tileAnchorY;for(let Ee=0;Ee<4;Ee++)y.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(y.collisionVertexArrayExt,u,s.padding,L.zOffset),this._commitLayoutVertex(y.layoutVertexArray,w,T,I,se,ue,new tr(s.x1,s.y1)),this._commitLayoutVertex(y.layoutVertexArray,w,T,I,se,ue,new tr(s.x2,s.y1)),this._commitLayoutVertex(y.layoutVertexArray,w,T,I,se,ue,new tr(s.x2,s.y2)),this._commitLayoutVertex(y.layoutVertexArray,w,T,I,se,ue,new tr(s.x1,s.y2)),H.vertexLength+=4;const me=y.indexArray;me.emplaceBack(W,W+1),me.emplaceBack(W+1,W+2),me.emplaceBack(W+2,W+3),me.emplaceBack(W+3,W),H.primitiveLength+=4}_addTextDebugCollisionBoxes(s,u,y,w,T,I){for(let L=w;L<T;L++){const H=y.get(L),W=this.getSymbolInstanceTextSize(s,I,u,L);this._addCollisionDebugVertices(H,W,this.textCollisionBox,H.projectedAnchorX,H.projectedAnchorY,H.projectedAnchorZ,I)}}_addIconDebugCollisionBoxes(s,u,y,w,T,I){for(let L=w;L<T;L++){const H=y.get(L),W=this.getSymbolInstanceIconSize(s,u,I.placedIconSymbolIndex);this._addCollisionDebugVertices(H,W,this.iconCollisionBox,H.projectedAnchorX,H.projectedAnchorY,H.projectedAnchorZ,I)}}generateCollisionDebugBuffers(s,u,y){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new B3(RA,QB.members,cu),this.iconCollisionBox=new B3(RA,QB.members,cu);const w=S_(this.iconSizeData,s),T=S_(this.textSizeData,s,y);for(let I=0;I<this.symbolInstances.length;I++){const L=this.symbolInstances.get(I);this._addTextDebugCollisionBoxes(T,s,u,L.textBoxStartIndex,L.textBoxEndIndex,L),this._addTextDebugCollisionBoxes(T,s,u,L.verticalTextBoxStartIndex,L.verticalTextBoxEndIndex,L),this._addIconDebugCollisionBoxes(w,s,u,L.iconBoxStartIndex,L.iconBoxEndIndex,L),this._addIconDebugCollisionBoxes(w,s,u,L.verticalIconBoxStartIndex,L.verticalIconBoxEndIndex,L)}}getSymbolInstanceTextSize(s,u,y,w){const T=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:w),I=_3(this.textSizeData,s,T)/hu;return this.tilePixelRatio*I}getSymbolInstanceIconSize(s,u,y){const w=this.icon.placedSymbolArray.get(y),T=_3(this.iconSizeData,s,w);return this.tilePixelRatio*T}_commitDebugCollisionVertexUpdate(s,u,y,w){s.emplaceBack(u,-y,-y,w),s.emplaceBack(u,y,-y,w),s.emplaceBack(u,y,y,w),s.emplaceBack(u,-y,y,w)}_updateTextDebugCollisionBoxes(s,u,y,w,T,I,L){for(let H=w;H<T;H++){const W=y.get(H),se=this.getSymbolInstanceTextSize(s,I,u,H);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,se,W.padding,I.zOffset)}}_updateIconDebugCollisionBoxes(s,u,y,w,T,I,L){for(let H=w;H<T;H++){const W=y.get(H),se=this.getSymbolInstanceIconSize(s,u,I.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,se,W.padding,I.zOffset)}}updateCollisionDebugBuffers(s,u,y,w){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const T=S_(this.iconSizeData,s,w),I=S_(this.textSizeData,s,y);for(let L=0;L<this.symbolInstances.length;L++){const H=this.symbolInstances.get(L);this._updateTextDebugCollisionBoxes(I,s,u,H.textBoxStartIndex,H.textBoxEndIndex,H,y),this._updateTextDebugCollisionBoxes(I,s,u,H.verticalTextBoxStartIndex,H.verticalTextBoxEndIndex,H,y),this._updateIconDebugCollisionBoxes(T,s,u,H.iconBoxStartIndex,H.iconBoxEndIndex,H,w),this._updateIconDebugCollisionBoxes(T,s,u,H.verticalIconBoxStartIndex,H.verticalIconBoxEndIndex,H,w)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,u,y,w,T,I,L,H,W){const se={};if(u<y){const{x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt,featureIndex:$t}=s.get(u);se.textBox={x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt},se.textFeatureIndex=$t}if(w<T){const{x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt,featureIndex:$t}=s.get(w);se.verticalTextBox={x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt},se.verticalTextFeatureIndex=$t}if(I<L){const{x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt,featureIndex:$t}=s.get(I);se.iconBox={x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt},se.iconFeatureIndex=$t}if(H<W){const{x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt,featureIndex:$t}=s.get(H);se.verticalIconBox={x1:ue,y1:me,x2:Ee,y2:Ie,padding:Re,projectedAnchorX:ze,projectedAnchorY:Xe,projectedAnchorZ:ht,tileAnchorX:ut,tileAnchorY:mt},se.verticalIconFeatureIndex=$t}return se}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const y=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(s,u){const y=s.placedSymbolArray.get(u),w=y.vertexStartIndex+4*y.numGlyphs;for(let T=y.vertexStartIndex;T<w;T+=4)s.indexArray.emplaceBack(T,T+1,T+2),s.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(s),y=Math.cos(s),w=[],T=[],I=[];for(let L=0;L<this.symbolInstances.length;++L){I.push(L);const H=this.symbolInstances.get(L);w.push(0|Math.round(u*H.tileAnchorX+y*H.tileAnchorY)),T.push(H.featureIndex)}return I.sort((L,H)=>w[L]-w[H]||T[H]-T[L]),I}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let s=0;s<this.symbolInstances.length;++s)this.symbolInstanceIndexesSortedZOffset.push(s)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((s,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(s).zOffset)}addToSortKeyRanges(s,u){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===u?y.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const y=this.symbolInstances.get(u);this.featureSortOrder.push(y.featureIndex);const{rightJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:T,leftJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:L,placedIconSymbolIndex:H,verticalPlacedIconSymbolIndex:W}=y;w>=0&&this.addIndicesForPlacedSymbol(this.text,w),T>=0&&T!==w&&this.addIndicesForPlacedSymbol(this.text,T),I>=0&&I!==T&&I!==w&&this.addIndicesForPlacedSymbol(this.text,I),L>=0&&this.addIndicesForPlacedSymbol(this.text,L),H>=0&&this.addIndicesForPlacedSymbol(this.icon,H),W>=0&&this.addIndicesForPlacedSymbol(this.icon,W)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let MT,FT,T3;Xn(G2,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),G2.addDynamicAttributes=V2;class PT{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:cn,this.defaultValue=s}evaluate(s){if(s.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xn(PT,"FormatSectionOverride",{omit:["defaultValue"]});const I3=()=>T3||(T3={layout:MT||(MT=new Po({"symbol-placement":new mn(Ar.layout_symbol["symbol-placement"]),"symbol-spacing":new mn(Ar.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mn(Ar.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jn(Ar.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mn(Ar.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new mn(Ar.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new mn(Ar.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new mn(Ar.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mn(Ar.layout_symbol["icon-ignore-placement"]),"icon-optional":new mn(Ar.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mn(Ar.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jn(Ar.layout_symbol["icon-size"]),"icon-size-scale-range":new mn(Ar.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Jn(Ar.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Jn(Ar.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jn(Ar.layout_symbol["icon-image"]),"icon-rotate":new Jn(Ar.layout_symbol["icon-rotate"]),"icon-padding":new mn(Ar.layout_symbol["icon-padding"]),"icon-keep-upright":new mn(Ar.layout_symbol["icon-keep-upright"]),"icon-offset":new Jn(Ar.layout_symbol["icon-offset"]),"icon-anchor":new Jn(Ar.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mn(Ar.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mn(Ar.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mn(Ar.layout_symbol["text-rotation-alignment"]),"text-field":new Jn(Ar.layout_symbol["text-field"]),"text-font":new Jn(Ar.layout_symbol["text-font"]),"text-size":new Jn(Ar.layout_symbol["text-size"]),"text-size-scale-range":new mn(Ar.layout_symbol["text-size-scale-range"]),"text-max-width":new Jn(Ar.layout_symbol["text-max-width"]),"text-line-height":new Jn(Ar.layout_symbol["text-line-height"]),"text-letter-spacing":new Jn(Ar.layout_symbol["text-letter-spacing"]),"text-justify":new Jn(Ar.layout_symbol["text-justify"]),"text-radial-offset":new Jn(Ar.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mn(Ar.layout_symbol["text-variable-anchor"]),"text-anchor":new Jn(Ar.layout_symbol["text-anchor"]),"text-max-angle":new mn(Ar.layout_symbol["text-max-angle"]),"text-writing-mode":new mn(Ar.layout_symbol["text-writing-mode"]),"text-rotate":new Jn(Ar.layout_symbol["text-rotate"]),"text-padding":new mn(Ar.layout_symbol["text-padding"]),"text-keep-upright":new mn(Ar.layout_symbol["text-keep-upright"]),"text-transform":new Jn(Ar.layout_symbol["text-transform"]),"text-offset":new Jn(Ar.layout_symbol["text-offset"]),"text-allow-overlap":new mn(Ar.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mn(Ar.layout_symbol["text-ignore-placement"]),"text-optional":new mn(Ar.layout_symbol["text-optional"]),visibility:new mn(Ar.layout_symbol.visibility)})),paint:FT||(FT=new Po({"icon-opacity":new Jn(Ar.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Jn(Ar.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Jn(Ar.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Jn(Ar.paint_symbol["text-emissive-strength"]),"icon-color":new Jn(Ar.paint_symbol["icon-color"]),"icon-halo-color":new Jn(Ar.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jn(Ar.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jn(Ar.paint_symbol["icon-halo-blur"]),"icon-translate":new mn(Ar.paint_symbol["icon-translate"]),"icon-translate-anchor":new mn(Ar.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new mn(Ar.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Jn(Ar.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Jn(Ar.paint_symbol["text-occlusion-opacity"]),"text-color":new Jn(Ar.paint_symbol["text-color"],{runtimeType:vs,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Jn(Ar.paint_symbol["text-halo-color"]),"text-halo-width":new Jn(Ar.paint_symbol["text-halo-width"]),"text-halo-blur":new Jn(Ar.paint_symbol["text-halo-blur"]),"text-translate":new mn(Ar.paint_symbol["text-translate"]),"text-translate-anchor":new mn(Ar.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new mn(Ar.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new mn(Ar.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new mn(Ar.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new mn(Ar.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Jn(Ar.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},T3);class W2 extends el{constructor(s,u,y,w){super(s,I3(),u,y,w),this._colorAdjustmentMatrix=x([]),this.hasInitialOcclusionOpacityProperties=s.paint!==void 0&&("icon-occlusion-opacity"in s.paint||"text-occlusion-opacity"in s.paint)}recalculate(s,u){super.recalculate(s,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const y=this.layout.get("text-writing-mode");if(y){const w=[];for(const T of y)w.indexOf(T)<0&&w.push(T);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(s,u,y,w){return this._saturation===s&&this._contrast===u&&this._brightnessMin===y&&this._brightnessMax===w||(this._colorAdjustmentMatrix=function(T,I,L,H){T=zi(T),I=xs(I);const W=b(),se=T/3,ue=1-2*se,me=[ue,se,se,0,se,ue,se,0,se,se,ue,0,0,0,0,1],Ee=.5-.5*I,Ie=H-L;return S(W,[Ie,0,0,0,0,Ie,0,0,0,0,Ie,0,L,L,L,1],[I,0,0,0,0,I,0,0,0,0,I,0,Ee,Ee,Ee,1]),S(W,W,me),W}(s,u,y,w),this._saturation=s,this._contrast=u,this._brightnessMin=y,this._brightnessMax=w),this._colorAdjustmentMatrix}getValueAndResolveTokens(s,u,y,w){const T=this.layout.get(s).evaluate(u,{},y,w),I=this._unevaluatedLayout._values[s];return I.isDataDriven()||$o(I.value)||!T?T:function(L,H){return H.replace(/{([^{}]+)}/g,(W,se)=>se in L?String(L[se]):"")}(u.properties,T)}createBucket(s){return new G2(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of I3().paint.overridableProperties){if(!W2.hasPaintOverride(this.layout,s))continue;const u=this.paint.get(s),y=new PT(u),w=new Wo(y,u.property.specification,this.scope,this.options);let T=null;T=u.value.kind==="constant"||u.value.kind==="source"?new hl("source",w):new $a("composite",w,u.value.zoomStops,u.value.interpolationType),this.paint._values[s]=new Ru(u.property,T,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,y){return!(!this.layout||u.isDataDriven()||y.isDataDriven())&&W2.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){const y=s.get("text-field"),w=I3().paint.properties[u];let T=!1;const I=L=>{for(const H of L)if(w.overrides&&w.overrides.hasOverride(H))return void(T=!0)};if(y.value.kind==="constant"&&y.value.value instanceof qs)I(y.value.value.sections);else if(y.value.kind==="source"){const L=W=>{T||(W instanceof Ii&&Sn(W.value)===lr?I(W.value.sections):W instanceof aa?I(W.sections):W.eachChild(L))},H=y.value;H._styleExpression&&L(H._styleExpression.expression)}return T}getProgramIds(){return["symbol"]}getDefaultProgramParams(s,u,y){return{config:new kc(this,{zoom:u,lut:y}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let LT,kT,OT,DT;var M3=Gs([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function $2(d,s,u,y,w,T,I,L){const H=[d,s,1,u,y,1,w,T,1],W=[I,L,1],se=g([],H),[ue,me,Ee]=He(W,W,se);return m(H,H,[ue,0,0,0,me,0,0,0,Ee])}function RT(d,s,u,y,w,T,I,L){const H=function(W,se,ue,me,Ee,Ie,Re,ze){const Xe=$2(0,0,1,0,1,1,0,1),ht=$2(W,se,ue,me,Ee,Ie,Re,ze);return m(ht,ht,g([],Xe))}(d,s,u,y,w,T,I,L);return[H[2]/H[8]/tn,H[5]/H[8]/tn]}function K2(d){return[d[0],Math.min(Math.max(d[1],-Tt),Tt)]}class NT extends Lu{constructor(s,u,y,w){super(),this.id=s,this.dispatcher=y,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(w),this.options=u,this._dirty=!1}load(s,u){if(this._loaded=u||!1,this.fire(new tu("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return s&&(this.coordinates=s),this._loaded=!0,void this._finishLoading();this._imageRequest=Ho(this.map._requestManager.transformRequest(this.url,Jc.Image),(y,w)=>{this._imageRequest=null,this._loaded=!0,y?this.fire(new go(y)):w&&(this.image=w instanceof HTMLImageElement?ro.getImageData(w):w,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}setTexture(s){if(!(s.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new B0(this.map.painter.context,s.handle),this.width=s.dimensions[0],this.height=s.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new tu("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(s){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof B0||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(s){if(this.coordinates=s,this._boundsArray=void 0,this._unsupportedCoords=!1,!s.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=s[0][1],y=s[0][1];for(const T of s)T[1]>y&&(y=T[1]),T[1]<u&&(u=T[1]);const w=(y+u)/2;if(w>Tt?this.onNorthPole=!0:w<-Tt&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const T=s.map(Pt.fromLngLat);this.tileID=function(I){let L=1/0,H=1/0,W=-1/0,se=-1/0;for(const Re of I)L=Math.min(L,Re.x),H=Math.min(H,Re.y),W=Math.max(W,Re.x),se=Math.max(se,Re.y);const ue=Math.max(W-L,se-H),me=Math.max(0,Math.floor(-Math.log(ue)/Math.LN2)),Ee=Math.pow(2,me);let Ie=Math.floor((L+W)/2*Ee);return Ie>1&&(Ie-=1),new Kl(me,Ie,Math.floor((H+se)/2*Ee))}(T),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new tu("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){!this.texture||this.texture instanceof B0||(this.texture.destroy(),this._dirty=!0),this.texture=null,this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(s){for(const Xe in this.tiles){const ht=this.tiles[Xe];ht.state!=="loaded"&&(ht.state="loaded",ht.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=T_(new Kl(0,0,0),this.map.transform.projection),y=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(Xe){const ht=Xe[1].x-Xe[0].x,ut=Xe[1].y-Xe[0].y,mt=Xe[2].x-Xe[1].x,$t=Xe[2].y-Xe[1].y,Ut=Xe[3].x-Xe[2].x,Ht=Xe[3].y-Xe[2].y,or=Xe[0].x-Xe[3].x,cr=Xe[0].y-Xe[3].y,Gr=ht*$t-mt*ut,xr=mt*Ht-Ut*$t,Yr=Ut*cr-or*Ht,In=or*ut-ht*cr;return Gr>0&&xr>0&&Yr>0&&In>0||Gr<0&&xr<0&&Yr<0&&In<0}(y))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const w=T_(this.tileID,this.map.transform.projection),[T,I,L,H]=this.coordinates.map(Xe=>{const ht=w.projection.project(Xe[0],Xe[1]);return ST(w,ht)._round()});this.perspectiveTransform=RT(T.x,T.y,I.x,I.y,L.x,L.y,H.x,H.y);const W=this._boundsArray=new jd;W.emplaceBack(T.x,T.y,0,0),W.emplaceBack(I.x,I.y,tn,0),W.emplaceBack(H.x,H.y,0,tn),W.emplaceBack(L.x,L.y,tn,tn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=s.createVertexBuffer(W,M3.members),this.boundsSegments=wo.simpleSegment(0,0,4,2);const se=[],ue=[K2((me=this.coordinates)[0]),K2(me[1]),K2(me[2]),K2(me[3])];var me;const[Ee,Ie,Re,ze]=function(Xe){let ht=Xe[0][0],ut=ht,mt=Xe[0][1],$t=mt;for(let Ut=1;Ut<Xe.length;Ut++)Xe[Ut][0]<ht?ht=Xe[Ut][0]:Xe[Ut][0]>ut&&(ut=Xe[Ut][0]),Xe[Ut][1]<mt?mt=Xe[Ut][1]:Xe[Ut][1]>$t&&($t=Xe[Ut][1]);return[ht,mt,ut-ht,$t-mt]}(ue);{const Xe=new jd,[ht,ut,mt,$t]=function(zr){let _n=zr[0].x,wr=_n,Vr=zr[0].y,Pn=Vr;for(let xn=1;xn<zr.length;xn++)zr[xn].x<_n?_n=zr[xn].x:zr[xn].x>wr&&(wr=zr[xn].x),zr[xn].y<Vr?Vr=zr[xn].y:zr[xn].y>Pn&&(Pn=zr[xn].y);return[_n,Vr,wr-_n,Pn-Vr]}(y),Ut=zr=>[(zr.x-ht)/mt,(zr.y-ut)/$t],[Ht,or,cr,Gr]=y.map(Ut),xr=function(zr,_n,wr,Vr,Pn,xn,Ei,pi){const An=$2(0,0,1,0,1,1,0,1);return m(An,An,g([],$2(zr,_n,wr,Vr,Pn,xn,Ei,pi)))}(Ht[0],Ht[1],or[0],or[1],cr[0],cr[1],Gr[0],Gr[1]);this.elevatedGlobePerspectiveTransform=RT(Ht[0],Ht[1],or[0],or[1],cr[0],cr[1],Gr[0],Gr[1]);const Yr=(zr,_n)=>{se.push(zr.lng);const wr=Math.round((zr.lng-Ee)/Re*tn),Vr=Math.round((zr.lat-Ie)/ze*tn),Pn=Ut(_n),xn=He([],[Pn[0],Pn[1],1],xr),Ei=Math.round(xn[0]/xn[2]*tn),pi=Math.round(xn[1]/xn[2]*tn);Xe.emplaceBack(wr,Vr,Ei,pi)},In=y[3].x-y[0].x,nn=y[3].y-y[0].y,gn=y[2].x-y[1].x,En=y[2].y-y[1].y;for(let zr=0;zr<65;zr++){const _n=zr/64,wr=[y[0].x+_n*In,y[0].y+_n*nn],Vr=[y[1].x+_n*gn,y[1].y+_n*En],Pn=Vr[0]-wr[0],xn=Vr[1]-wr[1];for(let Ei=0;Ei<65;Ei++){const pi=Ei/64,An={x:wr[0]+Pn*pi,y:wr[1]+xn*pi};Yr(u.projection.unproject(An.x,An.y),An)}}this.elevatedGlobeVertexBuffer=s.createVertexBuffer(Xe,M3.members)}{this.maxLongitudeTriangleSize=0;let Xe=[],ht=new Lo;const ut=(mt,$t,Ut)=>{ht.emplaceBack(mt,$t,Ut);const Ht=se[mt],or=se[$t],cr=se[Ut],Gr=Math.min(Math.min(Ht,or),cr),xr=Math.max(Math.max(Ht,or),cr)-Gr;xr>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=xr),Xe.push(Gr+xr/2)};for(let mt=0;mt<64;mt++)for(let $t=0;$t<64;$t++){const Ut=65*mt+$t,Ht=Ut+1,or=Ut+65,cr=or+1;ut(Ut,or,Ht),ut(Ht,or,cr)}[Xe,ht]=function(mt,$t){const Ut=Array.from({length:mt.length},(cr,Gr)=>Gr);Ut.sort((cr,Gr)=>mt[cr]-mt[Gr]);const Ht=[],or=new Lo;for(let cr=0;cr<Ut.length;cr++){const Gr=Ut[cr];Ht.push(mt[Gr]);const xr=3*Gr,Yr=xr+1;or.emplaceBack($t.uint16[xr],$t.uint16[Yr],$t.uint16[Yr+1])}return[Ht,or]}(Xe,ht),this.elevatedGlobeTrianglesCenterLongitudes=Xe,this.elevatedGlobeIndexBuffer=s.createIndexBuffer(ht)}this.elevatedGlobeSegments=wo.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,Re/tn,0,ze/tn,0,0,Ie,Ee,0])}prepare(){const s=Object.keys(this.tiles).length!==0;if(this.tileID&&!s)return;const u=this.map.painter.context,y=u.gl;!this._dirty||this.texture instanceof B0||(this.texture?this.texture.update(this.image):(this.texture=new __(u,this.image,y.RGBA8),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE)),this._dirty=!1),s&&this._prepareData(u)}loadTile(s,u){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},u(null)):(s.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(s){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const y=this.elevatedGlobeTrianglesCenterLongitudes;let w=(T=s+180)+360*Math.round((y[0]-T)/360);var T;const I=new wo,L=(ue,me)=>{I.segments.push({vertexOffset:0,primitiveOffset:ue,vertexLength:u.segments[0].vertexLength,primitiveLength:me,sortKey:void 0,vaos:{}})},H=.51*this.maxLongitudeTriangleSize;if(Math.abs(y[0]-w)<=H){const ue=us(y,0,y.length,w+H);return ue===y.length||L(ue,Wi(y,ue+1,y.length,w+360-H)-ue),I}w<y[0]&&(w+=360);const W=Wi(y,0,y.length,w-H);if(W===y.length)return L(0,y.length),I;L(0,W-0);const se=us(y,W+1,y.length,w+H);return se!==y.length&&L(se,y.length-se),I}}const S7=(Math.pow(256,2)-1)/16907520;class jT extends el{constructor(s,u,y,w){super(s,{layout:OT||(OT=new Po({visibility:new mn(Ar.layout_raster.visibility)})),paint:DT||(DT=new Po({"raster-opacity":new mn(Ar.paint_raster["raster-opacity"]),"raster-color":new Nu(Ar.paint_raster["raster-color"]),"raster-color-mix":new mn(Ar.paint_raster["raster-color-mix"]),"raster-color-range":new mn(Ar.paint_raster["raster-color-range"]),"raster-hue-rotate":new mn(Ar.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mn(Ar.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mn(Ar.paint_raster["raster-brightness-max"]),"raster-saturation":new mn(Ar.paint_raster["raster-saturation"]),"raster-contrast":new mn(Ar.paint_raster["raster-contrast"]),"raster-resampling":new mn(Ar.paint_raster["raster-resampling"]),"raster-fade-duration":new mn(Ar.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new mn(Ar.paint_raster["raster-emissive-strength"]),"raster-array-band":new mn(Ar.paint_raster["raster-array-band"]),"raster-elevation":new mn(Ar.paint_raster["raster-elevation"]),"raster-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},u,y,w),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(s){return!(s&&s._source instanceof NT&&(s._source.onNorthPole||s._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(s){s!=="raster-color"&&s!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}_clear(){this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}updateColorRamp(s){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[y,w]=s||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(y)&&isNaN(w)||y===this._curRampRange[0]&&w===this._curRampRange[1]||(this.colorRamp=f0({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:y,end:w}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[y,w])}}let UT,zT,HT,QT,VT;class GT extends el{constructor(s,u,y,w){super(s,{layout:UT||(UT=new Po({visibility:new mn(Ar["layout_raster-particle"].visibility)})),paint:zT||(zT=new Po({"raster-particle-array-band":new mn(Ar["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new mn(Ar["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Nu(Ar["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new mn(Ar["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new mn(Ar["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new mn(Ar["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new mn(Ar["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new mn(Ar["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},u,y,w),this._updateColorRamp(),this.lastInvalidatedAt=ro.now()}_clear(){this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null),this.tileFramebuffer&&(this.tileFramebuffer.destroy(),this.tileFramebuffer=null),this.particleFramebuffer&&(this.particleFramebuffer.destroy(),this.particleFramebuffer=null)}onRemove(s){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(s){return!1}_handleSpecialPaintPropertyUpdate(s){s!=="raster-particle-color"&&s!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),s==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const s=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=f0({expression:s,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=ro.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class C7 extends el{constructor(s,u){super(s,{},u,null),this.implementation=s,s.slot&&(this.slot=s.slot)}is3D(s){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(s){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}function F3(d,s,u){const y=[0,0,1],w=fr([]);return yr(w,w,u?-li(d)+Math.PI:li(d)),Tr(w,w,-li(s)),Ge(y,y,w),pe(y,y)}const WT={None:0,Model:1,Symbol:2,FillExtrusion:4};class q2{constructor(s,u,y,w){this.message=(s?`${s}: `:"")+y,w&&(this.identifier=w),u!=null&&u.__line__&&(this.line=u.__line__)}}function P3(d,s){const u=d.indexOf("://")===-1;try{return new URL(d,u&&s?"http://example.com":void 0),!0}catch{return!1}}class $T{constructor(s,u){this.feature=s,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class KT{constructor(){this.instancedDataArray=new Sp,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class L3{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=s.projection,this.index=s.index,this.worldview=s.worldview,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=s.styleDefinedModelURLs}updateFootprints(s,u){}populate(s,u,y,w){this.tileToMeter=Mt(y);const T=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:I,id:L,index:H,sourceLayerIndex:W}of s){const se=L??(I.properties&&I.properties.hasOwnProperty("id")?I.properties.id:void 0),ue=kr(I,T);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom,{worldview:this.worldview}),ue,y))continue;const me={id:se,sourceLayerIndex:W,index:H,geometry:T?ue.geometry:qt(I,y,w),properties:I.properties,type:I.type,patterns:{}},Ee=this.addFeature(me,me.geometry,ue);Ee&&u.featureIndex.insert(I,me.geometry,H,W,this.index,this.instancesPerModel[Ee].instancedDataArray.length,tn/32)}this.lookup=null}update(s,u,y,w){for(const T in this.instancesPerModel){const I=this.instancesPerModel[T];for(const L in s)I.idToFeaturesIndex.hasOwnProperty(L)&&(this.evaluate(I.features[I.idToFeaturesIndex[L]],s[L],I,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let s=!1;for(const u in this.instancesPerModel){const y=this.instancesPerModel[u];for(const w of y.features){const T=this.layers[0],I=w.feature,L=this.canonical,H=T.paint.get("model-rotation").evaluate(I,{},L),W=T.paint.get("model-scale").evaluate(I,{},L),se=T.paint.get("model-translation").evaluate(I,{},L);st(w.rotation,H)&&st(w.scale,W)&&st(w.translation,se)||(this.evaluate(w,w.featureStates,y,!0),s=!0)}}return s}updateReplacement(s,u,y,w){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const T=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);if(F1(this.activeReplacements,T))return!1;this.activeReplacements=T;let I=!1;for(const L in this.instancesPerModel){const H=this.instancesPerModel[L],W=H.instancedDataArray;for(const se of H.features){const ue=se.instancedDataOffset,me=se.instancedDataCount;for(let Ee=0;Ee<me;Ee++){const Ie=16*(Ee+ue);let Re=W.float32[Ie+0];const ze=Re>tn;Re=ze?Re-tn:Re;const Xe=Math.floor(Re),ht=W.float32[Ie+1];let ut=!1;for(const mt of this.activeReplacements)if(!Kb(mt,y,WT.Model,w)&&!(mt.min.x>Xe||Xe>mt.max.x||mt.min.y>ht||ht>mt.max.y)&&(ut=P1(Zb(Xe,ht,s.canonical,mt.footprintTileId.canonical),mt.footprint),ut))break;W.float32[Ie]=ut?Re+tn:Re,I=I||ut!==ze}}}return I}isEmpty(){for(const s in this.instancesPerModel)if(this.instancesPerModel[s].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(s){if(!this.uploaded)for(const u in this.instancesPerModel){const y=this.instancesPerModel[u];y.instancedDataArray.length<0||y.instancedDataArray.length===0||(y.instancedDataBuffer?y.instancedDataBuffer.updateData(y.instancedDataArray):y.instancedDataBuffer=s.createVertexBuffer(y.instancedDataArray,c3.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const y=this.instancesPerModel[u];y.instancedDataArray.length!==0&&y.instancedDataBuffer&&y.instancedDataBuffer.destroy()}const s=this.layers[0].modelManager;if(s&&this.modelUris&&this.modelsRequested)for(const u of this.modelUris)s.removeModel(u,"",!0)}addFeature(s,u,y){const w=this.layers[0],T=w.layout.get("model-id").evaluate(y,{},this.canonical);if(!T)return Qi(`modelId is not evaluated for layer ${w.id} and it is not going to get rendered.`),T;(P3(T,!1)||this.styleDefinedModelURLs[T]!==void 0)&&(this.modelUris.includes(T)||this.modelUris.push(T)),this.instancesPerModel[T]||(this.instancesPerModel[T]=new KT);const I=this.instancesPerModel[T],L=I.instancedDataArray,H=new $T(y,L.length);for(const W of u)for(const se of W){if(se.x<0||se.x>=tn||se.y<0||se.y>=tn)continue;const ue=(this.lookupDim-1)/tn,me=this.lookupDim*(se.y*ue|0)+se.x*ue|0;if(this.lookup){if(this.lookup[me]!==0)continue;this.lookup[me]=1}this.instanceCount++;const Ee=L.length;L.resize(Ee+1),I.instancesEvaluatedElevation.push(0),L.float32[16*Ee]=se.x,L.float32[16*Ee+1]=se.y}return H.instancedDataCount=I.instancedDataArray.length-H.instancedDataOffset,H.instancedDataCount>0&&(s.id&&(I.idToFeaturesIndex[s.id]=I.features.length),I.features.push(H),this.evaluate(H,{},I,!1)),T}getModelUris(){return this.modelUris}evaluate(s,u,y,w){const T=this.layers[0],I=s.feature,L=this.canonical,H=s.rotation=T.paint.get("model-rotation").evaluate(I,u,L),W=s.scale=T.paint.get("model-scale").evaluate(I,u,L),se=s.translation=T.paint.get("model-translation").evaluate(I,u,L),ue=T.paint.get("model-color").evaluate(I,u,L);ue.a=T.paint.get("model-color-mix-intensity").evaluate(I,u,L);const me=[];this.maxVerticalOffset<se[2]&&(this.maxVerticalOffset=se[2]),this.maxScale=Math.max(Math.max(this.maxScale,W[0]),Math.max(W[1],W[2])),Sr(me,H,W);const Ee=Math.round(100*ue.a)+ue.b/1.05;for(let Ie=0;Ie<s.instancedDataCount;++Ie){const Re=s.instancedDataOffset+Ie,ze=16*Re,Xe=y.instancedDataArray.float32;let ht=0;w&&(ht=Xe[ze+6]-y.instancesEvaluatedElevation[Re]);const ut=0|Xe[ze+1];Xe[ze]=(0|Xe[ze])+ue.r/1.05,Xe[ze+1]=ut+ue.g/1.05,Xe[ze+2]=Ee,Xe[ze+3]=1/(L.z>10?this.tileToMeter:Mt(L,ut)),Xe[ze+4]=se[0],Xe[ze+5]=se[1],Xe[ze+6]=se[2]+ht,Xe[ze+7]=me[0],Xe[ze+8]=me[1],Xe[ze+9]=me[2],Xe[ze+10]=me[4],Xe[ze+11]=me[5],Xe[ze+12]=me[6],Xe[ze+13]=me[8],Xe[ze+14]=me[9],Xe[ze+15]=me[10],y.instancesEvaluatedElevation[Re]=se[2]}}}let qT,YT;Xn(L3,"ModelBucket",{omit:["layers"]}),Xn(KT,"PerModelAttributes"),Xn($T,"ModelFeature");class W1{constructor(s,u,y){this._demTile=s,this._dem=this._demTile.dem,this._scale=u,this._offset=y}static create(s,u,y){const w=y||s.findDEMTileFor(u);if(!w||!w.dem)return;const T=w.dem,I=w.tileID,L=1<<u.canonical.z-I.canonical.z;return new W1(w,T.dim/tn/L,[(u.canonical.x/L-I.canonical.x)*T.dim,(u.canonical.y/L-I.canonical.y)*T.dim])}tileCoordToPixel(s,u){const y=u*this._scale+this._offset[1];return new tr(Math.floor(s*this._scale+this._offset[0]),Math.floor(y))}getElevationAt(s,u,y,w){const T=s*this._scale+this._offset[0],I=u*this._scale+this._offset[1],L=Math.floor(T),H=Math.floor(I),W=this._dem;return w=!!w,y?at(at(W.get(L,H,w),W.get(L,H+1,w),I-H),at(W.get(L+1,H,w),W.get(L+1,H+1,w),I-H),T-L):W.get(L,H,w)}getElevationAtPixel(s,u,y){return this._dem.get(s,u,!!y)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Ke(1,s)*this._dem.stride}}const k3=new Float32Array(262144),I0=new Uint8Array(262144);function XT(d){let s=0;if(d.meshes)for(const u of d.meshes)s=Math.max(s,u.aabb.max[2]);if(d.children)for(const u of d.children)s=Math.max(s,XT(u));return s}function ZT(d,s,u){if(d.meshes)for(const y of d.meshes){if(y.aabb.min[0]===1/0)continue;const w=ye.applyTransform(y.aabb,d.matrix);u.insert(s,w.min[0],w.min[1],w.max[0],w.max[1])}if(d.children)for(const y of d.children)ZT(y,s,u)}const JT=["","wall","door","roof","window","lamp","logo"];class e6{constructor(s){this.node=s,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedTranslation=[0,0,0],this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:s.id,geometry:[],properties:{height:XT(s)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new ye([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let s=0;const u=new ye([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const y of this.node.meshes)this.node.lightMeshIndex!==s&&(y.transformedAabb=ye.applyTransformFast(y.aabb,this.node.matrix),u.encapsulate(y.transformedAabb)),s++;this.aabb=u}return this.aabb}}class Y2{constructor(s,u,y,w,T,I,L,H){this.id=y,this.layers=s,this.layerIds=this.layers.map(W=>W.fqid),this.stateDependentLayerIds=this.layers.filter(W=>W.isStateDependent()).map(W=>W.id),this.modelTraits|=bi.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,w&&(this.modelTraits|=bi.HasMapboxMeshFeatures),T&&(this.modelTraits|=bi.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=I,this.worldview=H,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const W of u)this.nodesInfo.push(new e6(W)),ZT(W,L.featureIndexArray.length,L.grid),L.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,L.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(s,u){for(const y of this.getNodesInfo()){const w=y.node;w.footprint&&u.push({footprint:w.footprint,id:s})}}update(s){const u=Object.keys(s).length!==0;if(u&&!this.stateDependentLayers.length)return;const y=u?this.stateDependentLayers:this.layers;if(!zn(s,this.states))for(const w of y)this.evaluate(w,s);this.states=structuredClone(s)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(s){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const y of u){const w=y.node;this.uploaded?this.updatePbrBuffer(w):Ko(w,s,!0)}for(const y of u)ao(y.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(s){let u=!1;if(!s.meshes)return u;for(const y of s.meshes)y.pbrBuffer&&(y.pbrBuffer.updateData(y.featureArray),u=!0);return u}needsReEvaluation(s,u,y){const w=s.transform.projectionOptions,T=s.style.getBrightness(),I=this.brightness!==T;if(!this.uploaded||this.dirty||w.name!==this.projection.name||L_(y.paint.get("model-color").value,I)||L_(y.paint.get("model-color-mix-intensity").value,I)||L_(y.paint.get("model-roughness").value,I)||L_(y.paint.get("model-emissive-strength").value,I)||L_(y.paint.get("model-height-based-emissive-strength-multiplier").value,I)){this.projection=w,this.brightness=T;const L=this.getNodesInfo();for(const H of L)H.state=null;return!0}return!1}evaluateTransform(s,u){if(s.transform.zoom===this.zoom)return;this.zoom=s.transform.zoom;const y=this.getNodesInfo(),w=this.id.canonical;for(const T of y){const I=T.feature;T.evaluatedTranslation=u.paint.get("model-translation").evaluate(I,{},w),T.evaluatedScale=u.paint.get("model-scale").evaluate(I,{},w)}}evaluate(s,u){const y=this.getNodesInfo();for(const w of y){if(!w.node.meshes)continue;const T=w.feature,I=u&&u[T.id];if(zn(I,w.state))continue;w.state=structuredClone(I);const L=w.node.meshes&&w.node.meshes[0].featureData,H=w.evaluatedColor[2],W=w.evaluatedRMEA[2],se=this.id.canonical;if(w.hasTranslucentParts=!1,L){for(let ue=0;ue<JT.length;ue++){const me=JT[ue];me.length&&(T.properties.part=me);const Ee=s.paint.get("model-color").evaluate(T,I,se).toPremultipliedRenderColor(null),Ie=s.paint.get("model-color-mix-intensity").evaluate(T,I,se);w.evaluatedColor[ue]=[Ee.r,Ee.g,Ee.b,Ie],w.evaluatedRMEA[ue][0]=s.paint.get("model-roughness").evaluate(T,I,se),w.evaluatedRMEA[ue][2]=s.paint.get("model-emissive-strength").evaluate(T,I,se),w.evaluatedRMEA[ue][3]=Ee.a,w.emissionHeightBasedParams[ue]=s.paint.get("model-height-based-emissive-strength-multiplier").evaluate(T,I,se),!w.hasTranslucentParts&&Ee.a<1&&(w.hasTranslucentParts=!0)}delete T.properties.part,B7(w,H!==w.evaluatedColor[2]||W!==w.evaluatedRMEA[2],this.modelTraits)}else w.evaluatedRMEA[0][2]=s.paint.get("model-emissive-strength").evaluate(T,I,se);w.evaluatedTranslation=s.paint.get("model-translation").evaluate(T,I,se),w.evaluatedScale=s.paint.get("model-scale").evaluate(T,I,se),this.updatePbrBuffer(w.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(s,u,y,w){const T=s.findDEMTileFor(y);if(T&&(T.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(T.dem&&T.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=T.tileID.overscaledZ;const I=W1.create(s,y,T);if(!I)return;this.modelTraits&bi.HasMapboxMeshFeatures&&this.updateDEM(s,I,y,w);for(const L of this.getNodesInfo()){const H=L.node;if(!H.footprint||!H.footprint.vertices||!H.footprint.vertices.length)continue;const W=H.footprint.vertices;let se=I.getElevationAt(W[0].x,W[0].y,!0,!0);for(let ue=1;ue<W.length;ue++)se=Math.min(se,I.getElevationAt(W[ue].x,W[ue].y,!0,!0));H.elevation=se}}this.terrainTile=T.tileID.canonical,this.terrainExaggeration=u}}updateDEM(s,u,y,w){let T=u._dem._modifiedForSources[w];if(T===void 0&&(u._dem._modifiedForSources[w]=[],T=u._dem._modifiedForSources[w]),T.includes(y.canonical))return;const I=u._dem.dim;T.push(y.canonical);let L=!1;for(const H of this.getNodesInfo()){const W=H.node;if(!W.footprint||!W.footprint.grid)continue;const se=W.footprint.grid,ue=u.tileCoordToPixel(se.min.x,se.min.y),me=u.tileCoordToPixel(se.max.x,se.max.y),Ee=Math.min(Math.min(I-me.y,ue.x),Math.min(ue.y,I-me.x));if(Ee<0)continue;const Ie=nt(Ee,2,5);let Re=Math.max(0,ue.x-Ie),ze=Math.max(0,ue.y-Ie),Xe=Math.min(me.x+Ie,I-1),ht=Math.min(me.y+Ie,I-1);for(let Ut=ze;Ut<=ht;++Ut)for(let Ht=Re;Ht<=Xe;++Ht)I0[Ut*I+Ht]=255;let ut=0,mt=0;for(let Ut=0;Ut<se.cellsY;++Ut)for(let Ht=0;Ht<se.cellsX;++Ht){if(!se.cells[Ut*se.cellsX+Ht])continue;const or=u.tileCoordToPixel(se.min.x+Ht/se.xScale,se.min.y+Ut/se.yScale),cr=u.tileCoordToPixel(se.min.x+(Ht+1)/se.xScale,se.min.y+(Ut+1)/se.yScale);for(let Gr=or.y;Gr<=Math.min(cr.y+1,I-1);++Gr)for(let xr=or.x;xr<=Math.min(cr.x+1,I-1);++xr)I0[Gr*I+xr]===255&&(I0[Gr*I+xr]=0,ut+=u.getElevationAtPixel(xr,Gr),mt++)}const $t=ut/mt;Re=Math.max(1,ue.x-Ie),ze=Math.max(1,ue.y-Ie),Xe=Math.min(me.x+Ie,I-2),ht=Math.min(me.y+Ie,I-2),L=!0;for(let Ut=ze;Ut<=ht;++Ut)for(let Ht=Re;Ht<=Xe;++Ht)I0[Ut*I+Ht]===0&&(k3[Ut*I+Ht]=u._dem.set(Ht,Ut,$t));for(let Ut=1;Ut<Ie;++Ut){Re=Math.max(1,ue.x-Ut),ze=Math.max(1,ue.y-Ut),Xe=Math.min(me.x+Ut,I-2),ht=Math.min(me.y+Ut,I-2);for(let Ht=ze;Ht<=ht;++Ht)for(let or=Re;or<=Xe;++or){const cr=Ht*I+or;if(I0[cr]===255){let Gr=0,xr=0,Yr=-1,In=-1;for(let nn=-1;nn<=1;++nn)for(let gn=-1;gn<=1;++gn){const En=(Ht+nn)*I+or+gn;if(I0[En]>=Ut)continue;const zr=k3[En],_n=Math.abs(zr);_n>xr&&(Gr=zr,xr=_n,Yr=gn,In=nn)}if(xr>.1){const nn=1-(Ut+.5*Math.abs(Yr*In))/Ie;let gn=u._dem.get(or,Ht)+Gr*nn;const En=u._dem.get(or+Yr,Ht+In),zr=u._dem.get(or-Yr,Ht-In,!0);(gn-En)*(gn-zr)>0&&(gn=(En+zr)/2),k3[cr]=u._dem.set(or,Ht,gn),I0[cr]=Ut}}}}}L&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=ro.now())}setFilter(s){this.filter=s?Gc(s):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(s=>this.filter.filter(new Ao(this.id.overscaledZ,{worldview:this.worldview}),s.feature,this.id.canonical)):this.nodesInfo}destroy(){const s=this.getNodesInfo();for(const u of s)ao(u.node),ua(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const y=u.getReplacementRegionsForTile(s.toUnwrapped());for(const w of this.getNodesInfo()){const T=w.node.footprint;w.hiddenByReplacement=!!T&&!y.find(I=>I.footprint===T)}}getHeightAtTileCoord(s,u){const y=[],w=[0,0,0],T=x([]);for(const I of this.getNodesInfo()){const L=I.node.meshes[0],H=L.transformedAabb;if(s<H.min[0]||u<H.min[1]||s>H.max[0]||u>H.max[1])continue;if(I.node.hidden===!0)return{height:1/0,maxHeight:I.feature.properties.height,hidden:!1,verticalScale:I.evaluatedScale[2]};v(T,I.node.matrix),w[0]=s,w[1]=u,Be(w,w,T);const W=(w[0]-L.aabb.min[0])/(L.aabb.max[0]-L.aabb.min[0])*ui|0,se=Math.min(63,(w[1]-L.aabb.min[1])/(L.aabb.max[1]-L.aabb.min[1])*ui|0)*ui+Math.min(63,W),ue=L.heightmap[se];if(!(ue<0&&I.node.footprint))return I.hiddenByReplacement?void 0:{height:ue,maxHeight:I.feature.properties.height,hidden:!1,verticalScale:I.evaluatedScale[2]};if(I.node.footprint.grid.query(new tr(s,u),new tr(s,u),y),y.length>0)return{height:void 0,maxHeight:I.feature.properties.height,hidden:I.hiddenByReplacement,verticalScale:I.evaluatedScale[2]}}}}function L_(d,s){return d instanceof hl&&!d.isLightConstant&&s}function E7(d,s,u,y,w,T,I,L){let H=(61440&s|(61440&s)>>4)>>8,W=(3840&s|(3840&s)>>4)>>4,se=240&s|(240&s)>>4;u[3]>0&&(H=at(H,255*u[0],u[3]),W=at(W,255*u[1],u[3]),se=at(se,255*u[2],u[3]));const ue=H<<8|W,me=se<<8|Math.floor(255*y[3]),Ee=function(Ut){const Ht=nt(Ut,0,2);return Math.min(Math.round(.5*Ht*255),255)}(y[2])<<8|15*y[0]<<4|15*y[1],Ie=nt(w[0],0,1),Re=nt(w[1],0,1),ze=nt(w[2],0,1),Xe=nt(w[3],0,1);let ht,ut,mt,$t;if(Ie!==Re&&I!==T&&Re!==Ie){const Ut=I-T;ut=1/(Ut*(Re-Ie)),mt=-(T+Ut*Ie)/(Ut*(Re-Ie));const Ht=nt(w[4],-1,1);$t=Math.pow(10,Ht),ht=255*ze<<8|255*Xe}else ht=65535,ut=0,mt=1,$t=1;if(d.emplaceBack(ue,me,Ee,ht,ut,mt,$t),L){const Ut=L.length;L.clear();for(let Ht=0;Ht<Ut;Ht++)L.emplaceBack(ue,me,Ee,ht,ut,mt,$t)}}function B7(d,s,u){const y=d.node;let w=0;const T=u&bi.HasMeshoptCompression;for(const I of y.meshes){if(y.lights&&y.lightMeshIndex===w||!I.featureData)continue;I.featureArray=new bu,I.featureArray.reserve(I.featureData.length);let L=s;for(const H of I.featureData){const W=T?65535&H:H>>16&65535,se=T?H>>16&65535:65535&H,ue=(15&se)<8?15&se:0,me=d.evaluatedRMEA[ue],Ee=d.evaluatedColor[ue],Ie=d.emissionHeightBasedParams[ue];let Re;if(L&&ue===2&&y.lights&&(Re=new bu,Re.resize(10*y.lights.length)),E7(I.featureArray,W,Ee,me,Ie,I.aabb.min[2],I.aabb.max[2],Re),Re&&L){L=!1;const ze=y.meshes[y.lightMeshIndex];ze.featureArray=Re,ze.featureArray._trim()}}I.featureArray._trim(),w++}}function t6(d,s,u,y){const w=1<<d.z;s.lat=dt((y/tn+d.y)/w),s.lng=lt((u/tn+d.x)/w)}function T7(d,s,u,y){const w=d.getNodesInfo()[s];if(!w||w.hiddenByReplacement||!w.node.meshes)return;let T=Number.MAX_VALUE;const I=w.node,L=u.tile,H=y.calculatePosMatrix(L.tileID.toUnwrapped(),y.worldSize),W=w.evaluatedScale;let se=0;y.elevation&&I.elevation&&(se=I.elevation*y.elevation.exaggeration()),B(H,H,[(I.anchor?I.anchor[0]:0)*(W[0]-1),(I.anchor?I.anchor[1]:0)*(W[1]-1),se]),F(H,H,W);const ue=u.queryGeometry,me=ue.isPointQuery()?ue.screenBounds:ue.screenGeometry,Ee=function(Re){const ze=S([],H,Re.matrix);S(ze,y.expandedFarZProjMatrix,ze);for(let Xe=0;Xe<Re.meshes.length;++Xe){const ht=Re.meshes[Xe];if(Xe===Re.lightMeshIndex)continue;const ut=hi(me,y,ze,ht.aabb);ut!=null&&(T=Math.min(ut,T))}if(Re.children)for(const Xe of Re.children)Ee(Xe)};if(Ee(I),T===Number.MAX_VALUE)return;const Ie=new ve(0,0);return t6(L.tileID.canonical,Ie,w.node.anchor[0],w.node.anchor[1]),{intersectionZ:T,position:Ie,feature:w.feature}}Xn(Y2,"Tiled3dModelBucket",{omit:["layers"]}),Xn(e6,"Tiled3dModelFeature");const I7={circle:class extends el{constructor(d,s,u,y){super(d,{layout:sc||(sc=new Po({"circle-sort-key":new Jn(Ar.layout_circle["circle-sort-key"]),"circle-elevation-reference":new mn(Ar.layout_circle["circle-elevation-reference"]),visibility:new mn(Ar.layout_circle.visibility)})),paint:ga||(ga=new Po({"circle-radius":new Jn(Ar.paint_circle["circle-radius"]),"circle-color":new Jn(Ar.paint_circle["circle-color"]),"circle-blur":new Jn(Ar.paint_circle["circle-blur"]),"circle-opacity":new Jn(Ar.paint_circle["circle-opacity"]),"circle-translate":new mn(Ar.paint_circle["circle-translate"]),"circle-translate-anchor":new mn(Ar.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mn(Ar.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mn(Ar.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jn(Ar.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jn(Ar.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jn(Ar.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new mn(Ar.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y)}createBucket(d){return new Rt(d)}queryRadius(d){const s=d;return Ys("circle-radius",this,s)+Ys("circle-stroke-width",this,s)+ss(this.paint.get("circle-translate"))}queryIntersectsFeature(d,s,u,y,w,T,I,L){const H=ic(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,d.pixelToTileUnitsFactor),W=this.paint.get("circle-radius").evaluate(s,u)+this.paint.get("circle-stroke-width").evaluate(s,u);return Eb(d,y,T,I,L,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",H,W)}getProgramIds(){return["circle"]}getDefaultProgramParams(d,s,u){const y=Cb(this);return{config:new kc(this,{zoom:s,lut:u}),defines:y,overrideFog:!1}}is3D(d){return!d&&!!this.layout&&this.layout.get("circle-elevation-reference")!=="none"}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends el{createBucket(d){return new Tb(d)}constructor(d,s,u,y){super(d,{layout:Ib||(Ib=new Po({visibility:new mn(Ar.layout_heatmap.visibility)})),paint:Mb||(Mb=new Po({"heatmap-radius":new Jn(Ar.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jn(Ar.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mn(Ar.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Nu(Ar.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mn(Ar.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=f0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}_clear(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}queryRadius(d){return Ys("heatmap-radius",this,d)}queryIntersectsFeature(d,s,u,y,w,T,I,L){const H=this.paint.get("heatmap-radius").evaluate(s,u);return Eb(d,y,T,I,L,!0,!0,new tr(0,0),H)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(d,s,u){return d==="heatmap"?{config:new kc(this,{zoom:s,lut:u}),overrideFog:!1}:{}}},hillshade:class extends el{constructor(d,s,u,y){super(d,{layout:Fb||(Fb=new Po({visibility:new mn(Ar.layout_hillshade.visibility)})),paint:Pb||(Pb=new Po({"hillshade-illumination-direction":new mn(Ar.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mn(Ar.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mn(Ar.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mn(Ar.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mn(Ar.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mn(Ar.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new mn(Ar.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(d,s,u){return{overrideFog:!1}}},fill:class extends el{constructor(d,s,u,y){super(d,{layout:Hb||(Hb=new Po({"fill-sort-key":new Jn(Ar.layout_fill["fill-sort-key"]),visibility:new mn(Ar.layout_fill.visibility),"fill-elevation-reference":new mn(Ar.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Jn(Ar.layout_fill["fill-construct-bridge-guard-rail"])})),paint:Qb||(Qb=new Po({"fill-antialias":new mn(Ar.paint_fill["fill-antialias"]),"fill-opacity":new Jn(Ar.paint_fill["fill-opacity"]),"fill-color":new Jn(Ar.paint_fill["fill-color"]),"fill-outline-color":new Jn(Ar.paint_fill["fill-outline-color"]),"fill-translate":new mn(Ar.paint_fill["fill-translate"]),"fill-translate-anchor":new mn(Ar.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jn(Ar.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new mn(Ar.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new mn(Ar.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Jn(Ar.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Jn(Ar.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Jn(Ar.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y)}getProgramIds(){const d=this.paint.get("fill-pattern"),s=d&&d.constantOr(1),u=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(d,s,u){return{config:new kc(this,{zoom:s,lut:u}),overrideFog:!1}}recalculate(d,s){super.recalculate(d,s);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new r_(d)}queryRadius(){return ss(this.paint.get("fill-translate"))}queryIntersectsFeature(d,s,u,y,w,T){return!d.queryGeometry.isAboveHorizon&&Or(Ba(d.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,d.pixelToTileUnitsFactor),y)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(d){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const s=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return d!=null?s&&!d:s}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends el{constructor(d,s,u,y){super(d,{layout:f2||(f2=new Po({visibility:new mn(Ar["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new mn(Ar["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:d2||(d2=new Po({"fill-extrusion-opacity":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Jn(Ar["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new mn(Ar["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new k1(d)}queryRadius(){return ss(this.paint.get("fill-extrusion-translate"))}is3D(d){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(d,s,u,y,w,T,I,L,H){const W=ic(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,d.pixelToTileUnitsFactor),se=this.paint.get("fill-extrusion-height").evaluate(s,u),ue=this.paint.get("fill-extrusion-base").evaluate(s,u),me=[0,0],Ee=L&&T.elevation,Ie=T.elevation?T.elevation.exaggeration():1,Re=d.tile.getBucket(this);if(Ee&&Re instanceof k1){const mt=Re.centroidVertexArray,$t=H+1;$t<mt.length&&(me[0]=mt.geta_centroid_pos0($t),me[1]=mt.geta_centroid_pos1($t))}if(me[0]===0&&me[1]===1)return!1;T.projection.name==="globe"&&(y=h2([y],[new tr(0,0),new tr(tn,tn)],d.tileID.canonical).map(mt=>mt.polygon).flat());const ze=Ee?L:null,[Xe,ht]=function(mt,$t,Ut,Ht,or,cr,Gr,xr,Yr,In,nn){return mt.projection.name==="globe"?function(gn,En,zr,_n,wr,Vr,Pn,xn,Ei,pi,An){const Cn=[],yi=[],ii=gn.projection.upVectorScale(An,gn.center.lat,gn.worldSize).metersToTile,Rn=[0,0,0,1],oi=[0,0,0,1],Ui=(Es,gs,Xs,Ds)=>{Es[0]=gs,Es[1]=Xs,Es[2]=Ds,Es[3]=1},ts=u2();zr>0&&(zr+=ts),_n+=ts;for(const Es of En){const gs=[],Xs=[];for(const Ds of Es){const ya=Ds.x+wr.x,wt=Ds.y+wr.y,St=gn.projection.projectTilePoint(ya,wt,An),Rr=gn.projection.upVector(An,Ds.x,Ds.y);let Ln=zr,Kn=_n;if(Pn){const $n=D1(ya,wt,zr,_n,Pn,xn,Ei,pi);Ln+=$n.base,Kn+=$n.top}zr!==0?Ui(Rn,St.x+Rr[0]*ii*Ln,St.y+Rr[1]*ii*Ln,St.z+Rr[2]*ii*Ln):Ui(Rn,St.x,St.y,St.z),Ui(oi,St.x+Rr[0]*ii*Kn,St.y+Rr[1]*ii*Kn,St.z+Rr[2]*ii*Kn),Be(Rn,Rn,Vr),Be(oi,oi,Vr),gs.push(new Im(Rn[0],Rn[1],Rn[2])),Xs.push(new Im(oi[0],oi[1],oi[2]))}Cn.push(gs),yi.push(Xs)}return[Cn,yi]}(mt,$t,Ut,Ht,or,cr,Gr,xr,Yr,In,nn):Gr?function(gn,En,zr,_n,wr,Vr,Pn,xn,Ei){const pi=[],An=[],Cn=[0,0,0,1];for(const yi of gn){const ii=[],Rn=[];for(const oi of yi){const Ui=oi.x+_n.x,ts=oi.y+_n.y,Es=D1(Ui,ts,En,zr,Vr,Pn,xn,Ei);Cn[0]=Ui,Cn[1]=ts,Cn[2]=Es.base,Cn[3]=1,kt(Cn,Cn,wr),Cn[3]=Math.max(Cn[3],1e-5);const gs=new Im(Cn[0]/Cn[3],Cn[1]/Cn[3],Cn[2]/Cn[3]);Cn[0]=Ui,Cn[1]=ts,Cn[2]=Es.top,Cn[3]=1,kt(Cn,Cn,wr),Cn[3]=Math.max(Cn[3],1e-5);const Xs=new Im(Cn[0]/Cn[3],Cn[1]/Cn[3],Cn[2]/Cn[3]);ii.push(gs),Rn.push(Xs)}pi.push(ii),An.push(Rn)}return[pi,An]}($t,Ut,Ht,or,cr,Gr,xr,Yr,In):function(gn,En,zr,_n,wr){const Vr=[],Pn=[],xn=wr[8]*En,Ei=wr[9]*En,pi=wr[10]*En,An=wr[11]*En,Cn=wr[8]*zr,yi=wr[9]*zr,ii=wr[10]*zr,Rn=wr[11]*zr;for(const oi of gn){const Ui=[],ts=[];for(const Es of oi){const gs=Es.x+_n.x,Xs=Es.y+_n.y,Ds=wr[0]*gs+wr[4]*Xs+wr[12],ya=wr[1]*gs+wr[5]*Xs+wr[13],wt=wr[2]*gs+wr[6]*Xs+wr[14],St=wr[3]*gs+wr[7]*Xs+wr[15],Rr=Ds+xn,Ln=ya+Ei,Kn=wt+pi,$n=Math.max(St+An,1e-5),gi=Ds+Cn,Yi=ya+yi,$s=wt+ii,Ks=Math.max(St+Rn,1e-5);Ui.push(new Im(Rr/$n,Ln/$n,Kn/$n)),ts.push(new Im(gi/Ks,Yi/Ks,$s/Ks))}Vr.push(Ui),Pn.push(ts)}return[Vr,Pn]}($t,Ut,Ht,or,cr)}(T,y,ue,se,W,I,ze,me,Ie,T.center.lat,d.tileID.canonical),ut=d.queryGeometry;return function(mt,$t,Ut){let Ht=1/0;Or(Ut,$t)&&(Ht=y2(Ut,$t[0]));for(let or=0;or<$t.length;or++){const cr=$t[or],Gr=mt[or];for(let xr=0;xr<cr.length-1;xr++){const Yr=cr[xr],In=[Yr,cr[xr+1],Gr[xr+1],Gr[xr],Yr];zt(Ut,In)&&(Ht=Math.min(Ht,y2(Ut,In)))}}return Ht!==1/0&&Ht}(Xe,ht,ut.isPointQuery()?ut.screenBounds:ut.screenGeometry)}},building:class extends el{constructor(d,s,u,y){super(d,{layout:MB||(MB=new Po({visibility:new mn(Ar.layout_building.visibility),"building-facade":new Jn(Ar.layout_building["building-facade"]),"building-facade-floors":new Jn(Ar.layout_building["building-facade-floors"]),"building-facade-window":new Jn(Ar.layout_building["building-facade-window"]),"building-roof-shape":new Jn(Ar.layout_building["building-roof-shape"]),"building-height":new Jn(Ar.layout_building["building-height"]),"building-base":new Jn(Ar.layout_building["building-base"])})),paint:FB||(FB=new Po({"building-opacity":new mn(Ar.paint_building["building-opacity"]),"building-ambient-occlusion-intensity":new mn(Ar.paint_building["building-ambient-occlusion-intensity"]),"building-ambient-occlusion-ground-intensity":new mn(Ar.paint_building["building-ambient-occlusion-ground-intensity"]),"building-ambient-occlusion-ground-radius":new mn(Ar.paint_building["building-ambient-occlusion-ground-radius"]),"building-ambient-occlusion-ground-attenuation":new mn(Ar.paint_building["building-ambient-occlusion-ground-attenuation"]),"building-vertical-scale":new mn(Ar.paint_building["building-vertical-scale"]),"building-cast-shadows":new mn(Ar.paint_building["building-cast-shadows"]),"building-color":new Jn(Ar.paint_building["building-color"]),"building-emissive-strength":new Jn(Ar.paint_building["building-emissive-strength"]),"building-facade-emissive-chance":new mn(Ar.paint_building["building-facade-emissive-chance"]),"building-cutoff-fade-range":new mn(Ar.paint_building["building-cutoff-fade-range"]),"building-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new IB(d)}hasShadowPass(){return this.paint.get("building-cast-shadows")}hasLightBeamPass(){return!0}canCastShadows(){return!0}is3D(d){return!0}},line:class extends el{constructor(d,s,u,y){const w=zB();super(d,w,s,u,y),w.layout&&(this.layout=new eo(w.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(d){if(d==="line-gradient"){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof Ic,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(d,s){super.recalculate(d,s),this.paint._values["line-floorwidth"]=(()=>{if(b_)return b_;const u=zB();return b_=new BR(u.paint.properties["line-width"].specification),b_.useIntegerZoom=!0,b_})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new f3(d)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(d,s,u){const y=jB(this);return{config:new kc(this,{zoom:s,lut:u}),defines:y,overrideFog:!1}}queryRadius(d){const s=d,u=HB(Ys("line-width",this,s),Ys("line-gap-width",this,s)),y=Ys("line-offset",this,s);return u/2+Math.abs(y)+ss(this.paint.get("line-translate"))}queryIntersectsFeature(d,s,u,y,w,T){if(d.queryGeometry.isAboveHorizon)return!1;const I=Ba(d.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,d.pixelToTileUnitsFactor),L=d.pixelToTileUnitsFactor/2*HB(this.paint.get("line-width").evaluate(s,u),this.paint.get("line-gap-width").evaluate(s,u)),H=this.paint.get("line-offset").evaluate(s,u);return H&&(y=function(W,se){const ue=[],me=new tr(0,0);for(let Ee=0;Ee<W.length;Ee++){const Ie=W[Ee],Re=[];for(let ze=0;ze<Ie.length;ze++){const Xe=Ie[ze],ht=Ie[ze+1],ut=ze===0?me:Xe.sub(Ie[ze-1])._unit()._perp(),mt=ze===Ie.length-1?me:ht.sub(Xe)._unit()._perp(),$t=ut._add(mt)._unit();$t._mult(1/($t.x*mt.x+$t.y*mt.y)),Re.push($t._mult(se)._add(Xe))}ue.push(Re)}return ue}(y,H*d.pixelToTileUnitsFactor)),function(W,se,ue){for(let me=0;me<se.length;me++){const Ee=se[me];if(W.length>=3){for(let Ie=0;Ie<Ee.length;Ie++)if(oo(W,Ee[Ie]))return!0}if(Xr(W,Ee,ue))return!0}return!1}(I,y,L)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(d){return!this.hasElevatedBuckets||this.layout&&this.layout.get("line-elevation-reference")==="hd-road-markup"}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:W2,background:class extends el{constructor(d,s,u,y){super(d,{layout:LT||(LT=new Po({visibility:new mn(Ar.layout_background.visibility)})),paint:kT||(kT=new Po({"background-pitch-alignment":new mn(Ar.paint_background["background-pitch-alignment"]),"background-color":new mn(Ar.paint_background["background-color"]),"background-pattern":new mn(Ar.paint_background["background-pattern"]),"background-opacity":new mn(Ar.paint_background["background-opacity"]),"background-emissive-strength":new mn(Ar.paint_background["background-emissive-strength"]),"background-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(d,s,u){return{overrideFog:!1}}is3D(d){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:jT,"raster-particle":GT,sky:class extends el{constructor(d,s,u,y){super(d,{layout:HT||(HT=new Po({visibility:new mn(Ar.layout_sky.visibility)})),paint:QT||(QT=new Po({"sky-type":new mn(Ar.paint_sky["sky-type"]),"sky-atmosphere-sun":new mn(Ar.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new mn(Ar.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new mn(Ar.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new mn(Ar.paint_sky["sky-gradient-radius"]),"sky-gradient":new Nu(Ar.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new mn(Ar.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new mn(Ar.paint_sky["sky-atmosphere-color"]),"sky-opacity":new mn(Ar.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y),this._updateColorRamp()}_clear(){this.skyboxFbo&&(this.skyboxFbo.destroy(),this.skyboxFbo=null),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null),this._skyboxInvalidated=!0}_handleSpecialPaintPropertyUpdate(d){d==="sky-gradient"?this._updateColorRamp():d!=="sky-atmosphere-sun"&&d!=="sky-atmosphere-halo-color"&&d!=="sky-atmosphere-color"&&d!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=f0({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(d){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=d.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(d,s){if(this.paint.get("sky-type")==="atmosphere"){const y=this.paint.get("sky-atmosphere-sun"),w=!y,T=d.style.light,I=T.properties.get("position");return w&&T.properties.get("anchor")==="viewport"&&Qi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),w?F3(I.azimuthal,90-I.polar,s):F3(y[0],90-y[1],s)}const u=this.paint.get("sky-gradient-center");return F3(u[0],90-u[1],s)}isSky(){return!0}markSkyboxValid(d){this._skyboxInvalidated=!1,this._lightPosition=d.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const d=this.paint.get("sky-type");return d==="atmosphere"?["skyboxCapture","skybox"]:d==="gradient"?["skyboxGradient"]:null}},slot:class extends el{constructor(d,s,u,y){super(d,{paint:VT||(VT=new Po({}))},s,null)}},model:class extends el{constructor(d,s,u,y){super(d,{layout:qT||(qT=new Po({visibility:new mn(Ar.layout_model.visibility),"model-id":new Jn(Ar.layout_model["model-id"])})),paint:YT||(YT=new Po({"model-opacity":new Jn(Ar.paint_model["model-opacity"]),"model-rotation":new Jn(Ar.paint_model["model-rotation"]),"model-scale":new Jn(Ar.paint_model["model-scale"]),"model-translation":new Jn(Ar.paint_model["model-translation"]),"model-color":new Jn(Ar.paint_model["model-color"]),"model-color-mix-intensity":new Jn(Ar.paint_model["model-color-mix-intensity"]),"model-type":new mn(Ar.paint_model["model-type"]),"model-cast-shadows":new mn(Ar.paint_model["model-cast-shadows"]),"model-receive-shadows":new mn(Ar.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new mn(Ar.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Jn(Ar.paint_model["model-emissive-strength"]),"model-roughness":new Jn(Ar.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Jn(Ar.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new mn(Ar.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new mn(Ar.paint_model["model-front-cutoff"]),"model-color-use-theme":new Jn({type:"string",default:"default","property-type":"data-driven"})}))},s,u,y),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new L3(d)}getProgramIds(){return["model"]}is3D(d){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(d){return d instanceof Y2?tn-1:0}queryIntersectsFeature(d,s,u,y,w,T){if(!this.modelManager)return!1;const I=this.modelManager,L=d.tile.getBucket(this);if(!(L&&L instanceof L3))return!1;for(const H in L.instancesPerModel){const W=L.instancesPerModel[H],se=s.id!==void 0?s.id:s.properties&&s.properties.hasOwnProperty("id")?s.properties.id:void 0;if(W.idToFeaturesIndex.hasOwnProperty(se)){const ue=W.features[W.idToFeaturesIndex[se]],me=I.getModel(H,this.scope);if(!me)return!1;let Ee=b();const Ie=new ve(0,0),Re=L.canonical;let ze=Number.MAX_VALUE;for(let Xe=0;Xe<ue.instancedDataCount;++Xe){const ht=16*(ue.instancedDataOffset+Xe),ut=W.instancedDataArray.float32,mt=[ut[ht+4],ut[ht+5],ut[ht+6]];t6(Re,Ie,ut[ht],0|ut[ht+1]),cs(Ee,me,T,Ie,ue.rotation,ue.scale,mt,!1,!1,!1),T.projection.name==="globe"&&(Ee=on(Ee,T));const $t=S([],T.projMatrix,Ee),Ut=d.queryGeometry,Ht=hi(Ut.isPointQuery()?Ut.screenBounds:Ut.screenGeometry,T,$t,me.aabb);Ht!=null&&(ze=Math.min(Ht,ze))}return ze!==Number.MAX_VALUE&&ze}}return!1}_handleOverridablePaintPropertyUpdate(d,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven()||d!=="model-color"&&d!=="model-color-mix-intensity"&&d!=="model-rotation"&&d!=="model-scale"&&d!=="model-translation"&&d!=="model-emissive-strength")}_isPropertyZoomDependent(d){const s=this._transitionablePaint._values[d];return s!=null&&s.value!=null&&s.value.expression!=null&&s.value.expression instanceof $a}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends el{constructor(d,s,u,y){super(d,{layout:Vb||(Vb=new Po({"clip-layer-types":new mn(Ar.layout_clip["clip-layer-types"]),"clip-layer-scope":new mn(Ar.layout_clip["clip-layer-scope"])})),paint:Gb||(Gb=new Po({}))},s,u,y)}recalculate(d,s){super.recalculate(d,s)}createBucket(d){return new Wb(d)}is3D(d){return!0}}},O3=new Le(0,0,0),D3={PATH_RULE_NON_ZERO:1,PATH_RULE_EVEN_ODD:2},R3={LINE_CAP_BUTT:1,LINE_CAP_ROUND:2,LINE_CAP_SQUARE:3},X2={LINE_JOIN_MITER:1,LINE_JOIN_MITER_CLIP:2,LINE_JOIN_ROUND:3,LINE_JOIN_BEVEL:4},M7={PAINT_ORDER_FILL_AND_STROKE:1},k_={PATH_COMMAND_MOVE:1,PATH_COMMAND_LINE:2,PATH_COMMAND_QUAD:3,PATH_COMMAND_CUBIC:4,PATH_COMMAND_CLOSE:5},r6={MASK_TYPE_LUMINANCE:1};function F7(d,s,u){d===1&&s.icons.push(function(y,w){return function(T){if(T.usvg_tree.height||(T.usvg_tree.height=T.usvg_tree.width),!T.metadata)return T;const{metadata:I}=T;if(I.content_area){const{content_area:L}=I;L.top==null&&(L.top=L.left),L.width==null&&(L.width=T.usvg_tree.width),L.height==null&&(L.height=L.width)}return I.stretch_x&&I.stretch_x.length&&n6(I,"x"),I.stretch_y&&I.stretch_y.length&&n6(I,"y"),T}(y.readFields(P7,{name:void 0},w))}(u,u.readVarint()+u.pos))}function n6(d,s){const u=[],y=d[`stretch_${s}`];let w=null;for(let T=0;T<y.length;T++)w===null?w=u.length===0?y[0]:u[u.length-1][1]+y[T]:(u.push([w,w+y[T]]),w=null);d[`stretch_${s}_areas`]=u}function P7(d,s,u){d===1?s.name=u.readString():d===2?s.metadata=function(y,w){return y.readFields(L7,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},w)}(u,u.readVarint()+u.pos):d===3&&(s.usvg_tree=function(y,w){return y.readFields(D7,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},w)}(u,u.readVarint()+u.pos),s.data="usvg_tree")}function L7(d,s,u){d===1?s.stretch_x=u.readPackedVarint():d===2?s.stretch_y=u.readPackedVarint():d===3?s.content_area=function(y,w){return y.readFields(k7,{left:0},w)}(u,u.readVarint()+u.pos):d===4&&s.variables.push(function(y,w){return y.readFields(O7,{name:void 0},w)}(u,u.readVarint()+u.pos))}function k7(d,s,u){d===1?s.left=u.readVarint():d===2?s.width=u.readVarint():d===3?s.top=u.readVarint():d===4&&(s.height=u.readVarint())}function O7(d,s,u){d===1?s.name=u.readString():d===2&&(s.rgb_color=ex(u.readVarint()),s.value="rgb_color")}function D7(d,s,u){d===1?s.width=s.height=u.readVarint():d===2?s.height=u.readVarint():d===3?s.children.push(Z2(u,u.readVarint()+u.pos)):d===4?s.linear_gradients.push(function(y,w){return y.readFields(Q7,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},w)}(u,u.readVarint()+u.pos)):d===5?s.radial_gradients.push(function(y,w){return y.readFields(G7,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},w)}(u,u.readVarint()+u.pos)):d===7?s.clip_paths.push(function(y,w){return y.readFields(W7,{children:[]},w)}(u,u.readVarint()+u.pos)):d===8&&s.masks.push(function(y,w){const T=y.readFields($7,{left:0,width:20,mask_type:r6.MASK_TYPE_LUMINANCE,children:[]},w);return T.height==null&&(T.height=T.width),T.top==null&&(T.top=T.left),T}(u,u.readVarint()+u.pos))}function Z2(d,s){return d.readFields(R7,{},s)}function R7(d,s,u){d===1?(s.group=function(y,w){return y.readFields(N7,{opacity:255,children:[]},w)}(u,u.readVarint()+u.pos),s.node="group"):d===2&&(s.path=function(y,w){return y.readFields(U7,{paint_order:1,commands:[],step:1,diffs:[],rule:D3.PATH_RULE_NON_ZERO},w)}(u,u.readVarint()+u.pos),s.node="path")}function N7(d,s,u){d===1?s.transform=J2(u,u.readVarint()+u.pos):d===2?s.opacity=u.readVarint():d===5?s.clip_path_idx=u.readVarint():d===6?s.mask_idx=u.readVarint():d===7&&s.children.push(Z2(u,u.readVarint()+u.pos))}function J2(d,s){return d.readFields(j7,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},s)}function j7(d,s,u){d===1?s.sx=u.readFloat():d===2?s.ky=u.readFloat():d===3?s.kx=u.readFloat():d===4?s.sy=u.readFloat():d===5?s.tx=u.readFloat():d===6&&(s.ty=u.readFloat())}function U7(d,s,u){d===1?s.fill=function(y,w){return y.readFields(z7,{rgb_color:O3,paint:"rgb_color",opacity:255},w)}(u,u.readVarint()+u.pos):d===2?s.stroke=function(y,w){return y.readFields(H7,{rgb_color:O3,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},w)}(u,u.readVarint()+u.pos):d===3?s.paint_order=u.readVarint():d===5?u.readPackedVarint(s.commands):d===6?s.step=u.readFloat():d===7?u.readPackedSVarint(s.diffs):d===8&&(s.rule=u.readVarint())}function z7(d,s,u){d===1?(s.rgb_color=ex(u.readVarint()),s.paint="rgb_color"):d===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):d===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):d===5&&(s.opacity=u.readVarint())}function ex(d){return new Le((d>>16&255)/255,(d>>8&255)/255,(255&d)/255,1)}function H7(d,s,u){d===1?(s.rgb_color=ex(u.readVarint()),s.paint="rgb_color"):d===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):d===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):d===5?u.readPackedFloat(s.dasharray):d===6?s.dashoffset=u.readFloat():d===7?s.miterlimit=u.readFloat():d===8?s.opacity=u.readVarint():d===9?s.width=u.readFloat():d===10?s.linecap=u.readVarint():d===11&&(s.linejoin=u.readVarint())}function Q7(d,s,u){d===1?s.transform=J2(u,u.readVarint()+u.pos):d===2?s.spread_method=u.readVarint():d===3?s.stops.push(i6(u,u.readVarint()+u.pos)):d===4?s.x1=u.readFloat():d===5?s.y1=u.readFloat():d===6?s.x2=u.readFloat():d===7&&(s.y2=u.readFloat())}function i6(d,s){return d.readFields(V7,{offset:0,opacity:255,rgb_color:O3},s)}function V7(d,s,u){d===1?s.offset=u.readFloat():d===2?s.opacity=u.readVarint():d===3&&(s.rgb_color=ex(u.readVarint()))}function G7(d,s,u){d===1?s.transform=J2(u,u.readVarint()+u.pos):d===2?s.spread_method=u.readVarint():d===3?s.stops.push(i6(u,u.readVarint()+u.pos)):d===4?s.cx=u.readFloat():d===5?s.cy=u.readFloat():d===6?s.r=u.readFloat():d===7?s.fx=u.readFloat():d===8?s.fy=u.readFloat():d===9&&(s.fr=u.readFloat())}function W7(d,s,u){d===1?s.transform=J2(u,u.readVarint()+u.pos):d===2?s.clip_path_idx=u.readVarint():d===3&&s.children.push(Z2(u,u.readVarint()+u.pos))}function $7(d,s,u){d===1?s.left=s.top=u.readFloat():d===2?s.width=s.height=u.readFloat():d===3?s.top=u.readFloat():d===4?s.height=u.readFloat():d===5?s.mask_type=u.readVarint():d===6?s.mask_idx=u.readVarint():d===7&&s.children.push(Z2(u,u.readVarint()+u.pos))}class K7{static calculate(s={},u=[]){const y=new Map,w=new Map;if(Object.keys(s).length===0)return y;u.forEach(T=>{w.set(T.name,T.rgb_color||new Le(0,0,0))});for(const[T,I]of Object.entries(s))w.has(T)?y.set(w.get(T).toString(),I):console.warn(`Ignoring unknown image variable "${T}"`);return y}}function $1(d,s=255,u){const y=s/255,w=d.toString(),T=u.has(w)?u.get(w).clone():d.clone();return T.a*=y,T.toString()}function O_(d,s){if(!Gl()){const u=document.createElement("canvas");return u.width=d,u.height=s,u}return new OffscreenCanvas(d,s)}function q7(d,s){const u=K7.calculate(s.params,d.metadata?d.metadata.variables:[]),y=d.usvg_tree,w=y.width,T=y.height,I=s.transform?s.transform:new DOMMatrix,L=Math.max(1,Math.round(w*I.a)),H=Math.max(1,Math.round(T*I.d)),W=new DOMMatrix([L/w,0,0,H/T,0,0]),se=O_(L,H).getContext("2d");return N3(se,W,y,y,u),se.getImageData(0,0,L,H)}function N3(d,s,u,y,w){for(const T of y.children)s6(d,s,u,T,w)}function s6(d,s,u,y,w){y.group?(d.save(),function(T,I,L,H,W){const se=H.mask_idx!=null?L.masks[H.mask_idx]:null,ue=H.clip_path_idx!=null?L.clip_paths[H.clip_path_idx]:null;if(H.transform&&(I=K1(H.transform).preMultiplySelf(I)),!function(Ie,Re,ze){return Ie.opacity!==255||Re||ze}(H,ue!=null,se!=null))return void N3(T,I,L,H,W);const me=O_(T.canvas.width,T.canvas.height),Ee=me.getContext("2d");N3(Ee,I,L,H,W),ue&&f6(Ee,I,L,ue),se&&d6(Ee,I,L,se,W),T.globalAlpha=H.opacity/255,T.drawImage(me,0,0)}(d,s,u,y.group,w),d.restore()):y.path&&(d.save(),function(T,I,L,H,W){T.setTransform(I),H.paint_order===M7.PAINT_ORDER_FILL_AND_STROKE?(o6(T,L,H,W),l6(T,L,H,W)):(l6(T,L,H,W),o6(T,L,H,W))}(d,s,u,y.path,w),d.restore())}function o6(d,s,u,y){const w=u.fill;if(!w)return;const T=w.opacity/255;switch(d.save(),d.beginPath(),p6(u,d),w.paint){case"rgb_color":d.fillStyle=$1(w.rgb_color,w.opacity,y);break;case"linear_gradient_idx":{const I=s.linear_gradients[w.linear_gradient_idx];I.transform&&d.setTransform(K1(I.transform).preMultiplySelf(d.getTransform())),d.fillStyle=c6(d,I,T,y);break}case"radial_gradient_idx":{const I=s.radial_gradients[w.radial_gradient_idx];I.transform&&d.setTransform(K1(I.transform).preMultiplySelf(d.getTransform())),d.fillStyle=u6(d,I,T,y)}}d.fill(a6(u)),d.restore()}function a6(d){return d.rule===D3.PATH_RULE_NON_ZERO?"nonzero":d.rule===D3.PATH_RULE_EVEN_ODD?"evenodd":void 0}function l6(d,s,u,y){const w=u.stroke;if(!w)return;const T=A6(u);d.lineWidth=w.width,d.miterLimit=w.miterlimit,d.setLineDash(w.dasharray),d.lineDashOffset=w.dashoffset;const I=w.opacity/255;switch(w.paint){case"rgb_color":d.strokeStyle=$1(w.rgb_color,w.opacity,y);break;case"linear_gradient_idx":d.strokeStyle=c6(d,s.linear_gradients[w.linear_gradient_idx],I,y,!0);break;case"radial_gradient_idx":d.strokeStyle=u6(d,s.radial_gradients[w.radial_gradient_idx],I,y,!0)}switch(w.linejoin){case X2.LINE_JOIN_MITER_CLIP:case X2.LINE_JOIN_MITER:d.lineJoin="miter";break;case X2.LINE_JOIN_ROUND:d.lineJoin="round";break;case X2.LINE_JOIN_BEVEL:d.lineJoin="bevel"}switch(w.linecap){case R3.LINE_CAP_BUTT:d.lineCap="butt";break;case R3.LINE_CAP_ROUND:d.lineCap="round";break;case R3.LINE_CAP_SQUARE:d.lineCap="square"}d.stroke(T)}function c6(d,s,u,y,w=!1){if(s.stops.length===1){const me=s.stops[0];return $1(me.rgb_color,me.opacity*u,y)}const{x1:T,y1:I,x2:L,y2:H}=s;let W=new DOMPoint(T,I),se=new DOMPoint(L,H);if(w){const me=K1(s.transform);W=me.transformPoint(W),se=me.transformPoint(se)}const ue=d.createLinearGradient(W.x,W.y,se.x,se.y);for(const me of s.stops)ue.addColorStop(me.offset,$1(me.rgb_color,me.opacity*u,y));return ue}function u6(d,s,u,y,w=!1){if(s.stops.length===1){const Xe=s.stops[0];return $1(Xe.rgb_color,Xe.opacity*u,y)}const T=K1(s.transform),{fx:I,fy:L,fr:H,cx:W,cy:se,r:ue}=s;let me=new DOMPoint(I,L),Ee=new DOMPoint(W,se),Ie=H,Re=ue;if(w){me=T.transformPoint(me),Ee=T.transformPoint(Ee);const Xe=(T.a+T.d)/2;Ie=H*Xe,Re=s.r*Xe}const ze=d.createRadialGradient(me.x,me.y,Ie,Ee.x,Ee.y,Re);for(const Xe of s.stops)ze.addColorStop(Xe.offset,$1(Xe.rgb_color,Xe.opacity*u,y));return ze}function h6(d,s,u,y){const w=y.transform?K1(y.transform).preMultiplySelf(s):s,T=O_(d.canvas.width,d.canvas.height),I=T.getContext("2d");for(const H of y.children)if(H.group)h6(I,w,u,H.group);else if(H.path){const W=H.path,se=new Path2D;se.addPath(A6(W),w),I.fill(se,a6(W))}const L=y.clip_path_idx!=null?u.clip_paths[y.clip_path_idx]:null;L&&f6(I,w,u,L),d.globalCompositeOperation="source-over",d.drawImage(T,0,0)}function f6(d,s,u,y){const w=O_(d.canvas.width,d.canvas.height);h6(w.getContext("2d"),s,u,y),d.globalCompositeOperation="destination-in",d.drawImage(w,0,0)}function d6(d,s,u,y,w){if(y.children.length===0)return;const T=y.mask_idx!=null?u.masks[y.mask_idx]:null;T&&d6(d,s,u,T,w);const I=d.canvas.width,L=d.canvas.height,H=O_(I,L),W=H.getContext("2d"),se=y.width,ue=y.height,me=y.left,Ee=y.top,Ie=new Path2D,Re=new Path2D;Re.rect(me,Ee,se,ue),Ie.addPath(Re,s),W.clip(Ie);for(const ht of y.children)s6(W,s,u,ht,w);const ze=W.getImageData(0,0,I,L),Xe=ze.data;if(y.mask_type===r6.MASK_TYPE_LUMINANCE)for(let ht=0;ht<Xe.length;ht+=4)Xe[ht+3]=Xe[ht+3]/255*(.2126*Xe[ht]+.7152*Xe[ht+1]+.0722*Xe[ht+2]);W.putImageData(ze,0,0),d.globalCompositeOperation="destination-in",d.drawImage(H,0,0)}function K1(d){return d?new DOMMatrix([d.sx,d.ky,d.kx,d.sy,d.tx,d.ty]):new DOMMatrix}function p6(d,s){const u=d.step;let y=d.diffs[0]*u,w=d.diffs[1]*u;s.moveTo(y,w);for(let T=0,I=2;T<d.commands.length;T++)switch(d.commands[T]){case k_.PATH_COMMAND_MOVE:y+=d.diffs[I++]*u,w+=d.diffs[I++]*u,s.moveTo(y,w);break;case k_.PATH_COMMAND_LINE:y+=d.diffs[I++]*u,w+=d.diffs[I++]*u,s.lineTo(y,w);break;case k_.PATH_COMMAND_QUAD:{const L=y+d.diffs[I++]*u,H=w+d.diffs[I++]*u;y=L+d.diffs[I++]*u,w=H+d.diffs[I++]*u,s.quadraticCurveTo(L,H,y,w);break}case k_.PATH_COMMAND_CUBIC:{const L=y+d.diffs[I++]*u,H=w+d.diffs[I++]*u,W=L+d.diffs[I++]*u,se=H+d.diffs[I++]*u;y=W+d.diffs[I++]*u,w=se+d.diffs[I++]*u,s.bezierCurveTo(L,H,W,se,y,w);break}case k_.PATH_COMMAND_CLOSE:s.closePath()}return s}function A6(d){return p6(d,new Path2D)}class tx{constructor(s){this.capacity=s,this.cache=new Map}get(s){if(!this.cache.has(s))return;const u=this.cache.get(s);return this.cache.delete(s),this.cache.set(s,u),u}put(s,u){this.cache.has(s)?this.cache.delete(s):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(s,u)}delete(s){this.cache.delete(s)}}Xn(tx,"LRUCache");class j3{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(s){return new Ql(s,s.data)}getFromCache(s,u,y){return this.cacheMap.has(y)||this.cacheMap.set(y,new tx(150)),this.cacheMap.get(y).get(wh(s.toString(),u))}setInCache(s,u,y,w){this.cacheDependenciesMap.has(w)||this.cacheDependenciesMap.set(w,new Map),this.cacheMap.has(w)||this.cacheMap.set(w,new tx(150));const T=this.cacheDependenciesMap.get(w),I=wh(s.id.toString(),y);T.get(I)||T.set(I,new Set);const L=this.cacheMap.get(w),H=s.toString();T.get(I).add(H),L.put(wh(s.toString(),y),u)}removeImagesFromCacheByIds(s,u,y=0){if(!this.cacheMap.has(y)||!this.cacheDependenciesMap.has(y))return;const w=this.cacheMap.get(y),T=this.cacheDependenciesMap.get(y);for(const I of s){const L=wh(I.toString(),u);if(T.has(L)){for(const H of T.get(L))w.delete(H);T.delete(L)}}}rasterize(s,u,y,w,T=q7){const I=this.getFromCache(s,y,w);if(I)return I.clone();const L=T(u.icon,s.options),H=j3._getImage(L);return this.setInCache(s,H,y,w),H.clone()}}class m6{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,u){const y=this.toIdx(s,u);return{min:this.minimums[y],max:this.maximums[y]}}isLeaf(s,u){return this.leaves[this.toIdx(s,u)]}toIdx(s,u){return u*this.size+s}}function g6(d,s,u,y){let w=0,T=Number.MAX_VALUE;for(let I=0;I<3;I++)if(Math.abs(y[I])<1e-15){if(u[I]<d[I]||u[I]>s[I])return null}else{const L=1/y[I];let H=(d[I]-u[I])*L,W=(s[I]-u[I])*L;if(H>W){const se=H;H=W,W=se}if(H>w&&(w=H),W<T&&(T=W),w>T)return null}return w}function y6(d,s,u,y,w,T,I,L,H,W,se){const ue=y-d,me=w-s,Ee=T-u,Ie=I-d,Re=L-s,ze=H-u,Xe=se[1]*ze-se[2]*Re,ht=se[2]*Ie-se[0]*ze,ut=se[0]*Re-se[1]*Ie,mt=ue*Xe+me*ht+Ee*ut;if(Math.abs(mt)<1e-15)return null;const $t=1/mt,Ut=W[0]-d,Ht=W[1]-s,or=W[2]-u,cr=(Ut*Xe+Ht*ht+or*ut)*$t;if(cr<0||cr>1)return null;const Gr=Ht*Ee-or*me,xr=or*ue-Ut*Ee,Yr=Ut*me-Ht*ue,In=(se[0]*Gr+se[1]*xr+se[2]*Yr)*$t;return In<0||cr+In>1?null:(Ie*Gr+Re*xr+ze*Yr)*$t}function _6(d,s,u){return(d-s)/(u-s)}function v6(d,s,u,y,w,T,I,L,H){const W=1<<u,se=T-y,ue=I-w,me=(d+1)/W*se+y,Ee=(s+0)/W*ue+w,Ie=(s+1)/W*ue+w;L[0]=(d+0)/W*se+y,L[1]=Ee,H[0]=me,H[1]=Ie}class b6{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(T){const I=Math.ceil(Math.log2(T.dim/8)),L=[];let H=Math.ceil(Math.pow(2,I));const W=1/H,se=(Ee,Ie,Re,ze,Xe)=>{const ht=ze?1:0,ut=(Ee+1)*Re-ht,mt=Ie*Re,$t=(Ie+1)*Re-ht;Xe[0]=Ee*Re,Xe[1]=mt,Xe[2]=ut,Xe[3]=$t};let ue=new m6(H);const me=[];for(let Ee=0;Ee<H*H;Ee++){se(Ee%H,Math.floor(Ee/H),W,!1,me);const Ie=_g(me[0],me[1],T),Re=_g(me[2],me[1],T),ze=_g(me[2],me[3],T),Xe=_g(me[0],me[3],T);ue.minimums.push(Math.min(Ie,Re,ze,Xe)),ue.maximums.push(Math.max(Ie,Re,ze,Xe)),ue.leaves.push(1)}for(L.push(ue),H/=2;H>=1;H/=2){const Ee=L[L.length-1];ue=new m6(H);for(let Ie=0;Ie<H*H;Ie++){se(Ie%H,Math.floor(Ie/H),2,!0,me);const Re=Ee.getElevation(me[0],me[1]),ze=Ee.getElevation(me[2],me[1]),Xe=Ee.getElevation(me[2],me[3]),ht=Ee.getElevation(me[0],me[3]),ut=Ee.isLeaf(me[0],me[1]),mt=Ee.isLeaf(me[2],me[1]),$t=Ee.isLeaf(me[2],me[3]),Ut=Ee.isLeaf(me[0],me[3]),Ht=Math.min(Re.min,ze.min,Xe.min,ht.min),or=Math.max(Re.max,ze.max,Xe.max,ht.max),cr=ut&&mt&&$t&&Ut;ue.maximums.push(or),ue.minimums.push(Ht),ue.leaves.push(or-Ht<=5&&cr?1:0)}L.push(ue)}return L}(this.dem),y=u.length-1,w=u[y];this._addNode(w.minimums[0],w.maximums[0],w.leaves[0]),this._construct(u,0,0,y,0)}raycastRoot(s,u,y,w,T,I,L=1){return g6([s,u,-100],[y,w,this.maximums[0]*L],T,I)}raycast(s,u,y,w,T,I,L=1){if(!this.nodeCount)return null;const H=this.raycastRoot(s,u,y,w,T,I,L);if(H==null)return null;const W=[],se=[],ue=[],me=[],Ee=[{idx:0,t:H,nodex:0,nodey:0,depth:0}];for(;Ee.length>0;){const{idx:Ie,t:Re,nodex:ze,nodey:Xe,depth:ht}=Ee.pop();if(this.leaves[Ie]){v6(ze,Xe,ht,s,u,y,w,ue,me);const mt=1<<ht,$t=(ze+0)/mt,Ut=(ze+1)/mt,Ht=(Xe+0)/mt,or=(Xe+1)/mt,cr=_g($t,Ht,this.dem)*L,Gr=_g(Ut,Ht,this.dem)*L,xr=_g(Ut,or,this.dem)*L,Yr=_g($t,or,this.dem)*L,In=y6(ue[0],ue[1],cr,me[0],ue[1],Gr,me[0],me[1],xr,T,I),nn=y6(me[0],me[1],xr,ue[0],me[1],Yr,ue[0],ue[1],cr,T,I),gn=Math.min(In!==null?In:Number.MAX_VALUE,nn!==null?nn:Number.MAX_VALUE);if(gn!==Number.MAX_VALUE)return gn;{const En=J([],T,I,Re);if(x6(cr,Gr,Yr,xr,_6(En[0],ue[0],me[0]),_6(En[1],ue[1],me[1]))>=En[2])return Re}continue}let ut=0;for(let mt=0;mt<this._siblingOffset.length;mt++){v6((ze<<1)+this._siblingOffset[mt][0],(Xe<<1)+this._siblingOffset[mt][1],ht+1,s,u,y,w,ue,me),ue[2]=-100,me[2]=this.maximums[this.childOffsets[Ie]+mt]*L;const $t=g6(ue,me,T,I);if($t!=null){const Ut=$t;W[mt]=Ut;let Ht=!1;for(let or=0;or<ut&&!Ht;or++)Ut>=W[se[or]]&&(se.splice(or,0,mt),Ht=!0);Ht||(se[ut]=mt),ut++}}for(let mt=0;mt<ut;mt++){const $t=se[mt];Ee.push({idx:this.childOffsets[Ie]+$t,t:W[$t],nodex:(ze<<1)+this._siblingOffset[$t][0],nodey:(Xe<<1)+this._siblingOffset[$t][1],depth:ht+1})}}return null}_addNode(s,u,y){return this.minimums.push(s),this.maximums.push(u),this.leaves.push(y),this.childOffsets.push(0),this.nodeCount++}_construct(s,u,y,w,T){if(s[w].isLeaf(u,y)===1)return;this.childOffsets[T]||(this.childOffsets[T]=this.nodeCount);const I=w-1,L=s[I];let H=0,W=0;for(let se=0;se<this._siblingOffset.length;se++){const ue=2*u+this._siblingOffset[se][0],me=2*y+this._siblingOffset[se][1],Ee=L.getElevation(ue,me),Ie=L.isLeaf(ue,me),Re=this._addNode(Ee.min,Ee.max,Ie);Ie&&(H|=1<<se),W||(W=Re)}for(let se=0;se<this._siblingOffset.length;se++)H&1<<se||this._construct(s,2*u+this._siblingOffset[se][0],2*y+this._siblingOffset[se][1],I,W+se)}}function x6(d,s,u,y,w,T){return at(at(d,u,T),at(s,y,T),w)}function _g(d,s,u){const y=u.dim,w=nt(d*y-.5,0,y-1),T=nt(s*y-.5,0,y-1),I=Math.floor(w),L=Math.floor(T),H=Math.min(I+1,y-1),W=Math.min(L+1,y-1);return x6(u.get(I,L),u.get(H,L),u.get(I,W),u.get(H,W),w-I,T-L)}const Y7={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function X7(d,s,u){return(256*d*256+256*s+u)/10-1e4}function Z7(d,s,u){return 256*d+s+u/256-32768}class rx{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,u,y,w=!1){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(y&&y!=="mapbox"&&y!=="terrarium")return void Qi(`"${y}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const T=this.dim=u.height-2,I=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=w,this._modifiedForSources={},!w){for(let H=0;H<T;H++)I[this._idx(-1,H)]=I[this._idx(0,H)],I[this._idx(T,H)]=I[this._idx(T-1,H)],I[this._idx(H,-1)]=I[this._idx(H,0)],I[this._idx(H,T)]=I[this._idx(H,T-1)];I[this._idx(-1,-1)]=I[this._idx(0,0)],I[this._idx(T,-1)]=I[this._idx(T-1,0)],I[this._idx(-1,T)]=I[this._idx(0,T-1)],I[this._idx(T,T)]=I[this._idx(T-1,T-1)]}const L=y==="terrarium"?Z7:X7;for(let H=0;H<I.length;++H){const W=4*H;this.floatView[H]=L(this.pixels[W],this.pixels[W+1],this.pixels[W+2])}this._timestamp=ro.now()}_buildQuadTree(){this._tree=new b6(this)}get(s,u,y=!1){y&&(s=nt(s,-1,this.dim),u=nt(u,-1,this.dim));const w=this._idx(s,u);return this.floatView[w]}set(s,u,y){const w=this._idx(s,u),T=this.floatView[w];return this.floatView[w]=y,y-T}static getUnpackVector(s){return Y7[s]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}static pack(s,u){const y=[0,0,0,0],w=rx.getUnpackVector(u);let T=Math.floor((s+w[3])/w[2]);return y[2]=T%256,T=Math.floor(T/256),y[1]=T%256,T=Math.floor(T/256),y[0]=T,y}getPixels(){return new Oo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,u,y){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let w=u*this.dim,T=u*this.dim+this.dim,I=y*this.dim,L=y*this.dim+this.dim;switch(u){case-1:w=T-1;break;case 1:T=w+1}switch(y){case-1:I=L-1;break;case 1:L=I+1}const H=-u*this.dim,W=-y*this.dim;for(let se=I;se<L;se++)for(let ue=w;ue<T;ue++){const me=4*this._idx(ue,se),Ee=4*this._idx(ue+H,se+W);this.pixels[me+0]=s.pixels[Ee+0],this.pixels[me+1]=s.pixels[Ee+1],this.pixels[me+2]=s.pixels[Ee+2],this.pixels[me+3]=s.pixels[Ee+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function J7(d,s,u){d===1?s.headerLength=u.readFixed32():d===2?s.x=u.readVarint():d===3?s.y=u.readVarint():d===4?s.z=u.readVarint():d===5&&s.layers.push(function(y,w){return y.readFields(i9,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},w)}(u,u.readVarint()+u.pos))}function e9(d,s,u){d===1?(s.delta_filter=function(y,w){return y.readFields(t9,{blockSize:0},w)}(u,u.readVarint()+u.pos),s.filter="delta_filter"):d===2?(u.readVarint(),s.filter="zigzag_filter"):d===3?(u.readVarint(),s.filter="bitshuffle_filter"):d===4&&(u.readVarint(),s.filter="byteshuffle_filter")}function t9(d,s,u){d===1&&(s.blockSize=u.readVarint())}function r9(d,s,u){d===1?(u.readVarint(),s.codec="gzip_data"):d===2?(u.readVarint(),s.codec="jpeg_image"):d===3?(u.readVarint(),s.codec="webp_image"):d===4&&(u.readVarint(),s.codec="png_image")}function n9(d,s,u){let y=0,w=0;d===1?s.firstByte=u.readFixed64():d===2?s.lastByte=u.readFixed64():d===3?s.filters.push(function(T,I){return T.readFields(e9,{},I)}(u,u.readVarint()+u.pos)):d===4?s.codec=function(T,I){return T.readFields(r9,{},I)}(u,u.readVarint()+u.pos):d===5?w=u.readFloat():d===6?y=u.readFloat():d===7?s.bands.push(u.readString()):d===8?s.offset=u.readDouble():d===9&&(s.scale=u.readDouble()),s.offset===0&&(s.offset=w),s.scale===0&&(s.scale=y)}function i9(d,s,u){d===1?s.version=u.readVarint():d===2?s.name=u.readString():d===3?s.units=u.readString():d===4?s.tileSize=u.readVarint():d===5?s.buffer=u.readVarint():d===6?s.pixelFormat=u.readVarint():d===7&&s.dataIndex.push(function(y,w){return y.readFields(n9,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},w)}(u,u.readVarint()+u.pos))}function s9(d,s,u){if(d===2)(function(y,w,T){y.readFields(o9,T,w)})(u,u.readVarint()+u.pos,s);else if(d===3)throw new Error("Not implemented")}function o9(d,s,u){if(d===1){let y=0;const w=u.readVarint()+u.pos;for(;u.pos<w;)s[y++]=u.readVarint()}}function a9(d,s){if(s.length!==4)throw new Error(`Expected data of dimension 4 but got ${s.length}.`);let u=s[3];for(let y=2;y>=1;y--){const w=y===1?1:0,T=y===2?1:0;for(let I=0;I<s[0];I++){const L=s[1]*I;for(let H=w;H<s[1];H++){const W=s[2]*(H+L);for(let se=T;se<s[2];se++){const ue=s[3]*(se+W);for(let me=0;me<s[3];me++){const Ee=ue+me;d[Ee]+=d[Ee-u]}}}}u*=s[y]}return d}function l9(d){for(let s=0,u=d.length;s<u;s++)d[s]=d[s]>>>1^-(1&d[s]);return d}function c9(d,s){switch(s){case"uint32":return d;case"uint16":for(let u=0;u<d.length;u+=2){const y=d[u],w=d[u+1];d[u]=(240&y)>>4|(61440&y)>>8|(240&w)<<4|61440&w,d[u+1]=15&y|(3840&y)>>4|(15&w)<<8|(3840&w)<<4}return d;case"uint8":for(let u=0;u<d.length;u+=4){const y=d[u],w=d[u+1],T=d[u+2],I=d[u+3];d[u+0]=(192&y)>>6|(192&w)>>4|(192&T)>>2|192&I,d[u+1]=(48&y)>>4|(48&w)>>2|48&T|(48&I)<<2,d[u+2]=(12&y)>>2|12&w|(12&T)<<2|(12&I)<<4,d[u+3]=3&y|(3&w)<<2|(3&T)<<4|(3&I)<<6}return d;default:throw new Error(`Invalid pixel format, "${s}"`)}}Xn(rx,"DEMData"),Xn(b6,"DemMinMaxQuadTree",{omit:["dem"]});var Xd=Uint8Array,D_=Uint16Array,u9=Int32Array,w6=new Xd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),S6=new Xd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h9=new Xd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C6=function(d,s){for(var u=new D_(31),y=0;y<31;++y)u[y]=s+=1<<d[y-1];var w=new u9(u[30]);for(y=1;y<30;++y)for(var T=u[y];T<u[y+1];++T)w[T]=T-u[y]<<5|y;return{b:u,r:w}},E6=C6(w6,2),B6=E6.b,f9=E6.r;B6[28]=258,f9[258]=28;for(var d9=C6(S6,0).b,T6=new D_(32768),yc=0;yc<32768;++yc){var q1=(43690&yc)>>1|(21845&yc)<<1;T6[yc]=((65280&(q1=(61680&(q1=(52428&q1)>>2|(13107&q1)<<2))>>4|(3855&q1)<<4))>>8|(255&q1)<<8)>>1}var R_=function(d,s,u){for(var y=d.length,w=0,T=new D_(s);w<y;++w)d[w]&&++T[d[w]-1];var I,L=new D_(s);for(w=1;w<s;++w)L[w]=L[w-1]+T[w-1]<<1;I=new D_(1<<s);var H=15-s;for(w=0;w<y;++w)if(d[w])for(var W=w<<4|d[w],se=s-d[w],ue=L[d[w]-1]++<<se,me=ue|(1<<se)-1;ue<=me;++ue)I[T6[ue]>>H]=W;return I},N_=new Xd(288);for(yc=0;yc<144;++yc)N_[yc]=8;for(yc=144;yc<256;++yc)N_[yc]=9;for(yc=256;yc<280;++yc)N_[yc]=7;for(yc=280;yc<288;++yc)N_[yc]=8;var I6=new Xd(32);for(yc=0;yc<32;++yc)I6[yc]=5;var p9=R_(N_,9),A9=R_(I6,5),U3=function(d){for(var s=d[0],u=1;u<d.length;++u)d[u]>s&&(s=d[u]);return s},pA=function(d,s,u){var y=s/8|0;return(d[y]|d[y+1]<<8)>>(7&s)&u},z3=function(d,s){var u=s/8|0;return(d[u]|d[u+1]<<8|d[u+2]<<16)>>(7&s)},m9=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],AA=function(d,s,u){var y=new Error(s||m9[d]);if(y.code=d,Error.captureStackTrace&&Error.captureStackTrace(y,AA),!u)throw y;return y},g9=new Xd(0),y9=typeof TextDecoder<"u"&&new TextDecoder;try{y9.decode(g9,{stream:!0})}catch{}const _9={gzip_data:"gzip"};class Lp extends Error{constructor(s){super(s),this.name="MRTError"}}const v9={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},M6={uint32:1,uint16:2,uint8:4},b9={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let H3;class nx{constructor(s=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=s}getLayer(s){const u=this.layers[s];if(!u)throw new Lp(`Layer '${s}' not found`);return u}getHeaderLength(s){const u=new Uint8Array(s),y=new DataView(s);if(u[0]!==13)throw new Lp("File is not a valid MRT.");return y.getUint32(1,!0)}parseHeader(s){const u=new Uint8Array(s),y=this.getHeaderLength(s);if(u.length<y)throw new Lp(`Expected header with length >= ${y} but got buffer of length ${u.length}`);const w=new H3(u.subarray(0,y)).readFields(J7,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0);if(!isNaN(this.x)&&(this.x!==w.x||this.y!==w.y||this.z!==w.z))throw new Lp(`Invalid attempt to parse header ${w.z}/${w.x}/${w.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=w.x,this.y=w.y,this.z=w.z;for(const T of w.layers)this.layers[T.name]=new F6(T,{cacheSize:this._cacheSize});return this}createDecodingTask(s){const u=[],y=this.getLayer(s.layerName);for(let w of s.blockIndices){const T=y.dataIndex[w],I=T.firstByte-s.firstByte,L=T.lastByte-s.firstByte;if(y._blocksInProgress.has(w))continue;const H={layerName:y.name,firstByte:I,lastByte:L,pixelFormat:y.pixelFormat,blockIndex:w,blockShape:[T.bands.length].concat(y.bandShape),buffer:y.buffer,codec:T.codec.codec,filters:T.filters.map(W=>W.filter)};y._blocksInProgress.add(w),u.push(H)}return new P6(u,()=>{u.forEach(w=>y._blocksInProgress.delete(w.blockIndex))},(w,T)=>{if(u.forEach(I=>y._blocksInProgress.delete(I.blockIndex)),w)throw w;T.forEach(I=>{this.getLayer(I.layerName).processDecodedData(I)})})}}class F6{constructor({version:s,name:u,units:y,tileSize:w,pixelFormat:T,buffer:I,dataIndex:L},H){if(this.version=s,this.version!==1)throw new Lp(`Cannot parse raster layer encoded with MRT version ${s}`);this.name=u,this.units=y,this.tileSize=w,this.buffer=I,this.pixelFormat=v9[T],this.dataIndex=L,this.bandShape=[w+2*I,w+2*I,M6[this.pixelFormat]],this._decodedBlocks=new tx(H?H.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return M6[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:s})=>s).flat()}processDecodedData(s){const u=s.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,s.data)}getBlockForBand(s){let u=0;switch(typeof s){case"string":for(const[y,w]of this.dataIndex.entries()){for(const[T,I]of w.bands.entries())if(I===s)return{bandIndex:u+T,blockIndex:y,blockBandIndex:T};u+=w.bands.length}break;case"number":for(const[y,w]of this.dataIndex.entries()){if(s>=u&&s<u+w.bands.length)return{bandIndex:s,blockIndex:y,blockBandIndex:s-u};u+=w.bands.length}break;default:throw new Lp(`Invalid band \`${JSON.stringify(s)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(s){let u=1/0,y=-1/0;const w=[],T=new Set;for(const I of s){const{blockIndex:L}=this.getBlockForBand(I);if(L<0)throw new Lp(`Invalid band: ${JSON.stringify(I)}`);const H=this.dataIndex[L];w.includes(L)||w.push(L),T.add(L),u=Math.min(u,H.firstByte),y=Math.max(y,H.lastByte)}if(T.size>this.cacheSize)throw new Lp(`Number of blocks to decode (${T.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:y,blockIndices:w}}hasBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0}hasDataForBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(s){const{blockIndex:u,blockBandIndex:y}=this.getBlockForBand(s);if(u<0)throw new Lp(`Band not found: ${JSON.stringify(s)}`);const w=this._decodedBlocks.get(u.toString());if(!w)throw new Lp(`Data for band ${JSON.stringify(s)} of layer "${this.name}" not decoded.`);const T=this.dataIndex[u],I=this.bandShape.reduce((W,se)=>W*se,1),L=y*I,H=w.subarray(L,L+I);return{data:H,bytes:new Uint8Array(H.buffer).subarray(H.byteOffset,H.byteOffset+H.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:T.offset,scale:T.scale}}}nx.setPbf=function(d){H3=d};class P6{constructor(s,u,y){this.tasks=s,this._onCancel=u,this._onComplete=y,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(s,u){this._finalized||(this._onComplete(s,u),this._finalized=!0)}}nx.performDecoding=function(d,s){const u=new Uint8Array(d);return Promise.all(s.tasks.map(y=>{const{layerName:w,firstByte:T,lastByte:I,pixelFormat:L,blockShape:H,blockIndex:W,filters:se,codec:ue}=y,me=u.subarray(T,I+1),Ee=new Uint32Array(H[0]*H[1]*H[2]);let Ie;if(ue!=="gzip_data")throw new Lp(`Unhandled codec: ${ue}`);return Ie=function(Re,ze){if(!globalThis.DecompressionStream&&ze==="gzip_data")return Promise.resolve(((mt=function(Ht){Ht[0]==31&&Ht[1]==139&&Ht[2]==8||AA(6,"invalid gzip data");var or=Ht[3],cr=10;4&or&&(cr+=2+(Ht[10]|Ht[11]<<8));for(var Gr=(or>>3&1)+(or>>4&1);Gr>0;Gr-=!Ht[cr++]);return cr+(2&or)}(ut=Re))+8>ut.length&&AA(6,"invalid gzip data"),function(Ht,or,cr,Gr){var xr=Ht.length;if(!xr||or.f&&!or.l)return cr||new Xd(0);var Yr=!cr,In=Yr||or.i!=2,nn=or.i;Yr&&(cr=new Xd(3*xr));var gn,En,zr=function(Ka){var _a=cr.length;if(Ka>_a){var fa=new Xd(Math.max(2*_a,Ka));fa.set(cr),cr=fa}},_n=or.f||0,wr=or.p||0,Vr=or.b||0,Pn=or.l,xn=or.d,Ei=or.m,pi=or.n,An=8*xr;do{if(!Pn){_n=pA(Ht,wr,1);var Cn=pA(Ht,wr+1,3);if(wr+=3,!Cn){var yi=Ht[(wt=4+((wr+7)/8|0))-4]|Ht[wt-3]<<8,ii=wt+yi;if(ii>xr){nn&&AA(0);break}In&&zr(Vr+yi),cr.set(Ht.subarray(wt,ii),Vr),or.b=Vr+=yi,or.p=wr=8*ii,or.f=_n;continue}if(Cn==1)Pn=p9,xn=A9,Ei=9,pi=5;else if(Cn==2){var Rn=pA(Ht,wr,31)+257,oi=pA(Ht,wr+10,15)+4,Ui=Rn+pA(Ht,wr+5,31)+1;wr+=14;for(var ts=new Xd(Ui),Es=new Xd(19),gs=0;gs<oi;++gs)Es[h9[gs]]=pA(Ht,wr+3*gs,7);wr+=3*oi;var Xs=U3(Es),Ds=(1<<Xs)-1,ya=R_(Es,Xs);for(gs=0;gs<Ui;){var wt,St=ya[pA(Ht,wr,Ds)];if(wr+=15&St,(wt=St>>4)<16)ts[gs++]=wt;else{var Rr=0,Ln=0;for(wt==16?(Ln=3+pA(Ht,wr,3),wr+=2,Rr=ts[gs-1]):wt==17?(Ln=3+pA(Ht,wr,7),wr+=3):wt==18&&(Ln=11+pA(Ht,wr,127),wr+=7);Ln--;)ts[gs++]=Rr}}var Kn=ts.subarray(0,Rn),$n=ts.subarray(Rn);Ei=U3(Kn),pi=U3($n),Pn=R_(Kn,Ei),xn=R_($n,pi)}else AA(1);if(wr>An){nn&&AA(0);break}}In&&zr(Vr+131072);for(var gi=(1<<Ei)-1,Yi=(1<<pi)-1,$s=wr;;$s=wr){var Ks=(Rr=Pn[z3(Ht,wr)&gi])>>4;if((wr+=15&Rr)>An){nn&&AA(0);break}if(Rr||AA(2),Ks<256)cr[Vr++]=Ks;else{if(Ks==256){$s=wr,Pn=null;break}var Ps=Ks-254;Ks>264&&(Ps=pA(Ht,wr,(1<<(Ts=w6[gs=Ks-257]))-1)+B6[gs],wr+=Ts);var qo=xn[z3(Ht,wr)&Yi],tl=qo>>4;if(qo||AA(3),wr+=15&qo,$n=d9[tl],tl>3){var Ts=S6[tl];$n+=z3(Ht,wr)&(1<<Ts)-1,wr+=Ts}if(wr>An){nn&&AA(0);break}In&&zr(Vr+131072);var Ta=Vr+Ps;if(Vr<$n){var ha=0-$n,Mo=Math.min($n,Ta);for(ha+Vr<0&&AA(3);Vr<Mo;++Vr)cr[Vr]=(void 0)[ha+Vr]}for(;Vr<Ta;++Vr)cr[Vr]=cr[Vr-$n]}}or.l=Pn,or.p=$s,or.b=Vr,or.f=_n,Pn&&(_n=1,or.m=Ei,or.d=xn,or.n=pi)}while(!_n);return Vr!=cr.length&&Yr?(gn=cr,((En=Vr)==null||En>gn.length)&&(En=gn.length),new Xd(gn.subarray(0,En))):cr.subarray(0,Vr)}(ut.subarray(mt,-8),{i:2},new Xd(((Xe=ut)[(ht=Xe.length)-4]|Xe[ht-3]<<8|Xe[ht-2]<<16|Xe[ht-1]<<24)>>>0))));var Xe,ht,ut,mt;const $t=_9[ze];if(!$t)throw new Error(`Unhandled codec: ${ze}`);const Ut=new globalThis.DecompressionStream($t);return new Response(new Blob([Re]).stream().pipeThrough(Ut)).arrayBuffer().then(Ht=>new Uint8Array(Ht))}(me,ue).then(Re=>(function(ze,Xe){ze.readFields(s9,Xe)}(new H3(Re),Ee),new b9[L](Ee.buffer))),Ie.then(Re=>{for(let ze=se.length-1;ze>=0;ze--)switch(se[ze]){case"delta_filter":a9(Re,H);break;case"zigzag_filter":l9(Re);break;case"bitshuffle_filter":c9(Re,L);break;default:throw new Lp(`Unhandled filter "${se[ze]}"`)}return{layerName:w,blockIndex:W,data:Re}}).catch(Re=>{throw Re})}))},Xn(P6,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Xn(nx,"MapboxRasterTile"),Xn(F6,"MapboxRasterLayer",{omit:["_blocksInProgress"]});class L6{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){const y=s[u];this._stringToNumber[y]=u,this._numberToString[u]=y}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const x9=["id","tile","layer","source","sourceLayer","state"];class Y1{constructor(s,u,y,w,T){this.type="Feature",this._vectorTileFeature=s,this._z=u,this._x=y,this._y=w,this.properties=s.properties,this.id=T}clone(){const s=new Y1(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(s.state=Object.assign({},this.state)),this.layer&&(s.layer=Object.assign({},this.layer)),this.source&&(s.source=this.source),this.sourceLayer&&(s.sourceLayer=this.sourceLayer),s}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of x9)this[u]!==void 0&&(s[u]=this[u]);return s}}class k6{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Mc(tn,16,0),this.featureIndexArray=new ud,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(s,u,y,w,T,I=0,L=0){const H=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,w,T,I);const W=this.grid;for(let se=0;se<u.length;se++){const ue=u[se],me=[1/0,1/0,-1/0,-1/0];for(let Ee=0;Ee<ue.length;Ee++){const Ie=ue[Ee];me[0]=Math.min(me[0],Ie.x),me[1]=Math.min(me[1],Ie.y),me[2]=Math.max(me[2],Ie.x),me[3]=Math.max(me[3],Ie.y)}L!==0&&(me[0]-=L,me[1]-=L,me[2]+=L,me[3]+=L),me[0]<tn&&me[1]<tn&&me[2]>=0&&me[3]>=0&&W.insert(H,me[0],me[1],me[2],me[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new di(new F2(this.rawTileData)).layers,this.sourceLayerCoder=new L6(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,u){const{tilespaceGeometry:y,transform:w,tileTransform:T,pixelPosMatrix:I,availableImages:L,worldview:H}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const W=y.bufferedTilespaceBounds,se=this.grid.query(W.min.x,W.min.y,W.max.x,W.max.y,(Ie,Re,ze,Xe)=>ys(y.bufferedTilespaceGeometry,Ie,Re,ze,Xe));se.sort(w9);let ue=null;w.elevation&&se.length>0&&(ue=W1.create(w.elevation,this.tileID));const me={};let Ee;for(let Ie=0;Ie<se.length;Ie++){const Re=se[Ie];if(Re===Ee)continue;Ee=Re;const ze=this.featureIndexArray.get(Re);let Xe=null;this.is3DTile?this.loadMatchingModelFeature(me,ze,s,y,w,H):this.loadMatchingFeature(me,ze,s,L,H,(ht,ut,mt,$t=0)=>(Xe||(Xe=qt(ht,this.tileID.canonical,T)),ut.queryIntersectsFeature(y,ht,mt,Xe,this.z,w,I,ue,$t)))}return me}loadMatchingFeature(s,u,y,w,T,I){const{featureIndex:L,bucketIndex:H,sourceLayerIndex:W,layoutVertexArrayOffset:se}=u,ue=this.bucketLayerIDs[H],me=y.layers,Ee=Object.keys(me);if(Ee.length&&!Di(Ee,ue))return;const Ie=y.sourceCache,Re=this.sourceLayerCoder.decode(W),ze=this.vtLayers[Re].feature(L),Xe=this.getId(ze,Re);for(let ht=0;ht<ue.length;ht++){const ut=ue[ht];if(!me[ut])continue;const{styleLayer:mt,targets:$t}=me[ut];let Ut={};Xe!==void 0&&(Ut=Ie.getFeatureState(mt.sourceLayer,Xe));const Ht=!I||I(ze,mt,Ut,se);if(!Ht)continue;const or=new Y1(ze,this.z,this.x,this.y,Xe);or.tile=this.tileID.canonical,or.state=Ut;let cr=this.serializedLayersCache.get(ut);cr||(cr=mt.serialize(),cr.id=ut,this.serializedLayersCache.set(ut,cr)),or.source=cr.source,or.sourceLayer=cr["source-layer"],or.layer=nr({},cr),or.layer.paint=O6(cr.paint,mt.paint,ze,Ut,w),or.layer.layout=O6(cr.layout,mt.layout,ze,Ut,w);let Gr=!1;for(const xr of $t){this.updateFeatureProperties(or,xr);const{filter:Yr}=xr;if(Yr){if(ze.properties=or.properties,Yr.needGeometry){const In=kr(ze,!0);if(!Yr.filter(new Ao(this.tileID.overscaledZ,{worldview:T}),In,this.tileID.canonical))continue}else if(!Yr.filter(new Ao(this.tileID.overscaledZ,{worldview:T}),ze))continue}Gr=!0,xr.targetId&&this.addFeatureVariant(or,xr)}Gr&&this.appendToResult(s,ut,L,or,Ht)}}loadMatchingModelFeature(s,u,y,w,T,I){const{featureIndex:L,bucketIndex:H}=u,W=this.bucketLayerIDs[H],se=y.layers,ue=Object.keys(se);if(!ue.length||Di(ue,W))for(let me=0;me<W.length;me++){const Ee=W[me],{styleLayer:Ie,targets:Re}=se[Ee];if(Ie.type!=="model")continue;const ze=w.tile,Xe=ze.getBucket(Ie);if(!(Xe&&Xe instanceof Y2))continue;const ht=T7(Xe,L,w,T);if(!ht)continue;const{z:ut,x:mt,y:$t}=ze.tileID.canonical,{feature:Ut,intersectionZ:Ht,position:or}=ht;let cr={};Ut.id!==void 0&&(cr=y.sourceCache.getFeatureState(Ie.sourceLayer,Ut.id));const Gr=new Y1({},ut,mt,$t,Ut.id);Gr.tile=this.tileID.canonical,Gr.state=cr,Gr.properties=Ut.properties,Gr.geometry={type:"Point",coordinates:[or.lng,or.lat]};let xr=this.serializedLayersCache.get(Ee);xr||(xr=Ie.serialize(),xr.id=Ee,this.serializedLayersCache.set(Ee,xr)),Gr.source=xr.source,Gr.sourceLayer=xr["source-layer"],Gr.layer=nr({},xr);let Yr=!1;for(const In of Re){this.updateFeatureProperties(Gr,In);const{filter:nn}=In;if(nn){if(Ut.properties=Gr.properties,nn.needGeometry){if(!nn.filter(new Ao(this.tileID.overscaledZ,{worldview:I}),Ut,this.tileID.canonical))continue}else if(!nn.filter(new Ao(this.tileID.overscaledZ,{worldview:I}),Ut))continue}Yr=!0,In.targetId&&this.addFeatureVariant(Gr,In)}Yr&&this.appendToResult(s,Ee,L,Gr,Ht)}}updateFeatureProperties(s,u,y){if(u.properties){const w={};for(const T in u.properties){const I=u.properties[T].evaluate({zoom:this.z},s._vectorTileFeature,s.state,s.tile,y);I!=null&&(w[T]=I)}s.properties=w}}addFeatureVariant(s,u,y){const w={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(w.properties=s.properties),s.variants=s.variants||{},s.variants[u.targetId]=s.variants[u.targetId]||[],s.variants[u.targetId].push(w)}appendToResult(s,u,y,w,T){let I=s[u];I===void 0&&(I=s[u]=[]),I.push({featureIndex:y,feature:w,intersectionZ:T})}lookupSymbolFeatures(s,u,y,w,T,I){const L={};this.loadVTLayers();for(const H of s)this.loadMatchingFeature(L,{bucketIndex:u,sourceLayerIndex:y,featureIndex:H,layoutVertexArrayOffset:0},w,T,I);return L}loadFeature(s){const{featureIndex:u,sourceLayerIndex:y}=s;this.loadVTLayers();const w=this.sourceLayerCoder.decode(y),T=this.vtFeatures[w];if(T[u])return T[u];const I=this.vtLayers[w].feature(u);return T[u]=I,I}hasLayer(s){for(const u of this.bucketLayerIDs)for(const y of u)if(s===y)return!0;return!1}getId(s,u){let y=s.id;if(this.promoteId){const w=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(w!=null)if(Array.isArray(w)){if(!this.promoteIdExpression){const T=zl(w);if(T.result!=="success"){const I=T.value.map(L=>`${L.key}: ${L.message}`).join(", ");return void Qi(`Failed to create expression for promoteId: ${I}`)}this.promoteIdExpression=T.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new jl),y=this.promoteIdExpression.evaluate({zoom:0},s)}else y=s.properties[w];typeof y=="boolean"&&(y=Number(y))}return y}}function O6(d,s,u,y,w){return Vn(d,(T,I)=>{const L=s instanceof eo?s.get(I):null;return L&&L.evaluate?L.evaluate(u,y,void 0,w):L})}function w9(d,s){return s-d}Xn(k6,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const D6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Q3{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,y]=new Uint8Array(s,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=y>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const T=D6[15&y];if(!T)throw new Error("Unrecognized array type.");const[I]=new Uint16Array(s,2,1),[L]=new Uint32Array(s,4,1);return new Q3(L,I,T,s)}constructor(s,u=64,y=Float64Array,w){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=y,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const T=D6.indexOf(this.ArrayType),I=2*s*this.ArrayType.BYTES_PER_ELEMENT,L=s*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-L%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${y}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+L+H,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+I+L+H),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+L+H,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=s,this.coords[this._pos++]=u,y}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return V3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,y,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:I,nodeSize:L}=this,H=[0,T.length-1,0],W=[];for(;H.length;){const se=H.pop()||0,ue=H.pop()||0,me=H.pop()||0;if(ue-me<=L){for(let ze=me;ze<=ue;ze++){const Xe=I[2*ze],ht=I[2*ze+1];Xe>=s&&Xe<=y&&ht>=u&&ht<=w&&W.push(T[ze])}continue}const Ee=me+ue>>1,Ie=I[2*Ee],Re=I[2*Ee+1];Ie>=s&&Ie<=y&&Re>=u&&Re<=w&&W.push(T[Ee]),(se===0?s<=Ie:u<=Re)&&(H.push(me),H.push(Ee-1),H.push(1-se)),(se===0?y>=Ie:w>=Re)&&(H.push(Ee+1),H.push(ue),H.push(1-se))}return W}within(s,u,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:T,nodeSize:I}=this,L=[0,w.length-1,0],H=[],W=y*y;for(;L.length;){const se=L.pop()||0,ue=L.pop()||0,me=L.pop()||0;if(ue-me<=I){for(let ze=me;ze<=ue;ze++)N6(T[2*ze],T[2*ze+1],s,u)<=W&&H.push(w[ze]);continue}const Ee=me+ue>>1,Ie=T[2*Ee],Re=T[2*Ee+1];N6(Ie,Re,s,u)<=W&&H.push(w[Ee]),(se===0?s-y<=Ie:u-y<=Re)&&(L.push(me),L.push(Ee-1),L.push(1-se)),(se===0?s+y>=Ie:u+y>=Re)&&(L.push(Ee+1),L.push(ue),L.push(1-se))}return H}}function V3(d,s,u,y,w,T){if(w-y<=u)return;const I=y+w>>1;R6(d,s,I,y,w,T),V3(d,s,u,y,I-1,1-T),V3(d,s,u,I+1,w,1-T)}function R6(d,s,u,y,w,T){for(;w>y;){if(w-y>600){const W=w-y+1,se=u-y+1,ue=Math.log(W),me=.5*Math.exp(2*ue/3),Ee=.5*Math.sqrt(ue*me*(W-me)/W)*(se-W/2<0?-1:1);R6(d,s,u,Math.max(y,Math.floor(u-se*me/W+Ee)),Math.min(w,Math.floor(u+(W-se)*me/W+Ee)),T)}const I=s[2*u+T];let L=y,H=w;for(j_(d,s,y,u),s[2*w+T]>I&&j_(d,s,y,w);L<H;){for(j_(d,s,L,H),L++,H--;s[2*L+T]<I;)L++;for(;s[2*H+T]>I;)H--}s[2*y+T]===I?j_(d,s,y,H):(H++,j_(d,s,H,w)),H<=u&&(y=H+1),u<=H&&(w=H-1)}}function j_(d,s,u,y){G3(d,u,y),G3(s,2*u,2*y),G3(s,2*u+1,2*y+1)}function G3(d,s,u){const y=d[s];d[s]=d[u],d[u]=y}function N6(d,s,u,y){const w=d-u,T=s-y;return w*w+T*T}t.$=Sa,t.A=tu,t.B=as,t.C=wh,t.D=dg,t.E=Lu,t.F=2,t.G=C_,t.H=uT,t.I=ol,t.J=Tl,t.K=class extends q2{},t.L=Wr,t.M=qp,t.N=la,t.O=Ss,t.P=tr,t.Q=pa,t.R=Jc,t.S=$o,t.T=__,t.U=Pc,t.V=q2,t.W=ja,t.X=zl,t.Y=Xu,t.Z=Jh,t._=Zh,t.a=function(d){return Ji.API_CDN_URL_REGEX.test(d)},t.a$=_r,t.a0=we,t.a1=od,t.a2=Fo,t.a3=Pi,t.a4=function(d){const s=d.value;let u=[];if(!s)return u;const y=Tl(s);return y!=="string"?(u=u.concat([new q2(d.key,s,`string expected, "${y}" found`)]),u):(P3(s,!0)||(u=u.concat([new q2(d.key,s,`invalid url "${s}"`)])),u)},t.a5=Ar,t.a6=nf,t.a7=Po,t.a8=mn,t.a9=class{constructor(d){this.specification=d}possiblyEvaluate(d,s){return kn(d.expression.evaluate(s))}interpolate(d,s,u){return{x:at(d.x,s.x,u),y:at(d.y,s.y,u),z:at(d.z,s.z,u),azimuthal:at(d.azimuthal,s.azimuthal,u),polar:at(d.polar,s.polar,u)}}},t.aA=kt,t.aB=Oc,t.aC=oo,t.aD=je,t.aE=sr,t.aF=function(d,s){const u={};for(let y=0;y<s.length;y++){const w=s[y];w in d&&(u[w]=d[w])}return u},t.aG=Me,t.aH=qe,t.aI=class{constructor(d){this.entries={},this.scheduler=d}request(d,s,u,y){const w=this.entries[d]=this.entries[d]||{callbacks:[]};if(w.result){const[T,I]=w.result;return this.scheduler?this.scheduler.add(()=>{y(T,I)},s):y(T,I),()=>{}}return w.callbacks.push(y),w.cancel||(w.cancel=u((T,I)=>{w.result=[T,I];for(const L of w.callbacks)this.scheduler?this.scheduler.add(()=>{L(T,I)},s):L(T,I);setTimeout(()=>delete this.entries[d],3e3)})),()=>{w.result||(w.callbacks=w.callbacks.filter(T=>T!==y),w.callbacks.length||(w.cancel(),delete this.entries[d]))}}},t.aJ=function(d,s,u){const y=JSON.stringify(d.request);return d.data&&(this.deduped.entries[y]={result:[null,d.data]}),this.deduped.request(y,{type:"parseTile",isSymbolTile:d.isSymbolTile,zoom:d.tileZoom},w=>{const T=Fu(d.request,(I,L,H,W)=>{I?w(I):L&&w(null,{vectorTile:u?void 0:new di(new F2(L)),rawData:L,cacheControl:H,expires:W})});return()=>{T.cancel(),w()}},s)},t.aK=function(d){sl++,sl>Fa&&(d.getActor().send("enforceCacheSizeLimit",Ha),sl=0)},t.aL=function(d){return d<=1?1:Math.pow(2,Math.floor(Math.log(d)/Math.LN2))},t.aM=ea,t.aN=jT,t.aO=GT,t.aP=NT,t.aQ=function(d,s){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){s(null,u)};for(let y=0;y<d.length;y++){const w=document.createElement("source");Ec(d[y])||(u.crossOrigin="Anonymous"),w.src=d[y],u.appendChild(w)}return{cancel:()=>{}}},t.aR=B0,t.aS=function(d){return fetch(d).then(s=>s.arrayBuffer()).then(s=>M2(s,0,d))},t.aT=v_,t.aU=class{constructor(d,s,u,y){this.id=d,this.position=s!=null?new ve(s[0],s[1]):new ve(0,0),this.orientation=u??[0,0,0],this.nodes=y,this.uploaded=!1,this.aabb=new ye([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(d,s){if(S(d.matrix,s,d.matrix),d.meshes)for(const u of d.meshes){const y=ye.applyTransformFast(u.aabb,d.matrix);this.aabb.encapsulate(y)}if(d.children)for(const u of d.children)this._applyTransformations(u,d.matrix)}computeBoundsAndApplyParent(){const d=x([]);for(const s of this.nodes)this._applyTransformations(s,d)}computeModelMatrix(d,s,u,y,w,T,I=!1){cs(this.matrix,this,d.transform,this.position,s,u,y,w,T,I)}upload(d){if(!this.uploaded){for(const s of this.nodes)Ko(s,d);for(const s of this.nodes)ao(s);this.uploaded=!0}}destroy(){for(const d of this.nodes)ua(d)}},t.aV=Tn,t.aW=T_,t.aX=lt,t.aY=dt,t.aZ=jd,t.a_=Lo,t.aa=Ao,t.ab=$a,t.ac=Pt,t.ad=Be,t.ae=G,t.af=Ct,t.ag=eo,t.ah=GA,t.ai=at,t.aj=tn,t.ak=Er,t.al=li,t.am=Le,t.an=class{constructor(d){this.specification=d}possiblyEvaluate(d,s){return function([u,y]){const w=kn([1,u,y]);return{x:w.x,y:w.y,z:w.z}}(d.expression.evaluate(s))}interpolate(d,s,u){return{x:at(d.x,s.x,u),y:at(d.y,s.y,u),z:at(d.z,s.z,u)}}},t.ao=function(d,s,u=0,y=!0){const w=new tr(u,u),T=d.sub(w),I=s.add(w),L=[T,new tr(I.x,T.y),I,new tr(T.x,I.y)];return y&&L.push(T.clone()),L},t.ap=function(d,s){const u=[];for(let y=0;y<d.length;y++){const w=rr(y-1,-1,d.length-1),T=rr(y+1,-1,d.length-1),I=d[y],L=d[T],H=d[w].sub(I).unit(),W=L.sub(I).unit(),se=W.angleWithSep(H.x,H.y),ue=H.add(W).unit().mult(-1*s/Math.sin(se/2));u.push(I.add(ue))}return u},t.aq=ST,t.ar=ys,t.as=function(d,s,u=0){return Z(((s.x-u)*d.scale-d.x)*tn,(s.y*d.scale-d.y)*tn,vt(s.z,s.y))},t.at=ot,t.au=pe,t.av=io,t.aw=OB,t.ax=function(d){let s=1/0,u=1/0,y=-1/0,w=-1/0;for(const T of d)s=Math.min(s,T.x),u=Math.min(u,T.y),y=Math.max(y,T.x),w=Math.max(w,T.y);return{min:new tr(s,u),max:new tr(y,w)}},t.ay=nt,t.az=S,t.b=function(d){return Ji.API_FONTS_REGEX.test(d)},t.b$=w3,t.b0=jA,t.b1=G2,t.b2=function(){Du.isLoading()||Du.isLoaded()||Od()!=="deferred"||_p()},t.b3=Gc,t.b4=kr,t.b5=Y1,t.b6=si,t.b7=f3,t.b8=r_,t.b9=qt,t.bA=function(d,s){const{x:u,y}=d.point,w=xb(u,y,d.worldSize/d._pixelsPerMercatorPixel,0,0);return S(w,w,C1(Ip(s)))},t.bB=p,t.bC=Ne,t.bD=function(d,s){return Math.hypot(s[0]-d[0],s[1]-d[1],s[2]-d[2])},t.bE=J,t.bF=re,t.bG=Oe,t.bH=S_,t.bI=Gf,t.bJ=_3,t.bK=function(d,s,u,y,w){const T=5*s+2;d.float32[T+0]=u,d.float32[T+1]=y,d.float32[T+2]=w},t.bL=V2,t.bM=ur,t.bN=Mr,t.bO=Yt,t.bP=_i,t.bQ=rr,t.bR=function(d,s,u,y){var w=new f(4);return w[0]=d,w[1]=s,w[2]=u,w[3]=y,w},t.bS=O1,t.bT=zt,t.bU=hu,t.bV=Kb,t.bW=WT,t.bX=Zb,t.bY=P1,t.bZ=y3,t.b_=gT,t.ba=Wc,t.bb=Zp,t.bc=pd,t.bd=wo,t.be=hg,t.bf=M3,t.bg=function(d,s){const u=GA(s.zoom);if(u===0)return Ip(d);const y=w1(d),w=S1(y),T=je(y.getWest())*s.worldSize,I=je(y.getEast())*s.worldSize,L=qe(y.getNorth())*s.worldSize,H=qe(y.getSouth())*s.worldSize,W=[T,L,0],se=[I,L,0],ue=[T,H,0],me=[I,H,0],Ee=v([],s.globeMatrix);return Be(W,W,Ee),Be(se,se,Ee),Be(ue,ue,Ee),Be(me,me,Ee),w[0]=lA(w[0],ue,u),w[1]=lA(w[1],me,u),w[2]=lA(w[2],se,u),w[3]=lA(w[3],W,u),ye.fromPoints(w)},t.bh=u0,t.bi=v,t.bj=lg,t.bk=lA,t.bl=Nd,t.bm=oA,t.bn=Q,t.bo=B,t.bp=nx,t.bq=F2,t.br=Fu,t.bs=function(d,s){const u=[];for(const y in d)y in s||u.push(y);return u},t.bt=Et,t.bu=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.bv=zn,t.bw=function(d){var s=new f(16);return s[0]=d[0],s[1]=d[1],s[2]=d[2],s[3]=d[3],s[4]=d[4],s[5]=d[5],s[6]=d[6],s[7]=d[7],s[8]=d[8],s[9]=d[9],s[10]=d[10],s[11]=d[11],s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15],s},t.bx=x,t.by=X,t.bz=b,t.c=Co,t.c$=45,t.c0=Q3,t.c1=de,t.c2=Ze,t.c3=fr,t.c4=function(d,s,u){u*=.5;var y=s[0],w=s[1],T=s[2],I=s[3],L=Math.sin(u),H=Math.cos(u);return d[0]=y*H+w*L,d[1]=w*H-y*L,d[2]=T*H+I*L,d[3]=I*H-T*L,d},t.c5=Tr,t.c6=Yn,t.c7=function(d,s){return d[0]=-s[0],d[1]=-s[1],d[2]=-s[2],d[3]=s[3],d},t.c8=ne,t.c9=function(d,s,u,y,w){var T,I=1/Math.tan(s/2);return d[0]=I/u,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=I,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,w!=null&&w!==1/0?(d[10]=(w+y)*(T=1/(y-w)),d[14]=2*w*y*T):(d[10]=-1,d[14]=-2*y),d},t.cA=Kl,t.cB=c0,t.cC=function(d,s,u,y,w,T,I,L,H){if(H.name==="globe")return c0(d,s,new Kl(u,y,w),!1);const W=T_({z:u,x:y,y:w},H);return new ye([(T+W.x/W.scale)*s,s*(W.y/W.scale),I],[(T+W.x2/W.scale)*s,s*(W.y2/W.scale),L])},t.cD=function(d,s,u){return d[0]=Math.min(s[0],u[0]),d[1]=Math.min(s[1],u[1]),d[2]=Math.min(s[2],u[2]),d[3]=Math.min(s[3],u[3]),d},t.cE=function(d,s,u){return d[0]=Math.max(s[0],u[0]),d[1]=Math.max(s[1],u[1]),d[2]=Math.max(s[2],u[2]),d[3]=Math.max(s[3],u[3]),d},t.cF=function(d){const s=Math.round((d+45+360)%360/90)%4;return Ve[s]},t.cG=Tt,t.cH=yt,t.cI=C,t.cJ=function(d){const s=x(new Float64Array(16));S(s,d.pixelMatrix,d.globeMatrix);const u=[0,M,0],y=[0,P,0];return Be(u,u,s),Be(y,y,s),[u[0]>0&&u[0]<=d.width&&u[1]>0&&u[1]<=d.height&&!ug(d,new ve(d.center.lat,90)),y[0]>0&&y[0]<=d.width&&y[1]>0&&y[1]<=d.height&&!ug(d,new ve(d.center.lat,-90))]},t.cK=function(d,s){const{scale:u}=d.tileTransform,y=u*tn/(d.tileSize*Math.pow(2,s.zoom-d.tileID.overscaledZ+d.tileID.canonical.z));return function(w,T,I){var L=T[1],H=T[2],W=T[3],se=I[0],ue=I[1];return w[0]=T[0]*se,w[1]=L*se,w[2]=H*ue,w[3]=W*ue,w}(new Float32Array(4),s.inverseAdjustmentMatrix,[y,y])},t.cL=Se,t.cM=Ae,t.cN=D,t.cO=function(d){const s=D(d,!0);return p([],[s[0],s[1],s[4],s[5]])},t.cP=F,t.cQ=fo,t.cR=O,t.cS=function(d){const{x:s,y:u}=d.point,{lng:y,lat:w}=d._center;return xb(s,u,d.worldSize,y,w)},t.cT=N,t.cU=Qt,t.cV=Ac,t.cW=Xi,t.cX=Gi,t.cY=function(d,s,u){let y=0;for(let w=0;w<2;++w)d[w]>0&&(y+=(d[w]-0)*(d[w]-0)),s[w]<0&&(y+=(0-s[w])*(0-s[w]));return y},t.cZ=function(d){return d*d*d*d*d},t.c_=Qe,t.ca=function(d,s,u,y,w,T,I){var L=1/(s-u),H=1/(y-w),W=1/(T-I);return d[0]=-2*L,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*H,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*W,d[11]=0,d[12]=(s+u)*L,d[13]=(w+y)*H,d[14]=(I+T)*W,d[15]=1,d},t.cb=Ke,t.cc=function(d,s,u){d[4*s+0]=u[0],d[4*s+1]=u[1],d[4*s+2]=u[2],d[4*s+3]=u[3]},t.cd=Ih,t.ce=Ep,t.cf=Io,t.cg=Mh,t.ch=Hf,t.ci=ve,t.cj=IT,t.ck=function(){var d=new f(4);return f!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d},t.cl=function(d,s,u){var y=s[0],w=s[1],T=s[2],I=s[3],L=Math.sin(u),H=Math.cos(u);return d[0]=y*H+T*L,d[1]=w*H+I*L,d[2]=y*-L+T*H,d[3]=w*-L+I*H,d},t.cm=function(d,s){return d[0]===s[0]&&d[1]===s[1]&&d[2]===s[2]&&d[3]===s[3]},t.cn=st,t.co=function(d){return Math.hypot(d[0],d[1],d[2],d[3])},t.cp=pr,t.cq=Ge,t.cr=Dl,t.cs=3,t.ct=2,t.cu=7,t.cv=6,t.cw=ie,t.cx=fe,t.cy=le,t.cz=q,t.d=function(d){return Ji.API_TILEJSON_REGEX.test(d)},t.d$=(d,s,u,y,w,T,I,L,H,W)=>{const se=d.transform,ue=se.calculatePixelsToTileUnitsMatrix(s),me=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",Ee=se.pitch<15?DB(.07,.7,nt((14-se.zoom)/5,0,1)):.07;return{u_matrix:NB(d,s,u,y),u_pixels_to_tile_units:ue,u_device_pixel_ratio:T,u_width_scale:I,u_floor_width_scale:L,u_units_to_pixels:[1/se.pixelsToGLUnits[0],1/se.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:w,u_texsize:UB(u)&&s.lineAtlasTexture?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:RB(s,d.transform),u_alpha_discard_threshold:0,u_trim_offset:H,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toPremultipliedRenderColor(me?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:Ee,u_tile_to_meter:Mt(s.tileID.canonical,0),u_ground_shadow_factor:W}},t.d0=zf,t.d1=function(d,s,u){const y=Math.sqrt(d*d+s*s+u*u),w=y>0?Math.acos(u/y)*Qs:0;let T=d!==0||s!==0?Math.atan2(-s,-d)*Qs+90:0;return T<0&&(T+=360),[y,T,w]},t.d2=Z,t.d3=kn,t.d4=Mt,t.d5=k,t.d6=ye,t.d7=R,t.d8=function(d){return[Math.pow(d[0],1/2.2),Math.pow(d[1],1/2.2),Math.pow(d[2],1/2.2)]},t.d9=P3,t.dA=w1,t.dB=function(d){const s=Tt-5;d=nt(d,-s,s)/s*90;const u=Math.pow(Math.abs(Math.sin(li(d))),3);return Math.round(u*(E.length-1))},t.dC=function(d,s,u,y){const w=s.getNorth(),T=s.getSouth(),I=s.getWest(),L=s.getEast(),H=1<<d.z,W=L-I,se=w-T,ue=W/A,me=-se/E[u],Ee=[0,ue,0,me,0,0,w,I,0];if(d.z>0){const Ie=180/y;m(Ee,Ee,[Ie/W+1,0,0,0,Ie/se+1,0,-.5*Ie/ue,.5*Ie/me,1])}return Ee[2]=H,Ee[5]=d.x,Ee[8]=d.y,Ee},t.dD=Ip,t.dE=function(d,s,u){const y=x(new Float64Array(16)),w=(s/(1<<d)-.5)*Math.PI*2;return V(y,u.globeMatrix,w),Float32Array.from(y)},t.dF=class{isDataAvailableAtPoint(d){const s=this._source();if(this.isUsingMockSource()||!s||d.y<0||d.y>1)return!1;const u=s.getSource().maxzoom,y=1<<u,w=Math.floor(d.x),T=Math.floor((d.x-w)*y),I=Math.floor(d.y*y),L=this.findDEMTileFor(new ea(u,w,u,T,I));return!(!L||!L.dem)}getAtPointOrZero(d,s=0){return this.getAtPoint(d,s)||0}getAtPoint(d,s,u=!0){if(this.isUsingMockSource())return null;s==null&&(s=null);const y=this._source();if(!y||d.y<0||d.y>1)return s;const w=y.getSource().maxzoom,T=1<<w,I=Math.floor(d.x),L=d.x-I,H=new ea(w,I,w,Math.floor(L*T),Math.floor(d.y*T)),W=this.findDEMTileFor(H);if(!W||!W.dem)return s;const se=W.dem,ue=1<<W.tileID.canonical.z,me=(L*ue-W.tileID.canonical.x)*se.dim,Ee=(d.y*ue-W.tileID.canonical.y)*se.dim,Ie=Math.floor(me),Re=Math.floor(Ee);return(u?this.exaggeration():1)*at(at(se.get(Ie,Re),se.get(Ie,Re+1),Ee-Re),at(se.get(Ie+1,Re),se.get(Ie+1,Re+1),Ee-Re),me-Ie)}getAtTileOffset(d,s,u){const y=1<<d.canonical.z;return this.getAtPointOrZero(new Pt(d.wrap+(d.canonical.x+s/tn)/y,(d.canonical.y+u/tn)/y))}getAtTileOffsetFunc(d,s,u,y){return w=>{const T=this.getAtTileOffset(d,w.x,w.y),I=y.upVector(d.canonical,w.x,w.y);return de(I,I,T*y.upVectorScale(d.canonical,s,u).metersToTile),I}}getForTilePoints(d,s,u,y){if(this.isUsingMockSource())return!1;const w=W1.create(this,d,y);return!!w&&(s.forEach(T=>{T[2]=this.exaggeration()*w.getElevationAt(T[0],T[1],u)}),!0)}getMinMaxForTile(d){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(d);if(!s||!s.dem)return null;const u=s.dem.tree,y=s.tileID,w=1<<d.canonical.z-y.canonical.z;let T=d.canonical.x/w-y.canonical.x,I=d.canonical.y/w-y.canonical.y,L=0;for(let H=0;H<d.canonical.z-y.canonical.z&&!u.leaves[L];H++){T*=2,I*=2;const W=2*Math.floor(I)+Math.floor(T);L=u.childOffsets[L]+W,T%=1,I%=1}return{min:this.exaggeration()*u.minimums[L],max:this.exaggeration()*u.maximums[L]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(d,s,u){throw new Error("Pure virtual method called.")}pointCoordinate(d){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(d){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const d=this.visibleDemTiles;if(d.length===0)return null;let s=!1,u=Number.MAX_VALUE,y=Number.MIN_VALUE;for(const w of d){const T=this.getMinMaxForTile(w.tileID);T&&(u=Math.min(u,T.min),y=Math.max(y,T.max),s=!0)}return s?{min:u,max:y}:null}},t.dG=Oo,t.dH=Ad,t.dI=function(d,s){return[Math.pow(d[0],2.2)*s,Math.pow(d[1],2.2)*s,Math.pow(d[2],2.2)*s]},t.dJ=_,t.dK=function(d,s){var u=Math.sin(s),y=Math.cos(s);return d[0]=y,d[1]=u,d[2]=0,d[3]=-u,d[4]=y,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},t.dL=He,t.dM=bb,t.dN=xs,t.dO=zi,t.dP=256,t.dQ=function(d,s){const u=[0,0,0];return Be(u,u,u0(Ip(s.canonical))),Be(u,u,d),u},t.dR=d=>({u_matrix:new Hf(d),u_texsize:new Mh(d),u_pixels_to_tile_units:new nA(d),u_device_pixel_ratio:new Io(d),u_width_scale:new Io(d),u_floor_width_scale:new Io(d),u_image:new Ih(d),u_units_to_pixels:new Mh(d),u_tile_units_to_pixels:new Io(d),u_alpha_discard_threshold:new Io(d),u_trim_offset:new Mh(d),u_trim_fade_range:new Mh(d),u_trim_color:new zf(d),u_emissive_strength:new Io(d),u_zbias_factor:new Io(d),u_tile_to_meter:new Io(d),u_ground_shadow_factor:new Ep(d),u_pattern_transition:new Io(d)}),t.dS=d=>({u_matrix:new Hf(d),u_pixels_to_tile_units:new nA(d),u_device_pixel_ratio:new Io(d),u_width_scale:new Io(d),u_floor_width_scale:new Io(d),u_units_to_pixels:new Mh(d),u_dash_image:new Ih(d),u_gradient_image:new Ih(d),u_image_height:new Io(d),u_texsize:new Mh(d),u_tile_units_to_pixels:new Io(d),u_alpha_discard_threshold:new Io(d),u_trim_offset:new Mh(d),u_trim_fade_range:new Mh(d),u_trim_color:new zf(d),u_emissive_strength:new Io(d),u_zbias_factor:new Io(d),u_tile_to_meter:new Io(d),u_ground_shadow_factor:new Ep(d)}),t.dT=d=>({u_camera_to_center_distance:new Io(d),u_extrude_scale:new nA(d),u_device_pixel_ratio:new Io(d),u_matrix:new Hf(d),u_inv_rot_matrix:new Hf(d),u_merc_center:new Mh(d),u_tile_id:new Ep(d),u_zoom_transition:new Io(d),u_up_dir:new Ep(d),u_emissive_strength:new Io(d)}),t.dU=ad,t.dV=DR,t.dW=Cb,t.dX=(d,s,u,y,w,T)=>{const I=d.transform,L=I.projection.name==="globe";let H;if(T.paint.get("circle-pitch-alignment")==="map")if(L){const se=bb(I.zoom,s.canonical)*I._pixelsPerMercatorPixel;H=Float32Array.from([se,0,0,se])}else H=I.calculatePixelsToTileUnitsMatrix(u);else H=new Float32Array([I.pixelsToGLUnits[0],0,0,I.pixelsToGLUnits[1]]);const W={u_camera_to_center_distance:d.transform.getCameraToCenterDistance(I.projection),u_matrix:d.translatePosMatrix(s.projMatrix,u,T.paint.get("circle-translate"),T.paint.get("circle-translate-anchor")),u_device_pixel_ratio:ro.devicePixelRatio,u_extrude_scale:H,u_inv_rot_matrix:Sb,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:T.paint.get("circle-emissive-strength")};if(L){W.u_inv_rot_matrix=y,W.u_merc_center=w,W.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],W.u_zoom_transition=GA(I.zoom);const se=w[0]*tn,ue=w[1]*tn;W.u_up_dir=I.projection.upVector(new Kl(0,0,0),se,ue)}return W},t.dY=jB,t.dZ=Qo,t.d_=(d,s,u,y,w,T,I,L,H,W)=>{const se=d.transform,ue=se.pitch<15?DB(.07,.7,nt((14-se.zoom)/5,0,1)):.07,me=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:NB(d,s,u,y),u_texsize:s.imageAtlasTexture?s.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:se.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:w,u_width_scale:T,u_floor_width_scale:I,u_image:0,u_tile_units_to_pixels:RB(s,se),u_units_to_pixels:[1/se.pixelsToGLUnits[0],1/se.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:L,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toPremultipliedRenderColor(me?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:ue,u_tile_to_meter:Mt(s.tileID.canonical,0),u_ground_shadow_factor:H,u_pattern_transition:W}},t.da=function(d,s){return d.readFields(F7,{icons:[]},s)},t.db=ah,t.dc=Q1,t.dd=b3,t.de=Dh,t.df=Kp,t.dg=zo,t.dh=Qa,t.di=Si,t.dj=function(d){const s=d.indexOf(xh);return s>=0?d.slice(0,s):d},t.dk=function(d){return d.indexOf(xh)>=0},t.dl=function(d){const s=d.lastIndexOf(xh);return s>=0?d.slice(s+1):""},t.dm=function(d){const s=[],u=d.id;return u===void 0&&s.push({message:`layers.${u}: missing required property "id"`}),d.render===void 0&&s.push({message:`layers.${u}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},t.dn=function(d,s,u,y){return d.type==="custom"?new C7(d,s):new I7[d.type](d,s,u,y)},t.dp=Bi,t.dq=function(d){const s=d.indexOf(xh);return s>=0?d.slice(s+1):""},t.dr=class extends Y1{constructor(d,s){super(d._vectorTileFeature,d._z,d._x,d._y,d.id),d.state&&(this.state=Object.assign({},d.state)),this.target=s.target,this.namespace=s.namespace,s.properties&&(this.properties=s.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=d.source,this.sourceLayer=d.sourceLayer,this.layer=d.layer)}toJSON(){const d=super.toJSON();return d.target=this.target,d.namespace=this.namespace,d}},t.ds=Vc,t.dt=mu,t.du=function(d){return d({pluginStatus:El,pluginURL:_h}),Vc.on("pluginStateChange",d),d},t.dv=wm,t.dw=class extends Th{constructor(d){super(d),this.current=og}set(d,s,u){if(this.fetchUniformLocation(d,s)){for(let y=0;y<9;y++)if(u[y]!==this.current[y]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},t.dx=et,t.dy=function(d,s,u){const y=GA(u.zoom),w=d.style.map._antialias,T=d.terrain&&d.terrain.exaggeration()>0;return y===0&&!w&&!T},t.dz=function(d){const s=d.pixelsPerMeter,u=s/Ke(1,d.center.lat),y=x(new Float64Array(16));return B(y,y,[d.point.x,d.point.y,0]),F(y,y,[u,u,s]),Float32Array.from(y)},t.e=Ji,t.e$=Od,t.e0=pn,t.e1=f0,t.e2=vt,t.e3=uu,t.e4=k1,t.e5=u2,t.e6=XA,t.e7=450,t.e8=7,t.e9=Vt,t.eA=function(d,s,u,y,w,T,I,L,H,W,se,ue,me,Ee,Ie,Re){var ze=new f(16);return ze[0]=d,ze[1]=s,ze[2]=u,ze[3]=y,ze[4]=w,ze[5]=T,ze[6]=I,ze[7]=L,ze[8]=H,ze[9]=W,ze[10]=se,ze[11]=ue,ze[12]=me,ze[13]=Ee,ze[14]=Ie,ze[15]=Re,ze},t.eB=te,t.eC=ld,t.eD=Vd,t.eE=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new tr(1/0,1/0),max:new tr(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(d,s=!1){const u=qb(new tr(0,0),new tr(tn,tn),d),y=[];if(s&&!s_(u,this._globalClipBounds))return y;for(const w of this._activeRegions){if(w.hiddenByOverlap||!s_(u,w))continue;const T=Yb(w.min,w.max,d);y.push({min:T.min,max:T.max,sourceId:this._sourceIds[w.priority],footprint:w.footprint,footprintTileId:w.tileId,order:w.order,clipMask:w.clipMask,clipScope:w.clipScope})}return y}setSources(d){this._setSources(d.map(s=>({getSourceId:()=>s.cache.id,getFootprints:()=>{const u=[];for(const y of s.cache.getVisibleCoordinates()){const w=s.cache.getTile(y).buckets[s.layer];w&&w.updateFootprints(y.toUnwrapped(),u)}return u},getOrder:()=>s.order,getClipMask:()=>s.clipMask,getClipScope:()=>s.clipScope})))}_addSource(d){const s=d.getFootprints();if(s.length===0)return;const u=d.getOrder(),y=d.getClipMask(),w=d.getClipScope();for(const T of s){if(!T.footprint)continue;const I=qb(T.footprint.min,T.footprint.max,T.id);this._activeRegions.push({min:I.min,max:I.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:T.id,footprint:T.footprint,order:u,clipMask:y,clipScope:w})}this._sourceIds.push(d.getSourceId())}_computeReplacement(){this._activeRegions.sort((s,u)=>s.priority-u.priority||Kc(s.min,u.min)||Kc(s.max,u.max)||s.order-u.order||s.clipMask-u.clipMask||function(y,w){const T=(I,L)=>I+L;return y.length-w.length||y.reduce(T,"").localeCompare(w.reduce(T,""))}(s.clipScope,u.clipScope));let d=this._activeRegions.length!==this._prevRegions.length;if(!d){let s=0;for(;!d&&s!==this._activeRegions.length;){const u=this._activeRegions[s],y=this._prevRegions[s];d=u.priority!==y.priority||!Wh(u,y)||u.order!==y.order||u.clipMask!==y.clipMask||!zn(u.clipScope,y.clipScope),++s}}if(d){++this._updateTime;for(const u of this._activeRegions)u.order!==g0&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const s=u=>{const y=this._activeRegions;if(u>=y.length)return u;const w=y[u].priority;for(;u<y.length&&y[u].priority===w;)++u;return u};if(this._sourceIds.length>1){let u=0,y=s(u);for(;u!==y;){let w=u;const T=u;for(;w!==y;){const I=this._activeRegions[w];I.hiddenByOverlap=!1;for(let L=0;L<T;L++){const H=this._activeRegions[L];if(!H.hiddenByOverlap&&I.order===g0&&s_(I,H)&&(I.hiddenByOverlap=Xb(I.footprint,I.tileId,H.footprint,H.tileId),I.hiddenByOverlap))break}++w}u=y,y=s(u)}}}}_setSources(d){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let s=d.length-1;s>=0;s--)this._addSource(d[s]);this._computeReplacement()}},t.eF=g0,t.eG=class{constructor(d){this._createGrid(d),this._createPoles(d)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const d of this._poleSegments)d.destroy();for(const d of this._gridSegments)d.withSkirts.destroy(),d.withoutSkirts.destroy()}_fillGridMeshWithLods(d,s){const u=new Wc,y=new Lo,w=[],T=d+1+2,I=s[0]+1,L=s[0]+1+(1+s.length),H=(W,se,ue)=>{let me=W===T-1?W-2:W===0?W:W-1;return me+=ue?24575:0,[me,se]};for(let W=0;W<T;++W)u.emplaceBack(...H(W,0,!0));for(let W=0;W<I;++W)for(let se=0;se<T;++se)u.emplaceBack(...H(se,W,(se===0||se===T-1)&&!0));for(let W=0;W<s.length;++W){const se=s[W];for(let ue=0;ue<T;++ue)u.emplaceBack(...H(ue,se,!0))}for(let W=0;W<s.length;++W){const se=y.length,ue=s[W]+1+2,me=new Lo;for(let Re=0;Re<ue-1;Re++){const ze=Re===ue-2,Xe=ze?T*(L-s.length+W-Re):T;for(let ht=0;ht<T-1;ht++){const ut=Re*T+ht;Re===0||ze||ht===0||ht===T-2?(me.emplaceBack(ut+1,ut,ut+Xe),me.emplaceBack(ut+Xe,ut+Xe+1,ut+1)):(y.emplaceBack(ut+1,ut,ut+Xe),y.emplaceBack(ut+Xe,ut+Xe+1,ut+1))}}const Ee=wo.simpleSegment(0,se,u.length,y.length-se);for(let Re=0;Re<me.uint16.length;Re+=3)y.emplaceBack(me.uint16[Re],me.uint16[Re+1],me.uint16[Re+2]);const Ie=wo.simpleSegment(0,se,u.length,y.length-se);w.push({withoutSkirts:Ee,withSkirts:Ie})}return{vertices:u,indices:y,segments:w}}_createGrid(d){const s=this._fillGridMeshWithLods(A,E);this._gridSegments=s.segments,this._gridBuffer=d.createVertexBuffer(s.vertices,pd.members),this._gridIndexBuffer=d.createIndexBuffer(s.indices,!0)}_createPoles(d){const s=new Lo;for(let I=0;I<=A;I++)s.emplaceBack(0,I+1,I+2);this._poleIndexBuffer=d.createIndexBuffer(s,!0);const u=new hf,y=new hf,w=new hf,T=new hf;this._poleSegments=[];for(let I=0,L=0;I<Gi;I++){const H=360/(1<<I);u.emplaceBack(0,-Oc,0,.5,0),y.emplaceBack(0,-Oc,0,.5,1),w.emplaceBack(0,-Oc,0,.5,.5),T.emplaceBack(0,-Oc,0,.5,.5);for(let W=0;W<=A;W++){let se=W/A,ue=0;const me=at(0,H,se),[Ee,Ie,Re]=j(F5,$y,me,Oc);u.emplaceBack(Ee,Ie,Re,se,ue),y.emplaceBack(Ee,Ie,Re,se,1-ue);const ze=li(me);se=.5+.5*Math.sin(ze),ue=.5+.5*Math.cos(ze),w.emplaceBack(Ee,Ie,Re,se,ue),T.emplaceBack(Ee,Ie,Re,se,1-ue)}this._poleSegments.push(wo.simpleSegment(L,0,66,64)),L+=66}this._poleNorthVertexBuffer=d.createVertexBuffer(u,dd,!1),this._poleSouthVertexBuffer=d.createVertexBuffer(y,dd,!1),this._texturedPoleNorthVertexBuffer=d.createVertexBuffer(w,dd,!1),this._texturedPoleSouthVertexBuffer=d.createVertexBuffer(T,dd,!1)}getGridBuffers(d,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[d].withSkirts:this._gridSegments[d].withoutSkirts]}getPoleBuffers(d,s){return[s?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,s?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[d]]}},t.eH=$b,t.eI=We,t.eJ=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},t.eK=tt,t.eL=It,t.eM=function(d,s,u){return d[0]=s[0]/u[0],d[1]=s[1]/u[1],d[2]=s[2]/u[2],d},t.eN=Je,t.eO=K,t.eP=Te,t.eQ=z,t.eR=function([d,s,u]){const y=Math.hypot(d,s,u),w=Math.atan2(d,u),T=.5*Math.PI-Math.acos(-s/y);return new ve(Qt(w),Qt(T))},t.eS=Nt,t.eT=_t,t.eU=function(d){const s=d.navigator?d.navigator.userAgent:null;return!!function(u){if(qn==null){const y=u.navigator?u.navigator.userAgent:null;qn=!!u.safari||!(!y||!(/\b(iPad|iPhone|iPod)\b/.test(y)||y.match("Safari")&&!y.match("Chrome")))}return qn}(d)&&!(!s||!(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},t.eV=function(d,s){Ha=d,Fa=s},t.eW=ug,t.eX=h0,t.eY=function(d){const s=[0,0,0],u=x(new Float64Array(16));return S(u,d.pixelMatrix,d.globeMatrix),Be(s,s,u),new tr(s[0],s[1])},t.eZ=function(){const d=x0;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(d_),x0=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},t.e_=function(){ah().acquire(d_)},t.ea=function(d,s){if(d===s){var u=s[1],y=s[2],w=s[3],T=s[6],I=s[7],L=s[11];d[1]=s[4],d[2]=s[8],d[3]=s[12],d[4]=u,d[6]=s[9],d[7]=s[13],d[8]=y,d[9]=T,d[11]=s[14],d[12]=w,d[13]=I,d[14]=L}else d[0]=s[0],d[1]=s[4],d[2]=s[8],d[3]=s[12],d[4]=s[1],d[5]=s[5],d[6]=s[9],d[7]=s[13],d[8]=s[2],d[9]=s[6],d[10]=s[10],d[11]=s[14],d[12]=s[3],d[13]=s[7],d[14]=s[11],d[15]=s[15];return d},t.eb=S7,t.ec=Gs,t.ed=NA,t.ee=256,t.ef=C1,t.eg=zu,t.eh=V,t.ei=function(d,s){return d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[4],d[4]=s[5],d[5]=s[6],d[6]=s[8],d[7]=s[9],d[8]=s[10],d},t.ej=hf,t.ek=xm,t.el=en,t.em=function(d,s,u,y,w){return nt((d-s)/(u-s)*(w-y)+y,y,w)},t.en=yr,t.eo=function(d,s){var u=s[0],y=s[1],w=s[2],T=s[3],I=s[4],L=s[5],H=s[6],W=s[7],se=s[8],ue=se*I-L*W,me=-se*T+L*H,Ee=W*T-I*H,Ie=u*ue+y*me+w*Ee;return Ie?(d[0]=ue*(Ie=1/Ie),d[1]=(-se*y+w*W)*Ie,d[2]=(L*y-w*I)*Ie,d[3]=me*Ie,d[4]=(se*u-w*H)*Ie,d[5]=(-L*u+w*T)*Ie,d[6]=Ee*Ie,d[7]=(-W*u+y*H)*Ie,d[8]=(I*u-y*T)*Ie,d):null},t.ep=2,t.eq=Ue,t.er=on,t.es=[1,1,1],t.et=class{constructor(d,s,u,y){this.context=d,this.format=y,this.size=u,this.texture=d.gl.createTexture();const[w,T,I]=this.size,{gl:L}=d;L.bindTexture(L.TEXTURE_3D,this.texture),d.pixelStoreUnpackFlipY.set(!1),d.pixelStoreUnpack.set(1),d.pixelStoreUnpackPremultiplyAlpha.set(!1),L.texImage3D(L.TEXTURE_3D,0,this.format,w,T,I,0,g_(this.format),y_(this.format),s.data)}bind(d,s){const{context:u}=this,{gl:y}=u;y.bindTexture(y.TEXTURE_3D,this.texture),d!==this.minFilter&&(y.texParameteri(y.TEXTURE_3D,y.TEXTURE_MAG_FILTER,d),y.texParameteri(y.TEXTURE_3D,y.TEXTURE_MIN_FILTER,d),this.minFilter=d),s!==this.wrapS&&(y.texParameteri(y.TEXTURE_3D,y.TEXTURE_WRAP_S,s),y.texParameteri(y.TEXTURE_3D,y.TEXTURE_WRAP_T,s),this.wrapS=s)}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}},t.eu=W1,t.ev=bt,t.ew=function(d,s,u,y){var w=s[0],T=s[1],I=s[2],L=s[3];return d[0]=w+y*(u[0]-w),d[1]=T+y*(u[1]-T),d[2]=I+y*(u[2]-I),d[3]=L+y*(u[3]-L),d},t.ex=bi,t.ey=cu,t.ez=ff,t.f=function(d){return btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,(s,u)=>String.fromCharCode(+("0x"+u))))},t.f0=function(d,s,u=!1){if(El===Hl.deferred||El===Hl.loading||El===Hl.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");_h=ro.resolveURL(d),El=Hl.deferred,rf=s,Df(),u||_p()},t.f1=function(d){pg=ro.resolveURL(d),Ag||(Ag=new dg(ah(),new Lu)),Ag.broadcast("setMeshoptUrl",pg)},t.f2=S2,t.f3=function(d){m_=ro.resolveURL(d),Ag||(Ag=new dg(ah(),new Lu)),Ag.broadcast("setDracoUrl",m_)},t.f4=w2,t.f5=b0,t.f6=function(d){const s=Jl();if(!s)return;const u=s.delete(wl);d&&u.then(()=>d()).catch(d)},t.f7=hA,t.f8=Xn,t.f9=WA,t.fa=dA,t.fb=L6,t.fc=k6,t.fd=PB,t.fe=ti,t.ff="hd_road_elevation",t.fg=it,t.fh=Vn,t.fi=YA,t.fj=v3,t.fk=T0,t.fl=function(d,s,u,y,w,T,I,L=1,H,W,se){d.createArrays(),d.tilePixelRatio=tn/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;const ue=d.layers[0].layout,me=d.layers[0]._unevaluatedLayout._values,Ee={};Ee.scaleFactor=L,Ee.textSizeScaleRange=ue.get("text-size-scale-range"),Ee.iconSizeScaleRange=ue.get("icon-size-scale-range");const[Ie,Re]=Ee.textSizeScaleRange,[ze,Xe]=Ee.iconSizeScaleRange;Ee.textScaleFactor=nt(Ee.scaleFactor,Ie,Re),Ee.iconScaleFactor=nt(Ee.scaleFactor,ze,Xe);const ht=me["text-size"],ut=me["icon-size"];if(d.textSizeData.kind==="composite"){const{minZoom:cr,maxZoom:Gr}=d.textSizeData;Ee.compositeTextSizes=[ht.possiblyEvaluate(new Ao(cr,{worldview:se}),T),ht.possiblyEvaluate(new Ao(Gr,{worldview:se}),T)]}if(d.iconSizeData.kind==="composite"){const{minZoom:cr,maxZoom:Gr}=d.iconSizeData;Ee.compositeIconSizes=[ut.possiblyEvaluate(new Ao(cr,{worldview:se}),T),ut.possiblyEvaluate(new Ao(Gr,{worldview:se}),T)]}Ee.layoutTextSize=ht.possiblyEvaluate(new Ao(I+1,{worldview:se}),T),Ee.layoutIconSize=ut.possiblyEvaluate(new Ao(I+1,{worldview:se}),T),Ee.textMaxSize=ht.possiblyEvaluate(new Ao(18,{worldview:se}),T);const mt=ue.get("symbol-placement"),$t=ue.get("text-rotation-alignment")==="map"&&mt!=="point",Ut=ue.get("text-size");let Ht=!1;const or=[];for(const cr of d.features){const Gr=ue.get("text-font").evaluate(cr,{},T).join(","),xr=Ut.evaluate(cr,{},T)*Ee.textScaleFactor,Yr=Ee.layoutTextSize.evaluate(cr,{},T)*Ee.textScaleFactor,In=Ee.layoutIconSize.evaluate(cr,{},T)*Ee.iconScaleFactor,nn={horizontal:{},vertical:void 0},gn=cr.text;let En,zr=[0,0];if(gn){const oi=gn.toString(),Ui=ue.get("text-letter-spacing").evaluate(cr,{},T)*hu,ts=ue.get("text-line-height").evaluate(cr,{},T)*hu,Es=Pd(oi)?Ui:0,gs=ue.get("text-anchor").evaluate(cr,{},T),Xs=ue.get("text-variable-anchor");if(!Xs){const Rr=ue.get("text-radial-offset").evaluate(cr,{},T);if(Rr)zr=gT(gs,[Rr*hu,x3]);else{const Ln=ue.get("text-offset").evaluate(cr,{},T);zr=[Ln[0]*hu,Ln[1]*hu]}}let Ds=$t?"center":ue.get("text-justify").evaluate(cr,{},T);const ya=mt==="point",wt=ya?ue.get("text-max-width").evaluate(cr,{},T)*hu:1/0,St=Rr=>{d.allowVerticalPlacement&&th(oi)&&(nn.vertical=g3(gn,s,u,w,Gr,wt,ts,gs,Rr,Es,zr,Gf.vertical,!0,Yr,xr,H))};if(!$t&&Xs){const Rr=Ds==="auto"?Xs.map(Kn=>w3(Kn)):[Ds];let Ln=!1;for(let Kn=0;Kn<Rr.length;Kn++){const $n=Rr[Kn];if(!nn.horizontal[$n])if(Ln)nn.horizontal[$n]=nn.horizontal[0];else{const gi=g3(gn,s,u,w,Gr,wt,ts,"center",$n,Es,zr,Gf.horizontal,!1,Yr,xr,H);gi&&(nn.horizontal[$n]=gi,Ln=gi.positionedLines.length===1)}}St("left")}else{if(Ds==="auto"&&(Ds=w3(gs)),ya||ue.get("text-writing-mode").indexOf("horizontal")>=0||!th(oi)){const Rr=g3(gn,s,u,w,Gr,wt,ts,gs,Ds,Es,zr,Gf.horizontal,!1,Yr,xr,H);Rr&&(nn.horizontal[Ds]=Rr)}St(ya?"left":Ds)}}let _n,wr,Vr,Pn,xn,Ei,pi=!1;const An=ue.get("icon-text-fit").evaluate(cr,{},T);if(cr.icon&&cr.icon.hasPrimary()){const oi=_T(cr.icon,d.iconSizeData,me["icon-size"],T,d.zoom,cr,H,Ee.iconScaleFactor,se);_n=oi.iconPrimary,Vr=oi.iconSecondary;const Ui=_n.toString();if(wr=y.get(Ui),wr&&(xn=ue.get("icon-offset").evaluate(cr,{},T),Ei=ue.get("icon-anchor").evaluate(cr,{},T),En=e7(w.get(Ui),Vr?w.get(Vr.toString()):void 0,xn,Ei),pi=wr.sdf,d.sdfIcons===void 0?d.sdfIcons=wr.sdf:d.sdfIcons!==wr.sdf&&Qi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(wr.pixelRatio!==d.pixelRatio||ue.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0)),Vr){const ts=Vr.toString();Pn=y.get(ts)}}Ht=Ht||!(!cr.icon||!cr.icon.hasSecondary());const Cn=S3(nn.horizontal)||nn.vertical;d.iconsInText||(d.iconsInText=!!Cn&&Cn.iconsInText);const yi=Yr*Ee.textScaleFactor/hu,{defaultShapedIcon:ii,verticallyShapedIcon:Rn}=u7(d,En,ue,cr,T,nn,yi,xn,An);An!=="none"&&En&&(tT(En)||rT(En))&&(D2(0,wr,_n,En,ii,An,W,y,w),D2(0,Pn,Vr,En,ii,An,W,y,w),Rn&&(D2(0,wr,_n,En,Rn,An,W,y,w),D2(0,Pn,Vr,En,Rn,An,W,y,w))),En=ii,or.push({feature:cr,shapedTextOrientations:nn,shapedText:Cn,shapedIcon:En,iconPrimary:_n,iconSecondary:Vr,iconOffset:xn,iconAnchor:Ei,verticallyShapedIcon:Rn,layoutTextSize:Yr,layoutIconSize:In,textOffset:zr,isSDFIcon:pi,iconTextFit:An})}return{featureData:or,sizes:Ee,hasAnySecondaryIcon:Ht,textAlongLine:$t,symbolPlacement:mt}},t.fm=hT,t.fn=function(d,s,u,y,w,T,I,L,H,W){const{featureData:se,hasAnySecondaryIcon:ue,sizes:me,textAlongLine:Ee,symbolPlacement:Ie}=s;for(const Re of se){const{shapedIcon:ze,verticallyShapedIcon:Xe,feature:ht,shapedTextOrientations:ut,shapedText:mt,layoutTextSize:$t,textOffset:Ut,isSDFIcon:Ht,iconPrimary:or,iconSecondary:cr,iconTextFit:Gr,iconOffset:xr}=Re;vT(ze,W.iconPositions,or,cr),vT(Xe,W.iconPositions,or,cr),c7(ut,W.iconPositions),l7(or,cr,W.iconPositions),(mt||ze)&&h7(d,ht,ut,ze,Xe,H,me,$t,0,Ut,Ht,y,w,I,L,ue,Gr,xr,Ee,Ie)}u&&d.generateCollisionDebugBuffers(T,d.collisionBoxArray,me.textScaleFactor)},t.fo=di,t.fp=rx,t.fq=br,t.fr=function(d){let s=0;if(new Uint32Array(d,0,1)[0]!==E2){const u=new Uint32Array(d,0,7),[,,y,w,T,I]=u;s=u.byteLength+w+T+I+T,(y!==d.byteLength||s>=d.byteLength)&&Qi("Invalid b3dm header information.")}return M2(d,s)},t.fs=function(d,s){const u=v_(d);for(const y of u){for(const w of y.meshes)hR(w);y.lights&&(y.lightMeshIndex=y.meshes.length,y.meshes.push(fR(y.lights,s)))}return u},t.ft=Y2,t.fu=vn,t.fv=b2,t.fw=Du,t.fx=Hl,t.fy=function(d){pl(),wa!=null&&wa.then(s=>{s.keys().then(u=>{for(let y=0;y<u.length-d;y++)s.delete(u[y]).catch(w=>Qi(w.message))}).catch(u=>Qi(u.message))}).catch(s=>Qi(s.message))},t.g=function(d,s){return mu(nr(d,{method:"GET"}),s)},t.h=nr,t.i=function(d){return Ji.API_STYLE_REGEX.test(d)&&!Co(d)},t.j=function(d){return d.indexOf("mapbox:")===0},t.k=ks,t.l=hc,t.m=function(d){return decodeURIComponent(atob(d).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))},t.n=function(d,s){return mu(nr(d,{type:"json"}),s)},t.o=Ho,t.p=function(d,s){return mu(nr(d,{method:"POST"}),s)},t.q=ro,t.r=Ql,t.s=function(d){try{const s=self[d];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}},t.t=Gl,t.u=function(){return function d(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()},t.v=function(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)},t.w=Qi,t.x=function(){return p_||(p_=new hA),p_},t.y=j3,t.z=go}),a(["./shared"],function(t){function h(Qt){const Ve=Qt?Qt.url.toString():void 0;return Ve?performance.getEntriesByName(Ve):[]}function f(Qt){if(typeof Qt=="number"||typeof Qt=="boolean"||typeof Qt=="string"||Qt==null)return JSON.stringify(Qt);if(Array.isArray(Qt)){let et="[";for(const We of Qt)et+=`${f(We)},`;return`${et}]`}let Ve="{";for(const et of Object.keys(Qt).sort())Ve+=`${et}:${f(Qt[et])},`;return`${Ve}}`}function p(Qt){let Ve="";for(const et of t.bu)Ve+=`/${f(Qt[et])}`;return Ve}class _{constructor(Ve){this.keyCache={},this._layers={},this._layerConfigs={},Ve&&this.replace(Ve)}replace(Ve,et){this._layerConfigs={},this._layers={},this.update(Ve,[],et)}update(Ve,et,We){this._options=We;for(const nt of Ve)this._layerConfigs[nt.id]=nt,(this._layers[nt.id]=t.dn(nt,this.scope,null,this._options)).compileFilter(We),this.keyCache[nt.id]&&delete this.keyCache[nt.id];for(const nt of et)delete this.keyCache[nt],delete this._layerConfigs[nt],delete this._layers[nt];this.familiesBySource={};const tt=function(nt,Ct){const rr={};for(let nr=0;nr<nt.length;nr++){const Fr=nt[nr];let _r=Ct&&Ct[Fr.id];_r||(Fr.type==="symbol"?_r=Fr.id:(_r=p(Fr),Fr.type==="line"&&Fr.paint&&function Tn(Vn){return typeof Vn=="string"&&Vn==="line-progress"||(Array.isArray(Vn)?Vn.some(Tn):!(!Vn||typeof Vn!="object")&&Object.values(Vn).some(Tn))}(Fr.paint["line-width"])&&(_r+=`/${f(Fr.paint["line-width"])}`))),Ct&&(Ct[Fr.id]=_r);let pn=rr[_r];pn||(pn=rr[_r]=[]),pn.push(Fr)}const Et=[];for(const nr in rr)Et.push(rr[nr]);return Et}(Object.values(this._layerConfigs),this.keyCache);for(const nt of tt){const Ct=nt.map(pn=>this._layers[pn.id]),rr=Ct[0];if(rr.visibility==="none")continue;const Et=rr.source||"";let nr=this.familiesBySource[Et];nr||(nr=this.familiesBySource[Et]={});const Fr=rr.sourceLayer||"_geojsonTileLayer";let _r=nr[Fr];_r||(_r=nr[Fr]=[]),_r.push(Ct)}}}const g=1*t.fa;class m{constructor(Ve){const et={},We=[];for(const rr in Ve){const Et=Ve[rr],nr=et[rr]={};for(const Fr in Et.glyphs){const _r=Et.glyphs[+Fr];if(!_r||_r.bitmap.width===0||_r.bitmap.height===0)continue;const pn=_r.metrics.localGlyph?g:1,Tn={x:0,y:0,w:_r.bitmap.width+2*pn,h:_r.bitmap.height+2*pn};We.push(Tn),nr[Fr]=Tn}}const{w:tt,h:nt}=t.H(We),Ct=new t.f9({width:tt||1,height:nt||1});for(const rr in Ve){const Et=Ve[rr];for(const nr in Et.glyphs){const Fr=Et.glyphs[+nr];if(!Fr||Fr.bitmap.width===0||Fr.bitmap.height===0)continue;const _r=et[rr][nr],pn=Fr.metrics.localGlyph?g:1;t.f9.copy(Fr.bitmap,Ct,{x:0,y:0},{x:_r.x+pn,y:_r.y+pn},Fr.bitmap)}}this.image=Ct,this.positions=et}}t.f8(m,"GlyphAtlas");class b{constructor(Ve){this.tileID=new t.aM(Ve.tileID.overscaledZ,Ve.tileID.wrap,Ve.tileID.canonical.z,Ve.tileID.canonical.x,Ve.tileID.canonical.y),this.tileZoom=Ve.tileZoom,this.uid=Ve.uid,this.zoom=Ve.zoom,this.lut=Ve.lut,this.canonical=Ve.tileID.canonical,this.pixelRatio=Ve.pixelRatio,this.tileSize=Ve.tileSize,this.source=Ve.source,this.scope=Ve.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ve.showCollisionBoxes,this.collectResourceTiming=!!Ve.request&&Ve.request.collectResourceTiming,this.promoteId=Ve.promoteId,this.isSymbolTile=Ve.isSymbolTile,this.tileTransform=t.aW(Ve.tileID.canonical,Ve.projection),this.projection=Ve.projection,this.worldview=Ve.worldview,this.localizableLayerIds=Ve.localizableLayerIds,this.brightness=Ve.brightness,this.extraShadowCaster=!!Ve.extraShadowCaster,this.tessellationStep=Ve.tessellationStep,this.scaleFactor=Ve.scaleFactor,this.worldview=Ve.worldview}parse(Ve,et,We,tt,nt,Ct){this.status="parsing",this.data=Ve,this.collisionBoxArray=new t.b0;const rr=new t.fb(Object.keys(Ve.layers).sort()),Et=new t.fc(this.tileID,this.promoteId);Et.bucketLayerIDs=[];const nr={},Fr=new t.fd(256,256),_r={featureIndex:Et,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Fr,availableImages:We,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},pn=[],Tn=et.familiesBySource[this.source];for(const Bi in Tn){const Si=Ve.layers[Bi];if(!Si)continue;let Di=!1,ds=!1,Qi=!1;for(const vn of Tn[Bi])vn[0].type==="symbol"?Di=!0:ds=!0,vn[0].is3D()&&vn[0].type!=="model"&&(Qi=!0);if(this.extraShadowCaster&&!Qi||this.isSymbolTile===!0&&!Di||this.isSymbolTile===!1&&!ds)continue;Si.version===1&&t.w(`Vector tile source "${this.source}" layer "${Bi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Zt=rr.encode(Bi),$r=[];let kn=!1;for(let vn=0,si=0;vn<Si.length;vn++){const qn=Si.feature(vn),Yn=Et.getId(qn,Bi);if(this.localizableLayerIds&&this.localizableLayerIds.has(Bi)){const Wi=qn.properties?qn.properties.worldview:null;if(this.worldview&&typeof Wi=="string")if(Wi==="all")qn.properties.$localized=!0;else{if(!Wi.split(",").includes(this.worldview))continue;qn.properties.$localized=!0,qn.properties.worldview=this.worldview}}!kn&&qn.properties&&qn.properties.hasOwnProperty(t.fe)&&(kn=!0),$r.push({feature:qn,id:Yn,index:si,sourceLayerIndex:Zt}),si++}kn&&!_r.elevationFeatures&&Ve.layers.hasOwnProperty(t.ff)&&(_r.elevationFeatures=t.fg.parseFrom(Ve.layers[t.ff],this.canonical));for(const vn of Tn[Bi]){const si=vn[0];if(this.extraShadowCaster&&(!si.is3D()||si.type==="model")||this.isSymbolTile!==void 0&&si.type==="symbol"!==this.isSymbolTile||si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility==="none")continue;x(vn,this.zoom,_r.brightness,We,this.worldview);const qn=nr[si.id]=si.createBucket({index:Et.bucketLayerIDs.length,layers:vn,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zt,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:tt,worldview:this.worldview});Et.bucketLayerIDs.push(vn.map(Wi=>t.C(Wi.id,Wi.scope)));let Yn=qn.prepare?qn.prepare():null;Yn!=null?(Yn=Yn.then(()=>qn.populate($r,_r,this.tileID.canonical,this.tileTransform)),pn.push(Yn)):qn.populate($r,_r,this.tileID.canonical,this.tileTransform)}}const Vn=()=>{let Bi,Si,Di,ds,Qi,Zt;Fr.trim();const $r={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},kn=()=>{if(Bi)return this.status="done",Ct(Bi);if(this.extraShadowCaster)this.status="done",Ct(null,{buckets:Object.values(nr).filter(si=>!si.isEmpty()),featureIndex:Et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:_r.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Si&&Di&&ds){const si=new m(Si),qn=new Map;for(const[us,xs]of Di.entries()){const{imagePosition:zi}=t.fj(us,xs,t.fk);qn.set(us,zi)}const Yn={};for(const us in nr){const xs=nr[us];xs instanceof t.b1&&(x(xs.layers,this.zoom,_r.brightness,We,this.worldview),Yn[us]=t.fl(xs,Si,si.positions,Di,qn,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,Qi,this.worldview))}const Wi={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(nt,Di,Qi,()=>{Wi.iconsPending=!1,vn(Yn,si,Wi)}),this.rasterizeIfNeeded(nt,ds,Zt,()=>{Wi.patternsPending=!1,vn(Yn,si,Wi)})}},vn=(si,qn,Yn,Wi)=>{if(Yn.iconsPending||Yn.patternsPending)return;const us=new t.fm(Di,ds,this.lut);for(const xs in nr){const zi=nr[xs];if(xs in si)t.fn(zi,si[xs],this.showCollisionBoxes,We,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,Di,us);else if(zi.hasPattern&&(zi instanceof t.b7||zi instanceof t.b8||zi instanceof t.e4)){x(zi.layers,this.zoom,_r.brightness,We,this.worldview);const uo=Object.fromEntries(us.patternPositions);zi.addFeatures(_r,this.tileID.canonical,uo,We,this.tileTransform,this.brightness)}}this.status="done",Ct(null,{buckets:Object.values(nr).filter(xs=>!xs.isEmpty()),featureIndex:Et,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qn.image,lineAtlas:Fr,imageAtlas:us,brightness:_r.brightness})};if(!this.extraShadowCaster){const si=t.fh(_r.glyphDependencies,Wi=>Object.keys(Wi).map(Number));Object.keys(si).length?nt.send("getGlyphs",{uid:this.uid,stacks:si},(Wi,us)=>{Bi||(Bi=Wi,Si=us,kn())},void 0,!1,$r):Si={};const qn=Array.from(_r.iconDependencies.keys()).map(Wi=>t.I.parse(Wi));qn.length?nt.send("getImages",{images:qn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Wi,us)=>{Bi||(Bi=Wi,Di=new Map,Qi=this.updateImageMapAndGetImageTaskQueue(Di,us,_r.iconDependencies),kn())},void 0,!1,$r):(Di=new Map,Qi=new Map);const Yn=Array.from(_r.patternDependencies.keys()).map(Wi=>t.I.parse(Wi));Yn.length?nt.send("getImages",{images:Yn,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Wi,us)=>{Bi||(Bi=Wi,ds=new Map,Zt=this.updateImageMapAndGetImageTaskQueue(ds,us,_r.patternDependencies),kn())},void 0,!1,$r):(ds=new Map,Zt=new Map)}if(_r.elevationFeatures&&_r.elevationFeatures.length>0){const si=[];for(const Yn of Object.values(nr))if(Yn instanceof t.b8){const Wi=Yn.getUnevaluatedPortalGraph();Wi&&si.push(Wi)}const qn=t.fi.evaluate(si);for(const Yn of Object.values(nr))if(Yn instanceof t.b8){const Wi=Ve.layers[rr.decode(Yn.sourceLayerIndex)];Yn.setEvaluatedPortalGraph(qn,Wi,this.tileID.canonical,_r.availableImages,_r.brightness)}}kn()};pn.length>0?Promise.allSettled(pn).then(Vn).catch(Ct):Vn()}rasterizeIfNeeded(Ve,et,We,tt){Array.from(et.values()).some(nt=>nt.usvg)?this.rasterize(Ve,et,We,tt):tt()}updateImageMapAndGetImageTaskQueue(Ve,et,We){const tt=new Map;for(const nt of et.keys()){const Ct=We.get(nt)||[];for(const rr of Ct){const Et=rr.toString(),nr=et.get(rr.id.toString());nr.usvg?tt.has(Et)||(tt.set(Et,rr),Ve.set(Et,Object.assign({},nr))):Ve.set(Et,nr)}}return tt}rasterize(Ve,et,We,tt){this.rasterizeTask=Ve.send("rasterizeImages",{scope:this.scope,tasks:We},(nt,Ct)=>{if(!nt)for(const[rr,Et]of Ct.entries()){const nr=Object.assign(et.get(rr),{data:Et});et.set(rr,nr)}tt()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function x(Qt,Ve,et,We,tt){const nt=new t.aa(Ve,{brightness:et,worldview:tt});for(const Ct of Qt)Ct.recalculate(nt,We)}class v extends t.E{constructor(Ve,et,We,tt,nt,Ct,rr){super(),this.actor=Ve,this.layerIndex=et,this.availableImages=We,this.availableModels=tt,this.loadVectorData=Ct||t.aJ,this.loading={},this.loaded={},this.deduped=new t.aI(Ve.scheduler),this.isSpriteLoaded=nt,this.scheduler=Ve.scheduler,this.brightness=rr}loadTile(Ve,et){const We=Ve.uid,tt=Ve&&Ve.request,nt=tt&&tt.collectResourceTiming,Ct=this.loading[We]=new b(Ve);Ct.abort=this.loadVectorData(Ve,(rr,Et)=>{const nr=!this.loading[We];if(delete this.loading[We],Ct.cancelRasterize(),nr||rr||!Et)return Ct.status="done",nr||(this.loaded[We]=Ct),et(rr);const Fr=Et.rawData,_r={};Et.expires&&(_r.expires=Et.expires),Et.cacheControl&&(_r.cacheControl=Et.cacheControl),Ct.vectorTile=Et.vectorTile||new t.fo(new t.bq(Fr));const pn=()=>{Ct.parse(Ct.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(Tn,Vn)=>{if(Tn||!Vn)return et(Tn);const Bi={};if(nt){const Si=h(tt);Si.length>0&&(Bi.resourceTiming=JSON.parse(JSON.stringify(Si)))}et(null,t.h({rawTileData:Fr.slice(0)},Vn,_r,Bi))})};this.isSpriteLoaded?pn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(pn,{type:"parseTile",isSymbolTile:Ve.isSymbolTile,zoom:Ve.tileZoom}):pn()}),this.loaded=this.loaded||{},this.loaded[We]=Ct})}reloadTile(Ve,et){const We=this.loaded,tt=Ve.uid;if(We&&We[tt]){const nt=We[tt];nt.scaleFactor=Ve.scaleFactor,nt.showCollisionBoxes=Ve.showCollisionBoxes,nt.projection=Ve.projection,nt.brightness=Ve.brightness,nt.tileTransform=t.aW(Ve.tileID.canonical,Ve.projection),nt.extraShadowCaster=Ve.extraShadowCaster,nt.lut=Ve.lut,nt.worldview=Ve.worldview;const Ct=(rr,Et)=>{const nr=nt.reloadCallback;nr&&(delete nt.reloadCallback,nt.parse(nt.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,nr)),et(rr,Et)};nt.status==="parsing"?nt.reloadCallback=Ct:nt.status==="done"&&(nt.vectorTile?nt.parse(nt.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,Ct):Ct())}else et(null,void 0)}abortTile(Ve,et){const We=Ve.uid,tt=this.loading[We];tt&&(tt.abort&&tt.abort(),delete this.loading[We]),et()}removeTile(Ve,et){const We=this.loaded,tt=Ve.uid;We&&We[tt]&&delete We[tt],et()}}class S{loadTile(Ve,et){const{uid:We,encoding:tt,rawImageData:nt,padding:Ct}=Ve,rr=ImageBitmap&&nt instanceof ImageBitmap?this.getImageData(nt,Ct):nt;et(null,new t.fp(We,rr,tt,Ct<1))}reloadTile(Ve,et){et(null,null)}abortTile(Ve,et){et()}removeTile(Ve,et){et()}getImageData(Ve,et){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ve.width,Ve.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ve.width,this.offscreenCanvas.height=Ve.height,this.offscreenCanvasContext.drawImage(Ve,0,0,Ve.width,Ve.height);const We=this.offscreenCanvasContext.getImageData(-et,-et,Ve.width+2*et,Ve.height+2*et);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),We}}t.bp.setPbf(t.bq);class B{constructor(Ve){this._mrt=new t.bp(Ve.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=Ve.uid,this.tileID=Ve.tileID,this.source=Ve.source}parse(Ve,et){const We=this._mrt;this.status="parsing",this._entireBuffer=Ve;try{We.parseHeader(Ve),this._isHeaderLoaded=!0;const tt=[];for(const nt in We.layers){const Ct=We.getLayer(nt),rr=Ct.getDataRange(Ct.getBandList()),Et=We.createDecodingTask(rr),nr=Ve.slice(rr.firstByte,rr.lastByte+1),Fr=t.bp.performDecoding(nr,Et).then(_r=>Et.complete(null,_r)).catch(_r=>Et.complete(_r,null));tt.push(Fr)}Promise.allSettled(tt).then(()=>et(null,We)).catch(nt=>et(nt))}catch(tt){et(tt)}}}class F{constructor(Ve){this.actor=Ve,this.loading={},this.loaded={}}loadTile(Ve,et){const We=Ve.uid,tt=Ve.request,nt=this.loading[We]=new B(Ve),{cancel:Ct}=t.br(tt,(rr,Et,nr,Fr)=>{const _r=!this.loading[We];if(delete this.loading[We],_r||rr||!Et)return nt.status="done",_r||(this.loaded[We]=nt),et(rr);nt.parse(Et,(pn,Tn)=>{if(pn||!Tn)return et(pn);et(null,Tn,nr,Fr)}),this.loaded[We]=nt});nt.abort=Ct}reloadTile(Ve,et){et(null,void 0)}abortTile(Ve,et){const We=Ve.uid,tt=this.loading[We];tt&&(tt.abort&&tt.abort(),delete this.loading[We]),et()}removeTile(Ve,et){const We=Ve.uid;this.loaded[We]&&delete this.loaded[We],et()}decodeRasterArray(Ve,et){t.bp.performDecoding(Ve.buffer,Ve.task).then(We=>et(null,We)).catch(We=>et(We))}}const O=t.fq.prototype.toGeoJSON;class V{constructor(Ve){this._feature=Ve,this.extent=t.aj,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){const Ve=[];for(const et of this._feature.geometry)Ve.push([new t.P(et[0],et[1])]);return Ve}{const Ve=[];for(const et of this._feature.geometry){const We=[];for(const tt of et)We.push(new t.P(tt[0],tt[1]));Ve.push(We)}return Ve}}toGeoJSON(Ve,et,We){return O.call(this,Ve,et,We)}}class X{constructor(Ve,et){this.name=Ve,this.extent=t.aj,this.length=et.length,this._jsonFeatures=et}feature(Ve){return new V(this._jsonFeatures[Ve])}}class Q{constructor(Ve){this.layers={},this.extent=t.aj;for(const et of Object.keys(Ve))this.layers[et]=new X(et,Ve[et])}}const ee=64/4096,ne=128;class Ae{constructor(){this.features=new Map}clear(){this.features.clear()}load(Ve=[],et){for(const We of Ve){const tt=We.id;if(tt==null)continue;let nt=this.features.get(tt);nt&&this.updateCache(nt,et),We.geometry?(nt=ce(We),this.updateCache(nt,et),this.features.set(tt,nt)):this.features.delete(tt),this.updateCache(nt,et)}}updateCache(Ve,et){for(const{canonical:We,uid:tt}of Object.values(et)){const{z:nt,x:Ct,y:rr}=We;fe(Ve,Math.pow(2,nt),Ct,rr)&&delete et[tt]}}getTile(Ve,et,We){const tt=Math.pow(2,Ve),nt=[];for(const Ct of this.features.values())fe(Ct,tt,et,We)&&nt.push(k(Ct,tt,et,We));return{features:nt}}getFeatures(){return[...this.features.values()]}}function fe({minX:Qt,minY:Ve,maxX:et,maxY:We},tt,nt,Ct){return Qt<(nt+1+ee)/tt&&Ve<(Ct+1+ee)/tt&&et>(nt-ee)/tt&&We>(Ct-ee)/tt}function ce(Qt){const{id:Ve,geometry:et,properties:We}=Qt;if(!et)return;if(et.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:tt,coordinates:nt}=et,Ct={id:Ve,type:1,geometry:[],tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},rr=Ct.geometry;if(tt==="Point")G(nt,rr,Ct);else if(tt==="MultiPoint")for(const Et of nt)G(Et,rr,Ct);else if(tt==="LineString")Ct.type=2,Z(nt,rr,Ct);else if(tt==="MultiLineString")Ct.type=2,z(nt,rr,Ct);else if(tt==="Polygon")Ct.type=3,z(nt,rr,Ct,!0);else{if(tt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Ct.type=3;for(const Et of nt)z(Et,rr,Ct,!0)}return Ct}function G([Qt,Ve],et,We){const tt=t.aD(Qt);let nt=t.aH(Ve);nt=nt<0?0:nt>1?1:nt,et.push(tt,nt),We.minX=Math.min(We.minX,tt),We.minY=Math.min(We.minY,nt),We.maxX=Math.max(We.maxX,tt),We.maxY=Math.max(We.maxY,nt)}function Z(Qt,Ve,et,We=!1,tt=!1){const nt=[];for(const Ct of Qt)G(Ct,nt,et);Ve.push(nt),We&&function(Ct,rr){let Et=0;for(let nr=0,Fr=Ct.length,_r=Fr-2;nr<Fr;_r=nr,nr+=2)Et+=(Ct[nr]-Ct[_r])*(Ct[nr+1]+Ct[_r+1]);if(Et>0===rr)for(let nr=0,Fr=Ct.length;nr<Fr/2;nr+=2){const _r=Ct[nr],pn=Ct[nr+1];Ct[nr]=Ct[Fr-2-nr],Ct[nr+1]=Ct[Fr-1-nr],Ct[Fr-2-nr]=_r,Ct[Fr-1-nr]=pn}}(nt,tt)}function z(Qt,Ve,et,We=!1){for(let tt=0;tt<Qt.length;tt++)Z(Qt[tt],Ve,et,We,tt===0)}function k(Qt,Ve,et,We){const{id:tt,type:nt,geometry:Ct,tags:rr}=Qt,Et=[];if(nt===1)(function(nr,Fr,_r,pn,Tn){for(let Vn=0;Vn<nr.length;Vn+=2){const Bi=Math.round(t.aj*(nr[Vn+0]*Fr-_r)),Si=Math.round(t.aj*(nr[Vn+1]*Fr-pn));Tn.push([Bi,Si])}})(Ct,Ve,et,We,Et);else for(const nr of Ct)R(nr,Ve,et,We,Et);return{id:tt,type:nt,geometry:Et,tags:rr}}function R(Qt,Ve,et,We,tt){const nt=-ne,Ct=t.aj+ne;let rr;for(let Et=0;Et<Qt.length-2;Et+=2){let nr=Math.round(t.aj*(Qt[Et+0]*Ve-et)),Fr=Math.round(t.aj*(Qt[Et+1]*Ve-We)),_r=Math.round(t.aj*(Qt[Et+2]*Ve-et)),pn=Math.round(t.aj*(Qt[Et+3]*Ve-We));const Tn=_r-nr,Vn=pn-Fr;nr<nt&&_r<nt||(nr<nt?(Fr+=Math.round(Vn*((nt-nr)/Tn)),nr=nt):_r<nt&&(pn=Fr+Math.round(Vn*((nt-nr)/Tn)),_r=nt),Fr<nt&&pn<nt||(Fr<nt?(nr+=Math.round(Tn*((nt-Fr)/Vn)),Fr=nt):pn<nt&&(_r=nr+Math.round(Tn*((nt-Fr)/Vn)),pn=nt),nr>=Ct&&_r>=Ct||(nr>=Ct?(Fr+=Math.round(Vn*((Ct-nr)/Tn)),nr=Ct):_r>=Ct&&(pn=Fr+Math.round(Vn*((Ct-nr)/Tn)),_r=Ct),Fr>=Ct&&pn>=Ct||(Fr>=Ct?(nr+=Math.round(Tn*((Ct-Fr)/Vn)),Fr=Ct):pn>=Ct&&(_r=nr+Math.round(Tn*((Ct-Fr)/Vn)),pn=Ct),rr&&nr===rr[rr.length-1][0]&&Fr===rr[rr.length-1][1]||(rr=[[nr,Fr]],tt.push(rr)),rr.push([_r,pn])))))}}function N({name:Qt,features:Ve},et){et.writeStringField(1,Qt),et.writeVarintField(5,t.aj);const We=new Map,tt=new Map,nt={keys:We,values:tt,feature:null};for(const Ct of Ve)nt.feature=Ct,et.writeMessage(2,U,nt);for(const Ct of We.keys())et.writeStringField(3,Ct);for(const Ct of tt.keys())et.writeMessage(4,Te,Ct)}function U(Qt,Ve){const et=Qt.feature;et.id===void 0||isNaN(+et.id)||Ve.writeVarintField(1,+et.id),et.tags&&Ve.writeMessage(2,Y,Qt),Ve.writeVarintField(3,et.type),Ve.writeMessage(4,xe,et)}function Y({keys:Qt,values:Ve,feature:et},We){for(const tt of Object.keys(et.tags)){let nt=et.tags[tt];if(nt===null)continue;let Ct=Qt.get(tt);Ct===void 0&&(Ct=Qt.size,Qt.set(tt,Ct)),We.writeVarint(Ct);const rr=typeof nt;rr!=="string"&&rr!=="boolean"&&rr!=="number"&&(nt=JSON.stringify(nt));let Et=Ve.get(nt);Et===void 0&&(Et=Ve.size,Ve.set(nt,Et)),We.writeVarint(Et)}}function de(Qt,Ve){return(Ve<<3)+(7&Qt)}function J(Qt){return Qt<<1^Qt>>31}function xe(Qt,Ve){const{geometry:et,type:We}=Qt;let tt=0,nt=0;if(We===1){Ve.writeVarint(de(1,et.length));for(const Ct of et){const rr=Ct[0]-tt,Et=Ct[1]-nt;Ve.writeVarint(J(rr)),Ve.writeVarint(J(Et)),tt+=rr,nt+=Et}}else for(const Ct of et){Ve.writeVarint(de(1,1));const rr=Ct.length-(We===3?1:0);for(let Et=0;Et<rr;Et++){Et===1&&Ve.writeVarint(de(2,rr-1));const nr=Ct[Et][0]-tt,Fr=Ct[Et][1]-nt;Ve.writeVarint(J(nr)),Ve.writeVarint(J(Fr)),tt+=nr,nt+=Fr}We===3&&Ve.writeVarint(de(7,1))}}function Te(Qt,Ve){const et=typeof Qt;et==="string"?Ve.writeStringField(1,Qt):et==="boolean"?Ve.writeBooleanField(7,Qt):et==="number"&&(Qt%1!=0?Ve.writeDoubleField(3,Qt):Qt<0?Ve.writeSVarintField(6,Qt):Ve.writeVarintField(5,Qt))}const Ue={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Qt=>Qt},pe=Math.fround||(Oe=new Float32Array(1),Qt=>(Oe[0]=+Qt,Oe[0]));var Oe;const re=3,ie=5,Be=6;class He{constructor(Ve){this.options=Object.assign(Object.create(Ue),Ve),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ve){const{log:et,minZoom:We,maxZoom:tt}=this.options;et&&console.time("total time");const nt=`prepare ${Ve.length} points`;et&&console.time(nt),this.points=Ve;const Ct=[];for(let Et=0;Et<Ve.length;Et++){const nr=Ve[Et];if(!nr.geometry)continue;const[Fr,_r]=nr.geometry.coordinates,pn=pe(st(Fr)),Tn=pe(ot(_r));Ct.push(pn,Tn,1/0,Et,-1,1),this.options.reduce&&Ct.push(0)}let rr=this.trees[tt+1]=this._createTree(Ct);et&&console.timeEnd(nt);for(let Et=tt;Et>=We;Et--){const nr=+Date.now();rr=this.trees[Et]=this._createTree(this._cluster(rr,Et)),et&&console.log("z%d: %d clusters in %dms",Et,rr.numItems,+Date.now()-nr)}return et&&console.timeEnd("total time"),this}getClusters(Ve,et){let We=((Ve[0]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,Ve[1]));let nt=Ve[2]===180?180:((Ve[2]+180)%360+360)%360-180;const Ct=Math.max(-90,Math.min(90,Ve[3]));if(Ve[2]-Ve[0]>=360)We=-180,nt=180;else if(We>nt){const _r=this.getClusters([We,tt,180,Ct],et),pn=this.getClusters([-180,tt,nt,Ct],et);return _r.concat(pn)}const rr=this.trees[this._limitZoom(et)],Et=rr.range(st(We),ot(Ct),st(nt),ot(tt)),nr=rr.data,Fr=[];for(const _r of Et){const pn=this.stride*_r;Fr.push(nr[pn+ie]>1?Ge(nr,pn,this.clusterProps):this.points[nr[pn+re]])}return Fr}getChildren(Ve){const et=this._getOriginId(Ve),We=this._getOriginZoom(Ve),tt="No cluster with the specified id.",nt=this.trees[We];if(!nt)throw new Error(tt);const Ct=nt.data;if(et*this.stride>=Ct.length)throw new Error(tt);const rr=this.options.radius/(this.options.extent*Math.pow(2,We-1)),Et=nt.within(Ct[et*this.stride],Ct[et*this.stride+1],rr),nr=[];for(const Fr of Et){const _r=Fr*this.stride;Ct[_r+4]===Ve&&nr.push(Ct[_r+ie]>1?Ge(Ct,_r,this.clusterProps):this.points[Ct[_r+re]])}if(nr.length===0)throw new Error(tt);return nr}getLeaves(Ve,et,We){const tt=[];return this._appendLeaves(tt,Ve,et=et||10,We=We||0,0),tt}getTile(Ve,et,We){const tt=this.trees[this._limitZoom(Ve)],nt=Math.pow(2,Ve),{extent:Ct,radius:rr}=this.options,Et=rr/Ct,nr=(We-Et)/nt,Fr=(We+1+Et)/nt,_r={features:[]};return this._addTileFeatures(tt.range((et-Et)/nt,nr,(et+1+Et)/nt,Fr),tt.data,et,We,nt,_r),et===0&&this._addTileFeatures(tt.range(1-Et/nt,nr,1,Fr),tt.data,nt,We,nt,_r),et===nt-1&&this._addTileFeatures(tt.range(0,nr,Et/nt,Fr),tt.data,-1,We,nt,_r),_r.features.length?_r:null}getClusterExpansionZoom(Ve){let et=this._getOriginZoom(Ve)-1;for(;et<=this.options.maxZoom;){const We=this.getChildren(Ve);if(et++,We.length!==1)break;Ve=We[0].properties.cluster_id}return et}_appendLeaves(Ve,et,We,tt,nt){const Ct=this.getChildren(et);for(const rr of Ct){const Et=rr.properties;if(Et&&Et.cluster?nt+Et.point_count<=tt?nt+=Et.point_count:nt=this._appendLeaves(Ve,Et.cluster_id,We,tt,nt):nt<tt?nt++:Ve.push(rr),Ve.length===We)break}return nt}_createTree(Ve){const et=new t.c0(Ve.length/this.stride|0,this.options.nodeSize,Float32Array);for(let We=0;We<Ve.length;We+=this.stride)et.add(Ve[We],Ve[We+1]);return et.finish(),et.data=Ve,et}_addTileFeatures(Ve,et,We,tt,nt,Ct){for(const rr of Ve){const Et=rr*this.stride,nr=et[Et+ie]>1;let Fr,_r,pn;if(nr)Fr=Ne(et,Et,this.clusterProps),_r=et[Et],pn=et[Et+1];else{const Bi=this.points[et[Et+re]];Fr=Bi.properties;const[Si,Di]=Bi.geometry.coordinates;_r=st(Si),pn=ot(Di)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(_r*nt-We)),Math.round(this.options.extent*(pn*nt-tt))]],tags:Fr};let Vn;Vn=nr||this.options.generateId?et[Et+re]:this.points[et[Et+re]].id,Vn!==void 0&&(Tn.id=Vn),Ct.features.push(Tn)}}_limitZoom(Ve){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ve),this.options.maxZoom+1))}_cluster(Ve,et){const{radius:We,extent:tt,reduce:nt,minPoints:Ct}=this.options,rr=We/(tt*Math.pow(2,et)),Et=Ve.data,nr=[],Fr=this.stride;for(let _r=0;_r<Et.length;_r+=Fr){if(Et[_r+2]<=et)continue;Et[_r+2]=et;const pn=Et[_r],Tn=Et[_r+1],Vn=Ve.within(Et[_r],Et[_r+1],rr),Bi=Et[_r+ie];let Si=Bi;for(const Di of Vn){const ds=Di*Fr;Et[ds+2]>et&&(Si+=Et[ds+ie])}if(Si>Bi&&Si>=Ct){let Di,ds=pn*Bi,Qi=Tn*Bi,Zt=-1;const $r=(_r/Fr<<5)+(et+1)+this.points.length;for(const kn of Vn){const vn=kn*Fr;if(Et[vn+2]<=et)continue;Et[vn+2]=et;const si=Et[vn+ie];ds+=Et[vn]*si,Qi+=Et[vn+1]*si,Et[vn+4]=$r,nt&&(Di||(Di=this._map(Et,_r,!0),Zt=this.clusterProps.length,this.clusterProps.push(Di)),nt(Di,this._map(Et,vn)))}Et[_r+4]=$r,nr.push(ds/Si,Qi/Si,1/0,$r,-1,Si),nt&&nr.push(Zt)}else{for(let Di=0;Di<Fr;Di++)nr.push(Et[_r+Di]);if(Si>1)for(const Di of Vn){const ds=Di*Fr;if(!(Et[ds+2]<=et)){Et[ds+2]=et;for(let Qi=0;Qi<Fr;Qi++)nr.push(Et[ds+Qi])}}}}return nr}_getOriginId(Ve){return Ve-this.points.length>>5}_getOriginZoom(Ve){return(Ve-this.points.length)%32}_map(Ve,et,We){if(Ve[et+ie]>1){const Ct=this.clusterProps[Ve[et+Be]];return We?Object.assign({},Ct):Ct}const tt=this.points[Ve[et+re]].properties,nt=this.options.map(tt);return We&&nt===tt?Object.assign({},nt):nt}}function Ge(Qt,Ve,et){return{type:"Feature",id:Qt[Ve+re],properties:Ne(Qt,Ve,et),geometry:{type:"Point",coordinates:[(We=Qt[Ve],360*(We-.5)),Je(Qt[Ve+1])]}};var We}function Ne(Qt,Ve,et){const We=Qt[Ve+ie],tt=We>=1e4?`${Math.round(We/1e3)}k`:We>=1e3?Math.round(We/100)/10+"k":We,nt=Qt[Ve+Be],Ct=nt===-1?{}:Object.assign({},et[nt]);return Object.assign(Ct,{cluster:!0,cluster_id:Qt[Ve+re],point_count:We,point_count_abbreviated:tt})}function st(Qt){return Qt/360+.5}function ot(Qt){const Ve=Math.sin(Qt*Math.PI/180),et=.5-.25*Math.log((1+Ve)/(1-Ve))/Math.PI;return et<0?0:et>1?1:et}function Je(Qt){const Ve=(180-360*Qt)*Math.PI/180;return 360*Math.atan(Math.exp(Ve))/Math.PI-90}function Ze(Qt,Ve,et,We){let tt=We;const nt=Ve+(et-Ve>>1);let Ct,rr=et-Ve;const Et=Qt[Ve],nr=Qt[Ve+1],Fr=Qt[et],_r=Qt[et+1];for(let pn=Ve+3;pn<et;pn+=3){const Tn=bt(Qt[pn],Qt[pn+1],Et,nr,Fr,_r);if(Tn>tt)Ct=pn,tt=Tn;else if(Tn===tt){const Vn=Math.abs(pn-nt);Vn<rr&&(Ct=pn,rr=Vn)}}tt>We&&(Ct-Ve>3&&Ze(Qt,Ve,Ct,We),Qt[Ct+2]=tt,et-Ct>3&&Ze(Qt,Ct,et,We))}function bt(Qt,Ve,et,We,tt,nt){let Ct=tt-et,rr=nt-We;if(Ct!==0||rr!==0){const Et=((Qt-et)*Ct+(Ve-We)*rr)/(Ct*Ct+rr*rr);Et>1?(et=tt,We=nt):Et>0&&(et+=Ct*Et,We+=rr*Et)}return Ct=Qt-et,rr=Ve-We,Ct*Ct+rr*rr}function yt(Qt,Ve,et,We){const tt={id:Qt??null,type:Ve,geometry:et,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")Nt(tt,et);else if(Ve==="Polygon")Nt(tt,et[0]);else if(Ve==="MultiLineString")for(const nt of et)Nt(tt,nt);else if(Ve==="MultiPolygon")for(const nt of et)Nt(tt,nt[0]);return tt}function Nt(Qt,Ve){for(let et=0;et<Ve.length;et+=3)Qt.minX=Math.min(Qt.minX,Ve[et]),Qt.minY=Math.min(Qt.minY,Ve[et+1]),Qt.maxX=Math.max(Qt.maxX,Ve[et]),Qt.maxY=Math.max(Qt.maxY,Ve[et+1])}function kt(Qt,Ve,et,We){if(!Ve.geometry)return;const tt=Ve.geometry.coordinates;if(tt&&tt.length===0)return;const nt=Ve.geometry.type,Ct=Math.pow(et.tolerance/((1<<et.maxZoom)*et.extent),2);let rr=[],Et=Ve.id;if(et.promoteId?Et=Ve.properties[et.promoteId]:et.generateId&&(Et=We||0),nt==="Point")Gt(tt,rr);else if(nt==="MultiPoint")for(const nr of tt)Gt(nr,rr);else if(nt==="LineString")fr(tt,rr,Ct,!1);else if(nt==="MultiLineString"){if(et.lineMetrics){for(const nr of tt)rr=[],fr(nr,rr,Ct,!1),Qt.push(yt(Et,"LineString",rr,Ve.properties));return}Tr(tt,rr,Ct,!1)}else if(nt==="Polygon")Tr(tt,rr,Ct,!0);else{if(nt!=="MultiPolygon"){if(nt==="GeometryCollection"){for(const nr of Ve.geometry.geometries)kt(Qt,{id:Et,geometry:nr,properties:Ve.properties},et,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const nr of tt){const Fr=[];Tr(nr,Fr,Ct,!0),rr.push(Fr)}}Qt.push(yt(Et,nt,rr,Ve.properties))}function Gt(Qt,Ve){Ve.push(yr(Qt[0]),Dr(Qt[1]),0)}function fr(Qt,Ve,et,We){let tt,nt,Ct=0;for(let Et=0;Et<Qt.length;Et++){const nr=yr(Qt[Et][0]),Fr=Dr(Qt[Et][1]);Ve.push(nr,Fr,0),Et>0&&(Ct+=We?(tt*Fr-nr*nt)/2:Math.sqrt(Math.pow(nr-tt,2)+Math.pow(Fr-nt,2))),tt=nr,nt=Fr}const rr=Ve.length-3;Ve[2]=1,Ze(Ve,0,rr,et),Ve[rr+2]=1,Ve.size=Math.abs(Ct),Ve.start=0,Ve.end=Ve.size}function Tr(Qt,Ve,et,We){for(let tt=0;tt<Qt.length;tt++){const nt=[];fr(Qt[tt],nt,et,We),Ve.push(nt)}}function yr(Qt){return Qt/360+.5}function Dr(Qt){const Ve=Math.sin(Qt*Math.PI/180),et=.5-.25*Math.log((1+Ve)/(1-Ve))/Math.PI;return et<0?0:et>1?1:et}function jt(Qt,Ve,et,We,tt,nt,Ct,rr){if(We/=Ve,nt>=(et/=Ve)&&Ct<We)return Qt;if(Ct<et||nt>=We)return null;const Et=[];for(const nr of Qt){const Fr=nr.geometry;let _r=nr.type;const pn=tt===0?nr.minX:nr.minY,Tn=tt===0?nr.maxX:nr.maxY;if(pn>=et&&Tn<We){Et.push(nr);continue}if(Tn<et||pn>=We)continue;let Vn=[];if(_r==="Point"||_r==="MultiPoint")Jt(Fr,Vn,et,We,tt);else if(_r==="LineString")pr(Fr,Vn,et,We,tt,!1,rr.lineMetrics);else if(_r==="MultiLineString")er(Fr,Vn,et,We,tt,!1);else if(_r==="Polygon")er(Fr,Vn,et,We,tt,!0);else if(_r==="MultiPolygon")for(const Bi of Fr){const Si=[];er(Bi,Si,et,We,tt,!0),Si.length&&Vn.push(Si)}if(Vn.length){if(rr.lineMetrics&&_r==="LineString"){for(const Bi of Vn)Et.push(yt(nr.id,_r,Bi,nr.tags));continue}_r!=="LineString"&&_r!=="MultiLineString"||(Vn.length===1?(_r="LineString",Vn=Vn[0]):_r="MultiLineString"),_r!=="Point"&&_r!=="MultiPoint"||(_r=Vn.length===3?"Point":"MultiPoint"),Et.push(yt(nr.id,_r,Vn,nr.tags))}}return Et.length?Et:null}function Jt(Qt,Ve,et,We,tt){for(let nt=0;nt<Qt.length;nt+=3){const Ct=Qt[nt+tt];Ct>=et&&Ct<=We&&ur(Ve,Qt[nt],Qt[nt+1],Qt[nt+2])}}function pr(Qt,Ve,et,We,tt,nt,Ct){let rr=Ft(Qt);const Et=tt===0?Yt:mr;let nr,Fr,_r=Qt.start;for(let Si=0;Si<Qt.length-3;Si+=3){const Di=Qt[Si],ds=Qt[Si+1],Qi=Qt[Si+2],Zt=Qt[Si+3],$r=Qt[Si+4],kn=tt===0?Di:ds,vn=tt===0?Zt:$r;let si=!1;Ct&&(nr=Math.sqrt(Math.pow(Di-Zt,2)+Math.pow(ds-$r,2))),kn<et?vn>et&&(Fr=Et(rr,Di,ds,Zt,$r,et),Ct&&(rr.start=_r+nr*Fr)):kn>We?vn<We&&(Fr=Et(rr,Di,ds,Zt,$r,We),Ct&&(rr.start=_r+nr*Fr)):ur(rr,Di,ds,Qi),vn<et&&kn>=et&&(Fr=Et(rr,Di,ds,Zt,$r,et),si=!0),vn>We&&kn<=We&&(Fr=Et(rr,Di,ds,Zt,$r,We),si=!0),!nt&&si&&(Ct&&(rr.end=_r+nr*Fr),Ve.push(rr),rr=Ft(Qt)),Ct&&(_r+=nr)}let pn=Qt.length-3;const Tn=Qt[pn],Vn=Qt[pn+1],Bi=tt===0?Tn:Vn;Bi>=et&&Bi<=We&&ur(rr,Tn,Vn,Qt[pn+2]),pn=rr.length-3,nt&&pn>=3&&(rr[pn]!==rr[0]||rr[pn+1]!==rr[1])&&ur(rr,rr[0],rr[1],rr[2]),rr.length&&Ve.push(rr)}function Ft(Qt){const Ve=[];return Ve.size=Qt.size,Ve.start=Qt.start,Ve.end=Qt.end,Ve}function er(Qt,Ve,et,We,tt,nt){for(const Ct of Qt)pr(Ct,Ve,et,We,tt,nt,!1)}function ur(Qt,Ve,et,We){Qt.push(Ve,et,We)}function Yt(Qt,Ve,et,We,tt,nt){const Ct=(nt-Ve)/(We-Ve);return ur(Qt,nt,et+(tt-et)*Ct,1),Ct}function mr(Qt,Ve,et,We,tt,nt){const Ct=(nt-et)/(tt-et);return ur(Qt,Ve+(We-Ve)*Ct,nt,1),Ct}function Mr(Qt,Ve){const et=[];for(let We=0;We<Qt.length;We++){const tt=Qt[We],nt=tt.type;let Ct;if(nt==="Point"||nt==="MultiPoint"||nt==="LineString")Ct=sn(tt.geometry,Ve);else if(nt==="MultiLineString"||nt==="Polygon"){Ct=[];for(const rr of tt.geometry)Ct.push(sn(rr,Ve))}else if(nt==="MultiPolygon"){Ct=[];for(const rr of tt.geometry){const Et=[];for(const nr of rr)Et.push(sn(nr,Ve));Ct.push(Et)}}et.push(yt(tt.id,nt,Ct,tt.tags))}return et}function sn(Qt,Ve){const et=[];et.size=Qt.size,Qt.start!==void 0&&(et.start=Qt.start,et.end=Qt.end);for(let We=0;We<Qt.length;We+=3)et.push(Qt[We]+Ve,Qt[We+1],Qt[We+2]);return et}function Un(Qt,Ve){if(Qt.transformed)return Qt;const et=1<<Qt.z,We=Qt.x,tt=Qt.y;for(const nt of Qt.features){const Ct=nt.geometry,rr=nt.type;if(nt.geometry=[],rr===1)for(let Et=0;Et<Ct.length;Et+=2)nt.geometry.push(wn(Ct[Et],Ct[Et+1],Ve,et,We,tt));else for(let Et=0;Et<Ct.length;Et++){const nr=[];for(let Fr=0;Fr<Ct[Et].length;Fr+=2)nr.push(wn(Ct[Et][Fr],Ct[Et][Fr+1],Ve,et,We,tt));nt.geometry.push(nr)}}return Qt.transformed=!0,Qt}function wn(Qt,Ve,et,We,tt,nt){return[Math.round(et*(Qt*We-tt)),Math.round(et*(Ve*We-nt))]}function Zi(Qt,Ve,et,We,tt){const nt=Ve===tt.maxZoom?0:tt.tolerance/((1<<Ve)*tt.extent),Ct={features:[],numPoints:0,numSimplified:0,numFeatures:Qt.length,source:null,x:et,y:We,z:Ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const rr of Qt)ai(Ct,rr,nt,tt);return Ct}function ai(Qt,Ve,et,We){const tt=Ve.geometry,nt=Ve.type,Ct=[];if(Qt.minX=Math.min(Qt.minX,Ve.minX),Qt.minY=Math.min(Qt.minY,Ve.minY),Qt.maxX=Math.max(Qt.maxX,Ve.maxX),Qt.maxY=Math.max(Qt.maxY,Ve.maxY),nt==="Point"||nt==="MultiPoint")for(let rr=0;rr<tt.length;rr+=3)Ct.push(tt[rr],tt[rr+1]),Qt.numPoints++,Qt.numSimplified++;else if(nt==="LineString")_i(Ct,tt,Qt,et,!1,!1);else if(nt==="MultiLineString"||nt==="Polygon")for(let rr=0;rr<tt.length;rr++)_i(Ct,tt[rr],Qt,et,nt==="Polygon",rr===0);else if(nt==="MultiPolygon")for(let rr=0;rr<tt.length;rr++){const Et=tt[rr];for(let nr=0;nr<Et.length;nr++)_i(Ct,Et[nr],Qt,et,!0,nr===0)}if(Ct.length){let rr=Ve.tags||null;if(nt==="LineString"&&We.lineMetrics){rr={};for(const nr in Ve.tags)rr[nr]=Ve.tags[nr];rr.mapbox_clip_start=tt.start/tt.size,rr.mapbox_clip_end=tt.end/tt.size}const Et={geometry:Ct,type:nt==="Polygon"||nt==="MultiPolygon"?3:nt==="LineString"||nt==="MultiLineString"?2:1,tags:rr};Ve.id!==null&&(Et.id=Ve.id),Qt.features.push(Et)}}function _i(Qt,Ve,et,We,tt,nt){const Ct=We*We;if(We>0&&Ve.size<(tt?Ct:We))return void(et.numPoints+=Ve.length/3);const rr=[];for(let Et=0;Et<Ve.length;Et+=3)(We===0||Ve[Et+2]>Ct)&&(et.numSimplified++,rr.push(Ve[Et],Ve[Et+1])),et.numPoints++;tt&&function(Et,nr){let Fr=0;for(let _r=0,pn=Et.length,Tn=pn-2;_r<pn;Tn=_r,_r+=2)Fr+=(Et[_r]-Et[Tn])*(Et[_r+1]+Et[Tn+1]);if(Fr>0===nr)for(let _r=0,pn=Et.length;_r<pn/2;_r+=2){const Tn=Et[_r],Vn=Et[_r+1];Et[_r]=Et[pn-2-_r],Et[_r+1]=Et[pn-1-_r],Et[pn-2-_r]=Tn,Et[pn-1-_r]=Vn}}(rr,nt),Qt.push(rr)}const Zn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Bn{constructor(Ve,et){const We=(et=this.options=function(nt,Ct){for(const rr in Ct)nt[rr]=Ct[rr];return nt}(Object.create(Zn),et)).debug;if(We&&console.time("preprocess data"),et.maxZoom<0||et.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(et.promoteId&&et.generateId)throw new Error("promoteId and generateId cannot be used together.");let tt=function(nt,Ct){const rr=[];if(nt.type==="FeatureCollection")for(let Et=0;Et<nt.features.length;Et++)kt(rr,nt.features[Et],Ct,Et);else kt(rr,nt.type==="Feature"?nt:{geometry:nt},Ct);return rr}(Ve,et);this.tiles={},this.tileCoords=[],We&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",et.indexMaxZoom,et.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),tt=function(nt,Ct){const rr=Ct.buffer/Ct.extent;let Et=nt;const nr=jt(nt,1,-1-rr,rr,0,-1,2,Ct),Fr=jt(nt,1,1-rr,2+rr,0,-1,2,Ct);return(nr||Fr)&&(Et=jt(nt,1,-rr,1+rr,0,-1,2,Ct)||[],nr&&(Et=Mr(nr,1).concat(Et)),Fr&&(Et=Et.concat(Mr(Fr,-1)))),Et}(tt,et),tt.length&&this.splitTile(tt,0,0,0),We&&(tt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Ve,et,We,tt,nt,Ct,rr){const Et=[Ve,et,We,tt],nr=this.options,Fr=nr.debug;for(;Et.length;){tt=Et.pop(),We=Et.pop(),et=Et.pop(),Ve=Et.pop();const _r=1<<et,pn=On(et,We,tt);let Tn=this.tiles[pn];if(!Tn&&(Fr>1&&console.time("creation"),Tn=this.tiles[pn]=Zi(Ve,et,We,tt,nr),this.tileCoords.push({z:et,x:We,y:tt}),Fr)){Fr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",et,We,tt,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const si=`z${et}`;this.stats[si]=(this.stats[si]||0)+1,this.total++}if(Tn.source=Ve,nt==null){if(et===nr.indexMaxZoom||Tn.numPoints<=nr.indexMaxPoints)continue}else{if(et===nr.maxZoom||et===nt)continue;if(nt!=null){const si=nt-et;if(We!==Ct>>si||tt!==rr>>si)continue}}if(Tn.source=null,Ve.length===0)continue;Fr>1&&console.time("clipping");const Vn=.5*nr.buffer/nr.extent,Bi=.5-Vn,Si=.5+Vn,Di=1+Vn;let ds=null,Qi=null,Zt=null,$r=null,kn=jt(Ve,_r,We-Vn,We+Si,0,Tn.minX,Tn.maxX,nr),vn=jt(Ve,_r,We+Bi,We+Di,0,Tn.minX,Tn.maxX,nr);Ve=null,kn&&(ds=jt(kn,_r,tt-Vn,tt+Si,1,Tn.minY,Tn.maxY,nr),Qi=jt(kn,_r,tt+Bi,tt+Di,1,Tn.minY,Tn.maxY,nr),kn=null),vn&&(Zt=jt(vn,_r,tt-Vn,tt+Si,1,Tn.minY,Tn.maxY,nr),$r=jt(vn,_r,tt+Bi,tt+Di,1,Tn.minY,Tn.maxY,nr),vn=null),Fr>1&&console.timeEnd("clipping"),Et.push(ds||[],et+1,2*We,2*tt),Et.push(Qi||[],et+1,2*We,2*tt+1),Et.push(Zt||[],et+1,2*We+1,2*tt),Et.push($r||[],et+1,2*We+1,2*tt+1)}}getTile(Ve,et,We){Ve=+Ve,et=+et,We=+We;const tt=this.options,{extent:nt,debug:Ct}=tt;if(Ve<0||Ve>24)return null;const rr=1<<Ve,Et=On(Ve,et=et+rr&rr-1,We);if(this.tiles[Et])return Un(this.tiles[Et],nt);Ct>1&&console.log("drilling down to z%d-%d-%d",Ve,et,We);let nr,Fr=Ve,_r=et,pn=We;for(;!nr&&Fr>0;)Fr--,_r>>=1,pn>>=1,nr=this.tiles[On(Fr,_r,pn)];return nr&&nr.source?(Ct>1&&(console.log("found parent tile z%d-%d-%d",Fr,_r,pn),console.time("drilling down")),this.splitTile(nr.source,Fr,_r,pn,Ve,et,We),Ct>1&&console.timeEnd("drilling down"),this.tiles[Et]?Un(this.tiles[Et],nt):null):null}}function On(Qt,Ve,et){return 32*((1<<Qt)*et+Ve)+Qt}function tr(Qt,Ve){const et=Qt.tileID.canonical;if(!this._geoJSONIndex)return void Ve(null,null);const We=this._geoJSONIndex.getTile(et.z,et.x,et.y);if(!We)return void Ve(null,null);const tt=nr=>nr.tags&&"3d_elevation_id"in nr.tags&&"source"in nr.tags&&nr.tags.source==="elevation",nt=We.features.filter(nr=>tt(nr));let Ct={_geojsonTileLayer:We.features};nt.length>0&&(Ct={_geojsonTileLayer:We.features.filter(nr=>!tt(nr)),hd_road_elevation:nt});const rr=new Q(Ct),Et=function(nr){const Fr=new t.bq;for(const _r of Object.keys(nr))Fr.writeMessage(3,N,{name:_r,features:nr[_r]});return Fr.finish()}(Ct).buffer;Ve(null,{vectorTile:rr,rawData:Et})}class zn extends v{constructor(Ve,et,We,tt,nt,Ct,rr){super(Ve,et,We,tt,nt,tr,rr),Ct&&(this.loadGeoJSON=Ct),this._dynamicIndex=new Ae}loadData(Ve,et){const We=Ve&&Ve.request,tt=We&&We.collectResourceTiming;this._geoJSONIndex=null,this.loadGeoJSON(Ve,(nt,Ct)=>{if(nt||!Ct)return et(nt);if(typeof Ct!="object")return et(new Error(`Input data given to '${Ve.source}' is not a valid GeoJSON object.`));{try{if(Ve.filter){const Et=t.X(Ve.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Et.result==="error")throw new Error(Et.value.map(nr=>`${nr.key}: ${nr.message}`).join(", "));Ct.features=Ct.features.filter(nr=>Et.value.evaluate({zoom:0},nr))}Ve.dynamic?(Ct.type==="Feature"&&(Ct={type:"FeatureCollection",features:[Ct]}),Ve.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Ct.features,this.loaded),Ve.cluster&&(Ct.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=Ve.cluster?new He(function({superclusterOptions:Et,clusterProperties:nr}){if(!nr||!Et)return Et;const Fr={},_r={},pn={accumulated:null,zoom:0},Tn={properties:null},Vn=Object.keys(nr);for(const Bi of Vn){const[Si,Di]=nr[Bi],ds=t.X(Di),Qi=t.X(typeof Si=="string"?[Si,["accumulated"],["get",Bi]]:Si);Fr[Bi]=ds.value,_r[Bi]=Qi.value}return Et.map=Bi=>{Tn.properties=Bi;const Si={};for(const Di of Vn)Si[Di]=Fr[Di].evaluate(pn,Tn);return Si},Et.reduce=(Bi,Si)=>{Tn.properties=Si;for(const Di of Vn)pn.accumulated=Bi[Di],Bi[Di]=_r[Di].evaluate(pn,Tn)},Et}(Ve)).load(Ct.features):Ve.dynamic?this._dynamicIndex:function(Et,nr){return new Bn(Et,nr)}(Ct,Ve.geojsonVtOptions)}catch(Et){return et(Et)}const rr={};if(tt){const Et=h(We);Et&&(rr.resourceTiming={},rr.resourceTiming[Ve.source]=JSON.parse(JSON.stringify(Et)))}et(null,rr)}})}reloadTile(Ve,et){const We=this.loaded;return We&&We[Ve.uid]?Ve.partial?et(null,void 0):super.reloadTile(Ve,et):this.loadTile(Ve,et)}loadGeoJSON(Ve,et){if(Ve.request)t.n(Ve.request,et);else{if(typeof Ve.data!="string")return et(new Error(`Input data given to '${Ve.source}' is not a valid GeoJSON object.`));setTimeout(()=>{try{return et(null,JSON.parse(Ve.data))}catch{return et(new Error(`Input data given to '${Ve.source}' is not a valid GeoJSON object.`))}},0)}}getClusterExpansionZoom(Ve,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(We){et(We)}}getClusterChildren(Ve,et){try{et(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(We){et(We)}}getClusterLeaves(Ve,et){try{et(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(We){et(We)}}}class Ki{constructor(Ve,et,We){this.tileID=new t.aM(Ve.tileID.overscaledZ,Ve.tileID.wrap,Ve.tileID.canonical.z,Ve.tileID.canonical.x,Ve.tileID.canonical.y),this.tileZoom=Ve.tileZoom,this.uid=Ve.uid,this.zoom=Ve.zoom,this.canonical=Ve.tileID.canonical,this.pixelRatio=Ve.pixelRatio,this.tileSize=Ve.tileSize,this.source=Ve.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Ve.projection,this.brightness=et,this.worldview=We}parse(Ve,et,We,tt){this.status="parsing";const nt=new t.aM(We.tileID.overscaledZ,We.tileID.wrap,We.tileID.canonical.z,We.tileID.canonical.x,We.tileID.canonical.y),Ct=[],rr=et.familiesBySource[We.source],Et=new t.fc(nt,We.promoteId);Et.bucketLayerIDs=[],Et.is3DTile=!0,t.fr(Ve).then(nr=>{if(!nr)return tt(new Error("Could not parse tile"));const Fr=nr.json.extensionsUsed&&nr.json.extensionsUsed.includes("MAPBOX_mesh_features")||nr.json.asset.extras&&nr.json.asset.extras.MAPBOX_mesh_features,_r=nr.json.extensionsUsed&&nr.json.extensionsUsed.includes("EXT_meshopt_compression"),pn=new t.aa(this.zoom,{brightness:this.brightness,worldview:this.worldview});for(const Tn in rr)for(const Vn of rr[Tn]){const Bi=Vn[0];Et.bucketLayerIDs.push(Vn.map(ds=>t.C(ds.id,ds.scope))),Bi.recalculate(pn,[]);const Si=t.fs(nr,1/t.d4(We.tileID.canonical)),Di=new t.ft(Vn,Si,nt,Fr,_r,this.brightness,Et,this.worldview);Fr||(Di.needsUpload=!0),Ct.push(Di),Di.evaluate(Bi)}this.status="done",tt(null,{buckets:Ct,featureIndex:Et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(nr=>tt(new Error(nr.message)))}}class Qs{constructor(Ve,et,We,tt,nt,Ct,rr,Et){this.actor=Ve,this.layerIndex=et,this.availableImages=We,this.availableModels=tt,this.brightness=rr,this.loading={},this.loaded={},this.worldview=Et}loadTile(Ve,et){const We=Ve.uid,tt=this.loading[We]=new Ki(Ve,this.brightness,this.worldview);t.br(Ve.request,(nt,Ct)=>{const rr=!this.loading[We];return delete this.loading[We],rr||nt?(tt.status="done",rr||(this.loaded[We]=tt),et(nt)):Ct&&Ct.byteLength!==0?void tt.parse(Ct,this.layerIndex,Ve,(Et,nr)=>{tt.status="done",this.loaded=this.loaded||{},this.loaded[We]=tt,Et||!nr?et(Et):et(null,nr)}):(tt.status="done",this.loaded[We]=tt,et())})}reloadTile(Ve,et){const We=this.loaded,tt=Ve.uid;if(We&&We[tt]){const nt=We[tt];nt.projection=Ve.projection,nt.brightness=Ve.brightness;const Ct=(rr,Et)=>{nt.reloadCallback&&(delete nt.reloadCallback,this.loadTile(Ve,et)),et(rr,Et)};nt.status==="parsing"?nt.reloadCallback=Ct:nt.status==="done"&&this.loadTile(Ve,et)}}abortTile(Ve,et){const We=Ve.uid;this.loading[We]&&delete this.loading[We],et()}removeTile(Ve,et){const We=this.loaded,tt=Ve.uid;We&&We[tt]&&delete We[tt],et()}}class li{constructor(Ve){this.self=Ve,this.actor=new t.fv(Ve,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new t.y,this.rtlPluginParsingListeners=[],this.projections={},this.defaultProjection=t.cj({name:"mercator"}),this.workerSourceTypes={vector:v,geojson:zn,"raster-dem":S,"raster-array":F,"batched-model":Qs},this.workerSources={},this.self.registerWorkerSource=(et,We)=>{if(this.workerSourceTypes[et])throw new Error(`Worker source with name "${et}" already registered.`);this.workerSourceTypes[et]=We},this.self.registerRTLTextPlugin=et=>{if(t.fw.isParsed())throw new Error("RTL text plugin already registered.");t.fw.setState({pluginStatus:t.fx.parsed,pluginURL:t.fw.getPluginURL()}),t.fw.applyArabicShaping=et.applyArabicShaping,t.fw.processBidirectionalText=et.processBidirectionalText,t.fw.processStyledBidirectionalText=et.processStyledBidirectionalText;for(const We of this.rtlPluginParsingListeners)We(null,!0);this.rtlPluginParsingListeners=[]}}clearCaches(Ve,et,We){delete this.layerIndexes[Ve],delete this.availableImages[Ve],delete this.availableModels[Ve],delete this.workerSources[Ve],We()}checkIfReady(Ve,et,We){We()}setReferrer(Ve,et){this.referrer=et}spriteLoaded(Ve,et){this.isSpriteLoaded[Ve]||(this.isSpriteLoaded[Ve]={});const{scope:We,isLoaded:tt}=et;if(this.isSpriteLoaded[Ve][We]=tt,this.workerSources[Ve]&&this.workerSources[Ve][We])for(const nt in this.workerSources[Ve][We]){const Ct=this.workerSources[Ve][We][nt];for(const rr in Ct){const Et=Ct[rr];Et instanceof v&&(Et.isSpriteLoaded=tt,Et.fire(new t.A("isSpriteLoaded")))}}}setImages(Ve,et,We){this.availableImages[Ve]||(this.availableImages[Ve]={});const{scope:tt,images:nt}=et;if(this.availableImages[Ve][tt]=nt,this.workerSources[Ve]&&this.workerSources[Ve][tt]){for(const Ct in this.workerSources[Ve][tt]){const rr=this.workerSources[Ve][tt][Ct];for(const Et in rr)rr[Et].availableImages=nt}We()}else We()}setModels(Ve,{scope:et,models:We},tt){if(this.availableModels[Ve]||(this.availableModels[Ve]={}),this.availableModels[Ve][et]=We,this.workerSources[Ve]&&this.workerSources[Ve][et]){for(const nt in this.workerSources[Ve][et]){const Ct=this.workerSources[Ve][et][nt];for(const rr in Ct)Ct[rr].availableModels=We}tt()}else tt()}setProjection(Ve,et){this.projections[Ve]=t.cj(et)}setBrightness(Ve,et,We){this.brightness=et,We()}setWorldview(Ve,et,We){this.worldview=et,We()}setLayers(Ve,et,We){this.getLayerIndex(Ve,et.scope).replace(et.layers,et.options),We()}updateLayers(Ve,et,We){this.getLayerIndex(Ve,et.scope).update(et.layers,et.removedIds,et.options),We()}loadTile(Ve,et,We){et.projection=this.projections[Ve]||this.defaultProjection,this.getWorkerSource(Ve,et.type,et.source,et.scope).loadTile(et,We)}decodeRasterArray(Ve,et,We){this.getWorkerSource(Ve,et.type,et.source,et.scope).decodeRasterArray(et,We)}reloadTile(Ve,et,We){et.projection=this.projections[Ve]||this.defaultProjection,this.getWorkerSource(Ve,et.type,et.source,et.scope).reloadTile(et,We)}abortTile(Ve,et,We){this.getWorkerSource(Ve,et.type,et.source,et.scope).abortTile(et,We)}removeTile(Ve,et,We){this.getWorkerSource(Ve,et.type,et.source,et.scope).removeTile(et,We)}removeSource(Ve,et,We){if(!(this.workerSources[Ve]&&this.workerSources[Ve][et.scope]&&this.workerSources[Ve][et.scope][et.type]&&this.workerSources[Ve][et.scope][et.type][et.source]))return;const tt=this.workerSources[Ve][et.scope][et.type][et.source];delete this.workerSources[Ve][et.scope][et.type][et.source],tt.removeSource!==void 0?tt.removeSource(et,We):We()}loadWorkerSource(Ve,et,We){try{this.self.importScripts(et.url),We()}catch(tt){We(tt.toString())}}syncRTLPluginState(Ve,et,We){if(t.fw.isParsed())We(null,!0);else if(t.fw.isParsing())this.rtlPluginParsingListeners.push(We);else try{t.fw.setState(et);const tt=t.fw.getPluginURL();!t.fw.isLoaded()||t.fw.isParsed()||t.fw.isParsing()||tt==null||(t.fw.setState({pluginStatus:t.fx.parsing,pluginURL:t.fw.getPluginURL()}),this.self.importScripts(tt),t.fw.isParsed()?We(null,!0):this.rtlPluginParsingListeners.push(We))}catch(tt){We(tt.toString())}}setDracoUrl(Ve,et){this.dracoUrl=et}getAvailableImages(Ve,et){this.availableImages[Ve]||(this.availableImages[Ve]={});let We=this.availableImages[Ve][et];return We||(We=[]),We}getAvailableModels(Ve,et){this.availableModels[Ve]||(this.availableModels[Ve]={});let We=this.availableModels[Ve][et];return We||(We={}),We}getLayerIndex(Ve,et){this.layerIndexes[Ve]||(this.layerIndexes[Ve]={});let We=this.layerIndexes[Ve][et];return We||(We=this.layerIndexes[Ve][et]=new _,We.scope=et),We}getWorkerSource(Ve,et,We,tt){const nt=this.workerSources;return nt[Ve]||(nt[Ve]={}),nt[Ve][tt]||(nt[Ve][tt]={}),nt[Ve][tt][et]||(nt[Ve][tt][et]={}),this.isSpriteLoaded[Ve]||(this.isSpriteLoaded[Ve]={}),nt[Ve][tt][et][We]||(nt[Ve][tt][et][We]=new this.workerSourceTypes[et]({send:(Ct,rr,Et,nr,Fr,_r)=>this.actor.send(Ct,rr,Et,Ve,Fr,_r),scheduler:this.actor.scheduler},this.getLayerIndex(Ve,tt),this.getAvailableImages(Ve,tt),this.getAvailableModels(Ve,tt),this.isSpriteLoaded[Ve][tt],void 0,this.brightness,this.worldview)),nt[Ve][tt][et][We]}rasterizeImagesWorker(Ve,et,We){const tt=new Map;for(const[nt,{image:Ct,imageVariant:rr}]of et.tasks.entries()){const Et=this.imageRasterizer.rasterize(rr,Ct,et.scope,Ve);tt.set(nt,Et)}We(void 0,tt)}removeRasterizedImages(Ve,et,We){this.imageRasterizer.removeImagesFromCacheByIds(et.imageIds,et.scope,Ve),We()}enforceCacheSizeLimit(Ve,et){t.fy(et)}getWorkerPerformanceMetrics(Ve,et,We){We(void 0,void 0)}}return t.fu(self)&&(self.worker=new li(self)),li}),a(["./shared"],function(t){var h="3.14.0";const f={create:"create",load:"load",fullLoad:"fullLoad"},p={mark(C){performance.mark(C)},measure(C,c,A){performance.measure(C,c,A)}};function _(C){const c=C.name.split("?")[0];return t.a(c)&&c.includes("mapbox-gl.js")?"javascript":t.a(c)&&c.includes("mapbox-gl.css")?"css":t.b(c)?"fontRange":t.c(c)?"sprite":t.i(c)?"style":t.d(c)?"tilejson":"other"}var g,m={},b=function(){if(g)return m;function C(E){return!c(E)}function c(E){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var P,j,K=new Blob([""],{type:"text/javascript"}),te=URL.createObjectURL(K);try{j=new Worker(te),P=!0}catch{P=!1}return j&&j.terminate(),URL.revokeObjectURL(te),P}()?function(){var P=document.createElement("canvas");P.width=P.height=1;var j=P.getContext("2d");if(!j)return!1;var K=j.getImageData(0,0,1,1);return K&&K.width===P.width}()?(A[M=E&&E.failIfMajorPerformanceCaveat]===void 0&&(A[M]=function(P){var j,K=function(te){var ge=document.createElement("canvas"),ve=Object.create(C.webGLContextAttributes);return ve.failIfMajorPerformanceCaveat=te,ge.getContext("webgl2",ve)}(P);if(!K)return!1;try{j=K.createShader(K.VERTEX_SHADER)}catch{return!1}return!(!j||K.isContextLost())&&(K.shaderSource(j,"void main() {}"),K.compileShader(j),K.getShaderParameter(j,K.COMPILE_STATUS)===!0)}(M)),A[M]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var M}g=1,m.supported=C,m.notSupportedReason=c;var A={};return C.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},m}();function x(C,c,A){const E=document.createElement(C);return c!=null&&(E.className=c),A&&A.appendChild(E),E}function v(C,c,A){const E=document.createElementNS("http://www.w3.org/2000/svg",C);for(const M of Object.keys(c))E.setAttributeNS(null,M,String(c[M]));return A&&A.appendChild(E),E}const S=typeof document<"u"?document.documentElement&&document.documentElement.style:null,B=S&&S.userSelect!==void 0?"userSelect":"WebkitUserSelect";let F;function O(){S&&B&&(F=S[B],S[B]="none")}function V(){S&&B&&(S[B]=F)}function X(C){C.preventDefault(),C.stopPropagation(),window.removeEventListener("click",X,!0)}function Q(){window.addEventListener("click",X,!0),window.setTimeout(()=>{window.removeEventListener("click",X,!0)},0)}function ee(C,c){const A=C.getBoundingClientRect();return fe(C,A,c)}function ne(C,c){const A=C.getBoundingClientRect(),E=[];for(let M=0;M<c.length;M++)E.push(fe(C,A,c[M]));return E}function Ae(C){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&C.button===2&&C.ctrlKey?0:C.button}function fe(C,c,A){const E=C.offsetWidth===c.width?1:C.offsetWidth/c.width;return new t.P((A.clientX-c.left)*E,(A.clientY-c.top)*E)}const ce="01",G="NO_ACCESS_TOKEN";class Z{constructor(c,A,E){this._transformRequestFn=c,this._customAccessToken=A,this._silenceAuthErrors=!!E,this._createSkuToken()}_createSkuToken(){const c=function(){let A="";for(let E=0;E<10;E++)A+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,A].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,A){return this._transformRequestFn&&this._transformRequestFn(c,A)||{url:c}}normalizeStyleURL(c,A){if(!t.j(c))return c;const E=k(c);return E.params.push(`sdk=js-${h}`),E.path=`/styles/v1${E.path}`,this._makeAPIURL(E,this._customAccessToken||A)}normalizeGlyphsURL(c,A){if(!t.j(c))return c;const E=k(c);return E.path=`/fonts/v1${E.path}`,this._makeAPIURL(E,this._customAccessToken||A)}normalizeModelURL(c,A){if(!t.j(c))return c;const E=k(c);return E.path=`/models/v1${E.path}`,this._makeAPIURL(E,this._customAccessToken||A)}normalizeSourceURL(c,A,E,M){if(!t.j(c))return c;const P=k(c);return P.path=`/v4/${P.authority}.json`,P.params.push("secure"),E&&P.params.push(`language=${E}`),M&&P.params.push(`worldview=${M}`),this._makeAPIURL(P,this._customAccessToken||A)}normalizeIconsetURL(c,A){const E=k(c);return t.j(c)?(E.path=`/styles/v1${E.path}/iconset.pbf`,this._makeAPIURL(E,this._customAccessToken||A)):R(E)}normalizeSpriteURL(c,A,E,M){const P=k(c);return t.j(c)?(P.path=`/styles/v1${P.path}/sprite${A}${E}`,this._makeAPIURL(P,this._customAccessToken||M)):(P.path+=`${A}${E}`,R(P))}normalizeTileURL(c,A,E){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!t.j(c))return c;const M=k(c);M.path=M.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${A||E&&M.authority!=="raster"&&E===512?"@2x":""}${t.l.supported?".webp":"$1"}`),M.authority==="raster"?M.path=`/${t.e.RASTER_URL_PREFIX}${M.path}`:M.authority==="rasterarrays"?M.path=`/${t.e.RASTERARRAYS_URL_PREFIX}${M.path}`:M.authority==="3dtiles"?M.path=`/${t.e.TILES3D_URL_PREFIX}${M.path}`:(M.path=M.path.replace(/^.+\/v4\//,"/"),M.path=`/${t.e.TILE_URL_VERSION}${M.path}`);const P=this._customAccessToken||function(j){for(const K of j){const te=K.match(/^access_token=(.*)$/);if(te)return te[1]}return null}(M.params)||t.e.ACCESS_TOKEN;return t.e.REQUIRE_ACCESS_TOKEN&&P&&this._skuToken&&M.params.push(`sku=${this._skuToken}`),this._makeAPIURL(M,P)}canonicalizeTileURL(c,A){const E=k(c);if(!E.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!E.path.match(/\.[\w]+$/))return c;let M="mapbox://";E.path.match(/^\/raster\/v1\//)?M+=`raster/${E.path.replace(`/${t.e.RASTER_URL_PREFIX}/`,"")}`:E.path.match(/^\/rasterarrays\/v1\//)?M+=`rasterarrays/${E.path.replace(`/${t.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:M+=`tiles/${E.path.replace(`/${t.e.TILE_URL_VERSION}/`,"")}`;let P=E.params;return A&&(P=P.filter(j=>!j.match(/^access_token=/))),P.length&&(M+=`?${P.join("&")}`),M}canonicalizeTileset(c,A){const E=!!A&&t.j(A),M=[];for(const P of c.tiles||[])t.k(P)?M.push(this.canonicalizeTileURL(P,E)):M.push(P);return M}_makeAPIURL(c,A){const E="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",M=k(t.e.API_URL);if(c.protocol=M.protocol,c.authority=M.authority,c.protocol==="http"){const P=c.params.indexOf("secure");P>=0&&c.params.splice(P,1)}if(M.path!=="/"&&(c.path=`${M.path}${c.path}`),!t.e.REQUIRE_ACCESS_TOKEN)return R(c);if(A=A||t.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!A)throw new Error(`An API access token is required to use Mapbox GL. ${E}`);if(A[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${E}`)}return c.params=c.params.filter(P=>P.indexOf("access_token")===-1),c.params.push(`access_token=${A||""}`),R(c)}}const z=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function k(C){const c=C.match(z);if(!c)throw new Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]}}function R(C){const c=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${c}`}const N="mapbox.eventData";function U(C){if(!C)return null;const c=C.split(".");if(!c||c.length!==3)return null;try{return JSON.parse(t.m(c[1]))}catch{return null}}class Y{constructor(c){this.type=c,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(c){const A=U(t.e.ACCESS_TOKEN);let E="";return E=A&&A.u?t.f(A.u):t.e.ACCESS_TOKEN||"",c?`${N}.${c}:${E}`:`${N}:${E}`}fetchEventData(){const c=t.s("localStorage"),A=this.getStorageKey(),E=this.getStorageKey("uuid");if(c)try{const M=localStorage.getItem(A);M&&(this.eventData=JSON.parse(M));const P=localStorage.getItem(E);P&&(this.anonId=P)}catch{t.w("Unable to read from LocalStorage")}}saveEventData(){const c=t.s("localStorage"),A=this.getStorageKey(),E=this.getStorageKey("uuid"),M=this.anonId;if(c&&M)try{localStorage.setItem(E,M),Object.keys(this.eventData).length>=1&&localStorage.setItem(A,JSON.stringify(this.eventData))}catch{t.w("Unable to write to LocalStorage")}}processRequests(c){}postEvent(c,A,E,M){if(!t.e.EVENTS_URL)return;const P=k(t.e.EVENTS_URL);P.params.push(`access_token=${M||t.e.ACCESS_TOKEN||""}`);const j={event:this.type,created:new Date(c).toISOString()},K=A?t.h(j,A):j,te={url:R(P),headers:{"Content-Type":"text/plain"},body:JSON.stringify([K])};this.pendingRequest=t.p(te,ge=>{this.pendingRequest=null,E(ge),this.saveEventData(),this.processRequests(M)})}queueRequest(c,A){this.queue.push(c),this.processRequests(A)}}const de=new class extends Y{constructor(C){super("appUserTurnstile"),this._customAccessToken=C}postTurnstileEvent(C,c){t.e.EVENTS_URL&&t.e.ACCESS_TOKEN&&Array.isArray(C)&&C.some(A=>t.j(A)||t.k(A))&&this.queueRequest(Date.now(),c)}processRequests(C){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const c=U(t.e.ACCESS_TOKEN),A=c?c.u:t.e.ACCESS_TOKEN;let E=A!==this.eventData.tokenU;t.v(this.anonId)||(this.anonId=t.u(),E=!0);const M=this.queue.shift();if(this.eventData.lastSuccess){const P=new Date(this.eventData.lastSuccess),j=new Date(M),K=(M-this.eventData.lastSuccess)/864e5;E=E||K>=1||K<-1||P.getDate()!==j.getDate()}else E=!0;E?this.postEvent(M,{sdkIdentifier:"mapbox-gl-js",sdkVersion:h,skuId:ce,"enabled.telemetry":!1,userId:this.anonId},P=>{P||(this.eventData.lastSuccess=M,this.eventData.tokenU=A)},C):this.processRequests()}},J=de.postTurnstileEvent.bind(de),xe=new class extends Y{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(C,c,A,E){this.skuToken=c,this.errorCb=E,t.e.EVENTS_URL&&(A||t.e.ACCESS_TOKEN?this.queueRequest({id:C,timestamp:Date.now()},A):this.errorCb(new Error(G)))}processRequests(C){if(this.pendingRequest||this.queue.length===0)return;const{id:c,timestamp:A}=this.queue.shift();c&&this.success[c]||(this.anonId||this.fetchEventData(),t.v(this.anonId)||(this.anonId=t.u()),this.postEvent(A,{sdkIdentifier:"mapbox-gl-js",sdkVersion:h,skuId:ce,skuToken:this.skuToken,userId:this.anonId},E=>{E?this.errorCb(E):c&&(this.success[c]=!0)},C))}remove(){this.errorCb=null}},Te=xe.postMapLoadEvent.bind(xe),Ue=new class extends Y{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(C){let c=this.mapInstanceIdMap.get(C);return c||(c=t.u(),this.mapInstanceIdMap.set(C,c)),c}getEventId(C){const c=this.eventIdPerMapInstanceMap.get(C)||0;return this.eventIdPerMapInstanceMap.set(C,c+1),c}postStyleLoadEvent(C,c){const{map:A,style:E,importedStyles:M}=c;if(!t.e.EVENTS_URL||!C&&!t.e.ACCESS_TOKEN)return;const P=this.getMapInstanceId(A),j={mapInstanceId:P,eventId:this.getEventId(P),style:E};M.length&&(j.importedStyles=M),this.queueRequest({timestamp:Date.now(),payload:j},C)}processRequests(C){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:c,payload:A}=this.queue.shift();this.postEvent(c,A,()=>{},C)}},pe=Ue.postStyleLoadEvent.bind(Ue),Oe=new class extends Y{constructor(){super("gljs.performance")}postPerformanceEvent(C,c){t.e.EVENTS_URL&&(C||t.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:c},C)}processRequests(C){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:c,performanceData:A}=this.queue.shift(),E=function(M){const P=performance.getEntriesByType("resource"),j=performance.getEntriesByType("mark"),K=function(Pe){const Qe={};if(Pe){for(const je in Pe)if(je!=="other")for(const qe of Pe[je]){const Ke=`${je}ResolveRangeMin`,lt=`${je}ResolveRangeMax`,dt=`${je}RequestCount`,vt=`${je}RequestCachedCount`;Qe[Ke]=Math.min(Qe[Ke]||1/0,qe.startTime),Qe[lt]=Math.max(Qe[lt]||-1/0,qe.responseEnd);const Tt=Dt=>{Qe[Dt]===void 0&&(Qe[Dt]=0),++Qe[Dt]};qe.transferSize!==void 0&&qe.transferSize===0&&Tt(vt),Tt(dt)}}return Qe}(function(Pe,Qe){const je={};if(Pe)for(const qe of Pe){const Ke=Qe(qe);je[Ke]===void 0&&(je[Ke]=[]),je[Ke].push(qe)}return je}(P,_)),te=window.devicePixelRatio,ge=navigator.connection||navigator.mozConnection||navigator.webkitConnection,ve=ge?ge.effectiveType:void 0,Me={counters:[],metadata:[],attributes:[]},Ce=(Pe,Qe,je)=>{je!=null&&Pe.push({name:Qe,value:je.toString()})};for(const Pe in K)Ce(Me.counters,Pe,K[Pe]);if(M.interactionRange[0]!==1/0&&M.interactionRange[1]!==-1/0&&(Ce(Me.counters,"interactionRangeMin",M.interactionRange[0]),Ce(Me.counters,"interactionRangeMax",M.interactionRange[1])),j)for(const Pe of Object.keys(f)){const Qe=f[Pe],je=j.find(qe=>qe.name===Qe);je&&Ce(Me.counters,Qe,je.startTime)}return Ce(Me.counters,"visibilityHidden",M.visibilityHidden),Ce(Me.attributes,"style",function(Pe){if(Pe)for(const Qe of Pe){const je=Qe.name.split("?")[0];if(t.i(je)){const qe=je.split("/").slice(-2);if(qe.length===2)return`mapbox://styles/${qe[0]}/${qe[1]}`}}}(P)),Ce(Me.attributes,"terrainEnabled",M.terrainEnabled?"true":"false"),Ce(Me.attributes,"fogEnabled",M.fogEnabled?"true":"false"),Ce(Me.attributes,"projection",M.projection),Ce(Me.attributes,"zoom",M.zoom),Ce(Me.metadata,"devicePixelRatio",te),Ce(Me.metadata,"connectionEffectiveType",ve),Ce(Me.metadata,"navigatorUserAgent",navigator.userAgent),Ce(Me.metadata,"screenWidth",window.screen.width),Ce(Me.metadata,"screenHeight",window.screen.height),Ce(Me.metadata,"windowWidth",window.innerWidth),Ce(Me.metadata,"windowHeight",window.innerHeight),Ce(Me.metadata,"mapWidth",M.width/te),Ce(Me.metadata,"mapHeight",M.height/te),Ce(Me.metadata,"webglRenderer",M.renderer),Ce(Me.metadata,"webglVendor",M.vendor),Ce(Me.metadata,"sdkVersion",h),Ce(Me.metadata,"sdkIdentifier","mapbox-gl-js"),Me}(A);for(const M of E.metadata);for(const M of E.counters);for(const M of E.attributes);this.postEvent(c,E,()=>{},C)}},re=Oe.postPerformanceEvent.bind(Oe),ie=new class extends Y{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(C,c,A,E){if(!t.e.API_URL||!t.e.SESSION_PATH)return;const M=k(t.e.API_URL+t.e.SESSION_PATH);M.params.push(`sku=${c||""}`),M.params.push(`access_token=${E||t.e.ACCESS_TOKEN||""}`);const P={url:R(M),headers:{"Content-Type":"text/plain"}};this.pendingRequest=t.g(P,j=>{this.pendingRequest=null,A(j),this.saveEventData(),this.processRequests(E)})}getSessionAPI(C,c,A,E){this.skuToken=c,this.errorCb=E,t.e.SESSION_PATH&&t.e.API_URL&&(A||t.e.ACCESS_TOKEN?this.queueRequest({id:C,timestamp:Date.now()},A):this.errorCb(new Error(G)))}processRequests(C){if(this.pendingRequest||this.queue.length===0)return;const{id:c,timestamp:A}=this.queue.shift();c&&this.success[c]||this.getSession(A,this.skuToken,E=>{E?this.errorCb(E):c&&(this.success[c]=!0)},C)}remove(){this.errorCb=null}},Be=ie.getSessionAPI.bind(ie),He=new Set;function Ge(C,c){c?He.add(C):He.delete(C)}class Ne{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(c,A){this._updatedSourceCaches[c]=A,this.setDirty()}discardSourceCacheUpdate(c){delete this._updatedSourceCaches[c]}updateLayer(c){const A=c.scope;this._updatedLayers[A]=this._updatedLayers[A]||new Set,this._updatedLayers[A].add(c.id),this.setDirty()}removeLayer(c){const A=c.scope;this._removedLayers[A]=this._removedLayers[A]||{},this._updatedLayers[A]=this._updatedLayers[A]||new Set,this._removedLayers[A][c.id]=c,this._updatedLayers[A].delete(c.id),this._updatedPaintProps.delete(c.fqid),this.setDirty()}getRemovedLayer(c){return this._removedLayers[c.scope]?this._removedLayers[c.scope][c.id]:null}discardLayerRemoval(c){this._removedLayers[c.scope]&&delete this._removedLayers[c.scope][c.id]}getLayerUpdatesByScope(){const c={};for(const A in this._updatedLayers)c[A]=c[A]||{},c[A].updatedIds=Array.from(this._updatedLayers[A].values());for(const A in this._removedLayers)c[A]=c[A]||{},c[A].removedIds=Object.keys(this._removedLayers[A]);return c}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(c){this._updatedPaintProps.add(c.fqid),this.setDirty()}getUpdatedImages(c){return this._updatedImages[c]?Array.from(this._updatedImages[c].values()):[]}updateImage(c,A){this._updatedImages[A]=this._updatedImages[A]||new Set,this._updatedImages[A].add(t.I.toString(c)),this.setDirty()}resetUpdatedImages(c){this._updatedImages[c]&&this._updatedImages[c].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function st(C){const{userImage:c}=C;return!!(c&&c.render&&c.render())&&(C.data.replace(new Uint8Array(c.data.buffer)),!0)}class ot extends t.E{constructor(c){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=c,c!=="raster"&&t.t()&&(this.imageRasterizerDispatcher=new t.D(t.x(),this,"Image Rasterizer Worker",1))}addScope(c){this.loaded.set(c,!1),this.imageProviders.set(c,new Map),this.images.set(c,new Map),this.updatedImages.set(c,new Set),this.callbackDispatchedThisFrame.set(c,new Set),this.patterns.set(c,new Map),this.atlasImage.set(c,new t.r({width:1,height:1}))}removeScope(c){this.loaded.delete(c),this.imageProviders.delete(c),this.images.delete(c),this.updatedImages.delete(c),this.callbackDispatchedThisFrame.delete(c),this.patterns.delete(c),this.atlasImage.delete(c);const A=this.atlasTexture.get(c);A&&(A.destroy(),this.atlasTexture.delete(c))}addImageProvider(c,A){this.imageProviders.has(A)||this.imageProviders.set(A,new Map),this.imageProviders.get(A).set(c.id,c)}removeImageProvider(c,A){this.imageProviders.has(A)&&this.imageProviders.get(A).delete(c)}getPendingImageProviders(){const c=[];for(const A of this.imageProviders.values())for(const E of A.values())E.hasPendingRequests()&&c.push(E);return c}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new t.y),this._imageRasterizer}isLoaded(){for(const c of this.loaded.keys())if(!this.loaded.get(c))return!1;return!0}setLoaded(c,A){if(this.loaded.get(A)!==c&&(this.loaded.set(A,c),c)){for(const{ids:E,callback:M}of this.requestors)this._notify(E,A,M);this.requestors=[]}}hasImage(c,A){return!!this.getImage(c,A)}getImage(c,A){return this.images.get(A).get(c.toString())}addImage(c,A,E){this._validate(c,E)&&this.images.get(A).set(c.toString(),E)}_validate(c,A){let E=!0;return this._validateStretch(A.stretchX,A.data&&A.data.width)||(this.fire(new t.z(new Error(`Image "${c.name}" has invalid "stretchX" value`))),E=!1),this._validateStretch(A.stretchY,A.data&&A.data.height)||(this.fire(new t.z(new Error(`Image "${c.name}" has invalid "stretchY" value`))),E=!1),this._validateContent(A.content,A)||(this.fire(new t.z(new Error(`Image "${c.name}" has invalid "content" value`))),E=!1),E}_validateStretch(c,A){if(!c)return!0;let E=0;for(const M of c){if(M[0]<E||M[1]<M[0]||A<M[1])return!1;E=M[1]}return!0}_validateContent(c,A){return c?c.length!==4||!A.usvg&&(c[0]<0||A.data.width<c[0]||c[1]<0||A.data.height<c[1]||c[2]<0||A.data.width<c[2]||c[3]<0||A.data.height<c[3])?!1:!(c[2]<c[0]||c[3]<c[1]):!0}updateImage(c,A,E){const M=this.images.get(A).get(c.toString());E.version=M.version+1,this.images.get(A).set(c.toString(),E),this.updatedImages.get(A).add(c),this.removeFromImageRasterizerCache(c,A)}clearUpdatedImages(c){this.updatedImages.get(c).clear()}removeFromImageRasterizerCache(c,A){this.spriteFormat!=="raster"&&(t.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[c],scope:A}):this.imageRasterizer.removeImagesFromCacheByIds([c],A))}removeImage(c,A){const E=this.images.get(A),M=E.get(c.toString());E.delete(c.toString()),this.patterns.get(A).delete(c.toString()),this.removeFromImageRasterizerCache(c,A),M.userImage&&M.userImage.onRemove&&M.userImage.onRemove()}listImages(c){return Array.from(this.images.get(c).keys()).map(A=>t.I.from(A))}getImages(c,A,E){const M=[],P=[],j=this.imageProviders.get(A);for(const ve of c){if(!ve.iconsetId){M.push(ve);continue}const Me=j.get(ve.iconsetId);Me&&(this.getImage(ve,A)?P.push(ve):Me.addPendingRequest(ve))}if(M.length===0)return void this._notify(P,A,E);let K=!0;const te=!!this.loaded.get(A),ge=this.images.get(A);if(!te)for(const ve of M)ge.has(ve.toString())||(K=!1);te||K?this._notify(M,A,E):this.requestors.push({ids:M,scope:A,callback:E})}rasterizeImages(c,A){const E=new Map,{tasks:M,scope:P}=c;for(const[j,K]of M.entries()){const te=this.getImage(K.id,P);te&&E.set(j,{image:te,imageVariant:K})}this._rasterizeImages(P,E,A)}_rasterizeImages(c,A,E){if(t.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:A,scope:c},E);else{const M=new Map;for(const[P,{image:j,imageVariant:K}]of A.entries())M.set(P,this.imageRasterizer.rasterize(K,j,c,0));E(void 0,M)}}getUpdatedImages(c){return this.updatedImages.get(c)||new Set}_notify(c,A,E){const M=this.images.get(A),P=new Map;for(const j of c){if(!M.get(j.toString())){if(j.iconsetId)continue;this.fire(new t.A("styleimagemissing",{id:j.name}))}const K=M.get(j.toString());if(!K){t.w(`Image "${j.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const te={data:K.usvg?null:K.data.clone(),pixelRatio:K.pixelRatio,sdf:K.sdf,usvg:K.usvg,version:K.version,stretchX:K.stretchX,stretchY:K.stretchY,content:K.content,hasRenderCallback:!!(K.userImage&&K.userImage.render)};K.usvg&&Object.assign(te,{width:K.icon.usvg_tree.width,height:K.icon.usvg_tree.height}),P.set(t.I.toString(j),te)}E(null,P)}getPixelSize(c){const{width:A,height:E}=this.atlasImage.get(c);return{width:A,height:E}}getPattern(c,A,E){const M=c.toString(),P=this.patterns.get(A),j=P.get(M),K=this.getImage(c,A);if(!K)return null;if(j){if(j.position.version===K.version)return j.position;j.position.version=K.version}else{if(K.usvg&&!K.data){const te=this.getPatternInFlightId(M,A);if(this.patternsInFlight.has(te))return null;this.patternsInFlight.add(te);const ge=new t.B(c).scaleSelf(t.q.devicePixelRatio),ve=new Map([[ge.toString(),{image:K,imageVariant:ge}]]);return this._rasterizeImages(A,ve,(Me,Ce)=>this.storePatternImage(ge,A,K,E,Ce)),null}this.storePattern(c,A,K)}return this._updatePatternAtlas(A,E),P.get(M).position}getPatternInFlightId(c,A){return t.C(c,A)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(c,A,E,M,P){const j=c.toString(),K=P?P.get(j):void 0;K&&(E.data=K,this.storePattern(c.id,A,E),this._updatePatternAtlas(A,M),this.patternsInFlight.delete(this.getPatternInFlightId(c.id.toString(),A)))}storePattern(c,A,E){const M={w:E.data.width+2*t.F,h:E.data.height+2*t.F,x:0,y:0},P=new t.G(M,E,t.F);this.patterns.get(A).set(c.toString(),{bin:M,position:P})}destroyAtlasTextures(){for(const c of this.atlasTexture.values())c&&c.destroy();this.atlasTexture.clear()}bind(c,A){const E=c.gl;let M=this.atlasTexture.get(A);M?this.dirty&&(M.update(this.atlasImage.get(A)),this.dirty=!1):(M=new t.T(c,this.atlasImage.get(A),E.RGBA8),this.atlasTexture.set(A,M)),M.bind(E.LINEAR,E.CLAMP_TO_EDGE)}_updatePatternAtlas(c,A){const E=this.patterns.get(c),M=Array.from(E.values()).map(({bin:ge})=>ge),{w:P,h:j}=t.H(M),K=this.atlasImage.get(c);K.resize({width:P||1,height:j||1});const te=this.images.get(c);for(const[ge,{bin:ve,position:Me}]of E.entries()){let Ce=Me.padding;const Pe=ve.x+Ce,Qe=ve.y+Ce,je=te.get(ge).data,qe=je.width,Ke=je.height;Ce=Ce>1?Ce-1:Ce,t.r.copy(je,K,{x:0,y:0},{x:Pe,y:Qe},{width:qe,height:Ke},A),t.r.copy(je,K,{x:0,y:Ke-Ce},{x:Pe,y:Qe-Ce},{width:qe,height:Ce},A),t.r.copy(je,K,{x:0,y:0},{x:Pe,y:Qe+Ke},{width:qe,height:Ce},A),t.r.copy(je,K,{x:qe-Ce,y:0},{x:Pe-Ce,y:Qe},{width:Ce,height:Ke},A),t.r.copy(je,K,{x:0,y:0},{x:Pe+qe,y:Qe},{width:Ce,height:Ke},A),t.r.copy(je,K,{x:qe-Ce,y:Ke-Ce},{x:Pe-Ce,y:Qe-Ce},{width:Ce,height:Ce},A),t.r.copy(je,K,{x:0,y:Ke-Ce},{x:Pe+qe,y:Qe-Ce},{width:Ce,height:Ce},A),t.r.copy(je,K,{x:0,y:0},{x:Pe+qe,y:Qe+Ke},{width:Ce,height:Ce},A),t.r.copy(je,K,{x:qe-Ce,y:0},{x:Pe-Ce,y:Qe+Ke},{width:Ce,height:Ce},A)}this.dirty=!0}beginFrame(){for(const c of this.images.keys())this.callbackDispatchedThisFrame.set(c,new Set)}dispatchRenderCallbacks(c,A){const E=this.images.get(A);for(const M of c){if(this.callbackDispatchedThisFrame.get(A).has(M.toString()))continue;this.callbackDispatchedThisFrame.get(A).add(M.toString());const P=E.get(M.toString());st(P)&&this.updateImage(M,A,P)}}destroy(){this.imageRasterizerDispatcher&&this.imageRasterizerDispatcher.remove()}}function Je(C){const c=C.key,A=C.value,E=C.valueSpec||{},M=C.objectElementValidators||{},P=C.style,j=C.styleSpec;let K=[];const te=t.J(A);if(te!=="object")return[new t.V(c,A,`object expected, ${te} found`)];for(const ge in A){const ve=ge.split(".")[0];let Me;M[ve]?Me=M[ve]:E[ve]?Me=wn:M["*"]?Me=M["*"]:E["*"]&&(Me=wn),Me?K=K.concat(Me({key:(c&&`${c}.`)+ge,value:A[ge],valueSpec:E[ve]||E["*"],style:P,styleSpec:j,object:A,objectKey:ge},A)):K.push(new t.K(c,A[ge],`unknown property "${ge}"`))}for(const ge in E)M[ge]||E[ge].required&&E[ge].default===void 0&&A[ge]===void 0&&K.push(new t.V(c,A,`missing required property "${ge}"`));return K}function Ze(C){const c=C.value,A=C.valueSpec,E=C.style,M=C.styleSpec,P=C.key,j=C.arrayElementValidator||wn;if(t.J(c)!=="array")return[new t.V(P,c,`array expected, ${t.J(c)} found`)];if(A.length&&c.length!==A.length)return[new t.V(P,c,`array length ${A.length} expected, length ${c.length} found`)];if(A["min-length"]&&c.length<A["min-length"])return[new t.V(P,c,`array length at least ${A["min-length"]} expected, length ${c.length} found`)];let K={type:A.value,values:A.values,minimum:A.minimum,maximum:A.maximum,function:void 0};M.$version<7&&(K.function=A.function),t.J(A.value)==="object"&&(K=A.value);let te=[];for(let ge=0;ge<c.length;ge++)te=te.concat(j({array:c,arrayIndex:ge,value:c[ge],valueSpec:K,style:E,styleSpec:M,key:`${P}[${ge}]`},!0));return te}function bt(C){const c=C.key,A=C.value,E=C.valueSpec;let M=t.J(A);if(M==="number"&&A!=A&&(M="NaN"),M!=="number")return[new t.V(c,A,`number expected, ${M} found`)];if("minimum"in E){let P=E.minimum;if(t.J(E.minimum)==="array"&&(P=E.minimum[C.arrayIndex]),A<P)return[new t.V(c,A,`${A} is less than the minimum value ${P}`)]}if("maximum"in E){let P=E.maximum;if(t.J(E.maximum)==="array"&&(P=E.maximum[C.arrayIndex]),A>P)return[new t.V(c,A,`${A} is greater than the maximum value ${P}`)]}return[]}function yt(C){const c=C.valueSpec,A=t.M(C.value.type);let E,M,P,j={};const K=A!=="categorical"&&C.value.property===void 0,te=!K,ge=t.J(C.value.stops)==="array"&&t.J(C.value.stops[0])==="array"&&t.J(C.value.stops[0][0])==="object",ve=Je({key:C.key,value:C.value,valueSpec:C.styleSpec.function,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:function(Pe){if(A==="identity")return[new t.V(Pe.key,Pe.value,'identity function may not have a "stops" property')];let Qe=[];const je=Pe.value;return Qe=Qe.concat(Ze({key:Pe.key,value:je,valueSpec:Pe.valueSpec,style:Pe.style,styleSpec:Pe.styleSpec,arrayElementValidator:Me})),t.J(je)==="array"&&je.length===0&&Qe.push(new t.V(Pe.key,je,"array must have at least one stop")),Qe},default:function(Pe){return wn({key:Pe.key,value:Pe.value,valueSpec:c,style:Pe.style,styleSpec:Pe.styleSpec})}}});return A==="identity"&&K&&ve.push(new t.V(C.key,C.value,'missing required property "property"')),A==="identity"||C.value.stops||ve.push(new t.V(C.key,C.value,'missing required property "stops"')),A==="exponential"&&C.valueSpec.expression&&!t.N(C.valueSpec)&&ve.push(new t.V(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(te&&!t.O(C.valueSpec)?ve.push(new t.V(C.key,C.value,"property functions not supported")):K&&!t.Q(C.valueSpec)&&ve.push(new t.V(C.key,C.value,"zoom functions not supported"))),A!=="categorical"&&!ge||C.value.property!==void 0||ve.push(new t.V(C.key,C.value,'"property" property is required')),ve;function Me(Pe){let Qe=[];const je=Pe.value,qe=Pe.key;if(t.J(je)!=="array")return[new t.V(qe,je,`array expected, ${t.J(je)} found`)];if(je.length!==2)return[new t.V(qe,je,`array length 2 expected, length ${je.length} found`)];if(ge){if(t.J(je[0])!=="object")return[new t.V(qe,je,`object expected, ${t.J(je[0])} found`)];if(je[0].zoom===void 0)return[new t.V(qe,je,"object stop key must have zoom")];if(je[0].value===void 0)return[new t.V(qe,je,"object stop key must have value")];const Ke=t.M(je[0].zoom);if(typeof Ke!="number")return[new t.V(qe,je[0].zoom,"stop zoom values must be numbers")];if(P&&P>Ke)return[new t.V(qe,je[0].zoom,"stop zoom values must appear in ascending order")];Ke!==P&&(P=Ke,M=void 0,j={}),Qe=Qe.concat(Je({key:`${qe}[0]`,value:je[0],valueSpec:{zoom:{}},style:Pe.style,styleSpec:Pe.styleSpec,objectElementValidators:{zoom:bt,value:Ce}}))}else Qe=Qe.concat(Ce({key:`${qe}[0]`,value:je[0],style:Pe.style,styleSpec:Pe.styleSpec},je));return t.S(t.U(je[1]))?Qe.concat([new t.V(`${qe}[1]`,je[1],"expressions are not allowed in function stops.")]):Qe.concat(wn({key:`${qe}[1]`,value:je[1],valueSpec:c,style:Pe.style,styleSpec:Pe.styleSpec}))}function Ce(Pe,Qe){const je=t.J(Pe.value),qe=t.M(Pe.value),Ke=Pe.value!==null?Pe.value:Qe;if(E){if(je!==E)return[new t.V(Pe.key,Ke,`${je} stop domain type must match previous stop domain type ${E}`)]}else E=je;if(je!=="number"&&je!=="string"&&je!=="boolean"&&typeof qe!="number"&&typeof qe!="string"&&typeof qe!="boolean")return[new t.V(Pe.key,Ke,"stop domain value must be a number, string, or boolean")];if(je!=="number"&&A!=="categorical"){let lt=`number expected, ${je} found`;return t.O(c)&&A===void 0&&(lt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new t.V(Pe.key,Ke,lt)]}return A!=="categorical"||je!=="number"||typeof qe=="number"&&isFinite(qe)&&Math.floor(qe)===qe?A!=="categorical"&&je==="number"&&typeof qe=="number"&&typeof M=="number"&&M!==void 0&&qe<M?[new t.V(Pe.key,Ke,"stop domain values must appear in ascending order")]:(M=qe,A==="categorical"&&qe in j?[new t.V(Pe.key,Ke,"stop domain values must be unique")]:(j[qe]=!0,[])):[new t.V(Pe.key,Ke,`integer expected, found ${String(qe)}`)]}}function Nt(C){const c=(C.expressionContext==="property"?t.W:t.X)(t.U(C.value),C.valueSpec);if(c.result==="error")return c.value.map(E=>new t.V(`${C.key}${E.key}`,C.value,E.message));const A=c.value.expression||c.value._styleExpression.expression;if(C.expressionContext==="property"&&C.propertyKey==="text-font"&&!A.outputDefined())return[new t.V(C.key,C.value,`Invalid data expression for "${C.propertyKey}". Output values must be contained as literals within the expression.`)];if(C.expressionContext==="property"&&C.propertyType==="layout"&&!t.Y(A))return[new t.V(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if(C.expressionContext==="filter")return kt(A,C);if(C.expressionContext&&C.expressionContext.indexOf("cluster")===0){if(!t.Z(A,["zoom","feature-state"]))return[new t.V(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(C.expressionContext==="cluster-initial"&&!t._(A))return[new t.V(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kt(C,c){const A=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(c.valueSpec&&c.valueSpec.expression)for(const M of c.valueSpec.expression.parameters)A.delete(M);if(A.size===0)return[];const E=[];return C instanceof t.$&&A.has(C.name)?[new t.V(c.key,c.value,`["${C.name}"] expression is not supported in a filter for a ${c.object.type} layer with id: ${c.object.id}`)]:(C.eachChild(M=>{E.push(...kt(M,c))}),E)}function Gt(C){const c=C.key,A=C.value,E=C.valueSpec,M=[];return Array.isArray(E.values)?E.values.indexOf(t.M(A))===-1&&M.push(new t.V(c,A,`expected one of [${E.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(E.values).indexOf(t.M(A))===-1&&M.push(new t.V(c,A,`expected one of [${Object.keys(E.values).join(", ")}], ${JSON.stringify(A)} found`)),M}function fr(C){return t.a1(t.U(C.value))?Nt(t.L({},C,{expressionContext:"filter",valueSpec:C.styleSpec[`filter_${C.layerType||"fill"}`]})):Tr(C)}function Tr(C){const c=C.value,A=C.key;if(t.J(c)!=="array")return[new t.V(A,c,`array expected, ${t.J(c)} found`)];const E=C.styleSpec;let M,P=[];if(c.length<1)return[new t.V(A,c,"filter array must have at least 1 element")];switch(P=P.concat(Gt({key:`${A}[0]`,value:c[0],valueSpec:E.filter_operator,style:C.style,styleSpec:C.styleSpec})),t.M(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&t.M(c[1])==="$type"&&P.push(new t.V(A,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&P.push(new t.V(A,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(M=t.J(c[1]),M!=="string"&&P.push(new t.V(`${A}[1]`,c[1],`string expected, ${M} found`)));for(let j=2;j<c.length;j++)M=t.J(c[j]),t.M(c[1])==="$type"?P=P.concat(Gt({key:`${A}[${j}]`,value:c[j],valueSpec:E.geometry_type,style:C.style,styleSpec:C.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&P.push(new t.V(`${A}[${j}]`,c[j],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let j=1;j<c.length;j++)P=P.concat(Tr({key:`${A}[${j}]`,value:c[j],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":M=t.J(c[1]),c.length!==2?P.push(new t.V(A,c,`filter array for "${c[0]}" operator must have 2 elements`)):M!=="string"&&P.push(new t.V(`${A}[1]`,c[1],`string expected, ${M} found`))}return P}function yr(C,c){const A=C.key,E=C.style,M=C.layer,P=C.styleSpec,j=C.value,K=C.objectKey,te=P[`${c}_${C.layerType}`];if(!te)return[];const ge=K.match(/^(.*)-use-theme$/);if(c==="paint"&&ge&&te[ge[1]])return t.S(j)?[].concat(wn({key:C.key,value:j,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:E,styleSpec:P,expressionContext:"property",propertyType:c,propertyKey:K})):wn({key:A,value:j,valueSpec:{type:"string"},style:E,styleSpec:P});const ve=K.match(/^(.*)-transition$/);if(c==="paint"&&ve&&te[ve[1]]&&te[ve[1]].transition)return wn({key:A,value:j,valueSpec:P.transition,style:E,styleSpec:P});const Me=C.valueSpec||te[K];if(!Me)return[new t.K(A,j,`unknown property "${K}"`)];let Ce;if(t.J(j)==="string"&&t.O(Me)&&!Me.tokens&&(Ce=/^{([^}]+)}$/.exec(j))){const Qe=`\`{ "type": "identity", "property": ${Ce?JSON.stringify(Ce[1]):'"_"'} }\``;return[new t.V(A,j,`"${K}" does not support interpolation syntax
Use an identity property function instead: ${Qe}.`)]}const Pe=[];if(C.layerType==="symbol")K!=="text-field"||!E||E.glyphs||E.imports||Pe.push(new t.V(A,j,'use of "text-field" requires a style "glyphs" property')),K==="text-font"&&t.a2(t.U(j))&&t.M(j.type)==="identity"&&Pe.push(new t.V(A,j,'"text-font" does not support identity functions'));else if(C.layerType==="model"&&c==="paint"&&M&&M.layout&&M.layout.hasOwnProperty("model-id")&&t.O(Me)&&(t.a3(Me)||t.Q(Me))){const Qe=t.W(t.U(j),Me),je=Qe.value.expression||Qe.value._styleExpression.expression;je&&!t.Z(je,["measure-light"])&&(K==="model-emissive-strength"&&t._(je)&&t.Y(je)||Pe.push(new t.V(A,j,`${K} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return Pe.concat(wn({key:C.key,value:j,valueSpec:Me,style:E,styleSpec:P,expressionContext:"property",propertyType:c,propertyKey:K}))}function Dr(C){return yr(C,"paint")}function jt(C){return yr(C,"layout")}function Jt(C){let c=[];const A=C.value,E=C.key,M=C.style,P=C.styleSpec;A.type||A.ref||c.push(new t.V(E,A,'either "type" or "ref" is required'));let j=t.M(A.type);const K=t.M(A.ref);if(A.id){const te=t.M(A.id);for(let ge=0;ge<C.arrayIndex;ge++){const ve=M.layers[ge];t.M(ve.id)===te&&c.push(new t.V(E,A.id,`duplicate layer id "${A.id}", previously used at line ${ve.id.__line__}`))}}if("ref"in A){let te;["type","source","source-layer","filter","layout"].forEach(ge=>{ge in A&&c.push(new t.V(E,A[ge],`"${ge}" is prohibited for ref layers`))}),M.layers.forEach(ge=>{t.M(ge.id)===K&&(te=ge)}),te?te.ref?c.push(new t.V(E,A.ref,"ref cannot reference another ref layer")):j=t.M(te.type):typeof K=="string"&&c.push(new t.V(E,A.ref,`ref layer "${K}" not found`))}else if(j!=="background"&&j!=="sky"&&j!=="slot")if(A.source){const te=M.sources&&M.sources[A.source],ge=te&&t.M(te.type);te?ge==="vector"&&j==="raster"?c.push(new t.V(E,A.source,`layer "${A.id}" requires a raster source`)):ge==="raster"&&j!=="raster"?c.push(new t.V(E,A.source,`layer "${A.id}" requires a vector source`)):ge!=="vector"||A["source-layer"]?ge==="raster-dem"&&j!=="hillshade"?c.push(new t.V(E,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):ge!=="raster-array"||["raster","raster-particle"].includes(j)?j==="line"&&A.paint&&(A.paint["line-gradient"]||A.paint["line-trim-offset"])&&ge==="geojson"&&!te.lineMetrics?c.push(new t.V(E,A,`layer "${A.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):j==="raster-particle"&&ge!=="raster-array"&&c.push(new t.V(E,A.source,`layer "${A.id}" requires a 'raster-array' source.`)):c.push(new t.V(E,A.source,"raster-array source can only be used with layer type 'raster'.")):c.push(new t.V(E,A,`layer "${A.id}" must specify a "source-layer"`)):c.push(new t.V(E,A.source,`source "${A.source}" not found`))}else c.push(new t.V(E,A,'missing required property "source"'));return c=c.concat(Je({key:E,value:A,valueSpec:P.layer,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":()=>[],type:()=>wn({key:`${E}.type`,value:A.type,valueSpec:P.layer.type,style:C.style,styleSpec:C.styleSpec,object:A,objectKey:"type"}),filter:te=>fr(t.L({layerType:j},te)),layout:te=>Je({layer:A,key:te.key,value:te.value,valueSpec:{},style:te.style,styleSpec:te.styleSpec,objectElementValidators:{"*":ge=>jt(t.L({layerType:j},ge))}}),paint:te=>Je({layer:A,key:te.key,value:te.value,valueSpec:{},style:te.style,styleSpec:te.styleSpec,objectElementValidators:{"*":ge=>Dr(t.L({layerType:j,layer:A},ge))}})}})),c}function pr(C){const c=C.value,A=C.key,E=t.J(c);return E!=="string"?[new t.V(A,c,`string expected, ${E} found`)]:[]}const Ft={promoteId:function C({key:c,value:A}){if(t.J(A)==="string")return pr({key:c,value:A});if(Array.isArray(A)){const E=[],M=t.U(A),P=t.X(M);return P.result==="error"&&P.value.forEach(j=>{E.push(new t.V(`${c}${j.key}`,null,`${j.message}`))}),t.Z(P.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||E.push(new t.V(`${c}`,null,"promoteId expression should be only feature dependent")),E}{const E=[];for(const M in A)E.push(...C({key:`${c}.${M}`,value:A[M]}));return E}}};function er(C){const c=C.value,A=C.key,E=C.styleSpec,M=C.style;if(!c.type)return[new t.V(A,c,'"type" is required')];const P=t.M(c.type);let j=[];switch(["vector","raster","raster-dem","raster-array"].includes(P)&&(c.url||c.tiles||j.push(new t.K(A,c,'Either "url" or "tiles" is required.'))),P){case"vector":case"raster":case"raster-dem":case"raster-array":return j=j.concat(Je({key:A,value:c,valueSpec:E[`source_${P.replace("-","_")}`],style:C.style,styleSpec:E,objectElementValidators:Ft})),j;case"geojson":if(j=Je({key:A,value:c,valueSpec:E.source_geojson,style:M,styleSpec:E,objectElementValidators:Ft}),c.cluster)for(const K in c.clusterProperties){const[te,ge]=c.clusterProperties[K],ve=typeof te=="string"?[te,["accumulated"],["get",K]]:te;j.push(...Nt({key:`${A}.${K}.map`,value:ge,expressionContext:"cluster-map"})),j.push(...Nt({key:`${A}.${K}.reduce`,value:ve,expressionContext:"cluster-reduce"}))}return j;case"video":return Je({key:A,value:c,valueSpec:E.source_video,style:M,styleSpec:E});case"image":return Je({key:A,value:c,valueSpec:E.source_image,style:M,styleSpec:E});case"canvas":return[new t.V(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gt({key:`${A}.type`,value:c.type,valueSpec:{values:ur(E)}})}}function ur(C){return C.source.reduce((c,A)=>{const E=C[A];return E.type.type==="enum"&&(c=c.concat(Object.keys(E.type.values))),c},[])}function Yt(C){const c=C.value,A=C.styleSpec,E=A.light,M=C.style;let P=[];const j=t.J(c);if(c===void 0)return P;if(j!=="object")return P=P.concat([new t.V("light",c,`object expected, ${j} found`)]),P;for(const K in c){const te=K.match(/^(.*)-transition$/),ge=K.match(/^(.*)-use-theme$/);P=P.concat(ge&&E[ge[1]]?wn({key:K,value:c[K],valueSpec:{type:"string"},style:M,styleSpec:A}):te&&E[te[1]]&&E[te[1]].transition?wn({key:K,value:c[K],valueSpec:A.transition,style:M,styleSpec:A}):E[K]?wn({key:K,value:c[K],valueSpec:E[K],style:M,styleSpec:A}):[new t.V(K,c[K],`unknown property "${K}"`)])}return P}function mr(C){const c=C.value;let A=[];if(!c)return A;const E=t.J(c);if(E!=="object")return A=A.concat([new t.V("light-3d",c,`object expected, ${E} found`)]),A;const M=C.styleSpec,P=M["light-3d"],j=C.key,K=C.style,te=C.style.lights;for(const Me of["type","id"])if(!(Me in c))return A=A.concat([new t.V("light-3d",c,`missing property ${Me} on light`)]),A;if(c.type&&te)for(let Me=0;Me<C.arrayIndex;Me++){const Ce=t.M(c.type),Pe=te[Me];t.M(Pe.type)===Ce&&A.push(new t.V(j,c.id,`duplicate light type "${c.type}", previously defined at line ${Pe.id.__line__}`))}const ge=`properties_light_${c.type}`;if(!(ge in M))return A=A.concat([new t.V("light-3d",c,`Invalid light type ${c.type}`)]),A;const ve=M[ge];for(const Me in c)if(Me==="properties"){const Ce=c[Me],Pe=t.J(Ce);if(Pe!=="object")return A=A.concat([new t.V("properties",Ce,`object expected, ${Pe} found`)]),A;for(const Qe in Ce){const je=Qe.match(/^(.*)-transition$/),qe=Qe.match(/^(.*)-use-theme$/);A=A.concat(qe&&ve[qe[1]]?wn({key:Me,value:Ce[Qe],valueSpec:{type:"string"},style:K,styleSpec:M}):je&&ve[je[1]]&&ve[je[1]].transition?wn({key:Me,value:c[Me],valueSpec:M.transition,style:K,styleSpec:M}):ve[Qe]?wn({key:Qe,value:Ce[Qe],valueSpec:ve[Qe],style:K,styleSpec:M}):[new t.K(C.key,Ce[Qe],`unknown property "${Qe}"`)])}}else A=A.concat(P[Me]?wn({key:Me,value:c[Me],valueSpec:P[Me],style:K,styleSpec:M}):[new t.K(Me,c[Me],`unknown property "${Me}"`)]);return A}function Mr(C){const c=C.value,A=C.key,E=C.style,M=C.styleSpec,P=M.terrain;let j=[];const K=t.J(c);if(c===void 0||K==="null")return j;if(K!=="object")return j=j.concat([new t.V("terrain",c,`object expected, ${K} found`)]),j;for(const te in c){const ge=te.match(/^(.*)-transition$/),ve=te.match(/^(.*)-use-theme$/);j=j.concat(ve&&P[ve[1]]?wn({key:te,value:c[te],valueSpec:{type:"string"},style:E,styleSpec:M}):ge&&P[ge[1]]&&P[ge[1]].transition?wn({key:te,value:c[te],valueSpec:M.transition,style:E,styleSpec:M}):P[te]?wn({key:te,value:c[te],valueSpec:P[te],style:E,styleSpec:M}):[new t.K(te,c[te],`unknown property "${te}"`)])}if(c.source){const te=E.sources&&E.sources[c.source],ge=te&&t.M(te.type);te?ge!=="raster-dem"&&j.push(new t.V(A,c.source,`terrain cannot be used with a source of type ${String(ge)}, it only be used with a "raster-dem" source type`)):j.push(new t.V(A,c.source,`source "${c.source}" not found`))}else j.push(new t.V(A,c,'terrain is missing required property "source"'));return j}function sn(C){const c=C.value,A=C.style,E=C.styleSpec,M=E.fog;let P=[];const j=t.J(c);if(c===void 0)return P;if(j!=="object")return P=P.concat([new t.V("fog",c,`object expected, ${j} found`)]),P;for(const K in c){const te=K.match(/^(.*)-transition$/),ge=K.match(/^(.*)-use-theme$/);P=P.concat(ge&&M[ge[1]]?wn({key:K,value:c[K],valueSpec:{type:"string"},style:A,styleSpec:E}):te&&M[te[1]]&&M[te[1]].transition?wn({key:K,value:c[K],valueSpec:E.transition,style:A,styleSpec:E}):M[K]?wn({key:K,value:c[K],valueSpec:M[K],style:A,styleSpec:E}):[new t.K(K,c[K],`unknown property "${K}"`)])}return P}const Un={"*":()=>[],array:Ze,boolean:function(C){const c=C.value,A=C.key,E=t.J(c);return E!=="boolean"?[new t.V(A,c,`boolean expected, ${E} found`)]:[]},number:bt,color:function(C){const c=C.key,A=C.value,E=t.J(A);return E!=="string"?[new t.V(c,A,`color expected, ${E} found`)]:t.a0.parseCSSColor(A)===null?[new t.V(c,A,`color expected, "${A}" found`)]:[]},enum:Gt,filter:fr,function:yt,layer:Jt,object:Je,source:er,model:t.a4,light:Yt,"light-3d":mr,terrain:Mr,fog:sn,string:pr,formatted:function(C){return pr(C).length===0?[]:Nt(C)},resolvedImage:function(C){return pr(C).length===0?[]:Nt(C)},projection:function(C){const c=C.value,A=C.styleSpec,E=A.projection,M=C.style;let P=[];const j=t.J(c);if(j==="object")for(const K in c)P=P.concat(wn({key:K,value:c[K],valueSpec:E[K],style:M,styleSpec:A}));else j!=="string"&&(P=P.concat([new t.V("projection",c,`object or string expected, ${j} found`)]));return P},import:function(C){const{value:c,styleSpec:A}=C,{data:E,...M}=c;Object.defineProperty(M,"__line__",{value:c.__line__,enumerable:!1});let P=Je(t.L({},C,{value:M,valueSpec:A.import}));return t.M(M.id)===""&&P.push(new t.V(`${C.key}.id`,M,"import id can't be an empty string")),E&&(P=P.concat(ai(E,A,{key:`${C.key}.data`}))),P},iconset:function(C){const c=C.value,A=C.key,E=C.styleSpec,M=C.style;if(!c.type)return[new t.V(A,c,'"type" is required')];const P=t.M(c.type);let j=[];if(j=j.concat(Je({key:A,value:c,valueSpec:E[`iconset_${P}`],style:M,styleSpec:E})),P==="source"&&c.source){const K=M.sources&&M.sources[c.source],te=K&&t.M(K.type);K?te!=="raster-array"&&j.push(new t.V(A,c.source,`iconset cannot be used with a source of type ${String(te)}, it only be used with a "raster-array" source type`)):j.push(new t.V(A,c.source,`source "${c.source}" not found`))}return j}};function wn(C,c=!1){const A=C.value,E=C.valueSpec,M=C.styleSpec;if(E.expression&&t.a2(t.M(A)))return yt(C);if(E.expression&&t.S(t.U(A)))return Nt(C);if(E.type&&Un[E.type]){const P=Un[E.type](C);return c===!0&&P.length>0&&t.J(C.value)==="array"?Nt(C):P}return Je(t.L({},C,{valueSpec:E.type?M[E.type]:E}))}function Zi(C){const c=C.value,A=C.key,E=pr(C);return E.length||(c.indexOf("{fontstack}")===-1&&E.push(new t.V(A,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&E.push(new t.V(A,c,'"glyphs" url must include a "{range}" token'))),E}function ai(C,c=t.a5,A={}){return wn({key:A.key||"",value:C,valueSpec:c.$root,styleSpec:c,style:C,objectElementValidators:{glyphs:Zi,"*":()=>[]}})}function _i(C,c=t.a5){return tt(ai(C,c))}const Zn=C=>tt(er(C)),Bn=C=>tt(Yt(C)),On=C=>tt(mr(C)),tr=C=>tt(Mr(C)),zn=C=>tt(sn(C)),Ki=C=>tt(function(c){const A=c.value,E=c.style,M=c.styleSpec,P=M.snow;let j=[];const K=t.J(A);if(A===void 0)return j;if(K!=="object")return j=j.concat([new t.V("snow",A,`object expected, ${K} found`)]),j;for(const te in A){const ge=te.match(/^(.*)-transition$/);j=j.concat(ge&&P[ge[1]]&&P[ge[1]].transition?wn({key:te,value:A[te],valueSpec:M.transition,style:E,styleSpec:M}):P[te]?wn({key:te,value:A[te],valueSpec:P[te],style:E,styleSpec:M}):[new t.K(te,A[te],`unknown property "${te}"`)])}return j}(C)),Qs=C=>tt(function(c){const A=c.value,E=c.style,M=c.styleSpec,P=M.rain;let j=[];const K=t.J(A);if(A===void 0)return j;if(K!=="object")return j=j.concat([new t.V("rain",A,`object expected, ${K} found`)]),j;for(const te in A){const ge=te.match(/^(.*)-transition$/);j=j.concat(ge&&P[ge[1]]&&P[ge[1]].transition?wn({key:te,value:A[te],valueSpec:M.transition,style:E,styleSpec:M}):P[te]?wn({key:te,value:A[te],valueSpec:P[te],style:E,styleSpec:M}):[new t.K(te,A[te],`unknown property "${te}"`)])}return j}(C)),li=C=>tt(Jt(C)),Qt=C=>tt(fr(C)),Ve=C=>tt(Dr(C)),et=C=>tt(jt(C)),We=C=>tt(t.a4(C));function tt(C){return C.slice().sort((c,A)=>c.line&&A.line?c.line-A.line:0)}function nt(C,c){let A=!1;if(c&&c.length)for(const E of c)E instanceof t.K?t.w(E.message):(C.fire(new t.z(new Error(E.message))),A=!0);return A}let Ct;class rr extends t.E{constructor(c,A="flat"){super(),this._transitionable=new t.a6(Ct||(Ct=new t.a7({anchor:new t.a8(t.a5.light.anchor),position:new t.a9(t.a5.light.position),color:new t.a8(t.a5.light.color),intensity:new t.a8(t.a5.light.intensity)}))),this.setLight(c,A),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,A,E={}){this._validate(Bn,c,E)||(this._transitionable.setTransitionOrValue(c),this.id=A)}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,A,E){return(!E||E.validate!==!1)&&nt(this,c.call(_i,t.h({value:A,style:{glyphs:!0,sprite:!0},styleSpec:t.a5})))}}let Et=class extends t.E{constructor(C,c,A,E,M){super(),this.scope=A,this._transitionable=new t.a6(new t.a7({source:new t.a8(t.a5.terrain.source),exaggeration:new t.a8(t.a5.terrain.exaggeration)}),A,E),this._transitionable.setTransitionOrValue(C,E),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c,this.worldview=M}get(){return this._transitionable.serialize()}set(C,c){this._transitionable.setTransitionOrValue(C,c)}updateTransitions(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(C){this.properties=this._transitioning.possiblyEvaluate(C)}getExaggeration(C){return this._transitioning.possiblyEvaluate(new t.aa(C,{worldview:this.worldview})).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const C=this._transitionable._values.exaggeration;if(!C)return null;const c=C.value.expression;if(!c)return null;let A=-1,E=-1,M=1;for(const P of c.zoomStops)M=c.evaluate(new t.aa(P,{worldview:this.worldview})),M>.01?(A=P,E=-1):E=P;return M<.01&&A>0&&E>A?[A,E]:null}isZoomDependent(){const C=this._transitionable._values.exaggeration;return C!=null&&C.value!=null&&C.value.expression!=null&&C.value.expression instanceof t.ab}};const nr=45,Fr=65,_r=.05;function pn(C,c,A,E){const M=t.af(nr,Fr,A),[P,j]=Tn(C,E);let K=1-Math.min(1,Math.exp((c-P)/(j-P)*-6));return K*=K*K,K=Math.min(1,1.00747*K),K*M*C.alpha}function Tn(C,c){const A=.5/Math.tan(.5*c);return[C.range[0]+A,C.range[1]+A]}function Vn(C,c,A,E,M){const P=t.ad([],[c,A,E],M.mercatorFogMatrix);return pn(C,t.ae(P),M.pitch,M._fov)}function Bi(C,c,A,E,M,P,j){const K=[[A,E,0],[M,E,0],[M,P,0],[A,P,0]];let te=Number.MAX_VALUE,ge=-Number.MAX_VALUE;for(const ve of K){const Me=t.ad([],ve,c),Ce=t.ae(Me);te=Math.min(te,Ce),ge=Math.max(ge,Ce)}return[pn(C,te,j.pitch,j._fov),pn(C,ge,j.pitch,j._fov)]}class Si extends t.E{constructor(c,A,E,M){super();const P=new t.a7({range:new t.a8(t.a5.fog.range),color:new t.a8(t.a5.fog.color),"color-use-theme":new t.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new t.a8(t.a5.fog["high-color"]),"high-color-use-theme":new t.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new t.a8(t.a5.fog["space-color"]),"space-color-use-theme":new t.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new t.a8(t.a5.fog["horizon-blend"]),"star-intensity":new t.a8(t.a5.fog["star-intensity"]),"vertical-range":new t.a8(t.a5.fog["vertical-range"])});this._transitionable=new t.a6(P,E,new Map(M)),this.set(c,M),this._transitioning=this._transitionable.untransitioned(),this._transform=A,this.properties=new t.ag(P),this.scope=E}get state(){const c=this._transform,A=c.projection.name==="globe",E=t.ah(c.zoom),M=this.properties.get("range"),P=[.5,3];return{range:A?[t.ai(P[0],M[0],E),t.ai(P[1],M[1],E)]:M,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,A,E={}){if(this._validate(zn,c,E))return;const M=t.h({},c);for(const P of Object.keys(t.a5.fog))M[P]===void 0&&(M[P]=t.a5.fog[P].default);this._options=M,this._transitionable.setTransitionOrValue(this._options,A)}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const A=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:t.af(nr,Fr,c))*A.a}getOpacityAtLatLng(c,A){return this._transform.projection.supportsFog?function(E,M,P){const j=t.ac.fromLngLat(M),K=P.elevation?P.elevation.getAtPointOrZero(j):0;return Vn(E,j.x,j.y,K,P)}(this.state,c,A):0}getOpacityForTile(c){if(!this._transform.projection.supportsFog)return[1,1];const A=this._transform.calculateFogTileMatrix(c.toUnwrapped());return Bi(this.state,A,0,0,t.aj,t.aj,this._transform)}getOpacityForBounds(c,A,E,M,P){return this._transform.projection.supportsFog?Bi(this.state,c,A,E,M,P,this._transform):[1,1]}getFovAdjustedRange(c){return this._transform.projection.supportsFog?Tn(this.state,c):[0,1]}isVisibleOnFrustum(c){if(!this._transform.projection.supportsFog)return!1;const A=[4,5,6,7];for(const E of A){const M=c.points[E];let P;if(M[2]>=0)P=M;else{const j=c.points[E-4];P=t.ak(j,M,j[2]/(j[2]-M[2]))}if(Vn(this.state,P[0],P[1],0,this._transform)>=_r)return!0}return!1}updateConfig(c){this._transitionable.setTransitionOrValue(this._options,new Map(c))}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,A,E){return(!E||E.validate!==!1)&&nt(this,c.call(_i,t.h({value:A,style:{glyphs:!0,sprite:!0},styleSpec:t.a5})))}}let Di,ds,Qi,Zt,$r=class extends t.E{constructor(C,c,A,E){super();const M=Di||(Di=new t.a7({density:new t.a8(t.a5.snow.density),intensity:new t.a8(t.a5.snow.intensity),color:new t.a8(t.a5.snow.color),opacity:new t.a8(t.a5.snow.opacity),vignette:new t.a8(t.a5.snow.vignette),"vignette-color":new t.a8(t.a5.snow["vignette-color"]),"center-thinning":new t.a8(t.a5.snow["center-thinning"]),direction:new t.a8(t.a5.snow.direction),"flake-size":new t.a8(t.a5.snow["flake-size"])}));this._transitionable=new t.a6(M,A,new Map(E)),this.set(C,E),this._transitioning=this._transitionable.untransitioned(),this.properties=new t.ag(M),this.scope=A}get state(){const C=this.properties.get("opacity"),c=this.properties.get("color"),A=this.properties.get("direction"),E=t.al(A[0]),M=-Math.max(t.al(A[1]),.01),P=[Math.cos(E)*Math.cos(M),Math.sin(E)*Math.cos(M),Math.sin(M)],j=this.properties.get("vignette"),K=this.properties.get("vignette-color");return K.a=j,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new t.am(c.r,c.g,c.b,c.a*C),direction:P,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:K}}get(){return this._transitionable.serialize()}set(C,c,A={}){if(this._validate(Ki,C,A))return;const E=t.h({},C);for(const M of Object.keys(t.a5.snow))E[M]===void 0&&(E[M]=t.a5.snow[M].default);this._options=E,this._transitionable.setTransitionOrValue(this._options,c)}updateConfig(C){this._transitionable.setTransitionOrValue(this._options,new Map(C))}updateTransitions(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(C){this.properties=this._transitioning.possiblyEvaluate(C)}_validate(C,c,A){return(!A||A.validate!==!1)&&nt(this,C.call(_i,t.h({value:c,style:{glyphs:!0,sprite:!0},styleSpec:t.a5})))}},kn=class extends t.E{constructor(C,c,A,E){super();const M=ds||(ds=new t.a7({density:new t.a8(t.a5.rain.density),intensity:new t.a8(t.a5.rain.intensity),color:new t.a8(t.a5.rain.color),opacity:new t.a8(t.a5.rain.opacity),vignette:new t.a8(t.a5.rain.vignette),"vignette-color":new t.a8(t.a5.rain["vignette-color"]),"center-thinning":new t.a8(t.a5.rain["center-thinning"]),direction:new t.a8(t.a5.rain.direction),"droplet-size":new t.a8(t.a5.rain["droplet-size"]),"distortion-strength":new t.a8(t.a5.rain["distortion-strength"])}));this._transitionable=new t.a6(M,A,new Map(E)),this.set(C,E),this._transitioning=this._transitionable.untransitioned(),this.properties=new t.ag(M),this.scope=A}get state(){const C=this.properties.get("opacity"),c=this.properties.get("color"),A=this.properties.get("direction"),E=t.al(A[0]),M=-Math.max(t.al(A[1]),.01),P=[Math.cos(E)*Math.cos(M),Math.sin(E)*Math.cos(M),Math.sin(M)],j=this.properties.get("vignette-color");return j.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new t.am(c.r,c.g,c.b,c.a*C),direction:P,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:j}}get(){return this._transitionable.serialize()}set(C,c,A={}){if(this._validate(Qs,C,A))return;const E=t.h({},C);for(const M of Object.keys(t.a5.rain))E[M]===void 0&&(E[M]=t.a5.rain[M].default);this._options=E,this._transitionable.setTransitionOrValue(this._options,c)}updateConfig(C){this._transitionable.setTransitionOrValue(this._options,new Map(C))}updateTransitions(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(C){this.properties=this._transitioning.possiblyEvaluate(C)}_validate(C,c,A){return(!A||A.validate!==!1)&&nt(this,C.call(_i,t.h({value:c,style:{glyphs:!0,sprite:!0},styleSpec:t.a5})))}};class vn extends t.E{constructor(c,A,E,M){super(),this.scope=E,this._options=c,this.properties=new t.ag(A),this._transitionable=new t.a6(A,E,new Map(M)),this._transitionable.setTransitionOrValue(c.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(c){this._transitionable.setTransitionOrValue(this._options.properties,new Map(c))}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(c,A){this._options=c,this._transitionable.setTransitionOrValue(c.properties,A)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class si{constructor(c,A,E){this.screenBounds=c,this.cameraPoint=E.getCameraPoint(),this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(c,A){let E,M;if(c instanceof t.P||typeof c[0]=="number"){const P=t.P.convert(c);E=[P],M=A.isPointAboveHorizon(P)}else{const P=t.P.convert(c[0]),j=t.P.convert(c[1]),K=P.add(j)._div(2);E=[P,j],M=t.ao(P,j).every(te=>A.isPointAboveHorizon(te))&&A.isPointAboveHorizon(K)}return new si(E,M,A)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return t.ao(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const A=this.screenBounds[0],E=this.screenBounds.length===1?this.screenBounds[0].add(new t.P(1,1)):this.screenBounds[1],M=t.ao(A,E,0,!1);return this.cameraPoint.y>E.y&&(this.cameraPoint.x>A.x&&this.cameraPoint.x<E.x?M.splice(3,0,this.cameraPoint):this.cameraPoint.x>=E.x?M[2]=this.cameraPoint:this.cameraPoint.x<=A.x&&(M[3]=this.cameraPoint)),t.ap(M,c)}bufferedCameraGeometryGlobe(c){const A=this.screenBounds[0],E=this.screenBounds.length===1?this.screenBounds[0].add(new t.P(1,1)):this.screenBounds[1],M=t.ao(A,E,c),P=this.cameraPoint.clone();switch(3*((P.y>A.y)+(P.y>E.y))+((P.x>A.x)+(P.x>E.x))){case 0:M[0]=P,M[4]=P.clone();break;case 1:M.splice(1,0,P);break;case 2:M[1]=P;break;case 3:M.splice(4,0,P);break;case 5:M.splice(2,0,P);break;case 6:M[3]=P;break;case 7:M.splice(3,0,P);break;case 8:M[2]=P}return M}containsTile(c,A,E,M=0){const P=c.queryPadding/A._pixelsPerMercatorPixel+1,j=E?this._bufferedCameraMercator(P,A):this._bufferedScreenMercator(P,A);let K=c.tileID.wrap+(j.unwrapped?M:0);const te=j.polygon.map(qe=>t.aq(c.tileTransform,qe,K));if(!t.ar(te,0,0,t.aj,t.aj))return;K=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?M:0);const ge=this.screenGeometryMercator.polygon.map(qe=>t.as(c.tileTransform,qe,K)),ve=ge.map(qe=>new t.P(qe[0],qe[1])),Me=A.getFreeCameraOptions().position||new t.ac(0,0,0),Ce=t.as(c.tileTransform,Me,K),Pe=ge.map(qe=>{const Ke=t.at(qe,qe,Ce);return t.au(Ke,Ke),new t.av(Ce,Ke)}),Qe=t.aw(c,1,A.zoom)*A._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:ve,tilespaceRays:Pe,bufferedTilespaceGeometry:te,bufferedTilespaceBounds:(je=t.ax(te),je.min.x=t.ay(je.min.x,0,t.aj),je.min.y=t.ay(je.min.y,0,t.aj),je.max.x=t.ay(je.max.x,0,t.aj),je.max.y=t.ay(je.max.y,0,t.aj),je),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:Qe};var je}_bufferedScreenMercator(c,A){const E=Wi(c);if(this._screenRaycastCache[E])return this._screenRaycastCache[E];{let M;return M=A.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),A):{polygon:this.bufferedScreenGeometry(c).map(P=>A.pointCoordinate3D(P)),unwrapped:!0},this._screenRaycastCache[E]=M,M}}_bufferedCameraMercator(c,A){const E=Wi(c);if(this._cameraRaycastCache[E])return this._cameraRaycastCache[E];{let M;return M=A.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),A):{polygon:this.bufferedCameraGeometry(c).map(P=>A.pointCoordinate3D(P)),unwrapped:!0},this._cameraRaycastCache[E]=M,M}}_projectAndResample(c,A){const E=function(P,j){const K=t.az([],j.pixelMatrix,j.globeMatrix),te=[0,-t.aB,0,1],ge=[0,t.aB,0,1],ve=[0,0,0,1];t.aA(te,te,K),t.aA(ge,ge,K),t.aA(ve,ve,K);const Me=new t.P(te[0]/te[3],te[1]/te[3]),Ce=new t.P(ge[0]/ge[3],ge[1]/ge[3]),Pe=t.aC(P,Me)&&te[3]<ve[3],Qe=t.aC(P,Ce)&&ge[3]<ve[3];if(!Pe&&!Qe)return null;const je=function(Vt,It,Mt){for(let Pt=1;Pt<Vt.length;Pt++){const dr=Yn(It.pointCoordinate3D(Vt[Pt-1]).x),sr=Yn(It.pointCoordinate3D(Vt[Pt]).x);if(Mt<0){if(dr<sr)return{idx:Pt,t:-dr/(sr-1-dr)}}else if(sr<dr)return{idx:Pt,t:(1-dr)/(sr+1-dr)}}return null}(P,j,Pe?-1:1);if(!je)return null;const{idx:qe,t:Ke}=je;let lt=qe>1?qn(P.slice(0,qe),j):[],dt=qe<P.length?qn(P.slice(qe),j):[];lt=lt.map(Vt=>new t.P(Yn(Vt.x),Vt.y)),dt=dt.map(Vt=>new t.P(Yn(Vt.x),Vt.y));const vt=[...lt];vt.length===0&&vt.push(dt[dt.length-1]);const Tt=t.ai(vt[vt.length-1].y,(dt.length===0?lt[0]:dt[0]).y,Ke);let Dt;return Dt=Pe?[new t.P(0,Tt),new t.P(0,0),new t.P(1,0),new t.P(1,Tt)]:[new t.P(1,Tt),new t.P(1,1),new t.P(0,1),new t.P(0,Tt)],vt.push(...Dt),dt.length===0?vt.push(lt[0]):vt.push(...dt),{polygon:vt.map(Vt=>new t.ac(Vt.x,Vt.y)),unwrapped:!1}}(c,A);if(E)return E;const M=function(P,j){let K=!1,te=-1/0,ge=0;for(let Me=0;Me<P.length-1;Me++)P[Me].x>te&&(te=P[Me].x,ge=Me);for(let Me=0;Me<P.length-1;Me++){const Ce=(ge+Me)%(P.length-1),Pe=P[Ce],Qe=P[Ce+1];Math.abs(Pe.x-Qe.x)>.5&&(Pe.x<Qe.x?(Pe.x+=1,Ce===0&&(P[P.length-1].x+=1)):(Qe.x+=1,Ce+1===P.length-1&&(P[0].x+=1)),K=!0)}const ve=t.aD(j.center.lng);return K&&ve<Math.abs(ve-1)&&P.forEach(Me=>{Me.x-=1}),{polygon:P,unwrapped:K}}(qn(c,A).map(P=>new t.P(Yn(P.x),P.y)),A);return{polygon:M.polygon.map(P=>new t.ac(P.x,P.y)),unwrapped:M.unwrapped}}}function qn(C,c){return t.aE(C,A=>{const E=c.pointCoordinate3D(A);A.x=E.x,A.y=E.y},1/256)}function Yn(C){return C<0?1+C%1:C%1}function Wi(C){return 100*C|0}function us(C,c,A,E,M){const P=function(K,te){if(K)return M(K);if(te){if(C.url&&te.tiles&&C.tiles&&delete C.tiles,te.variants){if(!Array.isArray(te.variants))return M(new Error("variants must be an array"));for(const ve of te.variants){if(ve==null||typeof ve!="object"||ve.constructor!==Object)return M(new Error("variant must be an object"));if(!Array.isArray(ve.capabilities))return M(new Error("capabilities must be an array"));if(ve.capabilities.length===1&&ve.capabilities[0]==="meshopt"){te=t.h(te,ve);break}}}const ge=t.aF(t.h({},te,C),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);ge.tiles=c.canonicalizeTileset(ge,C.url),M(null,ge)}},j=function(K,te,ge){if(!K)return null;if(!te&&!ge)return K;ge=ge||K.worldview_default;const ve=Object.values(K.language||{});if(ve.length===0)return null;const Me=Object.values(K.worldview||{});if(Me.length===0)return null;const Ce=ve.every(Qe=>Qe===te),Pe=Me.every(Qe=>Qe===ge);return Ce&&Pe?K:te in(K.language_options||{})||ge in(K.worldview_options||{})?null:K.language_options&&K.worldview_options?K:null}(C.data,A,E);return j?t.q.frame(()=>P(null,j)):C.url?t.n(c.transformRequest(c.normalizeSourceURL(C.url,null,A,E),t.R.Source),P):t.q.frame(()=>{const{data:K,...te}=C;P(null,te)})}function xs(C,c){const A=Math.pow(2,c.z),E=Math.floor(t.aD(C.getWest())*A),M=Math.floor(t.aH(C.getNorth())*A),P=Math.ceil(t.aD(C.getEast())*A),j=Math.ceil(t.aH(C.getSouth())*A);return c.x>=E&&c.x<P&&c.y>=M&&c.y<j}class zi{constructor(c,A,E){this.bounds=c?t.aG.convert(this.validateBounds(c)):null,this.minzoom=A||0,this.maxzoom=E||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}addExtraBounds(c){if(c){this.extraBounds||(this.extraBounds=[]);for(const A of c)this.extraBounds.push(t.aG.convert(this.validateBounds(A)))}}contains(c){if(c.z>this.maxzoom||c.z<this.minzoom||this.bounds&&!xs(this.bounds,c))return!1;if(!this.extraBounds)return!0;for(const A of this.extraBounds)if(xs(A,c))return!0;return!1}static fromTileJSON(c){if(!c.bounds&&!c.extra_bounds)return null;const A=new zi(c.bounds,c.minzoom,c.maxzoom);return A.addExtraBounds(c.extra_bounds),A}}class uo extends t.E{constructor(c,A,E,M){if(super(),this.id=c,this.dispatcher=E,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.h(this,t.aF(A,["url","scheme","tileSize","promoteId"])),this._options=t.h({type:"vector"},A),this._collectResourceTiming=!!A.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M),this._tileWorkers={},this._deduped=new t.aI}load(c){this._loaded=!1,this.fire(new t.A("dataloading",{dataType:"source"}));const A=Array.isArray(this.map._language)?this.map._language.join():this.map._language,E=this.map.getWorldview();this._tileJSONRequest=us(this._options,this.map._requestManager,A,E,(M,P)=>{if(this._tileJSONRequest=null,this._loaded=!0,M)A&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${A}`),E&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${E}`),this.fire(new t.z(M));else if(P){if(t.h(this,P),this.hasWorldviews=!!P.worldview_options,P.worldview_default&&(this.worldviewDefault=P.worldview_default),P.vector_layers){this.vectorLayers=P.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const j of P.vector_layers)this.vectorLayerIds.push(j.id),P.worldview&&P.worldview[j.source]&&this.localizableLayerIds.add(j.id)}this.tileBounds=zi.fromTileJSON(P),J(P.tiles,this.map._requestManager._customAccessToken),this.fire(new t.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.A("data",{dataType:"source",sourceDataType:"content"}))}c&&c(M)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest();const c=t.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(c))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(c){this.cancelTileJSONRequest()}serialize(){return t.h({},this._options)}loadTile(c,A){const E=c.tileID.canonical.url(this.tiles,this.scheme),M=this.map._requestManager.normalizeTileURL(E),P=this.map._requestManager.transformRequest(M,t.R.Tile),j=this.map.style?this.map.style.getLut(this.scope):null,K=j?{image:j.image.clone()}:null,te={request:P,data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,lut:K,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:t.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:c.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor(),worldview:this.map.getWorldview()||this.worldviewDefault};if(this.hasWorldviews&&t.j(E)&&(te.localizableLayerIds=this.localizableLayerIds),te.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=A:c.request=c.actor.send("reloadTile",te,ge.bind(this));else if(c.actor=this._tileWorkers[M]=this._tileWorkers[M]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",te,ge.bind(this),void 0,!0);else{const ve=t.aJ.call({deduped:this._deduped},te,(Me,Ce)=>{Me||!Ce?ge.call(this,Me):(te.data={cacheControl:Ce.cacheControl,expires:Ce.expires,rawData:Ce.rawData.slice(0)},c.actor&&c.actor.send("loadTile",te,ge.bind(this),void 0,!0))},!0);c.request={cancel:ve}}function ge(ve,Me){return delete c.request,c.aborted?A(null):ve&&ve.status!==404?A(ve):(Me&&Me.resourceTiming&&(c.resourceTiming=Me.resourceTiming),this.map._refreshExpiredTiles&&Me&&c.setExpiryData(Me),c.loadVectorData(Me,this.map.painter),t.aK(this.dispatcher),A(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(c,A){c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope}),c.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ji extends t.E{constructor(c,A,E,M){super(),this.id=c,this.dispatcher=E,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.h({type:"raster"},A),t.h(this,t.aF(A,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new t.A("dataloading",{dataType:"source"}));const A=this.map.getWorldview();this._tileJSONRequest=us(this._options,this.map._requestManager,null,A,(E,M)=>{this._tileJSONRequest=null,this._loaded=!0,E?this.fire(new t.z(E)):M&&(t.h(this,M),M.raster_layers&&(this.rasterLayers=M.raster_layers,this.rasterLayerIds=this.rasterLayers.map(P=>P.id)),this.tileBounds=zi.fromTileJSON(M),J(M.tiles),this.fire(new t.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.A("data",{dataType:"source",sourceDataType:"content"}))),c&&c(E)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest();const c=t.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(c))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(c){this.cancelTileJSONRequest()}serialize(){return t.h({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,A){const E=t.q.devicePixelRatio>=2,M=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),E,this.tileSize);c.request=t.o(this.map._requestManager.transformRequest(M,t.R.Tile),(P,j,K,te)=>(delete c.request,c.aborted?(c.state="unloaded",A(null)):P?(c.state="errored",A(P)):j?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:K,expires:te}),c.setTexture(j,this.map.painter),c.state="loaded",t.aK(this.dispatcher),void A(null)):A(null)))}abortTile(c,A){c.request&&(c.request.cancel(),delete c.request),A&&A()}unloadTile(c,A){c.texture&&c.texture instanceof t.T?(c.destroy(!0),c.texture&&c.texture instanceof t.T&&this.map.painter.saveTileTexture(c.texture)):c.destroy(),A&&A()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ks extends Ji{constructor(c,A,E,M){super(c,A,E,M),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=t.h({type:"raster-array"},A)}triggerRepaint(c){const A=this.map.painter._terrain,E=this.map.style.getSourceCache(this.id);A&&A.enabled&&E&&A._clearRenderCacheForTile(E.id,c.tileID),this.map.triggerRepaint()}loadTile(c,A){const E=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),M=this.map._requestManager.transformRequest(E,t.R.Tile),P={request:M,uid:c.uid,tileID:c.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};c.source=this.id,c.scope=this.scope,c.requestParams=M,c.actor||(c.actor=this.dispatcher.getActor());const j=(K,te,ge,ve)=>{if(delete c.request,c.aborted)return c.state="unloaded",A(null);if(K)return K.name==="AbortError"?void 0:(c.state="errored",A(K));if(this.map._refreshExpiredTiles&&te&&c.setExpiryData({cacheControl:ge,expires:ve}),this.partial)c.state="empty";else{if(!te)return A(null);c.state="loaded",c._isHeaderLoaded=!0,c._mrt=te}A(null)};c.request=this.partial?c.fetchHeader(void 0,j.bind(this)):c.actor.send("loadTile",P,j.bind(this),void 0,!0)}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(c,A){const E=c.texturePerLayer;if(c.flushAllQueues(),E.size){c.destroy(!0);for(const M of E.values())this.map.painter.saveTileTexture(M)}else c.destroy()}prepareTile(c,A,E,M){c._isHeaderLoaded&&(c.state!=="empty"&&(c.state="reloading"),c.fetchBand(A,E,M,(P,j)=>{if(P)return c.state="errored",this.fire(new t.z(P)),void this.triggerRepaint(c);j&&(c._isHeaderLoaded=!0,c.setTexturePerLayer(E,j,this.map.painter),c.state="loaded",this.triggerRepaint(c))}))}getInitialBand(c){if(!this.rasterLayers)return 0;const A=this.rasterLayers.find(({id:P})=>P===c),E=A&&A.fields,M=E&&E.bands&&E.bands;return M?M[0]:0}getTextureDescriptor(c,A,E){if(!c)return;const M=A.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!M)return;let P=null;A instanceof t.aN?P=A.paint.get("raster-array-band"):A instanceof t.aO&&(P=A.paint.get("raster-particle-array-band"));const j=P||this.getInitialBand(M);if(j==null)return;if(!c.textureDescriptorPerLayer.get(A.id))return void this.prepareTile(c,M,A.id,j);if(c.updateNeeded(A.id,j)&&!E)return;const K=c.textureDescriptorPerLayer.get(A.id);return Object.assign({},K,{texture:c.texturePerLayer.get(A.id)})}getImages(c,A){const E=new Map;for(const M of c)for(const P of A){const[j,K]=P.split("/"),te=M.getLayer(j);if(!te||!te.hasBand(K)||!te.hasDataForBand(K))continue;const{bytes:ge,tileSize:ve,buffer:Me}=te.getBandView(K),Ce=ve+2*Me,Pe={data:new t.r({width:Ce,height:Ce},ge),pixelRatio:2,sdf:!1,usvg:!1,version:0};E.set(P,Pe)}return E}}const Co={vector:uo,raster:Ji,"raster-dem":class extends Ji{constructor(C,c,A,E){super(C,c,A,E),this.type="raster-dem",this.maxzoom=22,this._options=t.h({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(C,c){const A=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function E(M,P){M&&(C.state="errored",c(M)),P&&(C.dem=P,C.dem.onDeserialize(),C.needsHillshadePrepare=!0,C.needsDEMTextureUpload=!0,C.state="loaded",c(null))}C.request=t.o(this.map._requestManager.transformRequest(A,t.R.Tile),(function(M,P,j,K){if(delete C.request,C.aborted)C.state="unloaded",c(null);else if(M)C.state="errored",c(M);else if(P){this.map._refreshExpiredTiles&&C.setExpiryData({cacheControl:j,expires:K});const te=ImageBitmap&&P instanceof ImageBitmap&&t.t(),ge=1-(P.width-t.aL(P.width))/2;ge<1||C.neighboringTiles||(C.neighboringTiles=this._getNeighboringTiles(C.tileID));const ve=te?P:t.q.getImageData(P,ge),Me={uid:C.uid,tileID:C.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:ve,encoding:this.encoding,padding:ge};C.actor&&C.state!=="expired"||(C.actor=this.dispatcher.getActor(),C.actor.send("loadTile",Me,E.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(C){const c=C.canonical,A=Math.pow(2,c.z),E=(c.x-1+A)%A,M=c.x===0?C.wrap-1:C.wrap,P=(c.x+1+A)%A,j=c.x+1===A?C.wrap+1:C.wrap,K={};return K[new t.aM(C.overscaledZ,M,c.z,E,c.y).key]={backfilled:!1},K[new t.aM(C.overscaledZ,j,c.z,P,c.y).key]={backfilled:!1},c.y>0&&(K[new t.aM(C.overscaledZ,M,c.z,E,c.y-1).key]={backfilled:!1},K[new t.aM(C.overscaledZ,C.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},K[new t.aM(C.overscaledZ,j,c.z,P,c.y-1).key]={backfilled:!1}),c.y+1<A&&(K[new t.aM(C.overscaledZ,M,c.z,E,c.y+1).key]={backfilled:!1},K[new t.aM(C.overscaledZ,C.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},K[new t.aM(C.overscaledZ,j,c.z,P,c.y+1).key]={backfilled:!1}),K}},"raster-array":ks,geojson:class extends t.E{constructor(C,c,A,E){super(),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=A.getActor(),this.setEventedParent(E),this._data=c.data,this._options=t.h({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.minzoom!==void 0&&(this.minzoom=c.minzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const M=t.aj/this.tileSize;this.workerOptions=t.h({source:this.id,scope:this.scope,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*M,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*M,extent:t.aj,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:t.aj,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*M,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter,dynamic:c.dynamic},c.workerOptions)}onAdd(C){this.map=C,this.setData(this._data)}setData(C){return this._data=C,this._updateWorkerData(),this}updateData(C){if(!this._options.dynamic)return this.fire(new t.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof C!="string"&&(C.type==="Feature"&&(C={type:"FeatureCollection",features:[C]}),C.type!=="FeatureCollection"))return this.fire(new t.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof C!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const c=new Map;for(const A of this._data.features)c.set(A.id,A);for(const A of C.features)c.set(A.id,A);this._data.features=[...c.values()]}else this._data=C;return this._updateWorkerData(!0),this}getClusterExpansionZoom(C,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id,scope:this.scope},c),this}getClusterChildren(C,c){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id,scope:this.scope},c),this}getClusterLeaves(C,c,A,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:C,limit:c,offset:A},E),this}_updateWorkerData(C=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.A("dataloading",{dataType:"source"})),this._loaded=!1;const c=t.h({append:C},this.workerOptions);c.scope=this.scope;const A=this._data;typeof A=="string"?(c.request=this.map._requestManager.transformRequest(t.q.resolveURL(A),t.R.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(A),this._pendingLoad=this.actor.send(`${this.type}.loadData`,c,(E,M)=>{if(this._loaded=!0,this._pendingLoad=null,E)this.fire(new t.z(E));else{const P={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&M&&M.resourceTiming&&M.resourceTiming[this.id]&&(P.resourceTiming=M.resourceTiming[this.id]),C&&(this._partialReload=!0),this.fire(new t.A("data",P)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(C),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const C=t.C(this.id,this.scope);this.map.style.clearSource(C),this._updateWorkerData()}loadTile(C,c){const A=C.actor?"reloadTile":"loadTile";C.actor=this.actor;const E=this.map.style?this.map.style.getLut(this.scope):null,M=E?{image:E.image.clone()}:null,P=this._partialReload,j={type:this.type,uid:C.uid,tileID:C.tileID,tileZoom:C.tileZoom,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:M,scope:this.scope,pixelRatio:t.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:C.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:P,worldview:this.map.getWorldview()};C.request=this.actor.send(A,j,(K,te)=>P&&!te?(C.state="loaded",c(null)):(delete C.request,C.destroy(),C.aborted?c(null):K?c(K):(C.loadVectorData(te,this.map.painter,A==="reloadTile"),c(null))),void 0,A==="loadTile")}abortTile(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0}unloadTile(C,c){this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id,scope:this.scope}),C.destroy()}onRemove(C){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.h({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends t.aP{constructor(C,c,A,E){super(C,c,A,E),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const C=this.options;this.urls=[];for(const c of C.urls)this.urls.push(this.map._requestManager.transformRequest(c,t.R.Source).url);t.aQ(this.urls,(c,A)=>{this._loaded=!0,c?this.fire(new t.z(c)):A&&(this.video=A,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(C){if(this.video){const c=this.video.seekable;C<c.start(0)||C>c.end(0)?this.fire(new t.z(new t.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=C}}getVideo(){return this.video}onAdd(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const C=this.map.painter.context,c=C.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new t.T(C,this.video,c.RGBA8),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(C)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:t.aP,model:class extends t.E{constructor(C,c,A,E){super(),this.id=C,this.type="model",this.models=[],this._loaded=!1,this._options=c}load(){const C=[];for(const c in this._options.models){const A=this._options.models[c],E=t.aS(this.map._requestManager.transformRequest(A.uri,t.R.Model).url).then(M=>{if(!M)return;const P=t.aT(M),j=new t.aU(c,A.position,A.orientation,P);j.computeBoundsAndApplyParent(),this.models.push(j)}).catch(M=>{this.fire(new t.z(new Error(`Could not load model ${c} from ${A.uri}: ${M.message}`)))});C.push(E)}Promise.allSettled(C).then(()=>{this._loaded=!0,this.fire(new t.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(c=>{this._loaded=!0,this.fire(new t.z(new Error(`Could not load models: ${c.message}`)))})}onAdd(C){this.map=C,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(C,c){}serialize(){return this._options}},"batched-model":class extends t.E{constructor(C,c,A,E){super(),this.type="batched-model",this.id=C,this.tileSize=512,this._options=c,this.tiles=this._options.tiles,this.maxzoom=c.maxzoom||19,this.minzoom=c.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=A,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(E)}onAdd(C){this.map=C,this.load()}reload(){this.cancelTileJSONRequest();const C=t.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(C))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(C){this._loaded=!1,this.fire(new t.A("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map.getWorldview();this._tileJSONRequest=us(this._options,this.map._requestManager,c,A,(E,M)=>{this._tileJSONRequest=null,this._loaded=!0,E?(c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),A&&A.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new t.z(E))):M&&(t.h(this,M),M.bounds&&(this.tileBounds=new zi(M.bounds,this.minzoom,this.maxzoom)),J(M.tiles,this.map._requestManager._customAccessToken),this.fire(new t.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.A("data",{dataType:"source",sourceDataType:"content"}))),C&&C(E)})}hasTransition(){return!1}hasTile(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)}loaded(){return this._loaded}loadTile(C,c){const A=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(A,t.R.Tile),data:void 0,uid:C.uid,tileID:C.tileID,tileZoom:C.tileZoom,zoom:C.tileID.overscaledZ,tileSize:this.tileSize*C.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:C.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:t.q.devicePixelRatio,promoteId:this.promoteId};if(C.actor&&C.state!=="expired")if(C.state==="loading")C.reloadCallback=c;else{if(C.buckets){const P=Object.values(C.buckets);for(const j of P)j.dirty=!0;return void(C.state="loaded")}C.request=C.actor.send("reloadTile",E,M.bind(this))}else C.actor=this.dispatcher.getActor(),C.request=C.actor.send("loadTile",E,M.bind(this),void 0,!0);function M(P,j){return C.aborted?c(null):P&&P.status!==404?c(P):(this.map._refreshExpiredTiles&&j&&C.setExpiryData(j),C.loadModelData(j,this.map.painter),C.state="loaded",void c(null))}}serialize(){return t.h({},this._options)}},canvas:class extends t.aP{constructor(C,c,A,E){super(C,c,A,E),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(M=>!Array.isArray(M)||M.length!==2||M.some(P=>typeof P!="number"))||this.fire(new t.z(new t.V(`sources.${C}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.z(new t.V(`sources.${C}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new t.z(new t.V(`sources.${C}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new t.z(new t.V(`sources.${C}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.z(new t.V(`sources.${C}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()}onRemove(C){this.pause()}prepare(){let C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?!C&&!this._playing||this.texture instanceof t.aR||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.T(c,this.canvas,c.gl.RGBA8,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const C of[this.canvas.width,this.canvas.height])if(isNaN(C)||C<=0)return!0;return!1}},custom:class extends t.E{constructor(C,c,A,E){super(),this.id=C,this.type="custom",this._dataType="raster",this._dispatcher=A,this._implementation=c,this.setEventedParent(E),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new t.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new zi(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),t.h(this,t.aF(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.aF(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(C){this.map=C,this._loaded=!1,this.fire(new t.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(C),this.load()}onRemove(C){this._implementation.onRemove&&this._implementation.onRemove(C)}hasTile(C){if(this._implementation.hasTile){const{x:c,y:A,z:E}=C.canonical;return this._implementation.hasTile({x:c,y:A,z:E})}return!this.tileBounds||this.tileBounds.contains(C.canonical)}loadTile(C,c){const{x:A,y:E,z:M}=C.tileID.canonical,P=new AbortController;C.request=Promise.resolve(this._implementation.loadTile({x:A,y:E,z:M},{signal:P.signal})).then((function(j){return delete C.request,C.aborted?(C.state="unloaded",c(null)):j===void 0?(C.state="errored",c(null)):j===null?(this.loadTileData(C,{width:this.tileSize,height:this.tileSize,data:null}),C.state="loaded",c(null)):function(K){return K instanceof ImageData||K instanceof HTMLCanvasElement||K instanceof ImageBitmap||K instanceof HTMLImageElement}(j)?(this.loadTileData(C,j),C.state="loaded",void c(null)):(C.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(j=>{j.name!=="AbortError"&&(C.state="errored",c(j))}),C.request.cancel=()=>P.abort()}loadTileData(C,c){C.setTexture(c,this.map.painter)}unloadTile(C,c){if(C.texture&&C.texture instanceof t.T?(C.destroy(!0),C.texture&&C.texture instanceof t.T&&this.map.painter.saveTileTexture(C.texture)):C.destroy(),this._implementation.unloadTile){const{x:A,y:E,z:M}=C.tileID.canonical;this._implementation.unloadTile({x:A,y:E,z:M})}c&&c()}abortTile(C,c){C.request&&C.request.cancel&&(C.request.cancel(),delete C.request),c&&c()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(C=>({x:C.canonical.x,y:C.canonical.y,z:C.canonical.z}))}_clearTiles(){const C=t.C(this.id,this.scope);this.map.style.clearSource(C)}_update(){this.fire(new t.A("data",{dataType:"source",sourceDataType:"content"}))}}},Do=function(C,c,A,E){const M=new Co[c.type](C,c,A,E);if(M.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${M.id}`);return t.aV(["load","abort","unload","serialize","prepare"],M),M};function ba(C,c,A=""){return`${A}:${c.id||""}:${c.layer.id}:${function(E){if("layerId"in E)return`layer:${E.layerId}`;{const{featuresetId:M,importId:P}=E;return`featureset:${M}${P?`:import:${P}`:""}`}}(C.target)}`}function il(C,c,A,E=""){if(C.uniqueFeatureID){const M=ba(C,c,E);if(A.has(M))return!0;A.add(M)}return!1}function Ma(C,c,A,E,M=!1){const P=c.sourceCache.transform,j=c.sourceCache.tilesIn(C,c.has3DLayers,M);j.sort(Gl);const K=[];for(const te of j){const ge=te.tile.queryRenderedFeatures(c,te,A,E,P,M);Object.keys(ge).length&&K.push({wrappedTileID:te.tile.tileID.wrapped().key,queryResults:ge})}return K.length===0?{}:function(te){const ge={},ve={};for(const Me of te){const Ce=Me.queryResults,Pe=Me.wrappedTileID,Qe=ve[Pe]=ve[Pe]||{};for(const je in Ce){const qe=Ce[je],Ke=Qe[je]=Qe[je]||{},lt=ge[je]=ge[je]||[];for(const dt of qe)Ke[dt.featureIndex]||(Ke[dt.featureIndex]=!0,lt.push(dt))}}return ge}(K)}function Uo(C,c,A,E,M,P){const j={},K=E.queryRenderedSymbols(C),te=[];for(const ge of Object.keys(K).map(Number))te.push(M[ge]);te.sort(Gl);for(const ge of te){const ve=ge.featureIndex.lookupSymbolFeatures(K[ge.bucketInstanceId],ge.bucketIndex,ge.sourceLayerIndex,c,A,P);for(const Me in ve){const Ce=j[Me]=j[Me]||[],Pe=ve[Me];Pe.sort((Qe,je)=>{const qe=ge.featureSortOrder;if(qe){const Ke=qe.indexOf(Qe.featureIndex);return qe.indexOf(je.featureIndex)-Ke}return je.featureIndex-Qe.featureIndex});for(const Qe of Pe)Ce.push(Qe)}}return j}function xa(C,c){const A=C.getRenderableIds().map(P=>C.getTileByID(P)),E=[],M={};for(let P=0;P<A.length;P++){const j=A[P],K=j.tileID.canonical.key;M[K]||(M[K]=!0,j.querySourceFeatures(E,c))}return E}function Gl(C,c){const A=C.tileID,E=c.tileID;return A.overscaledZ-E.overscaledZ||A.canonical.y-E.canonical.y||A.wrap-E.wrap||A.canonical.x-E.canonical.x}function ro(C,c){const A={};if(!c)return A;for(const E of C){const M=E.layerIds.map(P=>c.getLayer(P)).filter(Boolean);if(M.length!==0){E.layers=M,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(P=>M.filter(j=>j.id===P)[0]));for(const P of M)A[P.fqid]=E}}return A}const Hs=32,zo=33,wl=new Uint16Array(8184);for(let C=0;C<2046;C++){let c=C+2,A=0,E=0,M=0,P=0,j=0,K=0;for(1&c?M=P=j=Hs:A=E=K=Hs;(c>>=1)>1;){const ge=A+M>>1,ve=E+P>>1;1&c?(M=A,P=E,A=j,E=K):(A=M,E=P,M=j,P=K),j=ge,K=ve}const te=4*C;wl[te+0]=A,wl[te+1]=E,wl[te+2]=M,wl[te+3]=P}const Ha=new Uint16Array(2178),Fa=new Uint8Array(1089),Pa=new Uint16Array(1089);function wa(C){return C===0?-.03125:C===32?.03125:0}const Sl={type:2,extent:t.aj,loadGeometry:()=>[[new t.P(0,0),new t.P(t.aj+1,0),new t.P(t.aj+1,t.aj+1),new t.P(0,t.aj+1),new t.P(0,0)]]};class Jl{constructor(c,A,E,M,P,j){this.tileID=c,this.uid=t.a$(),this.uses=0,this.tileSize=A,this.tileZoom=E,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=P,M&&M.style&&(this._lastUpdatedBrightness=M.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",M&&M.transform&&(this.projection=M.transform.projection),this.worldview=j}registerFadeDuration(c){const A=c+this.timeAdded;A<t.q.now()||this.fadeEndTime&&A<this.fadeEndTime||(this.fadeEndTime=A)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=t.aW(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(c,A,E){if(this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=ro(c.buckets,A.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const P=this.buckets[M];if(P instanceof t.b1){if(this.hasSymbolBuckets=!0,!E)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const P=this.buckets[M];if(P instanceof t.b1&&P.hasRTLText){this.hasRTLText=!0,t.b2();break}}this.queryPadding=0;for(const M in this.buckets){const P=this.buckets[M],j=A.style.getOwnLayer(M);if(!j)continue;const K=j.queryRadius(P);this.queryPadding=Math.max(this.queryPadding,K)}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage),c.lineAtlas&&(this.lineAtlas=c.lineAtlas),this._lastUpdatedBrightness=c.brightness}else this.collisionBoxArray=new t.b0}unloadVectorData(){if(this.hasData()){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(c,A,E){c&&(c.resourceTiming&&(this.resourceTiming=c.resourceTiming),this.buckets=Object.assign({},this.buckets,ro(c.buckets,A.style)),c.featureIndex&&(this.latestFeatureIndex=c.featureIndex))}getBucket(c){return this.buckets[c.fqid]}upload(c){for(const M in this.buckets){const P=this.buckets[M];P.uploadPending()&&P.upload(c)}const A=c.gl,E=this.imageAtlas;E&&!E.uploaded&&(this.imageAtlasTexture=new t.T(c,E.image,A.RGBA8,{useMipmap:!!E.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new t.T(c,this.glyphAtlasImage,A.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new t.T(c,this.lineAtlas.image,A.R8),this.lineAtlas.uploaded=!0)}prepare(c,A,E){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture,E),!A||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const M=A.style.getBrightness();(this._lastUpdatedBrightness||M)&&(this._lastUpdatedBrightness&&M&&Math.abs(this._lastUpdatedBrightness-M)<.001||(this.updateBuckets(A,this._lastUpdatedBrightness!==M),this._lastUpdatedBrightness=M))}queryRenderedFeatures(c,A,E,M,P,j){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const K=function(te,ge){const ve=t.bn([],[.5*te.width,.5*-te.height,1]);return t.bo(ve,ve,[1,-1,0]),t.az(ve,ve,te.calculateProjMatrix(ge.toUnwrapped())),Float32Array.from(ve)}(P,this.tileID);return this.latestFeatureIndex.query(c,{tilespaceGeometry:A,pixelPosMatrix:K,transform:M,availableImages:E,tileTransform:this.tileTransform,worldview:this.worldview})}querySourceFeatures(c,A){const E=this.latestFeatureIndex;if(!E||!E.rawTileData)return;const M=E.loadVTLayers(),P=A?A.sourceLayer:"",j=M._geojsonTileLayer||M[P];if(!j)return;const K=t.b3(A&&A.filter),{z:te,x:ge,y:ve}=this.tileID.canonical,Me={z:te,x:ge,y:ve};for(let Ce=0;Ce<j.length;Ce++){const Pe=j.feature(Ce);if(K.needGeometry){const qe=t.b4(Pe,!0);if(!K.filter(new t.aa(this.tileID.overscaledZ,{worldview:this.worldview}),qe,this.tileID.canonical))continue}else if(!K.filter(new t.aa(this.tileID.overscaledZ,{worldview:this.worldview}),Pe))continue;const Qe=E.getId(Pe,P),je=new t.b5(Pe,te,ge,ve,Qe);je.tile=Me,c.push(je)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(c){const A=this.expirationTime;if(c.cacheControl){const E=t.b6(c.cacheControl);E["max-age"]&&(this.expirationTime=Date.now()+1e3*E["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const E=Date.now();let M=!1;if(this.expirationTime>E)M=!1;else if(A)if(this.expirationTime<A)M=!0;else{const P=this.expirationTime-A;P?this.expirationTime=E+Math.max(P,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(c){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&c&&this.updateBuckets(c)}updateBuckets(c,A){if(!this.latestFeatureIndex||!c.style)return;const E=this.latestFeatureIndex.loadVTLayers(),M=c.style.listImages(),P=c.style.getBrightness();for(const j in this.buckets){if(!c.style.hasLayer(j))continue;const K=this.buckets[j],te=K.layers[0],ge=te.sourceLayer||"_geojsonTileLayer",ve=E[ge],Me=c.style.getLayerSourceCache(te);let Ce={};Me&&(Ce=Me._state.getState(ge,void 0));const Pe=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Qe=Object.keys(Ce).length>0&&!A;Qe&&!K.stateDependentLayers.length&&!A||K.update(Ce,ve,M,Pe,Qe?K.stateDependentLayers:K.layers,A,P),(K instanceof t.b7||K instanceof t.b8)&&c._terrain&&c._terrain.enabled&&Me&&K.uploadPending()&&c._terrain._clearRenderCacheForTile(Me.id,this.tileID);const je=c&&c.style&&c.style.getOwnLayer(j);je&&(this.queryPadding=Math.max(this.queryPadding,je.queryRadius(K)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=t.q.now()+c}setTexture(c,A){const E=A.context,M=E.gl;this.texture=this.texture||A.getTileTexture(c.width),this.texture&&this.texture instanceof t.T?this.texture.update(c):(this.texture=new t.T(E,c,M.RGBA8,{useMipmap:!0}),this.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE))}setDependencies(c,A){const E={};for(const M of A)E[M]=!0;this.dependencies[c]=E}hasDependency(c,A){for(const E of c){const M=this.dependencies[E];if(M){for(const P of A)if(M[P])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(c,A){if(!A||A.name==="mercator"||this._tileDebugBuffer)return;const E=t.b9(Sl,this.tileID.canonical,this.tileTransform)[0],M=new t.ba,P=new t.bb;for(let j=0;j<E.length;j++){const{x:K,y:te}=E[j];M.emplaceBack(K,te),P.emplaceBack(j)}P.emplaceBack(0),this._tileDebugIndexBuffer=c.createIndexBuffer(P),this._tileDebugBuffer=c.createVertexBuffer(M,t.bc.members),this._tileDebugSegments=t.bd.simpleSegment(0,0,M.length,P.length)}_makeTileBoundsBuffers(c,A){if(this._tileBoundsBuffer||!A||A.name==="mercator")return;const E=t.b9(Sl,this.tileID.canonical,this.tileTransform)[0];let M,P;if(this.isRaster){const j=function(K,te){const ge=t.aW(K,te),ve=Math.pow(2,K.z);for(let qe=0;qe<zo;qe++)for(let Ke=0;Ke<zo;Ke++){const lt=t.aX((K.x+(Ke+wa(Ke))/Hs)/ve),dt=t.aY((K.y+(qe+wa(qe))/Hs)/ve),vt=te.project(lt,dt),Tt=qe*zo+Ke;Ha[2*Tt+0]=Math.round((vt.x*ge.scale-ge.x)*t.aj),Ha[2*Tt+1]=Math.round((vt.y*ge.scale-ge.y)*t.aj)}Fa.fill(0),Pa.fill(0);for(let qe=2045;qe>=0;qe--){const Ke=4*qe,lt=wl[Ke+0],dt=wl[Ke+1],vt=wl[Ke+2],Tt=wl[Ke+3],Dt=lt+vt>>1,Vt=dt+Tt>>1,It=Dt+Vt-dt,Mt=Vt+lt-Dt,Pt=dt*zo+lt,dr=Tt*zo+vt,sr=Vt*zo+Dt,Qr=Math.hypot((Ha[2*Pt+0]+Ha[2*dr+0])/2-Ha[2*sr+0],(Ha[2*Pt+1]+Ha[2*dr+1])/2-Ha[2*sr+1])>=16;Fa[sr]=Fa[sr]||(Qr?1:0),qe<1022&&(Fa[sr]=Fa[sr]||Fa[(dt+Mt>>1)*zo+(lt+It>>1)]||Fa[(Tt+Mt>>1)*zo+(vt+It>>1)])}const Me=new t.aZ,Ce=new t.a_;let Pe=0;function Qe(qe,Ke){const lt=Ke*zo+qe;return Pa[lt]===0&&(Me.emplaceBack(Ha[2*lt+0],Ha[2*lt+1],qe*t.aj/Hs,Ke*t.aj/Hs),Pa[lt]=++Pe),Pa[lt]-1}function je(qe,Ke,lt,dt,vt,Tt){const Dt=qe+lt>>1,Vt=Ke+dt>>1;if(Math.abs(qe-vt)+Math.abs(Ke-Tt)>1&&Fa[Vt*zo+Dt])je(vt,Tt,qe,Ke,Dt,Vt),je(lt,dt,vt,Tt,Dt,Vt);else{const It=Qe(qe,Ke),Mt=Qe(lt,dt),Pt=Qe(vt,Tt);Ce.emplaceBack(It,Mt,Pt)}}return je(0,0,Hs,Hs,Hs,0),je(Hs,Hs,0,0,0,Hs),{vertices:Me,indices:Ce}}(this.tileID.canonical,A);M=j.vertices,P=j.indices}else{M=new t.aZ,P=new t.a_;for(const{x:K,y:te}of E)M.emplaceBack(K,te,0,0);const j=t.be(M.int16.subarray(0,4*M.length),void 0,4);for(let K=0;K<j.length;K+=3)P.emplaceBack(j[K],j[K+1],j[K+2])}this._tileBoundsBuffer=c.createVertexBuffer(M,t.bf.members),this._tileBoundsIndexBuffer=c.createIndexBuffer(P),this._tileBoundsSegments=t.bd.simpleSegment(0,0,M.length,P.length)}_makeGlobeTileDebugBuffers(c,A){const E=A.projection;if(!E||E.name!=="globe"||A.freezeTileCoverage)return;const M=this.tileID.canonical,P=t.bg(M,A),j=t.bh(P),K=t.ah(A.zoom);let te;K>0&&(te=t.bi(new Float64Array(16),A.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(c,M,A,j,te,K),this._makeGlobeTileDebugTextBuffer(c,M,A,j,te,K)}_globePoint(c,A,E,M,P,j,K){let te=t.bj(c,A,E);if(j){const ge=1<<E.z,ve=t.aD(M.center.lng),Me=t.aH(M.center.lat),Ce=(E.x+.5)/ge-ve;let Pe=0;Ce>.5?Pe=-1:Ce<-.5&&(Pe=1);let Qe=(c/t.aj+E.x)/ge+Pe,je=(A/t.aj+E.y)/ge;Qe=(Qe-ve)*M._pixelsPerMercatorPixel+ve,je=(je-Me)*M._pixelsPerMercatorPixel+Me;const qe=[Qe*M.worldSize,je*M.worldSize,0];t.ad(qe,qe,j),te=t.bk(te,qe,K)}return t.ad(te,te,P)}_makeGlobeTileDebugBorderBuffer(c,A,E,M,P,j){const K=new t.ba,te=new t.bb,ge=new t.bl,ve=(Ce,Pe,Qe,je,qe)=>{const Ke=(Qe-Ce)/(qe-1),lt=(je-Pe)/(qe-1),dt=K.length;for(let vt=0;vt<qe;vt++){const Tt=Ce+vt*Ke,Dt=Pe+vt*lt;K.emplaceBack(Tt,Dt);const Vt=this._globePoint(Tt,Dt,A,E,M,P,j);ge.emplaceBack(Vt[0],Vt[1],Vt[2]),te.emplaceBack(dt+vt)}},Me=t.aj;ve(0,0,Me,0,16),ve(Me,0,Me,Me,16),ve(Me,Me,0,Me,16),ve(0,Me,0,0,16),this._tileDebugIndexBuffer=c.createIndexBuffer(te),this._tileDebugBuffer=c.createVertexBuffer(K,t.bc.members),this._globeTileDebugBorderBuffer=c.createVertexBuffer(ge,t.bm.members),this._tileDebugSegments=t.bd.simpleSegment(0,0,K.length,te.length)}_makeGlobeTileDebugTextBuffer(c,A,E,M,P,j){const K=t.aj/4,te=new t.ba,ge=new t.a_,ve=new t.bl,Me=25;ge.reserve(32),te.reserve(Me),ve.reserve(Me);const Ce=(Pe,Qe)=>Me*Pe+Qe;for(let Pe=0;Pe<Me;Pe++){const Qe=Pe*K;for(let je=0;je<Me;je++){const qe=je*K;te.emplaceBack(qe,Qe);const Ke=this._globePoint(qe,Qe,A,E,M,P,j);ve.emplaceBack(Ke[0],Ke[1],Ke[2])}}for(let Pe=0;Pe<4;Pe++)for(let Qe=0;Qe<4;Qe++){const je=Ce(Pe,Qe),qe=Ce(Pe,Qe+1),Ke=Ce(Pe+1,Qe),lt=Ce(Pe+1,Qe+1);ge.emplaceBack(je,qe,Ke),ge.emplaceBack(Ke,qe,lt)}this._tileDebugTextIndexBuffer=c.createIndexBuffer(ge),this._tileDebugTextBuffer=c.createVertexBuffer(te,t.bc.members),this._globeTileDebugTextBuffer=c.createVertexBuffer(ve,t.bm.members),this._tileDebugTextSegments=t.bd.simpleSegment(0,0,Me,32)}destroy(c=!1){for(const A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!c&&this.texture&&this.texture instanceof t.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}t.bp.setPbf(t.bq);class pl extends Jl{constructor(c,A,E,M,P){super(c,A,E,M,P),this._workQueuePerLayer=new Map,this._fetchQueuePerLayer=new Map,this._isHeaderLoaded=!1,this.textureDescriptorPerLayer=new Map,this.texturePerLayer=new Map}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(c){return this._mrt&&this._mrt.getLayer(c)}setTexturePerLayer(c,A,E){const M=E.context,P=M.gl;let j=this.texturePerLayer.get(c)||E.getTileTexture(A.width);j&&j instanceof t.T?j.update(A,{premultiply:!1}):j=new t.T(M,A,P.RGBA8,{premultiply:!1}),this.texturePerLayer.has(c)||this.texturePerLayer.set(c,j)}flushQueues(c){const A=this._workQueuePerLayer.get(c)||[],E=this._fetchQueuePerLayer.get(c)||[];for(;A.length;)A.pop()();for(;E.length;)E.pop()()}flushAllQueues(){for(const c of this._workQueuePerLayer.keys()){const A=this._workQueuePerLayer.get(c)||[];for(;A.length;)A.pop()()}for(const c of this._fetchQueuePerLayer.keys()){const A=this._fetchQueuePerLayer.get(c)||[];for(;A.length;)A.pop()()}}fetchHeader(c=16384,A){const E=this._mrt=new t.bp(30),M=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(c-1)}});return this.entireBuffer=null,this.request=t.br(M,(P,j,K,te)=>{if(P)A(P);else try{const ge=E.getHeaderLength(j);if(ge>c)return void(this.request=this.fetchHeader(ge,A));E.parseHeader(j),this._isHeaderLoaded=!0;let ve=0;for(const Me of Object.values(E.layers))ve=Math.max(ve,Me.dataIndex[Me.dataIndex.length-1].lastByte);j.byteLength>=ve&&(this.entireBuffer=j),A(null,this.entireBuffer||j,K,te)}catch(ge){A(ge)}}),this.request}fetchBand(c,A,E,M){const P=this._mrt;if(!this._isHeaderLoaded||!P)return void M(new Error("Tile header is not ready"));const j=this.actor;if(!j)return void M(new Error("Can't fetch tile band without an actor"));let K;const te=(Ce,Pe)=>{if(K.complete(Ce,Pe),Ce)return void M(Ce);this.updateTextureDescriptor(c,A,E);const Qe=this.textureDescriptorPerLayer.get(A);M(null,Qe&&Qe.img)},ge=(Ce,Pe)=>{if(Ce)return M(Ce);const Qe=j.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:Pe,task:K},te,void 0,!0),je=this._workQueuePerLayer.get(A)||[];je.push(()=>{Qe&&Qe.cancel(),K.cancel()}),this._workQueuePerLayer.has(A)||this._workQueuePerLayer.set(A,je)},ve=P.getLayer(c);if(!ve)return void M(new Error(`Unknown sourceLayer "${c}"`));if(ve.hasDataForBand(E)){this.updateTextureDescriptor(c,A,E);const Ce=this.textureDescriptorPerLayer.get(A);return void M(null,Ce?Ce.img:null)}const Me=ve.getDataRange([E]);if(K=P.createDecodingTask(Me),!K||K.tasks.length)if(this.flushQueues(A),this.entireBuffer)ge(null,this.entireBuffer.slice(Me.firstByte,Me.lastByte+1));else{const Ce=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Me.firstByte}-${Me.lastByte}`}}),Pe=t.br(Ce,ge),Qe=this._fetchQueuePerLayer.get(A)||[];Qe.push(()=>{Pe.cancel(),K.cancel()}),this._fetchQueuePerLayer.has(A)||this._fetchQueuePerLayer.set(A,Qe)}else M(null)}updateNeeded(c,A){return(!this.textureDescriptorPerLayer.get(c)||this.textureDescriptorPerLayer.get(c).band!==A)&&this.state!=="errored"}updateTextureDescriptor(c,A,E){if(!this._mrt)return;const M=this._mrt.getLayer(c);if(!M||!M.hasBand(E)||!M.hasDataForBand(E))return;const{bytes:P,tileSize:j,buffer:K,offset:te,scale:ge}=M.getBandView(E),ve=j+2*K,Me=new t.r({width:ve,height:ve},P),Ce=this.texturePerLayer.get(A);Ce&&Ce instanceof t.T&&Ce.update(Me,{premultiply:!1}),this.textureDescriptorPerLayer.set(A,{layer:c,band:E,img:Me,buffer:K,offset:te,tileSize:j,format:M.pixelFormat,mix:[ge,256*ge,65536*ge,16777216*ge]})}destroy(c=!1){if(super.destroy(c),delete this._mrt,!c)for(const A of this.texturePerLayer.values())A&&A instanceof t.T&&A.destroy();this.texturePerLayer.clear(),this.textureDescriptorPerLayer.clear(),this.fbo&&(this.fbo.destroy(),delete this.fbo),delete this.request,delete this.requestParams,this._isHeaderLoaded=!1}}class sl{constructor(c,A){this.max=c,this.onRemove=A,this.reset()}reset(){for(const c in this.data)for(const A of this.data[c])A.timeout&&clearTimeout(A.timeout),this.onRemove(A.value);return this.data={},this.order=[],this}add(c,A,E){const M=c.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const P={value:A,timeout:void 0};if(E!==void 0&&(P.timeout=setTimeout(()=>{this.remove(c,P)},E)),this.data[M].push(P),this.order.push(M),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const A=this.data[c].shift();return A.timeout&&clearTimeout(A.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),A.value}getByKey(c){const A=this.data[c];return A?A[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,A){if(!this.has(c))return this;const E=c.wrapped().key,M=A===void 0?0:this.data[E].indexOf(A),P=this.data[E][M];return this.data[E].splice(M,1),P.timeout&&clearTimeout(P.timeout),this.data[E].length===0&&delete this.data[E],this.onRemove(P.value),this.order.splice(this.order.indexOf(E),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}filter(c){const A=[];for(const E in this.data)for(const M of this.data[E])c(M.value)||A.push(M);for(const E of A)this.remove(E.value.tileID,E)}}class hc{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,A,E){const M=String(A);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][M]=this.stateChanges[c][M]||{},t.h(this.stateChanges[c][M],E),this.deletedStates[c]===null){this.deletedStates[c]={};for(const P in this.state[c])P!==M&&(this.deletedStates[c][P]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][M]===null){this.deletedStates[c][M]={};for(const P in this.state[c][M])E[P]||(this.deletedStates[c][M][P]=null)}else for(const P in E)this.deletedStates[c]&&this.deletedStates[c][M]&&this.deletedStates[c][M][P]===null&&delete this.deletedStates[c][M][P]}removeFeatureState(c,A,E){if(this.deletedStates[c]===null)return;const M=String(A);if(this.deletedStates[c]=this.deletedStates[c]||{},E&&A!==void 0)this.deletedStates[c][M]!==null&&(this.deletedStates[c][M]=this.deletedStates[c][M]||{},this.deletedStates[c][M][E]=null);else if(A!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][M])for(E in this.deletedStates[c][M]={},this.stateChanges[c][M])this.deletedStates[c][M][E]=null;else this.deletedStates[c][M]=null;else this.deletedStates[c]=null}getState(c,A){const E=this.state[c]||{},M=this.stateChanges[c]||{},P=this.deletedStates[c];if(P===null)return{};if(A!==void 0){const K=String(A),te=t.h({},E[K],M[K]);if(P){const ge=P[A];if(ge===null)return{};for(const ve in ge)delete te[ve]}return te}const j=t.h({},E,M);if(P)for(const K in P)delete j[K];return j}initializeTileState(c,A){c.refreshFeatureState(A)}coalesceChanges(c,A){const E={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const P={};for(const j in this.stateChanges[M])this.state[M][j]||(this.state[M][j]={}),t.h(this.state[M][j],this.stateChanges[M][j]),P[j]=this.state[M][j];E[M]=P}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const P={};if(this.deletedStates[M]===null)for(const j in this.state[M])P[j]={},this.state[M][j]={};else for(const j in this.deletedStates[M]){if(this.deletedStates[M][j]===null)this.state[M][j]={};else if(this.state[M][j])for(const K of Object.keys(this.deletedStates[M][j]))delete this.state[M][j][K];P[j]=this.state[M][j]}E[M]=E[M]||{},t.h(E[M],P)}if(this.stateChanges={},this.deletedStates={},Object.keys(E).length!==0)for(const M in c)c[M].refreshFeatureState(A)}}class na extends t.E{constructor(c,A,E){super(),this.id=c,this._onlySymbols=E,A.on("data",M=>{M.dataType==="source"&&M.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&M.dataType==="source"&&M.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),A.on("error",()=>{this._sourceErrored=!0}),this._source=A,this._tiles={},this._cache=new sl(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=A.minTileCacheSize,this._maxTileCacheSize=A.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new hc,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(c){this.map=c,this._minTileCacheSize=this._minTileCacheSize===void 0&&c?c._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&c?c._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const c in this._tiles)if(!this._tiles[c].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(c,A){return c.isSymbolTile=this._onlySymbols,c.isExtraShadowCaster=this._shadowCasterTiles[c.tileID.key],this._source.loadTile(c,A)}_unloadTile(c){if(this._source.unloadTile)return this._source.unloadTile(c)}_abortTile(c){if(this._source.abortTile)return this._source.abortTile(c)}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const A in this._tiles){const E=this._tiles[A];E.upload(c),E.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(c=>c.tileID).sort(La).map(c=>c.key)}getRenderableIds(c,A){const E=[];for(const M in this._tiles)this._isIdRenderable(+M,c,A)&&E.push(this._tiles[M]);return c?E.sort((M,P)=>{const j=M.tileID,K=P.tileID,te=new t.P(j.canonical.x,j.canonical.y)._rotate(this.transform.angle),ge=new t.P(K.canonical.x,K.canonical.y)._rotate(this.transform.angle);return j.overscaledZ-K.overscaledZ||ge.y-te.y||ge.x-te.x}).map(M=>M.tileID.key):E.map(M=>M.tileID).sort(La).map(M=>M.key)}hasRenderableParent(c){const A=this.findLoadedParent(c,0);return!!A&&this._isIdRenderable(A.tileID.key)}_isIdRenderable(c,A,E){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(A||!this._tiles[c].holdingForFade())&&(E||!this._shadowCasterTiles[c])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(+c,"reloading")}}_reloadTile(c,A){const E=this._tiles[c];E&&(E.state!=="loading"&&(E.state=A),this._loadTile(E,this._tileLoaded.bind(this,E,c,A)))}_tileLoaded(c,A,E,M){if(M)if(c.state="errored",M.status!==404)this._source.fire(new t.z(M,{tile:c}));else{if(this._source.fire(new t.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:c})),!(c.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const P=this.map.painter.terrain;this.update(this.transform,P.getScaledDemTileSize(),!0),P.resetTileLookupCache(this.id)}else this.update(this.transform)}else c.timeAdded=t.q.now(),E==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(A,c),this._source.type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),this._source.fire(new t.A("data",{dataType:"source",tile:c,coord:c.tileID,sourceCacheId:this.id}))}_backfillDEM(c){const A=this.getRenderableIds();for(let M=0;M<A.length;M++){const P=A[M];if(c.neighboringTiles&&c.neighboringTiles[P]){const j=this.getTileByID(P);E(c,j),E(j,c)}}function E(M,P){if(!M.dem||M.dem.borderReady)return;M.needsHillshadePrepare=!0,M.needsDEMTextureUpload=!0;let j=P.tileID.canonical.x-M.tileID.canonical.x;const K=P.tileID.canonical.y-M.tileID.canonical.y,te=Math.pow(2,M.tileID.canonical.z),ge=P.tileID.key;j===0&&K===0||Math.abs(K)>1||(Math.abs(j)>1&&(Math.abs(j+te)===1?j+=te:Math.abs(j-te)===1&&(j-=te)),P.dem&&M.dem&&(M.dem.backfillBorder(P.dem,j,K),M.neighboringTiles&&M.neighboringTiles[ge]&&(M.neighboringTiles[ge].backfilled=!0)))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,A,E,M){for(const P in this._tiles){let j=this._tiles[P];if(M[P]||!j.hasData()||j.tileID.overscaledZ<=A||j.tileID.overscaledZ>E)continue;let K=j.tileID;for(;j&&j.tileID.overscaledZ>A+1;){const ge=j.tileID.scaledTo(j.tileID.overscaledZ-1);j=this._tiles[ge.key],j&&j.hasData()&&(K=ge)}let te=K;for(;te.overscaledZ>A;)if(te=te.scaledTo(te.overscaledZ-1),c[te.key]){M[K.key]=K;break}}}findLoadedParent(c,A){if(c.key in this._loadedParentTiles){const E=this._loadedParentTiles[c.key];return E&&E.tileID.overscaledZ>=A?E:null}for(let E=c.overscaledZ-1;E>=A;E--){const M=c.scaledTo(E),P=this._getLoadedTile(M);if(P)return P}}_getLoadedTile(c){const A=this._tiles[c.key];return A&&A.hasData()?A:this._cache.getByKey(this._source.reparseOverscaled?c.wrapped().key:c.canonical.key)}updateCacheSize(c,A){A=A||this._source.tileSize;const E=Math.ceil(c.width/A)+1,M=Math.ceil(c.height/A)+1,P=Math.floor(E*M*5),j=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,P):P,K=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,j):j;this._cache.setMaxSize(K)}handleWrapJump(c){const A=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,A){const E={};for(const M in this._tiles){const P=this._tiles[M];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+A),E[P.tileID.key]=P}this._tiles=E;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(+M,this._tiles[M])}}update(c,A,E,M,P){if(this.transform=c,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!E)return;this.updateCacheSize(c,A),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const j=this._source.type==="batched-model";let K,te=this._source.maxzoom;const ge=this.map&&this.map.painter?this.map.painter._terrain:null;if(ge&&ge.sourceCache===this&&ge.attenuationRange()){const Ce=ge.attenuationRange()[0],Pe=Math.floor(Ce)-Math.log2(ge.getDemUpscale());te>Pe&&(te=Pe)}if(this.used||this.usedForTerrain){if(this._source.tileID)K=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ce=>new t.aM(Ce.canonical.z,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y));else if(this.tileCoverLift!==0){const Ce=c.clone();Ce.tileCoverLift=this.tileCoverLift,K=Ce.coveringTiles({tileSize:A||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:te,roundZoom:this._source.roundZoom&&!E,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:j}),this._source.minzoom<=1&&c.projection.name==="globe"&&(K.push(new t.aM(1,0,1,0,0)),K.push(new t.aM(1,0,1,1,0)),K.push(new t.aM(1,0,1,0,1)),K.push(new t.aM(1,0,1,1,1)))}else if(K=c.coveringTiles({tileSize:A||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:te,roundZoom:this._source.roundZoom&&!E,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:j}),this._source.hasTile){const Ce=this._source.hasTile.bind(this._source);K=K.filter(Pe=>Ce(Pe))}}else K=[];if(K.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!zc(this._source.type)){const Ce=c.coveringZoomLevel({tileSize:A||this._source.tileSize,roundZoom:this._source.roundZoom&&!E}),Pe=Math.min(Ce,this._source.maxzoom);if(j){const Qe=c.extendTileCover(K,Pe);for(const je of Qe)K.push(je)}else if(P){const Qe=c.extendTileCoverToNearPlane(K,this.transform.getFrustum(Pe),Pe);for(const je of Qe)K.push(je)}else if(this.castsShadows&&M){const Qe=c.extendTileCover(K,Pe,M);for(const je of Qe)this._shadowCasterTiles[je.key]=!0,K.push(je)}}const ve=this._updateRetainedTiles(K);if(zc(this._source.type)&&K.length!==0){const Ce={},Pe={},Qe=Object.keys(ve);for(const qe of Qe){const Ke=ve[qe],lt=this._tiles[qe];if(!lt||lt.fadeEndTime&&lt.fadeEndTime<=t.q.now())continue;const dt=this.findLoadedParent(Ke,Math.max(Ke.overscaledZ-na.maxOverzooming,this._source.minzoom));dt&&(this._addTile(dt.tileID),Ce[dt.tileID.key]=dt.tileID),Pe[qe]=Ke}const je=K[K.length-1].overscaledZ;for(const qe in this._tiles){const Ke=this._tiles[qe];if(ve[qe]||!Ke.hasData())continue;let lt=Ke.tileID;for(;lt.overscaledZ>je;){lt=lt.scaledTo(lt.overscaledZ-1);const dt=this._tiles[lt.key];if(dt&&dt.hasData()&&Pe[lt.key]){ve[qe]=Ke.tileID;break}}}for(const qe in Ce)ve[qe]||(this._coveredTiles[qe]=!0,ve[qe]=Ce[qe])}for(const Ce in ve)this._tiles[Ce].clearFadeHold();const Me=t.bs(this._tiles,ve);for(const Ce of Me){const Pe=this._tiles[Ce];Pe.hasSymbolBuckets&&!Pe.holdingForFade()?Pe.setHoldDuration(this.map._fadeDuration):Pe.hasSymbolBuckets&&!Pe.symbolFadeFinished()||this._removeTile(+Ce)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(+c)}_updateRetainedTiles(c){const A={};if(c.length===0)return A;const E={},M=c.reduce((ge,ve)=>Math.min(ge,ve.overscaledZ),1/0),P=c[0].overscaledZ,j=Math.max(P-na.maxOverzooming,this._source.minzoom),K=Math.max(P+na.maxUnderzooming,this._source.minzoom),te={};for(const ge of c){const ve=this._addTile(ge);A[ge.key]=ge,ve.hasData()||M<this._source.maxzoom&&(te[ge.key]=ge)}this._retainLoadedChildren(te,M,K,A);for(const ge of c){let ve=this._tiles[ge.key];if(ve.hasData())continue;if(ge.canonical.z>=this._source.maxzoom){const Ce=ge.children(this._source.maxzoom)[0],Pe=this.getTile(Ce);if(Pe&&Pe.hasData()){A[Ce.key]=Ce;continue}}else{const Ce=ge.children(this._source.maxzoom);if(A[Ce[0].key]&&A[Ce[1].key]&&A[Ce[2].key]&&A[Ce[3].key])continue}let Me=ve.wasRequested();for(let Ce=ge.overscaledZ-1;Ce>=j;--Ce){const Pe=ge.scaledTo(Ce);if(E[Pe.key]||(E[Pe.key]=!0,ve=this.getTile(Pe),!ve&&Me&&(ve=this._addTile(Pe)),ve&&(A[Pe.key]=Pe,Me=ve.wasRequested(),ve.hasData())))break}}return A}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const c in this._tiles){const A=[];let E,M=this._tiles[c].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){E=this._loadedParentTiles[M.key];break}A.push(M.key);const P=M.scaledTo(M.overscaledZ-1);if(E=this._getLoadedTile(P),E)break;M=P}for(const P of A)this._loadedParentTiles[P]=E}}_addTile(c){let A=this._tiles[c.key];if(A)return A.isExtraShadowCaster!==!0||this._shadowCasterTiles[c.key]||this._reloadTile(c.key,"reloading"),A;A=this._cache.getAndRemove(c),A&&(this._setTileReloadTimer(c.key,A),A.tileID=c,this._state.initializeTileState(A,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,A)));const E=!!A;if(!E){const M=this.map?this.map.painter:null,P=this._source.tileSize*c.overscaleFactor();A=this._source.type==="raster-array"?new pl(c,P,this.transform.tileZoom,M,this._isRaster):new Jl(c,P,this.transform.tileZoom,M,this._isRaster,this._source.worldview),this._loadTile(A,this._tileLoaded.bind(this,A,c.key,A.state))}return A.uses++,this._tiles[c.key]=A,E||this._source.fire(new t.A("dataloading",{tile:A,coord:A.tileID,dataType:"source"})),A}_setTileReloadTimer(c,A){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);const E=A.getExpiryTimeout();E&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},E))}_removeTile(c){const A=this._tiles[c];A&&(A.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),A.uses>0||(A.hasData()&&A.state!=="reloading"||A.state==="empty"?this._cache.add(A.tileID,A,A.getExpiryTimeout()):(A.aborted=!0,this._abortTile(A),this._unloadTile(A))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(+c);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(c,A,E){const M=[],P=this.transform;if(!P)return M;const j=P.projection.name==="globe",K=t.aD(P.center.lng);for(const te in this._tiles){const ge=this._tiles[te];if(E&&ge.clearQueryDebugViz(),ge.holdingForFade())continue;let ve;if(j){const Me=ge.tileID.canonical;if(Me.z===0){const Ce=[Math.abs(t.ay(K,...Cc(Me,-1))-K),Math.abs(t.ay(K,...Cc(Me,1))-K)];ve=[0,2*Ce.indexOf(Math.min(...Ce))-1]}else{const Ce=[Math.abs(t.ay(K,...Cc(Me,-1))-K),Math.abs(t.ay(K,...Cc(Me,0))-K),Math.abs(t.ay(K,...Cc(Me,1))-K)];ve=[Ce.indexOf(Math.min(...Ce))-1]}}else ve=[0];for(const Me of ve){const Ce=c.containsTile(ge,P,A,Me);Ce&&M.push(Ce)}}return M}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(c){return this._getRenderableCoordinates(c)}_getRenderableCoordinates(c,A){const E=this.getRenderableIds(c,A).map(P=>this._tiles[P].tileID),M=this.transform.projection.name==="globe";for(const P of E)P.projMatrix=this.transform.calculateProjMatrix(P.toUnwrapped()),P.expandedProjMatrix=M?this.transform.calculateProjMatrix(P.toUnwrapped(),!1,!0):P.projMatrix;return E}sortCoordinatesByDistance(c){const A=c.slice(),E=this.transform._camera.position,M=this.transform._camera.forward(),P={};for(const j of A){const K=1/(1<<j.canonical.z);P[j.key]=((j.canonical.x+.5)*K+j.wrap-E[0])*M[0]+((j.canonical.y+.5)*K-E[1])*M[1]-E[2]*M[2]}return A.sort((j,K)=>P[j.key]-P[K.key]),A}hasTransition(){if(this._source.hasTransition())return!0;if(zc(this._source.type))for(const c in this._tiles){const A=this._tiles[c];if(A.fadeEndTime!==void 0&&A.fadeEndTime>=t.q.now())return!0}return!1}setFeatureState(c,A,E){this._state.updateState(c=c||"_geojsonTileLayer",A,E)}removeFeatureState(c,A,E){this._state.removeFeatureState(c=c||"_geojsonTileLayer",A,E)}getFeatureState(c,A){return this._state.getState(c=c||"_geojsonTileLayer",A)}setDependencies(c,A,E){const M=this._tiles[c];M&&M.setDependencies(A,E)}reloadTilesForDependencies(c,A){for(const E in this._tiles)this._tiles[E].hasDependency(c,A)&&this._reloadTile(+E,"reloading");this._cache.filter(E=>!E.hasDependency(c,A))}_preloadTiles(c,A){if(!this._sourceLoaded){const te=()=>{this._sourceLoaded&&(this._source.off("data",te),this._preloadTiles(c,A))};return void this._source.on("data",te)}const E=new Map,M=Array.isArray(c)?c:[c],P=this.map.painter.terrain,j=this.usedForTerrain&&P?P.getScaledDemTileSize():this._source.tileSize;for(const te of M){const ge=te.coveringTiles({tileSize:j,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const ve of ge)E.set(ve.key,ve);this.usedForTerrain&&te.updateElevation(!1)}const K=Array.from(E.values());t.bt(K,(te,ge)=>{const ve=new Jl(te,this._source.tileSize*te.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster,this._source.worldview);this._loadTile(ve,Me=>{this._source.type==="raster-dem"&&ve.dem&&this._backfillDEM(ve),ge(Me,ve)})},A)}}function La(C,c){const A=Math.abs(2*C.wrap)-+(C.wrap<0),E=Math.abs(2*c.wrap)-+(c.wrap<0);return C.overscaledZ-c.overscaledZ||E-A||c.canonical.y-C.canonical.y||c.canonical.x-C.canonical.x}function zc(C){return C==="raster"||C==="image"||C==="video"||C==="custom"}function Cc(C,c){const A=1<<C.z;return[C.x/A+c,(C.x+1)/A+c]}na.maxOverzooming=10,na.maxUnderzooming=3;class Os{constructor(c){this.style=c,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const c=!1,A=!1;for(const E in this.style._mergedLayers){const M=this.style._mergedLayers[E];if(M.type==="fill-extrusion"||M.type==="building")this.layers.push({layer:M,visible:c,visibilityChanged:A});else if(M.type==="model"){const P=this.style.getLayerSource(M);P&&P.type==="batched-model"&&this.layers.push({layer:M,visible:c,visibilityChanged:A})}}}onNewFrame(c){this.layersGotHidden=!1;for(const A of this.layers){const E=A.layer;let M=!1;E.type==="fill-extrusion"?M=!E.isHidden(c)&&E.paint.get("fill-extrusion-opacity")>0:E.type==="building"?M=!E.isHidden(c)&&E.paint.get("building-opacity")>0:E.type==="model"&&(M=!E.isHidden(c)&&E.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!M&&A.visible,A.visible=M}}updateZOffset(c,A){this.currentBuildingBuckets=[];for(const M of this.layers){const P=M.layer,j=this.style.getLayerSourceCache(P);let K=1;P.type==="fill-extrusion"?K=M.visible?P.paint.get("fill-extrusion-vertical-scale"):0:P.type==="building"&&(K=M.visible?P.paint.get("building-vertical-scale"):0);let te=j?j.getTile(A):null;if(!te&&j)for(const ge in j._tiles){const ve=j._tiles[ge];if(A.canonical.isChildOf(ve.tileID.canonical)){te=ve;break}}this.currentBuildingBuckets.push({bucket:te?te.getBucket(P):null,tileID:te?te.tileID:A,verticalScale:K})}c.hasAnyZOffset=!1;let E=!1;for(let M=0;M<c.symbolInstances.length;M++){const P=c.symbolInstances.get(M),j=P.zOffset,K=this._getHeightAtTileOffset(A,P.tileAnchorX,P.tileAnchorY);P.zOffset=K!==Number.NEGATIVE_INFINITY?K:j,E||j===P.zOffset||(E=!0),c.hasAnyZOffset||P.zOffset===0||(c.hasAnyZOffset=!0)}E&&(c.zOffsetBuffersNeedUpload=!0,c.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(c,A,E,M){let P=A,j=E;if(c.canonical.z!==M.canonical.z){const K=M.canonical,te=1/(1<<c.canonical.z-K.z);P=(A+c.canonical.x*t.aj)*te-K.x*t.aj|0,j=(E+c.canonical.y*t.aj)*te-K.y*t.aj|0}return{tileX:P,tileY:j}}_getHeightAtTileOffset(c,A,E){let M,P;for(let j=0;j<this.layers.length;++j){const K=this.layers[j].layer;if(K.type!=="fill-extrusion"&&K.type!=="building")continue;const{bucket:te,tileID:ge,verticalScale:ve}=this.currentBuildingBuckets[j];if(!te)continue;const{tileX:Me,tileY:Ce}=this._mapCoordToOverlappingTile(c,A,E,ge),Pe=te.getHeightAtTileCoord(Me,Ce);Pe&&Pe.height!==void 0&&(Pe.hidden?M=Pe.height:P=Math.max(Pe.height*ve,P||0))}if(P!==void 0)return P;for(let j=0;j<this.layers.length;++j){const K=this.layers[j];if(K.layer.type!=="model"||!K.visible)continue;const{bucket:te,tileID:ge}=this.currentBuildingBuckets[j];if(!te)continue;const{tileX:ve,tileY:Me}=this._mapCoordToOverlappingTile(c,A,E,ge),Ce=te.getHeightAtTileCoord(ve,Me);if(Ce&&!Ce.hidden)return Ce.height===void 0&&M!==void 0?Math.min(Ce.maxHeight,M)*Ce.verticalScale:Ce.height?Ce.height*Ce.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function qu(C,c){const A={};for(const E in C)E!=="ref"&&(A[E]=C[E]);return t.bu.forEach(E=>{E in c&&(A[E]=c[E])}),A}function Jc(C){C=C.slice();const c=Object.create(null);for(let A=0;A<C.length;A++)c[C[A].id]=C[A];for(let A=0;A<C.length;A++)"ref"in C[A]&&(C[A]=qu(C[A],c[C[A].ref]));return C}const bs={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function Dh(C,c,A){A.push({command:bs.addSource,args:[C,c[C]]})}function mu(C,c,A){c.push({command:bs.removeSource,args:[C]}),A[C]=!0}function Fu(C,c,A,E){mu(C,A,E),Dh(C,c,A)}function Ec(C,c,A){let E;for(E in C[A])if(C[A].hasOwnProperty(E)&&E!=="data"&&!t.bv(C[A][E],c[A][E]))return!1;for(E in c[A])if(c[A].hasOwnProperty(E)&&E!=="data"&&!t.bv(C[A][E],c[A][E]))return!1;return!0}function fh(C,c,A,E,M,P){let j;for(j in c=c||{},C=C||{})C.hasOwnProperty(j)&&(t.bv(C[j],c[j])||A.push({command:P,args:[E,j,c[j],M]}));for(j in c)c.hasOwnProperty(j)&&!C.hasOwnProperty(j)&&(t.bv(C[j],c[j])||A.push({command:P,args:[E,j,c[j],M]}))}function Pu(C){return C.id}function gu(C,c){return C[c.id]=c,C}function Ho(C,c,A){const E=c.createTileMatrix(C,C.worldSize,A.toUnwrapped());return t.az(new Float32Array(16),C.projMatrix,E)}function Ro(C,c,A){if(c.projection.name===A.projection.name)return C.projMatrix;const E=A.clone();return E.setProjection(c.projection),Ho(E,c.getProjection(),C)}function eu(C,c,A){return c.name===A.projection.name?C.projMatrix:Ho(A,c,C)}class Rh{constructor(c,A){this.reset(c,A)}reset(c,A){this.points=c||[],this._distances=[0];for(let E=1;E<this.points.length;E++)this._distances[E]=this._distances[E-1]+this.points[E].dist(this.points[E-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(A||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=t.ay(c,0,1);let A=1,E=this._distances[A];const M=c*this.paddedLength+this.padding;for(;E<M&&A<this._distances.length;)E=this._distances[++A];const P=A-1,j=this._distances[P],K=E-j,te=K>0?(M-j)/K:0;return this.points[P].mult(1-te).add(this.points[A].mult(te))}}class Bc{constructor(c,A,E){const M=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(c/E),this.yCellCount=Math.ceil(A/E);for(let j=0;j<this.xCellCount*this.yCellCount;j++)M.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=A,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/A,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,A,E,M,P){this._forEachCell(A,E,M,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(A),this.bboxes.push(E),this.bboxes.push(M),this.bboxes.push(P)}insertCircle(c,A,E,M){this._forEachCell(A-M,E-M,A+M,E+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(A),this.circles.push(E),this.circles.push(M)}_insertBoxCell(c,A,E,M,P,j){this.boxCells[P].push(j)}_insertCircleCell(c,A,E,M,P,j){this.circleCells[P].push(j)}_query(c,A,E,M,P,j){if(E<0||c>this.width||M<0||A>this.height)return!P&&[];const K=[];if(c<=0&&A<=0&&this.width<=E&&this.height<=M){if(P)return!0;for(let te=0;te<this.boxKeys.length;te++)K.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(let te=0;te<this.circleKeys.length;te++){const ge=this.circles[3*te],ve=this.circles[3*te+1],Me=this.circles[3*te+2];K.push({key:this.circleKeys[te],x1:ge-Me,y1:ve-Me,x2:ge+Me,y2:ve+Me})}return j?K.filter(j):K}return this._forEachCell(c,A,E,M,this._queryCell,K,{hitTest:P,seenUids:{box:{},circle:{}}},j),P?K.length>0:K}_queryCircle(c,A,E,M,P){const j=c-E,K=c+E,te=A-E,ge=A+E;if(K<0||j>this.width||ge<0||te>this.height)return!M&&[];const ve=[];return this._forEachCell(j,te,K,ge,this._queryCellCircle,ve,{hitTest:M,circle:{x:c,y:A,radius:E},seenUids:{box:{},circle:{}}},P),M?ve.length>0:ve}query(c,A,E,M,P){return this._query(c,A,E,M,!1,P)}hitTest(c,A,E,M,P){return this._query(c,A,E,M,!0,P)}hitTestCircle(c,A,E,M){return this._queryCircle(c,A,E,!0,M)}_queryCell(c,A,E,M,P,j,K,te){const ge=K.seenUids,ve=this.boxCells[P];if(ve!==null){const Ce=this.bboxes;for(const Pe of ve)if(!ge.box[Pe]){ge.box[Pe]=!0;const Qe=4*Pe;if(c<=Ce[Qe+2]&&A<=Ce[Qe+3]&&E>=Ce[Qe+0]&&M>=Ce[Qe+1]&&(!te||te(this.boxKeys[Pe]))){if(K.hitTest)return j.push(!0),!0;j.push({key:this.boxKeys[Pe],x1:Ce[Qe],y1:Ce[Qe+1],x2:Ce[Qe+2],y2:Ce[Qe+3]})}}}const Me=this.circleCells[P];if(Me!==null){const Ce=this.circles;for(const Pe of Me)if(!ge.circle[Pe]){ge.circle[Pe]=!0;const Qe=3*Pe;if(this._circleAndRectCollide(Ce[Qe],Ce[Qe+1],Ce[Qe+2],c,A,E,M)&&(!te||te(this.circleKeys[Pe]))){if(K.hitTest)return j.push(!0),!0;{const je=Ce[Qe],qe=Ce[Qe+1],Ke=Ce[Qe+2];j.push({key:this.circleKeys[Pe],x1:je-Ke,y1:qe-Ke,x2:je+Ke,y2:qe+Ke})}}}}}_queryCellCircle(c,A,E,M,P,j,K,te){const ge=K.circle,ve=K.seenUids,Me=this.boxCells[P];if(Me!==null){const Pe=this.bboxes;for(const Qe of Me)if(!ve.box[Qe]){ve.box[Qe]=!0;const je=4*Qe;if(this._circleAndRectCollide(ge.x,ge.y,ge.radius,Pe[je+0],Pe[je+1],Pe[je+2],Pe[je+3])&&(!te||te(this.boxKeys[Qe])))return j.push(!0),!0}}const Ce=this.circleCells[P];if(Ce!==null){const Pe=this.circles;for(const Qe of Ce)if(!ve.circle[Qe]){ve.circle[Qe]=!0;const je=3*Qe;if(this._circlesCollide(Pe[je],Pe[je+1],Pe[je+2],ge.x,ge.y,ge.radius)&&(!te||te(this.circleKeys[Qe])))return j.push(!0),!0}}}_forEachCell(c,A,E,M,P,j,K,te){const ge=this._convertToXCellCoord(c),ve=this._convertToYCellCoord(A),Me=this._convertToXCellCoord(E),Ce=this._convertToYCellCoord(M);for(let Pe=ge;Pe<=Me;Pe++)for(let Qe=ve;Qe<=Ce;Qe++)if(P.call(this,c,A,E,M,this.xCellCount*Qe+Pe,j,K,te))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,A,E,M,P,j){const K=M-c,te=P-A,ge=E+j;return ge*ge>K*K+te*te}_circleAndRectCollide(c,A,E,M,P,j,K){const te=(j-M)/2,ge=Math.abs(c-(M+te));if(ge>te+E)return!1;const ve=(K-P)/2,Me=Math.abs(A-(P+ve));if(Me>ve+E)return!1;if(ge<=te||Me<=ve)return!0;const Ce=ge-te,Pe=Me-ve;return Ce*Ce+Pe*Pe<=E*E}}const Hc={unknown:0,flipRequired:1,flipNotRequired:2},Yu=Math.tan(85*Math.PI/180);function dh(C,c,A,E,M,P,j){const K=t.bz();if(A)if(P.name==="globe"){const te=t.bA(M,c);t.az(K,K,te)}else{const te=t.bB([],j);K[0]=te[0],K[1]=te[1],K[4]=te[2],K[5]=te[3],E||t.by(K,K,M.angle)}else t.az(K,M.labelPlaneMatrix,C);return K}function Qa(C,c,A,E,M,P,j){const K=dh(C,c,A,E,M,P,j);return P.name==="globe"&&A||(K[2]=K[6]=K[10]=K[14]=0),K}function tu(C,c,A,E,M,P,j){if(A){if(P.name==="globe"){const K=dh(C,c,A,E,M,P,j);return t.bi(K,K),t.az(K,C,K),K}{const K=t.bw(C),te=t.bx([]);return te[0]=j[0],te[1]=j[1],te[4]=j[2],te[5]=j[3],t.az(K,K,te),E||t.by(K,K,-M.angle),K}}return M.glCoordMatrix}function go(C,c,A,E){const M=[C,c,A,1];A?t.aA(M,M,E):ft(M,M,E);const P=M[3];return M[0]/=P,M[1]/=P,M[2]/=P,M}function fc(C,c){return Math.min(.5+C/c*.5,1.5)}function Pl(C,c){const A=C[0]/C[3],E=C[1]/C[3];return A>=-c[0]&&A<=c[0]&&E>=-c[1]&&E<=c[1]}function Lu(C,c,A,E,M,P,j,K,te,ge){const ve=A.transform,Me=E?C.textSizeData:C.iconSizeData,Ce=t.bH(Me,A.transform.zoom),Pe=ve.projection.name==="globe",Qe=[256/A.width*2+1,256/A.height*2+1],je=E?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;je.clear();let qe=null;Pe&&(qe=E?C.text.globeExtVertexArray:C.icon.globeExtVertexArray);const Ke=C.lineVertexArray,lt=E?C.text.placedSymbolArray:C.icon.placedSymbolArray,dt=A.transform.width/A.transform.height;let vt,Tt=!1;for(let Dt=0;Dt<lt.length;Dt++){const Vt=lt.get(Dt),{numGlyphs:It,writingMode:Mt}=Vt;if(Mt!==t.bI.vertical||Tt||vt===t.bI.horizontal||(Tt=!0),vt=Mt,(Vt.hidden||Mt===t.bI.vertical)&&!Tt){ct(It,je);continue}Tt=!1;const Pt=new t.P(Vt.tileAnchorX,Vt.tileAnchorY);let{x:dr,y:sr,z:Qr}=ve.projection.projectTilePoint(Pt.x,Pt.y,ge.canonical);if(te){const[di,Ci,ti]=te(Pt);dr+=di,sr+=Ci,Qr+=ti}const Br=[dr,sr,Qr,1];if(t.aA(Br,Br,c),!Pl(Br,Qe)){ct(It,je);continue}const Jr=Br[3],yn=fc(A.transform.getCameraToCenterDistance(ve.projection),Jr),vr=t.bJ(Me,Ce,Vt),qt=j?vr/yn:vr*yn,kr=go(dr,sr,Qr,M);if(kr[3]<=0){ct(It,je);continue}let br={};const an=t.al(C.layers[0].layout.get("text-max-angle")),ln=Math.cos(an),dn=j?null:te,Mn=ae(Vt,qt,!1,K,c,M,P,C.glyphOffsetArray,Ke,je,qe,kr,Pt,br,dt,dn,ve.projection,ge,j,ln);Tt=Mn.useVertical,dn&&Mn.needsFlipping&&(br={}),(Mn.notEnoughRoom||Tt||Mn.needsFlipping&&ae(Vt,qt,!0,K,c,M,P,C.glyphOffsetArray,Ke,je,qe,kr,Pt,br,dt,dn,ve.projection,ge,j,ln).notEnoughRoom)&&ct(It,je)}E?(C.text.dynamicLayoutVertexBuffer.updateData(je),qe&&C.text.globeExtVertexBuffer&&C.text.globeExtVertexBuffer.updateData(qe)):(C.icon.dynamicLayoutVertexBuffer.updateData(je),qe&&C.icon.globeExtVertexBuffer&&C.icon.globeExtVertexBuffer.updateData(qe))}function ol(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe){const{lineStartIndex:Ke,glyphStartIndex:lt,segment:dt}=K,vt=lt+K.numGlyphs,Tt=Ke+K.lineLength,Dt=c.getoffsetX(lt),Vt=c.getoffsetX(vt-1),It=$e(C*Dt,A,E,M,P,j,dt,Ke,Tt,te,ge,ve,Me,Ce,!0,Pe,Qe,je,qe);if(!It)return null;const Mt=$e(C*Vt,A,E,M,P,j,dt,Ke,Tt,te,ge,ve,Me,Ce,!0,Pe,Qe,je,qe);return Mt?{first:It,last:Mt}:null}function ka(C,c,A,E){return C===t.bI.horizontal&&Math.abs(E)>Math.abs(A)?{useVertical:!0}:C===t.bI.vertical?E>0?{needsFlipping:!0}:null:c!==Hc.unknown&&function(M,P){return M===0||Math.abs(P/M)>Yu}(A,E)?c===Hc.flipRequired?{needsFlipping:!0}:null:A<0?{needsFlipping:!0}:null}function ae(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke,lt,dt){const vt=c/24,Tt=C.lineOffsetX*vt,Dt=C.lineOffsetY*vt,{lineStartIndex:Vt,glyphStartIndex:It,numGlyphs:Mt,segment:Pt,writingMode:dr,flipState:sr}=C,Qr=Vt+C.lineLength,Br=Jr=>{if(ve){const[kr,br,an]=Jr.up,ln=ge.length;t.bK(ve,ln+0,kr,br,an),t.bK(ve,ln+1,kr,br,an),t.bK(ve,ln+2,kr,br,an),t.bK(ve,ln+3,kr,br,an)}const[yn,vr,qt]=Jr.point;t.bL(ge,yn,vr,qt,Jr.angle)};if(Mt>1){const Jr=ol(vt,K,Tt,Dt,A,Me,Ce,C,te,P,Pe,je,!1,qe,Ke,lt,dt);if(!Jr)return{notEnoughRoom:!0};if(E&&!A){let[yn,vr,qt]=Jr.first.point,[kr,br,an]=Jr.last.point;[yn,vr]=go(yn,vr,qt,j),[kr,br]=go(kr,br,an,j);const ln=ka(dr,sr,(kr-yn)*Qe,br-vr);if(C.flipState=ln&&ln.needsFlipping?Hc.flipRequired:Hc.flipNotRequired,ln)return ln}Br(Jr.first);for(let yn=It+1;yn<It+Mt-1;yn++){const vr=$e(vt*K.getoffsetX(yn),Tt,Dt,A,Me,Ce,Pt,Vt,Qr,te,P,Pe,je,!1,!1,qe,Ke,lt,dt);if(!vr)return ge.length-=4*(yn-It),{notEnoughRoom:!0};Br(vr)}Br(Jr.last)}else{if(E&&!A){const yn=go(Ce.x,Ce.y,0,M),vr=Vt+Pt+1,qt=new t.P(te.getx(vr),te.gety(vr)),kr=go(qt.x,qt.y,0,M),br=kr[3]>0?kr:Le(Ce,qt,yn,1,M,void 0,qe,Ke.canonical),an=ka(dr,sr,(br[0]-yn[0])*Qe,br[1]-yn[1]);if(C.flipState=an&&an.needsFlipping?Hc.flipRequired:Hc.flipNotRequired,an)return an}const Jr=$e(vt*K.getoffsetX(It),Tt,Dt,A,Me,Ce,Pt,Vt,Qr,te,P,Pe,je,!1,!1,qe,Ke,lt,dt);if(!Jr)return{notEnoughRoom:!0};Br(Jr)}return{}}function we(C,c,A,E,M){const{x:P,y:j,z:K}=E.projectTilePoint(C.x,C.y,c);if(!M)return go(P,j,K,A);const[te,ge,ve]=M(C);return go(P+te,j+ge,K+ve,A)}function Le(C,c,A,E,M,P,j,K){const te=we(C.sub(c)._unit()._add(C),K,M,j,P);return t.at(te,A,te),t.au(te,te),t.bE(te,A,te,E)}function $e(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke,lt){const dt=E?C-c:C+c;let vt=dt>0?1:-1,Tt=0;E&&(vt*=-1,Tt=Math.PI),vt<0&&(Tt+=Math.PI);let Dt=K+j+(vt>0?0:1)|0,Vt=M,It=M,Mt=0,Pt=0;const dr=Math.abs(dt),sr=[],Qr=[];let Br=P,Jr=Br,yn=t.bC([]);const vr=()=>Le(Jr,Br,It,dr-Mt+1,ve,Ce,je,qe.canonical);for(;Mt+Pt<=dr;){if(Dt+=vt,Dt<K||Dt>=te)return null;if(It=Vt,Jr=Br,sr.push(It),Pe&&Qr.push(Jr),Br=new t.P(ge.getx(Dt),ge.gety(Dt)),Vt=Me[Dt],!Vt){const ti=we(Br,qe.canonical,ve,je,Ce);Vt=ti[3]>0?Me[Dt]=ti:vr()}Mt+=Pt;const di=t.at([],Vt,It),Ci=t.bD(It,Vt);if(A&&Ci>0&&Pt>0&&t.bG(yn,di)/(Pt*Ci)<lt)return null;Pt=Ci,yn=di}Qe&&Ce&&(Me[Dt]&&(Vt=vr(),Pt=t.bD(It,Vt),yn=t.at([],Vt,It)),Me[Dt]=Vt);const qt=(dr-Mt)/Pt,kr=Br.sub(Jr)._mult(qt)._add(Jr),br=t.bE([],It,yn,qt);let an=[0,0,1],ln=yn[0],dn=yn[1];if(Ke&&(an=je.upVector(qe.canonical,kr.x,kr.y),an[0]!==0||an[1]!==0||an[2]!==1)){const di=[an[2],0,-an[0]],Ci=t.bF([],an,di);t.au(di,di),t.au(Ci,Ci),ln=t.bG(yn,di),dn=t.bG(yn,Ci)}if(A){const di=t.bF([],an,yn);t.au(di,di),t.bE(br,br,di,A*vt)}const Mn=Tt+Math.atan2(dn,ln);return sr.push(br),Pe&&Qr.push(kr),{point:br,angle:Mn,path:sr,tilePath:Qr,up:an}}function ct(C,c){const A=c.length,E=A+4*C;c.resize(E),c.float32.fill(-1/0,4*A,4*E)}function ft(C,c,A){const E=c[0],M=c[1];return C[0]=A[0]*E+A[4]*M+A[12],C[1]=A[1]*E+A[5]*M+A[13],C[3]=A[3]*E+A[7]*M+A[15],C}const at=100;class Er{constructor(c,A,E=new Bc(c.width+200,c.height+200,25),M=new Bc(c.width+200,c.height+200,25)){this.transform=c,this.grid=E,this.ignoredGrid=M,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+at,this.screenBottomBoundary=c.height+at,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=A}placeCollisionBox(c,A,E,M,P,j,K,te,ge,ve,Me){let Ce=E.projectedAnchorX,Pe=E.projectedAnchorY,Qe=E.projectedAnchorZ;const je=E.tileAnchorX,qe=E.tileAnchorY,Ke=E.elevation,lt=E.tileID,dt=c.getProjection();if(Ke&&lt){const[Qr,Br,Jr]=dt.upVector(lt.canonical,E.tileAnchorX,E.tileAnchorY),yn=dt.upVectorScale(lt.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Ce+=Qr*Ke*yn,Pe+=Br*Ke*yn,Qe+=Jr*Ke*yn}const vt=c.projection.name==="globe",Tt=c.projection.name==="globe"?t.ah(this.transform.zoom):0;if(lt&&vt&&Tt<1&&!j){const Qr=1<<lt.canonical.z,Br=t.bM(je,qe);t.bN(Br,Br,1/t.aj),t.bO(Br,Br,t.bM(lt.canonical.x,lt.canonical.y)),t.bN(Br,Br,1/Qr),t.bP(Br,Br,t.bM(M[0],M[1])),Br[0]=t.bQ(Br[0],-.5,.5),t.bN(Br,Br,t.aj);const Jr=t.bR(Br[0],Br[1],t.aj/(2*Math.PI),1);t.aA(Jr,Jr,P),Ce=t.ai(Ce,Jr[0],Tt),Pe=t.ai(Pe,Jr[1],Tt),Qe=t.ai(Qe,Jr[2],Tt)}const Dt=this.projectAndGetPerspectiveRatio(ve,Ce,Pe,Qe,E.tileID,dt.name==="globe"||!!Ke||this.transform.pitch>0,dt),Vt=ge*Dt.perspectiveRatio,It=(E.x1*A+K.x-E.padding)*Vt+Dt.point.x,Mt=(E.y1*A+K.y-E.padding)*Vt+Dt.point.y,Pt=(E.x2*A+K.x+E.padding)*Vt+Dt.point.x,dr=(E.y2*A+K.y+E.padding)*Vt+Dt.point.y,sr=Dt.perspectiveRatio<=.55||Dt.occluded;return!this.isInsideGrid(It,Mt,Pt,dr)||!te&&this.grid.hitTest(It,Mt,Pt,dr,Me)||sr?{box:[],offscreen:!1,occluded:Dt.occluded}:{box:[It,Mt,Pt,dr],offscreen:this.isOffscreen(It,Mt,Pt,dr),occluded:!1}}placeCollisionCircles(c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je){const qe=[],Ke=this.transform.elevation,lt=c.getProjection(),dt=Ke?Ke.getAtTileOffsetFunc(je,this.transform.center.lat,this.transform.worldSize,lt):null,vt=new t.P(E.tileAnchorX,E.tileAnchorY);let{x:Tt,y:Dt,z:Vt}=lt.projectTilePoint(vt.x,vt.y,je.canonical);if(dt){const[an,ln,dn]=dt(vt);Tt+=an,Dt+=ln,Vt+=dn}const It=lt.name==="globe",Mt=this.projectAndGetPerspectiveRatio(K,Tt,Dt,Vt,je,It||!!Ke||this.transform.pitch>0,lt),{perspectiveRatio:Pt}=Mt,dr=(Me?j/Pt:j*Pt)/t.bU,sr=go(Tt,Dt,Vt,te),Qr=E.lineOffsetX*dr,Br=E.lineOffsetY*dr,Jr=t.al(c.layers[0].layout.get("text-max-angle")),yn=Math.cos(Jr),vr=Mt.signedDistanceFromCamera>0?ol(dr,P,Qr,Br,!1,sr,vt,E,M,te,{},Ke&&!Me?dt:null,Me&&!!Ke,lt,je,Me,yn):null;let qt=!1,kr=!1,br=!0;if(vr&&!Mt.occluded){const an=.5*Pe*Pt+Qe,ln=new t.P(-100,-100),dn=new t.P(this.screenRightBoundary,this.screenBottomBoundary),Mn=new Rh,{first:di,last:Ci}=vr,ti=di.path.length;let xi=[];for(let fs=ti-1;fs>=1;fs--)xi.push(di.path[fs]);for(let fs=1;fs<Ci.path.length;fs++)xi.push(Ci.path[fs]);const vi=2.5*an;ge&&(xi=xi.map(([fs,Bs,no],rs)=>(dt&&!It&&(no=dt(rs<ti-1?di.tilePath[ti-1-rs]:Ci.tilePath[rs-ti+2])[2]),go(fs,Bs,no,ge))),xi.some(fs=>fs[3]<=0)&&(xi=[]));let qi=[];if(xi.length>0){let fs=1/0,Bs=-1/0,no=1/0,rs=-1/0;for(const io of xi)fs=Math.min(fs,io[0]),no=Math.min(no,io[1]),Bs=Math.max(Bs,io[0]),rs=Math.max(rs,io[1]);Bs>=ln.x&&fs<=dn.x&&rs>=ln.y&&no<=dn.y&&(qi=[xi.map(io=>new t.P(io[0],io[1]))],(fs<ln.x||Bs>dn.x||no<ln.y||rs>dn.y)&&(qi=t.bS(qi,ln.x,ln.y,dn.x,dn.y)))}for(const fs of qi){Mn.reset(fs,.25*an);let Bs=0;Bs=Mn.length<=.5*an?1:Math.ceil(Mn.paddedLength/vi)+1;for(let no=0;no<Bs;no++){const rs=no/Math.max(Bs-1,1),io=Mn.lerp(rs),fo=io.x+at,ko=io.y+at;qe.push(fo,ko,an,0);const Cs=fo-an,so=ko-an,he=fo+an,le=ko+an;if(br=br&&this.isOffscreen(Cs,so,he,le),kr=kr||this.isInsideGrid(Cs,so,he,le),!A&&this.grid.hitTestCircle(fo,ko,an,Ce)&&(qt=!0,!ve))return{circles:[],offscreen:!1,collisionDetected:qt,occluded:!1}}}}return{circles:!ve&&qt||!kr?[]:qe,offscreen:br,collisionDetected:qt,occluded:Mt.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const A=[];let E=1/0,M=1/0,P=-1/0,j=-1/0;for(const ve of c){const Me=new t.P(ve.x+at,ve.y+at);E=Math.min(E,Me.x),M=Math.min(M,Me.y),P=Math.max(P,Me.x),j=Math.max(j,Me.y),A.push(Me)}const K=this.grid.query(E,M,P,j).concat(this.ignoredGrid.query(E,M,P,j)),te={},ge={};for(const ve of K){const Me=ve.key;if(te[Me.bucketInstanceId]===void 0&&(te[Me.bucketInstanceId]={}),te[Me.bucketInstanceId][Me.featureIndex])continue;const Ce=[new t.P(ve.x1,ve.y1),new t.P(ve.x2,ve.y1),new t.P(ve.x2,ve.y2),new t.P(ve.x1,ve.y2)];t.bT(A,Ce)&&(te[Me.bucketInstanceId][Me.featureIndex]=!0,ge[Me.bucketInstanceId]===void 0&&(ge[Me.bucketInstanceId]=[]),ge[Me.bucketInstanceId].push(Me.featureIndex))}return ge}insertCollisionBox(c,A,E,M,P){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:M,collisionGroupID:P},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,A,E,M,P){const j=A?this.ignoredGrid:this.grid,K={bucketInstanceId:E,featureIndex:M,collisionGroupID:P};for(let te=0;te<c.length;te+=4)j.insertCircle(K,c[te],c[te+1],c[te+2])}projectAndGetPerspectiveRatio(c,A,E,M,P,j,K){const te=[A,E,M,1];let ge=!1;M||this.transform.pitch>0?(t.aA(te,te,c),this.fogState&&P&&K.name!=="globe"&&(ge=function(Ce,Pe,Qe,je,qe,Ke){const lt=Ke.calculateFogTileMatrix(qe),dt=[Pe,Qe,je];return t.ad(dt,dt,lt),pn(Ce,t.ae(dt),Ke.pitch,Ke._fov)}(this.fogState,A,E,M,P.toUnwrapped(),this.transform)>.9)):ft(te,te,c);const ve=te[3];return{point:new t.P((te[0]/ve+1)/2*this.transform.width+at,(-te[1]/ve+1)/2*this.transform.height+at),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(K)/ve*.5,1.5),signedDistanceFromCamera:ve,occluded:j&&te[2]>ve||ge}}isOffscreen(c,A,E,M){return E<at||c>=this.screenRightBoundary||M<at||A>this.screenBottomBoundary}isInsideGrid(c,A,E,M){return E>=0&&c<this.gridRightBoundary&&M>=0&&A<this.gridBottomBoundary}getViewportMatrix(){const c=t.bx([]);return t.bo(c,c,[-100,-100,0]),c}}class hr{constructor(c,A,E,M){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?A:-A))):M&&E?1:0,this.placed=E}isHidden(){return this.opacity===0&&!this.placed}}class Wr{constructor(c,A,E,M,P,j=!1){this.text=new hr(c?c.text:null,A,E,P),this.icon=new hr(c?c.icon:null,A,M,P),this.clipped=j}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bn{constructor(c,A,E,M=!1){this.text=c,this.icon=A,this.skipFade=E,this.clipped=M}}class Hn{constructor(){this.invProjMatrix=t.bz(),this.viewportMatrix=t.bz(),this.circles=[]}}class cn{constructor(c,A,E,M,P){this.bucketInstanceId=c,this.featureIndex=A,this.sourceLayerIndex=E,this.bucketIndex=M,this.tileID=P}}class Hr{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const A=++this.maxGroupID;this.collisionGroups[c]={ID:A,predicate:E=>E.collisionGroupID===A}}return this.collisionGroups[c]}}function ei(C,c,A,E,M){const{horizontalAlign:P,verticalAlign:j}=t.bZ(C),K=-(P-.5)*c,te=-(j-.5)*A,ge=t.b_(C,E);return new t.P(K+ge[0]*M,te+ge[1]*M)}function Ti(C,c,A,E,M){const P=new t.P(C,c);return A&&P._rotate(E?M:-M),P}class vs{constructor(c,A,E,M,P,j){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new Er(this.transform,P),this.buildingIndex=j,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=A,this.retainedQueryData={},this.collisionGroups=new Hr(E),this.collisionCircleArrays={},this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,A,E,M,P=1){const j=E.getBucket(A),K=E.latestFeatureIndex;if(!j||!K||A.fqid!==j.layerIds[0])return;const te=j.layers[0].layout,ge=j.layers[0].paint,ve=E.collisionBoxArray,Me=Math.pow(2,this.transform.zoom-E.tileID.overscaledZ),Ce=E.tileSize/t.aj,Pe=E.tileID.toUnwrapped();this.transform.setProjection(j.projection);const Qe=(je=E.tileID,qe=j.getProjection(),Ke=this.transform,qe.name===this.projection?Ke.calculateProjMatrix(je.toUnwrapped()):Ho(Ke,qe,je));var je,qe,Ke;const lt=te.get("text-pitch-alignment")==="map",dt=te.get("text-rotation-alignment")==="map";A.compileFilter(A.options);const vt=A.dynamicFilter(),Tt=A.dynamicFilterNeedsFeature(),Dt=this.transform.calculatePixelsToTileUnitsMatrix(E),Vt=Qa(Qe,E.tileID.canonical,lt,dt,this.transform,j.getProjection(),Dt);let It=null;const Mt=j.getProjection().createInversionMatrix(this.transform,E.tileID.canonical);if(lt){const qt=tu(Qe,E.tileID.canonical,lt,dt,this.transform,j.getProjection(),Dt);It=t.az([],this.transform.labelPlaneMatrix,qt)}let Pt=null;vt&&E.latestFeatureIndex&&(Pt={unwrappedTileID:Pe,dynamicFilter:vt,dynamicFilterNeedsFeature:Tt}),this.retainedQueryData[j.bucketInstanceId]=new cn(j.bucketInstanceId,K,j.sourceLayerIndex,j.index,E.tileID);const[dr,sr]=j.layers[0].layout.get("text-size-scale-range"),Qr=t.ay(P,dr,sr),[Br,Jr]=te.get("icon-size-scale-range"),yn=t.ay(P,Br,Jr),vr={bucket:j,layout:te,paint:ge,posMatrix:Qe,invMatrix:Mt,mercatorCenter:[t.aD(this.transform.center.lng),t.aH(this.transform.center.lat)],textLabelPlaneMatrix:Vt,labelToScreenMatrix:It,clippingData:Pt,scale:Me,textPixelRatio:Ce,holdingForFade:E.holdingForFade(),collisionBoxArray:ve,partiallyEvaluatedTextSize:t.bH(j.textSizeData,this.transform.zoom,Qr),partiallyEvaluatedIconSize:t.bH(j.iconSizeData,this.transform.zoom,yn),collisionGroup:this.collisionGroups.get(j.sourceID),latestFeatureIndex:E.latestFeatureIndex};if(M)for(const qt of j.sortKeyRanges){const{sortKey:kr,symbolInstanceStart:br,symbolInstanceEnd:an}=qt;c.push({sortKey:kr,symbolInstanceStart:br,symbolInstanceEnd:an,parameters:vr})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:j.symbolInstances.length,parameters:vr})}attemptAnchorPlacement(c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke,lt,dt,vt,Tt){const{textOffset0:Dt,textOffset1:Vt,crossTileID:It}=je,Mt=[Dt,Vt],Pt=ei(c,j,K,Mt,te),dr=this.collisionIndex.placeCollisionBox(Ke,te,A,E,M,P,Ti(Pt.x,Pt.y,ge,ve,this.transform.angle),Qe,Me,Ce,Pe.predicate);if(dt){const sr=Ke.getSymbolInstanceIconSize(Tt,this.transform.zoom,je.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Ke,sr,dt,E,M,P,Ti(Pt.x,Pt.y,ge,ve,this.transform.angle),Qe,Me,Ce,Pe.predicate).box.length===0)return}if(dr.box.length>0){let sr;return this.prevPlacement&&this.prevPlacement.variableOffsets[It]&&this.prevPlacement.placements[It]&&this.prevPlacement.placements[It].text&&(sr=this.prevPlacement.variableOffsets[It].anchor),this.variableOffsets[It]={textOffset:Mt,width:j,height:K,anchor:c,textScale:te,prevAnchor:sr},this.markUsedJustification(Ke,c,je,lt),Ke.allowVerticalPlacement&&(this.markUsedOrientation(Ke,lt,je),this.placedOrientations[It]=lt),{shift:Pt,placedGlyphBoxes:dr}}}placeLayerBucketPart(c,A,E,M,P=1){const{bucket:j,layout:K,paint:te,posMatrix:ge,textLabelPlaneMatrix:ve,labelToScreenMatrix:Me,clippingData:Ce,textPixelRatio:Pe,mercatorCenter:Qe,invMatrix:je,holdingForFade:qe,collisionBoxArray:Ke,partiallyEvaluatedTextSize:lt,partiallyEvaluatedIconSize:dt,collisionGroup:vt,latestFeatureIndex:Tt}=c.parameters,Dt=K.get("text-optional"),Vt=K.get("icon-optional"),It=K.get("text-allow-overlap"),Mt=K.get("icon-allow-overlap"),Pt=K.get("text-rotation-alignment")==="map",dr=K.get("icon-rotation-alignment")==="map",sr=K.get("text-pitch-alignment")==="map",Qr=te.get("symbol-z-offset"),Br=K.get("symbol-elevation-reference")==="sea",Jr=K.get("symbol-placement"),[yn,vr]=K.get("text-size-scale-range"),[qt,kr]=K.get("icon-size-scale-range"),br=t.ay(P,yn,vr),an=t.ay(P,qt,kr),ln=K.get("text-variable-anchor"),dn=Pt&&Jr!=="point",Mn=dr&&Jr!=="point",di=ln&&j.hasTextData(),Ci=j.hasIconTextFit()&&di&&j.hasIconData();this.transform.setProjection(j.projection);const ti=di||dn,xi=Mn||Ci;let vi=It&&(Mt||!j.hasIconData()||Vt),qi=Mt&&(It||!j.hasTextData()||Dt);const fs=!Qr.isConstant();!j.collisionArrays&&Ke&&j.deserializeCollisionBoxes(Ke),E&&M&&j.updateCollisionDebugBuffers(this.transform.zoom,Ke,br,an);const Bs=(rs,io,fo)=>{const{crossTileID:ko,numVerticalGlyphVertices:Cs}=rs;let so=null;if(Ce&&Ce.dynamicFilterNeedsFeature||fs){const ys=this.retainedQueryData[j.bucketInstanceId];so=Tt.loadFeature({featureIndex:rs.featureIndex,bucketIndex:ys.bucketIndex,sourceLayerIndex:ys.sourceLayerIndex,layoutVertexArrayOffset:0})}if(Ce&&!(0,Ce.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},so,this.retainedQueryData[j.bucketInstanceId].tileID.canonical,new t.P(rs.tileAnchorX,rs.tileAnchorY),this.transform.calculateDistanceTileData(Ce.unwrappedTileID)))return this.placements[ko]=new bn(!1,!1,!1,!0),void A.add(ko);const he=Qr.evaluate(so,{});if(A.has(ko))return;if(qe)return void(this.placements[ko]=new bn(!1,!1,!1));let le=!1,ye=!1,_e=!0,De=!1,it=!1,At=null,Rt={box:null,offscreen:null,occluded:null},zt={box:null},Ir=null,Or=null,Xr=null,Fn=0,Vi=0,wi=0;fo.textFeatureIndex?Fn=fo.textFeatureIndex:rs.useRuntimeCollisionCircles&&(Fn=rs.featureIndex),fo.verticalTextFeatureIndex&&(Vi=fo.verticalTextFeatureIndex);const Ri=ys=>{ys.tileID=this.retainedQueryData[j.bucketInstanceId].tileID;const Xi=this.transform.elevation;ys.elevation=Br?he:he+(Xi?Xi.getAtTileOffset(ys.tileID,ys.tileAnchorX,ys.tileAnchorY):0),ys.elevation+=rs.zOffset},js=fo.textBox;if(js){Ri(js);const ys=mi=>{let zs=t.bI.horizontal;if(j.allowVerticalPlacement&&!mi&&this.prevPlacement){const Ys=this.prevPlacement.placedOrientations[ko];Ys&&(this.placedOrientations[ko]=Ys,zs=Ys,this.markUsedOrientation(j,zs,rs))}return zs},Xi=(mi,zs)=>{if(j.allowVerticalPlacement&&Cs>0&&fo.verticalTextBox){for(const Ys of j.writingModes)if(Ys===t.bI.vertical?(Rt=zs(),zt=Rt):Rt=mi(),Rt&&Rt.box&&Rt.box.length)break}else Rt=mi()};if(ln){let mi=ln;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ko]){const ss=this.prevPlacement.variableOffsets[ko];mi.indexOf(ss.anchor)>0&&(mi=mi.filter(Ba=>Ba!==ss.anchor),mi.unshift(ss.anchor))}const zs=(ss,Ba,ic)=>{const sc=j.getSymbolInstanceTextSize(lt,rs,this.transform.zoom,io),ga=(ss.x2-ss.x1)*sc+2*ss.padding,Ol=(ss.y2-ss.y1)*sc+2*ss.padding,Kl=rs.hasIconTextFit&&!Mt?Ba:null;Kl&&Ri(Kl);let Dl={box:[],offscreen:!1,occluded:!1};const ea=It?2*mi.length:mi.length;for(let Ac=0;Ac<ea;++Ac){const uu=this.attemptAnchorPlacement(mi[Ac%mi.length],ss,Qe,je,ti,ga,Ol,sc,Pt,sr,Pe,ge,vt,Ac>=mi.length,rs,io,j,ic,Kl,lt,dt);if(uu&&(Dl=uu.placedGlyphBoxes,Dl&&Dl.box&&Dl.box.length)){le=!0,At=uu.shift;break}}return Dl};Xi(()=>zs(js,fo.iconBox,t.bI.horizontal),()=>{const ss=fo.verticalTextBox;return ss&&Ri(ss),j.allowVerticalPlacement&&!(Rt&&Rt.box&&Rt.box.length)&&Cs>0&&ss?zs(ss,fo.verticalIconBox,t.bI.vertical):{box:null,offscreen:null,occluded:null}}),Rt&&(le=Rt.box,_e=Rt.offscreen,De=Rt.occluded);const Ys=ys(!(!Rt||!Rt.box));if(!le&&this.prevPlacement){const ss=this.prevPlacement.variableOffsets[ko];ss&&(this.variableOffsets[ko]=ss,this.markUsedJustification(j,ss.anchor,rs,Ys))}}else{const mi=(zs,Ys)=>{const ss=j.getSymbolInstanceTextSize(lt,rs,this.transform.zoom,io,P),Ba=this.collisionIndex.placeCollisionBox(j,ss,zs,Qe,je,ti,new t.P(0,0),It,Pe,ge,vt.predicate);return Ba&&Ba.box&&Ba.box.length&&(this.markUsedOrientation(j,Ys,rs),this.placedOrientations[ko]=Ys),Ba};Xi(()=>mi(js,t.bI.horizontal),()=>{const zs=fo.verticalTextBox;return j.allowVerticalPlacement&&Cs>0&&zs?(Ri(zs),mi(zs,t.bI.vertical)):{box:null,offscreen:null,occluded:null}}),ys(!!(Rt&&Rt.box&&Rt.box.length))}}if(Ir=Rt,le=Ir&&Ir.box&&Ir.box.length>0,_e=Ir&&Ir.offscreen,De=Ir&&Ir.occluded,rs.useRuntimeCollisionCircles){const ys=j.text.placedSymbolArray.get(rs.centerJustifiedTextSymbolIndex>=0?rs.centerJustifiedTextSymbolIndex:rs.verticalPlacedTextSymbolIndex),Xi=t.bJ(j.textSizeData,lt,ys),mi=K.get("text-padding");Or=this.collisionIndex.placeCollisionCircles(j,It,ys,j.lineVertexArray,j.glyphOffsetArray,Xi,ge,ve,Me,E,sr,vt.predicate,rs.collisionCircleDiameter*Xi/t.bU,mi,this.retainedQueryData[j.bucketInstanceId].tileID),le=It||Or.circles.length>0&&!Or.collisionDetected,_e=_e&&Or.offscreen,De=Or.occluded}if(fo.iconFeatureIndex&&(wi=fo.iconFeatureIndex),fo.iconBox){const ys=Xi=>{Ri(Xi);const mi=rs.hasIconTextFit&&At?Ti(At.x,At.y,Pt,sr,this.transform.angle):new t.P(0,0),zs=j.getSymbolInstanceIconSize(dt,this.transform.zoom,rs.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(j,zs,Xi,Qe,je,xi,mi,Mt,Pe,ge,vt.predicate)};zt&&zt.box&&zt.box.length&&fo.verticalIconBox?(Xr=ys(fo.verticalIconBox),ye=Xr.box.length>0):(Xr=ys(fo.iconBox),ye=Xr.box.length>0),_e=_e&&Xr.offscreen,it=Xr.occluded}const os=Dt||rs.numHorizontalGlyphVertices===0&&Cs===0,ns=Vt||rs.numIconVertices===0;if(os||ns?ns?os||(ye=ye&&le):le=ye&&le:ye=le=ye&&le,le&&Ir&&Ir.box&&this.collisionIndex.insertCollisionBox(Ir.box,K.get("text-ignore-placement"),j.bucketInstanceId,zt&&zt.box&&Vi?Vi:Fn,vt.ID),ye&&Xr&&this.collisionIndex.insertCollisionBox(Xr.box,K.get("icon-ignore-placement"),j.bucketInstanceId,wi,vt.ID),Or&&(le&&this.collisionIndex.insertCollisionCircles(Or.circles,K.get("text-ignore-placement"),j.bucketInstanceId,Fn,vt.ID),E)){const ys=j.bucketInstanceId;let Xi=this.collisionCircleArrays[ys];Xi===void 0&&(Xi=this.collisionCircleArrays[ys]=new Hn);for(let mi=0;mi<Or.circles.length;mi+=4)Xi.circles.push(Or.circles[mi+0]),Xi.circles.push(Or.circles[mi+1]),Xi.circles.push(Or.circles[mi+2]),Xi.circles.push(Or.collisionDetected?1:0)}const oo=j.projection.name!=="globe";vi=vi&&(oo||!De),qi=qi&&(oo||!it),this.placements[ko]=new bn(le||vi,ye||qi,_e||j.justReloaded),A.add(ko)},no=this.retainedQueryData[j.bucketInstanceId].tileID;if(j.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(j,no),j.elevationType==="road"&&j.updateRoadElevation(no.canonical),j.updateZOffset(),j.sortFeaturesByY){const rs=j.getSortedSymbolIndexes(this.transform.angle);for(let io=rs.length-1;io>=0;--io){const fo=rs[io];Bs(j.symbolInstances.get(fo),fo,j.collisionArrays[fo])}j.hasAnyZOffset&&t.w(`${j.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(j.hasAnyZOffset){const rs=j.getSortedIndexesByZOffset();for(let io=0;io<rs.length;++io){const fo=rs[io];Bs(j.symbolInstances.get(fo),fo,j.collisionArrays[fo])}}else for(let rs=c.symbolInstanceStart;rs<c.symbolInstanceEnd;rs++)Bs(j.symbolInstances.get(rs),rs,j.collisionArrays[rs]);if(E&&j.bucketInstanceId in this.collisionCircleArrays){const rs=this.collisionCircleArrays[j.bucketInstanceId];t.bi(rs.invProjMatrix,ge),rs.viewportMatrix=this.collisionIndex.getViewportMatrix()}j.justReloaded=!1}markUsedJustification(c,A,E,M){const{leftJustifiedTextSymbolIndex:P,centerJustifiedTextSymbolIndex:j,rightJustifiedTextSymbolIndex:K,verticalPlacedTextSymbolIndex:te,crossTileID:ge}=E,ve=t.b$(A),Me=M===t.bI.vertical?te:ve==="left"?P:ve==="center"?j:ve==="right"?K:-1;P>=0&&(c.text.placedSymbolArray.get(P).crossTileID=Me>=0&&P!==Me?0:ge),j>=0&&(c.text.placedSymbolArray.get(j).crossTileID=Me>=0&&j!==Me?0:ge),K>=0&&(c.text.placedSymbolArray.get(K).crossTileID=Me>=0&&K!==Me?0:ge),te>=0&&(c.text.placedSymbolArray.get(te).crossTileID=Me>=0&&te!==Me?0:ge)}markUsedOrientation(c,A,E){const M=A===t.bI.horizontal||A===t.bI.horizontalOnly?A:0,P=A===t.bI.vertical?A:0,{leftJustifiedTextSymbolIndex:j,centerJustifiedTextSymbolIndex:K,rightJustifiedTextSymbolIndex:te,verticalPlacedTextSymbolIndex:ge}=E,ve=c.text.placedSymbolArray;j>=0&&(ve.get(j).placedOrientation=M),K>=0&&(ve.get(K).placedOrientation=M),te>=0&&(ve.get(te).placedOrientation=M),ge>=0&&(ve.get(ge).placedOrientation=P)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const A=this.prevPlacement;let E=!1;this.prevZoomAdjustment=A?A.zoomAdjustment(this.transform.zoom):0;const M=A?A.symbolFadeChange(c):1,P=A?A.opacities:{},j=A?A.variableOffsets:{},K=A?A.placedOrientations:{};for(const te in this.placements){const ge=this.placements[te],ve=P[te];ve?(this.opacities[te]=new Wr(ve,M,ge.text,ge.icon,null,ge.clipped),E=E||ge.text!==ve.text.placed||ge.icon!==ve.icon.placed):(this.opacities[te]=new Wr(null,M,ge.text,ge.icon,ge.skipFade,ge.clipped),E=E||ge.text||ge.icon)}for(const te in P){const ge=P[te];if(!this.opacities[te]){const ve=new Wr(ge,M,!1,!1);ve.isHidden()||(this.opacities[te]=ve,E=E||ge.text.placed||ge.icon.placed)}}for(const te in j)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=j[te]);for(const te in K)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=K[te]);E?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=A?A.lastPlacementChangeTime:c)}updateLayerOpacities(c,A,E,M){const P=new Set;for(const j of A){const K=j.getBucket(c);K&&j.latestFeatureIndex&&c.fqid===K.layerIds[0]&&(this.updateBucketOpacities(K,P,j,j.collisionBoxArray,E,M,j.tileID,c.scope),K.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(K,j.tileID),K.elevationType==="road"&&K.updateRoadElevation(j.tileID.canonical),K.updateZOffset())}}updateBucketOpacities(c,A,E,M,P,j,K,te){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const ge=c.layers[0].layout,ve=c.layers[0].paint,Me=!!c.layers[0].dynamicFilter(),Ce=new Wr(null,0,!1,!1,!0),Pe=ge.get("text-allow-overlap"),Qe=ge.get("icon-allow-overlap"),je=ge.get("text-variable-anchor"),qe=ge.get("text-rotation-alignment")==="map",Ke=ge.get("text-pitch-alignment")==="map",lt=ve.get("symbol-z-offset"),dt=ge.get("symbol-elevation-reference")==="sea",vt=!lt.isConstant(),Tt=new Wr(null,0,Pe&&(Qe||!c.hasIconData()||ge.get("icon-optional")),Qe&&(Pe||!c.hasTextData()||ge.get("text-optional")),!0);!c.collisionArrays&&M&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(M);const Dt=(It,Mt,Pt)=>{for(let dr=0;dr<Mt/4;dr++)It.opacityVertexArray.emplaceBack(Pt)};let Vt=0;j&&c.updateReplacement(K,j);for(let It=0;It<c.symbolInstances.length;It++){const Mt=c.symbolInstances.get(It),{numHorizontalGlyphVertices:Pt,numVerticalGlyphVertices:dr,crossTileID:sr,numIconVertices:Qr,tileAnchorX:Br,tileAnchorY:Jr}=Mt;let yn=null;const vr=this.retainedQueryData[c.bucketInstanceId];vt&&Mt&&vr&&(yn=E.latestFeatureIndex.loadFeature({featureIndex:Mt.featureIndex,bucketIndex:vr.bucketIndex,sourceLayerIndex:vr.sourceLayerIndex,layoutVertexArrayOffset:0}));const qt=lt.evaluate(yn,{}),kr=A.has(sr);let br=this.opacities[sr];kr?br=Ce:br||(br=Tt,this.opacities[sr]=br),A.add(sr);const an=Pt>0||dr>0,ln=Qr>0,dn=this.placedOrientations[sr],Mn=dn===t.bI.vertical,di=dn===t.bI.horizontal||dn===t.bI.horizontalOnly;!an&&!ln||br.isHidden()||Vt++;let Ci=!1;if((an||ln)&&j)for(const ti of c.activeReplacements){if(t.bV(ti,P,t.bW.Symbol,te)||ti.min.x>Br||Br>ti.max.x||ti.min.y>Jr||Jr>ti.max.y)continue;const xi=t.bX(Br,Jr,K.canonical,ti.footprintTileId.canonical);if(Ci=t.bY(xi,ti.footprint),Ci)break}if(an){const ti=Ci?ps:Hi(br.text);Dt(c.text,Pt,Mn?ps:ti),Dt(c.text,dr,di?ps:ti);const xi=br.text.isHidden(),{leftJustifiedTextSymbolIndex:vi,centerJustifiedTextSymbolIndex:qi,rightJustifiedTextSymbolIndex:fs,verticalPlacedTextSymbolIndex:Bs}=Mt,no=c.text.placedSymbolArray,rs=xi||Mn?1:0;vi>=0&&(no.get(vi).hidden=rs),qi>=0&&(no.get(qi).hidden=rs),fs>=0&&(no.get(fs).hidden=rs),Bs>=0&&(no.get(Bs).hidden=xi||di?1:0);const io=this.variableOffsets[sr];io&&this.markUsedJustification(c,io.anchor,Mt,dn);const fo=this.placedOrientations[sr];fo&&(this.markUsedJustification(c,"left",Mt,fo),this.markUsedOrientation(c,fo,Mt))}if(ln){const ti=Ci?ps:Hi(br.icon),{placedIconSymbolIndex:xi,verticalPlacedIconSymbolIndex:vi}=Mt,qi=c.icon.placedSymbolArray,fs=br.icon.isHidden()?1:0;xi>=0&&(Dt(c.icon,Qr,Mn?ps:ti),qi.get(xi).hidden=fs),vi>=0&&(Dt(c.icon,Mt.numVerticalIconVertices,di?ps:ti),qi.get(vi).hidden=fs)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const ti=c.collisionArrays[It];if(ti){let xi=new t.P(0,0),vi=!0;if(ti.textBox||ti.verticalTextBox){if(je){const fs=this.variableOffsets[sr];fs?(xi=ei(fs.anchor,fs.width,fs.height,fs.textOffset,fs.textScale),qe&&xi._rotate(Ke?this.transform.angle:-this.transform.angle)):vi=!1}Me&&(vi=!br.clipped),ti.textBox&&ma(c.textCollisionBox.collisionVertexArray,br.text.placed,!vi||Mn,qt,dt,xi.x,xi.y),ti.verticalTextBox&&ma(c.textCollisionBox.collisionVertexArray,br.text.placed,!vi||di,qt,dt,xi.x,xi.y)}const qi=vi&&!!(!di&&ti.verticalIconBox);ti.iconBox&&ma(c.iconCollisionBox.collisionVertexArray,br.icon.placed,qi,qt,dt,Mt.hasIconTextFit?xi.x:0,Mt.hasIconTextFit?xi.y:0),ti.verticalIconBox&&ma(c.iconCollisionBox.collisionVertexArray,br.icon.placed,!qi,qt,dt,Mt.hasIconTextFit?xi.x:0,Mt.hasIconTextFit?xi.y:0)}}}if(c.fullyClipped=Vt===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const It=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=It.invProjMatrix,c.placementViewportMatrix=It.viewportMatrix,c.collisionCircleArray=It.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,A){const E=this.zoomAtLastRecencyCheck===A?1-this.zoomAdjustment(A):1;return this.zoomAtLastRecencyCheck=A,this.commitTime+this.fadeDuration*E>c}setStale(){this.stale=!0}}function ma(C,c,A,E,M,P,j){C.emplaceBack(c?1:0,A?1:0,P||0,j||0,E,M?1:0),C.emplaceBack(c?1:0,A?1:0,P||0,j||0,E,M?1:0),C.emplaceBack(c?1:0,A?1:0,P||0,j||0,E,M?1:0),C.emplaceBack(c?1:0,A?1:0,P||0,j||0,E,M?1:0)}const Fe=Math.pow(2,25),pt=Math.pow(2,24),lr=Math.pow(2,17),gr=Math.pow(2,16),Kr=Math.pow(2,9),Zr=Math.pow(2,8),Gn=Math.pow(2,1);function Hi(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const c=C.placed?1:0,A=Math.floor(127*C.opacity);return A*Fe+c*pt+A*lr+c*gr+A*Kr+c*Zr+A*Gn+c}const ps=0;class ws{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(c,A,E,M,P,j){const K=this._bucketParts;for(;this._currentTileIndex<c.length;)if(A.getBucketParts(K,M,c[this._currentTileIndex],this._sortAcrossTiles,j),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,K.sort((te,ge)=>te.sortKey-ge.sortKey));this._currentPartIndex<K.length;){const te=K[this._currentPartIndex];if(A.placeLayerBucketPart(te,this._seenCrossTileIDs,E,te.symbolInstanceStart===0,j),this._currentPartIndex++,P())return!0}return!1}}class Ns{constructor(c,A,E,M,P,j,K,te,ge){this.placement=new vs(c,P,j,K,te,ge),this._currentPlacementIndex=A.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(c,A,E,M,P){const j=t.q.now(),K=()=>{const te=t.q.now()-j;return!this._forceFullPlacement&&te>2};for(;this._currentPlacementIndex>=0;){const te=A[c[this._currentPlacementIndex]],ge=this.placement.collisionIndex.transform.zoom;if(te.type==="symbol"&&(!te.minzoom||te.minzoom<=ge)&&(!te.maxzoom||te.maxzoom>ge)){const ve=te,Me=ve.layout.get("symbol-z-elevate"),Ce=ve.layout.get("symbol-sort-key").constantOr(1)!==void 0,Pe=ve.layout.get("symbol-z-order"),Qe=Pe==="viewport-y"||Pe==="auto"&&!(Pe!=="viewport-y"&&Ce),je=ve.layout.get("text-allow-overlap")||ve.layout.get("icon-allow-overlap")||ve.layout.get("text-ignore-placement")||ve.layout.get("icon-ignore-placement"),qe=Qe&&je,Ke=this._inProgressLayer=this._inProgressLayer||new ws(ve),lt=t.C(te.source,te.scope);if(Ke.continuePlacement(Me||qe?M[lt]:E[lt],this.placement,this._showCollisionBoxes,te,K,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Ws=512/t.aj/2;class vo{constructor(c,A,E){this.tileID=c,this.bucketInstanceId=E,this.index=new t.c0(A.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const M=c.canonical.x*t.aj,P=c.canonical.y*t.aj;for(let j=0;j<A.length;j++){const{key:K,crossTileID:te,tileAnchorX:ge,tileAnchorY:ve}=A.get(j),Me=Math.floor((M+ge)*Ws),Ce=Math.floor((P+ve)*Ws);this.index.add(Me,Ce),this.keys.push(K),this.crossTileIDs.push(te)}this.index.finish()}findMatches(c,A,E){const M=this.tileID.canonical.z<A.canonical.z?1:Math.pow(2,this.tileID.canonical.z-A.canonical.z),P=Ws/Math.pow(2,A.canonical.z-this.tileID.canonical.z),j=A.canonical.x*t.aj,K=A.canonical.y*t.aj;for(let te=0;te<c.length;te++){const ge=c.get(te);if(ge.crossTileID)continue;const{key:ve,tileAnchorX:Me,tileAnchorY:Ce}=ge,Pe=Math.floor((j+Me)*P),Qe=Math.floor((K+Ce)*P),je=this.index.range(Pe-M,Qe-M,Pe+M,Qe+M).sort((qe,Ke)=>qe-Ke);for(const qe of je){const Ke=this.crossTileIDs[qe];if(this.keys[qe]===ve&&!E.has(Ke)){E.add(Ke),ge.crossTileID=Ke;break}}}}}class qs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class as{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const A=Math.round((c-this.lng)/360);if(A!==0)for(const E in this.indexes){const M=this.indexes[E],P={};for(const j in M){const K=M[j];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+A),P[K.tileID.key]=K}this.indexes[E]=P}this.lng=c}addBucket(c,A,E){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===A.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let P=0;P<A.symbolInstances.length;P++)A.symbolInstances.get(P).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]=new Set);const M=this.usedCrossTileIDs[c.overscaledZ];for(const P in this.indexes){const j=this.indexes[P];if(Number(P)>c.overscaledZ)for(const K in j){const te=j[K];te.tileID.isChildOf(c)&&te.findMatches(A.symbolInstances,c,M)}else{const K=j[c.scaledTo(Number(P)).key];K&&K.findMatches(A.symbolInstances,c,M)}}for(let P=0;P<A.symbolInstances.length;P++){const j=A.symbolInstances.get(P);j.crossTileID||(j.crossTileID=E.generate(),M.add(j.crossTileID))}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new vo(c,A.symbolInstances,A.bucketInstanceId),!0}removeBucketCrossTileIDs(c,A){for(const E of A.crossTileIDs)this.usedCrossTileIDs[c].delete(E)}removeStaleBuckets(c){let A=!1;for(const E in this.indexes){const M=this.indexes[E];for(const P in M)c[M[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(E,M[P]),delete M[P],A=!0)}return A}}class Qo{constructor(){this.layerIndexes={},this.crossTileIDs=new qs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,A,E,M){let P=this.layerIndexes[c.fqid];P===void 0&&(P=this.layerIndexes[c.fqid]=new as);let j=!1;const K={};M.name!=="globe"&&P.handleWrapJump(E);for(const te of A){const ge=te.getBucket(c);ge&&c.fqid===ge.layerIds[0]&&(ge.bucketInstanceId||(ge.bucketInstanceId=++this.maxBucketInstanceId),P.addBucket(te.tileID,ge,this.crossTileIDs)&&(j=!0),K[ge.bucketInstanceId]=!0)}return P.removeStaleBuckets(K)&&(j=!0),j}pruneUnusedLayers(c){const A={};c.forEach(E=>{A[E]=!0});for(const E in this.layerIndexes)A[E]||delete this.layerIndexes[E]}}const Vo=771;class Li{constructor(c,A,E,M){this.blendFunction=c,this.blendColor=A.toNonPremultipliedRenderColor(null),this.mask=E,this.blendEquation=M}}Li.Replace=[1,0,1,0],Li.disabled=new Li(Li.Replace,t.am.transparent,[!1,!1,!1,!1]),Li.unblended=new Li(Li.Replace,t.am.transparent,[!0,!0,!0,!0]),Li.alphaBlended=new Li([1,Vo,1,Vo],t.am.transparent,[!0,!0,!0,!0]),Li.alphaBlendedNonPremultiplied=new Li([770,Vo,770,Vo],t.am.transparent,[!0,!0,!0,!0]),Li.multiply=new Li([774,0,774,0],t.am.transparent,[!0,!0,!0,!0]);class Sn{constructor(c,A,E){this.func=c,this.mask=A,this.range=E}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const ia=7680;class Ii{constructor(c,A,E,M,P,j){this.test=c,this.ref=A,this.mask=E,this.fail=M,this.depthFail=P,this.pass=j}}Ii.disabled=new Ii({func:519,mask:0},0,0,ia,ia,ia);const As=1029,sa=2305;class Ai{constructor(c,A,E){this.enable=c,this.mode=A,this.frontFace=E}}function aa(C,c){const A=t.c6(C,3);t.c8(C,c),t.cc(C,3,A)}function ru(C,c){const A=t.c3([]);return t.c4(A,A,-c),t.c5(A,A,-C),A}function Tl(C,c){const A=[C[0],C[1],0],E=[c[0],c[1],0];if(t.ae(A)>=1e-15){const j=t.au([],A);t.c1(E,j,t.bG(E,j)),c[0]=E[0],c[1]=E[1]}const M=t.bF([],c,C);if(t.c2(M)<1e-15)return null;const P=Math.atan2(-M[1],M[0]);return ru(Math.atan2(Math.sqrt(C[0]*C[0]+C[1]*C[1]),-C[2]),P)}Ai.disabled=new Ai(!1,As,sa),Ai.backCCW=new Ai(!0,As,sa),Ai.backCW=new Ai(!0,As,2304),Ai.frontCW=new Ai(!0,1028,2304),Ai.frontCCW=new Ai(!0,1028,sa);class al{constructor(c,A){this.position=c,this.orientation=A}get position(){return this._position}set position(c){if(c){const A=c instanceof t.ac?c:new t.ac(c[0],c[1],c[2]);this._renderWorldCopies&&(A.x=t.bQ(A.x,0,1)),this._position=A}else this._position=null}lookAtPoint(c,A){if(this.orientation=null,!this.position)return;const E=this.position,M=this._elevation?this._elevation.getAtPointOrZero(t.ac.fromLngLat(c)):0,P=t.ac.fromLngLat(c,M),j=[P.x-E.x,P.y-E.y,P.z-E.z];A||(A=[0,0,1]),A[2]=Math.abs(A[2]),this.orientation=Tl(j,A)}setPitchBearing(c,A){this.orientation=ru(t.al(c),t.al(-A))}}class Us{constructor(c,A){this._transform=t.bx([]),this.orientation=A,this.position=c}get mercatorPosition(){const c=this.position;return new t.ac(c[0],c[1],c[2])}get position(){const c=t.c6(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var A;c&&t.cc(this._transform,3,[(A=c)[0],A[1],A[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||t.c3([]),c&&aa(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),A=this.right();return{bearing:Math.atan2(-A[1],A[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,A){this._orientation=ru(c,A),aa(this._transform,this._orientation)}forward(){const c=t.c6(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=t.c6(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=t.c6(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,A){const E=new Float64Array(16);return t.bi(E,this.getWorldToCamera(c,A)),E}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(c,A,E){const M=this.position;t.c1(M,M,-c);const P=new Float64Array(16);return t.bn(P,[E,E,E]),t.bo(P,P,M),P[10]*=A,P}getWorldToCamera(c,A){const E=new Float64Array(16),M=new Float64Array(4),P=this.position;return t.c7(M,this._orientation),t.c1(P,P,-c),t.c8(E,M),t.bo(E,E,P),E[1]*=-1,E[5]*=-1,E[9]*=-1,E[13]*=-1,E[8]*=A,E[9]*=A,E[10]*=A,E[11]*=A,E}getCameraToClipPerspective(c,A,E,M){const P=new Float64Array(16);return t.c9(P,c,A,E,M),P}getCameraToClipOrthographic(c,A,E,M,P,j){const K=new Float64Array(16);return t.ca(K,c,A,E,M,P,j),K}getDistanceToElevation(c,A=!1){const E=c===0?0:t.cb(c,A?t.aY(this.position[1]):this.position[1]),M=this.forward();return(E-this.position[2])/M[2]}clone(){return new Us([...this.position],[...this.orientation])}}const Xa={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class jl{constructor(c=0,A=0,E=0,M=0){if(isNaN(c)||c<0||isNaN(A)||A<0||isNaN(E)||E<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=A,this.left=E,this.right=M}interpolate(c,A,E){return A.top!=null&&c.top!=null&&(this.top=t.ai(c.top,A.top,E)),A.bottom!=null&&c.bottom!=null&&(this.bottom=t.ai(c.bottom,A.bottom,E)),A.left!=null&&c.left!=null&&(this.left=t.ai(c.left,A.left,E)),A.right!=null&&c.right!=null&&(this.right=t.ai(c.right,A.right,E)),this}getCenter(c,A){const E=t.ay((this.left+c-this.right)/2,0,c),M=t.ay((this.top+A-this.bottom)/2,0,A);return new t.P(E,M)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new jl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Sa=15;class Al{constructor(c,A,E,M,P,j,K){this.tileSize=512,this._renderWorldCopies=P===void 0||P,this._minZoom=c||0,this._maxZoom=A||22,this._minPitch=E??0,this._maxPitch=M??60,this.setProjection(j),this.setMaxBounds(K),this.width=0,this.height=0,this._center=new t.ci(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new jl,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Us,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const c=new Al(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c._allowWorldUnderZoom=this._allowWorldUnderZoom,c}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Sa}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(c,A=!1){const E=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||E)&&this._updateCameraOnTerrain(),(c||E)&&this._constrainCamera(A),this._calcMatrices()}getProjection(){return t.aF(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const A=this.projection?this.getProjection():void 0;this.projection=t.cj(this.projectionOptions);const E=this.getProjection(),M=!t.bv(A,E);return M&&this._calcMatrices(),this.mercatorFromTransition=!1,M}setOrthographicProjectionAtLowPitch(c){return this._orthographicProjectionAtLowPitch!==c&&(this._orthographicProjectionAtLowPitch=c,this._calcMatrices(),!0)}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.cj({name:"mercator"});const A=c!==this.projection.name;return A&&this._calcMatrices(),A}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.cb(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this.width,this.height)}get bearing(){return t.bQ(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const A=-c*Math.PI/180;this.angle!==A&&(this._unmodified=!1,this.angle=A,this._calcMatrices(),this.rotationMatrix=t.ck(),t.cl(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const A=t.ay(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==A&&(this._unmodified=!1,this._pitch=A,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=t.al(c),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const A=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==A&&(this._unmodified=!1,this._setZoom(A),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(c){this._tileCoverLift!==c&&(this._tileCoverLift=c)}_updateCameraOnTerrain(){const c=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,A=this.elevation&&c===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||c===Number.NEGATIVE_INFINITY&&(!A||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const E=this._elevation;A||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&E.exaggeration()&&this._centerAltitudeValidForExaggeration!==E.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*E.exaggeration(),this._centerAltitudeValidForExaggeration=E.exaggeration()):(this._centerAltitude=c||0,this._centerAltitudeValidForExaggeration=E.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){if(this._centerAltitudeValidForExaggeration===void 0)return;const c=Math.max(0,(this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize);this._seaLevelZoom=this._zoomFromMercatorZ(c)}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,A=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],E=this.horizonLineFromTop();let M=0,P=0;for(let j=0;j<A.length;j++){const K=new t.P(A[j][0]*this.width,E+A[j][1]*(this.height-E)),te=c.pointCoordinate(K);if(!te)continue;const ge=1/Math.hypot(te[0]-this._camera.position[0],te[1]-this._camera.position[1]);M+=te[3]*ge,P+=ge}return P===0?NaN:M/P}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,A=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),E=this.pixelsPerMeter/this.worldSize*A,M=this._mercatorZfromZoom(c),P=this._mercatorZfromZoom(this._maxZoom),j=Math.max(M-E,P);this._setZoom(this._zoomFromMercatorZ(j))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const A=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let E;E=c.z<this._camera.position[2]?[A.x,A.y,A.z]:[c.x,c.y,c.z];const M=t.ae(t.at([],this._camera.position,E));return t.ay(this._zoomFromMercatorZ(M),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let A=!1;if(c.orientation&&!t.cm(c.orientation,this._camera.orientation)&&(A=this._setCameraOrientation(c.orientation)),c.position){const E=[c.position.x,c.position.y,c.position.z];t.cn(E,this._camera.position)||(this._setCameraPosition(E),A=!0)}A&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,A=new al;return A.position=new t.ac(c[0],c[1],c[2]),A.orientation=this._camera.orientation,A._elevation=this.elevation,A._renderWorldCopies=this.renderWorldCopies,A}_setCameraOrientation(c){if(!t.co(c))return!1;t.cp(c,c);const A=t.cq([],[0,0,-1],c),E=t.cq([],[0,-1,0],c);if(E[2]<0)return!1;const M=Tl(A,E);return!!M&&(this._camera.orientation=M,!0)}_setCameraPosition(c){const A=this.zoomScale(this.minZoom)*this.tileSize,E=this.zoomScale(this.maxZoom)*this.tileSize,M=this.cameraToCenterDistance;c[2]=t.ay(c[2],M/E,M/A),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,A,E){this._unmodified=!1,this._edgeInsets.interpolate(c,A,E),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const A=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,A)}getVisibleUnwrappedCoordinates(c){const A=[new t.cr(0,c)];if(this.renderWorldCopies){const E=this.pointCoordinate(new t.P(0,0)),M=this.pointCoordinate(new t.P(this.width,0)),P=this.pointCoordinate(new t.P(this.width,this.height)),j=this.pointCoordinate(new t.P(0,this.height)),K=Math.floor(Math.min(E.x,M.x,P.x,j.x)),te=Math.floor(Math.max(E.x,M.x,P.x,j.x)),ge=1;for(let ve=K-ge;ve<=te+ge;ve++)ve!==0&&A.push(new t.cr(ve,c))}return A}isLODDisabled(c){return(!c||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(c,A,E){let M=[];const P=E!=null,j=!P;if(j&&this.zoom<A||P&&E[0]===0&&E[1]===0)return M;const K=new Set,te=(ve,Me,Ce,Pe,Qe)=>{const je=t.cV(Me,ve,Ce,Pe,Qe);K.has(je)||(M.push(new t.aM(ve,Me,Ce,Pe,Qe)),K.add(je))};for(let ve=0;ve<c.length;ve++){const Me=c[ve];if(j&&Me.canonical.z!==A)continue;const Ce=Me.canonical,Pe=Me.overscaledZ,Qe=Me.wrap,je=1<<Ce.z,qe=Ce.x+1<je,Ke=Ce.x>0,lt=Ce.y+1<je,dt=Ce.y>0,vt=Me.wrap-(Ke?0:1),Tt=Me.wrap+(qe?0:1),Dt=Ke?Ce.x-1:je-1,Vt=qe?Ce.x+1:0;if(P)E[0]<0?(te(Pe,Tt,Ce.z,Vt,Ce.y),E[1]<0&&lt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y+1),te(Pe,Tt,Ce.z,Vt,Ce.y+1)),E[1]>0&&dt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y-1),te(Pe,Tt,Ce.z,Vt,Ce.y-1))):E[0]>0?(te(Pe,vt,Ce.z,Dt,Ce.y),E[1]<0&&lt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y+1),te(Pe,vt,Ce.z,Dt,Ce.y+1)),E[1]>0&&dt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y-1),te(Pe,vt,Ce.z,Dt,Ce.y-1))):E[1]<0&&lt?te(Pe,Qe,Ce.z,Ce.x,Ce.y+1):dt&&te(Pe,Qe,Ce.z,Ce.x,Ce.y-1);else{const It=Me.visibleQuadrants;1&It&&(te(Pe,vt,Ce.z,Dt,Ce.y),dt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y-1),te(Pe,vt,Ce.z,Dt,Ce.y-1))),2&It&&(te(Pe,Tt,Ce.z,Vt,Ce.y),dt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y-1),te(Pe,Tt,Ce.z,Vt,Ce.y-1))),4&It&&(te(Pe,vt,Ce.z,Dt,Ce.y),lt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y+1),te(Pe,vt,Ce.z,Dt,Ce.y+1))),8&It&&(te(Pe,Tt,Ce.z,Vt,Ce.y),lt&&(te(Pe,Qe,Ce.z,Ce.x,Ce.y+1),te(Pe,Tt,Ce.z,Vt,Ce.y+1)))}}const ge=[];for(const ve of M)M.some(Me=>ve.isChildOf(Me))||ge.push(ve);if(M=ge.filter(ve=>!c.some(Me=>!!(ve.overscaledZ<A&&Me.isChildOf(ve))||ve.equals(Me)||ve.isChildOf(Me))),j){const ve=1<<A,Me=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Ce=[ve*Me.x,ve*Me.y],Pe=4,Qe=Pe*Pe;M=M.filter(je=>{const qe=je.canonical.x+.5-Ce[0],Ke=je.canonical.y+.5-Ce[1];return qe*qe+Ke*Ke<Qe})}return M}extendTileCoverToNearPlane(c,A,E){const M=[],P=new Set;for(const lt of c)P.add(lt.key);const j=(lt,dt,vt,Tt,Dt)=>{const Vt=t.cV(dt,lt,vt,Tt,Dt);P.has(Vt)||(M.push(new t.aM(lt,dt,vt,Tt,Dt)),P.add(Vt))},K=c.reduce((lt,dt)=>Math.max(lt,dt.overscaledZ),E),te=1<<E,ge=[new t.P(0,0),new t.P(t.aj,0),new t.P(t.aj,t.aj),new t.P(0,t.aj)],ve=new t.P(0,0),Me=new t.P(0,0),Ce=(lt,dt)=>{const vt=Math.floor(lt[0]),Tt=Math.floor(lt[1]),Dt=(lt[0]-vt)*t.aj,Vt=(lt[1]-Tt)*t.aj,It=Math.floor(dt[0]),Mt=Math.floor(dt[1]),Pt=(dt[0]-It)*t.aj,dr=(dt[1]-Mt)*t.aj;for(let sr=-1;sr<=1;sr++){const Qr=vt+sr;if(!(Qr<0||Qr>=te)){ve.x=Dt-sr*t.aj,Me.x=Pt-(Qr-It)*t.aj;for(let Br=-1;Br<=1;Br++){const Jr=Tt+Br;ve.y=Vt-Br*t.aj,Me.y=dr-(Jr-Mt)*t.aj,t.cW(ve,Me,ge)&&j(K,0,E,Qr,Jr)}}}},Pe=A.points,Qe=Pe[t.cs],je=Pe[t.ct],qe=this._projectToGround(Qe,Pe[t.cu]),Ke=this._projectToGround(je,Pe[t.cv]);return Ce(Qe,qe),Ce(je,Ke),M}_projectToGround(c,A){return t.cw(t.cx(),c,A,c[2]/(c[2]-A[2]))}coveringTiles(c){let A=this.coveringZoomLevel(c);const E=A,M=this.elevation&&this.elevation.exaggeration(),P=M&&!c.isTerrainDEM,j=this.projection.name==="mercator";if(c.minzoom!==void 0&&A<c.minzoom)return[];c.maxzoom!==void 0&&A>c.maxzoom&&(A=c.maxzoom);const K=this.locationCoordinate(this.center),te=this.center.lat,ge=1<<A,ve=[ge*K.x,ge*K.y,0],Me=this.projection.name==="globe",Ce=!Me,Pe=t.cy.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,A,Ce),Qe=Me?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),je=ge*t.cb(1,this.center.lat),qe=this._camera.position[2]/t.cb(1,this.center.lat),Ke=[ge*Qe.x,ge*Qe.y,qe*(Ce?1:je)],lt=Me||M,dt=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),vt=this.isLODDisabled(!0)?A:0;let Tt;if(this._elevation&&c.isTerrainDEM)Tt=1e4*this._elevation.exaggeration();else if(this._elevation){const qt=this._elevation.getMinMaxForVisibleTiles();Tt=qt?qt.max:this._centerAltitude}else Tt=this._centerAltitude;const Dt=c.isTerrainDEM?-Tt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Vt=this.projection.isReprojectedInTileSpace?t.cz(this):1,It=qt=>{const br=new t.ac(qt.x+25e-6,qt.y,qt.z),an=new t.ac(qt.x,qt.y+25e-6,qt.z),ln=qt.toLngLat(),dn=br.toLngLat(),Mn=an.toLngLat(),di=this.locationCoordinate(ln),Ci=this.locationCoordinate(dn),ti=this.locationCoordinate(Mn),xi=Math.hypot(Ci.x-di.x,Ci.y-di.y),vi=Math.hypot(ti.x-di.x,ti.y-di.y);return Math.sqrt(xi*vi)*Vt/25e-6},Mt=qt=>{const kr=Tt,br=Dt;return{aabb:t.cC(this,ge,0,0,0,qt,br,kr,this.projection),zoom:0,x:0,y:0,minZ:br,maxZ:kr,wrap:qt,fullyVisible:!1}},Pt=[];let dr=[];const sr=A,Qr=c.reparseOverscaled?E:A,Br=(qe-this._centerAltitude)*je,Jr=qt=>{if(!this._elevation||!qt.tileID||!j)return;const kr=this._elevation.getMinMaxForTile(qt.tileID),br=qt.aabb;kr?(br.min[2]=kr.min,br.max[2]=kr.max,br.center[2]=(br.min[2]+br.max[2])/2):(qt.shouldSplit=vr(qt),qt.shouldSplit||(br.min[2]=br.max[2]=br.center[2]=this._centerAltitude))},yn=(qt,kr)=>{if(.707*kr<qt)return 1;const br=kr/qt;return br/(1.4144271570014144+(Math.pow(1.1,br-1.4144271570014144+1)-1)/(1.1-1)-1)},vr=qt=>{if(qt.zoom<vt)return!0;if(qt.zoom===sr)return!1;if(qt.shouldSplit!=null)return qt.shouldSplit;const kr=qt.aabb.distanceX(Ke),br=qt.aabb.distanceY(Ke);let an=Br,ln=1;if(Me){an=qt.aabb.distanceZ(Ke);const vi=Math.pow(2,qt.zoom),qi=t.aY((qt.y+1)/vi),fs=t.aY(qt.y/vi),Bs=Math.min(Math.max(te,qi),fs),no=t.c_(Bs)/t.c_(te);if(ln=Bs===te?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,no/this._mercatorScaleRatio),this.zoom<=t.cX&&qt.zoom===sr-1&&no>=.9)return!0}else if(P&&(an=qt.aabb.distanceZ(Ke)*je),this.projection.isReprojectedInTileSpace&&E<=5){const vi=Math.pow(2,qt.zoom),qi=It(new t.ac((qt.x+.5)/vi,(qt.y+.5)/vi));ln=qi>.85?1:qi}if(!j){const vi=Math.sqrt(kr*kr+br*br+an*an);let qi=(1<<sr-qt.zoom)*dt*ln;return qi*=yn(Math.max(an,Br),vi),vi<qi}let dn=Number.MAX_VALUE,Mn=0;const di=qt.aabb.getCorners(),Ci=[];for(const vi of di){t.at(Ci,vi,Ke),Me||(P?Ci[2]*=je:Ci[2]=Br);const qi=t.bG(Ci,this._camera.forward());qi<dn&&(dn=qi,Mn=Math.abs(Ci[2]))}let ti=(1<<sr-qt.zoom)*dt*ln;if(ti*=yn(Math.max(Mn,Br),dn),dn<ti)return!0;const xi=qt.aabb.closestPoint(ve);return xi[0]===ve[0]&&xi[1]===ve[1]};if(this.renderWorldCopies)for(let qt=1;qt<=3;qt++)Pt.push(Mt(-qt)),Pt.push(Mt(qt));for(Pt.push(Mt(0));Pt.length>0;){const qt=Pt.pop(),kr=qt.x,br=qt.y;let an=qt.fullyVisible;const ln=()=>this.projection.name==="globe"&&(qt.y===0||qt.y===(1<<qt.zoom)-1);if(!an){let dn=lt?qt.aabb.intersects(Pe):qt.aabb.intersectsFlat(Pe);if(dn===0&&ln()){const Mn=new t.cA(qt.zoom,kr,br);dn=t.cB(this,ge,Mn,!0).intersects(Pe)}if(dn===0)continue;an=dn===2}if(qt.zoom!==sr&&vr(qt))for(let dn=0;dn<4;dn++){const Mn=(kr<<1)+dn%2,di=(br<<1)+(dn>>1),Ci={aabb:j?qt.aabb.quadrant(dn):t.cC(this,ge,qt.zoom+1,Mn,di,qt.wrap,qt.minZ,qt.maxZ,this.projection),zoom:qt.zoom+1,x:Mn,y:di,wrap:qt.wrap,fullyVisible:an,tileID:void 0,shouldSplit:void 0,minZ:qt.minZ,maxZ:qt.maxZ};P&&!Me&&(Ci.tileID=new t.aM(qt.zoom+1===sr?Qr:qt.zoom+1,qt.wrap,qt.zoom+1,Mn,di),Jr(Ci)),Pt.push(Ci)}else{const dn=qt.zoom===sr?Qr:qt.zoom;if(c.minzoom&&c.minzoom>dn)continue;let Mn=0;if(!an){let xi=lt?qt.aabb.intersectsPrecise(Pe):qt.aabb.intersectsPreciseFlat(Pe);if(xi===0&&ln()){const vi=new t.cA(qt.zoom,kr,br);xi=t.cB(this,ge,vi,!0).intersectsPrecise(Pe)}if(xi===0)continue;if(c.calculateQuadrantVisibility)if(Pe.containsPoint(qt.aabb.center))Mn=15;else for(let vi=0;vi<4;vi++)qt.aabb.quadrant(vi).intersects(Pe)!==0&&(Mn|=1<<vi)}const di=ve[0]-(.5+kr+(qt.wrap<<qt.zoom))*(1<<A-qt.zoom),Ci=ve[1]-.5-br,ti=qt.tileID?qt.tileID:new t.aM(dn,qt.wrap,qt.zoom,kr,br);c.calculateQuadrantVisibility&&(ti.visibleQuadrants=Mn),dr.push({tileID:ti,distanceSq:di*di+Ci*Ci})}}if(this.fogCullDistSq){const qt=this.fogCullDistSq,kr=this.horizonLineFromTop();dr=dr.filter(br=>{const an=[0,0,0,1],ln=[t.aj,t.aj,0,1],dn=this.calculateFogTileMatrix(br.tileID.toUnwrapped());t.aA(an,an,dn),t.aA(ln,ln,dn);const Mn=t.cD([],an,ln),di=t.cE([],an,ln),Ci=t.cY(Mn,di);if(Ci===0)return!0;let ti=!1;const xi=this._elevation;if(xi&&Ci>qt&&kr!==0){const vi=this.calculateProjMatrix(br.tileID.toUnwrapped());let qi;c.isTerrainDEM||(qi=xi.getMinMaxForTile(br.tileID)),qi||(qi={min:Dt,max:Tt});const fs=t.cF(this.rotation),Bs=[fs[0]*t.aj,fs[1]*t.aj,qi.max];t.ad(Bs,Bs,vi),ti=(1-Bs[1])*this.height*.5<kr}return Ci<qt||ti})}return dr.sort((qt,kr)=>qt.distanceSq-kr.distanceSq).map(qt=>qt.tileID)}resize(c,A){this.width=c,this.height=A,this.pixelsToGLUnits=[2/c,-2/A],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const A=t.ay(c.lat,-t.cG,t.cG),E=this.projection.project(c.lng,A);return new t.P(E.x*this.worldSize,E.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/t.cb(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,A){let E,M;const P=this.centerPoint;if(this.projection.name==="globe"){const K=this.worldSize;E=(A.x-P.x)/K,M=(A.y-P.y)/K}else{const K=this.pointCoordinate(A),te=this.pointCoordinate(P);E=K.x-te.x,M=K.y-te.y}const j=this.locationCoordinate(c);this.setLocation(new t.ac(j.x-E,j.y-M))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c,A){return this.projection.locationPoint(this,c,A)}locationPoint3D(c,A){return this.projection.locationPoint(this,c,A,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c,A){return this.coordinateLocation(this.pointCoordinate3D(c,A))}locationCoordinate(c,A){const E=A?t.cb(A,c.lat):void 0,M=this.projection.project(c.lng,c.lat);return new t.ac(M.x,M.y,E)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,A){const E=A??this._centerAltitude,M=[c.x,c.y,0,1],P=[c.x,c.y,1,1];t.aA(M,M,this.pixelMatrixInverse),t.aA(P,P,this.pixelMatrixInverse);const j=P[3];t.cH(M,M,1/M[3]),t.cH(P,P,1/j);const K=M[2],te=P[2];return{p0:M,p1:P,t:K===te?0:(E-K)/(te-K)}}screenPointToMercatorRay(c){const A=[c.x,c.y,0,1],E=[c.x,c.y,1,1];return t.aA(A,A,this.pixelMatrixInverse),t.aA(E,E,this.pixelMatrixInverse),t.cH(A,A,1/A[3]),t.cH(E,E,1/E[3]),A[2]=t.cb(A[2],this._center.lat)*this.worldSize,E[2]=t.cb(E[2],this._center.lat)*this.worldSize,t.cH(A,A,1/this.worldSize),t.cH(E,E,1/this.worldSize),new t.av([A[0],A[1],A[2]],t.au([],t.at([],E,A)))}rayIntersectionCoordinate(c){const{p0:A,p1:E,t:M}=c,P=t.cb(A[2],this._center.lat),j=t.cb(E[2],this._center.lat);return new t.ac(t.ai(A[0],E[0],M)/this.worldSize,t.ai(A[1],E[1],M)/this.worldSize,t.ai(P,j,M))}pointCoordinate(c,A=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,A)}pointCoordinate3D(c,A){if(!this.elevation)return this.pointCoordinate(c,A);let E=this.projection.pointCoordinate3D(this,c.x,c.y);if(E)return new t.ac(E[0],E[1],E[2]);let M=0,P=this.horizonLineFromTop();if(c.y>P)return this.pointCoordinate(c,A);const j=.02*P,K=c.clone();for(let te=0;te<10&&P-M>j;te++){K.y=t.ai(M,P,.66);const ge=this.projection.pointCoordinate3D(this,K.x,K.y);ge?(P=K.y,E=ge):M=K.y}return E?new t.ac(E[0],E[1],E[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}isPointOnSurface(c){if(c.y<0||c.y>this.height||c.x<0||c.x>this.width)return!1;if(this.elevation||this.zoom>=t.cI)return!this.isPointAboveHorizon(c);const A=this.pointCoordinate(c);return A.y>=0&&A.y<=1}_coordinatePoint(c,A){const E=A&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,M=[c.x*this.worldSize,c.y*this.worldSize,E+c.toAltitude(),1];return t.aA(M,M,this.pixelMatrix),M[3]>0?new t.P(M[0]/M[3],M[1]/M[3]):new t.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:A}=this._edgeInsets,E=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,P=this.pointLocation3D(new t.P(A,c)),j=this.pointLocation3D(new t.P(M,c)),K=this.pointLocation3D(new t.P(M,E)),te=this.pointLocation3D(new t.P(A,E));let ge=Math.min(P.lng,j.lng,K.lng,te.lng),ve=Math.max(P.lng,j.lng,K.lng,te.lng),Me=Math.min(P.lat,j.lat,K.lat,te.lat),Ce=Math.max(P.lat,j.lat,K.lat,te.lat);const Pe=Math.pow(2,-this.zoom)/16*270,Qe=this.projection.name==="globe"?1:4,je=(qe,Ke,lt,dt,vt)=>{const Tt=(qe+lt)/2,Dt=(Ke+dt)/2,Vt=new t.P(Tt,Dt),{lng:It,lat:Mt}=this.pointLocation3D(Vt),Pt=Math.max(0,ge-It,Me-Mt,It-ve,Mt-Ce);ge=Math.min(ge,It),ve=Math.max(ve,It),Me=Math.min(Me,Mt),Ce=Math.max(Ce,Mt),(vt<Qe||Pt>Pe)&&(je(qe,Ke,Tt,Dt,vt+1),je(Tt,Dt,lt,dt,vt+1))};if(je(A,c,M,c,1),je(M,c,M,E,1),je(M,E,A,E,1),je(A,E,A,c,1),this.projection.name==="globe"){const[qe,Ke]=t.cJ(this);qe?(Ce=90,ve=180,ge=-180):Ke&&(Me=-90,ve=180,ge=-180)}return new t.aG(new t.ci(ge,Me),new t.ci(ve,Ce))}_getBoundsRectangular(c,A){const{top:E,left:M}=this._edgeInsets,P=this.height-this._edgeInsets.bottom,j=this.width-this._edgeInsets.right,K=new t.P(M,E),te=new t.P(j,E),ge=new t.P(j,P),ve=new t.P(M,P);let Me=this.pointCoordinate(K,c),Ce=this.pointCoordinate(te,c);const Pe=this.pointCoordinate(ge,A),Qe=this.pointCoordinate(ve,A),je=(qe,Ke)=>(Ke.y-qe.y)/(Ke.x-qe.x);return Me.y>1&&Ce.y>=0?Me=new t.ac((1-Qe.y)/je(Qe,Me)+Qe.x,1):Me.y<0&&Ce.y<=1&&(Me=new t.ac(-Qe.y/je(Qe,Me)+Qe.x,0)),Ce.y>1&&Me.y>=0?Ce=new t.ac((1-Pe.y)/je(Pe,Ce)+Pe.x,1):Ce.y<0&&Me.y<=1&&(Ce=new t.ac(-Pe.y/je(Pe,Ce)+Pe.x,0)),new t.aG().extend(this.coordinateLocation(Me)).extend(this.coordinateLocation(Ce)).extend(this.coordinateLocation(Qe)).extend(this.coordinateLocation(Pe))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const A=c.visibleDemTiles.reduce((E,M)=>{if(M.dem){const P=M.dem.tree;E.min=Math.min(E.min,P.minimums[0]),E.max=Math.max(E.max,P.maximums[0])}return E},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(A.min*c.exaggeration(),A.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const A=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,E=this.height/2-A*(1-this._horizonShift);return c?Math.max(0,E):E}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-t.cG,this.maxLat=t.cG,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.aD(this.minLng)*this.tileSize,this.worldMaxX=t.aD(this.maxLng)*this.tileSize,this.worldMinY=t.aH(this.maxLat)*this.tileSize,this.worldMaxY=t.aH(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,A){return this.projection.createTileMatrix(this,A,c)}calculateDistanceTileData(c){const A=c.key,E=this._distanceTileDataCache;if(E[A])return E[A];const M=c.canonical,P=1/this.height,j=this.cameraWorldSize,K=j/this.zoomScale(M.z),te=(M.x+Math.pow(2,M.z)*c.wrap)*K,ge=M.y*K,ve=this.point;ve.x*=j/this.worldSize,ve.y*=j/this.worldSize;const Me=this.angle,Ce=Math.sin(-Me),Pe=-Math.cos(-Me);return E[A]={bearing:[Ce,Pe],center:[(ve.x-te)*P,(ve.y-ge)*P],scale:K/t.aj*P},E[A]}calculateFogTileMatrix(c){const A=c.key,E=this._fogTileMatrixCache;if(E[A])return E[A];const M=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return t.az(M,this.worldToFogMatrix,M),E[A]=new Float32Array(M),E[A]}calculateProjMatrix(c,A=!1,E=!1){const M=c.key;let P;if(P=E?this._expandedProjMatrixCache:A?this._alignedProjMatrixCache:this._projMatrixCache,P[M])return P[M];const j=this.calculatePosMatrix(c,this.worldSize);let K;return K=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:E?this.expandedFarZProjMatrix:A?this.alignedProjMatrix:this.projMatrix,t.az(j,K,j),P[M]=new Float32Array(j),P[M]}calculatePixelsToTileUnitsMatrix(c){const A=c.tileID.key,E=this._pixelsToTileUnitsCache;if(E[A])return E[A];const M=t.cK(c,this);return E[A]=M,E[A]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,A=t.bn([],[c,c,c]);return t.az(A,A,this.globeMatrix),A}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const A=t.cb(1,this._center.lat)*this.worldSize,E=this._computeCameraPosition(A),M=this._camera.forward(),P=t.cb(1,this._center.lat);E[2]/=P,M[2]/=P,t.au(M,M);const j=c.raycast(E,M,c.exaggeration());if(j){const K=t.bE([],E,M,j),te=new t.ac(K[0],K[1],t.cb(K[2],t.aY(K[1]))),ge=(te.z+t.ae([te.x-E[0],te.y-E[1],te.z-E[2]*P]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(ge),this._centerAltitude=te.toAltitude(),this._center=this.coordinateLocation(te),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const A=this._elevation,E=t.cb(1,this._center.lat)*this.worldSize,M=this._computeCameraPosition(E),P=A.getAtPointOrZero(new t.ac(...M)),j=this.pixelsPerMeter/this.worldSize*P,K=this._minimumHeightOverTerrain(),te=M[2]-j;if(te<=K)if(te<0||c){const ge=this.locationCoordinate(this._center,this._centerAltitude),ve=[M[0],M[1],ge.z-M[2]],Me=t.ae(ve);ve[2]-=(K-te)/this._pixelsPerMercatorPixel;const Ce=t.ae(ve);if(Ce===0)return;t.c1(ve,ve,Me/Ce*this._pixelsPerMercatorPixel),this._camera.position=[M[0],M[1],ge.z*this._pixelsPerMercatorPixel-ve[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const Ce=this.center;return Ce.lat=t.ay(Ce.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(Ce.lng=t.ay(Ce.lng,this.minLng,this.maxLng)),this.center=Ce,void(this._constraining=!1)}const A=this._unmodified,{x:E,y:M}=this.point;let P=0,j=E,K=M;const te=this.width/2,ge=this.height/2,ve=this.worldMinY*this.scale,Me=this.worldMaxY*this.scale;if(M-ge<ve&&(K=ve+ge),M+ge>Me&&(K=Me-ge),Me-ve<this.height&&(P=Math.max(P,this.height/(Me-ve)),K=(Me+ve)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Ce=this.worldMinX*this.scale,Pe=this.worldMaxX*this.scale,Qe=this.worldSize/2-(Ce+Pe)/2;j=(E+Qe+this.worldSize)%this.worldSize-Qe,j-te<Ce&&(j=Ce+te),j+te>Pe&&(j=Pe-te),Pe-Ce<this.width&&(P=Math.max(P,this.width/(Pe-Ce)),j=(Pe+Ce)/2)}j===E&&K===M||this._allowWorldUnderZoom||(this.center=this.unproject(new t.P(j,K))),P&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(P)),this._constrainCamera(),this._unmodified=A,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(Math.max(0,this.height)/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,A=this.projection.name==="globe",E=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=t.cb(1,this.center.lat)/t.cb(1,t.c$));const M=t.cL(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,M),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const P=this.projection.zAxisUnit==="meters"?E:1,j=this._camera.getWorldToCamera(this.worldSize,P);let K;const te=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(te[8]=2*-c.x/this.width,te[9]=2*c.y/this.height,this.isOrthographic){let Mt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Pt=Mt*this.aspect,dr=-Pt,sr=-Mt;Pt-=c.x,dr-=c.x,Mt+=c.y,sr+=c.y,K=this._camera.getCameraToClipOrthographic(dr,Pt,sr,Mt,this._nearZ,this._farZ),((Qr,Br,Jr,yn)=>{for(let vr=0;vr<16;vr++)Qr[vr]=t.ai(Br[vr],Jr[vr],yn)})(K,K,te,t.cZ(this.pitch>=Sa?1:this.pitch/Sa))}else K=te;const ge=t.cM([],te,j);let ve=t.cM([],K,j);if(this.projection.isReprojectedInTileSpace){const Mt=this.locationCoordinate(this.center),Pt=t.bx([]);t.bo(Pt,Pt,[Mt.x*this.worldSize,Mt.y*this.worldSize,0]),t.az(Pt,Pt,t.cN(this)),t.bo(Pt,Pt,[-Mt.x*this.worldSize,-Mt.y*this.worldSize,0]),t.az(ve,ve,Pt),t.az(ge,ge,Pt),this.inverseAdjustmentMatrix=t.cO(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=t.cP([],ve,[this.worldSize,this.worldSize,this.worldSize/P,1]),this.projMatrix=ve,this.invProjMatrix=t.bi(new Float64Array(16),this.projMatrix),A){const Mt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Mt[8]=2*-c.x/this.width,Mt[9]=2*c.y/this.height,this.expandedFarZProjMatrix=t.cM([],Mt,j)}else this.expandedFarZProjMatrix=this.projMatrix;const Me=t.bi([],K);this.frustumCorners=t.cQ.fromInvProjectionMatrix(Me,this.horizonLineFromTop(),this.height),this.cameraFrustum=t.cy.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!A);const Ce=new Float32Array(16);t.bx(Ce),t.cP(Ce,Ce,[1,-1,1]),t.cR(Ce,Ce,this._pitch),t.by(Ce,Ce,this.angle);const Pe=t.c9(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=t.bw(Pe);const Qe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Pe[8]=2*-c.x/this.width,Pe[9]=2*(c.y+Qe)/this.height,this.skyboxMatrix=t.az(Ce,Pe,Ce);const je=this.point,qe=je.x,Ke=je.y,lt=this.width%2/2,dt=this.height%2/2,vt=Math.cos(this.angle),Tt=Math.sin(this.angle),Dt=qe-Math.round(qe)+vt*lt+Tt*dt,Vt=Ke-Math.round(Ke)+vt*dt+Tt*lt,It=new Float64Array(ve);if(t.bo(It,It,[Dt>.5?Dt-1:Dt,Vt>.5?Vt-1:Vt,0]),this.alignedProjMatrix=It,ve=t.bz(),t.cP(ve,ve,[this.width/2,-this.height/2,1]),t.bo(ve,ve,[1,-1,0]),this.labelPlaneMatrix=ve,ve=t.bz(),t.cP(ve,ve,[1,-1,1]),t.bo(ve,ve,[-1,-1,0]),t.cP(ve,ve,[2/this.width,2/this.height,1]),this.glCoordMatrix=ve,this.pixelMatrix=t.az(new Float64Array(16),this.labelPlaneMatrix,ge),this._calcFogMatrices(),this._distanceTileDataCache={},ve=t.bi(new Float64Array(16),this.pixelMatrix),!ve)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=ve,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=t.cS(this);const Mt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.ad(Mt,Mt,j),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=ve;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,A=this.cameraPixelsPerMeter,E=this._camera.position,M=1/this.height/this._pixelsPerMercatorPixel,P=[c,c,A];t.c1(P,P,M),t.c1(E,E,-1),t.cT(E,E,P);const j=t.bz();t.bo(j,j,E),t.cP(j,j,P),this.mercatorFogMatrix=j,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,A,M)}_computeCameraPosition(c){const A=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,E=this._camera.forward(),M=this.point,P=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*A-c/this.worldSize*this._centerAltitude;return[M.x/this.worldSize-E[0]*P,M.y/this.worldSize-E[1]*P,c/this.worldSize*this._centerAltitude-E[2]*P]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const A=this._maxCameraBoundsDistance()*Math.cos(this._pitch),E=this._camera.position[2],M=c[2];let P=1;this.projection.wrap&&(this.center=this.center.wrap()),M>0&&(P=Math.min((A-E)/M,1)),this._camera.position=t.bE([],this._camera.position,c,P),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,A=this._camera.forward(),{pitch:E,bearing:M}=this._camera.getPitchBearing(),P=t.cb(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,j=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.al(this._maxPitch)),K=Math.max((c[2]-P)/Math.cos(E),j),te=this._zoomFromMercatorZ(K);t.bE(c,c,A,K),this._pitch=t.ay(E,t.al(this.minPitch),t.al(this.maxPitch)),this.angle=t.bQ(M,-Math.PI,Math.PI),this._setZoom(t.ay(te,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.ac(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(Math.max(0,c)*this.tileSize))}zoomFromMercatorZAdjusted(c){let A=0,E=t.cI,M=0,P=1/0;for(;E-A>1e-6&&E>A;){const j=A+.5*(E-A),K=this.tileSize*Math.pow(2,j),te=this.getCameraToCenterDistance(this.projection,j,K),ge=this.scaleZoom(te/(Math.max(0,c)*this.tileSize)),ve=Math.abs(j-ge);ve<P&&(P=ve,M=j),j<ge?A=j:E=j}return M}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,A){const E=Math.min(c.x,A.x),M=Math.max(c.x,A.x),P=Math.min(c.y,A.y),j=Math.max(c.y,A.y);if(P<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const K=[new t.P(E,P),new t.P(M,j),new t.P(E,j),new t.P(M,P)],te=this.renderWorldCopies?-3:0,ge=this.renderWorldCopies?4:1;for(const ve of K){const Me=this.pointRayIntersection(ve);if(Me.t<0)return!0;const Ce=this.rayIntersectionCoordinate(Me);if(Ce.x<te||Ce.y<0||Ce.x>ge||Ce.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.cU(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.P(0,0),new t.P(this.width,this.height))}zoomDeltaToMovement(c,A){const E=t.ae(t.at([],this._camera.position,c)),M=this._zoomFromMercatorZ(E)+A;return E-this._mercatorZfromZoom(M)}getCameraPoint(){if(this.projection.name==="globe"){const c=function([A,E,M],P){const j=[A,E,M,1];t.aA(j,j,P);const K=j[3]=Math.max(j[3],1e-6);return j[0]/=K,j[1]/=K,j[2]/=K,j}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.P(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(0,c))}}getCameraToCenterDistance(c,A=this.zoom,E=this.worldSize){const M=t.cL(c,A,this.width,this.height,1024),P=c.pixelSpaceConversion(this.center.lat,E,M);let j=.5/Math.tan(.5*this._fov)*this.height*P;return this.isOrthographic&&(j=t.ai(1,j,t.cZ(this.pitch>=Sa?1:this.pitch/Sa))),j}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&t.az(c,c,this.globeMatrix),c}getFrustum(c){return t.cy.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,this.projection.zAxisUnit==="meters")}}const Va=(C,c)=>{if(c>0&&C.terrain&&t.w("Cutoff is currently disabled on terrain"),c<=0||C.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const A=C.transform,E=Math.max(Math.abs(A._zoom-(C.minCutoffZoom-1)),1),M=A.isLODDisabled(!1)?t.af(60,45,A.pitch):t.af(30,15,A.pitch),P=A._farZ-A._nearZ,j=c*A.height,K=((1-(te=M))*A.cameraToCenterDistance+te*(A._farZ+j))*E;var te;return{shouldRenderCutoff:M<1,uniformValues:{u_cutoff_params:[A._nearZ,A._farZ,(K-A._nearZ)/P,(K-j-A._nearZ)/P]}}},Ca={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class yu{constructor(c,A){this.aabb=c,this.lastCascade=A}}class ll{add(c,A){const E=this.receivers[c.key];E!==void 0?(E.aabb.min[0]=Math.min(E.aabb.min[0],A.min[0]),E.aabb.min[1]=Math.min(E.aabb.min[1],A.min[1]),E.aabb.min[2]=Math.min(E.aabb.min[2],A.min[2]),E.aabb.max[0]=Math.max(E.aabb.max[0],A.max[0]),E.aabb.max[1]=Math.max(E.aabb.max[1],A.max[1]),E.aabb.max[2]=Math.max(E.aabb.max[2],A.max[2])):this.receivers[c.key]=new yu(A,null)}clear(){this.receivers={}}get(c){return this.receivers[c.key]}computeRequiredCascades(c,A,E){const M=t.d6.fromPoints(c.points);let P=0;for(const j in this.receivers){const K=this.receivers[j];if(!K||!M.intersectsAabb(K.aabb))continue;K.aabb.min=M.closestPoint(K.aabb.min),K.aabb.max=M.closestPoint(K.aabb.max);const te=K.aabb.getCorners();for(let ge=0;ge<E.length;ge++){let ve=!0;for(const Me of te){const Ce=[Me[0]*A,Me[1]*A,Me[2]];if(t.ad(Ce,Ce,E[ge].matrix),Ce[0]<-1||Ce[0]>1||Ce[1]<-1||Ce[1]>1){ve=!1;break}}if(K.lastCascade=ge,P=Math.max(P,ge),ve)break}}return P+1}}class ec{constructor(c){this.painter=c,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new ll,this._depthMode=new Sn(c.context.gl.LEQUAL,Sn.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,c.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),c.tp.registerParameter(Ca,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),c.tp.registerParameter(Ca,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),c.tp.registerParameter(Ca,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),c.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const c of this._cascades)c.texture.destroy(),c.framebuffer.destroy();this._cascades=[]}updateShadowParameters(c,A){const E=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!A||!A.properties)return;const M=A.properties.get("shadow-intensity");if(!A.shadowsEnabled()||M<=0||(this._shadowLayerCount=E.style.order.reduce((Qe,je)=>{const qe=E.style._mergedLayers[je];return Qe+(qe.hasShadowPass()&&!qe.isHidden(c.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const P=E.context,j=Ca.shadowMapResolution,K=Ca.shadowMapResolution;if(this._cascades.length===0||Ca.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Qe=0;Qe<Ca.cascadeCount;++Qe){const je=E._shadowMapDebug,qe=P.gl,Ke=P.createFramebuffer(j,K,je,"texture"),lt=new t.T(P,{width:j,height:K,data:null},qe.DEPTH_COMPONENT16);if(Ke.depthAttachment.set(lt.texture),je){const dt=new t.T(P,{width:j,height:K,data:null},qe.RGBA8);Ke.colorAttachment.set(dt.texture)}this._cascades.push({framebuffer:Ke,texture:lt,matrix:[],far:0,boundingSphereRadius:0,frustum:new t.cy,scale:0})}}this.shadowDirection=bo(A);let te=0;if(c.elevation){const Qe=c.elevation,je=[1e4,-1e4];Qe.visibleDemTiles.filter(qe=>qe.dem).forEach(qe=>{const Ke=qe.dem.tree;je[0]=Math.min(je[0],Ke.minimums[0]),je[1]=Math.max(je[1],Ke.maximums[0])}),je[0]!==1e4&&(te=(je[1]-je[0])*Qe.exaggeration())}const ge=1.5*c.cameraToCenterDistance,ve=3*ge,Me=new Float64Array(16);for(let Qe=0;Qe<this._cascades.length;++Qe){const je=this._cascades[Qe];let qe=c.height/50,Ke=1;Ca.cascadeCount===1?Ke=ve:Qe===0?Ke=ge:(qe=ge,Ke=ve);const[lt,dt]=dc(c,this.shadowDirection,qe,Ke,Ca.shadowMapResolution,te);je.scale=c.scale,je.matrix=lt,je.boundingSphereRadius=dt,t.bi(Me,je.matrix),je.frustum=t.cy.fromInvProjectionMatrix(Me,1,0,!0),je.far=Ke}const Ce=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[Ce].far,this._cascades[Ce].far],this._uniformValues.u_shadow_intensity=M,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Ca.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Ca.shadowMapResolution,this._uniformValues.u_shadowmap_0=Xa.ShadowMap0,this._uniformValues.u_shadowmap_1=Xa.ShadowMap0+1,this._groundShadowTiles=E.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Pe=E.transform.elevation;for(const Qe of this._groundShadowTiles){let je={min:0,max:0};if(Pe){const qe=Pe.getMinMaxForTile(Qe);qe&&(je=qe)}this.addShadowReceiver(Qe.toUnwrapped(),je.min,je.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(c){this._enabled=c}drawShadowPass(c,A){if(!this.enabled)return;const E=this.painter,M=E.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(E.transform.getFrustum(0),E.transform.worldSize,this._cascades),M.viewport.set([0,0,Ca.shadowMapResolution,Ca.shadowMapResolution]);for(let P=0;P<this._numCascadesToRender;++P){E.currentShadowCascade=P,M.bindFramebuffer.set(this._cascades[P].framebuffer.framebuffer),M.clear({color:t.am.white,depth:1});for(const j of c.order){const K=c._mergedLayers[j];if(!K.hasShadowPass()||K.isHidden(E.transform.zoom))continue;const te=c.getLayerSourceCache(K),ge=te?A[te.id]:void 0;(K.type==="model"||ge&&ge.length)&&E.renderLayer(E,te,K,ge)}}E.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const c=this.painter,A=c.style,E=c.context,M=E.gl,P=A.directionalLight,j=A.ambientLight;if(!P||!j)return;const K=[],te=Va(c,c.longestCutoffRange);te.shouldRenderCutoff&&K.push("RENDER_CUTOFF"),K.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&K.push("NORMAL_OFFSET");const ge=ml(A,P,j),ve=new Sn(M.LEQUAL,Sn.ReadOnly,c.depthRangeFor3D),Me=new Ii({func:M.EQUAL,mask:255},0,255,M.KEEP,M.KEEP,M.KEEP);for(const Ce of this._groundShadowTiles){const Pe=Ce.toUnwrapped(),Qe=c.isTileAffectedByFog(Ce),je=c.getOrCreateProgram("groundShadow",{defines:K,overrideFog:Qe});this.setupShadows(Pe,je),c.uploadCommonUniforms(E,je,Pe,null,te);const qe={u_matrix:c.transform.calculateProjMatrix(Pe),u_ground_shadow_factor:ge};je.draw(c,M.TRIANGLES,ve,Me,Li.multiply,Ai.disabled,qe,"ground_shadow",c.tileExtentBuffer,c.quadTriangleIndexBuffer,c.tileExtentSegments,null,c.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Li.unblended:Li.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(c){const A=this.painter.transform,E=A.calculatePosMatrix(c,A.worldSize);return t.az(E,this._cascades[this.painter.currentShadowCascade].matrix,E),Float32Array.from(E)}calculateShadowPassMatrixFromMatrix(c){return t.az(c,this._cascades[this.painter.currentShadowCascade].matrix,c),Float32Array.from(c)}setupShadows(c,A,E){if(!this.enabled)return;const M=this.painter.transform,P=this.painter.context,j=P.gl,K=this._uniformValues,te=new Float64Array(16),ge=M.calculatePosMatrix(c,M.worldSize);for(let ve=0;ve<this._cascades.length;ve++)t.az(te,this._cascades[ve].matrix,ge),K[ve===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(te),P.activeTexture.set(j.TEXTURE0+Xa.ShadowMap0+ve),this._cascades[ve].texture.bindExtraParam(j.LINEAR,j.LINEAR,j.CLAMP_TO_EDGE,j.CLAMP_TO_EDGE,j.GREATER);if(this.useNormalOffset=!!E,this.useNormalOffset){const ve=t.d4(c.canonical),Me=2/M.tileSize*t.aj/Ca.shadowMapResolution,Ce=Me*this._cascades[0].boundingSphereRadius,Pe=Me*this._cascades[this._cascades.length-1].boundingSphereRadius,Qe=(E==="vector-tile"?1:3)*function(je,qe,Ke,lt,dt){const vt=t.ay((je-22)/-22,0,1);return .125*(1-vt)+4*vt}(M.zoom);K.u_shadow_normal_offset=[ve,Ce*Qe,Pe*Qe],K.u_shadow_bias=[1e-4,.0012,.012]}else K.u_shadow_bias=[36e-5,.0012,.012];A.setShadowUniformValues(P,K)}setupShadowsFromMatrix(c,A,E=!1){if(!this.enabled)return;const M=this.painter.context,P=M.gl,j=this._uniformValues,K=new Float64Array(16);for(let te=0;te<Ca.cascadeCount;te++)t.az(K,this._cascades[te].matrix,c),j[te===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(K),M.activeTexture.set(P.TEXTURE0+Xa.ShadowMap0+te),this._cascades[te].texture.bindExtraParam(P.LINEAR,P.LINEAR,P.CLAMP_TO_EDGE,P.CLAMP_TO_EDGE,P.GREATER);if(this.useNormalOffset=E,E){const te=Ca.normalOffset;j.u_shadow_normal_offset=[1,te,te],j.u_shadow_bias=[6e-5,.0012,.012]}else j.u_shadow_bias=[36e-5,.0012,.012];A.setShadowUniformValues(M,j)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(c,A,E,M){if(M[2]>=0)return{};const P=function(te,ge,ve){const Me=ve/(1<<te.canonical.z);return new t.d6([te.canonical.x*Me+te.wrap*ve,te.canonical.y*Me+te.wrap*ve,0],[(te.canonical.x+1)*Me+te.wrap*ve,(te.canonical.y+1)*Me+te.wrap*ve,ge])}(c,A,E).getCorners(),j=A/-M[2];M[0]<0?(t.d5(P[0],P[0],[M[0]*j,0,0]),t.d5(P[3],P[3],[M[0]*j,0,0])):M[0]>0&&(t.d5(P[1],P[1],[M[0]*j,0,0]),t.d5(P[2],P[2],[M[0]*j,0,0])),M[1]<0?(t.d5(P[0],P[0],[0,M[1]*j,0]),t.d5(P[1],P[1],[0,M[1]*j,0])):M[1]>0&&(t.d5(P[2],P[2],[0,M[1]*j,0]),t.d5(P[3],P[3],[0,M[1]*j,0]));const K={};return K.vertices=P,K.planes=[Ga(P[1],P[0],P[4]),Ga(P[2],P[1],P[5]),Ga(P[3],P[2],P[6]),Ga(P[0],P[3],P[7])],K}addShadowReceiver(c,A,E){this._receivers.add(c,t.d6.fromTileIdAndHeight(c,A,E))}getMaxCascadeForTile(c){const A=this._receivers.get(c);return A&&A.lastCascade?A.lastCascade:0}}function Ga(C,c,A){const E=t.at([],A,c),M=t.at([],C,c),P=t.bF([],E,M),j=t.ae(P);return j===0?[0,0,1,0]:(t.c1(P,P,1/j),[P[0],P[1],P[2],-t.bG(P,c)])}function bo(C){const c=C.properties.get("direction"),A=t.d1(c.x,c.y,c.z);A[2]=t.ay(A[2],0,75);const E=t.d3([A[0],A[1],A[2]]);return t.d2(E.x,E.y,E.z)}function ml(C,c,A){const E=c.properties.get("color-use-theme")==="none",M=c.properties.get("color"),P=c.properties.get("intensity"),j=c.properties.get("direction"),K=[j.x,j.y,j.z],te=A.properties.get("color-use-theme")==="none",ge=A.properties.get("color"),ve=A.properties.get("intensity"),Me=Math.max(t.bG([0,0,1],K),0),Ce=[0,0,0];t.c1(Ce,ge.toPremultipliedRenderColor(te?null:C.getLut(c.scope)).toArray01Linear().slice(0,3),ve);const Pe=[0,0,0];return t.c1(Pe,M.toPremultipliedRenderColor(E?null:C.getLut(A.scope)).toArray01Linear().slice(0,3),Me*P),t.d8([Ce[0]>0?Ce[0]/(Ce[0]+Pe[0]):0,Ce[1]>0?Ce[1]/(Ce[1]+Pe[1]):0,Ce[2]>0?Ce[2]/(Ce[2]+Pe[2]):0])}function dc(C,c,A,E,M,P){const j=C.zoom,K=C.scale,te=C.worldSize,ge=1/te,ve=C.aspect,Me=Math.sqrt(1+ve*ve)*Math.tan(.5*C.fovX),Ce=Me*Me,Pe=E-A,Qe=E+A;let je,qe;Ce>Pe/Qe?(je=E,qe=E*Me):(je=.5*Qe*(1+Ce),qe=.5*Math.sqrt(Pe*Pe+2*(E*E+A*A)*Ce+Qe*Qe*Ce*Ce));const Ke=C.projection.pixelsPerMeter(C.center.lat,te),lt=C._camera.getCameraToWorldMercator(),dt=[0,0,-je*ge];t.ad(dt,dt,lt);let vt=qe*ge;const Tt=C._edgeInsets;if(!(Tt.left===0&&Tt.top===0&&Tt.right===0&&Tt.bottom===0||Tt.left===Tt.right&&Tt.top===Tt.bottom)){const an=C._camera.getWorldToCamera(C.worldSize,C.projection.zAxisUnit==="meters"?Ke:1),ln=C._camera.getCameraToClipPerspective(C._fov,C.width/C.height,A,E);ln[8]=2*-C.centerOffset.x/C.width,ln[9]=2*C.centerOffset.y/C.height;const dn=new Float64Array(16);t.cM(dn,ln,an);const Mn=new Float64Array(16);t.bi(Mn,dn);const di=t.cy.fromInvProjectionMatrix(Mn,te,j,!0);for(const Ci of di.points){const ti=((Dt=Ci)[0]/=K,Dt[1]/=K,Dt[2]=t.cb(Dt[2],C._center.lat),Dt);vt=Math.max(vt,t.c2(t.d7([],dt,ti)))}}var Dt;vt*=M/(M-1);const Vt=Math.acos(c[2]),It=Math.atan2(-c[0],-c[1]),Mt=new Us;Mt.position=dt,Mt.setPitchBearing(Vt,It);const Pt=Mt.getWorldToCamera(te,Ke),dr=vt*te,sr=Math.min(C._mercatorZfromZoom(17)*te*-2,-2*dr),Qr=Mt.getCameraToClipOrthographic(-dr,dr,-dr,dr,sr,(dr+P*Ke)/c[2]),Br=new Float64Array(16);t.az(Br,Qr,Pt);const Jr=t.d2(Math.floor(1e6*dt[0])/1e6*te,Math.floor(1e6*dt[1])/1e6*te,0),yn=.5*M,vr=[0,0,0];t.ad(vr,Jr,Br),t.c1(vr,vr,yn);const qt=[Math.floor(vr[0]),Math.floor(vr[1]),Math.floor(vr[2])],kr=[0,0,0];t.at(kr,vr,qt),t.c1(kr,kr,-1/yn);const br=new Float64Array(16);return t.bx(br),t.bo(br,br,kr),t.az(Br,br,Br),[Br,dr]}class Wl extends t.E{constructor(c){super(),this.requestManager=c,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(c,A){return t.aS(this.requestManager.transformRequest(A,t.R.Model).url).then(E=>{if(!E)return;const M=t.aT(E),P=new t.aU(c,void 0,void 0,M);return P.computeBoundsAndApplyParent(),P}).catch(E=>{if(E&&E.status===404)return null;this.fire(new t.z(new Error(`Could not load model ${c} from ${A}: ${E.message}`)))})}load(c,A,E={forceReload:!1}){this.models[A]||(this.models[A]={});const M=Object.keys(c),P=[],j=[];for(const K of M){const te=c[K];this.hasURLBeenRequested(te)&&!E.forceReload||(this.modelByURL[te]={modelId:K,scope:A},P.push(this.loadModel(K,te)),j.push(K)),this.models[A][K]||(this.models[A][K]={model:null,numReferences:1})}this.numModelsLoading[A]=(this.numModelsLoading[A]||0)+j.length,Promise.allSettled(P).then(K=>{for(let te=0;te<K.length;te++){const{status:ge}=K[te];if(ge==="rejected")continue;const{value:ve}=K[te];this.models[A][j[te]]||(this.models[A][j[te]]={model:null,numReferences:1}),this.models[A][j[te]].model=ve}this.numModelsLoading[A]-=j.length,this.fire(new t.A("data",{dataType:"style"}))}).catch(K=>{this.fire(new t.z(new Error(`Could not load models: ${K.message}`)))})}isLoaded(){for(const c in this.numModelsLoading)if(this.numModelsLoading[c]>0)return!1;return!0}hasModel(c,A,E={exactIdMatch:!1}){return!!(E.exactIdMatch?this.getModel(c,A):this.getModelByURL(this.modelUris[A][c]))}getModel(c,A){return this.models[A]||(this.models[A]={}),this.models[A][c]?this.models[A][c].model:void 0}getModelByURL(c){if(!c)return null;const A=this.modelByURL[c];return A?this.models[A.scope][A.modelId].model:null}hasModelBeenAdded(c,A){return this.models[A]&&this.models[A][c]!==void 0}getModelURIs(c){return this.modelUris[c]||{}}addModel(c,A,E){this.models[E]||(this.models[E]={}),this.modelUris[E]||(this.modelUris[E]={});const M=this.requestManager.normalizeModelURL(A);if((this.hasModel(c,E,{exactIdMatch:!0})||this.hasModelBeenAdded(c,E))&&this.modelUris[E][c]===M)this.models[E][c].numReferences++;else if(this.hasURLBeenRequested(M)){const{scope:P,modelId:j}=this.modelByURL[M];this.models[P][j].numReferences++}else this.modelUris[E][c]=M,this.load({[c]:this.modelUris[E][c]},E)}addModelURLs(c,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={});const E=this.modelUris[A];for(const M in c)E[M]=this.requestManager.normalizeModelURL(c[M])}reloadModels(c){this.load(this.modelUris[c],c,{forceReload:!0})}addModelsFromBucket(c,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={});const E={};for(const M of c)this.hasModel(M,A,{exactIdMatch:!0})||this.hasURLBeenRequested(M)?this.models[A][M].numReferences++:this.modelUris[A][M]&&!this.hasURLBeenRequested(M)?E[M]=this.modelUris[A][M]:!this.hasURLBeenRequested(M)&&t.d9(M,!1)&&(this.modelUris[A][M]=this.requestManager.normalizeModelURL(M),E[M]=this.modelUris[A][M]);this.load(E,A)}hasURLBeenRequested(c){return this.modelByURL[c]!==void 0}removeModel(c,A,E=!1,M=!1){if(this.models[A]&&this.models[A][c]&&(this.models[A][c].numReferences--,this.models[A][c].numReferences===0||M)){const P=this.modelUris[A][c];E||delete this.modelUris[A][c],delete this.modelByURL[P];const j=this.models[A][c].model;if(!j)return;delete this.models[A][c],j.destroy()}}destroy(){for(const c of Object.keys(this.models))for(const A of Object.keys(this.models[c])){const E=this.models[c][A].model;delete this.models[c][A],E&&E.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(c){return this.models[c]||(this.models[c]={}),Object.keys(this.models[c])}upload(c,A){this.models[A]||(this.models[A]={});for(const E in this.models[A])this.models[A][E].model&&this.models[A][E].model.upload(c.context)}}const ir=new t.a7({data:new t.a8(t.a5.colorTheme.data)});class Lr{constructor(c){this._scope=c,this._buildingQueryParams={target:{featuresetId:"building-outline",importId:this._scope}},this._floorQueryParams={target:{featuresetId:"floor-outline",importId:this._scope}}}execute(c){const A=this._makeBuildingsQueryArea(c),E=this._makeFloorsQueryArea(c),M=c.queryRenderedFeatures(A,this._buildingQueryParams).filter(K=>K.properties.shape_type==="building").reduce((K,te)=>{const ge=te.properties.id;return te.properties.shape_type!=="building"||K.some(ve=>ve.properties.id===ge)||K.push(te),K},[]),P=c.queryRenderedFeatures(E,this._floorQueryParams).filter(K=>K.properties.shape_type==="floor").reduce((K,te)=>{const ge=te.properties.id;return te.properties.shape_type!=="floor"||K.some(ve=>ve.properties.id===ge)||K.push(te),K},[]),j=[c.getCenter().lng,c.getCenter().lat];return{floors:P,building:this._findBuildingAtCenter(j,M)||(M.length>0?M[0]:null)}}_makeBuildingsQueryArea(c){const A=c.transform.width,E=c.transform.height,M=Math.min(A,E),P=M*(1/8),j=M*(1/8),K=.5*(A-P),te=.5*(E-j);return[new t.P(K,te),new t.P(K+P,te+j)]}_makeFloorsQueryArea(c){const A=c.transform.width,E=c.transform.height,M=A*(2/3),P=E*(2/3),j=.5*(A-M),K=.5*(E-P);return[new t.P(j,K),new t.P(j+M,K+P)]}_findBuildingAtCenter(c,A){for(const E of A)if(E.geometry.type==="Polygon"&&this._pointInPolygon(c,E.geometry.coordinates[0]))return E;return null}_pointInPolygon(c,A){let E=!1;for(let M=0,P=A.length-1;M<A.length;P=M++){const j=A[M][0],K=A[M][1],te=A[P][1];K>c[1]!=te>c[1]&&c[0]<(A[P][0]-j)*(c[1]-K)/(te-K)+j&&(E=!E)}return E}}class rn{constructor(){this._selectedFloorId=null,this._selectedBuildingId=null,this._floors=[]}setBuildingId(c){this._selectedBuildingId=c}setFloors(c){if(this._floors=c.filter(A=>A.properties.building_id===this._selectedBuildingId),!this._selectedFloorId||!this._floors.map(A=>A.properties.id).includes(this._selectedFloorId)){const A=this._floors.map(E=>({id:E.properties.id,level:E.properties.floor_level})).reduce((E,M)=>{const P=Math.abs(E.level-1),j=Math.abs(M.level-1);return j<P||j===P&&M.level>E.level?M:E});this._selectedFloorId=A.id}}setFloorId(c){this._selectedFloorId=c}getSelectedFloorId(){return this._selectedFloorId}getCurrentBuildingFloors(){return this._floors}reset(){this._selectedFloorId=null,this._selectedBuildingId=null,this._floors=[]}}const fn={"mbx-indoor-level-selected":{default:["literal",[]]}};function Kt(C){return C=C||{},Object.assign(C,fn)}class Pr extends t.E{constructor(c){super(),t.aV(["_onLoad","_onMove"],this),this._map=c,this._floorSelectionState=new rn,this._queryIndoor(),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=null,this._floorSelectionState=null}_onLoad(){this._map.style.forEachFragmentStyle(c=>{c.stylesheet.indoor&&(this._indoorDataQuery?this.fire(new t.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._scope=c.scope,this._indoorDataQuery=new Lr(this._scope)))}),this._map._addIndoorControl(),this._queryIndoor()}_onMove(){this._queryIndoor()}_queryIndoor(){if(!this._indoorDataQuery||!this._map.isStyleLoaded())return;if(this._map.transform.zoom<16)return void this._clearIndoorData();const c=this._indoorDataQuery.execute(this._map);c&&c.floors.length!==0?(this._floorSelectionState.getSelectedFloorId()||this._map._addIndoorControl(),this._selectFloors(c)):this._clearIndoorData()}_selectFloors(c){if(c.building)this._floorSelectionState.setBuildingId(c.building.properties.id),this._floorSelectionState.setFloors(c.floors),this._updateUI();else{const A=this._floorSelectionState.getSelectedFloorId();if(A&&c.floors.some(E=>E.properties.id===A))return;this._clearIndoorData()}}_clearIndoorData(){this._floorSelectionState.reset(),this._map._removeIndoorControl(),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",[]])}_updateUI(){const c=this._floorSelectionState.getCurrentBuildingFloors().map(E=>({id:E.properties.id,name:E.properties.name,shortName:E.properties.floor_level,levelOrder:E.properties.floor_level})),A=this._floorSelectionState.getSelectedFloorId();A?(this._updateIndoorConfig(),this.fire(new t.A("indoorupdate",{selectedFloorId:A,floors:c}))):console.warn("IndoorManager: Selected floor is not set")}_updateIndoorConfig(){const c=this._floorSelectionState.getSelectedFloorId();c?this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",[c]]):console.warn("IndoorManager: Selected floor is not set")}selectFloor(c){this._floorSelectionState.setFloorId(c),this._updateIndoorConfig()}}function Cr(C){if(!C.metadata||!C.metadata.content_area)return;const c=t.q.devicePixelRatio,{left:A,top:E,width:M,height:P}=C.metadata.content_area,j=A*c,K=E*c;return[j,K,j+M*c,K+P*c]}function Nn(C){if(C)return C.map(([c,A])=>[c*t.q.devicePixelRatio,A*t.q.devicePixelRatio])}class Qn{constructor(c,A,E){this.id=c,this.scope=A,this.sourceCache=E,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(c){this.missingRequests.has(c.name)||this.pendingRequests.has(c.name)||this.pendingRequests.add(c.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const c=new Map;if(!this.sourceCache.loaded())return c;const A=this.sourceCache.getVisibleCoordinates();if(A.length===0)return c;const E=this.sourceCache.getSource();if(!(E instanceof ks))return c;const M=A.map(j=>this.sourceCache.getTile(j)),P=E.getImages(M,Array.from(this.pendingRequests));for(const[j,K]of P)c.set(t.I.from({name:j,iconsetId:this.id}),K),this.pendingRequests.delete(j);for(const j of this.pendingRequests)this.missingRequests.add(j);return this.pendingRequests.clear(),c}}const ki=(C,c)=>nt(C,c&&c.filter(A=>A.identifier!=="source.canvas")),es=t.aF(bs,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),Oi=t.aF(bs,["setCenter","setZoom","setBearing","setPitch"]),Zs=new Set(["background","sky","slot","custom"]),ms={version:8,layers:[],sources:{}},Js={duration:300,delay:0};class xo extends t.E{constructor(c,A={}){super(),this.map=c,this.scope=A.scope||"",this.globalId=null,this.fragments=[],this.importDepth=A.importDepth||0,this.importsCache=A.importsCache||new Map,this.resolvedImports=A.resolvedImports||new Set,this.transition=t.h({},Js),this._buildingIndex=new Os(this),this.crossTileSymbolIndex=new Qo,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=A.styleChanges||new Ne,this.dispatcher=A.dispatcher?A.dispatcher:new t.D(t.db(),this),A.imageManager?this.imageManager=A.imageManager:(this.imageManager=new ot(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=A.glyphManager?A.glyphManager:new t.dc(c._requestManager,A.localFontFamily?t.dd.all:A.localIdeographFontFamily?t.dd.ideographs:t.dd.none,A.localFontFamily||A.localIdeographFontFamily),A.modelManager?this.modelManager=A.modelManager:(this.modelManager=new Wl(c._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=A.configOptions?A.configOptions:new Map,this._configDependentLayers=A.configDependentLayers?A.configDependentLayers:new Set,this._config=A.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:A.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=A.initialConfig,this.dispatcher.broadcast("setReferrer",t.de());const E=this;this._rtlTextPluginCallback=xo.registerForPluginStateChange(M=>{E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},(P,j)=>{if(t.df(P),j&&j.every(K=>K))for(const K in E._sourceCaches){const te=E._sourceCaches[K],ge=te.getSource().type;ge!=="vector"&&ge!=="geojson"||te.reload()}})}),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const P=this.getOwnSource(M.sourceId);if(P&&P.vectorLayerIds)for(const j in this._layers){const K=this._layers[j];K.source===P.id&&this._validateLayer(K)}})}load(c){return c?(typeof c=="string"?this.loadURL(c):this.loadJSON(c),this):this}_getGlobalId(c){if(!c)return null;if(typeof c=="string"){if(t.j(c))return c;const A=t.dg(c);if(!A.startsWith("http"))try{return new URL(A,location.href).toString()}catch{return A}return A}return`json://${t.dh(JSON.stringify(c))}`}_diffStyle(c,A,E){this.globalId=this._getGlobalId(c);const M=(P,j)=>{try{j(null,this.setState(P,E))}catch(K){j(K,!1)}};if(typeof c=="string"){const P=this.map._requestManager.normalizeStyleURL(c),j=this.map._requestManager.transformRequest(P,t.R.Style);t.n(j,(K,te)=>{K?this.fire(new t.z(K)):te&&M(te,A)})}else typeof c=="object"&&M(c,A)}loadURL(c,A={}){this.fire(new t.A("dataloading",{dataType:"style"}));const E=typeof A.validate=="boolean"?A.validate:!t.j(c);this.globalId=this._getGlobalId(c),c=this.map._requestManager.normalizeStyleURL(c,A.accessToken),this.resolvedImports.add(c);const M=this.importsCache.get(c);if(M)return this._load(M,E);const P=this.map._requestManager.transformRequest(c,t.R.Style);this._request=t.n(P,(j,K)=>{if(this._request=null,j)this.fire(new t.z(j));else if(K)return this.importsCache.set(c,K),this._load(K,E)})}loadJSON(c,A={}){this.fire(new t.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(c),this._request=t.q.frame(()=>{this._request=null,this._load(c,A.validate!==!1)})}loadEmpty(){this.fire(new t.A("dataloading",{dataType:"style"})),this._load(ms,!1)}_loadImports(c,A,E){if(this.importDepth>=4)return t.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const M=[];for(const P of c){const j=this._createFragmentStyle(P),K=new Promise(ve=>{j.once("style.import.load",ve),j.once("error",ve)}).then(()=>this.mergeAll());if(M.push(K),this.resolvedImports.has(P.url)){j.loadEmpty();continue}const te=P.data||this.importsCache.get(P.url);te?(j.loadJSON(te,{validate:A}),this._isInternalStyle(te)&&(j.globalId=null)):P.url?j.loadURL(P.url,{validate:A}):j.loadEmpty();const ge={style:j,id:P.id,config:P.config};if(E){const ve=this.fragments.findIndex(({id:Me})=>Me===E);this.fragments=this.fragments.slice(0,ve).concat(ge).concat(this.fragments.slice(ve))}else this.fragments.push(ge)}return Promise.allSettled(M)}getImportGlobalIds(c=this,A=new Set){for(const E of c.fragments)E.style.globalId&&A.add(E.style.globalId),this.getImportGlobalIds(E.style,A);return[...A.values()]}_createFragmentStyle(c){const A=this.scope?t.C(c.id,this.scope):c.id;let E;const M=this._initialConfig&&this._initialConfig[A];(c.config||M)&&(E=t.h({},c.config,M));const P=new xo(this.map,{scope:A,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:E,configOptions:this.options,colorThemeOverride:c["color-theme"],configDependentLayers:this._configDependentLayers});return P.setEventedParent(this.map,{style:P}),P}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(c){return this.isRootStyle()&&(c.fragment||!!c.schema&&c.fragment!==!1)}_load(c,A){const E=c.indoor?Kt(c.schema):c.schema;if(this._isInternalStyle(c)){const j=t.h({},ms,{imports:[{id:"basemap",data:c,url:""}]});return void this._load(j,A)}if(this.updateConfig(this._config,E),A&&ki(this,_i(c)))return;this._loaded=!0,this.stylesheet=t.di(c);const M=()=>{for(const ge in c.sources)this.addSource(ge,c.sources[ge],{validate:!1,isInitialLoad:!0});if(c.iconsets)for(const ge in c.iconsets)this.addIconset(ge,c.iconsets[ge]);c.sprite?this._loadIconset(c.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),!this.glyphManager.url&&c.glyphs&&this.glyphManager.setURL(c.glyphs);const j=Jc(this.stylesheet.layers);if(this._order=j.map(ge=>ge.id),this.stylesheet.light&&t.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const ge=this.stylesheet.lights[0];this.light=new rr(ge.properties,ge.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new rr(this.stylesheet.light)),this._layers={};for(const ge of j){const ve=t.dn(ge,this.scope,this._styleColorTheme.lut,this.options);ve.configDependencies.size!==0&&this._configDependentLayers.add(ve.fqid),ve.setEventedParent(this,{layer:{id:ve.id}}),this._layers[ve.id]=ve;const Me=this.getOwnLayerSourceCache(ve),Ce=!!this.directionalLight&&this.directionalLight.shadowsEnabled();Me&&ve.canCastShadows()&&Ce&&(Me.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const K=this.stylesheet.terrain;K&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(K,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new t.A("data",{dataType:"style"}));const te=this.isRootStyle();c.imports?this._loadImports(c.imports,A).then(()=>{this._reloadImports(),this.fire(new t.A(te?"style.load":"style.import.load"))}).catch(ge=>{this.fire(new t.z(new Error("Failed to load imports",ge))),this.fire(new t.A(te?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new t.A(te?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const P=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(P){const j=this._evaluateColorThemeData(P);this._loadColorTheme(j).then(()=>{M()}).catch(K=>{t.w(`Couldn't load color theme from the stylesheet: ${K}`),M()})}else this._styleColorTheme.lut=null,M()}isRootStyle(){return this.importDepth===0}mergeAll(){let c,A,E,M,P,j,K,te,ge,ve;const Me={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(Ce=>{if(Ce.stylesheet){if(Ce.light!=null&&(c=Ce.light),Ce.stylesheet.lights)for(const Pe of Ce.stylesheet.lights)Pe.type==="ambient"&&Ce.ambientLight!=null&&(A=Ce.ambientLight),Pe.type==="directional"&&Ce.directionalLight!=null&&(E=Ce.directionalLight);M=this._prioritizeTerrain(M,Ce.terrain,Ce.stylesheet.terrain),Ce.stylesheet.fog&&Ce.fog!=null&&(P=Ce.fog),Ce.stylesheet.snow&&Ce.snow!=null&&(j=Ce.snow),Ce.stylesheet.rain&&Ce.rain!=null&&(K=Ce.rain),Ce.stylesheet.camera!=null&&(ve=Ce.stylesheet.camera),Ce.stylesheet.projection!=null&&(te=Ce.stylesheet.projection),Ce.stylesheet.transition!=null&&(ge=Ce.stylesheet.transition),Me[Ce.scope]=Ce._styleColorTheme}}),this.light=c,this.ambientLight=A,this.directionalLight=E,this.fog=P,this.snow=j,this.rain=K,this._styleColorThemeForScope=Me,M===null?delete this.terrain:this.terrain=M,this.camera=ve||{"camera-projection":"perspective"},this.projection=te||{name:"mercator"},this.transition=t.h({},Js,ge),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(c){const A=E=>{for(const M of E.fragments)A(M.style);c(E)};A(this)}_prioritizeTerrain(c,A,E){const M=c&&c.drapeRenderMode===0;return E===null?A&&A.drapeRenderMode===0?A:M?c:null:A!=null&&(!c||M||A&&A.drapeRenderMode===1)?A:c}mergeTerrain(){let c;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(A=>{c=this._prioritizeTerrain(c,A.terrain,A.stylesheet.terrain)}),c===null?delete this.terrain:this.terrain=c}mergeProjection(){let c;this.forEachFragmentStyle(A=>{A.stylesheet.projection!=null&&(c=A.stylesheet.projection)}),this.projection=c||{name:"mercator"}}mergeSources(){const c={},A={},E={};this.forEachFragmentStyle(M=>{for(const P in M._sourceCaches){const j=t.C(P,M.scope);c[j]=M._sourceCaches[P]}for(const P in M._otherSourceCaches){const j=t.C(P,M.scope);A[j]=M._otherSourceCaches[P]}for(const P in M._symbolSourceCaches){const j=t.C(P,M.scope);E[j]=M._symbolSourceCaches[P]}}),this._mergedSourceCaches=c,this._mergedOtherSourceCaches=A,this._mergedSymbolSourceCaches=E}mergeLayers(){const c={},A=[],E={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(P=>{for(const j of P._order){const K=P._layers[j];if(K.type==="slot"){const te=t.dj(j);if(c[te])continue;c[te]=[]}K.slot&&c[K.slot]?c[K.slot].push(K):A.push(K)}}),this._mergedOrder=[];const M=(P=[])=>{for(const j of P)if(j.type==="slot"){const K=t.dj(j.id);c[K]&&M(c[K]),this._mergedSlots.push(K)}else{const K=t.C(j.id,j.scope);this._mergedOrder.push(K),E[K]=j,j.is3D(!!this.terrain)&&(this._has3DLayers=!0),j.type==="circle"&&(this._hasCircleLayers=!0),j.type==="symbol"&&(this._hasSymbolLayers=!0),j.type==="clip"&&(this._clipLayerPresent=!0)}};M(A),this._mergedOrder.sort((P,j)=>{const K=E[P],te=E[j];return K.hasInitialOcclusionOpacityProperties?te.is3D(!!this.terrain)?1:0:K.is3D(!!this.terrain)&&te.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=E,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(c){return this.stylesheet.camera=t.h({},this.stylesheet.camera,c),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(c){return c.data?function(A,E,M,P){const j=t.h({},E);for(const te of Object.keys(t.a5.colorTheme))j[te]===void 0&&(j[te]=t.a5.colorTheme[te].default);const K=new t.a6(ir,A,new Map(M));return K.setTransitionOrValue(j,M),K.untransitioned().possiblyEvaluate(new t.aa(0,{worldview:void 0}))}(this.scope,c,this.options).get("data"):null}_loadColorTheme(c){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const A=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((E,M)=>{const P="data:image/png;base64,";if(!c||c.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void E();let j=c;j.startsWith(P)||(j=P+j);const K=t.I.from("mapbox-reserved-lut"),te=new Image;te.src=j,te.onerror=()=>{this._styleColorTheme.lutLoading=!1,M(new Error("Failed to load image data"))},te.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==A)return void E();this._styleColorTheme.lutLoading=!1;const{width:ge,height:ve,data:Me}=t.q.getImageData(te);if(ve>32)return void M(new Error("The height of the image must be less than or equal to 32 pixels."));if(ge!==ve*ve)return void M(new Error("The width of the image must be equal to the height squared."));this.getImage(K)&&this.removeImage(K),this.addImage(K,{data:new t.r({width:ge,height:ve},Me),pixelRatio:1,sdf:!1,usvg:!1,version:0});const Ce=this.imageManager.getImage(K,this.scope);Ce?(this._styleColorTheme.lut={image:Ce.data,data:c},E()):M(new Error("Missing LUT image."))}})}getLut(c){const A=this._styleColorThemeForScope[c];return A?A.lut:null}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(c){this._spriteRequest=function(A,E,M){let P,j,K;const te=t.q.devicePixelRatio>1?"@2x":"";let ge=t.n(E.transformRequest(E.normalizeSpriteURL(A,te,".json"),t.R.SpriteJSON),(Ce,Pe)=>{ge=null,K||(K=Ce,P=Pe,Me())}),ve=t.o(E.transformRequest(E.normalizeSpriteURL(A,te,".png"),t.R.SpriteImage),(Ce,Pe)=>{ve=null,K||(K=Ce,j=Pe,Me())});function Me(){if(K)M(K);else if(P&&j){const Ce=t.q.getImageData(j),Pe={};for(const Qe in P){const{width:je,height:qe,x:Ke,y:lt,sdf:dt,pixelRatio:vt,stretchX:Tt,stretchY:Dt,content:Vt}=P[Qe],It=new t.r({width:je,height:qe});t.r.copy(Ce,It,{x:Ke,y:lt},{x:0,y:0},{width:je,height:qe},null),Pe[Qe]={data:It,pixelRatio:vt,sdf:dt,stretchX:Tt,stretchY:Dt,content:Vt,usvg:!1}}M(null,Pe)}}return{cancel(){ge&&(ge.cancel(),ge=null),ve&&(ve.cancel(),ve=null)}}}(c,this.map._requestManager,(A,E)=>{if(this._spriteRequest=null,A)this.fire(new t.z(A));else if(E){const M=new Map;for(const P in E)M.set(t.I.from(P),E[P]);this.addImages(M)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new t.A("data",{dataType:"style"}))})}addIconset(c,A){if(A.type==="sprite")return void this._loadSprite(A.url);const E=this.getOwnSourceCache(A.source);if(!E)return void this.fire(new t.z(new Error(`Source "${A.source}" as specified by iconset "${c}" does not exist and cannot be used as an iconset source`)));const M=E.getSource();if(M.type!=="raster-array")return void this.fire(new t.z(new Error(`Source "${A.source}" as specified by iconset "${c}" is not a "raster-array" source and cannot be used as an iconset source`)));M.partial=!1;const P=new Qn(c,this.scope,E);this.imageManager.addImageProvider(P,this.scope)}removeIconset(c){this.imageManager.removeImageProvider(c,this.scope)}_loadIconset(c){if(!t.j(c)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(c);const A=this.map._spriteFormat==="auto";var E,M;this._spriteRequest=(M=(P,j)=>{if(this._spriteRequest=null,P)A?this._loadSprite(c):this.fire(new t.z(P));else if(j){const K=new Map;for(const te in j)K.set(t.I.from(te),j[te]);this.addImages(K)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new t.A("data",{dataType:"style"}))},t.br((E=this.map._requestManager).transformRequest(E.normalizeIconsetURL(c),t.R.Iconset),(P,j)=>{if(P)return void M(P);const K={},te=t.da(new t.bq(j));for(const ge of te.icons){const ve={version:1,pixelRatio:t.q.devicePixelRatio,content:Cr(ge),stretchX:ge.metadata?Nn(ge.metadata.stretch_x_areas):void 0,stretchY:ge.metadata?Nn(ge.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:ge};K[ge.name]=ve}M(null,K)}))}_validateLayer(c){const A=this.getOwnSource(c.source);if(!A)return;const E=c.sourceLayer;E&&(A.type==="geojson"||A.vectorLayerIds&&A.vectorLayerIds.indexOf(E)===-1)&&this.fire(new t.z(new Error(`Source layer "${E}" does not exist on source "${A.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:c}of this.fragments)if(!c.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((c,A)=>{const E=this.fragments[A];return E&&E.style&&(c.data=E.style.serialize()),c})}_serializeSources(){const c={};for(const A in this._sourceCaches){const E=this._sourceCaches[A].getSource();c[E.id]||(c[E.id]=E.serialize())}return c}_serializeLayers(c){const A=[];for(const E of c){const M=this._layers[E];M&&M.type!=="custom"&&A.push(M.serialize())}return A}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(c){return c?this.order:this._mergedOrder}isLayerDraped(c){return!!this.terrain&&c.isDraped(this.getLayerSourceCache(c))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(c){const A=this.getOwnLayer(c);if(A)return A;this.fire(new t.z(new Error(`The layer '${c}' does not exist in the map's style.`)))}_checkSource(c){const A=this.getOwnSource(c);if(A)return A;this.fire(new t.z(new Error(`The source '${c}' does not exist in the map's style.`)))}precompilePrograms(c,A){const E=this.map.painter;if(E)for(let M=c.minzoom||0;M<(c.maxzoom||25.5);M++){const P=c.getProgramIds();if(P)for(const j of P){const K=c.getDefaultProgramParams(j,A.zoom,this._styleColorTheme.lut);K&&(E.style=this,this.fog&&(E._fogVisible=!0,K.overrideFog=!0,E.getOrCreateProgram(j,K)),E._fogVisible=!1,K.overrideFog=!1,E.getOrCreateProgram(j,K),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(K.overrideRtt=!0,E.getOrCreateProgram(j,K)))}}}update(c){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(c),this.directionalLight&&this.directionalLight.recalculate(c);const A=this.calculateLightsBrightness();c.brightness=A||0,A!==this._brightness&&(this._brightness=A,this.dispatcher.broadcast("setBrightness",A)),c.worldview!==this._worldview&&(this._worldview=c.worldview,this.dispatcher.broadcast("setWorldview",this._worldview));const E=this._changes.isDirty();let M=!1;if(this._changes.isDirty()){const K=this._changes.getLayerUpdatesByScope();for(const te in K){const{updatedIds:ge,removedIds:ve}=K[te];(ge||ve)&&(this._updateWorkerLayers(te,ge,ve),M=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(c),this.light&&this.light.updateTransitions(c),this.ambientLight&&this.ambientLight.updateTransitions(c),this.directionalLight&&this.directionalLight.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this.snow&&this.snow.updateTransitions(c),this.rain&&this.rain.updateTransitions(c),this._changes.reset()}const P={};for(const K in this._mergedSourceCaches){const te=this._mergedSourceCaches[K];P[K]=te.used,te.used=!1,te.tileCoverLift=0}for(const K of this._mergedOrder){const te=this._mergedLayers[K];if(te.recalculate(c,this._availableImages),!te.isHidden(c.zoom)){const ge=this.getLayerSourceCache(te);ge&&(ge.used=!0,ge.tileCoverLift=Math.max(ge.tileCoverLift,te.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(te,c)}):this.precompilePrograms(te,c))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&M&&this.mergeLayers();const j=this.imageManager.getPendingImageProviders();for(const K of j)K.sourceCache.used=!0;for(const K in P){const te=this._mergedSourceCaches[K];P[K]!==te.used&&te.getSource().fire(new t.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:te.getSource().id}))}this.light&&this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.snow&&this.snow.recalculate(c),this.rain&&this.rain.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),E&&this.fire(new t.A("data",{dataType:"style"}))}updateImageProviders(){const c=this.imageManager.getPendingImageProviders();for(const A of c){const E=A.resolvePendingRequests(),M=this.getFragmentStyle(A.scope);M&&M.addImages(E)}}_updateTilesForChangedImages(){const c={};for(const A in this._mergedSourceCaches){const E=this._mergedSourceCaches[A].getSource().scope;c[E]=c[E]||this._changes.getUpdatedImages(E),c[E].length!==0&&this._mergedSourceCaches[A].reloadTilesForDependencies(["icons","patterns"],c[E])}for(const A in c)this._changes.resetUpdatedImages(A)}_updateWorkerLayers(c,A,E){const M=this.getFragmentStyle(c);M&&this.dispatcher.broadcast("updateLayers",{layers:A?M._serializeLayers(A):[],scope:c,removedIds:E||[],options:M.options})}setState(c,A){if(this._checkLoaded(),ki(this,_i(c)))return!1;(c=t.di(c)).layers=Jc(c.layers);const E=function(j,K){if(!j)return[{command:bs.setStyle,args:[K]}];let te=[];try{if(!t.bv(j.version,K.version))return[{command:bs.setStyle,args:[K]}];if(t.bv(j.center,K.center)||te.push({command:bs.setCenter,args:[K.center]}),t.bv(j.zoom,K.zoom)||te.push({command:bs.setZoom,args:[K.zoom]}),t.bv(j.bearing,K.bearing)||te.push({command:bs.setBearing,args:[K.bearing]}),t.bv(j.pitch,K.pitch)||te.push({command:bs.setPitch,args:[K.pitch]}),t.bv(j.sprite,K.sprite)||te.push({command:bs.setSprite,args:[K.sprite]}),t.bv(j.glyphs,K.glyphs)||te.push({command:bs.setGlyphs,args:[K.glyphs]}),t.bv(j.imports,K.imports)||function(Pe=[],Qe=[],je){Qe=Qe||[];const qe=(Pe=Pe||[]).map(Pu),Ke=Qe.map(Pu),lt=Pe.reduce(gu,{}),dt=Qe.reduce(gu,{}),vt=qe.slice();let Tt,Dt,Vt,It;for(Tt=0,Dt=0;Tt<qe.length;Tt++)Vt=qe[Tt],dt.hasOwnProperty(Vt)?Dt++:(je.push({command:bs.removeImport,args:[Vt]}),vt.splice(vt.indexOf(Vt,Dt),1));for(Tt=0,Dt=0;Tt<Ke.length;Tt++)Vt=Ke[Ke.length-1-Tt],vt[vt.length-1-Tt]!==Vt&&(lt.hasOwnProperty(Vt)?(je.push({command:bs.removeImport,args:[Vt]}),vt.splice(vt.lastIndexOf(Vt,vt.length-Dt),1)):Dt++,It=vt[vt.length-Tt],je.push({command:bs.addImport,args:[dt[Vt],It]}),vt.splice(vt.length-Tt,0,Vt));for(const Mt of Qe){const Pt=lt[Mt.id];Pt&&(delete Pt.data,t.bv(Pt,Mt)||je.push({command:bs.updateImport,args:[Mt.id,Mt]}))}}(j.imports,K.imports,te),t.bv(j.transition,K.transition)||te.push({command:bs.setTransition,args:[K.transition]}),t.bv(j.light,K.light)||te.push({command:bs.setLight,args:[K.light]}),t.bv(j.fog,K.fog)||te.push({command:bs.setFog,args:[K.fog]}),t.bv(j.snow,K.snow)||te.push({command:bs.setSnow,args:[K.snow]}),t.bv(j.rain,K.rain)||te.push({command:bs.setRain,args:[K.rain]}),t.bv(j.projection,K.projection)||te.push({command:bs.setProjection,args:[K.projection]}),t.bv(j.lights,K.lights)||te.push({command:bs.setLights,args:[K.lights]}),t.bv(j.camera,K.camera)||te.push({command:bs.setCamera,args:[K.camera]}),t.bv(j.iconsets,K.iconsets)||function(Pe,Qe,je){let qe;for(qe in Qe=Qe||{},Pe=Pe||{})Pe.hasOwnProperty(qe)&&(Qe.hasOwnProperty(qe)||je.push({command:bs.removeIconset,args:[qe]}));for(qe in Qe){if(!Qe.hasOwnProperty(qe))continue;const Ke=Qe[qe];Pe.hasOwnProperty(qe)?t.bv(Pe[qe],Ke)||(je.push({command:bs.removeIconset,args:[qe]}),je.push({command:bs.addIconset,args:[qe,Ke]})):je.push({command:bs.addIconset,args:[qe,Ke]})}}(j.iconsets,K.iconsets,te),!t.bv(j["color-theme"],K["color-theme"]))return[{command:bs.setStyle,args:[K]}];const ge={},ve=[];(function(Pe,Qe,je,qe){let Ke;for(Ke in Qe=Qe||{},Pe=Pe||{})Pe.hasOwnProperty(Ke)&&(Qe.hasOwnProperty(Ke)||mu(Ke,je,qe));for(Ke in Qe){if(!Qe.hasOwnProperty(Ke))continue;const lt=Qe[Ke];Pe.hasOwnProperty(Ke)?t.bv(Pe[Ke],lt)||(Pe[Ke].type==="geojson"&&lt.type==="geojson"&&Ec(Pe,Qe,Ke)?je.push({command:bs.setGeoJSONSourceData,args:[Ke,lt.data]}):Fu(Ke,Qe,je,qe)):Dh(Ke,Qe,je)}})(j.sources,K.sources,ve,ge);const Me=[];j.layers&&j.layers.forEach(Pe=>{Pe.source&&ge[Pe.source]?te.push({command:bs.removeLayer,args:[Pe.id]}):Me.push(Pe)});let Ce=j.terrain;Ce&&ge[Ce.source]&&(te.push({command:bs.setTerrain,args:[void 0]}),Ce=void 0),te=te.concat(ve),t.bv(Ce,K.terrain)||te.push({command:bs.setTerrain,args:[K.terrain]}),function(Pe,Qe,je){Qe=Qe||[];const qe=(Pe=Pe||[]).map(Pu),Ke=Qe.map(Pu),lt=Pe.reduce(gu,{}),dt=Qe.reduce(gu,{}),vt=qe.slice(),Tt=Object.create(null);let Dt,Vt,It,Mt,Pt,dr,sr;for(Dt=0,Vt=0;Dt<qe.length;Dt++)It=qe[Dt],dt.hasOwnProperty(It)?Vt++:(je.push({command:bs.removeLayer,args:[It]}),vt.splice(vt.indexOf(It,Vt),1));for(Dt=0,Vt=0;Dt<Ke.length;Dt++)It=Ke[Ke.length-1-Dt],vt[vt.length-1-Dt]!==It&&(lt.hasOwnProperty(It)?(je.push({command:bs.removeLayer,args:[It]}),vt.splice(vt.lastIndexOf(It,vt.length-Vt),1)):Vt++,dr=vt[vt.length-Dt],je.push({command:bs.addLayer,args:[dt[It],dr]}),vt.splice(vt.length-Dt,0,It),Tt[It]=!0);for(Dt=0;Dt<Ke.length;Dt++)if(It=Ke[Dt],Mt=lt[It],Pt=dt[It],!Tt[It]&&!t.bv(Mt,Pt))if(t.bv(Mt.source,Pt.source)&&t.bv(Mt["source-layer"],Pt["source-layer"])&&t.bv(Mt.type,Pt.type)){for(sr in fh(Mt.layout,Pt.layout,je,It,null,bs.setLayoutProperty),fh(Mt.paint,Pt.paint,je,It,null,bs.setPaintProperty),t.bv(Mt.slot,Pt.slot)||je.push({command:bs.setSlot,args:[It,Pt.slot]}),t.bv(Mt.filter,Pt.filter)||je.push({command:bs.setFilter,args:[It,Pt.filter]}),t.bv(Mt.minzoom,Pt.minzoom)&&t.bv(Mt.maxzoom,Pt.maxzoom)||je.push({command:bs.setLayerZoomRange,args:[It,Pt.minzoom,Pt.maxzoom]}),Mt)Mt.hasOwnProperty(sr)&&sr!=="layout"&&sr!=="paint"&&sr!=="filter"&&sr!=="metadata"&&sr!=="minzoom"&&sr!=="maxzoom"&&sr!=="slot"&&(sr.indexOf("paint.")===0?fh(Mt[sr],Pt[sr],je,It,sr.slice(6),bs.setPaintProperty):t.bv(Mt[sr],Pt[sr])||je.push({command:bs.setLayerProperty,args:[It,sr,Pt[sr]]}));for(sr in Pt)Pt.hasOwnProperty(sr)&&!Mt.hasOwnProperty(sr)&&sr!=="layout"&&sr!=="paint"&&sr!=="filter"&&sr!=="metadata"&&sr!=="minzoom"&&sr!=="maxzoom"&&sr!=="slot"&&(sr.indexOf("paint.")===0?fh(Mt[sr],Pt[sr],je,It,sr.slice(6),bs.setPaintProperty):t.bv(Mt[sr],Pt[sr])||je.push({command:bs.setLayerProperty,args:[It,sr,Pt[sr]]}))}else je.push({command:bs.removeLayer,args:[It]}),dr=vt[vt.lastIndexOf(It)+1],je.push({command:bs.addLayer,args:[Pt,dr]})}(Me,K.layers,te)}catch(ge){console.warn("Unable to compute style diff:",ge),te=[{command:bs.setStyle,args:[K]}]}return te}(this.serialize(),c).filter(j=>!(j.command in Oi));if(E.length===0)return!1;const M=E.filter(j=>!(j.command in es));if(M.length>0)throw new Error(`Unimplemented: ${M.map(j=>j.command).join(", ")}.`);const P=[];return E.forEach(j=>{P.push(this[j.command](...j.args))}),A&&Promise.all(P).then(A).catch(A),this.stylesheet=c,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(c){if(c.size===0)return this;for(const[A,E]of c.entries()){if(this.getImage(A))return this.fire(new t.z(new Error(`An image with the name "${A.name}" already exists.`)));this.imageManager.addImage(A,this.scope,E),this._changes.updateImage(A,this.scope)}return this._updateWorkerImages(),this.fire(new t.A("data",{dataType:"style"})),this}addImage(c,A){return this.getImage(c)?this.fire(new t.z(new Error(`An image with the name "${c.name}" already exists.`))):(this.imageManager.addImage(c,this.scope,A),this._changes.updateImage(c,this.scope),this._updateWorkerImages(),this.fire(new t.A("data",{dataType:"style"})),this)}updateImage(c,A,E=!1){this.imageManager.updateImage(c,this.scope,A),E&&(this._changes.updateImage(c,this.scope),this._updateWorkerImages(),this.fire(new t.A("data",{dataType:"style"})))}getImage(c){return this.imageManager.getImage(c,this.scope)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c,this.scope),this._changes.updateImage(c,this.scope),this._updateWorkerImages(),this.fire(new t.A("data",{dataType:"style"})),this):this.fire(new t.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModelURLs(c){return this.modelManager.addModelURLs(c,this.scope),this._updateWorkerModels(),this.fire(new t.A("data",{dataType:"style"})),this}addModel(c,A,E={}){return this._checkLoaded(),this._validate(We,`models.${c}`,A,null,E)||(this.modelManager.addModel(c,A,this.scope),this.fire(new t.A("data",{dataType:"style"}))),this}hasModel(c){return this.modelManager.hasModel(c,this.scope)}removeModel(c){return this.hasModel(c)?(this.modelManager.removeModel(c,this.scope,!1,!0),this.fire(new t.A("data",{dataType:"style"})),this):this.fire(new t.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(c,A,E={}){if(this._checkLoaded(),this.getOwnSource(c)!==void 0)throw new Error(`There is already a source with ID "${c}".`);if(!A.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(A).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(A.type)>=0&&this._validate(Zn,`sources.${c}`,A,null,E))return;this.map&&this.map._collectResourceTiming&&(A.collectResourceTiming=!0);const M=Do(c,A,this.dispatcher,this);M.scope=this.scope,M.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(M.id),source:M.serialize(),sourceId:M.id}));const P=j=>{const K=(j?"symbol:":"other:")+M.id,te=t.C(K,this.scope),ge=this._sourceCaches[K]=new na(te,M,j);(j?this._symbolSourceCaches:this._otherSourceCaches)[M.id]=ge,ge.onAdd(this.map)};P(!1),A.type!=="vector"&&A.type!=="geojson"||P(!0),M.onAdd&&M.onAdd(this.map),E.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(c){this._checkLoaded();const A=this.getOwnSource(c);if(!A)throw new Error("There is no source with this ID");for(const M in this._layers)if(this._layers[M].source===c)return this.fire(new t.z(new Error(`Source "${c}" cannot be removed while layer "${M}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===c)return this.fire(new t.z(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const M=Object.entries(this.stylesheet.iconsets).find(([P,j])=>j.type==="source"&&j.source===c);if(M)return this.fire(new t.z(new Error(`Source "${c}" cannot be removed while iconset "${M[0]}" is using it.`)))}const E=this.getOwnSourceCaches(c);for(const M of E){const P=t.dj(M.id);delete this._sourceCaches[P],this._changes.discardSourceCacheUpdate(M.id),M.fire(new t.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:M.getSource().id})),M.setEventedParent(null),M.clearTiles()}return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],this.mergeSources(),A.setEventedParent(null),A.onRemove&&A.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(c,A){this._checkLoaded(),this.getOwnSource(c).setData(A),this._changes.setDirty()}getOwnSource(c){const A=this.getOwnSourceCache(c);return A&&A.getSource()}getOwnSources(){const c=[];for(const A in this._otherSourceCaches){const E=this.getOwnSourceCache(A);E&&c.push(E.getSource())}return c}areTilesLoaded(){const c=this._mergedSourceCaches;for(const A in c){const E=c[A]._tiles;for(const M in E){const P=E[M];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0}setLights(c){if(this._checkLoaded(),!c)return delete this.ambientLight,void delete this.directionalLight;const A=this._getTransitionParameters();for(const P of c){if(this._validate(On,"lights",P))return;switch(P.type){case"ambient":if(this.ambientLight){const j=this.ambientLight;j.set(P),j.updateTransitions(A)}else this.ambientLight=new vn(P,Qi||(Qi=new t.a7({color:new t.a8(t.a5.properties_light_ambient.color),"color-use-theme":new t.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new t.a8(t.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const j=this.directionalLight;j.set(P),j.updateTransitions(A)}else this.directionalLight=new vn(P,Zt||(Zt=new t.a7({direction:new t.an(t.a5.properties_light_directional.direction),color:new t.a8(t.a5.properties_light_directional.color),"color-use-theme":new t.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new t.a8(t.a5.properties_light_directional.intensity),"cast-shadows":new t.a8(t.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new t.a8(t.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new t.a8(t.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const E=Object.assign(A,{worldview:this.map.getWorldview()}),M=new t.aa(this.z||0,E);this.ambientLight&&this.ambientLight.recalculate(M),this.directionalLight&&this.directionalLight.recalculate(M),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const c=this.directionalLight,A=this.ambientLight;if(!c||!A)return;const E=Ce=>.2126*(Ce[0]<=.03928?Ce[0]/12.92:Math.pow((Ce[0]+.055)/1.055,2.4))+.7152*(Ce[1]<=.03928?Ce[1]/12.92:Math.pow((Ce[1]+.055)/1.055,2.4))+.0722*(Ce[2]<=.03928?Ce[2]/12.92:Math.pow((Ce[2]+.055)/1.055,2.4)),M=c.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),P=c.properties.get("intensity"),j=c.properties.get("direction"),K=1-t.d1(j.x,j.y,j.z)[2]/90,te=E(M)*P*K,ge=A.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),ve=A.properties.get("intensity"),Me=E(ge)*ve;return Number(((te+Me)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const c=[];return this.directionalLight&&c.push(this.directionalLight.get()),this.ambientLight&&c.push(this.ambientLight.get()),c}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(c){if(c==null||c===""&&this.isRootStyle())return this;if(t.dk(c)){const A=t.dl(c),E=this.fragments.find(({id:P})=>P===A);if(!E)return;const M=t.dj(c);return E.style.getFragmentStyle(M)}{const A=this.fragments.find(({id:E})=>E===c);return A?A.style:void 0}}setFeaturesetSelectors(c){if(!c)return;const A={},E=(M,P="")=>`${M}::${P}`;this._featuresetSelectors={};for(const M in c){const P=this._featuresetSelectors[M]=[];for(const j of c[M].selectors){if(j.featureNamespace){const te=this.getOwnLayer(j.layer);if(!te){t.w(`Layer is undefined for selector: ${j.layer}`);continue}const ge=E(te.source,te.sourceLayer);if(ge in A&&A[ge]!==j.featureNamespace){t.w(`"featureNamespace ${j.featureNamespace} of featureset ${M}'s selector is not associated to the same source, skip this selector`);continue}A[ge]=j.featureNamespace}let K;if(j.properties)for(const te in j.properties){const ge=t.X(j.properties[te]);ge.result==="success"&&(K=K||{},K[te]=ge.value)}P.push({layerId:j.layer,namespace:j.featureNamespace,properties:K,uniqueFeatureID:j._uniqueFeatureID})}}}getFeaturesetDescriptors(c){const A=this.getFragmentStyle(c);if(!A||!A.stylesheet.featuresets)return[];const E=[];for(const M in A.stylesheet.featuresets)E.push({featuresetId:M,importId:A.scope?A.scope:void 0});return E}getFeaturesetLayers(c,A){const E=this.getFragmentStyle(A),M=E.stylesheet.featuresets;if(!M||!M[c])return this.fire(new t.z(new Error(`The featureset '${c}' does not exist in the map's style and cannot be queried.`))),[];const P=[];for(const j of M[c].selectors){const K=E.getOwnLayer(j.layer);K&&P.push(K)}return P}getConfigProperty(c,A){const E=this.getFragmentStyle(c);if(!E)return null;const M=t.C(A,E.scope),P=E.options.get(M),j=P?P.value||P.default:null;return j?j.serialize():null}setConfigProperty(c,A,E){const M=this.getFragmentStyle(c);if(!M)return;const P=M.stylesheet.indoor?Kt(M.stylesheet.schema):M.stylesheet.schema;if(!P||!P[A])return;const j=t.X(E);if(j.result!=="success")return void ki(this,j.value);const K=j.value.expression,te=t.C(A,M.scope),ge=M.options.get(te);if(!ge)return;let ve;const{minValue:Me,maxValue:Ce,stepValue:Pe,type:Qe,values:je}=P[A],qe=t.X(P[A].default);qe.result==="success"&&(ve=qe.value.expression),ve?(this.options.set(te,Object.assign({},ge,{value:K,default:ve,minValue:Me,maxValue:Ce,stepValue:Pe,type:Qe,values:je})),this.updateConfigDependencies(A)):this.fire(new t.z(new Error(`No schema defined for the config option "${A}" in the "${c}" fragment.`)))}getConfig(c){const A=this.getFragmentStyle(c);if(!A)return null;const E=A.stylesheet.schema;if(!E)return null;const M={};for(const P in E){const j=t.C(P,A.scope),K=A.options.get(j),te=K?K.value||K.default:null;M[P]=te?te.serialize():null}return M}setConfig(c,A){const E=this.getFragmentStyle(c);E&&(E.updateConfig(A,E.stylesheet.schema),this.updateConfigDependencies())}getSchema(c){const A=this.getFragmentStyle(c);return A?A.stylesheet.schema:null}setSchema(c,A){const E=this.getFragmentStyle(c);E&&(E.stylesheet.schema=A,E.updateConfig(E._config,A),this.updateConfigDependencies())}updateConfig(c,A){if(this._config=c,c||A)if(A)for(const E in A){let M,P;const j=t.X(A[E].default);if(j.result==="success"&&(M=j.value.expression),c&&c[E]!==void 0){const Ce=t.X(c[E]);Ce.result==="success"&&(P=Ce.value.expression)}const{minValue:K,maxValue:te,stepValue:ge,type:ve,values:Me}=A[E];if(M){const Ce=t.C(E,this.scope);this.options.set(Ce,{default:M,value:P,minValue:K,maxValue:te,stepValue:ge,type:ve,values:Me})}else this.fire(new t.z(new Error(`No schema defined for config option "${E}".`)))}else this.fire(new t.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(c){for(const A of this._configDependentLayers){const E=this.getLayer(A);if(E){if(c&&!E.configDependencies.has(c))continue;E.possiblyEvaluateVisibility(),this._updateLayer(E)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(A=>{const E=A._styleColorTheme.colorThemeOverride?A._styleColorTheme.colorThemeOverride:A._styleColorTheme.colorTheme;if(E){const M=A._evaluateColorThemeData(E);(!A._styleColorTheme.lut&&M!==""||A._styleColorTheme.lut&&M!==A._styleColorTheme.lut.data)&&A.setColorTheme(E)}}),this._changes.setDirty()}addLayer(c,A,E={}){this._checkLoaded();const M=c.id;if(this._layers[M])return void this.fire(new t.z(new Error(`Layer with id "${M}" already exists on this map`)));let P;if(c.type==="custom"){if(ki(this,t.dm(c)))return;P=t.dn(c,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof c.source=="object"&&(this.addSource(M,c.source),c=t.di(c),c=t.h(c,{source:M})),this._validate(li,`layers.${M}`,c,{arrayIndex:-1},E))return;P=t.dn(c,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(P),P.setEventedParent(this,{layer:{id:M}})}P.configDependencies.size!==0&&this._configDependentLayers.add(P.fqid);let j=this._order.length;if(A){const ve=this._order.indexOf(A);if(ve===-1)return void this.fire(new t.z(new Error(`Layer with id "${A}" does not exist on this map.`)));P.slot===this._layers[A].slot?j=ve:t.w(`Layer with id "${A}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(j,0,M),this._layerOrderChanged=!0,this._layers[M]=P;const K=this.getOwnLayerSourceCache(P),te=!!this.directionalLight&&this.directionalLight.shadowsEnabled();K&&P.canCastShadows()&&te&&(K.castsShadows=!0);const ge=this._changes.getRemovedLayer(P);if(ge&&P.source&&K&&P.type!=="custom"){this._changes.discardLayerRemoval(P);const ve=t.C(P.source,P.scope);ge.type!==P.type?this._changes.updateSourceCache(ve,"clear"):(this._changes.updateSourceCache(ve,"reload"),K.pause())}this._updateLayer(P),P.onAdd&&P.onAdd(this.map),P.scope=this.scope,this.mergeLayers()}moveLayer(c,A){this._checkLoaded();const E=this._checkLayer(c);if(!E||c===A)return;const M=this._order.indexOf(c);this._order.splice(M,1);let P=this._order.length;if(A){const j=this._order.indexOf(A);if(j===-1)return void this.fire(new t.z(new Error(`Layer with id "${A}" does not exist on this map.`)));E.slot===this._layers[A].slot?P=j:t.w(`Layer with id "${A}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(P,0,c),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(c){this._checkLoaded();const A=this._checkLayer(c);if(!A)return;A.setEventedParent(null);const E=this._order.indexOf(c);this._order.splice(E,1),delete this._layers[c],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(A.fqid),this._changes.removeLayer(A);const M=this.getOwnLayerSourceCache(A);if(M&&M.castsShadows){let P=!1;for(const j in this._layers)if(this._layers[j].source===A.source&&this._layers[j].canCastShadows()){P=!0;break}M.castsShadows=P}A.onRemove&&A.onRemove(this.map),this.mergeLayers()}getOwnLayer(c){return this._layers[c]}hasLayer(c){return c in this._mergedLayers}hasLayerType(c){for(const A in this._layers)if(this._layers[A].type===c)return!0;return!1}setLayerZoomRange(c,A,E){this._checkLoaded();const M=this._checkLayer(c);M&&(M.minzoom===A&&M.maxzoom===E||(A!=null&&(M.minzoom=A),E!=null&&(M.maxzoom=E),this._updateLayer(M)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(c,A){this._checkLoaded();const E=this._checkLayer(c);E&&E.slot!==A&&(E.slot=A,this._updateLayer(E))}setFilter(c,A,E={}){this._checkLoaded();const M=this._checkLayer(c);if(M&&!t.bv(M.filter,A))return A==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(Qt,`layers.${M.id}.filter`,A,{layerType:M.type},E)||(M.filter=t.di(A),this._updateLayer(M)))}getFilter(c){const A=this._checkLayer(c);if(A)return t.di(A.filter)}setLayoutProperty(c,A,E,M={}){this._checkLoaded();const P=this._checkLayer(c);if(P&&!t.bv(P.getLayoutProperty(A),E)){if(E!=null&&(!M||M.validate!==!1)&&ki(P,et.call(_i,{key:`layers.${c}.layout.${A}`,layerType:P.type,objectKey:A,value:E,styleSpec:t.a5,style:{glyphs:!0,sprite:!0}})))return;P.setLayoutProperty(A,E),P.configDependencies.size!==0&&this._configDependentLayers.add(P.fqid),this._updateLayer(P)}}getLayoutProperty(c,A){const E=this._checkLayer(c);if(E)return E.getLayoutProperty(A)}setPaintProperty(c,A,E,M={}){this._checkLoaded();const P=this._checkLayer(c);if(!P||t.bv(P.getPaintProperty(A),E)||E!=null&&(!M||M.validate!==!1)&&ki(P,Ve.call(_i,{key:`layers.${c}.paint.${A}`,layerType:P.type,objectKey:A,value:E,styleSpec:t.a5})))return;const j=P.setPaintProperty(A,E);P.configDependencies.size!==0&&this._configDependentLayers.add(P.fqid),j&&this._updateLayer(P),this._changes.updatePaintProperties(P)}getPaintProperty(c,A){const E=this._checkLayer(c);if(E)return E.getPaintProperty(A)}setFeatureState(c,A){if(this._checkLoaded(),"target"in c){if("featuresetId"in c.target){const{featuresetId:te,importId:ge}=c.target,ve=this.getFragmentStyle(ge),Me=ve.getFeaturesetLayers(te);for(const{source:Ce,sourceLayer:Pe}of Me)ve.setFeatureState({id:c.id,source:Ce,sourceLayer:Pe},A)}else if("layerId"in c.target){const{layerId:te}=c.target,ge=this.getLayer(te);this.setFeatureState({id:c.id,source:ge.source,sourceLayer:ge.sourceLayer},A)}return}const E=c.source,M=c.sourceLayer,P=this._checkSource(E);if(!P)return;const j=P.type;if(j==="geojson"&&M)return void this.fire(new t.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(j==="vector"&&!M)return void this.fire(new t.z(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new t.z(new Error("The feature id parameter must be provided.")));const K=this.getOwnSourceCaches(E);for(const te of K)te.setFeatureState(M,c.id,A)}removeFeatureState(c,A){if(this._checkLoaded(),"target"in c){if("featuresetId"in c.target){const{featuresetId:te,importId:ge}=c.target,ve=this.getFragmentStyle(ge),Me=ve.getFeaturesetLayers(te);for(const{source:Ce,sourceLayer:Pe}of Me)ve.removeFeatureState({id:c.id,source:Ce,sourceLayer:Pe},A)}else if("layerId"in c.target){const{layerId:te}=c.target,ge=this.getLayer(te);this.removeFeatureState({id:c.id,source:ge.source,sourceLayer:ge.sourceLayer},A)}return}const E=c.source,M=this._checkSource(E);if(!M)return;const P=M.type,j=P==="vector"?c.sourceLayer:void 0;if(P==="vector"&&!j)return void this.fire(new t.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(A&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new t.z(new Error("A feature id is required to remove its specific state property.")));const K=this.getOwnSourceCaches(E);for(const te of K)te.removeFeatureState(j,c.id,A)}getFeatureState(c){if(this._checkLoaded(),"target"in c){let P;if("featuresetId"in c.target){const{featuresetId:j,importId:K}=c.target,te=this.getFragmentStyle(K),ge=te.getFeaturesetLayers(j);for(const{source:ve,sourceLayer:Me}of ge){const Ce=te.getFeatureState({id:c.id,source:ve,sourceLayer:Me});if(Ce&&!P)P=Ce;else if(!t.bv(P,Ce))return void this.fire(new t.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in c.target){const{layerId:j}=c.target,K=this.getLayer(j);P=this.getFeatureState({id:c.id,source:K.source,sourceLayer:K.sourceLayer})}return P}const A=c.source,E=c.sourceLayer,M=this._checkSource(A);if(M){if(M.type!=="vector"||E)return c.id===void 0&&this.fire(new t.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(A)[0].getFeatureState(E,c.id);this.fire(new t.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(c){return this.stylesheet.transition=t.h({},this.stylesheet.transition,c),this.transition=this.stylesheet.transition,this}getTransition(){return t.h({},this.stylesheet.transition)}serialize(){this._checkLoaded();const c=this.getTerrain(),A=c&&this.terrain&&this.terrain.scope===this.scope?c:this.stylesheet.terrain;return t.dp({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:A,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},E=>E!==void 0)}_updateFilteredLayers(c){for(const A of Object.values(this._mergedLayers))c(A)&&this._updateLayer(A)}_updateLayer(c){this._changes.updateLayer(c);const A=this.getLayerSourceCache(c),E=t.C(c.source,c.scope),M=this._changes.getUpdatedSourceCaches();c.source&&!M[E]&&A&&A.getSource().type!=="raster"&&(this._changes.updateSourceCache(E,"reload"),A.pause()),c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const A=K=>this._mergedLayers[K].is3D(!!this.terrain),E=this.order,M={},P=[];for(let K=E.length-1;K>=0;K--){const te=E[K];if(A(te)){M[te]=K;for(const ge of c){const ve=ge[te];if(ve)for(const Me of ve)P.push(Me)}}}P.sort((K,te)=>te.intersectionZ-K.intersectionZ);const j=[];for(let K=E.length-1;K>=0;K--){const te=E[K];if(A(te))for(let ge=P.length-1;ge>=0;ge--){const ve=P[ge].feature;if(ve.layer&&M[ve.layer.id]<K)break;j.push(ve),P.pop()}else for(const ge of c){const ve=ge[te];if(ve)for(const Me of ve)j.push(Me.feature)}}return j}queryRenderedFeatures(c,A,E){let M;A&&!Array.isArray(A)&&A.filter&&(this._validate(Qt,"queryRenderedFeatures.filter",A.filter,null,A),M=t.b3(A.filter));const P={},j=ve=>{if(Zs.has(ve.type))return;const Me=this.getOwnLayerSourceCache(ve),Ce=P[Me.id]=P[Me.id]||{sourceCache:Me,layers:{},has3DLayers:!1};ve.is3D(!!this.terrain)&&(Ce.has3DLayers=!0),Ce.layers[ve.fqid]=Ce.layers[ve.fqid]||{styleLayer:ve,targets:[]},Ce.layers[ve.fqid].targets.push({filter:M})};if(A&&A.layers){if(!Array.isArray(A.layers))return this.fire(new t.z(new Error("parameters.layers must be an Array."))),[];for(const ve of A.layers){const Me=this._layers[ve];if(!Me)return this.fire(new t.z(new Error(`The layer '${ve}' does not exist in the map's style and cannot be queried for features.`))),[];j(Me)}}else for(const ve in this._layers)j(this._layers[ve]);const K=this._queryRenderedFeatures(c,P,E),te=this._flattenAndSortRenderedFeatures(K),ge=[];for(const ve of te)t.dq(ve.layer.id)===this.scope&&ge.push(ve);return ge}queryRenderedFeatureset(c,A,E){let M;A&&!Array.isArray(A)&&A.filter&&(this._validate(Qt,"queryRenderedFeatures.filter",A.filter,null,A),M=t.b3(A.filter));const P="mock",j=[];if(A&&A.target)j.push(Object.assign({},A,{targetId:P,filter:M}));else{const ve=this.getFeaturesetDescriptors();for(const Me of ve)j.push({targetId:P,filter:M,target:Me});for(const{style:Me}of this.fragments){const Ce=Me.getFeaturesetDescriptors();for(const Pe of Ce)j.push({targetId:P,filter:M,target:Pe})}}const K=this.queryRenderedTargets(c,j,E),te=[],ge=new Set;for(const ve of K)for(const Me of ve.variants[P])il(Me,ve,ge)||te.push(new t.dr(ve,Me));return te}queryRenderedTargets(c,A,E){const M={},P=(K,te,ge,ve)=>{const Me=M[te.id]=M[te.id]||{sourceCache:te,layers:{},has3DLayers:!1};if(Me.layers[K.fqid]=Me.layers[K.fqid]||{styleLayer:K,targets:[]},K.is3D(!!this.terrain)&&(Me.has3DLayers=!0),!ve)return ge.uniqueFeatureID=!1,void Me.layers[K.fqid].targets.push(ge);Me.layers[K.fqid].targets.push(Object.assign({},ge,{namespace:ve.namespace,properties:ve.properties,uniqueFeatureID:ve.uniqueFeatureID}))};for(const K of A)if("featuresetId"in K.target){const{featuresetId:te,importId:ge}=K.target,ve=this.getFragmentStyle(ge);if(!ve||!ve._featuresetSelectors)continue;const Me=ve._featuresetSelectors[te];if(!Me){this.fire(new t.z(new Error(`The featureset '${te}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const Ce of Me){const Pe=ve.getOwnLayer(Ce.layerId);Pe&&!Zs.has(Pe.type)&&P(Pe,ve.getOwnLayerSourceCache(Pe),K,Ce)}}else if("layerId"in K.target){const{layerId:te}=K.target,ge=this.getLayer(te);if(!ge||Zs.has(ge.type))continue;P(ge,this.getLayerSourceCache(ge),K)}const j=this._queryRenderedFeatures(c,M,E);return this._flattenAndSortRenderedFeatures(j)}_queryRenderedFeatures(c,A,E){const M=[],P=!!this.map._showQueryGeometry,j=si.createFromScreenPoints(c,E);for(const K in A){const te=Ma(j,A[K],this._availableImages,E,P);Object.keys(te).length&&M.push(te)}if(this.placement)for(const K in A){if(!A[K].sourceCache._onlySymbols)continue;const te=Uo(j.screenGeometry,A[K],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData,this.map.getWorldview());Object.keys(te).length&&M.push(te)}return M}querySourceFeatures(c,A){const E=A&&A.filter;E&&this._validate(Qt,"querySourceFeatures.filter",E,null,A);let M=[];const P=this.getOwnSourceCaches(c);for(const j of P)M=M.concat(xa(j,A));return M}addSourceType(c,A,E){return xo.getSourceType(c)?E(new Error(`A source type called "${c}" already exists.`)):(xo.setSourceType(c,A),A.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:A.workerSourceURL},E):E(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(c,A,E={}){this._checkLoaded();const M=this.light.getLight();let P=!1;for(const K in c)if(!t.bv(c[K],M[K])){P=!0;break}if(!P)return;const j=this._getTransitionParameters();this.light.setLight(c,A,E),this.light.updateTransitions(j)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=t.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&t.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(c,A=1){if(this._checkLoaded(),!c)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),A===0&&delete this.terrain,c===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let E=c;const M=c.source==null;if(A===1){if(this.disableElevatedTerrain)return;if(typeof E.source=="object"){const K="terrain-dem-src";this.addSource(K,E.source),E=t.di(E),E=t.h(E,{source:K})}const P=t.h({},E),j={};if(this.terrain&&M){P.source=this.terrain.get().source;const K=this.terrain?this.getFragmentStyle(this.terrain.scope):null;K&&(j.style=K.serialize())}if(this._validate(tr,"terrain",P,j))return}if(!this.terrain||this.terrain.scope!==this.scope&&!M||this.terrain&&A!==this.terrain.drapeRenderMode){if(!E)return;this._createTerrain(E,A),this.fire(new t.A("data",{dataType:"style"}))}else{const P=this.terrain,j=P.get();for(const K of Object.keys(t.a5.terrain))!E.hasOwnProperty(K)&&t.a5.terrain[K].default&&(E[K]=t.a5.terrain[K].default);for(const K in c)if(!t.bv(c[K],j[K])){P.set(c,this.options),this.stylesheet.terrain=c;const te=this._getTransitionParameters({duration:0});P.updateTransitions(te),this.fire(new t.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const A=this.fog=new Si(c,this.map.transform,this.scope,this.options);this.stylesheet.fog=A.get();const E=this._getTransitionParameters({duration:0});A.updateTransitions(E)}_createSnow(c){const A=this.snow=new $r(c,this.map.transform,this.scope,this.options);this.stylesheet.snow=A.get();const E=this._getTransitionParameters({duration:0});A.updateTransitions(E)}_createRain(c){const A=this.rain=new kn(c,this.map.transform,this.scope,this.options);this.stylesheet.rain=A.get();const E=this._getTransitionParameters({duration:0});A.updateTransitions(E)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const A=this.fog;if(!t.bv(A.get(),c)){A.set(c,this.options),this.stylesheet.fog=A.get();const E=this._getTransitionParameters({duration:0});A.updateTransitions(E)}}else this._createFog(c);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(c){if(this._checkLoaded(),!c)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const A=this.snow;if(!t.bv(A.get(),c)){A.set(c,this.options),this.stylesheet.snow=A.get();const E=this._getTransitionParameters({duration:0});A.updateTransitions(E)}}else this._createSnow(c);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(c){if(this._checkLoaded(),!c)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const A=this.rain;if(!t.bv(A.get(),c)){A.set(c,this.options),this.stylesheet.rain=A.get();const E=this._getTransitionParameters({duration:0});A.updateTransitions(E)}}else this._createRain(c);this._markersNeedUpdate=!0}_reloadColorTheme(){const c=()=>{for(const M in this._layers)this._layers[M].lut=this._styleColorTheme.lut;for(const M in this._sourceCaches)this._sourceCaches[M].clearTiles()},A=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!A)return this._styleColorTheme.lut=null,void c();const E=this._evaluateColorThemeData(A);this._loadColorTheme(E).then(()=>{this.fire(new t.A("colorthemeset")),c()}).catch(M=>{t.w(`Couldn't set color theme: ${M}`)})}setColorTheme(c){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&t.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=c,this._reloadColorTheme()}setImportColorTheme(c,A){const E=this.getFragmentStyle(c);E&&(E._styleColorTheme.colorThemeOverride=A,E._reloadColorTheme())}_getTransitionParameters(c){return{now:t.q.now(),transition:t.h(this.transition,c)}}updateDrapeFirstLayers(){if(!this.terrain)return;const c=[],A=[];for(const E of this._mergedOrder)this.isLayerDraped(this._mergedLayers[E])?c.push(E):A.push(E);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...A)}_createTerrain(c,A){const E=this.terrain=new Et(c,A,this.scope,this.options,this.map.getWorldview());A===1&&(this.stylesheet.terrain=c),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const M=this._getTransitionParameters({duration:0});E.updateTransitions(M)}_force3DLayerUpdate(){for(const c in this._layers){const A=this._layers[c];A.type==="fill-extrusion"&&this._updateLayer(A)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const A=this._layers[c];A.type==="symbol"&&this._updateLayer(A)}}_validate(c,A,E,M,P={}){if(P&&P.validate===!1)return!1;const j=t.h({},this.serialize());return ki(this,c.call(_i,t.h({key:A,style:j,value:E,styleSpec:t.a5},M)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.ds.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._mergedLayers)this._mergedLayers[c].setEventedParent(null);for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].clearTiles(),this._mergedSourceCaches[c].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(c){const A=this.getSourceCaches(c);for(const E of A)E.clearTiles()}clearSources(){for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].clearTiles()}clearLayers(){for(const c in this._mergedLayers){const A=this._mergedLayers[c];A._clear&&A._clear()}}reloadSource(c){const A=this.getSourceCaches(c);for(const E of A)E.resume(),E.reload()}reloadSources(){for(const c of this.getSources())c.reload&&c.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(c=>{c.modelManager.reloadModels(c.scope)})}updateSources(c){let A;this.directionalLight&&(A=bo(this.directionalLight));const E=new Set;for(const M in this._mergedLayers){const P=this._mergedLayers[M];P.hasElevation()&&!E.has(P.source)&&E.add(P.source)}for(const M in this._mergedSourceCaches){const P=this._mergedSourceCaches[M],j=E.has(P._source.id);P.update(c,void 0,void 0,A,j)}}_generateCollisionBoxes(){for(const c in this._sourceCaches){const A=this._sourceCaches[c];A.resume(),A.reload()}}_updatePlacement(c,A,E,M,P,j,K=!1){let te=!1,ge=!1;const ve={},Me={};for(const Ce of this._mergedOrder){const Pe=this._mergedLayers[Ce];if(Pe.type!=="symbol")continue;const Qe=t.C(Pe.source,Pe.scope);let je=ve[Qe];if(!je){const Ke=this.getLayerSourceCache(Pe);if(!Ke)continue;const lt=Ke.getRenderableIds(!0).map(dt=>Ke.getTileByID(dt));Me[Qe]=lt.slice(),je=ve[Qe]=lt.sort((dt,vt)=>vt.tileID.overscaledZ-dt.tileID.overscaledZ||(dt.tileID.isLessThan(vt.tileID)?-1:1))}const qe=this.crossTileSymbolIndex.addLayer(Pe,je,A.center.lng,A.projection);te=te||qe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),K=K||this._layerOrderChanged||M===0,this._layerOrderChanged&&this.fire(new t.A("neworder")),(K||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.q.now(),A.zoom))&&(this.pauseablePlacement=new Ns(A,this._mergedOrder,K,E,M,P,this.placement,this.fog&&A.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,ve,Me,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.q.now()),ge=!0),te&&this.pauseablePlacement.placement.setStale()),ge||te){this._buildingIndex.onNewFrame(A.zoom);for(let Ce=0;Ce<this._mergedOrder.length;Ce++){const Pe=this._mergedLayers[this._mergedOrder[Ce]];if(Pe.type!=="symbol")continue;const Qe=this.isLayerClipped(Pe);this.placement.updateLayerOpacities(Pe,ve[t.C(Pe.source,Pe.scope)],Ce,Qe?j:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.q.now())}}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}addImport(c,A){this._checkLoaded();const E=this.stylesheet.imports=this.stylesheet.imports||[];if(E.findIndex(({id:P})=>P===c.id)!==-1)return void this.fire(new t.z(new Error(`Import with id '${c.id}' already exists in the map's style.`)));if(!A)return E.push(c),this._loadImports([c],!0);const M=E.findIndex(({id:P})=>P===A);return M===-1&&this.fire(new t.z(new Error(`Import with id "${A}" does not exist on this map.`))),this.stylesheet.imports=E.slice(0,M).concat(c).concat(E.slice(M)),this._loadImports([c],!0,A)}updateImport(c,A){this._checkLoaded();const E=this.stylesheet.imports||[],M=this.getImportIndex(c);return M===-1?this:typeof A=="string"?(this.setImportUrl(c,A),this):(A.url&&A.url!==E[M].url&&this.setImportUrl(c,A.url),t.bv(A.config,E[M].config)||this.setImportConfig(c,A.config,A.data.schema),t.bv(A.data,E[M].data)||this.setImportData(c,A.data),this)}moveImport(c,A){this._checkLoaded();let E=this.stylesheet.imports||[];const M=this.getImportIndex(c);if(M===-1)return this;const P=this.getImportIndex(A);if(P===-1)return this;const j=E[M],K=this.fragments[M];return E=E.filter(({id:te})=>te!==c),this.fragments=this.fragments.filter(({id:te})=>te!==c),this.stylesheet.imports=E.slice(0,P).concat(j).concat(E.slice(P)),this.fragments=this.fragments.slice(0,P).concat(K).concat(this.fragments.slice(P)),this.mergeLayers(),this}setImportUrl(c,A){this._checkLoaded();const E=this.stylesheet.imports||[],M=this.getImportIndex(c);if(M===-1)return this;E[M].url=A;const P=this.fragments[M];return P.style=this._createFragmentStyle(E[M]),P.style.on("style.import.load",()=>this.mergeAll()),P.style.loadURL(A),this}setImportData(c,A){this._checkLoaded();const E=this.getImportIndex(c),M=this.stylesheet.imports||[];return E===-1?this:A?(this.fragments[E].style.setState(A),this._reloadImports(),this):(delete M[E].data,this.setImportUrl(c,M[E].url))}setImportConfig(c,A,E){this._checkLoaded();const M=this.getImportIndex(c),P=this.stylesheet.imports||[];if(M===-1)return this;A?P[M].config=A:delete P[M].config;const j=this.fragments[M];E&&j.style.stylesheet&&(j.style.stylesheet.schema=E);const K=j.style.stylesheet&&j.style.stylesheet.schema;return j.config=A,j.style.updateConfig(A,K),this.updateConfigDependencies(),this}removeImport(c){this._checkLoaded();const A=this.stylesheet.imports||[],E=this.getImportIndex(c);E!==-1&&(A.splice(E,1),this.fragments[E].style._remove(),this.fragments.splice(E,1),this._reloadImports())}getImportIndex(c){const A=(this.stylesheet.imports||[]).findIndex(E=>E.id===c);return A===-1&&this.fire(new t.z(new Error(`Import '${c}' does not exist in the map's style and cannot be updated.`))),A}getLayer(c){return this._mergedLayers[c]}getSources(){const c=[];for(const A in this._mergedOtherSourceCaches){const E=this._mergedOtherSourceCaches[A];E&&c.push(E.getSource())}return c}getSource(c,A){const E=this.getSourceCache(c,A);return E&&E.getSource()}getLayerSource(c){const A=this.getLayerSourceCache(c);return A&&A.getSource()}getSourceCache(c,A){const E=t.C(c,A);return this._mergedOtherSourceCaches[E]}getLayerSourceCache(c){const A=t.C(c.source,c.scope);return c.type==="symbol"?this._mergedSymbolSourceCaches[A]:this._mergedOtherSourceCaches[A]}getSourceCaches(c){if(c==null)return Object.values(this._mergedSourceCaches);const A=[];return this._mergedOtherSourceCaches[c]&&A.push(this._mergedOtherSourceCaches[c]),this._mergedSymbolSourceCaches[c]&&A.push(this._mergedSymbolSourceCaches[c]),A}updateSourceCaches(){const c=this._changes.getUpdatedSourceCaches();for(const A in c){const E=c[A];E==="reload"?this.reloadSource(A):E==="clear"&&this.clearSource(A)}}updateLayers(c){const A=this._changes.getUpdatedPaintProperties();for(const E of A){const M=this.getLayer(E);M&&M.updateTransitions(c)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(c){this.stylesheet.glyphs=c,this.glyphManager.setURL(c)}getImages(c,A,E){this.imageManager.getImages(A.images,A.scope,E),this._updateTilesForChangedImages();const M=j=>{if(j){const K=A.images.map(te=>t.I.toString(te));j.setDependencies(A.tileID.key,A.type,K)}},P=t.C(A.source,A.scope);M(this._mergedOtherSourceCaches[P]),M(this._mergedSymbolSourceCaches[P]),A.images.some(j=>j.iconsetId)&&this.fire(new t.A("data",{dataType:"style"}))}rasterizeImages(c,A,E){this.imageManager.rasterizeImages(A,E)}getGlyphs(c,A,E){this.glyphManager.getGlyphs(A.stacks,E)}getResource(c,A,E){return t.dt(A,E)}getOwnSourceCache(c){return this._otherSourceCaches[c]}getOwnLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}getOwnSourceCaches(c){const A=[];return this._otherSourceCaches[c]&&A.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&A.push(this._symbolSourceCaches[c]),A}_isSourceCacheLoaded(c){const A=this.getOwnSourceCaches(c);return A.length===0?(this.fire(new t.z(new Error(`There is no source with ID '${c}'`))),!1):A.every(E=>E.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(c,A){if(!this._clipLayerPresent&&c.type!=="fill-extrusion"&&c.type!=="building")return!1;const E=c.type==="fill-extrusion"&&(c.sourceLayer==="building"||c.sourceLayer==="procedural_buildings"),M=c.type==="building";if(c.is3D(!!this.terrain)){if(E||M||A&&A.type==="batched-model"||c.type==="model")return!0}else if(c.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(c=>{c.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}xo.getSourceType=function(C){return Co[C]},xo.setSourceType=function(C,c){Co[C]=c},xo.registerForPluginStateChange=t.du;var Za=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Ea=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Wa=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Ll="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Vs=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,cl=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,pc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;
#ifdef FLIP_Y
uv.y=1.0-uv.y;
#endif
highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,tn=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Oa=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,gl=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,ul=`#ifdef RENDER_SHADOWS
precision highp sampler2DShadow;uniform sampler2DShadow u_shadowmap_0;uniform sampler2DShadow u_shadowmap_1;uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;float shadow_sample(sampler2DShadow shadowmap,highp vec3 pos,highp float bias) {
#ifdef CLIP_ZERO_TO_ONE
highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z-bias);
#else
highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z*0.5+0.5-bias);
#endif
return texture(shadowmap,coord);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {light_view_pos0.xyz/=light_view_pos0.w;
#ifdef SHADOWS_SINGLE_CASCADE
vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);
#else
light_view_pos1.xyz/=light_view_pos1.w;vec4 abs_bounds=abs(vec4(light_view_pos0.xy,light_view_pos1.xy));if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}float occlusion1=shadow_sample(u_shadowmap_1,light_view_pos1.xyz,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Tc=[];yl(Za,Tc),yl(Wa,Tc),yl(Ea,Tc);const tc={"_prelude_fog.vertex.glsl":cl,"_prelude_terrain.vertex.glsl":Vs,"_prelude_shadow.vertex.glsl":gl,"_prelude_fog.fragment.glsl":pc,"_prelude_shadow.fragment.glsl":ul,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":tn,"_prelude_raster_particle.glsl":Oa},Il={};hs("",Vs),hs(pc,cl),hs(ul,gl),hs(tn,""),hs(Oa,"");const Yh=hs(Ea,Wa),nu=Za;var Nh={background:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
const float window_depth=0.5;const float ao_radius=0.2;in vec4 v_color;in highp vec3 v_normal;in highp vec3 v_pos;
#ifdef BUILDING_FAUX_FACADE
in lowp float v_faux_facade;in highp float v_faux_facade_ed;in highp vec2 v_faux_facade_window;in highp vec2 v_faux_facade_floor;in highp vec2 v_faux_facade_range;in highp float v_aspect;in highp vec3 v_tbn_0;in highp vec3 v_tbn_1;in highp vec3 v_tbn_2;in highp vec4 v_faux_color_emissive;uniform float u_faux_facade_ao_intensity;
#endif
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
uniform lowp float u_opacity;uniform vec3 u_camera_pos;uniform highp float u_tile_to_meter;uniform float u_facade_emissive_chance;vec3 linearTosRGB(in vec3 color) {return pow(color,vec3(1./2.2));}
#ifdef BUILDING_FAUX_FACADE
float hash12(in vec2 p) {vec3 p3 =fract(vec3(p.xyx)*0.1031);p3+=dot(p3,p3.yzx+33.33);return fract((p3.x+p3.y)*p3.z);}float min3(in vec3 v) {return min(min(v.x,v.y),v.z);}vec2 get_uv_mask_id(in vec2 q,out float mask,out vec2 id) {vec2 p=q;mask=step(v_faux_facade_range.x,p.y)*step(p.y,v_faux_facade_range.y);p.y=p.y-v_faux_facade_range.x;vec2 uv=modf(p/v_faux_facade_floor,id);vec4 d=(v_faux_facade_floor.xyxy+vec4(-v_faux_facade_window,v_faux_facade_window))*0.5;vec4 edge=d/v_faux_facade_floor.xyxy;vec2 m=step(edge.xy,uv)*step(uv,edge.zw);mask*=m.x*m.y;uv-=vec2(0.5);uv*=vec2(0.5)/(vec2(0.5)-edge.xy);uv+=vec2(0.5);return uv;}float ray_unit_box(in vec3 ray_o,in vec3 ray_d,in vec3 bmin,in vec3 bmax) {vec3 planes=mix(bmin,bmax,step(0.0,ray_d));vec3 t=(planes-ray_o)/ray_d;return min3(t);}float get_emissive(in vec2 id) {if (u_facade_emissive_chance > 0.0) {return (step(hash12(id),u_facade_emissive_chance)+0.05)*v_faux_color_emissive.a;}return 0.0;}vec3 get_shade_info(in vec3 v,in vec3 v_normalized,in vec3 color,in vec2 id,in mat3 tbn,inout vec3 out_normal,inout float out_emissive) {vec3 out_color=color;vec3 abs_v=abs(v_normalized);bool x_major=abs_v.x >=abs_v.y && abs_v.x >=abs_v.z;bool y_major=abs_v.y >=abs_v.x && abs_v.y >=abs_v.z;bool z_major=abs_v.z >=abs_v.x && abs_v.z >=abs_v.y;
#if 0
if (x_major) {out_color=v.x > 0.0 ? vec3(1.0,0.0,0.0) : vec3(0.0,1.0,1.0);} else if (y_major) {out_color=v.y > 0.0 ? vec3(0.0,1.0,0.0) : vec3(1.0,0.0,1.0);} else if (z_major) {out_color=v.z > 0.0 ? vec3(0.0,0.0,1.0) : vec3(1.0,1.0,0.0);}out_emissive=1.0;
#else
if (x_major) {out_normal=sign(v.x)*tbn[0];} else if (y_major) {out_normal=vec3(0.0,0.0,-sign(v.y));} else if (z_major) {out_color=v_faux_color_emissive.rgb;out_emissive=v.z <=0.0 ? get_emissive(id) : out_emissive;}float ao=1.0;if (u_faux_facade_ao_intensity > 0.0) {vec4 ao_range=v_faux_facade_window.xxyy*0.5-vec4(0,ao_radius,0,ao_radius);vec2 ao_range_z=vec2(window_depth*0.5)-vec2(0.0,ao_radius);if (x_major || y_major) {ao*=smoothstep(-ao_range_z.x,-ao_range_z.y,v.z);} else if (z_major) {ao*=smoothstep(-ao_range.x,-ao_range.y,v.x)*(1.0-smoothstep(ao_range.y,ao_range.x,v.x));ao*=smoothstep(-ao_range.z,-ao_range.w,v.y)*(1.0-smoothstep(ao_range.w,ao_range.z,v.y));}ao=mix(1.0,min(1.0,ao+0.25),u_faux_facade_ao_intensity);}out_color*=ao;
#endif
return out_color;}
#endif
vec3 apply_lighting_linear(in vec3 color,in vec3 normal,in float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec3 normal=normalize(v_normal);vec3 base_color=v_color.rgb;float emissive=v_color.a;
#ifdef BUILDING_FAUX_FACADE
if (v_faux_facade > 0.0) {mat3 tbn=mat3(v_tbn_0,v_tbn_1,v_tbn_2);vec3 v=vec3(v_pos.xy,v_pos.z/u_tile_to_meter)-u_camera_pos;vec3 view_tangent=transpose(tbn)*v;vec2 q=vec2(v_faux_facade_ed,v_pos.z);float mask=0.0;vec2 id=vec2(0.0);vec2 uv=get_uv_mask_id(q,mask,id);uv*=v_faux_facade_window;vec3 bmin=vec3(0.0,0.0,-window_depth);vec3 bmax=bmin+vec3(v_faux_facade_window,window_depth);vec3 ray_o=vec3(uv,0.0);vec3 ray_d=normalize(view_tangent);float t_min=ray_unit_box(ray_o,ray_d,bmin,bmax);vec3 hit=ray_o+t_min*ray_d;vec3 r=vec3(v_faux_facade_window,-window_depth);hit-=r*0.5;vec3 normalized=hit/r;vec3 out_normal=normal;float out_emissive=emissive;vec3 room_color=get_shade_info(hit,normalized,base_color,id,tbn,out_normal,out_emissive);base_color=mix(base_color,room_color,mask);normal=mix(normal,out_normal,mask);emissive=mix(emissive,out_emissive,mask);}
#endif
vec4 color=vec4(base_color,1.0);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
shadowed_lighting_factor=dot(normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=mix(color.rgb,base_color.rgb,emissive);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_pos.z));
#endif
color.rgb=linearTosRGB(color.rgb);color*=u_opacity;
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_pos.z);
#endif
glFragColor=color; 
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3;in vec3 a_centroid_3;in vec4 a_faux_facade_data;in vec2 a_faux_facade_vertical_range;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;uniform highp float u_tile_to_meter;out vec4 v_color;out vec3 v_normal;out highp vec3 v_pos;
#ifdef BUILDING_FAUX_FACADE
out lowp float v_faux_facade;out highp float v_faux_facade_ed;out highp vec2 v_faux_facade_window;out highp vec2 v_faux_facade_floor;out highp vec2 v_faux_facade_range;out highp float v_aspect;out highp vec3 v_tbn_0;out highp vec3 v_tbn_1;out highp vec3 v_tbn_2;out highp vec4 v_faux_color_emissive;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
const float MAX_UINT_16=65535.0;const float MAX_INT_16=32767.0;const float MAX_UINT_8=255.0;const float TWO_POW_8=256.0;vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#ifdef BUILDING_FAUX_FACADE
mat3 get_tbn(in vec3 normal) {const vec3 bitangent=vec3(0.0,0.0,1.0);vec3 tangent=normalize(vec3(normal.y,-normal.x,0.0));return mat3(tangent,bitangent,normal);}
#endif
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 faux_facade_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
#pragma mapbox: initialize-attribute-custom highp vec2 faux_facade_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);vec3 a_normal_3f=a_normal_3/MAX_INT_16;v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));float hidden=0.0;
#ifdef BUILDING_FAUX_FACADE
v_faux_facade=a_faux_facade_data.x;if (v_faux_facade > 0.0) {v_faux_facade_ed=a_faux_facade_data.x *u_tile_to_meter;float window_x_perc=floor(a_faux_facade_data.y/TWO_POW_8);float window_y_perc=a_faux_facade_data.y-TWO_POW_8*window_x_perc;vec2 window_perc=vec2(window_x_perc,window_y_perc)/MAX_UINT_8;v_faux_facade_floor=(a_faux_facade_data.zw/MAX_UINT_16*EXTENT)*u_tile_to_meter;v_faux_facade_window=window_perc*v_faux_facade_floor;v_faux_facade_range=(a_faux_facade_vertical_range/MAX_UINT_16*EXTENT)*u_tile_to_meter;v_aspect=v_faux_facade_window.x/v_faux_facade_window.y;mat3 tbn=get_tbn(normalize(v_normal));v_tbn_0=tbn[0];v_tbn_1=tbn[1];v_tbn_2=tbn[2];v_faux_color_emissive=decode_color(faux_facade_color_emissive);v_faux_color_emissive.rgb=sRGBToLinear(v_faux_color_emissive.rgb);}
#endif
v_pos=a_pos_3f;
#ifdef RENDER_CUTOFF
vec4 ground=u_matrix*vec4(a_centroid_3,1.0);v_cutoff_opacity=cutoff_opacity(u_cutoff_params,ground.z);hidden=float(v_cutoff_opacity==0.0);v_pos.z*=v_cutoff_opacity;
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=v_pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);v_depth_shadows=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(v_pos);
#endif
gl_Position=mix(u_matrix*vec4(v_pos,1),AWAY,hidden);}`),buildingBloom:hs(`in vec4 v_color_emissive;
#pragma mapbox: define-attribute highp vec4 bloom_attenuation
#pragma mapbox: initialize-attribute highp vec4 bloom_attenuation
float saturate(float val) {return clamp(val,0.0,1.0);}void main() {float emission=v_color_emissive.a;float opacity=1.0;
#ifdef HAS_ATTRIBUTE_a_bloom_attenuation
float distance=length(vec2(1.3*max(0.0,abs(bloom_attenuation.x)-bloom_attenuation.z),bloom_attenuation.y));distance+= mix(0.5,0.0,clamp(emission-1.0,0.0,1.0));opacity*=saturate(1.0-distance*distance);
#endif
glFragColor=vec4(v_color_emissive.rgb,1.0)*opacity;}`,`in vec3 a_pos_3f;
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
#pragma mapbox: define-attribute highp vec4 bloom_attenuation
out vec4 v_color_emissive;uniform mat4 u_matrix;vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
#pragma mapbox: initialize-attribute highp vec4 bloom_attenuation
#ifdef HAS_ATTRIBUTE_a_part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);float part_emissive=color_emissive.a*5.0;v_color_emissive=vec4(sRGBToLinear(color_emissive.rgb),part_emissive);
#else
v_color_emissive=vec4(1.0);
#endif
gl_Position=u_matrix*vec4(a_pos_3f,1.0);}`),buildingDepth:hs(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:hs("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:hs(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:hs(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:hs("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform float u_zoom_transition;
#endif
out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec3 proj_pos=a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation);
#ifdef PROJECTION_GLOBE_VIEW
#ifndef PROJECTED_POS_ON_VIEWPORT
vec3 globe_pos=proj_pos;vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,a_anchor_pos,u_tile_id,u_merc_center);proj_pos=mix_globe_mercator(globe_pos,mercator_pos,u_zoom_transition);
#endif
#endif
vec4 projectedPoint=u_matrix*vec4(proj_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:hs("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:hs("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:hs(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:hs(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}vec3 compute_view_dependent_emissive_color(float ndotl,float emissive_strength,vec3 color)
{color=sRGBToLinear(color);color=color*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);color=linearTosRGB(color.rgb);return color;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
vec3 color=structure_color.xyz;
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);vec3 transformed_normal=vec3(-normal.xy,normal.z);float ndotl=calculate_NdotL(transformed_normal);float emissive_strength=u_emissive_strength;emissive_strength=0.0;vec3 emissive_color=compute_view_dependent_emissive_color(ndotl,emissive_strength,color.xyz);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,transformed_normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,transformed_normal);
#endif
color=mix(color,emissive_color,emissive_strength);if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(-v_normal.xy,v_normal.z));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FLIP_Y
v_pos=(vec2(gl_Position.x,-gl_Position.y)/gl_Position.w+1.0)/2.0*u_world;
#else
v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#endif
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FLIP_Y
v_pos_world=(vec2(gl_Position.x,-gl_Position.y)/gl_Position.w+1.0)/2.0*u_world;
#else
v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#endif
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
#ifdef FEATURE_CUTOUT
color=apply_feature_cutout(color,gl_FragCoord);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);
#ifdef CLIP_ZERO_TO_ONE
cutoff=cutoff_opacity(u_cutoff_params,ground.z*2.0-ground.w);
#else
cutoff=cutoff_opacity(u_cutoff_params,ground.z);
#endif
if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:hs(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:hs(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:hs(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:hs(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:hs("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:hs("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:hs(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:hs(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef TERRAIN
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#else
out_color.rgb*=mix(v_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
}`),terrainRaster:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:hs("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:hs(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Ll),skyboxGradient:hs(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Ll),skyboxCapture:hs(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;
#ifdef FLIP_Y
uv.y=1.0-uv.y;
#endif
highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:hs(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:hs(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;
#ifdef FLIP_Y
T=-T;B=-B;
#endif
highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));
#ifdef FLIP_Y
n=normalize(cross(fdx,fdy));
#else
n=normalize(cross(fdx,fdy))*-1.0;
#endif
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
#ifdef FEATURE_CUTOUT
finalColor=apply_feature_cutout(finalColor,gl_FragCoord);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:hs(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:hs(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:hs("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:hs("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:hs("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:hs("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function yl(C,c){const A=C.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let E of A)if(E=E.trim(),E[0]==="#"&&E.includes("if")&&!E.includes("endif")){E=E.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const M=E.split(" ");for(const P of M)c.includes(P)||c.push(P)}}function hs(C,c){const A=/#include\s+"([^"]+)"/g,E=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let M=c.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);M&&(M=M.map(ge=>{const ve=ge.split(" ");return ve[ve.length-1]}),M=[...new Set(M)]);const P={},j=[],K=[];if(C=C.replace(A,(ge,ve)=>(K.push(ve),"")),(c=c.replace(A,(ge,ve)=>(j.push(ve),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let te=[...Tc];yl(C,te),yl(c,te);for(const ge of[...j,...K])tc[ge]||console.error(`Undefined include: ${ge}`),Il[ge]||(Il[ge]=[],yl(tc[ge],Il[ge])),te=[...te,...Il[ge]];return{fragmentSource:C=C.replace(E,(ge,ve,Me,Ce,Pe)=>(P[Pe]=!0,ve==="define"?`
#ifndef HAS_UNIFORM_u_${Pe}
in ${Me} ${Ce} ${Pe};
#else
uniform ${Me} ${Ce} u_${Pe};
#endif
`:ve==="initialize"?`
#ifdef HAS_UNIFORM_u_${Pe}
    ${Me} ${Ce} ${Pe} = u_${Pe};
#endif
`:ve==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Pe}
    in ${Me} ${Ce} ${Pe};
#endif
`:ve==="initialize-attribute"?"":void 0)),vertexSource:c=c.replace(E,(ge,ve,Me,Ce,Pe)=>{const Qe=Ce==="float"?"vec2":Ce,je=Pe.match(/color/)?"color":Qe;return ve==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${Pe}
in ${Me} ${Ce} a_${Pe};
#endif
`:P[Pe]?ve==="define"?`
#ifndef HAS_UNIFORM_u_${Pe}
uniform lowp float u_${Pe}_t;
in ${Me} ${Qe} a_${Pe};
out ${Me} ${Ce} ${Pe};
#else
uniform ${Me} ${Ce} u_${Pe};
#endif
`:ve==="initialize"?je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Pe}
    ${Pe} = a_${Pe};
#else
    ${Me} ${Ce} ${Pe} = u_${Pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Pe}
    ${Pe} = unpack_mix_${je}(a_${Pe}, u_${Pe}_t);
#else
    ${Me} ${Ce} ${Pe} = u_${Pe};
#endif
`:ve==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Pe}
    in ${Me} ${Ce} a_${Pe};
    out ${Me} ${Ce} ${Pe};
#endif
`:ve==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Pe}
    ${Pe} = a_${Pe};
#endif
`:void 0:ve==="define"?`
#ifndef HAS_UNIFORM_u_${Pe}
uniform lowp float u_${Pe}_t;
in ${Me} ${Qe} a_${Pe};
#else
uniform ${Me} ${Ce} u_${Pe};
#endif
`:ve==="define-instanced"?je==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${Pe}0;
in vec4 a_${Pe}1;
in vec4 a_${Pe}2;
in vec4 a_${Pe}3;
#else
uniform ${Me} ${Ce} u_${Pe};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${Me} ${Qe} a_${Pe};
#else
uniform ${Me} ${Ce} u_${Pe};
#endif
`:ve==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${Pe}
    ${Me} ${Ce} ${Pe} = a_${Pe};
#endif
`:je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Pe}
    ${Me} ${Ce} ${Pe} = a_${Pe};
#else
    ${Me} ${Ce} ${Pe} = u_${Pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Pe}
    ${Me} ${Ce} ${Pe} = unpack_mix_${je}(a_${Pe}, u_${Pe}_t);
#else
    ${Me} ${Ce} ${Pe} = u_${Pe};
#endif
`}),staticAttributes:M,usedDefines:te,vertexIncludes:j,fragmentIncludes:K}}class Bd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,A,E,M,P,j,K,te){this.context=c;let ge=this.boundPaintVertexBuffers.length!==M.length;for(let Me=0;!ge&&Me<M.length;Me++)this.boundPaintVertexBuffers[Me]!==M[Me]&&(ge=!0);let ve=this.boundDynamicVertexBuffers.length!==K.length;for(let Me=0;!ve&&Me<K.length;Me++)this.boundDynamicVertexBuffers[Me]!==K[Me]&&(ve=!0);if(!this.vao||this.boundProgram!==A||this.boundLayoutVertexBuffer!==E||ge||ve||this.boundIndexBuffer!==P||this.boundVertexOffset!==j)this.freshBind(A,E,M,P,j,K,te);else{c.bindVertexArrayOES.set(this.vao);for(const Me of K)Me&&(Me.bind(),te&&Me.instanceCount&&Me.setVertexAttribDivisor(c.gl,A,te));P&&P.dynamicDraw&&P.bind()}}freshBind(c,A,E,M,P,j,K){const te=c.numAttributes,ge=this.context,ve=ge.gl;this.vao&&this.destroy(),this.vao=ge.gl.createVertexArray(),ge.bindVertexArrayOES.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=A,this.boundPaintVertexBuffers=E,this.boundIndexBuffer=M,this.boundVertexOffset=P,this.boundDynamicVertexBuffers=j,A.enableAttributes(ve,c),A.bind(),A.setVertexAttribPointers(ve,c,P);for(const Me of E)Me.enableAttributes(ve,c),Me.bind(),Me.setVertexAttribPointers(ve,c,P);for(const Me of j)Me&&(Me.enableAttributes(ve,c),Me.bind(),Me.setVertexAttribPointers(ve,c,P),K&&Me.instanceCount&&Me.setVertexAttribDivisor(ve,c,K));M&&M.bind(),ge.currentNumAttributes=te}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function ph(C,c){const A=Math.pow(2,c.canonical.z),E=c.canonical.y;return[new t.ac(0,E/A).toLngLat().lat,new t.ac(0,(E+1)/A).toLngLat().lat]}function _u(C,c,A,E,M,P,j){const K=C.context,te=K.gl,ge=A.hillshadeFBO;if(!ge)return;C.prepareDrawTile();const ve=C.isTileAffectedByFog(c),Me=C.getOrCreateProgram("hillshade",{overrideFog:ve});K.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,ge.colorAttachment.get());const Ce=((qe,Ke,lt,dt)=>{const vt=lt.paint.get("hillshade-shadow-color"),Tt=lt.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Dt=lt.paint.get("hillshade-highlight-color"),Vt=lt.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",It=lt.paint.get("hillshade-accent-color"),Mt=lt.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",Pt=lt.paint.get("hillshade-emissive-strength");let dr=t.al(lt.paint.get("hillshade-illumination-direction"));if(lt.paint.get("hillshade-illumination-anchor")==="viewport")dr-=qe.transform.angle;else if(qe.style&&qe.style.enable3dLights()&&qe.style.directionalLight){const Qr=qe.style.directionalLight.properties.get("direction"),Br=t.d1(Qr.x,Qr.y,Qr.z);dr=t.al(Br[1])}const sr=!qe.options.moving;return{u_matrix:dt||qe.transform.calculateProjMatrix(Ke.tileID.toUnwrapped(),sr),u_image:0,u_latrange:ph(0,Ke.tileID),u_light:[lt.paint.get("hillshade-exaggeration"),dr],u_shadow:vt.toPremultipliedRenderColor(Tt?null:lt.lut),u_highlight:Dt.toPremultipliedRenderColor(Vt?null:lt.lut),u_emissive_strength:Pt,u_accent:It.toPremultipliedRenderColor(Mt?null:lt.lut)}})(C,A,E,C.terrain?c.projMatrix:null);C.uploadCommonUniforms(K,Me,c.toUnwrapped());const{tileBoundsBuffer:Pe,tileBoundsIndexBuffer:Qe,tileBoundsSegments:je}=C.getTileBoundsBuffers(A);Me.draw(C,te.TRIANGLES,M,P,j,Ai.disabled,Ce,E.id,Pe,Qe,je)}function jh(C,c,A){if(!c.needsDEMTextureUpload)return;const E=C.context,M=E.gl;E.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||C.getTileTexture(A.stride);const P=A.getPixels();c.demTexture?c.demTexture.update(P,{premultiply:!1}):c.demTexture=new t.T(E,P,M.R32F,{premultiply:!1}),c.needsDEMTextureUpload=!1}function Td(C,c,A){const E=C.context,M=E.gl;if(!c.dem)return;const P=c.dem;if(E.activeTexture.set(M.TEXTURE1),jh(C,c,P),!c.demTexture)return;c.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);const j=P.dim;E.activeTexture.set(M.TEXTURE0);let K=c.hillshadeFBO;if(!K){const Ce=new t.T(E,{width:j,height:j,data:null},M.RGBA8);Ce.bind(M.LINEAR,M.CLAMP_TO_EDGE),K=c.hillshadeFBO=E.createFramebuffer(j,j,!0,"renderbuffer"),K.colorAttachment.set(Ce.texture)}E.bindFramebuffer.set(K.framebuffer),E.viewport.set([0,0,j,j]);const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ge,tileBoundsSegments:ve}=C.getMercatorTileBoundsBuffers(),Me=[];C.linearFloatFilteringSupported()&&Me.push("TERRAIN_DEM_FLOAT_FORMAT"),C.getOrCreateProgram("hillshadePrepare",{defines:Me}).draw(C,M.TRIANGLES,Sn.disabled,Ii.disabled,Li.unblended,Ai.disabled,((Ce,Pe)=>{const Qe=Pe.stride,je=t.bz();return t.ca(je,0,t.aj,-t.aj,0,0,1),t.bo(je,je,[0,-t.aj,0]),{u_matrix:je,u_image:1,u_dimension:[Qe,Qe],u_zoom:Ce.overscaledZ}})(c.tileID,P),A.id,te,ge,ve),c.needsHillshadePrepare=!1}class Eo{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class FA extends Eo{getDefault(){return t.am.transparent.toNonPremultipliedRenderColor(null)}set(c){const A=this.current;(c.r!==A.r||c.g!==A.g||c.b!==A.b||c.a!==A.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Xf extends Eo{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Zf extends Eo{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Jf extends Eo{getDefault(){return[!0,!0,!0,!0]}set(c){const A=this.current;(c[0]!==A[0]||c[1]!==A[1]||c[2]!==A[2]||c[3]!==A[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Pf extends Eo{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class PA extends Eo{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class lp extends Eo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const A=this.current;(c.func!==A.func||c.ref!==A.ref||c.mask!==A.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class LA extends Eo{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const A=this.current;(c[0]!==A[0]||c[1]!==A[1]||c[2]!==A[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Ul extends Eo{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;c?A.enable(A.STENCIL_TEST):A.disable(A.STENCIL_TEST),this.current=c,this.dirty=!1}}class kl extends Eo{getDefault(){return[0,1]}set(c){const A=this.current;(c[0]!==A[0]||c[1]!==A[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class cp extends Eo{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;c?A.enable(A.DEPTH_TEST):A.disable(A.DEPTH_TEST),this.current=c,this.dirty=!1}}class Gp extends Eo{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class Xh extends Eo{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;c?A.enable(A.BLEND):A.disable(A.BLEND),this.current=c,this.dirty=!1}}class Zh extends Eo{getDefault(){const c=this.gl;return[c.ONE,c.ZERO,c.ONE,c.ZERO]}set(c){const A=this.current;(c[0]!==A[0]||c[1]!==A[1]||c[2]!==A[2]||c[3]!==A[3]||this.dirty)&&(this.gl.blendFuncSeparate(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Xu extends Eo{getDefault(){return t.am.transparent.toNonPremultipliedRenderColor(null)}set(c){const A=this.current;(c.r!==A.r||c.g!==A.g||c.b!==A.b||c.a!==A.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class ku extends Eo{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(c,c),this.current=c,this.dirty=!1)}}class Jh extends Eo{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;c?A.enable(A.CULL_FACE):A.disable(A.CULL_FACE),this.current=c,this.dirty=!1}}class Lf extends Eo{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class ef extends Eo{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}let ed=class extends Eo{getDefault(){return null}set(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)}};class Uh extends Eo{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class zh extends Eo{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const A=this.current;(c[0]!==A[0]||c[1]!==A[1]||c[2]!==A[2]||c[3]!==A[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class up extends Eo{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class Ah extends Eo{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;A.bindRenderbuffer(A.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class iu extends Eo{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;A.bindTexture(A.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Ic extends Eo{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;A.bindBuffer(A.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class kA extends Eo{getDefault(){return null}set(c){const A=this.gl;A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class td extends Eo{getDefault(){return null}set(c){this.gl&&(c!==this.current||this.dirty)&&(this.gl.bindVertexArray(c),this.current=c,this.dirty=!1)}}class su extends Eo{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;A.pixelStorei(A.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class rc extends Eo{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Ot extends Eo{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const A=this.gl;A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class mh extends Eo{constructor(c,A){super(c),this.context=c,this.parent=A}getDefault(){return null}}class tf extends mh{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const A=this.gl;A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class ou extends mh{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const A=this.gl;A.framebufferRenderbuffer(A.FRAMEBUFFER,this.attachment(),A.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Bo extends mh{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const A=this.gl;A.framebufferTexture2D(A.FRAMEBUFFER,this.attachment(),A.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class hp extends ou{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Wp=(C,c,A)=>({u_matrix:C,u_image0:0,u_skirt_height:c,u_ground_shadow_factor:A}),kf=(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je)=>({u_proj_matrix:Float32Array.from(C),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(E),u_merc_matrix:A,u_zoom_transition:M,u_merc_center:P,u_image0:0,u_frustum_tl:j,u_frustum_tr:K,u_frustum_br:te,u_frustum_bl:ge,u_globe_pos:ve,u_globe_radius:Me,u_viewport:Ce,u_grid_matrix:je?Float32Array.from(je):new Float32Array(9),u_skirt_height:Pe,u_far_z_cutoff:Qe});function Ou(C,c){return C!=null&&c!=null&&!(!C.hasData()||!c.hasData())&&C.demTexture!=null&&c.demTexture!=null&&C.tileID.key!==c.tileID.key}const au=new class{constructor(){this.operations={}}newMorphing(C,c,A,E,M){if(C in this.operations){const P=this.operations[C];P.to.tileID.key!==A.tileID.key&&(P.queued=A)}else this.operations[C]={startTime:E,phase:0,duration:M,from:c,to:A,queued:null}}getMorphValuesForProxy(C){if(!(C in this.operations))return null;const c=this.operations[C];return{from:c.from,to:c.to,phase:c.phase}}update(C){for(const c in this.operations){const A=this.operations[c];for(A.phase=(C-A.startTime)/A.duration;A.phase>=1||!this._validOp(A);)if(!this._nextOp(A,C)){delete this.operations[c];break}}}_nextOp(C,c){return!!C.queued&&(C.from=C.to,C.to=C.queued,C.queued=null,C.phase=0,C.startTime=c,!0)}_validOp(C){return C.from.hasData()&&C.to.hasData()}},fp={0:null,1:"TERRAIN_VERTEX_MORPHING"};function rd(C,c,A){if(c===0)return 0;const E=c<1&&A===514?.25/c:1;return 6*Math.pow(1.5,22-C)*Math.max(c,1)*E}function nd(C,c){const A=1<<C.z;return!c&&(C.x===0||C.x===A-1)||C.y===0||C.y===A-1}const dp=C=>({u_matrix:C});function Cl(C,c,A,E,M){if(M>0){const P=t.q.now(),j=(P-C.timeAdded)/M,K=c?(P-c.timeAdded)/M:-1,te=A.getSource(),ge=E.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),ve=!c||Math.abs(c.tileID.overscaledZ-ge)>Math.abs(C.tileID.overscaledZ-ge),Me=ve&&C.refreshedUponExpiration?1:t.ay(ve?j:1-K,0,1);return C.refreshedUponExpiration&&j>=1&&(C.refreshedUponExpiration=!1),c?{opacity:1,mix:1-Me}:{opacity:Me,mix:0}}return{opacity:1,mix:0}}class $p extends na{constructor(c){const A=Do("mock-dem",{type:"raster-dem",maxzoom:c.transform.maxZoom},c.style.dispatcher,c.style);super("mock-dem",A,!1),A.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,A){c.state="loaded",A(null)}}class pp extends na{constructor(c){const A=Do("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},c.style.dispatcher,c.style);super("proxy",A,!1),A.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,A,E){if(c.freezeTileCoverage)return;this.transform=c;const M=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((P,j)=>{if(P[j.key]="",!this._tiles[j.key]){const K=new Jl(j,this._source.tileSize*j.overscaleFactor(),c.tileZoom,void 0,void 0,this._source.worldview);K.state="loaded",this._tiles[j.key]=K}return P},{});for(const P in this._tiles)P in M||(this.freeFBO(P),this._tiles[P].unloadVectorData(),delete this._tiles[P])}freeFBO(c){const A=this.proxyCachedFBO[c];if(A!==void 0){const E=Object.values(A);this.renderCachePool.push(...E),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Id extends t.aM{constructor(c,A,E){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=A,this.projMatrix=E}}class Ap extends t.dF{constructor(c,A){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},c.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),c.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),c.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[E,M,P]=function(te){const ge=new t.ba,ve=new t.a_,Me=131;ge.reserve(17161),ve.reserve(33800);const Ce=t.aj/128,Pe=t.aj+Ce/2,Qe=Pe+Ce;for(let qe=-Ce;qe<Qe;qe+=Ce)for(let Ke=-Ce;Ke<Qe;Ke+=Ce){const lt=Ke<0||Ke>Pe||qe<0||qe>Pe?24575:0,dt=t.ay(Math.round(Ke),0,t.aj),vt=t.ay(Math.round(qe),0,t.aj);ge.emplaceBack(dt+lt,vt)}const je=(qe,Ke)=>{const lt=Ke*Me+qe;ve.emplaceBack(lt+1,lt,lt+Me),ve.emplaceBack(lt+Me,lt+Me+1,lt+1)};for(let qe=1;qe<129;qe++)for(let Ke=1;Ke<129;Ke++)je(Ke,qe);return[0,129].forEach(qe=>{for(let Ke=0;Ke<130;Ke++)je(Ke,qe),je(qe,Ke)}),[ge,ve,32768]}(),j=c.context;this.gridBuffer=j.createVertexBuffer(E,t.bc.members),this.gridIndexBuffer=j.createIndexBuffer(M),this.gridSegments=t.bd.simpleSegment(0,0,E.length,M.length),this.gridNoSkirtSegments=t.bd.simpleSegment(0,0,E.length,P),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new pp(A.map),this.orthoMatrix=t.bz(),t.ca(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,t.aj,0,t.aj,0,1);const K=j.gl;this._overlapStencilMode=new Ii({func:K.GEQUAL,mask:255},0,255,K.KEEP,K.KEEP,K.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=A,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new $p(A.map),this._pendingGroundEffectLayers=[]}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),this._style=c,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,A,E){if(c&&c.terrain){this._style!==c&&(this.style=c,this._evaluationZoom=void 0);const M=c.terrain.properties,P=c.terrain.drapeRenderMode===0,j=c.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=t.q.now();const K=c.terrain&&c.terrain.scope,te=M.get("source"),ge=P?this._mockSourceCache:c.getSourceCache(te,K);if(!ge)return void t.w(`Couldn't find terrain source "${te}".`);if(this.sourceCache=ge,this._attenuationRange=c.terrain.getAttenuationRange(),this._exaggeration=j?this.calculateExaggeration(A):M.get("exaggeration"),!A.projection.requiresDraping&&j&&this._exaggeration===0)return void this._disable();this.enabled=!0;const ve=()=>{this.sourceCache.used&&t.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Me=this.getScaledDemTileSize();this.sourceCache.update(A,Me,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,ve(),this._initializing=!0),ve(),A.updateElevation(!0,E),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(A),this._emptyDEMTextureDirty=!0,this._previousZoom=A.zoom}else this._disable()}calculateExaggeration(c){if(this._attenuationRange&&c.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(c.zoom);const A=this._previousCameraAltitude,E=c.getFreeCameraOptions().position.z/c.pixelsPerMeter*c.worldSize;this._previousCameraAltitude=E;const M=A!=null?E-A:Number.MAX_VALUE;if(Math.abs(M)<2)return this._exaggeration;const P=c.zoom,j=this._style.terrain;if(!this._previousUpdateTimestamp)return j.getExaggeration(P);let K=P-this._previousZoom;const te=this._previousUpdateTimestamp;let ge=P;this._evaluationZoom!=null&&(ge=this._evaluationZoom,Math.abs(P-ge)>.5&&(K=.5*(P-ge+K)),K*M<0&&(ge+=K)),this._evaluationZoom=ge;const ve=j.getExaggeration(ge),Me=ve===j.getExaggeration(Math.max(0,ge-.1));if(Me&&Math.abs(ve-this._exaggeration)<.01)return ve;let Ce=Math.min(.1,.00375*(this._updateTimestamp-te));return(Me||ve<.1||Math.abs(K)<1e-4)&&(Ce=Math.min(.2,4*Ce)),t.ai(this._exaggeration,ve,Ce)}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._mergedSourceCaches)this._style._mergedSourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const A=this.proxySourceCache,E=this.painter.transform;this._initializing&&(this._initializing=E._centerAltitude===0&&this.getAtPointOrZero(t.ac.fromLngLat(E.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const M=this.proxyCoords=A.getIds().map(te=>{const ge=A.getTileByID(te).tileID;return ge.projMatrix=E.calculateProjMatrix(ge.toUnwrapped()),ge});(function(te,ge){const ve=ge.transform.pointCoordinate(ge.transform.getCameraPoint()),Me=new t.P(ve.x,ve.y);te.sort((Ce,Pe)=>{if(Pe.overscaledZ-Ce.overscaledZ)return Pe.overscaledZ-Ce.overscaledZ;const Qe=new t.P(Ce.canonical.x+(1<<Ce.canonical.z)*Ce.wrap,Ce.canonical.y),je=new t.P(Pe.canonical.x+(1<<Pe.canonical.z)*Pe.wrap,Pe.canonical.y),qe=Me.mult(1<<Ce.canonical.z);return qe.x-=.5,qe.y-=.5,qe.distSqr(Qe)-qe.distSqr(je)})})(M,this.painter);const P=this.proxyToSource||{};this.proxyToSource={},M.forEach(te=>{this.proxyToSource[te.key]={}}),this.terrainTileForTile={};const j=this._style._mergedSourceCaches;for(const te in j){const ge=j[te];if(!ge.used||(ge!==this.sourceCache&&this.resetTileLookupCache(ge.id),this._setupProxiedCoordsForOrtho(ge,c[te],P),ge.usedForTerrain))continue;const ve=c[te];ge.getSource().reparseOverscaled&&this._assignTerrainTiles(ve)}this.proxiedCoords[A.id]=M.map(te=>new Id(te,te.key,this.orthoMatrix)),this._assignTerrainTiles(M),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(P),this.renderingToTexture=!1;const K={};this._visibleDemTiles=[];for(const te of this.proxyCoords){const ge=this.terrainTileForTile[te.key];if(!ge)continue;const ve=ge.tileID.key;ve in K||(this._visibleDemTiles.push(ge),K[ve]=ve)}}_assignTerrainTiles(c){this._initializing||c.forEach(A=>{if(this.terrainTileForTile[A.key])return;const E=this._findTileCoveringTileID(A,this.sourceCache);E&&(this.terrainTileForTile[A.key]=E)})}_prepareDEMTextures(){const c=this.painter.context,A=c.gl;for(const E in this.terrainTileForTile){const M=this.terrainTileForTile[E],P=M.dem;!P||M.demTexture&&!M.needsDEMTextureUpload||(c.activeTexture.set(A.TEXTURE1),jh(this.painter,M,P))}}_prepareDemTileUniforms(c,A,E,M){if(!A||A.demTexture==null)return!1;const P=c.tileID.canonical,j=Math.pow(2,A.tileID.canonical.z-P.z),K=M||"";return E[`u_dem_tl${K}`]=[P.x*j%1,P.y*j%1],E[`u_dem_scale${K}`]=j,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let c=0;const A=this._visibleDemTiles.reduce((E,M)=>{if(!M.dem)return E;const P=M.dem.tree.minimums[0];return P>0&&c++,E+P},0);return c?A/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,A=c.gl;c.activeTexture.set(A.TEXTURE2);const E=this._getLoadedAreaMinimum(),M=new t.dG({width:1,height:1},new Float32Array([E]));this._emptyDEMTextureDirty=!1;let P=this._emptyDEMTexture;return P?P.update(M,{premultiply:!1}):P=this._emptyDEMTexture=new t.T(c,M,A.R32F,{premultiply:!1}),P}setupElevationDraw(c,A,E){const M=this.painter.context,P=M.gl,j={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};j.u_exaggeration=this.exaggeration();let K=null,te=null,ge=1;if(E&&E.morphing&&this._useVertexMorphing){const Pe=E.morphing.srcDemTile,Qe=E.morphing.dstDemTile;ge=E.morphing.phase,Pe&&Qe&&(this._prepareDemTileUniforms(c,Pe,j,"_prev")&&(te=Pe),this._prepareDemTileUniforms(c,Qe,j)&&(K=Qe))}const ve=Pe=>Pe&&Pe.demTexture&&this.painter.linearFloatFilteringSupported()?P.LINEAR:P.NEAREST;let Me=null;var Ce;if(this.enabled?te&&K?(Me=K.demTexture,M.activeTexture.set(P.TEXTURE4),te.demTexture.bind(ve(te),P.CLAMP_TO_EDGE),j.u_dem_lerp=ge):(K=this.terrainTileForTile[c.tileID.key],Me=this._prepareDemTileUniforms(c,K,j)?K.demTexture:this.emptyDEMTexture):Me=this.emptyDEMTexture,M.activeTexture.set(P.TEXTURE2),Me&&(j.u_dem_size=(Ce=Me).size[0]===1?1:Ce.size[0]-2,Me.bind(ve(K),P.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(E&&E.useDepthForOcclusion,A,j),E&&E.useMeterToDem&&K){const Pe=(1<<K.tileID.canonical.z)*t.cb(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;j.u_meter_to_dem=Pe}if(E&&E.labelPlaneMatrixInv&&(j.u_label_plane_matrix_inv=E.labelPlaneMatrixInv),A.setTerrainUniformValues(M,j),this.painter.transform.projection.name==="globe"){const Pe=this.globeUniformValues(this.painter.transform,c.tileID.canonical,E&&E.useDenormalizedUpVectorScale);A.setGlobeUniformValues(M,Pe)}}globeUniformValues(c,A,E){const M=c.projection;return{u_tile_tl_up:M.upVector(A,0,0),u_tile_tr_up:M.upVector(A,t.aj,0),u_tile_br_up:M.upVector(A,t.aj,t.aj),u_tile_bl_up:M.upVector(A,0,t.aj),u_tile_up_scale:E?t.dH(1):M.upVectorScale(A,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const A=this.painter,E=this.painter.context;c.length!==0&&(E.bindFramebuffer.set(null),E.viewport.set([0,0,A.width,A.height]),A.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(M,P,j,K,te){if(M.transform.projection.name==="globe")(function(ge,ve,Me,Ce,Pe){const Qe=ge.context,je=Qe.gl;let qe,Ke;const lt=ge.transform,dt=t.dy(ge,Qe,lt),vt=(Qr,Br)=>{if(Ke===Br)return;const Jr=[fp[Br],"PROJECTION_GLOBE_VIEW"];dt&&Jr.push("CUSTOM_ANTIALIASING");const yn=ge.isTileAffectedByFog(Qr);qe=ge.getOrCreateProgram("globeRaster",{defines:Jr,overrideFog:yn}),Ke=Br},Tt=ge.colorModeForRenderPass(),Dt=new Sn(je.LEQUAL,Sn.ReadWrite,ge.depthRangeFor3D);au.update(Pe);const Vt=t.dz(lt),It=[t.aD(lt.center.lng),t.aH(lt.center.lat)],Mt=ge.globeSharedBuffers,Pt=[lt.width*t.q.devicePixelRatio,lt.height*t.q.devicePixelRatio],dr=Float32Array.from(lt.globeMatrix),sr={useDenormalizedUpVectorScale:!0};{const Qr=ge.transform,Br=rd(Qr.zoom,ve.exaggeration(),ve.sourceCache._source.tileSize);Ke=-1;const Jr=je.TRIANGLES;for(const yn of Ce){const vr=Me.getTile(yn),qt=Ii.disabled,kr=ve.prevTerrainTileForTile[yn.key],br=ve.terrainTileForTile[yn.key];Ou(kr,br)&&au.newMorphing(yn.key,kr,br,Pe,250),Qe.activeTexture.set(je.TEXTURE0),vr.texture&&vr.texture.bind(je.LINEAR,je.CLAMP_TO_EDGE);const an=au.getMorphValuesForProxy(yn.key),ln=an?1:0;an&&t.L(sr,{morphing:{srcDemTile:an.from,dstDemTile:an.to,phase:t.dx(an.phase)}});const dn=t.dA(yn.canonical),Mn=t.dB(dn.getCenter().lat),di=t.dC(yn.canonical,dn,Mn,Qr.worldSize/Qr._pixelsPerMercatorPixel),Ci=t.bh(t.dD(yn.canonical)),ti=kf(Qr.expandedFarZProjMatrix,dr,Vt,Ci,t.ah(Qr.zoom),It,Qr.frustumCorners.TL,Qr.frustumCorners.TR,Qr.frustumCorners.BR,Qr.frustumCorners.BL,Qr.globeCenterInViewSpace,Qr.globeRadius,Pt,Br,Qr._farZ,di);if(vt(yn,ln),qe&&(ve.setupElevationDraw(vr,qe,sr),ge.uploadCommonUniforms(Qe,qe,yn.toUnwrapped()),Mt)){const[xi,vi,qi]=Mt.getGridBuffers(Mn,Br!==0);qe.draw(ge,Jr,Dt,qt,Tt,Ai.backCCW,ti,"globe_raster",xi,vi,qi)}}}if(Mt&&(ge.renderDefaultNorthPole||ge.renderDefaultSouthPole)){const Qr=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];dt&&Qr.push("CUSTOM_ANTIALIASING"),qe=ge.getOrCreateProgram("globeRaster",{defines:Qr});for(const Br of Ce){const{x:Jr,y:yn,z:vr}=Br.canonical,qt=yn===0,kr=yn===(1<<vr)-1,[br,an,ln,dn]=Mt.getPoleBuffers(vr,!1);if(dn&&(qt||kr)){const Mn=Me.getTile(Br);Qe.activeTexture.set(je.TEXTURE0),Mn.texture&&Mn.texture.bind(je.LINEAR,je.CLAMP_TO_EDGE);let di=t.dE(vr,Jr,lt);const Ci=t.bh(t.dD(Br.canonical)),ti=(xi,vi)=>xi.draw(ge,je.TRIANGLES,Dt,Ii.disabled,Tt,Ai.disabled,kf(lt.expandedFarZProjMatrix,di,di,Ci,0,It,lt.frustumCorners.TL,lt.frustumCorners.TR,lt.frustumCorners.BR,lt.frustumCorners.BL,lt.globeCenterInViewSpace,lt.globeRadius,Pt,0,lt._farZ),"globe_pole_raster",vi,ln,dn);ve.setupElevationDraw(Mn,qe,sr),ge.uploadCommonUniforms(Qe,qe,Br.toUnwrapped()),qt&&ge.renderDefaultNorthPole&&ti(qe,br),kr&&ge.renderDefaultSouthPole&&(di=t.cP(t.bz(),di,[1,-1,1]),ti(qe,an))}}}})(M,P,j,K,te);else{const ge=M.context,ve=ge.gl;let Me,Ce;const Pe=M.shadowRenderer,Qe=Va(M,M.longestCutoffRange),je=Tt=>{if(Ce===Tt)return;const Dt=[];Dt.push(fp[Tt]),Qe.shouldRenderCutoff&&Dt.push("RENDER_CUTOFF"),Pe&&(Dt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Pe.useNormalOffset&&Dt.push("NORMAL_OFFSET")),Me=M.getOrCreateProgram("terrainRaster",{defines:Dt}),Ce=Tt},qe=M.colorModeForRenderPass(),Ke=new Sn(ve.LEQUAL,Sn.ReadWrite,M.depthRangeFor3D);au.update(te);const lt=M.transform,dt=rd(lt.zoom,P.exaggeration(),P.sourceCache._source.tileSize);let vt=[0,0,0];if(Pe){const Tt=M.style.directionalLight,Dt=M.style.ambientLight;Tt&&Dt&&(vt=ml(M.style,Tt,Dt))}{Ce=-1;const Tt=ve.TRIANGLES,[Dt,Vt]=[P.gridIndexBuffer,P.gridSegments];for(const It of K){const Mt=j.getTile(It),Pt=Ii.disabled,dr=P.prevTerrainTileForTile[It.key],sr=P.terrainTileForTile[It.key];Ou(dr,sr)&&au.newMorphing(It.key,dr,sr,te,250),ge.activeTexture.set(ve.TEXTURE0),Mt.texture&&Mt.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const Qr=au.getMorphValuesForProxy(It.key),Br=Qr?1:0;let Jr;Qr&&(Jr={morphing:{srcDemTile:Qr.from,dstDemTile:Qr.to,phase:t.dx(Qr.phase)}});const yn=Wp(It.projMatrix,nd(It.canonical,lt.renderWorldCopies)?dt/10:dt,vt);if(je(Br),!Me)continue;P.setupElevationDraw(Mt,Me,Jr);const vr=It.toUnwrapped();Pe&&Pe.setupShadows(vr,Me),M.uploadCommonUniforms(ge,Me,vr,null,Qe),Me.draw(M,Tt,Ke,Pt,qe,Ai.backCCW,yn,"terrain_raster",P.gridBuffer,Dt,Vt)}}}}(A,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,A.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const A=this.painter,E=this.painter.context,M=this.proxySourceCache,P=this.proxiedCoords[M.id],j=this._drapedRenderBatches.shift(),K=A.style.order,te=[];let ge=0;for(const ve of P){const Me=M.getTileByID(ve.proxyTileKey),Ce=M.proxyCachedFBO[ve.key]?M.proxyCachedFBO[ve.key][c]:void 0,Pe=Ce!==void 0?M.renderCache[Ce]:this.pool[ge++],Qe=Ce!==void 0;if(Me.texture=Pe.tex,Qe&&!Pe.dirty){te.push(Me.tileID);continue}let je;E.bindFramebuffer.set(Pe.fb.framebuffer),this.renderedToTile=!1,Pe.dirty&&(E.clear({color:t.am.transparent,stencil:0}),Pe.dirty=!1);for(let qe=j.start;qe<=j.end;++qe){const Ke=A.style._mergedLayers[K[qe]];if(Ke.isHidden(A.transform.zoom))continue;const lt=A.style.getLayerSourceCache(Ke),dt=lt?this.proxyToSource[ve.key][lt.id]:[ve];if(!dt)continue;const vt=dt;E.viewport.set([0,0,Pe.fb.width,Pe.fb.height]),je!==(lt?lt.id:null)&&(this._setupStencil(Pe,dt,Ke,lt),je=lt?lt.id:null),A.renderLayer(A,lt,Ke,vt)}if(this._drapedRenderBatches.length===0)for(const qe of this._pendingGroundEffectLayers){const Ke=A.style._mergedLayers[K[qe]];if(Ke.isHidden(A.transform.zoom))continue;const lt=A.style.getLayerSourceCache(Ke),dt=lt?this.proxyToSource[ve.key][lt.id]:[ve];if(!dt)continue;const vt=dt;E.viewport.set([0,0,Pe.fb.width,Pe.fb.height]),je!==(lt?lt.id:null)&&(this._setupStencil(Pe,dt,Ke,lt),je=lt?lt.id:null),A.renderLayer(A,lt,Ke,vt)}this.renderedToTile?(Pe.dirty=!0,te.push(Me.tileID)):Qe||--ge,ge===5&&(ge=0,this.renderToBackBuffer(te))}return this.renderToBackBuffer(te),this.renderingToTexture=!1,E.bindFramebuffer.set(null),E.viewport.set([0,0,A.width,A.height]),j.end+1}postRender(){}isLayerOrderingCorrect(c){const A=c.order.length;let E=-1,M=A;for(let P=0;P<A;++P)this._style.isLayerDraped(c._mergedLayers[c.order[P]])?E=Math.max(E,P):M=Math.min(M,P);return M>E}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(A=>A.dem).forEach(A=>{c=Math.min(c,A.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,A,E){if(!this._visibleDemTiles)return null;const M=this._visibleDemTiles.filter(P=>P.dem).map(P=>{const j=P.tileID,K=1<<j.overscaledZ,{x:te,y:ge}=j.canonical,ve=te/K,Me=(te+1)/K,Ce=ge/K,Pe=(ge+1)/K;return{minx:ve,miny:Ce,maxx:Me,maxy:Pe,t:P.dem.tree.raycastRoot(ve,Ce,Me,Pe,c,A,E),tile:P}});M.sort((P,j)=>(P.t!==null?P.t:Number.MAX_VALUE)-(j.t!==null?j.t:Number.MAX_VALUE));for(const P of M){if(P.t==null)return null;const j=P.tile.dem.tree.raycast(P.minx,P.miny,P.maxx,P.maxy,c,A,E);if(j!=null)return j}return null}_createFBO(){const c=this.painter.context,A=c.gl,E=this.drapeBufferSize;c.activeTexture.set(A.TEXTURE0);const M=new t.T(c,{width:E[0],height:E[1],data:null},A.RGBA8);M.bind(A.LINEAR,A.CLAMP_TO_EDGE);const P=c.createFramebuffer(E[0],E[1],!0,null);return P.colorAttachment.set(M.texture),P.depthAttachment=new hp(c,P.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,E[0],E[1]),this._stencilRef=0,P.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):P.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&A.texParameterf(A.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:P,tex:M,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const c in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const A=this._style._mergedLayers[c],E=A.isHidden(this.painter.transform.zoom);return A.type==="hillshade"||A.type==="custom"?!E&&A.shouldRedrape():!E&&A.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const E of this._style.getSources())if(E instanceof uo){c=!0;break}if(!c)return;const A={};for(let E=0;E<this._style.order.length;++E){const M=this._style._mergedLayers[this._style.order[E]],P=this._style.getLayerSourceCache(M);if(P&&!A[P.id]&&!M.isHidden(this.painter.transform.zoom)&&M.type==="line"&&M.widthExpression()instanceof t.ab){A[P.id]=!0;for(const j of this.proxyCoords){const K=this.proxyToSource[j.key][P.id];if(K)for(const te of K)this._clearRenderCacheForTile(P.id,te)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const E in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[E]._source instanceof Ji){c=!0;break}if(!c)return;const A={};for(let E=0;E<this._style.order.length;++E){const M=this._style._mergedLayers[this._style.order[E]],P=this._style.getLayerSourceCache(M);if(!P||A[P.id]||M.isHidden(this.painter.transform.zoom)||M.type!=="raster")continue;const j=M.paint.get("raster-fade-duration");for(const K of this.proxyCoords){const te=this.proxyToSource[K.key][P.id];if(te)for(const ge of te){const ve=Cl(P.getTile(ge),P.findLoadedParent(ge,0),P,this.painter.transform,j);(ve.opacity!==1||ve.mix!==0)&&this._clearRenderCacheForTile(P.id,ge)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const c=this._style.order,A=c.length;if(A===0)return;const E=[];this._pendingGroundEffectLayers=[];let M,P=0,j=this._style._mergedLayers[c[P]];for(;!this._style.isLayerDraped(j)&&j.isHidden(this.painter.transform.zoom)&&++P<A;)j=this._style._mergedLayers[c[P]];for(;P<A;++P){const K=this._style._mergedLayers[c[P]];K.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(K)?M===void 0&&(M=P):(K.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(P),M!==void 0&&(E.push({start:M,end:P-1}),M=void 0)))}if(M!==void 0&&E.push({start:M,end:P-1}),E.length!==0){const K=E[E.length-1];this._pendingGroundEffectLayers.every(te=>te>K.end)||t.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=E}_setupRenderCache(c){const A=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,A.renderCache.length>A.renderCachePool.length){const j=Object.values(A.proxyCachedFBO);A.proxyCachedFBO={};for(let K=0;K<j.length;++K){const te=Object.values(j[K]);A.renderCachePool.push(...te)}}return}this._clearRasterLayersFromRenderCache();const E=this.proxyCoords,M=this._tilesDirty;for(let j=E.length-1;j>=0;j--){const K=E[j];if(A.getTileByID(K.key),A.proxyCachedFBO[K.key]!==void 0){const te=c[K.key],ge=this.proxyToSource[K.key];let ve=0;for(const Me in ge){const Ce=ge[Me],Pe=te[Me];if(!Pe||Pe.length!==Ce.length||Ce.some((Qe,je)=>Qe!==Pe[je]||M[Me]&&M[Me].hasOwnProperty(Qe.key))){ve=-1;break}++ve}for(const Me in A.proxyCachedFBO[K.key])A.renderCache[A.proxyCachedFBO[K.key][Me]].dirty=ve<0||ve!==Object.values(te).length}}const P=[...this._drapedRenderBatches];P.sort((j,K)=>K.end-K.start-(j.end-j.start));for(const j of P)for(const K of E){if(A.proxyCachedFBO[K.key])continue;let te=A.renderCachePool.pop();te===void 0&&A.renderCache.length<50&&(te=A.renderCache.length,A.renderCache.push(this._createFBO())),te!==void 0&&(A.proxyCachedFBO[K.key]={},A.proxyCachedFBO[K.key][j.start]=te,A.renderCache[te].dirty=!0)}this._tilesDirty={}}_setupStencil(c,A,E,M){if(!M||!this._sourceTilesOverlap[M.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const P=this.painter.context,j=P.gl;if(A.length<=1)return void(this._overlapStencilType=!1);let K;if(E.isTileClipped())K=A.length,this._overlapStencilMode.test={func:j.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(A[0].overscaledZ>A[A.length-1].overscaledZ))return void(this._overlapStencilType=!1);K=1,this._overlapStencilMode.test={func:j.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+K>255&&(P.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=K,this._overlapStencilMode.ref=this._stencilRef,E.isTileClipped()&&this._renderTileClippingMasks(A,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):Ii.disabled}_renderTileClippingMasks(c,A){const E=this.painter,M=this.painter.context,P=M.gl;E._tileClippingMaskIDs={},M.setColorMode(Li.disabled),M.setDepthMode(Sn.disabled);const j=E.getOrCreateProgram("clippingMask");for(const K of c){const te=E._tileClippingMaskIDs[K.key]=--A;j.draw(E,P.TRIANGLES,Sn.disabled,new Ii({func:P.ALWAYS,mask:0},te,255,P.KEEP,P.KEEP,P.REPLACE),Li.disabled,Ai.disabled,dp(K.projMatrix),"$clipping",E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}}pointCoordinate(c){const A=this.painter.transform;if(c.x<0||c.x>A.width||c.y<0||c.y>A.height)return null;const E=[c.x,c.y,1,1];t.aA(E,E,A.pixelMatrixInverse),t.cH(E,E,1/E[3]),E[0]/=A.worldSize,E[1]/=A.worldSize;const M=A._camera.position,P=t.cb(1,A.center.lat),j=[M[0],M[1],M[2]/P,0],K=t.d7([],E.slice(0,3),j);t.au(K,K);const te=this.raycast(j,K,this._exaggeration);return te!==null&&te?(t.bE(j,j,K,te),j[3]=j[2],j[2]*=P,j):null}_setupProxiedCoordsForOrtho(c,A,E){if(c.getSource()instanceof t.aP)return this._setupProxiedCoordsForImageSource(c,A,E);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const M=this.proxiedCoords[c.id]=[],P=this.proxyCoords;for(let te=0;te<P.length;te++){const ge=P[te],ve=this._findTileCoveringTileID(ge,c);if(ve){const Me=this._createProxiedId(ge,ve,E[ge.key]&&E[ge.key][c.id]);M.push(Me),this.proxyToSource[ge.key][c.id]=[Me]}}let j=!1;const K=new Set;for(let te=0;te<A.length;te++){const ge=c.getTile(A[te]);if(!ge||!ge.hasData())continue;const ve=this._findTileCoveringTileID(ge.tileID,this.proxySourceCache);if(ve&&ve.tileID.canonical.z!==ge.tileID.canonical.z){const Me=this.proxyToSource[ve.tileID.key][c.id],Ce=this._createProxiedId(ve.tileID,ge,E[ve.tileID.key]&&E[ve.tileID.key][c.id]);Me?Me.splice(Me.length-1,0,Ce):this.proxyToSource[ve.tileID.key][c.id]=[Ce];const Pe=this.proxyToSource[ve.tileID.key][c.id];K.has(Pe)||K.add(Pe),M.push(Ce),j=!0}}if(this._sourceTilesOverlap[c.id]=j,j&&this._debugParams.sortTilesHiZFirst)for(const te of K)te.sort((ge,ve)=>ve.overscaledZ-ge.overscaledZ)}_setupProxiedCoordsForImageSource(c,A,E){if(!c.getSource().loaded())return;const M=this.proxiedCoords[c.id]=[],P=this.proxyCoords,j=c.getSource(),K=j.tileID;if(!K)return;const te=new t.P(K.x,K.y)._div(1<<K.z),ge=j.coordinates.map(t.ac.fromLngLat).reduce((Me,Ce)=>(Me.min.x=Math.min(Me.min.x,Ce.x-te.x),Me.min.y=Math.min(Me.min.y,Ce.y-te.y),Me.max.x=Math.max(Me.max.x,Ce.x-te.x),Me.max.y=Math.max(Me.max.y,Ce.y-te.y),Me),{min:new t.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),ve=(Me,Ce)=>{const Pe=Me.wrap+Me.canonical.x/(1<<Me.canonical.z),Qe=Me.canonical.y/(1<<Me.canonical.z),je=t.aj/(1<<Me.canonical.z),qe=Ce.wrap+Ce.canonical.x/(1<<Ce.canonical.z),Ke=Ce.canonical.y/(1<<Ce.canonical.z);return Pe+je<qe+ge.min.x||Pe>qe+ge.max.x||Qe+je<Ke+ge.min.y||Qe>Ke+ge.max.y};for(let Me=0;Me<P.length;Me++){const Ce=P[Me];for(let Pe=0;Pe<A.length;Pe++){const Qe=c.getTile(A[Pe]);if(!Qe||!Qe.hasData()||ve(Ce,Qe.tileID))continue;const je=this._createProxiedId(Ce,Qe,E[Ce.key]&&E[Ce.key][c.id]),qe=this.proxyToSource[Ce.key][c.id];qe?qe.push(je):this.proxyToSource[Ce.key][c.id]=[je],M.push(je)}}}_createProxiedId(c,A,E){let M=this.orthoMatrix;if(E){const P=E.find(j=>j.key===A.tileID.key);if(P)return P}if(A.tileID.key!==c.key){const P=c.canonical.z-A.tileID.canonical.z;let j,K,te;M=t.bz();const ge=A.tileID.wrap-c.wrap<<c.overscaledZ;P>0?(j=t.aj>>P,K=j*((A.tileID.canonical.x<<P)-c.canonical.x+ge),te=j*((A.tileID.canonical.y<<P)-c.canonical.y)):(j=t.aj<<-P,K=t.aj*(A.tileID.canonical.x-(c.canonical.x+ge<<-P)),te=t.aj*(A.tileID.canonical.y-(c.canonical.y<<-P))),t.ca(M,0,j,0,j,0,1),t.bo(M,M,[K,te,0])}return new Id(A.tileID,c.key,M)}_findTileCoveringTileID(c,A){let E=A.getTile(c);if(E&&E.hasData())return E;const M=this._findCoveringTileCache[A.id],P=M[c.key];if(E=P?A.getTileByID(P):null,E&&E.hasData()||P===null)return E;let j=E?E.tileID:c,K=j.overscaledZ;const te=A.getSource().minzoom,ge=[];if(!P){const Me=A.getSource().maxzoom;if(c.canonical.z>=Me){const Ce=c.canonical.z-Me;A.getSource().reparseOverscaled?(K=Math.max(c.canonical.z+2,A.transform.tileZoom),j=new t.aM(K,c.wrap,Me,c.canonical.x>>Ce,c.canonical.y>>Ce)):Ce!==0&&(K=Me,j=new t.aM(K,c.wrap,Me,c.canonical.x>>Ce,c.canonical.y>>Ce))}j.key!==c.key&&(ge.push(j.key),E=A.getTile(j))}const ve=Me=>{ge.forEach(Ce=>{M[Ce]=Me}),ge.length=0};for(K-=1;K>=te&&(!E||!E.hasData());K--){E&&ve(E.tileID.key);const Me=j.calculateScaledKey(K);if(E=A.getTileByID(Me),E&&E.hasData())break;const Ce=M[Me];if(Ce===null)break;Ce===void 0?ge.push(Me):E=A.getTileByID(Ce)}return ve(E?E.tileID.key:null),E&&E.hasData()?E:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,A){let E=this._tilesDirty[c];E||(E=this._tilesDirty[c]={}),E[A.key]=!0}}function mp(C,c,A){const E=function(K,te,ge){const ve=t.bG(te,K),Me=t.bG(ge,[.2126,.7152,.0722]),Ce=(Qe,je,qe)=>(1-qe)*Qe+qe*je,Pe=Ce(1-.3*Math.min(Me,1),1,Math.min(ve+1,1));return Ce(.92,1,Math.asin(t.ay(te[2],-1,1))/Math.PI+.5)*Pe}(C,[0,0,1],c),M=[0,0,0];t.c1(M,A.slice(0,3),E);const P=[0,0,0];t.c1(P,c.slice(0,3),C[2]);const j=[0,0,0];return t.d5(j,M,P),t.d8(j)}const lu=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],gp=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class Md{static cacheKey(c,A,E,M){let P=`${A}${M?M.cacheKey:""}`;for(const j of E)c.usedDefines.includes(j)&&(P+=`/${j}`);return P}constructor(c,A,E,M,P,j){const K=c.gl;this.program=K.createProgram(),this.configuration=M,this.name=A,this.fixedDefines=[...j];const te=M?M.getBinderAttributes():[],ge=(E.staticAttributes||[]).concat(te);let ve=M?M.defines():[];ve=ve.concat(j.map(qe=>`#define ${qe}`));const Me=`#version 300 es
`;let Ce=Me+ve.concat("precision mediump float;",nu,Yh.fragmentSource).join(`
`);for(const qe of E.fragmentIncludes)Ce+=`
${tc[qe]}`;Ce+=`
${E.fragmentSource}`;let Pe=Me+ve.concat("precision highp float;",nu,Yh.vertexSource).join(`
`);for(const qe of E.vertexIncludes)Pe+=`
${tc[qe]}`;this.forceManualRenderingForInstanceIDShaders=c.forceManualRenderingForInstanceIDShaders&&E.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(Pe+=`
uniform int u_instanceID;
`),Pe+=`
${E.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(Pe=Pe.replaceAll("gl_InstanceID","u_instanceID"));const Qe=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);K.shaderSource(Qe,Ce),K.compileShader(Qe),K.attachShader(this.program,Qe);const je=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(je,Pe),K.compileShader(je),K.attachShader(this.program,je),this.attributes={},this.numAttributes=ge.length;for(let qe=0;qe<this.numAttributes;qe++)if(ge[qe]){const Ke=ge[qe].startsWith("a_")?ge[qe]:`a_${ge[qe]}`;K.bindAttribLocation(this.program,qe,Ke),this.attributes[Ke]=qe}K.linkProgram(this.program),K.deleteShader(je),K.deleteShader(Qe),this.fixedUniforms=P(c),this.binderUniforms=M?M.getUniforms(c):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(qe=>({u_instanceID:new t.cd(qe)}))(c)),(j.includes("TERRAIN")||A.indexOf("symbol")!==-1||A.indexOf("circle")!==-1)&&(this.terrainUniforms=(qe=>({u_dem:new t.cd(qe),u_dem_prev:new t.cd(qe),u_dem_tl:new t.cg(qe),u_dem_scale:new t.cf(qe),u_dem_tl_prev:new t.cg(qe),u_dem_scale_prev:new t.cf(qe),u_dem_size:new t.cf(qe),u_dem_lerp:new t.cf(qe),u_exaggeration:new t.cf(qe),u_depth:new t.cd(qe),u_depth_size_inv:new t.cg(qe),u_depth_range_unpack:new t.cg(qe),u_occluder_half_size:new t.cf(qe),u_occlusion_depth_offset:new t.cf(qe),u_meter_to_dem:new t.cf(qe),u_label_plane_matrix_inv:new t.ch(qe)}))(c)),j.includes("GLOBE")&&(this.globeUniforms=(qe=>({u_tile_tl_up:new t.ce(qe),u_tile_tr_up:new t.ce(qe),u_tile_br_up:new t.ce(qe),u_tile_bl_up:new t.ce(qe),u_tile_up_scale:new t.cf(qe)}))(c)),j.includes("FOG")&&(this.fogUniforms=(qe=>({u_fog_matrix:new t.ch(qe),u_fog_range:new t.cg(qe),u_fog_color:new t.d0(qe),u_fog_horizon_blend:new t.cf(qe),u_fog_vertical_limit:new t.cg(qe),u_fog_temporal_offset:new t.cf(qe),u_frustum_tl:new t.ce(qe),u_frustum_tr:new t.ce(qe),u_frustum_br:new t.ce(qe),u_frustum_bl:new t.ce(qe),u_globe_pos:new t.ce(qe),u_globe_radius:new t.cf(qe),u_globe_transition:new t.cf(qe),u_is_globe:new t.cd(qe),u_viewport:new t.cg(qe)}))(c)),j.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(qe=>({u_cutoff_params:new t.d0(qe)}))(c)),j.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(qe=>({u_lighting_ambient_color:new t.ce(qe),u_lighting_directional_dir:new t.ce(qe),u_lighting_directional_color:new t.ce(qe),u_ground_radiance:new t.ce(qe)}))(c)),j.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(qe=>({u_light_matrix_0:new t.ch(qe),u_light_matrix_1:new t.ch(qe),u_fade_range:new t.cg(qe),u_shadow_normal_offset:new t.ce(qe),u_shadow_intensity:new t.cf(qe),u_shadow_texel_size:new t.cf(qe),u_shadow_map_resolution:new t.cf(qe),u_shadow_direction:new t.ce(qe),u_shadow_bias:new t.ce(qe),u_shadowmap_0:new t.cd(qe),u_shadowmap_1:new t.cd(qe)}))(c))}}setTerrainUniformValues(c,A){if(!this.terrainUniforms)return;const E=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const M in A)E[M]&&E[M].set(this.program,M,A[M])}}setGlobeUniformValues(c,A){if(!this.globeUniforms)return;const E=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const M in A)E[M]&&E[M].set(this.program,M,A[M])}}setFogUniformValues(c,A){if(!this.fogUniforms)return;const E=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const M in A)E[M].set(this.program,M,A[M])}}setCutoffUniformValues(c,A){if(!this.cutoffUniforms)return;const E=this.cutoffUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const M in A)E[M].set(this.program,M,A[M])}}setLightsUniformValues(c,A){if(!this.lightsUniforms)return;const E=this.lightsUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const M in A)E[M].set(this.program,M,A[M])}}setShadowUniformValues(c,A){if(this.failedToCreate||!this.shadowUniforms)return;const E=this.shadowUniforms;c.program.set(this.program);for(const M in A)E[M].set(this.program,M,A[M])}_drawDebugWireframe(c,A,E,M,P,j,K,te,ge,ve){const Me=c.options.wireframe;if(Me.terrain===!1&&Me.layers2D===!1&&Me.layers3D===!1)return;const Ce=c.context;if(!(!(!Me.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!Me.layers2D||c._terrain&&c._terrain.renderingToTexture||!lu.includes(this.name))||!(!Me.layers3D||!gp.includes(this.name))))return;const Pe=Ce.gl,Qe=c.wireframeDebugCache.getLinesFromTrianglesBuffer(c.frameCounter,P,Ce);if(!Qe)return;const je=[...this.fixedDefines];je.push("DEBUG_WIREFRAME");const qe=c.getOrCreateProgram(this.name,{config:this.configuration,defines:je});Ce.program.set(qe.program);const Ke=(vt,Tt,Dt)=>{if(Tt[vt]&&Dt[vt])for(const Vt in Tt[vt])Dt[vt][Vt]&&Dt[vt][Vt].set(Dt.program,Vt,Tt[vt][Vt].current)};ge&&ge.setUniforms(qe.program,Ce,qe.binderUniforms,K,{zoom:te}),Ke("fixedUniforms",this,qe),Ke("terrainUniforms",this,qe),Ke("globeUniforms",this,qe),Ke("fogUniforms",this,qe),Ke("lightsUniforms",this,qe),Ke("shadowUniforms",this,qe),Qe.bind(),Ce.setColorMode(new Li([Pe.ONE,Pe.ONE_MINUS_SRC_ALPHA,Pe.ZERO,Pe.ONE],t.am.transparent,[!0,!0,!0,!1])),Ce.setDepthMode(new Sn(A.func===Pe.LESS?Pe.LEQUAL:A.func,Sn.ReadOnly,A.range)),Ce.setStencilMode(Ii.disabled);const lt=3*j.primitiveLength*2,dt=3*j.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const vt=ve||1;for(let Tt=0;Tt<vt;++Tt)qe.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Tt),Pe.drawElements(Pe.LINES,lt,Pe.UNSIGNED_SHORT,dt)}else ve&&ve>1?Pe.drawElementsInstanced(Pe.LINES,lt,Pe.UNSIGNED_SHORT,dt,ve):Pe.drawElements(Pe.LINES,lt,Pe.UNSIGNED_SHORT,dt);P.bind(),Ce.program.set(this.program),Ce.setDepthMode(A),Ce.setStencilMode(E),Ce.setColorMode(M)}checkUniforms(c,A,E){if(this.fixedDefines.includes(A)){for(const M of Object.keys(E))if(!E[M].initialized)throw new Error(`Program '${this.name}', from draw '${c}': uniform ${M} not set but required by ${A} being defined`)}}draw(c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe){const Ke=c.context,lt=Ke.gl;if(this.failedToCreate)return;Ke.program.set(this.program),Ke.setDepthMode(E),Ke.setStencilMode(M),Ke.setColorMode(P),Ke.setCullFace(j);for(const Tt of Object.keys(this.fixedUniforms))this.fixedUniforms[Tt].set(this.program,Tt,K[Tt]);Qe&&Qe.setUniforms(this.program,Ke,this.binderUniforms,Ce,{zoom:Pe});const dt={[lt.POINTS]:1,[lt.LINES]:2,[lt.TRIANGLES]:3,[lt.LINE_STRIP]:1}[A];this.checkUniforms(te,"RENDER_SHADOWS",this.shadowUniforms);const vt=qe&&qe>0?1:void 0;for(const Tt of Me.get()){const Dt=Tt.vaos||(Tt.vaos={});if((Dt[te]||(Dt[te]=new Bd)).bind(Ke,this,ge,Qe?Qe.getPaintVertexBuffers():[],ve,Tt.vertexOffset,je||[],vt),this.forceManualRenderingForInstanceIDShaders){const Vt=qe||1;for(let It=0;It<Vt;++It)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",It),ve?lt.drawElements(A,Tt.primitiveLength*dt,lt.UNSIGNED_SHORT,Tt.primitiveOffset*dt*2):lt.drawArrays(A,Tt.vertexOffset,Tt.vertexLength)}else qe&&qe>1?lt.drawElementsInstanced(A,Tt.primitiveLength*dt,lt.UNSIGNED_SHORT,Tt.primitiveOffset*dt*2,qe):ve?lt.drawElements(A,Tt.primitiveLength*dt,lt.UNSIGNED_SHORT,Tt.primitiveOffset*dt*2):lt.drawArrays(A,Tt.vertexOffset,Tt.vertexLength);A===lt.TRIANGLES&&ve&&this._drawDebugWireframe(c,E,M,P,ve,Tt,Ce,Pe,Qe,qe)}}}function Fd(C,c,A=0){const E=Math.pow(2,c.tileID.overscaledZ),M=c.tileSize*Math.pow(2,C.transform.tileZoom)/E,P=M*(c.tileID.canonical.x+c.tileID.wrap*E),j=M*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture?c.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/t.aw(c,1,C.transform.tileZoom),u_pixel_coord_upper:[P>>16,j>>16],u_pixel_coord_lower:[65535&P,65535&j],u_pattern_transition:A}}const oe={terrain:0,flat:1},be=t.bz(),ke=(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke)=>{const lt=c.style.light,dt=lt.properties.get("position"),vt=[dt.x,dt.y,dt.z],Tt=t.dJ();lt.properties.get("anchor")==="viewport"&&(t.dK(Tt,-c.transform.angle),t.dL(vt,vt,Tt));const Dt=lt.properties.get("color").toPremultipliedRenderColor(null),Vt=c.transform,It={u_matrix:C,u_lightpos:vt,u_lightintensity:lt.properties.get("intensity"),u_lightcolor:[Dt.r,Dt.g,Dt.b],u_vertical_gradient:+A,u_opacity:E,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:be,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:oe[ge],u_base_type:oe[ve],u_ao:M,u_edge_radius:P,u_width_scale:j,u_flood_light_color:Qe,u_vertical_scale:je,u_flood_light_intensity:qe,u_ground_shadow_factor:Ke};return Vt.projection.name==="globe"&&(It.u_tile_id=[K.canonical.x,K.canonical.y,1<<K.canonical.z],It.u_zoom_transition=Me,It.u_inv_rot_matrix=Pe,It.u_merc_center=Ce,It.u_up_dir=Vt.projection.upVector(new t.cA(0,0,0),Ce[0]*t.aj,Ce[1]*t.aj),It.u_height_lift=te),It},rt=(C,c,A,E,M,P)=>({u_matrix:C,u_edge_radius:c,u_width_scale:A,u_vertical_scale:E,u_height_type:oe[M],u_base_type:oe[P]}),gt=(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke)=>{const lt=ke(C,c,A,E,M,P,j,K,ge,ve,Me,Ce,Pe,Qe,je,qe,1,[0,0,0]),dt={u_height_factor:-Math.pow(2,K.overscaledZ)/te.tileSize/8};return t.h(lt,Fd(c,te,Ke),dt)},xt=(C,c,A)=>({u_matrix:C,u_emissive_strength:c,u_ground_shadow_factor:A}),Bt=(C,c,A,E,M,P=0)=>t.h(xt(C,c,M),Fd(A,E,P)),Lt=(C,c,A,E)=>({u_matrix:C,u_world:A,u_emissive_strength:c,u_ground_shadow_factor:E}),Wt=(C,c,A,E,M,P,j=0)=>t.h(Bt(C,c,A,E,P,j),{u_world:M}),ar=(C,c)=>({u_matrix:C,u_ground_shadow_factor:c}),jr=(C,c,A,E,M)=>({u_matrix:C,u_camera_pos:[c[0],c[1],c[2]],u_depth_bias:A,u_height_scale:E,u_reset_depth:M}),un=(C,c)=>({u_matrix:C,u_normal_matrix:c,u_opacity:1}),hn=C=>({u_matrix:C}),en=C=>({u_matrix:C}),jn=(C,c,A,E,M,P,j,K)=>{const te=t.aj/P.tileSize;return{u_matrix:C,u_inv_rot_matrix:c,u_camera_to_center_distance:A.getCameraToCenterDistance(K),u_extrude_scale:[A.pixelsToGLUnits[0]/te,A.pixelsToGLUnits[1]/te],u_zoom_transition:E,u_tile_id:j,u_merc_center:M}},Dn=(C,c,A=1)=>({u_matrix:C,u_color:c,u_overlay:0,u_overlay_scale:A}),Nr=t.bz(),qr=(C,c,A,E,M,P,j)=>{const K=C.transform,te=K.projection.name==="globe",ge=te?t.dM(K.zoom,c.canonical)*K._pixelsPerMercatorPixel:t.aw(A,1,P),ve={u_matrix:c.projMatrix,u_extrude_scale:ge,u_intensity:j,u_inv_rot_matrix:Nr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(te){ve.u_inv_rot_matrix=E,ve.u_merc_center=M,ve.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],ve.u_zoom_transition=t.ah(K.zoom);const Me=M[0]*t.aj,Ce=M[1]*t.aj;ve.u_up_dir=K.projection.upVector(new t.cA(0,0,0),Me,Ce)}return ve};function ri(C,[c,A,E,M],[P,j]){if(P===j)return[0,0,0,0];const K=255*(C-1)/(C*(j-P));return[c*K,A*K,E*K,M*K]}function ci(C,c,[A,E]){return A===E?0:.5/C+(c-A)*(C-1)/(C*(E-A))}const ni=(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke,lt,dt,vt)=>({u_matrix:C,u_normalize_matrix:c,u_globe_matrix:A,u_merc_matrix:E,u_grid_matrix:M,u_tl_parent:P,u_scale_parent:ge,u_fade_t:ve.mix,u_opacity:ve.opacity*Me.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Me.paint.get("raster-brightness-min"),u_brightness_high:Me.paint.get("raster-brightness-max"),u_saturation_factor:t.dO(Me.paint.get("raster-saturation")),u_contrast_factor:t.dN(Me.paint.get("raster-contrast")),u_spin_weights:Ni(Me.paint.get("raster-hue-rotate")),u_perspective_transform:Ce,u_raster_elevation:Pe,u_zoom_transition:j,u_merc_center:K,u_cutoff_params:te,u_colorization_mix:ri(t.dP,je,Ke),u_colorization_offset:ci(t.dP,qe,Ke),u_color_ramp:Qe,u_texture_offset:[dt/(lt+2*dt),lt/(lt+2*dt)],u_texture_res:[lt+2*dt,lt+2*dt],u_emissive_strength:vt});function Ni(C){C*=Math.PI/180;const c=Math.sin(C),A=Math.cos(C);return[(2*A+1)/3,(-Math.sqrt(3)*c-A+1)/3,(Math.sqrt(3)*c-A+1)/3]}const Fi=.05,Ss=(C,c,A,E,M,P,j,K,te,ge,ve,Me)=>({u_matrix:C,u_normalize_matrix:c,u_globe_matrix:A,u_merc_matrix:E,u_grid_matrix:M,u_tl_parent:P,u_scale_parent:ge,u_fade_t:ve.mix,u_opacity:ve.opacity,u_image0:0,u_image1:1,u_raster_elevation:Me,u_zoom_transition:j,u_merc_center:K,u_cutoff_params:te}),Pi=(C,c,A,E,M,P,j,K,te,ge)=>({u_particle_texture:C,u_particle_texture_side_len:c,u_tile_offset:A,u_velocity:E,u_color_ramp:P,u_velocity_res:M,u_max_speed:j,u_uv_offset:K,u_data_scale:[255*te[0],255*te[1]],u_data_offset:ge,u_particle_pos_scale:1.1,u_particle_pos_offset:[Fi,Fi]}),pa=(C,c,A,E,M,P,j,K,te,ge)=>({u_particle_texture:C,u_particle_texture_side_len:c,u_velocity:A,u_velocity_res:E,u_max_speed:M,u_speed_factor:P,u_reset_rate:j,u_rand_seed:Math.random(),u_uv_offset:K,u_data_scale:[255*te[0],255*te[1]],u_data_offset:ge,u_particle_pos_scale:1.1,u_particle_pos_offset:[Fi,Fi]}),la=t.bz(),Fo=(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke,lt,dt,vt,Tt,Dt,Vt)=>{const It=M.transform,Mt={u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:It.getCameraToCenterDistance(lt),u_rotate_symbol:+A,u_aspect_ratio:It.width/It.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:j,u_coord_matrix:K,u_is_text:+ge,u_elevation_from_sea:te?1:0,u_pitch_with_map:+E,u_texsize:ve,u_texsize_icon:Me,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:la,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:la,u_up_vector:[0,-1,0],u_color_adj_mat:Tt,u_icon_transition:Dt||0,u_gamma_scale:E?M.transform.getCameraToCenterDistance(lt)*Math.cos(M.terrain?0:M.transform._pitch):1,u_device_pixel_ratio:t.q.devicePixelRatio,u_is_halo:1,u_scale_factor:Vt||1,u_ground_shadow_factor:dt,u_inv_matrix:t.bi(t.bz(),j),u_normal_scale:vt};return lt.name==="globe"&&(Mt.u_tile_id=[Pe.canonical.x,Pe.canonical.y,1<<Pe.canonical.z],Mt.u_zoom_transition=Qe,Mt.u_inv_rot_matrix=qe,Mt.u_merc_center=je,Mt.u_camera_forward=It._camera.forward(),Mt.u_ecef_origin=t.dQ(It.globeMatrix,Pe.toUnwrapped()),Mt.u_tile_matrix=Float32Array.from(It.globeMatrix),Mt.u_up_vector=Ke),Mt},fi=(C,c,A,E)=>({u_matrix:C,u_emissive_strength:c,u_opacity:A,u_color:E}),Go=(C,c,A,E,M,P,j,K,te)=>t.h(function(ge,ve,Me,Ce,Pe,Qe){const{width:je,height:qe}=Ce.imageManager.getPixelSize(ve),Ke=Math.pow(2,Qe.tileID.overscaledZ),lt=Qe.tileSize*Math.pow(2,Ce.transform.tileZoom)/Ke,dt=lt*(Qe.tileID.canonical.x+Qe.tileID.wrap*Ke),vt=lt*Qe.tileID.canonical.y;return{u_image:0,u_pattern_tl:Me.tl,u_pattern_br:Me.br,u_texsize:[je,qe],u_pattern_size:Me.displaySize,u_pattern_units_to_pixels:Pe?[Ce.transform.width,-1*Ce.transform.height]:[1/t.aw(Qe,1,Ce.transform.tileZoom),1/t.aw(Qe,1,Ce.transform.tileZoom)],u_pixel_coord_upper:[dt>>16,vt>>16],u_pixel_coord_lower:[65535&dt,65535&vt]}}(0,P,j,E,K,te),{u_matrix:C,u_emissive_strength:c,u_opacity:A}),Jo=new Float32Array(t.bx([])),ho=(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe=[0,0,0],Qe)=>{const je=M.style.light,qe=je.properties.get("position"),Ke=[-qe.x,-qe.y,qe.z],lt=t.dJ();je.properties.get("anchor")==="viewport"&&(t.dK(lt,-M.transform.angle),t.dL(Ke,Ke,lt));const dt=ve.alphaMode==="MASK",vt=je.properties.get("color").toNonPremultipliedRenderColor(null),Tt=Ce.paint.get("model-ambient-occlusion-intensity"),Dt=Ce.paint.get("model-color").constantOr(t.am.white).toNonPremultipliedRenderColor(null);return Dt.a=Ce.paint.get("model-color-mix-intensity").constantOr(0),{u_matrix:C,u_lighting_matrix:c,u_normal_matrix:A,u_node_matrix:E||Jo,u_lightpos:Ke,u_lightintensity:je.properties.get("intensity"),u_lightcolor:[vt.r,vt.g,vt.b],u_camera_pos:Pe,u_opacity:P,u_baseTextureIsAlpha:0,u_alphaMask:+dt,u_alphaCutoff:ve.alphaCutoff,u_baseColorFactor:j.toNonPremultipliedRenderColor(null).toArray01(),u_emissiveFactor:K.toNonPremultipliedRenderColor(null).toArray01(),u_metallicFactor:te,u_roughnessFactor:ge,u_baseColorTexture:Xa.BaseColor,u_metallicRoughnessTexture:Xa.MetallicRoughness,u_normalTexture:Xa.Normal,u_occlusionTexture:Xa.Occlusion,u_emissionTexture:Xa.Emission,u_lutTexture:Xa.LUT,u_color_mix:Dt.toArray01(),u_aoIntensity:Tt,u_emissive_strength:Me,u_occlusionTextureTransform:Qe||[0,0,0,0]}},ca=(C,c=Jo,A=Jo)=>({u_matrix:C,u_instance:c,u_node_matrix:A}),Qc={fillExtrusion:C=>({u_matrix:new t.ch(C),u_lightpos:new t.ce(C),u_lightintensity:new t.cf(C),u_lightcolor:new t.ce(C),u_vertical_gradient:new t.cf(C),u_opacity:new t.cf(C),u_edge_radius:new t.cf(C),u_width_scale:new t.cf(C),u_ao:new t.cg(C),u_height_type:new t.cd(C),u_base_type:new t.cd(C),u_tile_id:new t.ce(C),u_zoom_transition:new t.cf(C),u_inv_rot_matrix:new t.ch(C),u_merc_center:new t.cg(C),u_up_dir:new t.ce(C),u_height_lift:new t.cf(C),u_flood_light_color:new t.ce(C),u_vertical_scale:new t.cf(C),u_flood_light_intensity:new t.cf(C),u_ground_shadow_factor:new t.ce(C)}),fillExtrusionDepth:C=>({u_matrix:new t.ch(C),u_edge_radius:new t.cf(C),u_width_scale:new t.cf(C),u_vertical_scale:new t.cf(C),u_height_type:new t.cd(C),u_base_type:new t.cd(C)}),fillExtrusionPattern:C=>({u_matrix:new t.ch(C),u_lightpos:new t.ce(C),u_lightintensity:new t.cf(C),u_lightcolor:new t.ce(C),u_vertical_gradient:new t.cf(C),u_height_factor:new t.cf(C),u_edge_radius:new t.cf(C),u_width_scale:new t.cf(C),u_ao:new t.cg(C),u_height_type:new t.cd(C),u_base_type:new t.cd(C),u_tile_id:new t.ce(C),u_zoom_transition:new t.cf(C),u_inv_rot_matrix:new t.ch(C),u_merc_center:new t.cg(C),u_up_dir:new t.ce(C),u_height_lift:new t.cf(C),u_image:new t.cd(C),u_texsize:new t.cg(C),u_pixel_coord_upper:new t.cg(C),u_pixel_coord_lower:new t.cg(C),u_tile_units_to_pixels:new t.cf(C),u_opacity:new t.cf(C),u_pattern_transition:new t.cf(C)}),fillExtrusionGroundEffect:C=>({u_matrix:new t.ch(C),u_opacity:new t.cf(C),u_ao_pass:new t.cf(C),u_meter_to_tile:new t.cf(C),u_ao:new t.cg(C),u_flood_light_intensity:new t.cf(C),u_flood_light_color:new t.ce(C),u_attenuation:new t.cf(C),u_edge_radius:new t.cf(C),u_fb:new t.cd(C),u_fb_size:new t.cf(C),u_dynamic_offset:new t.cf(C)}),fill:C=>({u_matrix:new t.ch(C),u_emissive_strength:new t.cf(C),u_ground_shadow_factor:new t.ce(C)}),fillPattern:C=>({u_matrix:new t.ch(C),u_emissive_strength:new t.cf(C),u_image:new t.cd(C),u_texsize:new t.cg(C),u_pixel_coord_upper:new t.cg(C),u_pixel_coord_lower:new t.cg(C),u_tile_units_to_pixels:new t.cf(C),u_ground_shadow_factor:new t.ce(C),u_pattern_transition:new t.cf(C)}),fillOutline:C=>({u_matrix:new t.ch(C),u_emissive_strength:new t.cf(C),u_world:new t.cg(C),u_ground_shadow_factor:new t.ce(C)}),fillOutlinePattern:C=>({u_matrix:new t.ch(C),u_emissive_strength:new t.cf(C),u_world:new t.cg(C),u_image:new t.cd(C),u_texsize:new t.cg(C),u_pixel_coord_upper:new t.cg(C),u_pixel_coord_lower:new t.cg(C),u_tile_units_to_pixels:new t.cf(C),u_ground_shadow_factor:new t.ce(C),u_pattern_transition:new t.cf(C)}),building:C=>({u_matrix:new t.ch(C),u_normal_matrix:new t.ch(C),u_opacity:new t.cf(C)}),buildingBloom:C=>({u_matrix:new t.ch(C)}),buildingDepth:C=>({u_matrix:new t.ch(C)}),elevatedStructuresDepth:C=>({u_matrix:new t.ch(C),u_depth_bias:new t.cf(C)}),elevatedStructures:C=>({u_matrix:new t.ch(C),u_ground_shadow_factor:new t.ce(C)}),elevatedStructuresDepthReconstruct:C=>({u_matrix:new t.ch(C),u_camera_pos:new t.ce(C),u_depth_bias:new t.cf(C),u_height_scale:new t.cf(C),u_reset_depth:new t.cf(C)}),circle:t.dT,collisionBox:C=>({u_matrix:new t.ch(C),u_inv_rot_matrix:new t.ch(C),u_camera_to_center_distance:new t.cf(C),u_extrude_scale:new t.cg(C),u_zoom_transition:new t.cf(C),u_merc_center:new t.cg(C),u_tile_id:new t.ce(C)}),collisionCircle:C=>({u_matrix:new t.ch(C),u_inv_matrix:new t.ch(C),u_camera_to_center_distance:new t.cf(C),u_viewport_size:new t.cg(C)}),debug:C=>({u_color:new t.dv(C),u_matrix:new t.ch(C),u_overlay:new t.cd(C),u_overlay_scale:new t.cf(C)}),clippingMask:C=>({u_matrix:new t.ch(C)}),heatmap:C=>({u_extrude_scale:new t.cf(C),u_intensity:new t.cf(C),u_matrix:new t.ch(C),u_inv_rot_matrix:new t.ch(C),u_merc_center:new t.cg(C),u_tile_id:new t.ce(C),u_zoom_transition:new t.cf(C),u_up_dir:new t.ce(C)}),heatmapTexture:C=>({u_image:new t.cd(C),u_color_ramp:new t.cd(C),u_opacity:new t.cf(C)}),hillshade:C=>({u_matrix:new t.ch(C),u_image:new t.cd(C),u_latrange:new t.cg(C),u_light:new t.cg(C),u_shadow:new t.dv(C),u_highlight:new t.dv(C),u_emissive_strength:new t.cf(C),u_accent:new t.dv(C)}),hillshadePrepare:C=>({u_matrix:new t.ch(C),u_image:new t.cd(C),u_dimension:new t.cg(C),u_zoom:new t.cf(C)}),line:t.dS,linePattern:t.dR,raster:C=>({u_matrix:new t.ch(C),u_normalize_matrix:new t.ch(C),u_globe_matrix:new t.ch(C),u_merc_matrix:new t.ch(C),u_grid_matrix:new t.dw(C),u_tl_parent:new t.cg(C),u_scale_parent:new t.cf(C),u_fade_t:new t.cf(C),u_opacity:new t.cf(C),u_image0:new t.cd(C),u_image1:new t.cd(C),u_brightness_low:new t.cf(C),u_brightness_high:new t.cf(C),u_saturation_factor:new t.cf(C),u_contrast_factor:new t.cf(C),u_spin_weights:new t.ce(C),u_perspective_transform:new t.cg(C),u_raster_elevation:new t.cf(C),u_zoom_transition:new t.cf(C),u_merc_center:new t.cg(C),u_cutoff_params:new t.d0(C),u_colorization_mix:new t.d0(C),u_colorization_offset:new t.cf(C),u_color_ramp:new t.cd(C),u_texture_offset:new t.cg(C),u_texture_res:new t.cg(C),u_emissive_strength:new t.cf(C)}),rasterParticle:C=>({u_matrix:new t.ch(C),u_normalize_matrix:new t.ch(C),u_globe_matrix:new t.ch(C),u_merc_matrix:new t.ch(C),u_grid_matrix:new t.dw(C),u_tl_parent:new t.cg(C),u_scale_parent:new t.cf(C),u_fade_t:new t.cf(C),u_opacity:new t.cf(C),u_image0:new t.cd(C),u_image1:new t.cd(C),u_raster_elevation:new t.cf(C),u_zoom_transition:new t.cf(C),u_merc_center:new t.cg(C),u_cutoff_params:new t.d0(C)}),rasterParticleTexture:C=>({u_texture:new t.cd(C),u_opacity:new t.cf(C)}),rasterParticleDraw:C=>({u_particle_texture:new t.cd(C),u_particle_texture_side_len:new t.cf(C),u_tile_offset:new t.cg(C),u_velocity:new t.cd(C),u_color_ramp:new t.cd(C),u_velocity_res:new t.cg(C),u_max_speed:new t.cf(C),u_uv_offset:new t.cg(C),u_data_scale:new t.cg(C),u_data_offset:new t.cf(C),u_particle_pos_scale:new t.cf(C),u_particle_pos_offset:new t.cg(C)}),rasterParticleUpdate:C=>({u_particle_texture:new t.cd(C),u_particle_texture_side_len:new t.cf(C),u_velocity:new t.cd(C),u_velocity_res:new t.cg(C),u_max_speed:new t.cf(C),u_speed_factor:new t.cf(C),u_reset_rate:new t.cf(C),u_rand_seed:new t.cf(C),u_uv_offset:new t.cg(C),u_data_scale:new t.cg(C),u_data_offset:new t.cf(C),u_particle_pos_scale:new t.cf(C),u_particle_pos_offset:new t.cg(C)}),symbol:C=>({u_is_size_zoom_constant:new t.cd(C),u_is_size_feature_constant:new t.cd(C),u_size_t:new t.cf(C),u_size:new t.cf(C),u_camera_to_center_distance:new t.cf(C),u_rotate_symbol:new t.cd(C),u_aspect_ratio:new t.cf(C),u_fade_change:new t.cf(C),u_matrix:new t.ch(C),u_label_plane_matrix:new t.ch(C),u_coord_matrix:new t.ch(C),u_is_text:new t.cd(C),u_elevation_from_sea:new t.cd(C),u_pitch_with_map:new t.cd(C),u_texsize:new t.cg(C),u_texsize_icon:new t.cg(C),u_texture:new t.cd(C),u_texture_icon:new t.cd(C),u_gamma_scale:new t.cf(C),u_device_pixel_ratio:new t.cf(C),u_tile_id:new t.ce(C),u_zoom_transition:new t.cf(C),u_inv_rot_matrix:new t.ch(C),u_merc_center:new t.cg(C),u_camera_forward:new t.ce(C),u_tile_matrix:new t.ch(C),u_up_vector:new t.ce(C),u_ecef_origin:new t.ce(C),u_is_halo:new t.cd(C),u_icon_transition:new t.cf(C),u_color_adj_mat:new t.ch(C),u_scale_factor:new t.cf(C),u_ground_shadow_factor:new t.ce(C),u_inv_matrix:new t.ch(C),u_normal_scale:new t.cf(C)}),background:C=>({u_matrix:new t.ch(C),u_emissive_strength:new t.cf(C),u_opacity:new t.cf(C),u_color:new t.dv(C)}),backgroundPattern:C=>({u_matrix:new t.ch(C),u_emissive_strength:new t.cf(C),u_opacity:new t.cf(C),u_image:new t.cd(C),u_pattern_tl:new t.cg(C),u_pattern_br:new t.cg(C),u_texsize:new t.cg(C),u_pattern_size:new t.cg(C),u_pixel_coord_upper:new t.cg(C),u_pixel_coord_lower:new t.cg(C),u_pattern_units_to_pixels:new t.cg(C)}),terrainRaster:C=>({u_matrix:new t.ch(C),u_image0:new t.cd(C),u_skirt_height:new t.cf(C),u_ground_shadow_factor:new t.ce(C)}),skybox:C=>({u_matrix:new t.ch(C),u_sun_direction:new t.ce(C),u_cubemap:new t.cd(C),u_opacity:new t.cf(C),u_temporal_offset:new t.cf(C)}),skyboxGradient:C=>({u_matrix:new t.ch(C),u_color_ramp:new t.cd(C),u_center_direction:new t.ce(C),u_radius:new t.cf(C),u_opacity:new t.cf(C),u_temporal_offset:new t.cf(C)}),skyboxCapture:C=>({u_matrix_3f:new t.dw(C),u_sun_direction:new t.ce(C),u_sun_intensity:new t.cf(C),u_color_tint_r:new t.d0(C),u_color_tint_m:new t.d0(C),u_luminance:new t.cf(C)}),globeRaster:C=>({u_proj_matrix:new t.ch(C),u_globe_matrix:new t.ch(C),u_normalize_matrix:new t.ch(C),u_merc_matrix:new t.ch(C),u_zoom_transition:new t.cf(C),u_merc_center:new t.cg(C),u_image0:new t.cd(C),u_grid_matrix:new t.dw(C),u_skirt_height:new t.cf(C),u_far_z_cutoff:new t.cf(C),u_frustum_tl:new t.ce(C),u_frustum_tr:new t.ce(C),u_frustum_br:new t.ce(C),u_frustum_bl:new t.ce(C),u_globe_pos:new t.ce(C),u_globe_radius:new t.cf(C),u_viewport:new t.cg(C)}),globeAtmosphere:C=>({u_frustum_tl:new t.ce(C),u_frustum_tr:new t.ce(C),u_frustum_br:new t.ce(C),u_frustum_bl:new t.ce(C),u_horizon:new t.cf(C),u_transition:new t.cf(C),u_fadeout_range:new t.cf(C),u_color:new t.d0(C),u_high_color:new t.d0(C),u_space_color:new t.d0(C),u_temporal_offset:new t.cf(C),u_horizon_angle:new t.cf(C)}),model:C=>({u_matrix:new t.ch(C),u_lighting_matrix:new t.ch(C),u_normal_matrix:new t.ch(C),u_node_matrix:new t.ch(C),u_lightpos:new t.ce(C),u_lightintensity:new t.cf(C),u_lightcolor:new t.ce(C),u_camera_pos:new t.ce(C),u_opacity:new t.cf(C),u_baseColorFactor:new t.d0(C),u_emissiveFactor:new t.d0(C),u_metallicFactor:new t.cf(C),u_roughnessFactor:new t.cf(C),u_baseTextureIsAlpha:new t.cd(C),u_alphaMask:new t.cd(C),u_alphaCutoff:new t.cf(C),u_baseColorTexture:new t.cd(C),u_metallicRoughnessTexture:new t.cd(C),u_normalTexture:new t.cd(C),u_occlusionTexture:new t.cd(C),u_emissionTexture:new t.cd(C),u_lutTexture:new t.cd(C),u_color_mix:new t.d0(C),u_aoIntensity:new t.cf(C),u_emissive_strength:new t.cf(C),u_occlusionTextureTransform:new t.d0(C)}),modelDepth:C=>({u_matrix:new t.ch(C),u_instance:new t.ch(C),u_node_matrix:new t.ch(C)}),groundShadow:C=>({u_matrix:new t.ch(C),u_ground_shadow_factor:new t.ce(C)}),stars:C=>({u_matrix:new t.ch(C),u_up:new t.ce(C),u_right:new t.ce(C),u_intensity_multiplier:new t.cf(C)}),snowParticle:C=>({u_modelview:new t.ch(C),u_projection:new t.ch(C),u_time:new t.cf(C),u_cam_pos:new t.ce(C),u_velocityConeAperture:new t.cf(C),u_velocity:new t.cf(C),u_horizontalOscillationRadius:new t.cf(C),u_horizontalOscillationRate:new t.cf(C),u_boxSize:new t.cf(C),u_billboardSize:new t.cf(C),u_simpleShapeParameters:new t.cg(C),u_screenSize:new t.cg(C),u_thinningCenterPos:new t.cg(C),u_thinningShape:new t.ce(C),u_thinningAffectedRatio:new t.cf(C),u_thinningParticleOffset:new t.cf(C),u_particleColor:new t.d0(C),u_direction:new t.ce(C)}),rainParticle:C=>({u_modelview:new t.ch(C),u_projection:new t.ch(C),u_time:new t.cf(C),u_cam_pos:new t.ce(C),u_texScreen:new t.cd(C),u_velocityConeAperture:new t.cf(C),u_velocity:new t.cf(C),u_boxSize:new t.cf(C),u_rainDropletSize:new t.cg(C),u_distortionStrength:new t.cf(C),u_rainDirection:new t.ce(C),u_color:new t.d0(C),u_screenSize:new t.cg(C),u_thinningCenterPos:new t.cg(C),u_thinningShape:new t.ce(C),u_thinningAffectedRatio:new t.cf(C),u_thinningParticleOffset:new t.cf(C),u_shapeDirectionalPower:new t.cf(C),u_shapeNormalPower:new t.cf(C),u_mode:new t.cf(C)}),vignette:C=>({u_vignetteShape:new t.ce(C),u_vignetteColor:new t.d0(C)}),occlusion:C=>({u_matrix:new t.ch(C),u_anchorPos:new t.ce(C),u_screenSizePx:new t.cg(C),u_occluderSizePx:new t.cg(C),u_color:new t.d0(C)})};class Da{constructor(c,A,E,M){this.id=Da.uniqueIdxCounter,Da.uniqueIdxCounter++,this.context=c;const P=c.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!E,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||M||A.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){this.id=Da.uniqueIdxCounter,Da.uniqueIdxCounter++;const A=this.context.gl;this.context.unbindVAO(),this.bind(),A.bufferSubData(A.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Da.uniqueIdxCounter=0;const Wo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $o{constructor(c,A,E,M,P,j){this.length=A.length,this.attributes=E,this.itemSize=A.bytesPerElement,this.dynamicDraw=M,this.instanceCount=j,this.context=c;const K=c.gl;this.buffer=K.createBuffer(),c.bindVertexBuffer.set(this.buffer),K.bufferData(K.ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?K.DYNAMIC_DRAW:K.STATIC_DRAW),this.dynamicDraw||P||A.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const A=this.context.gl;this.bind(),A.bufferSubData(A.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,A){for(let E=0;E<this.attributes.length;E++){const M=A.attributes[this.attributes[E].name];M!==void 0&&c.enableVertexAttribArray(M)}}setVertexAttribPointers(c,A,E){for(let M=0;M<this.attributes.length;M++){const P=this.attributes[M],j=A.attributes[P.name];j!==void 0&&c.vertexAttribPointer(j,P.components,c[Wo[P.type]],!1,this.itemSize,P.offset+this.itemSize*(E||0))}}setVertexAttribDivisor(c,A,E){for(let M=0;M<this.attributes.length;M++){const P=A.attributes[this.attributes[M].name];P!==void 0&&this.instanceCount&&this.instanceCount>0&&c.vertexAttribDivisor(P,E)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zl{constructor(c,A,E,M,P){this.context=c,this.width=A,this.height=E;const j=this.framebuffer=c.gl.createFramebuffer();M&&(this.colorAttachment=new tf(c,j)),P&&(this.depthAttachmentType=P,this.depthAttachment=P==="renderbuffer"?new ou(c,j):new Bo(c,j))}destroy(){const c=this.context.gl;if(this.colorAttachment){const A=this.colorAttachment.get();A&&c.deleteTexture(A)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const A=this.depthAttachment.get();A&&c.deleteRenderbuffer(A)}else{const A=this.depthAttachment.get();A&&c.deleteTexture(A)}c.deleteFramebuffer(this.framebuffer)}}class hl{constructor(c,A){this.gl=c,this.clearColor=new FA(this),this.clearDepth=new Xf(this),this.clearStencil=new Zf(this),this.colorMask=new Jf(this),this.depthMask=new Pf(this),this.stencilMask=new PA(this),this.stencilFunc=new lp(this),this.stencilOp=new LA(this),this.stencilTest=new Ul(this),this.depthRange=new kl(this),this.depthTest=new cp(this),this.depthFunc=new Gp(this),this.blend=new Xh(this),this.blendFunc=new Zh(this),this.blendColor=new Xu(this),this.blendEquation=new ku(this),this.cullFace=new Jh(this),this.cullFaceSide=new Lf(this),this.frontFace=new ef(this),this.program=new ed(this),this.activeTexture=new Uh(this),this.viewport=new zh(this),this.bindFramebuffer=new up(this),this.bindRenderbuffer=new Ah(this),this.bindTexture=new iu(this),this.bindVertexBuffer=new Ic(this),this.bindElementBuffer=new kA(this),this.bindVertexArrayOES=new td(this),this.pixelStoreUnpack=new su(this),this.pixelStoreUnpackPremultiplyAlpha=new rc(this),this.pixelStoreUnpackFlipY=new Ot(this),this.options=A?Object.assign({},A):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=A&&!!A.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=c.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),this.maxPointSize=c.getParameter(c.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,A,E){return new Da(this,c,A,E)}createVertexBuffer(c,A,E,M,P){return new $o(this,c,A,E,M,P)}createRenderbuffer(c,A,E){const M=this.gl,P=M.createRenderbuffer();return this.bindRenderbuffer.set(P),M.renderbufferStorage(M.RENDERBUFFER,c,A,E),this.bindRenderbuffer.set(null),P}createFramebuffer(c,A,E,M){return new zl(this,c,A,E,M)}clear({color:c,depth:A,stencil:E,colorMask:M}){const P=this.gl;let j=0;c&&(j|=P.COLOR_BUFFER_BIT,this.clearColor.set(c.toNonPremultipliedRenderColor(null)),this.colorMask.set(M||[!0,!0,!0,!0])),A!==void 0&&(j|=P.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(A),this.depthMask.set(!0)),E!==void 0&&(j|=P.STENCIL_BUFFER_BIT,this.clearStencil.set(E),this.stencilMask.set(255)),P.clear(j)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){t.bv(c.blendFunction,Li.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor),c.blendEquation?this.blendEquation.set(c.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(c.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let $a;function ja(C,c,A,E,M,P,j){const K=C.context,te=K.gl,ge=C.transform,ve=[t.aD(ge.center.lng),t.aH(ge.center.lat)],Me=A.layout.get("symbol-placement"),Ce=A.layout.get("text-variable-anchor"),Pe=A.layout.get("icon-rotation-alignment")==="map",Qe=A.layout.get("text-rotation-alignment")==="map",je=Me!=="point",qe=[];let Ke=0,lt=0;for(let Mt=0;Mt<E.length;Mt++){const Pt=E[Mt],dr=c.getTile(Pt),sr=dr.getBucket(A);if(!sr)continue;const Qr=sr.getProjection().createInversionMatrix(ge,Pt.canonical),Br=[],Jr=Ro(Pt,sr,ge),yn=!j&&Pe&&je,vr=j&&Qe&&je,qt=Ce&&sr.hasTextData(),kr=sr.hasIconTextFit()&&qt&&sr.hasIconData(),br=yn||vr||j&&qt||kr,an=sr.projection.name==="globe",ln=an?t.ah(ge.zoom):0;an&&(Br.push("PROJECTION_GLOBE_VIEW"),br&&Br.push("PROJECTED_POS_ON_VIEWPORT"));const dn=C.getOrCreateProgram("collisionBox",{defines:Br});let Mn=Jr;M[0]===0&&M[1]===0||(Mn=C.translatePosMatrix(Jr,dr,M,P));const di=j?sr.textCollisionBox:sr.iconCollisionBox,Ci=sr.collisionCircleArray;if(Ci.length>0){const xi=t.bz(),vi=Mn;t.cM(xi,sr.placementInvProjMatrix,ge.glCoordMatrix),t.cM(xi,xi,sr.placementViewportMatrix),qe.push({circleArray:Ci,circleOffset:lt,transform:vi,invTransform:xi,projection:sr.getProjection()}),Ke+=Ci.length/4,lt=Ke}if(!di)continue;C.terrain&&C.terrain.setupElevationDraw(dr,dn);const ti=an?[Pt.canonical.x,Pt.canonical.y,1<<Pt.canonical.z]:[0,0,0];dn.draw(C,te.LINES,Sn.disabled,Ii.disabled,C.colorModeForRenderPass(),Ai.disabled,jn(Mn,Qr,ge,ln,ve,dr,ti,sr.getProjection()),A.id,di.layoutVertexBuffer,di.indexBuffer,di.segments,null,ge.zoom,null,[di.collisionVertexBuffer,di.collisionVertexBufferExt])}if(!j||!qe.length)return;const dt=C.getOrCreateProgram("collisionCircle"),vt=new t.dU;vt.resize(4*Ke),vt._trim();let Tt=0;for(const Mt of qe)for(let Pt=0;Pt<Mt.circleArray.length/4;Pt++){const dr=4*Pt,sr=Mt.circleArray[dr+0],Qr=Mt.circleArray[dr+1],Br=Mt.circleArray[dr+2],Jr=Mt.circleArray[dr+3];vt.emplace(Tt++,sr,Qr,Br,Jr,0),vt.emplace(Tt++,sr,Qr,Br,Jr,1),vt.emplace(Tt++,sr,Qr,Br,Jr,2),vt.emplace(Tt++,sr,Qr,Br,Jr,3)}(!$a||$a.length<2*Ke)&&($a=function(Mt){const Pt=2*Mt,dr=new t.a_;dr.resize(Pt),dr._trim();for(let sr=0;sr<Pt;sr++){const Qr=6*sr;dr.uint16[Qr+0]=4*sr+0,dr.uint16[Qr+1]=4*sr+1,dr.uint16[Qr+2]=4*sr+2,dr.uint16[Qr+3]=4*sr+2,dr.uint16[Qr+4]=4*sr+3,dr.uint16[Qr+5]=4*sr+0}return dr}(Ke));const Dt=K.createIndexBuffer($a,!0),Vt=K.createVertexBuffer(vt,t.dV.members,!0);for(const Mt of qe){const Pt={u_matrix:Mt.transform,u_inv_matrix:Mt.invTransform,u_camera_to_center_distance:(It=ge).getCameraToCenterDistance(Mt.projection),u_viewport_size:[It.width,It.height]};dt.draw(C,te.TRIANGLES,Sn.disabled,Ii.disabled,C.colorModeForRenderPass(),Ai.disabled,Pt,A.id,Vt,Dt,t.bd.simpleSegment(0,2*Mt.circleOffset,Mt.circleArray.length,Mt.circleArray.length/2),null,ge.zoom)}var It;Vt.destroy(),Dt.destroy()}const Ra=t.bz();function $l(C){const c=C._camera.getWorldToCamera(C.worldSize,1),A=t.az([],c,C.globeMatrix);t.bi(A,A);const E=[0,0,0],M=[0,1,0,0];return t.aA(M,M,A),E[0]=M[0],E[1]=M[1],E[2]=M[2],t.au(E,E),E}function Ja({width:C,height:c,anchor:A,textOffset:E,textScale:M},P){const{horizontalAlign:j,verticalAlign:K}=t.bZ(A),te=-(j-.5)*C,ge=-(K-.5)*c,ve=t.b_(A,E);return new t.P((te/M+ve[0])*P,(ge/M+ve[1])*P)}function Ml(C,c,A,E,M,P,j,K,te,ge){const ve=C.text.placedSymbolArray,Me=C.text.dynamicLayoutVertexArray,Ce=C.icon.dynamicLayoutVertexArray,Pe={},Qe=C.getProjection(),je=eu(j,Qe,M),qe=M.elevation,Ke=Qe.upVectorScale(j.canonical,M.center.lat,M.worldSize).metersToTile;Me.clear();for(let lt=0;lt<ve.length;lt++){const dt=ve.get(lt),{tileAnchorX:vt,tileAnchorY:Tt,numGlyphs:Dt}=dt,Vt=dt.hidden||!dt.crossTileID||C.allowVerticalPlacement&&!dt.placedOrientation?null:E[dt.crossTileID];if(Vt){let It=0,Mt=0,Pt=0;if(qe){const kr=qe?qe.getAtTileOffset(j,vt,Tt):0,[br,an,ln]=Qe.upVector(j.canonical,vt,Tt);It=kr*br*Ke,Mt=kr*an*Ke,Pt=kr*ln*Ke}let[dr,sr,Qr,Br]=go(dt.projectedAnchorX+It,dt.projectedAnchorY+Mt,dt.projectedAnchorZ+Pt,A?je:P);const Jr=fc(M.getCameraToCenterDistance(Qe),Br);let yn=t.bJ(C.textSizeData,te,dt)*Jr/t.bU;A&&(yn*=C.tilePixelRatio/K);const vr=Ja(Vt,yn);A?({x:dr,y:sr,z:Qr}=Qe.projectTilePoint(vt+vr.x,Tt+vr.y,j.canonical),[dr,sr,Qr]=go(dr+It,sr+Mt,Qr+Pt,P)):(c&&vr._rotate(-M.angle),dr+=vr.x,sr+=vr.y,Qr=0);const qt=C.allowVerticalPlacement&&dt.placedOrientation===t.bI.vertical?Math.PI/2:0;for(let kr=0;kr<Dt;kr++)t.bL(Me,dr,sr,Qr,qt);ge&&dt.associatedIconIndex>=0&&(Pe[dt.associatedIconIndex]={x:dr,y:sr,z:Qr,angle:qt})}else ct(Dt,Me)}if(ge){Ce.clear();const lt=C.icon.placedSymbolArray;for(let dt=0;dt<lt.length;dt++){const vt=lt.get(dt),{numGlyphs:Tt}=vt,Dt=Pe[dt];if(vt.hidden||!Dt)ct(Tt,Ce);else{const{x:Vt,y:It,z:Mt,angle:Pt}=Dt;for(let dr=0;dr<Tt;dr++)t.bL(Ce,Vt,It,Mt,Pt)}}C.icon.dynamicLayoutVertexBuffer.updateData(Ce)}C.text.dynamicLayoutVertexBuffer.updateData(Me)}function Zu(C,c,A,E,M,P,j={}){const K=A.paint.get("icon-translate"),te=A.paint.get("text-translate"),ge=A.paint.get("icon-translate-anchor"),ve=A.paint.get("text-translate-anchor"),Me=A.layout.get("icon-rotation-alignment"),Ce=A.layout.get("text-rotation-alignment"),Pe=A.layout.get("icon-pitch-alignment"),Qe=A.layout.get("text-pitch-alignment"),je=A.layout.get("icon-keep-upright"),qe=A.layout.get("text-keep-upright"),Ke=A.paint.get("icon-color-saturation"),lt=A.paint.get("icon-color-contrast"),dt=A.paint.get("icon-color-brightness-min"),vt=A.paint.get("icon-color-brightness-max"),Tt=A.layout.get("symbol-elevation-reference")==="sea",Dt=C.context,Vt=Dt.gl,It=C.transform,Mt=Me==="map",Pt=Ce==="map",dr=Pe==="map",sr=Qe==="map",Qr=A.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Br=!1;const Jr=C.depthModeForSublayer(0,Sn.ReadOnly),yn=new Sn(C.context.gl.LEQUAL,Sn.ReadOnly,C.depthRangeFor3D),vr=[t.aD(It.center.lng),t.aH(It.center.lat)],qt=A.layout.get("text-variable-anchor"),kr=It.projection.name==="globe",br=[],an=[0,-1,0];for(const ln of E){const dn=c.getTile(ln),Mn=dn.getBucket(A);if(!Mn||Mn.projection.name==="mercator"&&kr||Mn.fullyClipped)continue;const di=Mn.projection.name==="globe",Ci=di?t.ah(It.zoom):0,ti=eu(ln,Mn.getProjection(),It),xi=It.calculatePixelsToTileUnitsMatrix(dn),vi=qt&&Mn.hasTextData(),qi=Mn.hasIconTextFit()&&vi&&Mn.hasIconData(),fs=Mn.getProjection().createInversionMatrix(It,ln.canonical),Bs=(1<<dn.tileID.canonical.z)*t.aj/C.transform.worldSize,no=_e=>{let De=[0,0,0];if(_e){const it=C.style.directionalLight,At=C.style.ambientLight;it&&At&&(De=ml(C.style,it,At))}return De},rs=_e=>{It.depthOcclusionForSymbolsAndCircles&&(A.hasInitialOcclusionOpacityProperties||C.terrain)&&(_e.push("DEPTH_D24"),_e.push("DEPTH_OCCLUSION"))},io=()=>{const _e=Mt&&A.layout.get("symbol-placement")!=="point",De=[];rs(De);const it=_e||qi,At=Mn.elevationType==="road",Rt=C.shadowRenderer,zt=At&&dr&&!!Rt&&Rt.enabled,Ir=no(zt),Or=At&&dr&&!C.terrain?yn:Jr,Xr=A.paint.get("icon-image-cross-fade");C.terrainRenderModeElevated()&&dr&&De.push("PITCH_WITH_MAP_TERRAIN"),di&&(De.push("PROJECTION_GLOBE_VIEW"),it&&De.push("PROJECTED_POS_ON_VIEWPORT")),Xr>0&&Mn.hasAnySecondaryIcon&&De.push("ICON_TRANSITION"),!Mn.icon.zOffsetVertexBuffer||At&&C.terrain||De.push("Z_OFFSET"),Ke===0&&lt===0&&dt===0&&vt===1||De.push("COLOR_ADJUSTMENT"),Mn.sdfIcons&&De.push("RENDER_SDF"),zt&&De.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),At&&dr&&!C.terrain&&Mn.icon.orientationVertexBuffer&&De.push("ELEVATED_ROADS");const Fn=Mn.icon.programConfigurations.get(A.id),Vi=C.getOrCreateProgram("symbol",{config:Fn,defines:De}),wi=dn.imageAtlasTexture?dn.imageAtlasTexture.size:[0,0],Ri=Mn.iconSizeData,js=t.bH(Ri,It.zoom),os=dr||!It.isOrthographic,ns=dh(ti,dn.tileID.canonical,dr,Mt,It,Mn.getProjection(),xi),oo=tu(ti,dn.tileID.canonical,dr,Mt,It,Mn.getProjection(),xi),ys=C.translatePosMatrix(oo,dn,K,ge,!0),Xi=C.translatePosMatrix(ti,dn,K,ge),mi=it?Ra:ns,zs=Mt&&!dr&&!_e;let Ys=an;!kr&&!It.mercatorFromTransition||Mt||(Ys=$l(It));const ss=di?Ys:an,Ba=A.getColorAdjustmentMatrix(Ke,lt,dt,vt),ic=Fo(Ri.kind,js,zs,dr,C,Xi,mi,ys,Tt,!1,wi,[0,0],0,ln,Ci,vr,fs,ss,Mn.getProjection(),Ir,Bs,Ba,Xr,null),sc=dn.imageAtlasTexture?dn.imageAtlasTexture:null,ga=A.layout.get("icon-size").constantOr(0)!==1||Mn.iconsNeedLinear,Ol=Mn.sdfIcons||C.options.rotating||C.options.zooming||ga||os?Vt.LINEAR:Vt.NEAREST,Kl=Mn.sdfIcons&&A.paint.get("icon-halo-width").constantOr(1)!==0,Dl=C.terrain&&dr&&_e?t.bi(t.bz(),ns):Ra;if(_e&&Mn.icon){const ea=It.elevation,Ac=ea?ea.getAtTileOffsetFunc(ln,It.center.lat,It.worldSize,Mn.getProjection()):null,uu=Qa(ti,dn.tileID.canonical,dr,Mt,It,Mn.getProjection(),xi);Lu(Mn,ti,C,!1,uu,oo,dr,je,Ac,ln)}return{program:Vi,buffers:Mn.icon,uniformValues:ic,atlasTexture:sc,atlasTextureIcon:null,atlasInterpolation:Ol,atlasInterpolationIcon:null,isSDF:Mn.sdfIcons,hasHalo:Kl,depthMode:Or,tile:dn,renderWithShadows:zt,labelPlaneMatrixInv:Dl}},fo=()=>{const _e=Pt&&A.layout.get("symbol-placement")!=="point",De=[],it=_e||qt||qi,At=Mn.elevationType==="road",Rt=C.shadowRenderer,zt=At&&sr&&!!Rt&&Rt.enabled,Ir=no(zt),Or=At&&sr&&!C.terrain?yn:Jr;C.terrainRenderModeElevated()&&sr&&De.push("PITCH_WITH_MAP_TERRAIN"),di&&(De.push("PROJECTION_GLOBE_VIEW"),it&&De.push("PROJECTED_POS_ON_VIEWPORT")),!Mn.text.zOffsetVertexBuffer||At&&C.terrain||De.push("Z_OFFSET"),Mn.iconsInText&&De.push("RENDER_TEXT_AND_SYMBOL"),De.push("RENDER_SDF"),zt&&De.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),At&&sr&&!C.terrain&&Mn.text.orientationVertexBuffer&&De.push("ELEVATED_ROADS"),rs(De);const Xr=Mn.text.programConfigurations.get(A.id),Fn=C.getOrCreateProgram("symbol",{config:Xr,defines:De});let Vi,wi=[0,0],Ri=null;const js=Mn.textSizeData;Mn.iconsInText&&(wi=dn.imageAtlasTexture?dn.imageAtlasTexture.size:[0,0],Ri=dn.imageAtlasTexture?dn.imageAtlasTexture:null,Vi=sr||!It.isOrthographic||C.options.rotating||C.options.zooming||js.kind==="composite"||js.kind==="camera"?Vt.LINEAR:Vt.NEAREST);const os=dn.glyphAtlasTexture?dn.glyphAtlasTexture.size:[0,0],ns=A.layout.get("text-size-scale-range"),oo=t.ay(C.scaleFactor,ns[0],ns[1]),ys=t.bH(js,It.zoom,oo),Xi=dh(ti,dn.tileID.canonical,sr,Pt,It,Mn.getProjection(),xi),mi=tu(ti,dn.tileID.canonical,sr,Pt,It,Mn.getProjection(),xi),zs=C.translatePosMatrix(mi,dn,te,ve,!0),Ys=C.translatePosMatrix(ti,dn,te,ve),ss=it?Ra:Xi,Ba=Pt&&!sr&&!_e;let ic=an;!kr&&!It.mercatorFromTransition||Pt||(ic=$l(It));const sc=Fo(js.kind,ys,Ba,sr,C,Ys,ss,zs,Tt,!0,os,wi,0,ln,Ci,vr,fs,di?ic:an,Mn.getProjection(),Ir,Bs,null,null,oo),ga=dn.glyphAtlasTexture?dn.glyphAtlasTexture:null,Ol=Vt.LINEAR,Kl=A.paint.get("text-halo-width").constantOr(1)!==0,Dl=C.terrain&&sr&&_e?t.bi(t.bz(),Xi):Ra;if(_e&&Mn.text){const ea=It.elevation,Ac=ea?ea.getAtTileOffsetFunc(ln,It.center.lat,It.worldSize,Mn.getProjection()):null,uu=Qa(ti,dn.tileID.canonical,sr,Pt,It,Mn.getProjection(),xi);Lu(Mn,ti,C,!0,uu,mi,sr,qe,Ac,ln)}return{program:Fn,buffers:Mn.text,uniformValues:sc,atlasTexture:ga,atlasTextureIcon:Ri,atlasInterpolation:Ol,atlasInterpolationIcon:Vi,isSDF:!0,hasHalo:Kl,depthMode:Or,tile:dn,renderWithShadows:zt,labelPlaneMatrixInv:Dl}},ko=Mn.icon.segments.get().length,Cs=Mn.text.segments.get().length,so=ko&&!j.onlyText?io():null,he=Cs&&!j.onlyIcons?fo():null,le=A.paint.get("icon-opacity").constantOr(1),ye=A.paint.get("text-opacity").constantOr(1);if(Qr&&Mn.canOverlap){Br=!0;const _e=le&&!j.onlyText?Mn.icon.segments.get():[],De=ye&&!j.onlyIcons?Mn.text.segments.get():[];for(const it of _e)br.push({segments:new t.bd([it]),sortKey:it.sortKey,state:so});for(const it of De)br.push({segments:new t.bd([it]),sortKey:it.sortKey,state:he})}else j.onlyText||br.push({segments:le?Mn.icon.segments:new t.bd([]),sortKey:0,state:so}),j.onlyIcons||br.push({segments:ye?Mn.text.segments:new t.bd([]),sortKey:0,state:he})}Br&&br.sort((ln,dn)=>ln.sortKey-dn.sortKey);for(const ln of br){const dn=ln.state;if(dn)if(C.terrain?C.terrain.setupElevationDraw(dn.tile,dn.program,{useDepthForOcclusion:It.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:dn.labelPlaneMatrixInv}):C.setupDepthForOcclusion(It.depthOcclusionForSymbolsAndCircles,dn.program),Dt.activeTexture.set(Vt.TEXTURE0),dn.atlasTexture&&dn.atlasTexture.bind(dn.atlasInterpolation,Vt.CLAMP_TO_EDGE,!0),dn.atlasTextureIcon&&(Dt.activeTexture.set(Vt.TEXTURE1),dn.atlasTextureIcon&&dn.atlasTextureIcon.bind(dn.atlasInterpolationIcon,Vt.CLAMP_TO_EDGE,!0)),dn.renderWithShadows&&C.shadowRenderer.setupShadows(dn.tile.tileID.toUnwrapped(),dn.program,"vector-tile"),C.uploadCommonLightUniforms(C.context,dn.program),dn.hasHalo){const Mn=dn.uniformValues;Mn.u_is_halo=1,Mc(dn.buffers,ln.segments,A,C,dn.program,dn.depthMode,M,P,Mn,2),Mn.u_is_halo=0}else{if(dn.isSDF){const Mn=dn.uniformValues;dn.hasHalo&&(Mn.u_is_halo=1,Mc(dn.buffers,ln.segments,A,C,dn.program,dn.depthMode,M,P,Mn,1)),Mn.u_is_halo=0}Mc(dn.buffers,ln.segments,A,C,dn.program,dn.depthMode,M,P,dn.uniformValues,1)}}}function Mc(C,c,A,E,M,P,j,K,te,ge){const ve=[C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer,C.iconTransitioningVertexBuffer,C.globeExtVertexBuffer,C.zOffsetVertexBuffer,C.orientationVertexBuffer];M.draw(E,E.context.gl.TRIANGLES,P,j,K,Ai.disabled,te,A.id,C.layoutVertexBuffer,C.indexBuffer,c,A.paint,E.transform.zoom,C.programConfigurations.get(A.id),ve,ge)}function gh(C,c){const A=1<<C.canonical.z,E=(c.x*A-C.canonical.x-C.wrap*A)*t.aj,M=(c.y*A-C.canonical.y)*t.aj,P=t.e2(c.z,c.y);return t.d2(E,M,P)}function Xn(C,c,A,E,M){if(!A.layout||A.layout.get("fill-elevation-reference")==="none")return;const P=C.context.gl,j=new Sn(C.context.gl.LEQUAL,Sn.ReadWrite,C.depthRangeFor3D),K=new Sn(C.context.gl.GREATER,Sn.ReadWrite,C.depthRangeFor3D),te=function(Pe){const Qe=t.cU(Pe.pitch);let je=.01;return Pe.isOrthographic&&(je=t.ai(1e-4,je,t.cZ(Qe>=Sa?1:Qe/Sa))),2*je}(C.transform),ge=C.transform.getFreeCameraOptions().position,ve="elevatedStructuresDepthReconstruct",Me=C.getOrCreateProgram(ve,{defines:["DEPTH_RECONSTRUCTION"]}),Ce=C.getOrCreateProgram(ve);for(const Pe of E){const Qe=c.getTile(Pe),je=Qe.getBucket(A);if(!je)continue;const qe=je.elevatedStructures;if(!qe)continue;const Ke=je.elevationBufferData.heightRange,lt=gh(Pe.toUnwrapped(),ge),dt=C.translatePosMatrix(Pe.projMatrix,Qe,A.paint.get("fill-translate"),A.paint.get("fill-translate-anchor"));let vt,Tt,Dt,Vt;if(M==="initialize"){if(!Ke||Ke.min>=1||qe.depthSegments.segments[0].primitiveLength===0)continue;vt=jr(dt,lt,te,1,0),Tt=j,Dt=qe.depthSegments,Vt=Me}else if(M==="reset"){if(!Ke||Ke.min>=0||qe.maskSegments.segments[0].primitiveLength===0)continue;vt=jr(dt,lt,0,0,1),Tt=K,Dt=qe.maskSegments,Vt=Me}else if(M==="geometry"){if(qe.depthSegments.segments[0].primitiveLength===0)continue;vt=jr(dt,lt,te,1,0),Tt=j,Dt=qe.depthSegments,Vt=Ce}Vt.draw(C,P.TRIANGLES,Tt,Ii.disabled,Li.disabled,Ai.disabled,vt,A.id,qe.vertexBuffer,qe.indexBuffer,Dt,A.paint,C.transform.zoom)}}function fl(C,c,A){const{painter:E,sourceCache:M,layer:P,coords:j,colorMode:K,elevationType:te,terrainEnabled:ge,pass:ve}=C,Me=E.context.gl,Ce=P.paint.get("fill-pattern"),Pe=P.paint.get("fill-pattern-cross-fade"),Qe=Ce.constantOr(null);let je=te;te!=="road"||c&&!ge||(je="none");const qe=je==="road",Ke=C.painter.shadowRenderer,lt=qe&&!!Ke&&Ke.enabled,dt=new Sn(E.context.gl.LEQUAL,Sn.ReadOnly,E.depthRangeFor3D);let vt=[0,0,0];if(lt){const Vt=E.style.directionalLight,It=E.style.ambientLight;Vt&&It&&(vt=ml(E.style,Vt,It))}const Tt=Ce&&Ce.constantOr(1),Dt=(Vt,It)=>{let Mt,Pt,dr,sr,Qr;It?(Mt=Tt&&!P.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",dr=Me.LINES):(Mt=Tt?"fillPattern":"fill",dr=Me.TRIANGLES);for(const Br of j){const Jr=M.getTile(Br);if(Tt&&!Jr.patternsLoaded())continue;const yn=Jr.getBucket(P);if(!yn)continue;const vr=c?yn.elevationBufferData:yn.bufferData;if(vr.isEmpty())continue;E.prepareDrawTile();const qt=vr.programConfigurations.get(P.id),kr=E.isTileAffectedByFog(Br),br=[],an=[];qe&&(br.push("ELEVATED_ROADS"),an.push(vr.elevatedLayoutVertexBuffer)),lt&&br.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Tt&&(E.context.activeTexture.set(Me.TEXTURE0),Jr.imageAtlasTexture&&Jr.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),qt.updatePaintBuffers());let ln=!1;if(Qe&&Jr.imageAtlas){const ti=Jr.imageAtlas,xi=t.dZ.from(Qe),vi=xi.getPrimary().scaleSelf(t.q.devicePixelRatio).toString(),qi=xi.getSecondary(),fs=ti.patternPositions.get(vi),Bs=qi?ti.patternPositions.get(qi.scaleSelf(t.q.devicePixelRatio).toString()):null;ln=!!fs&&!!Bs,fs&&qt.setConstantPatternPositions(fs,Bs)}Pe>0&&(ln||qt.getPatternTransitionVertexBuffer("fill-pattern"))&&br.push("FILL_PATTERN_TRANSITION");const dn=E.getOrCreateProgram(Mt,{config:qt,overrideFog:kr,defines:br}),Mn=E.translatePosMatrix(Br.projMatrix,Jr,P.paint.get("fill-translate"),P.paint.get("fill-translate-anchor"));lt&&Ke.setupShadows(Jr.tileID.toUnwrapped(),dn,"vector-tile");const di=P.paint.get("fill-emissive-strength");if(It){sr=vr.lineIndexBuffer,Qr=vr.lineSegments;const ti=E.terrain&&E.terrain.renderingToTexture?E.terrain.drapeBufferSize:[Me.drawingBufferWidth,Me.drawingBufferHeight];Pt=Mt==="fillOutlinePattern"&&Tt?Wt(Mn,di,E,Jr,ti,vt,Pe):Lt(Mn,di,ti,vt)}else sr=vr.indexBuffer,Qr=vr.triangleSegments,Pt=Tt?Bt(Mn,di,E,Jr,vt,Pe):xt(Mn,di,vt);E.uploadCommonUniforms(E.context,dn,Br.toUnwrapped());let Ci=Vt;(te==="road"&&!ge||te==="offset")&&(Ci=dt),dn.draw(E,dr,Ci,A||E.stencilModeForClipping(Br),K,Ai.disabled,Pt,P.id,vr.layoutVertexBuffer,sr,Qr,P.paint,E.transform.zoom,qt,an)}};E.renderPass===ve&&Dt(E.depthModeForSublayer(1,E.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly),!1),je==="none"&&E.renderPass==="translucent"&&P.paint.get("fill-antialias")&&Dt(E.depthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly),!0)}function Ju(C,c,A,E,M,P,j,K){A.resetLayerRenderingStats(C);const te=C.context,ge=te.gl,ve=C.transform,Me=A.paint.get("fill-extrusion-pattern"),Ce=A.paint.get("fill-extrusion-pattern-cross-fade"),Pe=Me.constantOr(null),Qe=Me.constantOr(1),je=A.paint.get("fill-extrusion-opacity"),qe=C.style.enable3dLights(),Ke=A.paint.get(qe&&!Qe?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),lt=[A.paint.get("fill-extrusion-ambient-occlusion-intensity"),Ke],dt=A.layout.get("fill-extrusion-edge-radius"),vt=dt>0&&!A.paint.get("fill-extrusion-rounded-roof"),Tt=vt?0:dt,Dt=ve.projection.name==="globe"?t.e5():0,Vt=ve.projection.name==="globe",It=Vt?t.ah(ve.zoom):0,Mt=[t.aD(ve.center.lng),t.aH(ve.center.lat)],Pt=A.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",dr=A.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(Pt?null:A.lut).toArray01().slice(0,3),sr=A.paint.get("fill-extrusion-flood-light-intensity"),Qr=A.paint.get("fill-extrusion-vertical-scale"),Br=A.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Jr=A.paint.get("fill-extrusion-height-alignment"),yn=A.paint.get("fill-extrusion-base-alignment"),vr=Va(C,A.paint.get("fill-extrusion-cutoff-fade-range")),qt=[];let kr;Vt&&qt.push("PROJECTION_GLOBE_VIEW"),lt[0]>0&&qt.push("FAUX_AO"),vt&&qt.push("ZERO_ROOF_RADIUS"),K&&qt.push("HAS_CENTROID"),sr>0&&qt.push("FLOOD_LIGHT"),vr.shouldRenderCutoff&&qt.push("RENDER_CUTOFF"),Br&&qt.push("RENDER_WALL_MODE");const br=C.renderPass==="shadow",an=C.shadowRenderer,ln=br&&!!an,dn=br?Ai.disabled:Ai.backCCW;C.shadowRenderer&&(C.shadowRenderer.useNormalOffset=!0);let Mn=[0,0,0];if(an){const ti=C.style.directionalLight,xi=C.style.ambientLight;ti&&xi&&(Mn=ml(C.style,ti,xi)),br||(qt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),an.useNormalOffset&&qt.push("NORMAL_OFFSET")),kr=qt.concat(["SHADOWS_SINGLE_CASCADE"])}const di=ln?"fillExtrusionDepth":Qe?"fillExtrusionPattern":"fillExtrusion",Ci=A.getLayerRenderingStats();for(const ti of E){const xi=c.getTile(ti),vi=xi.getBucket(A);if(!vi||vi.projection.name!==ve.projection.name)continue;let qi=!1;an&&(qi=an.getMaxCascadeForTile(ti.toUnwrapped())===0);const fs=C.isTileAffectedByFog(ti),Bs=vi.programConfigurations.get(A.id);let no=!1;if(Pe&&xi.imageAtlas){const he=xi.imageAtlas,le=t.dZ.from(Pe),ye=le.getPrimary().scaleSelf(t.q.devicePixelRatio).toString(),_e=le.getSecondary(),De=he.patternPositions.get(ye),it=_e?he.patternPositions.get(_e.scaleSelf(t.q.devicePixelRatio).toString()):null;no=!!De&&!!it,De&&Bs.setConstantPatternPositions(De,it)}Ce>0&&(no||Bs.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&qt.push("FILL_EXTRUSION_PATTERN_TRANSITION");const rs=C.getOrCreateProgram(di,{config:Bs,defines:qi?kr:qt,overrideFog:fs});if(C.terrain&&C.terrain.setupElevationDraw(xi,rs,{useMeterToDem:!0}),!vi.centroidVertexBuffer){const he=rs.attributes.a_centroid_pos;he!==void 0&&ge.vertexAttrib2f(he,0,0)}!br&&an&&an.setupShadows(xi.tileID.toUnwrapped(),rs,"vector-tile"),Qe&&(C.context.activeTexture.set(ge.TEXTURE0),xi.imageAtlasTexture&&xi.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Bs.updatePaintBuffers());const io=A.paint.get("fill-extrusion-vertical-gradient"),fo=1/vi.tileToMeter;let ko;if(br&&an){if(nh(xi.tileID,vi.maxHeight,C))continue;const he=an.calculateShadowPassMatrixFromTile(xi.tileID.toUnwrapped());ko=rt(he,Tt,fo,Qr,Jr,yn)}else{const he=C.translatePosMatrix(ti.expandedProjMatrix,xi,A.paint.get("fill-extrusion-translate"),A.paint.get("fill-extrusion-translate-anchor")),le=ve.projection.createInversionMatrix(ve,ti.canonical);ko=Qe?gt(he,C,io,je,lt,Tt,fo,ti,xi,Dt,Jr,yn,It,Mt,le,dr,Qr,Ce):ke(he,C,io,je,lt,Tt,fo,ti,Dt,Jr,yn,It,Mt,le,dr,Qr,sr,Mn)}C.uploadCommonUniforms(te,rs,ti.toUnwrapped(),null,vr);let Cs=vi.segments;if(ve.projection.name==="mercator"&&!br&&(Cs=vi.getVisibleSegments(xi.tileID,C.terrain,C.transform.getFrustum(0)),!Cs.get().length))continue;if(Ci)if(br)for(const he of Cs.get())Ci.numRenderedVerticesInShadowPass+=he.primitiveLength;else for(const he of Cs.get())Ci.numRenderedVerticesInTransparentPass+=he.primitiveLength;const so=[];(C.terrain||K)&&so.push(vi.centroidVertexBuffer),Vt&&so.push(vi.layoutVertexExtBuffer),Br&&so.push(vi.wallVertexBuffer),rs.draw(C,te.gl.TRIANGLES,M,P,j,dn,ko,A.id,vi.layoutVertexBuffer,vi.indexBuffer,Cs,A.paint,C.transform.zoom,Bs,so)}C.shadowRenderer&&(C.shadowRenderer.useNormalOffset=!1)}class eh{constructor(){this.translate=[0,0],this.translateAnchor="map",this.edgeRadius=0,this.cutoffFadeRange=0}}function Fc(C,c,A,E,M,P,j,K,te,ge,ve,Me,Ce,Pe,Qe,je,qe,Ke,lt,dt){const vt=c.context,Tt=vt.gl,Dt=c.transform,Vt=c.transform.zoom,It=[],Mt=C.translate,Pt=C.translateAnchor,dr=C.edgeRadius,sr=Va(c,C.cutoffFadeRange);ve==="clear"?(It.push("CLEAR_SUBPASS"),dt&&(It.push("CLEAR_FROM_TEXTURE"),vt.activeTexture.set(Tt.TEXTURE0),dt.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE))):ve==="sdf"&&It.push("SDF_SUBPASS"),Ke&&It.push("HAS_CENTROID"),sr.shouldRenderCutoff&&It.push("RENDER_CUTOFF");const Qr=(Br,Jr,yn,vr,qt)=>{const kr=Jr.programConfigurations.get(E.id),br=c.isTileAffectedByFog(Br),an=c.getOrCreateProgram("fillExtrusionGroundEffect",{config:kr,defines:It,overrideFog:br}),ln=((Mn,di,Ci,ti,xi,vi,qi,fs,Bs,no,rs)=>({u_matrix:di,u_opacity:Ci,u_ao_pass:ti?1:0,u_meter_to_tile:xi,u_ao:vi,u_flood_light_intensity:qi,u_flood_light_color:fs,u_attenuation:Bs,u_edge_radius:no,u_fb:0,u_fb_size:rs,u_dynamic_offset:1}))(0,vr,Me,ge,qt,[Ce,Pe*qt],Qe,je,qe,Vt>=17?0:dr*qt,dt?dt.size[0]:0),dn=[];Ke&&dn.push(Jr.hiddenByLandmarkVertexBuffer),c.uploadCommonUniforms(vt,an,Br.toUnwrapped(),null,sr),an.draw(c,vt.gl.TRIANGLES,P,j,K,te,ln,E.id,Jr.vertexBuffer,Jr.indexBuffer,yn,E.paint,Vt,kr,dn)};for(const Br of M){const Jr=A.getTile(Br),yn=Jr.getBucket(E);if(!yn||yn.projection.name!==Dt.projection.name||!yn.groundEffect||yn.groundEffect&&!yn.groundEffect.hasData())continue;const vr=yn.groundEffect,qt=1/yn.tileToMeter;{const kr=c.translatePosMatrix(Br.projMatrix,Jr,Mt,Pt),br=vr.getDefaultSegment();Qr(Br,vr,br,kr,qt)}if(lt)for(let kr=0;kr<4;kr++){const br=t.e3[kr](Br),an=A.getTile(br);if(!an)continue;const ln=an.getBucket(E);if(!ln||ln.projection.name!==Dt.projection.name||!ln.groundEffect||ln.groundEffect&&!ln.groundEffect.hasData())continue;const dn=ln.groundEffect;let Mn,di;kr===0?(Mn=[-t.aj,0,0],di=1):kr===1?(Mn=[t.aj,0,0],di=0):kr===2?(Mn=[0,-t.aj,0],di=3):(Mn=[0,t.aj,0],di=2);const Ci=dn.regionSegments[di];if(!Ci)continue;const ti=new Float32Array(16);t.bo(ti,Br.projMatrix,Mn),Qr(Br,dn,Ci,c.translatePosMatrix(ti,Jr,Mt,Pt),qt)}}}function Mi(C,c,A,E,M,P,j){E.centroidVertexArray.length===0&&E.createCentroidsBuffer();const K=P?P.findDEMTileFor(A):null;if(!(K&&K.dem||j))return;P&&K&&K.dem&&E.selfDEMTileTimestamp!==K.dem._timestamp&&(E.borderDoneWithNeighborZ=[-1,-1,-1,-1],E.selfDEMTileTimestamp=K.dem._timestamp);const te=Ke=>new t.P(Math.ceil((Ke+t.e7)*t.e8),0),ge=Ke=>{const lt=c.getSource().minzoom,dt=Tt=>{const Dt=c.getTileByID(Tt);if(Dt&&Dt.hasData())return Dt.getBucket(M)},vt=[0,-1,1];for(const Tt of vt){if(Ke.overscaledZ+Tt<lt)continue;const Dt=dt(Ke.calculateScaledKey(Ke.overscaledZ+Tt));if(Dt)return Dt}},ve=[0,0,0],Me=(Ke,lt)=>(ve[0]=Math.min(Ke.min.y,lt.min.y),ve[1]=Math.max(Ke.max.y,lt.max.y),ve[2]=t.aj-lt.min.x>Ke.max.x?lt.min.x-t.aj:Ke.max.x,ve),Ce=(Ke,lt)=>(ve[0]=Math.min(Ke.min.x,lt.min.x),ve[1]=Math.max(Ke.max.x,lt.max.x),ve[2]=t.aj-lt.min.y>Ke.max.y?lt.min.y-t.aj:Ke.max.y,ve),Pe=[(Ke,lt)=>Me(Ke,lt),(Ke,lt)=>Me(lt,Ke),(Ke,lt)=>Ce(Ke,lt),(Ke,lt)=>Ce(lt,Ke)],Qe=(Ke,lt,dt,vt,Tt,Dt,Vt)=>{if(!P)return 0;const It=[[Dt?dt:Ke,Dt?Ke:dt,0],[Dt?dt:lt,Dt?lt:dt,0]],Mt=Vt<0?t.aj+Vt:Vt,Pt=[Dt?Mt:(Ke+lt)/2,Dt?(Ke+lt)/2:Mt,0];return dt===0&&Vt<0||dt!==0&&Vt>0?P.getForTilePoints(Tt,[Pt],!0,vt):It.push(Pt),P.getForTilePoints(A,It,!0,K),Math.max(It[0][2],It[1][2],Pt[2])/P.exaggeration()};for(let Ke=0;Ke<4;Ke++){const lt=E.borderFeatureIndices[Ke];if(lt.length===0)continue;const dt=t.e3[Ke](A),vt=ge(dt);if(!(vt&&vt instanceof t.e4))continue;const Tt=P?P.findDEMTileFor(dt):null;if(!(Tt&&Tt.dem||j)||(P&&Tt&&Tt.dem&&E.borderDEMTileTimestamp[Ke]!==Tt.dem._timestamp&&(E.borderDoneWithNeighborZ[Ke]=-1,E.borderDEMTileTimestamp[Ke]=Tt.dem._timestamp),E.borderDoneWithNeighborZ[Ke]===vt.canonical.z))continue;vt.centroidVertexArray.length===0&&vt.createCentroidsBuffer();const Dt=(Ke<2?1:5)-Ke,Vt=vt.borderDoneWithNeighborZ[Dt]!==E.canonical.z,It=vt.borderFeatureIndices[Dt];let Mt=0;if(E.canonical.z!==vt.canonical.z){for(const Pt of lt)E.showCentroid(E.featuresOnBorder[Pt]);if(Vt)for(const Pt of It)vt.showCentroid(vt.featuresOnBorder[Pt]);E.borderDoneWithNeighborZ[Ke]=vt.canonical.z,vt.borderDoneWithNeighborZ[Dt]=E.canonical.z}for(const Pt of lt){const dr=E.featuresOnBorder[Pt],sr=E.centroidData[dr.centroidDataIndex],Qr=dr.borders[Ke];let Br;for(;Mt<It.length;){Br=vt.featuresOnBorder[It[Mt]];const Jr=Br.borders[Dt];if(Jr[1]>Qr[0]+3||Jr[0]>Qr[0]-3)break;vt.showCentroid(Br),Mt++}if(Br&&Mt<It.length){const Jr=Mt;let yn=0;for(;!(Br.borders[Dt][0]>Qr[1]-3)&&(yn++,++Mt!==It.length);)Br=vt.featuresOnBorder[It[Mt]];Br=vt.featuresOnBorder[It[Jr]];let vr=!1;if(yn>=1){const br=Br.borders[Dt];Math.abs(Qr[0]-br[0])<3&&Math.abs(Qr[1]-br[1])<3&&(yn=1,vr=!0,Mt=Jr+1)}else if(yn===0){E.showCentroid(dr);continue}const qt=vt.centroidData[Br.centroidDataIndex];j&&vr&&(((je=sr).flags|(qe=qt).flags)&t.e6?(je.flags|=t.e6,qe.flags|=t.e6):(je.flags&=~t.e6,qe.flags&=~t.e6));const kr=dr.intersectsCount()>1||Br.intersectsCount()>1;if(yn>1)Mt=Jr,sr.centroidXY=qt.centroidXY=new t.P(0,0);else if(Tt&&Tt.dem&&!kr){const br=Pe[Ke](sr,qt),an=Ke%2?t.aj-1:0,ln=Qe(br[0],Math.min(t.aj-1,br[1]),an,Tt,dt,Ke<2,br[2]);sr.centroidXY=qt.centroidXY=te(ln)}else kr?sr.centroidXY=qt.centroidXY=new t.P(0,0):(sr.centroidXY=E.encodeBorderCentroid(dr),qt.centroidXY=vt.encodeBorderCentroid(Br));E.writeCentroidToBuffer(sr),vt.writeCentroidToBuffer(qt)}else E.showCentroid(dr)}E.borderDoneWithNeighborZ[Ke]=vt.canonical.z,vt.borderDoneWithNeighborZ[Dt]=E.canonical.z}var je,qe;(E.needsCentroidUpdate||!E.centroidVertexBuffer&&E.centroidVertexArray.length!==0)&&E.uploadCentroid(C)}const th=[1,0,0],Pd=[0,1,0],rh=[0,0,1];function nh(C,c,A){const E=A.transform,M=A.shadowRenderer;if(!M)return!0;const P=C.toUnwrapped(),j=E.tileSize*M._cascades[A.currentShadowCascade].scale;let K=c;if(E.elevation){const je=E.elevation.getMinMaxForTile(C);je&&(K+=je.max)}const te=[...M.shadowDirection];te[2]=-te[2];const ge=M.computeSimplifiedTileShadowVolume(P,K,j,te);if(!ge)return!1;const ve=[th,Pd,rh,te,[te[0],0,te[2]],[0,te[1],te[2]]],Me=E.projection.name==="globe",Ce=E.scaleZoom(j),Pe=t.cy.fromInvProjectionMatrix(E.invProjMatrix,E.worldSize,Ce,!Me),Qe=M.getCurrentCascadeFrustum();return Pe.intersectsPrecise(ge.vertices,ge.planes,ve)===0||Qe.intersectsPrecise(ge.vertices,ge.planes,ve)===0}function yh(C){const{painter:c,source:A,layer:E,coords:M}=C,P=C.defines,j=c.context,K=c.renderPass==="shadow",te=c.renderPass==="light-beam",ge=c.shadowRenderer;let ve;ge&&(ve=P.concat(["SHADOWS_SINGLE_CASCADE"]));const Me=t.e9(c.transform.center.lat,c.transform.zoom);for(const Ce of M){const Pe=A.getTile(Ce),Qe=Pe.getBucket(E);if(!Qe)continue;let je=!1;ge&&(je=ge.getMaxCascadeForTile(Ce.toUnwrapped())===0);const qe=Qe.programConfigurations.get(E.id);let Ke,lt,dt=c.translatePosMatrix(Ce.expandedProjMatrix,Pe,[0,0],"map");if(dt=t.cP(t.bz(),dt,[1,1,C.verticalScale]),K&&ge){if(nh(Pe.tileID,Qe.maxHeight*Me,c))continue;let vt=ge.calculateShadowPassMatrixFromTile(Pe.tileID.toUnwrapped());vt=t.cP(t.bz(),vt,[1,1,C.verticalScale]),lt=en(vt),Ke=c.getOrCreateProgram("buildingDepth",{config:qe,defines:je?ve:P,overrideFog:!1})}else if(te)Ke=c.getOrCreateProgram("buildingBloom",{config:qe,defines:je?ve:P,overrideFog:!1}),lt=hn(dt);else{const vt=c.transform.calculatePosMatrix(Ce.toUnwrapped(),c.transform.worldSize);t.cP(vt,vt,[1,1,C.verticalScale]);const Tt=t.bz();t.cP(Tt,vt,[1,-1,1/Me]),t.bi(Tt,Tt),t.ea(Tt,Tt),lt=un(dt,Tt),Ke=c.getOrCreateProgram("building",{config:qe,defines:je?ve:P,overrideFog:!1}),ge&&ge.setupShadowsFromMatrix(vt,Ke,!0)}if(c.uploadCommonUniforms(j,Ke,Ce.toUnwrapped(),null,null),te){const vt=Qe.bloomGeometry;Ke.draw(c,j.gl.TRIANGLES,C.depthMode,Ii.disabled,C.blendMode,Ai.disabled,lt,E.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segmentsBucket,E.paint,c.transform.zoom,qe,[vt.layoutAttenuationBuffer,vt.layoutColorBuffer])}else Ke.draw(c,j.gl.TRIANGLES,C.depthMode,Ii.disabled,C.blendMode,K?Ai.disabled:Ai.backCW,lt,E.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,E.paint,c.transform.zoom,qe,[Qe.layoutNormalBuffer,Qe.layoutColorBuffer])}}function yp(C){return[C[0]*t.eb,C[1]*t.eb,C[2]*t.eb,0]}function Of(C,c,A,E,M,P,j,K,te){const ge=E.getSource(),ve=A.globeSharedBuffers;if(!ve)return;let Me,Ce,Pe;if(c&&(Me=E.getTile(c)),ge instanceof t.aP?(Ce=ge.texture,Pe=t.dE(0,0,A.transform)):Me&&c&&(Ce=Me.texture,Pe=t.dE(c.canonical.z,c.canonical.x,A.transform)),!Ce||!Pe)return;C||(Pe=t.cP(t.bz(),Pe,[1,-1,1]));const Qe=A.context,je=Qe.gl,qe=M.paint.get("raster-resampling")==="nearest"?je.NEAREST:je.LINEAR,Ke=A.colorModeForDrapableLayerRenderPass(P),lt=j.defines;lt.push("GLOBE_POLES");const dt=new Sn(je.LEQUAL,Sn.ReadWrite,A.depthRangeFor3D),vt=Float32Array.from(A.transform.expandedFarZProjMatrix),Tt=Float32Array.from(t.bh(t.dD(new t.cA(0,0,0))));A.terrain&&A.terrain.prepareDrawTile(),Qe.activeTexture.set(je.TEXTURE0),Ce.bind(qe,je.CLAMP_TO_EDGE),Qe.activeTexture.set(je.TEXTURE1),Ce.bind(qe,je.CLAMP_TO_EDGE),"useMipmap"in Ce&&Qe.extTextureFilterAnisotropic&&A.transform.pitch>20&&je.texParameterf(je.TEXTURE_2D,Qe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Qe.extTextureFilterAnisotropicMax);const[Dt,Vt,It,Mt]=c?ve.getPoleBuffers(c.canonical.z,!1):ve.getPoleBuffers(0,!0),Pt=M.paint.get("raster-elevation");let dr;C?(dr=Dt,A.renderDefaultNorthPole=Pt!==0):(dr=Vt,A.renderDefaultSouthPole=Pt!==0);const sr=yp(j.mix),Qr=((Jr,yn,vr,qt,kr,br,an,ln,dn,Mn,di,Ci,ti)=>ni(Jr,yn,vr,new Float32Array(16),new Float32Array(9),[0,0],qt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},br,[0,0],ln,2,Mn,di,Ci,1,0,ti))(vt,Tt,Pe,t.ah(A.transform.zoom),0,M,0,Pt,0,sr,j.offset,j.range,P),Br=A.getOrCreateProgram("raster",{defines:lt});A.uploadCommonUniforms(Qe,Br,null),Br.draw(A,je.TRIANGLES,dt,te,Ke,K,Qr,M.id,dr,It,Mt)}function Ld(C){const c=C._nearZ,A=C.projection.farthestPixelDistance(C),E=A-c,M=.2*C.height,P=c+M;return[c,A,(P-M-c)/E,(P-c)/E]}function kd(C,c,A,E){if(C)return c instanceof ks&&C instanceof pl?c.getTextureDescriptor(C,A,!0):{texture:C.texture,mix:yp(E.mix),offset:E.offset,buffer:0,tileSize:1}}var Hl=t.ec([{name:"a_index",type:"Int16",components:1}]);class rf{constructor(c,A,E,M){const P={width:E[0],height:E[1],data:null},j=c.gl;this.targetColorTexture=new t.T(c,P,j.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new t.T(c,P,j.RGBA8,{useMipmap:!1}),this.context=c,this.updateParticleTexture(A,M),this.lastInvalidatedAt=0}updateParticleTexture(c,A){if(this.particleTextureDimension===A.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const E=this.context.gl,M=A.width*A.height;this.particleTexture0=new t.T(this.context,A,E.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new t.T(this.context,A,E.RGBA8,{premultiply:!1,useMipmap:!1});const P=new t.ed;P.reserve(M);for(let j=0;j<M;j++)P.emplaceBack(j);this.particleIndexBuffer=this.context.createVertexBuffer(P,Hl.members,!0),this.particleSegment=t.bd.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=A.width}update(c){return!(this.lastInvalidatedAt<c&&(this.lastInvalidatedAt=t.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function El(C,c,A){if(!C)return null;const E=c.getTextureDescriptor(C,A,!0);if(!E)return null;let{texture:M,mix:P,offset:j,tileSize:K,buffer:te,format:ge}=E;if(!M||!ge)return null;let ve=!1;return ge==="uint32"&&(ve=!0,P[3]=0,P=ri(t.ee,P,[0,A.paint.get("raster-particle-max-speed")]),j=ci(t.ee,j,[0,A.paint.get("raster-particle-max-speed")])),{texture:M,textureOffset:[te/(K+2*te),K/(K+2*te)],tileSize:K,scalarData:ve,scale:P,offset:j,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[ge]]}}function _h(C){const c=C._nearZ,A=C.projection.farthestPixelDistance(C),E=A-c,M=.2*C.height,P=c+M;return[c,A,(P-M-c)/E,(P-c)/E]}const Kp=new t.am(1,0,0,1),Df=new t.am(0,1,0,1),Vc=new t.am(0,0,1,1),Od=new t.am(1,0,1,1),_p=new t.am(0,1,1,1);function Du(C,c,A,E,M,P){for(let j=0;j<A.length;j++)if(M){const ge=new t.am(E.r*.8,E.g*.8,E.b*.8,1);Ao(C,c,A[j],E,-1,-1,P),Ao(C,c,A[j],E,-1,1,P),Ao(C,c,A[j],E,1,1,P),Ao(C,c,A[j],E,1,-1,P),Ao(C,c,A[j],ge,0,0,P)}else Ao(C,c,A[j],E,0,0,P)}function Ao(C,c,A,E,M,P,j){const K=C.context,te=C.transform,ge=K.gl,ve=te.projection.name==="globe",Me=ve?["PROJECTION_GLOBE_VIEW"]:[];let Ce=t.bw(A.projMatrix);if(ve&&t.ah(te.zoom)>0){const sr=t.bg(A.canonical,te),Qr=t.ef(sr);Ce=t.az(new Float32Array(16),te.globeMatrix,Qr),t.az(Ce,te.projMatrix,Ce)}const Pe=t.bz();Pe[12]+=2*M/(t.q.devicePixelRatio*te.width),Pe[13]+=2*P/(t.q.devicePixelRatio*te.height),t.az(Ce,Pe,Ce);const Qe=C.getOrCreateProgram("debug",{defines:Me}),je=c.getTileByID(A.key);C.terrain&&C.terrain.setupElevationDraw(je,Qe);const qe=Sn.disabled,Ke=Ii.disabled,lt=C.colorModeForRenderPass(),dt="$debug";K.activeTexture.set(ge.TEXTURE0),C.emptyTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),ve?je._makeGlobeTileDebugBuffers(C.context,te):je._makeDebugTileBoundsBuffers(C.context,te.projection);const vt=je._tileDebugBuffer||C.debugBuffer,Tt=je._tileDebugIndexBuffer||C.debugIndexBuffer,Dt=je._tileDebugSegments||C.debugSegments;if(Qe.draw(C,ge.LINE_STRIP,qe,Ke,lt,Ai.disabled,Dn(Ce,E.toPremultipliedRenderColor(null)),dt,vt,Tt,Dt,null,null,null,[je._globeTileDebugBorderBuffer]),j){const sr=je.latestRawTileData,Qr=Math.floor((sr&&sr.byteLength||0)/1024);let Br=A.canonical.toString();A.overscaledZ!==A.canonical.z&&(Br+=` => ${A.overscaledZ}`),Br+=` ${je.state}`,Br+=` ${Qr}kb`,function(Jr,yn){Jr.initDebugOverlayCanvas();const vr=Jr.debugOverlayCanvas,qt=Jr.context.gl,kr=Jr.debugOverlayCanvas.getContext("2d");kr.clearRect(0,0,vr.width,vr.height),kr.shadowColor="white",kr.shadowBlur=2,kr.lineWidth=1.5,kr.strokeStyle="white",kr.textBaseline="top",kr.font="bold 36px Open Sans, sans-serif",kr.fillText(yn,5,5),kr.strokeText(yn,5,5),Jr.debugOverlayTexture.update(vr),Jr.debugOverlayTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE)}(C,Br)}const Vt=c.getTile(A).tileSize,It=512/Math.min(Vt,512)*(A.overscaledZ/te.zoom)*.5,Mt=je._tileDebugTextBuffer||C.debugBuffer,Pt=je._tileDebugTextIndexBuffer||C.quadTriangleIndexBuffer,dr=je._tileDebugTextSegments||C.debugSegments;Qe.draw(C,ge.TRIANGLES,qe,Ke,Li.alphaBlended,Ai.disabled,Dn(Ce,t.am.transparent.toPremultipliedRenderColor(null),It),dt,Mt,Pt,dr,null,null,null,[je._globeTileDebugTextBuffer])}function vh(C,c,A,E){nf(C,0,c+A/2,C.transform.width,A,E)}function Rf(C,c,A,E){nf(C,c-A/2,0,A,C.transform.height,E)}function nf(C,c,A,E,M,P){const j=C.context,K=j.gl;K.enable(K.SCISSOR_TEST),K.scissor(c*t.q.devicePixelRatio,A*t.q.devicePixelRatio,E*t.q.devicePixelRatio,M*t.q.devicePixelRatio),j.clear({color:P}),K.disable(K.SCISSOR_TEST)}const id=t.ec([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:sd}=id;function Bl(C,c,A,E){C.emplaceBack(c,A,E)}class Ru{constructor(c){this.vertexArray=new t.eg,this.indices=new t.a_,Bl(this.vertexArray,-1,-1,1),Bl(this.vertexArray,1,-1,1),Bl(this.vertexArray,-1,1,1),Bl(this.vertexArray,1,1,1),Bl(this.vertexArray,-1,-1,-1),Bl(this.vertexArray,1,-1,-1),Bl(this.vertexArray,-1,1,-1),Bl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,sd),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=t.bd.simpleSegment(0,0,36,12)}}function eo(C,c,A,E,M,P){const j=C.context.gl,K=c.paint.get("sky-atmosphere-color"),te=c.paint.get("sky-atmosphere-halo-color"),ge=c.paint.get("sky-atmosphere-sun-intensity"),ve=((Me,Ce,Pe,Qe,je)=>({u_matrix_3f:Me,u_sun_direction:Ce,u_sun_intensity:Pe,u_color_tint_r:[Qe.r,Qe.g,Qe.b,Qe.a],u_color_tint_m:[je.r,je.g,je.b,je.a],u_luminance:5e-5}))(t.ei(t.dJ(),E),M,ge,K.toPremultipliedRenderColor(null),te.toPremultipliedRenderColor(null));j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+P,c.skyboxTexture,0),A.draw(C,j.TRIANGLES,Sn.disabled,Ii.disabled,Li.unblended,Ai.frontCW,ve,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const mn=t.ec([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Jn{constructor(c){const A=new t.ej;A.emplaceBack(-1,1,1,0,0),A.emplaceBack(1,1,1,1,0),A.emplaceBack(1,-1,1,1,1),A.emplaceBack(-1,-1,1,0,1);const E=new t.a_;E.emplaceBack(0,1,2),E.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(A,mn.members),this.indexBuffer=c.createIndexBuffer(E),this.segments=t.bd.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Nu=t.ec([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Po{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Ar{constructor(c){this.colorModeAlphaBlendedWriteRGB=new Li([1,Vo,1,Vo],t.am.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Li([1,0,1,0],t.am.transparent,[!1,!1,!1,!0]),this.params=new Po,this.updateNeeded=!0,c.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),c.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),c.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),c.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(c){const A=c.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Jn(A);const E=this.params.sizeRange,M=this.params.intensityRange,P=function(ve){const Me=t.el(30),Ce=[];for(let Pe=0;Pe<ve;++Pe){const Qe=2*Math.PI*Me(),je=Math.acos(1-2*Me())-.5*Math.PI;Ce.push(t.d2(Math.cos(je)*Math.cos(Qe),Math.cos(je)*Math.sin(Qe),Math.sin(je)))}return Ce}(this.params.starsCount),j=t.el(300),K=new t.ek,te=new t.a_;let ge=0;for(let ve=0;ve<P.length;++ve){const Me=t.c1([],P[ve],200),Ce=Math.max(0,1+.01*E*(1*j()-.5)),Pe=Math.max(0,1+.01*M*(1*j()-.5));K.emplaceBack(Me[0],Me[1],Me[2],-1,-1,Ce,Pe),K.emplaceBack(Me[0],Me[1],Me[2],1,-1,Ce,Pe),K.emplaceBack(Me[0],Me[1],Me[2],1,1,Ce,Pe),K.emplaceBack(Me[0],Me[1],Me[2],-1,1,Ce,Pe),te.emplaceBack(ge+0,ge+1,ge+2),te.emplaceBack(ge+0,ge+2,ge+3),ge+=4}this.starsVx=A.createVertexBuffer(K,Nu.members),this.starsIdx=A.createIndexBuffer(te),this.starsSegments=t.bd.simpleSegment(0,0,K.length,te.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(c,A){const E=c.context,M=E.gl,P=c.transform,j=new Sn(M.LEQUAL,Sn.ReadOnly,[0,1]),K=t.ah(P.zoom),te=c.style.getLut(A.scope),ge=A.properties.get("color-use-theme")==="none",ve=A.properties.get("color").toNonPremultipliedRenderColor(ge?null:te).toArray01(),Me=A.properties.get("high-color-use-theme")==="none",Ce=A.properties.get("high-color").toNonPremultipliedRenderColor(Me?null:te).toArray01(),Pe=A.properties.get("space-color-use-theme")==="none",Qe=A.properties.get("space-color").toNonPremultipliedRenderColor(Pe?null:te).toArray01(),je=5e-4,qe=t.em(A.properties.get("horizon-blend"),0,1,je,.25),Ke=t.dy(c,E,P)&&qe===je?P.worldSize/(2*Math.PI*1.025)-1:P.globeRadius,lt=c.frameCounter/1e3%1,dt=t.ae(P.globeCenterInViewSpace),vt=Math.sqrt(Math.pow(dt,2)-Math.pow(Ke,2)),Tt=Math.acos(vt/dt),Dt=Vt=>{const It=P.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Vt&&It.push("ALPHA_PASS");const Mt=c.getOrCreateProgram("globeAtmosphere",{defines:It}),Pt=((sr,Qr,Br,Jr,yn,vr,qt,kr,br,an,ln,dn)=>({u_frustum_tl:sr,u_frustum_tr:Qr,u_frustum_br:Br,u_frustum_bl:Jr,u_horizon:yn,u_transition:vr,u_fadeout_range:qt,u_color:kr,u_high_color:br,u_space_color:an,u_temporal_offset:ln,u_horizon_angle:dn}))(P.frustumCorners.TL,P.frustumCorners.TR,P.frustumCorners.BR,P.frustumCorners.BL,P.frustumCorners.horizon,K,qe,ve,Ce,Qe,lt,Tt);c.uploadCommonUniforms(E,Mt);const dr=this.atmosphereBuffer;dr&&Mt.draw(c,M.TRIANGLES,j,Ii.disabled,Vt?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Ai.backCW,Pt,Vt?"atmosphere_glow_alpha":"atmosphere_glow",dr.vertexBuffer,dr.indexBuffer,dr.segments)};Dt(!1),Dt(!0)}drawStars(c,A){const E=t.ay(A.properties.get("star-intensity"),0,1);if(E===0)return;const M=c.context,P=M.gl,j=c.transform,K=c.getOrCreateProgram("stars"),te=t.c3([]);t.c5(te,te,-j._pitch),t.c4(te,te,-j.angle),t.c5(te,te,t.al(j._center.lat)),t.en(te,te,-t.al(j._center.lng));const ge=t.c8(new Float32Array(16),te),ve=t.az([],j.starsProjMatrix,ge),Me=t.ei([],ge),Ce=t.eo([],Me),Pe=[0,1,0];t.dL(Pe,Pe,Ce),t.c1(Pe,Pe,this.params.sizeMultiplier);const Qe=[1,0,0];t.dL(Qe,Qe,Ce),t.c1(Qe,Qe,this.params.sizeMultiplier);const je=(qe=Pe,Ke=Qe,lt=E,{u_matrix:Float32Array.from(ve),u_up:qe,u_right:Ke,u_intensity_multiplier:lt});var qe,Ke,lt;c.uploadCommonUniforms(M,K),this.starsVx&&this.starsIdx&&K.draw(c,P.TRIANGLES,Sn.disabled,Ii.disabled,this.colorModeAlphaBlendedWriteRGB,Ai.disabled,je,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}class qp{constructor(){this.visibleTiles=[]}updateBorders(c,A){const E=[],M=[],P=c._getRenderableCoordinates(!1,!0);for(const te of P){const ge=c.getTile(te);if(!ge.hasData())continue;const ve=ge.getBucket(A);ve&&(ve.isEmpty()||(E.push(te.key),M.push({bucket:ve,tileID:te.canonical})))}let j=E.length!==this.visibleTiles.length;if(!j){E.sort();for(let te=0;te<E.length;te++)if(E[te]!==this.visibleTiles[te]){j=!0;break}}if(!j)return;const K=new Set;this.visibleTiles=E,M.sort((te,ge)=>te.tileID.z-ge.tileID.z||te.tileID.x-ge.tileID.x||te.tileID.y-ge.tileID.y);for(const te of M){const ge=new Array,ve=new Array,Me=te.bucket;for(const Ce of Me.featuresOnBorder)K.has(Ce.featureId)?ve.push(Ce.footprintIndex):(K.add(Ce.featureId),ge.push(Ce.footprintIndex));Me.updateFootprintHiddenFlags(ge,t.ep,!1),Me.updateFootprintHiddenFlags(ve,t.ep,!0)}}}function Pc(C,c){const A=[...C],E=c.cameraWorldSizeForFog/c.worldSize,M=t.bx([]);return t.cP(M,M,[E,E,1]),t.az(A,M,A),t.az(A,c.worldToFogMatrix,A),A}function od(C,c,A,E,M){const P=A.material,j=E.context,{baseColorTexture:K,metallicRoughnessTexture:te}=P.pbrMetallicRoughness,{normalTexture:ge,occlusionTexture:ve,emissionTexture:Me}=P;function Ce(Qe,je,qe){if(Qe&&(C.push(je),j.activeTexture.set(j.gl.TEXTURE0+qe),Qe.gfxTexture)){const{minFilter:Ke,magFilter:lt,wrapS:dt,wrapT:vt}=Qe.sampler;Qe.gfxTexture.bindExtraParam(Ke,lt,dt,vt)}}Ce(K,"HAS_TEXTURE_u_baseColorTexture",Xa.BaseColor),Ce(te,"HAS_TEXTURE_u_metallicRoughnessTexture",Xa.MetallicRoughness),Ce(ge,"HAS_TEXTURE_u_normalTexture",Xa.Normal),Ce(ve,"HAS_TEXTURE_u_occlusionTexture",Xa.Occlusion),Ce(Me,"HAS_TEXTURE_u_emissionTexture",Xa.Emission),M&&(M.texture||(M.texture=new t.et(E.context,M.image,[M.image.height,M.image.height,M.image.height],j.gl.RGBA8)),j.activeTexture.set(j.gl.TEXTURE0+Xa.LUT),M.texture&&M.texture.bind(j.gl.LINEAR,j.gl.CLAMP_TO_EDGE),C.push("APPLY_LUT_ON_GPU")),A.texcoordBuffer&&(C.push("HAS_ATTRIBUTE_a_uv_2f"),c.push(A.texcoordBuffer)),A.colorBuffer&&(C.push(A.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),c.push(A.colorBuffer)),A.normalBuffer&&(C.push("HAS_ATTRIBUTE_a_normal_3f"),c.push(A.normalBuffer)),A.pbrBuffer&&(C.push("HAS_ATTRIBUTE_a_pbr"),C.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),c.push(A.pbrBuffer)),P.alphaMode!=="OPAQUE"&&P.alphaMode!=="MASK"||C.push("UNPREMULT_TEXTURE_IN_SHADER"),P.defined||C.push("DIFFUSE_SHADED");const Pe=E.shadowRenderer;Pe&&(C.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Pe.useNormalOffset&&C.push("NORMAL_OFFSET"))}function Gc(C,c,A,E,M,P){const j=A.paint.get("model-opacity").constantOr(1),K=c.context,te=new Sn(c.context.gl.LEQUAL,Sn.ReadWrite,c.depthRangeFor3D),ge=c.transform,ve=C.mesh,Me=ve.material,Ce=Me.pbrMetallicRoughness,Pe=c.style.fog;let Qe;Qe=c.transform.projection.zAxisUnit==="pixels"?[...C.nodeModelMatrix]:t.az([],E.zScaleMatrix,C.nodeModelMatrix),t.az(Qe,E.negCameraPosMatrix,Qe);const je=t.bi([],Qe);t.ea(je,je);const qe=A.paint.get("model-color-use-theme").constantOr("default")==="none",Ke=A.paint.get("model-emissive-strength").constantOr(0),lt=ho(new Float32Array(C.worldViewProjection),new Float32Array(Qe),new Float32Array(je),null,c,j,Ce.baseColorFactor,Me.emissiveFactor,Ce.metallicFactor,Ce.roughnessFactor,Me,Ke,A),dt={defines:[]},vt=[],Tt=c.shadowRenderer;Tt&&(Tt.useNormalOffset=!1),od(dt.defines,vt,ve,c,qe?null:A.lut);let Dt=null;if(Pe){const Mt=Pc(C.nodeModelMatrix,c.transform);if(Dt=new Float32Array(Mt),ge.projection.name!=="globe"){const Pt=ve.aabb.min,dr=ve.aabb.max,[sr,Qr]=Pe.getOpacityForBounds(Mt,Pt[0],Pt[1],dr[0],dr[1]);dt.overrideFog=sr>=_r||Qr>=_r}}const Vt=Va(c,A.paint.get("model-cutoff-fade-range"));Vt.shouldRenderCutoff&&dt.defines.push("RENDER_CUTOFF");const It=c.getOrCreateProgram("model",dt);c.uploadCommonUniforms(K,It,null,Dt,Vt),c.renderPass!=="shadow"&&Tt&&Tt.setupShadowsFromMatrix(C.nodeModelMatrix,It),It.draw(c,K.gl.TRIANGLES,te,M,P,ve.material.doubleSided?Ai.disabled:Ai.backCCW,lt,A.id,ve.vertexBuffer,ve.indexBuffer,ve.segments,A.paint,c.transform.zoom,void 0,vt)}function Dd(C,c,A,E,M,P,j){let K;K=C.projection.name==="globe"?t.er(A,C):[...A],t.az(K,K,c.matrix);const te=t.az([],E,K);if(c.meshes)for(const ge of c.meshes){if(ge.material.alphaMode!=="BLEND"){j.push({mesh:ge,depth:0,modelIndex:M,worldViewProjection:te,nodeModelMatrix:K});continue}const ve=t.ad([],ge.centroid,te);!C.isOrthographic&&ve[2]<=0||P.push({mesh:ge,depth:ve[2],modelIndex:M,worldViewProjection:te,nodeModelMatrix:K})}if(c.children)for(const ge of c.children)Dd(C,ge,A,E,M,P,j)}function sf(C,c,A,E){const M=A.shadowRenderer;if(!M)return;const P=M.getShadowPassDepthMode(),j=M.getShadowPassColorMode(),K=M.calculateShadowPassMatrixFromMatrix(c),te=ca(K);A.getOrCreateProgram("modelDepth",{defines:A._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(A,A.context.gl.TRIANGLES,P,Ii.disabled,j,Ai.backCCW,te,E.id,C.vertexBuffer,C.indexBuffer,C.segments,E.paint,A.transform.zoom,void 0,void 0)}function of(C,c,A){const E=c.updateZoomBasedPaintProperties(),M=function(P,j,K){let te,ge,ve,Me=P.terrain?P.terrain.exaggeration():0;if(P.terrain&&Me>0){const Ce=P.terrain,Pe=Ce.findDEMTileFor(K);Pe&&Pe.dem?te=t.eu.create(Ce,K,Pe):Me=0}if(Me===0&&(j.terrainElevationMin=0,j.terrainElevationMax=0),Me===j.validForExaggeration&&(Me===0||te&&te._demTile&&te._demTile.tileID===j.validForDEMTile.id&&te._dem._timestamp===j.validForDEMTile.timestamp))return!1;for(const Ce in j.instancesPerModel){const Pe=j.instancesPerModel[Ce];for(let Qe=0;Qe<Pe.instancedDataArray.length;++Qe){const je=(te?Me*te.getElevationAt(0|Pe.instancedDataArray.float32[16*Qe],0|Pe.instancedDataArray.float32[16*Qe+1],!0,!0):0)+Pe.instancesEvaluatedElevation[Qe];Pe.instancedDataArray.float32[16*Qe+6]=je,ge=ge?Math.min(j.terrainElevationMin,je):je,ve=ve?Math.max(j.terrainElevationMax,je):je}}return j.terrainElevationMin=ge||0,j.terrainElevationMax=ve||0,j.validForExaggeration=Me,j.validForDEMTile=te&&te._demTile?{id:te._demTile.tileID,timestamp:te._dem._timestamp}:{id:void 0,timestamp:0},!0}(C,c,A);(E||M)&&(c.uploaded=!1,c.upload(C.context))}const To={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new t.d6([0,0,0],[t.aj,t.aj,0])};function ju(C,c){const A=1<<C.canonical.z,E=c.getFreeCameraOptions().position,M=c.elevation,P=C.canonical.x/A,j=(C.canonical.x+1)/A,K=C.canonical.y/A,te=(C.canonical.y+1)/A;let ge=c._centerAltitude;if(M){const Pe=M.getMinMaxForTile(C);Pe&&Pe.max>ge&&(ge=Pe.max)}const ve=t.ay(E.x,P,j)-E.x,Me=t.ay(E.y,K,te)-E.y,Ce=t.cb(ge,c.center.lat)-E.z;return c._zoomFromMercatorZ(Math.sqrt(ve*ve+Me*Me+Ce*Ce))}function Hh(C,c,A,E,M,P,j){const K=C.context,te=C.renderPass==="shadow",ge=C.shadowRenderer,ve=te&&ge?ge.getShadowPassDepthMode():new Sn(K.gl.LEQUAL,Sn.ReadWrite,C.depthRangeFor3D),Me=C.isTileAffectedByFog(P);if(A.meshes)for(const Ce of A.meshes){const Pe=["MODEL_POSITION_ON_GPU"],Qe=[];let je,qe,Ke;E.instancedDataArray.length>20&&Pe.push("INSTANCED_ARRAYS");const lt=Va(C,c.paint.get("model-cutoff-fade-range"));if(lt.shouldRenderCutoff&&Pe.push("RENDER_CUTOFF"),te&&ge)je=C.getOrCreateProgram("modelDepth",{defines:Pe}),qe=ca(j.shadowTileMatrix,j.shadowTileMatrix,Float32Array.from(A.matrix)),Ke=ge.getShadowPassColorMode();else{od(Pe,Qe,Ce,C,c.paint.get("model-color-use-theme").constantOr("default")==="none"?null:c.lut),je=C.getOrCreateProgram("model",{defines:Pe,overrideFog:Me});const vt=Ce.material,Tt=vt.pbrMetallicRoughness,Dt=c.paint.get("model-opacity").constantOr(1),Vt=c.paint.get("model-emissive-strength").constantOr(0);qe=ho(P.expandedProjMatrix,Float32Array.from(A.matrix),new Float32Array(16),null,C,Dt,Tt.baseColorFactor,vt.emissiveFactor,Tt.metallicFactor,Tt.roughnessFactor,vt,Vt,c,M),ge&&(j.shadowUniformsInitialized?je.setShadowUniformValues(K,ge.getShadowUniformValues()):(ge.setupShadows(P.toUnwrapped(),je,"model-tile"),j.shadowUniformsInitialized=!0)),Ke=lt.shouldRenderCutoff||Dt<1||vt.alphaMode!=="OPAQUE"?Li.alphaBlended:Li.unblended}C.uploadCommonUniforms(K,je,P.toUnwrapped(),null,lt);const dt=Ce.material.doubleSided?Ai.disabled:Ai.backCCW;if(E.instancedDataArray.length>20)Qe.push(E.instancedDataBuffer),je.draw(C,K.gl.TRIANGLES,ve,Ii.disabled,Ke,dt,qe,c.id,Ce.vertexBuffer,Ce.indexBuffer,Ce.segments,c.paint,C.transform.zoom,void 0,Qe,E.instancedDataArray.length);else{const vt=te?"u_instance":"u_normal_matrix";for(let Tt=0;Tt<E.instancedDataArray.length;++Tt)qe[vt]=new Float32Array(E.instancedDataArray.arrayBuffer,64*Tt,16),je.draw(C,K.gl.TRIANGLES,ve,Ii.disabled,Ke,dt,qe,c.id,Ce.vertexBuffer,Ce.indexBuffer,Ce.segments,c.paint,C.transform.zoom,void 0,Qe)}}if(A.children)for(const Ce of A.children)Hh(C,c,Ce,E,M,P,j)}const Nf=[1,-1,1];function bh(C,c,A,E){if(!A.modelManager)return!0;const M=A.modelManager;if(!A.shadowRenderer)return!0;const P=A.shadowRenderer,j=c.aabb;let K=!0,te=C.maxHeight;if(te===0){let ve=0;for(const Me in C.instancesPerModel){const Ce=M.getModel(Me,E);Ce?ve=Math.max(ve,Math.max(Math.max(Ce.aabb.max[0],Ce.aabb.max[1]),Ce.aabb.max[2])):K=!1}te=C.maxScale*ve*1.41+C.maxVerticalOffset,K&&(C.maxHeight=te)}j.max[2]=te,j.min[2]+=C.terrainElevationMin,j.max[2]+=C.terrainElevationMax,t.ad(j.min,j.min,c.tileMatrix),t.ad(j.max,j.max,c.tileMatrix);const ge=j.intersects(P.getCurrentCascadeFrustum());return A.currentShadowCascade===0&&(C.isInsideFirstShadowMapFrustum=ge===2),ge===0}function vu(C,c){const A=C.uniformValues.u_cutoff_params[0],E=C.uniformValues.u_cutoff_params[1],M=C.uniformValues.u_cutoff_params[2],P=C.uniformValues.u_cutoff_params[3];return E===A||P===M?1:t.ay(((c-A)/(E-A)-M)/(P-M),0,1)}function ih(C,c,A,E){if(c.pitch<20)return 1;const M=c.getWorldToCameraMatrix();t.az(M,M,C);const P=t.bR(A.min[0],A.min[1],A.min[2],1);let j=t.aA(t.ev(),P,M),K=j,te=j;P[1]=A.max[1],j=t.aA(t.ev(),P,M),K=j[1]<K[1]?j:K,te=j[1]>te[1]?j:te,P[0]=A.max[0],j=t.aA(t.ev(),P,M),K=j[1]<K[1]?j:K,te=j[1]>te[1]?j:te,P[1]=A.min[1],j=t.aA(t.ev(),P,M),K=j[1]<K[1]?j:K,te=j[1]>te[1]?j:te;const ge=t.ay(E[0],0,1),ve=100*c.pixelsPerMeter*t.ay(E[1],0,1),Me=t.ay(E[2],0,1),Ce=t.ew(t.ev(),K,te,ge),Pe=Math.tan(.5*c.fovX),Qe=-Ce[2]*Pe;if(ve===0)return Ce[1]<-Math.abs(Qe)?Me:1;const je=(-Math.abs(Qe)-Ce[1])/ve,qe=(lt,dt,vt)=>(1-vt)*lt+vt*dt,Ke=t.ay(qe(1,Me,je),Me,1);return qe(1,Ke,t.ay((c.pitch-20)/20,0,1))}class Uu{}class xh{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(c,A,E){{const Me=this._storage.get(A.id);if(Me)return Me.lastUsedFrameIdx=c,Me.buf}const M=E.gl,P=M.getBufferParameter(M.ELEMENT_ARRAY_BUFFER,M.BUFFER_SIZE),j=new ArrayBuffer(P),K=new Int16Array(j);M.getBufferSubData(M.ELEMENT_ARRAY_BUFFER,0,new Int16Array(j));const te=new t.ey;for(let Me=0;Me<P/2;Me+=3){const Ce=K[Me],Pe=K[Me+1],Qe=K[Me+2];te.emplaceBack(Ce,Pe),te.emplaceBack(Pe,Qe),te.emplaceBack(Qe,Ce)}const ge=E.bindVertexArrayOES.current,ve=new Uu;return ve.buf=new Da(E,te),ve.lastUsedFrameIdx=c,this._storage.set(A.id,ve),E.bindVertexArrayOES.set(ge),ve.buf}update(c){for(const[A,E]of this._storage)c-E.lastUsedFrameIdx>30&&(E.buf.destroy(),this._storage.delete(A))}destroy(){for(const[c,A]of this._storage)A.buf.destroy(),this._storage.delete(c)}}class wh{constructor(c){this.occluderSize=30,this.depthOffset=-1e-4,c.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),c.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Sh=t.ec([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class bm{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class el{constructor(c,A){this.revealStart=11,this.revealRange=2,c.registerParameter(this,[...A,"Reveal"],"revealStart",{min:0,max:17,step:.05}),c.registerParameter(this,[...A,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const vp=t.ec([{type:"Float32",name:"a_pos_2f",components:2}]);class Rd{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(c,A){const E=c.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const j=new t.ez,K=new t.a_;j.emplaceBack(-1,-1),j.emplaceBack(1,-1),j.emplaceBack(1,1),j.emplaceBack(-1,1),K.emplaceBack(0,1,2),K.emplaceBack(0,2,3),this.vignetteVx=c.context.createVertexBuffer(j,vp.members),this.vignetteIdx=c.context.createIndexBuffer(K)}const M=t.bd.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){c.uploadCommonUniforms(c.context,E);const j={u_vignetteShape:(P={vignetteShape:[A.start,A.range,Math.pow(10,A.fadePower)],vignetteColor:[A.color.r,A.color.g,A.color.b,A.color.a*A.strength]}).vignetteShape,u_vignetteColor:P.vignetteColor};E.draw(c,c.context.gl.TRIANGLES,Sn.disabled,Ii.disabled,Li.alphaBlended,Ai.disabled,j,"vignette",this.vignetteVx,this.vignetteIdx,M)}var P}}class No{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(c,A){const E=c.getFreeCameraOptions().position,M=E.toAltitude(),P=E.toLngLat(),j=t.al(P.lng),K=t.al(P.lat),te=c.pixelsPerMeter/A,ge=j*t.eB,ve=t.eB*Math.log(Math.tan(Math.PI/4+K/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const Me=-this._offsetYPrev+ve,Ce=-this._elevationPrev+M;this._accumulatedOffsetX+=(-this._offsetXPrev+ge)*te,this._accumulatedOffsetY+=Me*te,this._accumulatedElevation+=Ce*te,this._offsetXPrev=ge,this._offsetYPrev=ve,this._elevationPrev=M}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Gs(C,c){return[-(C[0]-Math.floor(C[0]/c)*c),-(C[1]-Math.floor(C[1]/c)*c),-(C[2]-Math.floor(C[2]/c)*c)]}function OA(C){const c=t.el(1323123451230),A=[];for(let E=0;E<C;++E){const M=2*c()-1,P=2*c()-1,j=2*c()-1;A.push(t.d2(M,P,j))}return A}function Wc(C,c,A,E,M){const P=t.ay((M-A)/(E-A),0,1);return(1-P)*C+P*c}class Nd{constructor(c){this._movement=new No,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Rd,this._ppmScaleFactor=c}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(c,A){const E=c.transform;this._movement.update(E,this._ppmScaleFactor);const M=E.starsProjMatrix,P=t.c3([]);t.c5(P,P,t.al(90)-E._pitch),t.c4(P,P,-E.angle);const j=t.c8(new Float32Array(16),P),K=t.eA(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),te=t.ea([],K),ge=t.az([],te,j),ve=Date.now()/1e3;return this._accumulatedTimeFromStart+=(ve-this._prevTime)*A,this._prevTime=ve,{projectionMatrix:M,modelviewMatrix:ge}}}class jd extends Nd{constructor(c){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new el(c.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(c){const A=c.context;if(!this.particlesVx){const E=OA(this.particlesCount),M=new t.eC,P=new t.a_;let j=0;const K=t.el(1323123451230);for(let te=0;te<E.length;++te){const ge=E[te],ve=[2*K()-1,K(),K(),K()];M.emplaceBack(ge[0],ge[1],ge[2],-1,-1,...ve),M.emplaceBack(ge[0],ge[1],ge[2],1,-1,...ve),M.emplaceBack(ge[0],ge[1],ge[2],1,1,...ve),M.emplaceBack(ge[0],ge[1],ge[2],-1,1,...ve),P.emplaceBack(j+0,j+1,j+2),P.emplaceBack(j+0,j+2,j+3),j+=4}this.particlesVx=A.createVertexBuffer(M,Sh.members),this.particlesIdx=A.createIndexBuffer(P)}}draw(c){if(!this._params.overrideStyleParameters&&!c.style.rain)return;const A=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},E=c.transform.zoom;if(A.revealStart>E)return;const M=Wc(0,1,A.revealStart,A.revealStart+A.revealRange,E);if(!this.particlesVx||!this.particlesIdx)return;const P=structuredClone(this._params);let j=[-P.direction.x,P.direction.y,-100];t.au(j,j);const K=structuredClone(this._vignetteParams);K.strength*=M,P.overrideStyleParameters||(P.intensity=c.style.rain.state.density,P.timeFactor=c.style.rain.state.intensity,P.color=structuredClone(c.style.rain.state.color),j=structuredClone(c.style.rain.state.direction),P.screenThinning.intensity=c.style.rain.state.centerThinning,P.dropletSizeX=c.style.rain.state.dropletSize[0],P.dropletSizeYScale=c.style.rain.state.dropletSize[1]/c.style.rain.state.dropletSize[0],P.distortionStrength=100*c.style.rain.state.distortionStrength,K.strength=1,K.color=structuredClone(c.style.rain.state.vignetteColor));const te=this.updateOnRender(c,P.timeFactor),ge=c.context,ve=ge.gl,Me=c.transform;this.screenTexture&&this.screenTexture.size[0]===c.width&&this.screenTexture.size[1]===c.height||(this.screenTexture=new t.T(ge,{width:c.width,height:c.height,data:null},ve.RGBA8)),P.distortionStrength>0&&(ge.activeTexture.set(ve.TEXTURE0),this.screenTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ve.copyTexSubImage2D(ve.TEXTURE_2D,0,0,0,0,0,c.width,c.height));const Ce=c.getOrCreateProgram("rainParticle");c.uploadCommonUniforms(ge,Ce),ge.activeTexture.set(ve.TEXTURE0),this.screenTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const Pe=[P.color.r,P.color.g,P.color.b,P.color.a],Qe=(je,qe)=>{const Ke=Gs(this._movement.getPosition(),je),lt=P.dropletSizeX,dt=P.dropletSizeX*P.dropletSizeYScale,vt=c.width/2,Tt=c.height/2,Dt=Wc(0,P.screenThinning.start,0,1,P.screenThinning.intensity),Vt=Wc(.001,P.screenThinning.range,0,1,P.screenThinning.intensity),It=Wc(0,P.screenThinning.particleOffset,0,1,P.screenThinning.intensity),Mt=(Pt={modelview:te.modelviewMatrix,projection:te.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ke,velocityConeAperture:P.velocityConeAperture,velocity:P.velocity,boxSize:je,rainDropletSize:[lt,dt],distortionStrength:P.distortionStrength,rainDirection:j,color:Pe,screenSize:[Me.width,Me.height],thinningCenterPos:[vt,Tt],thinningShape:[Dt,Vt,Math.pow(10,P.screenThinning.fadePower)],thinningAffectedRatio:P.screenThinning.affectedRatio,thinningParticleOffset:It,shapeDirectionalPower:P.shapeDirPower,shapeNormalPower:P.shapeNormalPower,mode:qe?0:1},{u_modelview:Float32Array.from(Pt.modelview),u_projection:Float32Array.from(Pt.projection),u_time:Pt.time,u_cam_pos:Pt.camPos,u_texScreen:0,u_velocityConeAperture:Pt.velocityConeAperture,u_velocity:Pt.velocity,u_boxSize:Pt.boxSize,u_rainDropletSize:Pt.rainDropletSize,u_distortionStrength:Pt.distortionStrength,u_rainDirection:Pt.rainDirection,u_color:Pt.color,u_screenSize:Pt.screenSize,u_thinningCenterPos:Pt.thinningCenterPos,u_thinningShape:Pt.thinningShape,u_thinningAffectedRatio:Pt.thinningAffectedRatio,u_thinningParticleOffset:Pt.thinningParticleOffset,u_shapeDirectionalPower:Pt.shapeDirectionalPower,u_shapeNormalPower:Pt.shapeNormalPower,u_mode:Pt.mode});var Pt;const dr=Math.round(P.intensity*this.particlesCount),sr=t.bd.simpleSegment(0,0,4*dr,2*dr);Ce.draw(c,ve.TRIANGLES,Sn.disabled,Ii.disabled,Li.alphaBlended,Ai.disabled,Mt,"rain_particles",this.particlesVx,this.particlesIdx,sr)};P.distortionStrength>0&&Qe(P.boxSize,!0),Qe(P.boxSize,!1),this._vignette.draw(c,K)}}const Ud=t.ec([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class DA extends Nd{constructor(c){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new el(c.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(c){const A=c.context;if(!this.particlesVx){const E=OA(this.particlesCount),M=new t.eD,P=new t.a_;let j=0;const K=t.el(1323123451230);for(let te=0;te<E.length;++te){const ge=E[te],ve=K(),Me=K(),Ce=K(),Pe=[te/E.length,ve,Me,Ce],Qe=[K(),K()];M.emplaceBack(ge[0],ge[1],ge[2],-1,-1,...Pe,...Qe),M.emplaceBack(ge[0],ge[1],ge[2],1,-1,...Pe,...Qe),M.emplaceBack(ge[0],ge[1],ge[2],1,1,...Pe,...Qe),M.emplaceBack(ge[0],ge[1],ge[2],-1,1,...Pe,...Qe),P.emplaceBack(j+0,j+1,j+2),P.emplaceBack(j+0,j+2,j+3),j+=4}this.particlesVx=A.createVertexBuffer(M,Ud.members),this.particlesIdx=A.createIndexBuffer(P)}}draw(c){if(!this._params.overrideStyleParameters&&!c.style.snow)return;const A=structuredClone(this._params);let E=[-A.direction.x,A.direction.y,-100];t.au(E,E);const M=structuredClone(this._vignetteParams),P=A.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},j=c.transform.zoom;if(P.revealStart>j)return;const K=Wc(0,1,P.revealStart,P.revealStart+P.revealRange,j);M.strength*=K,A.overrideStyleParameters||(A.intensity=c.style.snow.state.density,A.timeFactor=c.style.snow.state.intensity,A.color=structuredClone(c.style.snow.state.color),E=structuredClone(c.style.snow.state.direction),A.screenThinning.intensity=c.style.snow.state.centerThinning,A.billboardSize=2.79*c.style.snow.state.flakeSize,M.strength=1,M.color=structuredClone(c.style.snow.state.vignetteColor));const te=this.updateOnRender(c,A.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const ge=c.context,ve=ge.gl,Me=c.transform,Ce=c.getOrCreateProgram("snowParticle");c.uploadCommonUniforms(ge,Ce),((Pe,Qe,je)=>{const qe=Gs(this._movement.getPosition(),Pe),Ke=Me.width/2,lt=Me.height/2,dt=Wc(0,je.screenThinning.start,0,1,je.screenThinning.intensity),vt=Wc(.001,je.screenThinning.range,0,1,je.screenThinning.intensity),Tt=Wc(0,je.screenThinning.particleOffset,0,1,je.screenThinning.intensity),Dt=(Vt={modelview:te.modelviewMatrix,projection:te.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:qe,velocityConeAperture:je.velocityConeAperture,velocity:je.velocity,horizontalOscillationRadius:je.horizontalOscillationRadius,horizontalOscillationRate:je.horizontalOscillationRate,boxSize:Pe,billboardSize:1*je.billboardSize,simpleShapeParameters:[je.shapeFadeStart,je.shapeFadePower],screenSize:[Me.width,Me.height],thinningCenterPos:[Ke,lt],thinningShape:[dt,vt,Math.pow(10,je.screenThinning.fadePower)],thinningAffectedRatio:je.screenThinning.affectedRatio,thinningParticleOffset:Tt,color:[je.color.r,je.color.g,je.color.b,je.color.a],direction:E},{u_modelview:Float32Array.from(Vt.modelview),u_projection:Float32Array.from(Vt.projection),u_time:Vt.time,u_cam_pos:Vt.camPos,u_velocityConeAperture:Vt.velocityConeAperture,u_velocity:Vt.velocity,u_horizontalOscillationRadius:Vt.horizontalOscillationRadius,u_horizontalOscillationRate:Vt.horizontalOscillationRate,u_boxSize:Vt.boxSize,u_billboardSize:Vt.billboardSize,u_simpleShapeParameters:Vt.simpleShapeParameters,u_screenSize:Vt.screenSize,u_thinningCenterPos:Vt.thinningCenterPos,u_thinningShape:Vt.thinningShape,u_thinningAffectedRatio:Vt.thinningAffectedRatio,u_thinningParticleOffset:Vt.thinningParticleOffset,u_particleColor:Vt.color,u_direction:Vt.direction});var Vt;const It=Math.round(je.intensity*this.particlesCount),Mt=t.bd.simpleSegment(0,0,4*It,2*It);this.particlesVx&&this.particlesIdx&&Ce.draw(c,ve.TRIANGLES,Sn.disabled,Ii.disabled,Li.alphaBlended,Ai.disabled,Dt,"snow_particles",this.particlesVx,this.particlesIdx,Mt)})(A.boxSize,0,A),this._vignette.draw(c,M)}}const zd={symbol:function(C,c,A,E,M){if(C.renderPass!=="translucent")return;const P=Ii.disabled,j=C.colorModeForRenderPass(),K=A.layout.get("text-variable-anchor"),te=A.layout.get("text-size-scale-range"),ge=t.ay(C.scaleFactor,te[0],te[1]);K&&function(Ce,Pe,Qe,je,qe,Ke,lt,dt){const vt=Pe.transform,Tt=qe==="map",Dt=Ke==="map";for(const Vt of Ce){const It=je.getTile(Vt),Mt=It.getBucket(Qe);if(!Mt||!Mt.text||!Mt.text.segments.get().length)continue;const Pt=t.bH(Mt.textSizeData,vt.zoom,dt),dr=eu(Vt,Mt.getProjection(),vt),sr=vt.calculatePixelsToTileUnitsMatrix(It),Qr=dh(dr,It.tileID.canonical,Dt,Tt,vt,Mt.getProjection(),sr),Br=Mt.hasIconTextFit()&&Mt.hasIconData();Pt&&Ml(Mt,Tt,Dt,lt,vt,Qr,Vt,Math.pow(2,vt.zoom-It.tileID.overscaledZ),Pt,Br)}}(E,C,A,c,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),M,ge);const ve=A.paint.get("icon-opacity").constantOr(1)!==0,Me=A.paint.get("text-opacity").constantOr(1)!==0;A.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(ve||Me)?Zu(C,c,A,E,P,j):(ve&&Zu(C,c,A,E,P,j,{onlyIcons:!0}),Me&&Zu(C,c,A,E,P,j,{onlyText:!0})),c.map.showCollisionBoxes&&(ja(C,c,A,E,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),ja(C,c,A,E,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))},circle:function(C,c,A,E){if(C.renderPass!=="translucent")return;const M=A.paint.get("circle-opacity"),P=A.paint.get("circle-stroke-width"),j=A.paint.get("circle-stroke-opacity"),K=A.layout.get("circle-sort-key").constantOr(1)!==void 0,te=A.paint.get("circle-emissive-strength");if(M.constantOr(1)===0&&(P.constantOr(1)===0||j.constantOr(1)===0))return;const ge=C.context,ve=ge.gl,Me=C.transform,Ce=!(!C.terrain||!C.terrain.enabled),Pe=A.layout.get("circle-elevation-reference"),Qe=C.depthModeForSublayer(0,Sn.ReadOnly),je=new Sn(C.context.gl.LEQUAL,Sn.ReadOnly,C.depthRangeFor3D),qe=Pe==="none"||Ce?Qe:je,Ke=Ii.disabled,lt=C.colorModeForDrapableLayerRenderPass(te),dt=Me.projection.name==="globe",vt=[t.aD(Me.center.lng),t.aH(Me.center.lat)],Tt=[];for(let Vt=0;Vt<E.length;Vt++){const It=E[Vt],Mt=c.getTile(It),Pt=Mt.getBucket(A);if(!Pt||Pt.projection.name!==Me.projection.name)continue;const dr=Pt.programConfigurations.get(A.id),sr=Pt.layoutVertexBuffer,Qr=Pt.globeExtVertexBuffer,Br=Pt.indexBuffer,Jr=t.dW(A),yn=[Qr],vr=C.isTileAffectedByFog(It);dt&&Jr.push("PROJECTION_GLOBE_VIEW"),Jr.push("DEPTH_D24"),C.terrain&&Me.depthOcclusionForSymbolsAndCircles&&Jr.push("DEPTH_OCCLUSION"),Pt.hasElevation&&!C.terrain&&(Jr.push("ELEVATED_ROADS"),yn.push(Pt.elevatedLayoutVertexBuffer));const qt=C.getOrCreateProgram("circle",{config:dr,defines:Jr,overrideFog:vr}),kr=Me.projection.createInversionMatrix(Me,It.canonical),br={programConfiguration:dr,program:qt,layoutVertexBuffer:sr,dynamicBuffers:yn,indexBuffer:Br,uniformValues:t.dX(C,It,Mt,kr,vt,A),tile:Mt};if(K){const an=Pt.segments.get();for(const ln of an)Tt.push({segments:new t.bd([ln]),sortKey:ln.sortKey,state:br})}else Tt.push({segments:Pt.segments,sortKey:0,state:br})}K&&Tt.sort((Vt,It)=>Vt.sortKey-It.sortKey);const Dt={useDepthForOcclusion:Me.depthOcclusionForSymbolsAndCircles};for(const Vt of Tt){const{programConfiguration:It,program:Mt,layoutVertexBuffer:Pt,dynamicBuffers:dr,indexBuffer:sr,uniformValues:Qr,tile:Br}=Vt.state,Jr=Vt.segments;C.terrain&&C.terrain.setupElevationDraw(Br,Mt,Dt),C.uploadCommonUniforms(ge,Mt,Br.tileID.toUnwrapped()),Mt.draw(C,ve.TRIANGLES,qe,Ke,lt,Ai.disabled,Qr,A.id,Pt,sr,Jr,A.paint,Me.zoom,It,dr)}},heatmap:function(C,c,A,E){if(A.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const M=C.context,P=M.gl,j=Ii.disabled,K=new Li([P.ONE,P.ONE,P.ONE,P.ONE],t.am.transparent,[!0,!0,!0,!0]);(function(Pe,Qe,je,qe){const Ke=Pe.gl,lt=Qe.width*qe,dt=Qe.height*qe;Pe.activeTexture.set(Ke.TEXTURE1),Pe.viewport.set([0,0,lt,dt]);let vt=je.heatmapFbo;if(!vt||vt&&(vt.width!==lt||vt.height!==dt)){vt&&vt.destroy();const Tt=Ke.createTexture();Ke.bindTexture(Ke.TEXTURE_2D,Tt),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_WRAP_S,Ke.CLAMP_TO_EDGE),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_WRAP_T,Ke.CLAMP_TO_EDGE),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_MIN_FILTER,Ke.LINEAR),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_MAG_FILTER,Ke.LINEAR),vt=je.heatmapFbo=Pe.createFramebuffer(lt,dt,!0,null),function(Dt,Vt,It,Mt,Pt,dr){const sr=Dt.gl;sr.texImage2D(sr.TEXTURE_2D,0,Dt.extRenderToTextureHalfFloat?sr.RGBA16F:sr.RGBA,Pt,dr,0,sr.RGBA,Dt.extRenderToTextureHalfFloat?sr.HALF_FLOAT:sr.UNSIGNED_BYTE,null),Mt.colorAttachment.set(It)}(Pe,0,Tt,vt,lt,dt)}else Ke.bindTexture(Ke.TEXTURE_2D,vt.colorAttachment.get()),Pe.bindFramebuffer.set(vt.framebuffer)})(M,C,A,C.transform.projection.name==="globe"?.5:.25),M.clear({color:t.am.transparent});const te=C.transform,ge=te.projection.name==="globe",ve=ge?["PROJECTION_GLOBE_VIEW"]:[],Me=ge?Ai.frontCCW:Ai.disabled,Ce=[t.aD(te.center.lng),t.aH(te.center.lat)];for(let Pe=0;Pe<E.length;Pe++){const Qe=E[Pe];if(c.hasRenderableParent(Qe))continue;const je=c.getTile(Qe),qe=je.getBucket(A);if(!qe||qe.projection.name!==te.projection.name)continue;const Ke=C.isTileAffectedByFog(Qe),lt=qe.programConfigurations.get(A.id),dt=C.getOrCreateProgram("heatmap",{config:lt,defines:ve,overrideFog:Ke}),{zoom:vt}=C.transform;C.terrain&&C.terrain.setupElevationDraw(je,dt),C.uploadCommonUniforms(M,dt,Qe.toUnwrapped());const Tt=te.projection.createInversionMatrix(te,Qe.canonical);dt.draw(C,P.TRIANGLES,Sn.disabled,j,K,Me,qr(C,Qe,je,Tt,Ce,vt,A.paint.get("heatmap-intensity")),A.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,A.paint,C.transform.zoom,lt,ge?[qe.globeExtVertexBuffer]:null)}M.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(M,P){const j=M.context,K=j.gl,te=P.heatmapFbo;if(!te)return;j.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,te.colorAttachment.get()),j.activeTexture.set(K.TEXTURE1);let ge=P.colorRampTexture;ge||(ge=P.colorRampTexture=new t.T(j,P.colorRamp,K.RGBA8)),ge.bind(K.LINEAR,K.CLAMP_TO_EDGE),M.getOrCreateProgram("heatmapTexture").draw(M,K.TRIANGLES,Sn.disabled,Ii.disabled,M.colorModeForRenderPass(),Ai.disabled,((ve,Me,Ce,Pe)=>({u_image:0,u_color_ramp:1,u_opacity:Me.paint.get("heatmap-opacity")}))(0,P),P.id,M.viewportBuffer,M.quadTriangleIndexBuffer,M.viewportSegments,P.paint,M.transform.zoom)}(C,A))},line:function(C,c,A,E){if(C.renderPass!=="translucent")return;const M=A.paint.get("line-opacity"),P=A.paint.get("line-width");if(M.constantOr(1)===0||P.constantOr(1)===0)return;const j=A.paint.get("line-emissive-strength"),K=A.paint.get("line-occlusion-opacity"),te=A.layout.get("line-elevation-reference"),ge=A.layout.get("line-width-unit")==="meters",ve=te==="sea",Me=!(!C.terrain||!C.terrain.enabled),Ce=C.context,Pe=Ce.gl;if(A.hasElevatedBuckets&&C.transform.projection.name==="globe")return;const Qe=A.layout.get("line-cross-slope"),je=Qe!==void 0,qe=Qe<1,Ke=C.colorModeForDrapableLayerRenderPass(j),lt=C.terrain&&C.terrain.renderingToTexture,dt=lt?1:t.q.devicePixelRatio,vt=A.paint.get("line-dasharray"),Tt=vt.constantOr(1),Dt=A.layout.get("line-cap"),Vt=vt.constantOr(null),It=Dt.constantOr(null),Mt=A.paint.get("line-pattern"),Pt=Mt.constantOr(1),dr=A.paint.get("line-pattern-cross-fade"),sr=Mt.constantOr(null),Qr=A.paint.get("line-opacity").constantOr(1);let Br=!Pt&&Qr!==1||C.depthOcclusion&&K>0&&K<1;const Jr=A.paint.get("line-gradient"),yn=Pt?"linePattern":"line",vr=t.dY(A);let qt;if(lt&&C.terrain&&C.terrain.clipOrMaskOverlapStencilType()&&(Br=!1),K!==0&&C.depthOcclusion){const ln=A.paint._values["line-opacity"];ln&&ln.value&&ln.value.kind==="constant"?qt=ln.value:t.w(`Occlusion opacity for layer ${A.id} is supported only when line-opacity isn't data-driven.`)}P.value.kind!=="constant"&&P.value.isLineProgressConstant===!1&&vr.push("VARIABLE_LINE_WIDTH");const kr=(ln,dn,Mn,di,Ci,ti)=>{for(const xi of ln){const vi=c.getTile(xi);if(Pt&&!vi.patternsLoaded())continue;const qi=vi.getBucket(A);if(!qi||qi.elevationType!=="none"&&!Ci||qi.elevationType==="none"&&Ci)continue;C.prepareDrawTile();const fs=[...dn],Bs=C.shadowRenderer,no=qi.elevationType==="road"&&!!Bs&&Bs.enabled;let rs=[0,0,0];if(no){const At=C.style.directionalLight,Rt=C.style.ambientLight;At&&Rt&&(rs=ml(C.style,At,Rt)),fs.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const io=qi.programConfigurations.get(A.id);let fo=!1;if(sr&&vi.imageAtlas){const At=t.dZ.from(sr),Rt=At.getPrimary().scaleSelf(dt).toString(),zt=vi.imageAtlas.patternPositions.get(Rt),Ir=At.getSecondary(),Or=Ir?vi.imageAtlas.patternPositions.get(Ir.scaleSelf(dt).toString()):null;fo=!!zt&&!!Or,zt&&io.setConstantPatternPositions(zt,Or)}dr>0&&(fo||io.getPatternTransitionVertexBuffer("line-pattern"))&&fs.push("LINE_PATTERN_TRANSITION");const ko=C.isTileAffectedByFog(xi),Cs=C.getOrCreateProgram(yn,{config:io,defines:fs,overrideFog:ko});if(!Pt&&Vt&&It&&vi.lineAtlas){const At=vi.lineAtlas.getDash(Vt,It);At&&io.setConstantPatternPositions(At)}no&&Bs.setupShadows(vi.tileID.toUnwrapped(),Cs,"vector-tile");let[so,he]=A.paint.get("line-trim-offset");(It==="round"||It==="square")&&so!==he&&(so===0&&(so-=1),he===1&&(he+=1));const le=lt?xi.projMatrix:null,ye=ge?1/qi.tileToMeter/t.aw(vi,1,C.transform.zoom):1,_e=ge?1/qi.tileToMeter/t.aw(vi,1,Math.floor(C.transform.zoom)):1,De=Pt?t.d_(C,vi,A,le,dt,ye,_e,[so,he],rs,dr):t.d$(C,vi,A,le,qi.lineClipsArray.length,dt,ye,_e,[so,he],rs);if(Jr){const At=qi.gradients[A.id];let Rt=At.texture;if(A.gradientVersion!==At.version){let zt=256;if(A.stepInterpolant){const Ir=c.getSource().maxzoom,Or=xi.canonical.z===Ir?Math.ceil(1<<C.transform.maxZoom-xi.canonical.z):1;zt=t.ay(t.e0(qi.maxLineLength/t.aj*1024*Or),256,Ce.maxTextureSize)}At.gradient=t.e1({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:zt,image:At.gradient||void 0,clips:qi.lineClipsArray}),At.texture?At.texture.update(At.gradient):At.texture=new t.T(Ce,At.gradient,Pe.RGBA8),At.version=A.gradientVersion,Rt=At.texture}Ce.activeTexture.set(Pe.TEXTURE1),Rt.bind(A.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}Tt&&(Ce.activeTexture.set(Pe.TEXTURE0),vi.lineAtlasTexture&&vi.lineAtlasTexture.bind(Pe.LINEAR,Pe.REPEAT),io.updatePaintBuffers()),Pt&&(Ce.activeTexture.set(Pe.TEXTURE0),vi.imageAtlasTexture&&vi.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),io.updatePaintBuffers()),Ci&&!ve&&C.terrain.setupElevationDraw(vi,Cs),C.uploadCommonUniforms(Ce,Cs,xi.toUnwrapped());const it=At=>{qt!=null&&(qt.value=Qr*K),Cs.draw(C,Pe.TRIANGLES,Mn,At,Ke,Ai.disabled,De,A.id,qi.layoutVertexBuffer,qi.indexBuffer,qi.segments,A.paint,C.transform.zoom,io,[qi.layoutVertexBuffer2,qi.patternVertexBuffer,qi.zOffsetVertexBuffer]),qt!=null&&(qt.value=Qr)};if(Br&&!Ci){const At=C.stencilModeForClipping(xi).ref;At===0&&lt&&Ce.clear({stencil:0});const Rt={func:Pe.EQUAL,mask:255};De.u_alpha_discard_threshold=.8,it(new Ii(Rt,At,255,Pe.KEEP,Pe.KEEP,Pe.INVERT)),De.u_alpha_discard_threshold=0,it(new Ii(Rt,At,255,Pe.KEEP,Pe.KEEP,Pe.KEEP))}else De.u_alpha_discard_threshold=Br&&Ci&&ti?.8:0,it(Ci?di:C.stencilModeForClipping(xi))}};let br=C.depthModeForSublayer(0,Sn.ReadOnly);const an=new Sn(C.depthOcclusion?Pe.GREATER:Pe.LEQUAL,Sn.ReadOnly,C.depthRangeFor3D);if(A.hasNonElevatedBuckets){const ln=!lt&&C.terrain;K!==0&&ln?t.w(`Occlusion opacity for layer ${A.id} is supported on terrain only if the layer has line-z-offset enabled.`):ln?t.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${A.id}.`):kr(E,vr,br,Ii.disabled,!1,!0)}if(A.hasElevatedBuckets){te==="hd-road-markup"?Me||(br=an,vr.push("ELEVATED_ROADS")):(vr.push("ELEVATED"),br=an,je&&vr.push(qe?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),ve&&vr.push("ELEVATION_REFERENCE_SEA"));const ln=Br?C.stencilModeFor3D():Ii.disabled;C.forceTerrainMode=!0,kr(E,vr,br,ln,!0,!0),Br&&kr(E,vr,br,ln,!0,!1),C.forceTerrainMode=!1}Br&&(C.resetStencilClippingMasks(),lt&&Ce.clear({stencil:0})),K===0||C.depthOcclusion||lt||C.layersWithOcclusionOpacity.push(C.currentLayer)},fill:function(C,c,A,E){const M=A.paint.get("fill-color"),P=A.paint.get("fill-opacity");if(P.constantOr(1)===0)return;const j=A.paint.get("fill-emissive-strength"),K=C.colorModeForDrapableLayerRenderPass(j),te=A.paint.get("fill-pattern"),ge=C.opaquePassEnabledForLayer()&&!te.constantOr(1)&&M.constantOr(t.am.transparent).a===1&&P.constantOr(0)===1?"opaque":"translucent";let ve="none";A.layout.get("fill-elevation-reference")!=="none"?ve="road":A.paint.get("fill-z-offset").constantOr(1)!==0&&(ve="offset");const Me=!(!C.terrain||!C.terrain.enabled),Ce={painter:C,sourceCache:c,layer:A,coords:E,colorMode:K,elevationType:ve,terrainEnabled:Me,pass:ge};if(C.renderPass!=="shadow")if(ve!=="offset"){if(fl(Ce,!1),ve==="road"){const Pe=!Me&&C.renderPass==="translucent";Pe&&Xn(C,c,A,E,"geometry"),fl(Ce,!0,Ii.disabled),Pe&&function(Qe){const{painter:je,sourceCache:qe,layer:Ke,coords:lt,colorMode:dt}=Qe,vt=je.context.gl,Tt=Qe.painter.shadowRenderer,Dt=!!Tt&&Tt.enabled,Vt=new Sn(je.context.gl.LEQUAL,Sn.ReadOnly,je.depthRangeFor3D);let It=[0,0,0];if(Dt){const Pt=je.style.directionalLight,dr=je.style.ambientLight;Pt&&dr&&(It=ml(je.style,Pt,dr))}const Mt=Pt=>{for(const dr of lt){const sr=qe.getTile(dr),Qr=sr.getBucket(Ke);if(!Qr)continue;const Br=Qr.elevatedStructures;if(!Br)continue;let Jr,yn;if(Pt?(Jr=Br.renderableBridgeSegments,yn=Br.bridgeProgramConfigurations.get(Ke.id)):(Jr=Br.renderableTunnelSegments,yn=Br.tunnelProgramConfigurations.get(Ke.id)),!Jr||Jr.segments[0].primitiveLength===0)continue;yn.updatePaintBuffers(),je.prepareDrawTile();const vr=je.isTileAffectedByFog(dr),qt=[];Dt&&qt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const kr=je.getOrCreateProgram("elevatedStructures",{config:yn,overrideFog:vr,defines:qt}),br=je.translatePosMatrix(dr.projMatrix,sr,Ke.paint.get("fill-translate"),Ke.paint.get("fill-translate-anchor"));Dt&&Tt.setupShadows(sr.tileID.toUnwrapped(),kr,"vector-tile");const an=ar(br,It);je.uploadCommonUniforms(je.context,kr,dr.toUnwrapped()),kr.draw(je,vt.TRIANGLES,Vt,Ii.disabled,dt,Ai.backCCW,an,Ke.id,Br.vertexBuffer,Br.indexBuffer,Jr,Ke.paint,je.transform.zoom,yn,[Br.vertexBufferNormal])}};Mt(!0),Mt(!1)}(Ce)}}else fl(Ce,!1,C.stencilModeFor3D());else C.shadowRenderer&&ve==="road"&&!Me&&function(Pe){const{painter:Qe,sourceCache:je,layer:qe,coords:Ke}=Pe,lt=Qe.context.gl,dt=Pe.painter.shadowRenderer;for(const vt of Ke){const Tt=je.getTile(vt),Dt=Tt.getBucket(qe);if(!Dt)continue;const Vt=Dt.elevatedStructures;if(!Vt||!Vt.shadowCasterSegments||Vt.shadowCasterSegments.segments[0].primitiveLength===0)continue;Qe.prepareDrawTile();const It=Dt.bufferData.programConfigurations.get(qe.id),Mt=Qe.isTileAffectedByFog(vt),Pt=Qe.getOrCreateProgram("elevatedStructuresDepth",{config:It,overrideFog:Mt}),dr=dt.calculateShadowPassMatrixFromTile(Tt.tileID.toUnwrapped());Qe.uploadCommonUniforms(Qe.context,Pt,vt.toUnwrapped());const sr={u_matrix:dr,u_depth_bias:0};Pt.draw(Qe,lt.TRIANGLES,dt.getShadowPassDepthMode(),Ii.disabled,dt.getShadowPassColorMode(),Ai.disabled,sr,qe.id,Vt.vertexBuffer,Vt.indexBuffer,Vt.shadowCasterSegments,qe.paint,Qe.transform.zoom,It)}}(Ce)},"fill-extrusion":function(C,c,A,E){const M=A.paint.get("fill-extrusion-opacity"),P=C.context,j=P.gl,K=C.terrain,te=K&&K.renderingToTexture;if(M===0)return;const ge=C.conflationActive&&C.style.isLayerClipped(A,c.getSource()),ve=C.style.order.indexOf(A.fqid);if(ge&&function(Me,Ce,Pe,Qe,je){for(const qe of Qe){const Ke=Ce.getTile(qe).getBucket(Pe);Ke&&(Ke.updateReplacement(qe,Me.replacementSource,je),Ke.uploadCentroid(Me.context))}}(C,c,A,E,ve),K||ge)for(const Me of E){const Ce=c.getTile(Me).getBucket(A);Ce&&Mi(C.context,c,Me,Ce,A,K,ge)}if(C.renderPass==="shadow"&&C.shadowRenderer){const Me=C.shadowRenderer;if(K&&M<.65&&A._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof t.ab)return;const Ce=Me.getShadowPassDepthMode(),Pe=Me.getShadowPassColorMode();Ju(C,c,A,E,Ce,Ii.disabled,Pe,ge)}else if(C.renderPass==="translucent"){const Me=!A.paint.get("fill-extrusion-pattern").constantOr(1),Ce=A.paint.get("fill-extrusion-color").constantOr(t.am.white);if(!te&&Ce.a!==0){const Pe=new Sn(C.context.gl.LEQUAL,Sn.ReadWrite,C.depthRangeFor3D);M===1&&Me?Ju(C,c,A,E,Pe,Ii.disabled,Li.unblended,ge):(Ju(C,c,A,E,Pe,Ii.disabled,Li.disabled,ge),Ju(C,c,A,E,Pe,C.stencilModeFor3D(),C.colorModeForRenderPass(),ge),C.resetStencilClippingMasks())}if(C.style.enable3dLights()&&Me&&(!K&&C.transform.projection.name!=="globe"||te)){const Pe=A.paint.get("fill-extrusion-opacity"),Qe=A.paint.get("fill-extrusion-ambient-occlusion-intensity"),je=A.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),qe=A.paint.get("fill-extrusion-flood-light-intensity"),Ke=A.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",lt=A.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(Ke?null:A.lut).toArray01().slice(0,3),dt=Qe>0&&je>0,vt=qe>0,Tt=(It,Mt,Pt)=>(1-Pt)*It+Pt*Mt,Dt=new eh;Dt.translate=A.paint.get("fill-extrusion-translate"),Dt.translateAnchor=A.paint.get("fill-extrusion-translate-anchor"),Dt.edgeRadius=A.layout.get("fill-extrusion-edge-radius"),Dt.cutoffFadeRange=A.paint.get("fill-extrusion-cutoff-fade-range");const Vt=It=>{const Mt=C.depthModeForSublayer(1,Sn.ReadOnly,j.LEQUAL,!0),Pt=A.paint.get(It?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),dr=Tt(.1,3,Pt),sr=C._showOverdrawInspector;if(!sr){const Qr=new Ii({func:j.ALWAYS,mask:255},255,255,j.KEEP,j.KEEP,j.REPLACE),Br=new Li([j.ONE,j.ONE,j.ONE,j.ONE],t.am.transparent,[!1,!1,!1,!0],j.MIN);Fc(Dt,C,c,A,E,Mt,Qr,Br,Ai.disabled,It,"sdf",Pe,Qe,je,qe,lt,dr,ge,!1)}{const Qr=sr?Ii.disabled:new Ii({func:j.EQUAL,mask:255},255,255,j.KEEP,j.DECR,j.DECR),Br=sr?C.colorModeForRenderPass():new Li([j.ONE_MINUS_DST_ALPHA,j.DST_ALPHA,j.ONE,j.ONE],t.am.transparent,[!0,!0,!0,!0]);Fc(Dt,C,c,A,E,Mt,Qr,Br,Ai.disabled,It,"color",Pe,Qe,je,qe,lt,dr,ge,!1)}};if(te){const It=(Mt,Pt,dr)=>{const sr=C.depthModeForSublayer(1,Sn.ReadOnly,j.LEQUAL,!1),Qr=A.paint.get(Mt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Br=Tt(.1,3,Qr);{const Jr=new Li([j.ONE,j.ONE,j.ONE,j.ONE],t.am.transparent,[!1,!1,!1,!0]);Fc(Dt,C,c,A,E,sr,Ii.disabled,Jr,Ai.disabled,Mt,"clear",Pe,Qe,je,qe,lt,Br,ge,Pt)}{const Jr=new Ii({func:j.ALWAYS,mask:255},255,255,j.KEEP,j.KEEP,j.REPLACE),yn=new Li([j.ONE,j.ONE,j.ONE,j.ONE],t.am.transparent,[!1,!1,!1,!0],j.MIN);Fc(Dt,C,c,A,E,sr,Jr,yn,Ai.disabled,Mt,"sdf",Pe,Qe,je,qe,lt,Br,ge,Pt)}{const Jr=Mt?j.ZERO:j.ONE_MINUS_DST_ALPHA,yn=new Ii({func:j.EQUAL,mask:255},255,255,j.KEEP,j.DECR,j.DECR),vr=new Li([Jr,j.DST_ALPHA,j.ONE_MINUS_DST_ALPHA,j.ZERO],t.am.transparent,[!0,!0,!0,!0]);Fc(Dt,C,c,A,E,sr,yn,vr,Ai.disabled,Mt,"color",Pe,Qe,je,qe,lt,Br,ge,Pt)}{const Jr=new Li([j.ONE,j.ONE,j.ONE,Mt?j.ZERO:j.ONE],t.am.transparent,[!1,!1,!1,!0],Mt?j.FUNC_ADD:j.MAX);Fc(Dt,C,c,A,E,sr,Ii.disabled,Jr,Ai.disabled,Mt,"clear",Pe,Qe,je,qe,lt,Br,ge,Pt,dr)}};if(dt||vt){let Mt;if(C.prepareDrawTile(),K){const Pt=K.drapeBufferSize[0],dr=K.drapeBufferSize[1];Mt=K.framebufferCopyTexture,Mt&&(!Mt||Mt.size[0]===Pt&&Mt.size[1]===dr)||(Mt&&Mt.destroy(),Mt=K.framebufferCopyTexture=new t.T(P,new t.r({width:Pt,height:dr}),j.RGBA8)),Mt.bind(j.LINEAR,j.CLAMP_TO_EDGE),j.copyTexSubImage2D(j.TEXTURE_2D,0,0,0,0,0,Pt,dr)}dt&&It(!0,!1,Mt),vt&&It(!1,!0,Mt)}}else dt&&Vt(!0),vt&&Vt(!1),(dt||vt)&&C.resetStencilClippingMasks()}}},building:function(C,c,A,E){C.currentLayer<C.firstLightBeamLayer&&(C.firstLightBeamLayer=C.currentLayer);const M=A.paint.get("building-ambient-occlusion-ground-intensity"),P=A.paint.get("building-ambient-occlusion-ground-radius"),j=A.paint.get("building-ambient-occlusion-ground-attenuation");let K=M>0&&P>0,te=!0;const ge=A.paint.get("building-vertical-scale");ge<1&&(te=!1);const ve=C.conflationActive&&C.style.isLayerClipped(A,c.getSource()),Me=C.style.order.indexOf(A.fqid);if(function(Ce,Pe,Qe,je,qe,Ke){for(const lt of Ke){const dt=Pe.getTile(lt).getBucket(Qe);dt&&(qe&&dt.updateReplacement(lt,Ce.replacementSource,je),dt.uploadUpdatedIndexBuffer(Ce.context))}}(C,c,A,Me,ve,E),function(Ce,Pe,Qe,je){for(const qe of je){const Ke=Pe.getTile(qe).getBucket(Qe);Ke&&Ke.needsEvaluation(Ce,Qe)&&(Ke.evaluate(Qe),Ke.uploadUpdatedColorBuffer(Ce.context))}}(C,c,A,E),A.resetLayerRenderingStats(C),C.shadowRenderer&&(C.shadowRenderer.useNormalOffset=!0),C.renderPass==="shadow"&&C.shadowRenderer){const Ce=C.shadowRenderer,Pe=[],Qe=Ce.getShadowPassDepthMode();yh({painter:C,source:c,layer:A,coords:E,defines:Pe,blendMode:Ce.getShadowPassColorMode(),depthMode:Qe,verticalScale:ge})}else if(C.renderPass==="translucent"){K&&function(je,qe,Ke,lt,dt,vt,Tt,Dt,Vt,It,Mt,Pt,dr){const sr=je.context.gl,Qr=je.depthModeForSublayer(1,Sn.ReadOnly,sr.LEQUAL,!0),Br=.1*(1-(Jr=Mt))+3*Jr;var Jr;const yn=je._showOverdrawInspector,vr=Pt,qt=new eh;yn||Fc(qt,je,qe,Ke,lt,Qr,new Ii({func:sr.ALWAYS,mask:255},255,255,sr.KEEP,sr.KEEP,sr.REPLACE),new Li([sr.ONE,sr.ONE,sr.ONE,sr.ONE],t.am.transparent,[!1,!1,!1,!0],sr.MIN),Ai.disabled,dt,"sdf",1,Tt,Dt,0,It,Br,vr,!1);{const kr=yn?Ii.disabled:new Ii({func:sr.EQUAL,mask:255},255,255,sr.KEEP,sr.DECR,sr.DECR),br=yn?je.colorModeForRenderPass():new Li([sr.ONE_MINUS_DST_ALPHA,sr.DST_ALPHA,sr.ONE,sr.ONE],t.am.transparent,[!0,!0,!0,!0]);Fc(qt,je,qe,Ke,lt,Qr,kr,br,Ai.disabled,dt,"color",1,Tt,Dt,0,It,Br,vr,!1)}}(C,c,A,E,!0,0,M,P,0,[0,0,0],j,ve);let Ce=["HAS_ATTRIBUTE_a_part_color_emissive","LIGHTING_3D_MODE"];te&&(Ce=Ce.concat("RENDER_SHADOWS","DEPTH_TEXTURE")),C.shadowRenderer.useNormalOffset&&(Ce=Ce.concat("NORMAL_OFFSET"));const Pe=new Sn(C.context.gl.LEQUAL,Sn.ReadWrite,C.depthRangeFor3D),Qe=C.colorModeForRenderPass();yh({painter:C,source:c,layer:A,coords:E,defines:Ce,blendMode:Qe,depthMode:Pe,verticalScale:ge})}else if(C.renderPass==="light-beam"){const Ce=["HAS_ATTRIBUTE_a_part_color_emissive","HAS_ATTRIBUTE_a_bloom_attenuation"],Pe=new Sn(C.context.gl.LEQUAL,Sn.ReadOnly,C.depthRangeFor3D);yh({painter:C,source:c,layer:A,coords:E,defines:Ce,blendMode:Li.alphaBlended,depthMode:Pe,verticalScale:ge})}C.shadowRenderer&&(C.shadowRenderer.useNormalOffset=!1),C.resetStencilClippingMasks()},hillshade:function(C,c,A,E){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent"||C.style.disableElevatedTerrain)return;const M=C.context,P=C.terrain&&C.terrain.renderingToTexture,[j,K]=C.renderPass!=="translucent"||P?[{},E]:C.stencilConfigForOverlap(E);for(const te of K){const ge=c.getTile(te);if(ge.needsHillshadePrepare&&C.renderPass==="offscreen")Td(C,ge,A);else if(C.renderPass==="translucent"){const ve=C.depthModeForSublayer(0,Sn.ReadOnly),Me=A.paint.get("hillshade-emissive-strength"),Ce=C.colorModeForDrapableLayerRenderPass(Me),Pe=P&&C.terrain?C.terrain.stencilModeForRTTOverlap(te):j[te.overscaledZ];_u(C,te,ge,A,ve,Pe,Ce)}}M.viewport.set([0,0,C.width,C.height]),C.resetStencilClippingMasks()},raster:function(C,c,A,E,M,P){if(C.renderPass!=="translucent"||A.paint.get("raster-opacity")===0)return;const j=C.transform.projection.name==="globe",K=A.paint.get("raster-elevation")!==0,te=K&&j;if(C.renderElevatedRasterBackface&&!te)return;const ge=C.context,ve=ge.gl,Me=c.getSource(),Ce=function(Dt,Vt,It,Mt){const Pt=Vt.paint.get("raster-color"),dr=Dt.type==="raster-array",sr=[],Qr=Vt.paint.get("raster-resampling"),Br=Vt.paint.get("raster-color-mix");let Jr=Vt.paint.get("raster-color-range");const yn=[Br[0],Br[1],Br[2],0],vr=Br[3];let qt=Qr==="nearest"?Mt.NEAREST:Mt.LINEAR;if(dr&&(sr.push("RASTER_ARRAY"),Pt||sr.push("RASTER_COLOR"),Qr==="linear"&&sr.push("RASTER_ARRAY_LINEAR"),qt=Mt.NEAREST,!Jr&&Dt.rasterLayers)){const kr=Dt.rasterLayers.find(({id:br})=>br===Vt.sourceLayer);kr&&kr.fields&&kr.fields.range&&(Jr=kr.fields.range)}if(Jr=Jr||[0,1],Pt){sr.push("RASTER_COLOR"),It.activeTexture.set(Mt.TEXTURE2),Vt.updateColorRamp(Jr);let kr=Vt.colorRampTexture;kr||(kr=Vt.colorRampTexture=new t.T(It,Vt.colorRamp,Mt.RGBA8)),kr.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE)}return{mix:yn,range:Jr,offset:vr,defines:sr,resampling:qt}}(Me,A,ge,ve);if(Me instanceof t.aP&&!E.length&&!j)return;const Pe=A.paint.get("raster-emissive-strength"),Qe=C.colorModeForDrapableLayerRenderPass(Pe),je=C.terrain&&C.terrain.renderingToTexture,qe=!C.options.moving,Ke=A.paint.get("raster-resampling")==="nearest"?ve.NEAREST:ve.LINEAR;if(Me instanceof t.aP&&!E.length&&(Me.onNorthPole||Me.onSouthPole)){const Dt=K?C.stencilModeFor3D():Ii.disabled;return void Of(!!Me.onNorthPole,null,C,c,A,Pe,Ce,Ai.disabled,Dt)}if(!E.length)return;const[lt,dt]=Me instanceof t.aP||je?[{},E]:C.stencilConfigForOverlap(E),vt=dt[dt.length-1].overscaledZ;te&&Ce.defines.push("PROJECTION_GLOBE_VIEW"),K&&Ce.defines.push("RENDER_CUTOFF");const Tt=(Dt,Vt,It)=>{for(const Mt of Dt){const Pt=Mt.toUnwrapped(),dr=c.getTile(Mt);if(je&&(!dr||!dr.hasData()))continue;ge.activeTexture.set(ve.TEXTURE0);const sr=kd(dr,Me,A,Ce);if(!sr||!sr.texture)continue;const{texture:Qr,mix:Br,offset:Jr,tileSize:yn,buffer:vr}=sr;let qt,kr;je?(qt=Sn.disabled,kr=Mt.projMatrix):K?(qt=new Sn(ve.LEQUAL,Sn.ReadWrite,C.depthRangeFor3D),kr=j?Float32Array.from(C.transform.expandedFarZProjMatrix):C.transform.calculateProjMatrix(Pt,qe)):(qt=C.depthModeForSublayer(Mt.overscaledZ-vt,A.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,ve.LESS),kr=C.transform.calculateProjMatrix(Pt,qe));const br=C.terrain&&je?C.terrain.stencilModeForRTTOverlap(Mt):lt[Mt.overscaledZ],an=P?0:A.paint.get("raster-fade-duration");dr.registerFadeDuration(an);const ln=c.findLoadedParent(Mt,0),dn=Cl(dr,ln,c,C.transform,an);let Mn,di;C.terrain&&C.terrain.prepareDrawTile(),ge.activeTexture.set(ve.TEXTURE0),Qr.bind(Ke,ve.CLAMP_TO_EDGE),ge.activeTexture.set(ve.TEXTURE1),ln?(ln.texture&&ln.texture.bind(Ke,ve.CLAMP_TO_EDGE),Mn=Math.pow(2,ln.tileID.overscaledZ-dr.tileID.overscaledZ),di=[dr.tileID.canonical.x*Mn%1,dr.tileID.canonical.y*Mn%1]):Qr.bind(Ke,ve.CLAMP_TO_EDGE),"useMipmap"in Qr&&ge.extTextureFilterAnisotropic&&C.transform.pitch>20&&ve.texParameterf(ve.TEXTURE_2D,ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ge.extTextureFilterAnisotropicMax);const Ci=C.transform;let ti;const xi=K?Ld(Ci):[0,0,0,0];let vi,qi,fs,Bs,no,rs=0;if(te&&Me instanceof t.aP&&Me.coordinates.length>3)vi=Float32Array.from(t.bh(t.dD(new t.cA(0,0,0)))),qi=Float32Array.from(Ci.globeMatrix),fs=Float32Array.from(t.dz(Ci)),Bs=[t.aD(Ci.center.lng),t.aH(Ci.center.lat)],ti=Me.elevatedGlobePerspectiveTransform,no=Me.elevatedGlobeGridMatrix||new Float32Array(9);else if(te){const Cs=t.dA(Mt.canonical);rs=t.dB(Cs.getCenter().lat),vi=Float32Array.from(t.bh(t.dD(Mt.canonical))),qi=Float32Array.from(Ci.globeMatrix),fs=Float32Array.from(t.dz(Ci)),Bs=[t.aD(Ci.center.lng),t.aH(Ci.center.lat)],ti=[0,0],no=Float32Array.from(t.dC(Mt.canonical,Cs,rs,Ci.worldSize/Ci._pixelsPerMercatorPixel))}else ti=Me instanceof t.aP?Me.perspectiveTransform:[0,0],vi=new Float32Array(16),qi=new Float32Array(9),fs=new Float32Array(16),Bs=[0,0],no=new Float32Array(9);const io=ni(kr,vi,qi,fs,no,di||[0,0],t.ah(C.transform.zoom),Bs,xi,Mn||1,dn,A,ti,K?A.paint.get("raster-elevation"):0,2,Br,Jr,Ce.range,yn,vr,Pe),fo=C.isTileAffectedByFog(Mt),ko=C.getOrCreateProgram("raster",{defines:Ce.defines,overrideFog:fo});if(C.uploadCommonUniforms(ge,ko,Pt),Me instanceof t.aP){const Cs=Me.elevatedGlobeVertexBuffer,so=Me.elevatedGlobeIndexBuffer;if(je||!j)Me.boundsBuffer&&Me.boundsSegments&&ko.draw(C,ve.TRIANGLES,qt,Ii.disabled,Qe,Ai.disabled,io,A.id,Me.boundsBuffer,C.quadTriangleIndexBuffer,Me.boundsSegments);else if(Cs&&so){const he=Ci.zoom<=t.cX?Me.elevatedGlobeSegments:Me.getSegmentsForLongitude(Ci.center.lng);he&&ko.draw(C,ve.TRIANGLES,qt,Ii.disabled,Qe,Vt,io,A.id,Cs,so,he)}}else if(te){qt=new Sn(ve.LEQUAL,Sn.ReadOnly,C.depthRangeFor3D);const Cs=C.globeSharedBuffers;if(Cs){const[so,he,le]=Cs.getGridBuffers(rs,!1);ko.draw(C,ve.TRIANGLES,qt,It||br,C.colorModeForRenderPass(),Vt,io,A.id,so,he,le)}}else{const{tileBoundsBuffer:Cs,tileBoundsIndexBuffer:so,tileBoundsSegments:he}=C.getTileBoundsBuffers(dr);ko.draw(C,ve.TRIANGLES,qt,br,Qe,Ai.disabled,io,A.id,Cs,so,he)}}if(!(Me instanceof t.aP)&&te)for(const Mt of Dt){const Pt=Mt.canonical.y===(1<<Mt.canonical.z)-1;Mt.canonical.y===0&&Of(!0,Mt,C,c,A,Pe,Ce,Vt,It||Ii.disabled),Pt&&Of(!1,Mt,C,c,A,Pe,Ce,Vt===Ai.frontCW?Ai.backCW:Ai.frontCW,It||Ii.disabled)}};te?Tt(dt,C.renderElevatedRasterBackface?Ai.backCW:Ai.frontCW,C.stencilModeFor3D()):Tt(dt,Ai.disabled,void 0),C.resetStencilClippingMasks()},"raster-particle":function(C,c,A,E,M,P){C.renderPass==="offscreen"&&function(j,K,te,ge){if(!ge.length)return;const ve=j.context,Me=ve.gl,Ce=K.getSource();if(!(Ce instanceof ks))return;const Pe=Math.ceil(Math.sqrt(te.paint.get("raster-particle-count")));let Qe=te.particlePositionRGBAImage;if(!Qe||Qe.width!==Pe){const dt=function(vt){const Tt=vt*vt,Dt=new Uint8Array(4*Tt),Vt=function(Mt){return Mt|=0,Mt=Math.imul(2747636419^Mt,2654435769),Mt=Math.imul(Mt^Mt>>>16,2654435769),((Mt=Math.imul(Mt^Mt>>>16,2654435769))>>>0)/4294967296},It=1/1.1;for(let Mt=0;Mt<Tt;Mt++){const Pt=It*(Vt(2*Mt+0)+Fi),dr=It*(Vt(2*Mt+1)+Fi),sr=255*Pt%1,Qr=255*dr%1,Br=sr,Jr=dr-Qr/255,yn=Qr;Dt[4*Mt+0]=255*(Pt-sr/255),Dt[4*Mt+1]=255*Br,Dt[4*Mt+2]=255*Jr,Dt[4*Mt+3]=255*yn}return Dt}(Pe);Qe=te.particlePositionRGBAImage=new t.r({width:Pe,height:Pe},dt)}let je=te.particleFramebuffer;je?je.width!==Pe&&(je.destroy(),je=te.particleFramebuffer=ve.createFramebuffer(Pe,Pe,!0,null)):je=te.particleFramebuffer=ve.createFramebuffer(Pe,Pe,!0,null);const qe=[];for(const dt of ge){const vt=K.getTile(dt);if(!(vt instanceof pl))continue;const Tt=El(vt,Ce,te);if(!Tt)continue;const Dt=[vt.tileSize,vt.tileSize];let Vt=te.tileFramebuffer;Vt||(Vt=te.tileFramebuffer=ve.createFramebuffer(Dt[0],Dt[1],!0,null));let It=vt.rasterParticleState;It||(It=vt.rasterParticleState=new rf(ve,dt,Dt,Qe));const Mt=It.update(te.lastInvalidatedAt);It.particleTextureDimension!==Pe&&It.updateParticleTexture(dt,Qe);const Pt=It.targetColorTexture;It.targetColorTexture=It.backgroundColorTexture,It.backgroundColorTexture=Pt;const dr=It.particleTexture0;It.particleTexture0=It.particleTexture1,It.particleTexture1=dr,qe.push([dt,Tt,It,Mt])}if(qe.length===0)return;const Ke=t.q.now(),lt=te.previousDrawTimestamp?.001*(Ke-te.previousDrawTimestamp):.0167;if(te.previousDrawTimestamp=Ke,te.hasColorMap()){ve.activeTexture.set(Me.TEXTURE0+2);let dt=te.colorRampTexture;dt||(dt=te.colorRampTexture=new t.T(ve,te.colorRamp,Me.RGBA8)),dt.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)}ve.bindFramebuffer.set(te.tileFramebuffer.framebuffer),function(dt,vt,Tt){const Dt=dt.context,Vt=Dt.gl,It=vt.tileFramebuffer;Dt.activeTexture.set(Vt.TEXTURE0);const Mt={u_texture:0,u_opacity:1.05*(dr=vt.paint.get("raster-particle-fade-opacity-factor"))/(dr+.05)},Pt=dt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var dr;for(const sr of Tt){const[,,Qr,Br]=sr;It.colorAttachment.set(Qr.targetColorTexture.texture),Dt.viewport.set([0,0,It.width,It.height]),Dt.clear({color:t.am.transparent}),Br&&(Qr.backgroundColorTexture.bind(Vt.NEAREST,Vt.CLAMP_TO_EDGE),Pt.draw(dt,Vt.TRIANGLES,Sn.disabled,Ii.disabled,Li.alphaBlended,Ai.disabled,Mt,vt.id,dt.viewportBuffer,dt.quadTriangleIndexBuffer,dt.viewportSegments))}}(j,te,qe),function(dt,vt,Tt,Dt){const Vt=dt.context,It=Vt.gl,Mt=Tt.tileFramebuffer,Pt=dt.transform.projection.name==="globe",dr=Tt.paint.get("raster-particle-max-speed");for(const sr of Dt){const[Qr,Br,Jr]=sr;Vt.activeTexture.set(It.TEXTURE0+0),Br.texture.bind(It.LINEAR,It.CLAMP_TO_EDGE),Mt.colorAttachment.set(Jr.targetColorTexture.texture);const yn=dt.getOrCreateProgram("rasterParticleDraw",{defines:Br.defines,overrideFog:!1});Vt.activeTexture.set(It.TEXTURE0+1);const vr=Br.scalarData?[]:[0,1,2,3].map(br=>t.e3[br](Qr));vr.push(Qr);const qt=Qr.canonical.x,kr=Qr.canonical.y;for(const br of vr){const an=vt.getTile(Pt?br.wrapped():br);if(!an)continue;const ln=an.rasterParticleState;if(!ln)continue;const dn=br.canonical.x+(1<<br.canonical.z)*(br.wrap-Qr.wrap),Mn=br.canonical.y;ln.particleTexture0.bind(It.NEAREST,It.CLAMP_TO_EDGE);const di=Pi(1,ln.particleTexture0.size[0],[dn-qt,Mn-kr],0,Br.texture.size,2,dr,Br.textureOffset,Br.scale,Br.offset);yn.draw(dt,It.POINTS,Sn.disabled,Ii.disabled,Li.alphaBlended,Ai.disabled,di,Tt.id,ln.particleIndexBuffer,void 0,ln.particleSegment)}}}(j,K,te,qe),ve.bindFramebuffer.set(te.particleFramebuffer.framebuffer),function(dt,vt,Tt,Dt){const Vt=dt.context,It=Vt.gl,Mt=vt.paint.get("raster-particle-max-speed"),Pt=Dt*vt.paint.get("raster-particle-speed-factor")*.15,dr=function(Qr){return Math.pow(Qr,6)}(.01+1*vt.paint.get("raster-particle-reset-rate-factor")),sr=vt.particleFramebuffer;Vt.viewport.set([0,0,sr.width,sr.height]);for(const Qr of Tt){const[,Br,Jr]=Qr;Vt.activeTexture.set(It.TEXTURE0+0),Br.texture.bind(It.LINEAR,It.CLAMP_TO_EDGE),Vt.activeTexture.set(It.TEXTURE0+1);const yn=Jr.particleTexture0;yn.bind(It.NEAREST,It.CLAMP_TO_EDGE);const vr=pa(1,yn.size[0],0,Br.texture.size,Mt,Pt,dr,Br.textureOffset,Br.scale,Br.offset);sr.colorAttachment.set(Jr.particleTexture1.texture),Vt.clear({color:t.am.transparent}),dt.getOrCreateProgram("rasterParticleUpdate",{defines:Br.defines}).draw(dt,It.TRIANGLES,Sn.disabled,Ii.disabled,Li.unblended,Ai.disabled,vr,vt.id,dt.viewportBuffer,dt.quadTriangleIndexBuffer,dt.viewportSegments)}}(j,te,qe,lt)}(C,c,A,E),C.renderPass==="translucent"&&(function(j,K,te,ge,ve){const Me=j.context,Ce=Me.gl,Pe=K.getSource().tileSize,Qe=5*(1-t.af(t.cI,t.cI+1,j.transform.zoom))*Pe+te.paint.get("raster-particle-elevation"),je=!j.options.moving,qe=j.transform.projection.name==="globe";if(!ge.length)return;const[Ke,lt]=j.stencilConfigForOverlap(ge),dt=[];qe&&dt.push("PROJECTION_GLOBE_VIEW");const vt=j.stencilModeFor3D();for(const Tt of lt){const Dt=Tt.toUnwrapped(),Vt=K.getTile(Tt);if(!Vt.rasterParticleState)continue;const It=Vt.rasterParticleState,Mt=100;Vt.registerFadeDuration(Mt);const Pt=K.findLoadedParent(Tt,0),dr=Cl(Vt,Pt,K,j.transform,Mt);let sr,Qr;j.terrain&&j.terrain.prepareDrawTile(),Me.activeTexture.set(Ce.TEXTURE0),It.targetColorTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Me.activeTexture.set(Ce.TEXTURE1),Pt&&Pt.rasterParticleState?(Pt.rasterParticleState.targetColorTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),sr=Math.pow(2,Pt.tileID.overscaledZ-Vt.tileID.overscaledZ),Qr=[Vt.tileID.canonical.x*sr%1,Vt.tileID.canonical.y*sr%1]):It.targetColorTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const Br=qe?Float32Array.from(j.transform.expandedFarZProjMatrix):j.transform.calculateProjMatrix(Dt,je),Jr=j.transform,yn=_h(Jr),vr=t.dA(Tt.canonical),qt=t.dB(vr.getCenter().lat);let kr,br,an,ln,dn;qe?(kr=Float32Array.from(t.bh(t.dD(Tt.canonical))),br=Float32Array.from(Jr.globeMatrix),an=Float32Array.from(t.dz(Jr)),ln=[t.aD(Jr.center.lng),t.aH(Jr.center.lat)],dn=Float32Array.from(t.dC(Tt.canonical,vr,qt,Jr.worldSize/Jr._pixelsPerMercatorPixel))):(kr=new Float32Array(16),br=new Float32Array(9),an=new Float32Array(16),ln=[0,0],dn=new Float32Array(9));const Mn=Ss(Br,kr,br,an,dn,Qr||[0,0],t.ah(j.transform.zoom),ln,yn,sr||1,dr,Qe),di=j.isTileAffectedByFog(Tt),Ci=j.getOrCreateProgram("rasterParticle",{defines:dt,overrideFog:di});if(j.uploadCommonUniforms(Me,Ci,Dt),qe){const ti=new Sn(Ce.LEQUAL,Sn.ReadOnly,j.depthRangeFor3D),xi=0,vi=j.globeSharedBuffers;if(vi){const[qi,fs,Bs]=vi.getGridBuffers(qt,xi!==0);Ci.draw(j,Ce.TRIANGLES,ti,vt,Li.alphaBlended,j.renderElevatedRasterBackface?Ai.frontCCW:Ai.backCCW,Mn,te.id,qi,fs,Bs)}}else{const ti=j.depthModeForSublayer(0,Sn.ReadOnly),xi=Ke[Tt.overscaledZ],{tileBoundsBuffer:vi,tileBoundsIndexBuffer:qi,tileBoundsSegments:fs}=j.getTileBoundsBuffers(Vt);Ci.draw(j,Ce.TRIANGLES,ti,xi,Li.alphaBlended,Ai.disabled,Mn,te.id,vi,qi,fs)}}j.resetStencilClippingMasks()}(C,c,A,E),C.style.map.triggerRepaint())},background:function(C,c,A,E){const M=A.paint.get("background-color"),P=A.paint.get("background-color-use-theme").constantOr("default")==="none",j=A.paint.get("background-opacity"),K=A.paint.get("background-emissive-strength"),te=A.paint.get("background-pitch-alignment")==="viewport";if(j===0)return;const ge=C.context,ve=ge.gl,Me=C.transform,Ce=Me.tileSize,Pe=A.paint.get("background-pattern");let Qe;if(Pe!==void 0&&(Pe===null||(Qe=C.imageManager.getPattern(t.I.from(Pe.toString()),A.scope,C.style.getLut(A.scope)),!Qe)))return;const je=!Pe&&M.a===1&&j===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==je)return;const qe=Ii.disabled,Ke=C.depthModeForSublayer(0,je==="opaque"?Sn.ReadWrite:Sn.ReadOnly),lt=C.colorModeForDrapableLayerRenderPass(K),dt=Pe?"backgroundPattern":"background";let vt,Tt=E;if(Tt||(vt=C.getBackgroundTiles(),Tt=Object.values(vt).map(Dt=>Dt.tileID)),Pe&&(ge.activeTexture.set(ve.TEXTURE0),C.imageManager.bind(C.context,A.scope)),te){const Dt=C.getOrCreateProgram(dt,{overrideFog:!1,overrideRtt:!0}),Vt=new Float32Array(t.bx([])),It=new t.aM(0,0,0,0,0),Mt=Pe?Go(Vt,K,j,C,0,A.scope,Qe,te,{tileID:It,tileSize:Ce}):fi(Vt,K,j,M.toPremultipliedRenderColor(P?null:A.lut));Dt.draw(C,ve.TRIANGLES,Ke,qe,lt,Ai.disabled,Mt,A.id,C.viewportBuffer,C.quadTriangleIndexBuffer,C.viewportSegments)}else for(const Dt of Tt){const Vt=C.isTileAffectedByFog(Dt),It=C.getOrCreateProgram(dt,{overrideFog:Vt}),Mt=Dt.toUnwrapped(),Pt=E?Dt.projMatrix:C.transform.calculateProjMatrix(Mt);C.prepareDrawTile();const dr=c?c.getTile(Dt):vt?vt[Dt.key]:new Jl(Dt,Ce,Me.zoom,C),sr=Pe?Go(Pt,K,j,C,0,A.scope,Qe,te,{tileID:Dt,tileSize:Ce}):fi(Pt,K,j,M.toPremultipliedRenderColor(P?null:A.lut));C.uploadCommonUniforms(ge,It,Mt);const{tileBoundsBuffer:Qr,tileBoundsIndexBuffer:Br,tileBoundsSegments:Jr}=C.getTileBoundsBuffers(dr);It.draw(C,ve.TRIANGLES,Ke,qe,lt,Ai.disabled,sr,A.id,Qr,Br,Jr)}},sky:function(C,c,A){const E=C._atmosphere?t.ah(C.transform.zoom):1,M=A.paint.get("sky-opacity")*E;if(M===0)return;const P=C.context,j=A.paint.get("sky-type"),K=new Sn(P.gl.LEQUAL,Sn.ReadOnly,[0,1]),te=C.frameCounter/1e3%1;j==="atmosphere"?C.renderPass==="offscreen"?A.needsSkyboxCapture(C)&&(function(ge,ve,Me,Ce){const Pe=ge.context,Qe=Pe.gl;let je=ve.skyboxFbo;if(!je){je=ve.skyboxFbo=Pe.createFramebuffer(32,32,!0,null),ve.skyboxGeometry=new Ru(Pe),ve.skyboxTexture=Pe.gl.createTexture(),Qe.bindTexture(Qe.TEXTURE_CUBE_MAP,ve.skyboxTexture),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_WRAP_S,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_WRAP_T,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_MIN_FILTER,Qe.LINEAR),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_MAG_FILTER,Qe.LINEAR);for(let dt=0;dt<6;++dt)Qe.texImage2D(Qe.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,Qe.RGBA,32,32,0,Qe.RGBA,Qe.UNSIGNED_BYTE,null)}Pe.bindFramebuffer.set(je.framebuffer),Pe.viewport.set([0,0,32,32]);const qe=ve.getCenter(ge,!0),Ke=ge.getOrCreateProgram("skyboxCapture"),lt=new Float64Array(16);t.bx(lt),t.eh(lt,lt,.5*-Math.PI),eo(ge,ve,Ke,lt,qe,0),t.bx(lt),t.eh(lt,lt,.5*Math.PI),eo(ge,ve,Ke,lt,qe,1),t.bx(lt),t.cR(lt,lt,.5*-Math.PI),eo(ge,ve,Ke,lt,qe,2),t.bx(lt),t.cR(lt,lt,.5*Math.PI),eo(ge,ve,Ke,lt,qe,3),t.bx(lt),eo(ge,ve,Ke,lt,qe,4),t.bx(lt),t.eh(lt,lt,Math.PI),eo(ge,ve,Ke,lt,qe,5),Pe.viewport.set([0,0,ge.width,ge.height])}(C,A),A.markSkyboxValid(C)):C.renderPass==="sky"&&function(ge,ve,Me,Ce,Pe){const Qe=ge.context,je=Qe.gl,qe=ge.transform,Ke=ge.getOrCreateProgram("skybox");Qe.activeTexture.set(je.TEXTURE0),je.bindTexture(je.TEXTURE_CUBE_MAP,ve.skyboxTexture);const lt=((dt,vt,Tt,Dt,Vt)=>({u_matrix:dt,u_sun_direction:vt,u_cubemap:0,u_opacity:Dt,u_temporal_offset:Vt}))(qe.skyboxMatrix,ve.getCenter(ge,!1),0,Ce,Pe);ge.uploadCommonUniforms(Qe,Ke),Ke.draw(ge,je.TRIANGLES,Me,Ii.disabled,ge.colorModeForRenderPass(),Ai.backCW,lt,"skybox",ve.skyboxGeometry.vertexBuffer,ve.skyboxGeometry.indexBuffer,ve.skyboxGeometry.segment)}(C,A,K,M,te):j==="gradient"&&C.renderPass==="sky"&&function(ge,ve,Me,Ce,Pe){const Qe=ge.context,je=Qe.gl,qe=ge.transform,Ke=ge.getOrCreateProgram("skyboxGradient");ve.skyboxGeometry||(ve.skyboxGeometry=new Ru(Qe)),Qe.activeTexture.set(je.TEXTURE0);let lt=ve.colorRampTexture;lt||(lt=ve.colorRampTexture=new t.T(Qe,ve.colorRamp,je.RGBA8)),lt.bind(je.LINEAR,je.CLAMP_TO_EDGE);const dt=((vt,Tt,Dt,Vt,It)=>({u_matrix:vt,u_color_ramp:0,u_center_direction:Tt,u_radius:t.al(Dt),u_opacity:Vt,u_temporal_offset:It}))(qe.skyboxMatrix,ve.getCenter(ge,!1),ve.paint.get("sky-gradient-radius"),Ce,Pe);ge.uploadCommonUniforms(Qe,Ke),Ke.draw(ge,je.TRIANGLES,Me,Ii.disabled,ge.colorModeForRenderPass(),Ai.backCW,dt,"skyboxGradient",ve.skyboxGeometry.vertexBuffer,ve.skyboxGeometry.indexBuffer,ve.skyboxGeometry.segment)}(C,A,K,M,te)},custom:function(C,c,A,E){const M=C.context,P=A.implementation;if(!C.transform.projection.unsupportedLayers||!C.transform.projection.unsupportedLayers.includes("custom")||C.terrain&&(C.terrain.renderingToTexture||C.renderPass==="offscreen")&&A.isDraped(c)){if(C.renderPass==="offscreen"){const j=P.prerender;if(j){if(C.setCustomLayerDefaults(),M.setColorMode(C.colorModeForRenderPass()),C.transform.projection.name==="globe"){const K=C.transform.pointMerc;j.call(P,M.gl,C.transform.customLayerMatrix(),C.transform.getProjection(),C.transform.globeToMercatorMatrix(),t.ah(C.transform.zoom),[K.x,K.y],C.transform.pixelsPerMeterRatio)}else j.call(P,M.gl,C.transform.customLayerMatrix());M.setDirty(),C.setBaseState()}}else if(C.renderPass==="translucent"){if(C.terrain&&C.terrain.renderingToTexture){const K=P.renderToTile;if(K){const te=E[0].canonical,ge={x:te.x+E[0].wrap*(P.wrapTileId?0:1<<te.z),y:te.y,z:te.z};M.setDepthMode(Sn.disabled),M.setStencilMode(Ii.disabled),M.setColorMode(C.colorModeForRenderPass()),C.setCustomLayerDefaults(),K.call(P,M.gl,ge),M.setDirty(),C.setBaseState()}return}C.setCustomLayerDefaults(),M.setColorMode(C.colorModeForRenderPass()),M.setStencilMode(Ii.disabled);const j=P.renderingMode==="3d"?new Sn(C.context.gl.LEQUAL,Sn.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Sn.ReadOnly);if(M.setDepthMode(j),C.transform.projection.name==="globe"){const K=C.transform.pointMerc;P.render(M.gl,C.transform.customLayerMatrix(),C.transform.getProjection(),C.transform.globeToMercatorMatrix(),t.ah(C.transform.zoom),[K.x,K.y],C.transform.pixelsPerMeterRatio)}else P.render(M.gl,C.transform.customLayerMatrix());M.setDirty(),C.setBaseState(),M.bindFramebuffer.set(null)}}else t.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(C,c,A,E){if(C.renderPass==="opaque")return;const M=A.paint.get("model-opacity").constantOr(1);if(M===0)return;const P=A.paint.get("model-cast-shadows");if(C.renderPass==="shadow"&&(!P||C.terrain&&M<.65&&A._transitionablePaint._values["model-opacity"].value.expression instanceof t.ab))return;const j=C.shadowRenderer,K=A.paint.get("model-receive-shadows");j&&(j.useNormalOffset=!0,K||(j.enabled=!1));const te=()=>{j&&(j.useNormalOffset=!0,K||(j.enabled=!0))},ge=c.getSource();if(C.renderPass==="light-beam"&&ge.type!=="batched-model")return;if(ge.type==="vector"||ge.type==="geojson")return function(Ke,lt,dt,vt,Tt){const Dt=Ke.transform;if(Dt.projection.name!=="mercator")return void t.w(`Drawing 3D models for ${Dt.projection.name} projection is not yet implemented`);const Vt=Dt.getFreeCameraOptions().position;if(!Ke.modelManager)return;const It=Ke.modelManager;dt.modelManager=It;const Mt=Ke.shadowRenderer;if(!dt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Pt=dt._unevaluatedLayout._values["model-id"],dr=Object.assign({},dt.layout.get("model-id").parameters),sr=Ke.style.order.indexOf(dt.fqid);for(const Qr of vt){const Br=lt.getTile(Qr).getBucket(dt);if(!Br||Br.projection.name!==Dt.projection.name)continue;const Jr=Br.getModelUris();Jr&&!Br.modelsRequested&&(It.addModelsFromBucket(Jr,Tt),Br.modelsRequested=!0);const yn=ju(Qr,Dt);dr.zoom=yn;const vr=Pt.possiblyEvaluate(dr);if(of(Ke,Br,Qr),To.shadowUniformsInitialized=!1,To.useSingleShadowCascade=!!Mt&&Mt.getMaxCascadeForTile(Qr.toUnwrapped())===0,Ke.renderPass==="shadow"&&Mt){if(Ke.currentShadowCascade===1&&Br.isInsideFirstShadowMapFrustum)continue;const br=Dt.calculatePosMatrix(Qr.toUnwrapped(),Dt.worldSize);if(To.tileMatrix.set(br),To.shadowTileMatrix=Float32Array.from(Mt.calculateShadowPassMatrixFromMatrix(br)),To.aabb.min.fill(0),To.aabb.max[0]=To.aabb.max[1]=t.aj,To.aabb.max[2]=0,bh(Br,To,Ke,dt.scope))continue}const qt=1<<Qr.canonical.z,kr=[((Vt.x-Qr.wrap)*qt-Qr.canonical.x)*t.aj,(Vt.y*qt-Qr.canonical.y)*t.aj,Vt.z*qt*t.aj];Ke.conflationActive&&Object.keys(Br.instancesPerModel).length>0&&Ke.style.isLayerClipped(dt,lt.getSource())&&Br.updateReplacement(Qr,Ke.replacementSource,sr,Tt)&&(Br.uploaded=!1,Br.upload(Ke.context));for(let br in Br.instancesPerModel){const an=Br.instancesPerModel[br];an.features.length>0&&(br=vr.evaluate(an.features[0].feature,{}));const ln=It.getModel(br,Tt);if(ln||It.hasURLBeenRequested(br)||Br.modelUris.includes(br)||(Br.modelUris.push(br),Br.modelsRequested=!1),ln&&ln.uploaded)for(const dn of ln.nodes)Hh(Ke,dt,dn,an,kr,Qr,To)}}}(C,c,A,E,ge.type==="vector"?A.scope:""),void te();if(!ge.loaded())return;if(ge.type==="batched-model")return function(Ke,lt,dt,vt){dt.resetLayerRenderingStats(Ke);const Tt=Ke.context,Dt=Ke.transform,Vt=Ke.style.fog,It=Ke.shadowRenderer;if(Dt.projection.name!=="mercator")return void t.w(`Drawing 3D landmark models for ${Dt.projection.name} projection is not yet implemented`);const Mt=Ke.transform.getFreeCameraOptions().position,Pt=t.c1([],[Mt.x,Mt.y,Mt.z],Ke.transform.worldSize),dr=t.eq([],Pt),sr=t.bx([]),Qr=t.e9(Dt.center.lat,Dt.zoom),Br=t.bn([],[1,1,1/Qr]);t.bo(sr,sr,dr);const Jr=dt.paint.get("model-opacity").constantOr(1),yn=new Sn(Tt.gl.LEQUAL,Sn.ReadWrite,Ke.depthRangeFor3D),vr=new Sn(Tt.gl.LEQUAL,Sn.ReadOnly,Ke.depthRangeFor3D),qt=new t.d6([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),kr=Ke.renderPass==="shadow",br=kr&&It?It.getCurrentCascadeFrustum():Dt.getFrustum(Dt.scaleZoom(Dt.worldSize)),an=dt.paint.get("model-front-cutoff"),ln=an[2]<1,dn=Va(Ke,dt.paint.get("model-cutoff-fade-range")),Mn=dt.getLayerRenderingStats();(function(di,Ci,ti,xi){const vi=di.terrain?di.terrain.exaggeration():0,qi=di.transform.zoom;for(const fs of xi){const Bs=Ci.getTile(fs).getBucket(ti);Bs&&(Bs.setFilter(ti.filter),di.conflationActive&&Bs.updateReplacement(fs,di.replacementSource),Bs.evaluateTransform(di,ti),di.terrain&&vi>0&&Bs.elevationUpdate(di.terrain,vi,fs,ti.source),Bs.needsReEvaluation(di,qi,ti)&&Bs.evaluate(ti))}})(Ke,lt,dt,vt),function(){let di,Ci,ti;ln?(di=vt.length-1,Ci=-1,ti=-1):(di=0,Ci=vt.length,ti=1);const xi=new Float64Array(16),vi=t.cx(),qi=new t.P(0,0);for(let fs=di;fs!==Ci;fs+=ti){const Bs=vt[fs],no=lt.getTile(Bs).getBucket(dt);if(!no||!no.uploaded)continue;let rs=!1;It&&(rs=It.getMaxCascadeForTile(Bs.toUnwrapped())===0);const io=Dt.calculatePosMatrix(Bs.toUnwrapped(),Dt.worldSize),fo=no.modelTraits;!kr&&ln&&(t.bi(xi,io),t.ad(vi,Pt,xi),qi.x=vi[0],qi.y=vi[1]);const ko=[];no.setFilter(dt.filter);for(const Cs of no.getNodesInfo()){if(Cs.hiddenByReplacement||!Cs.node.meshes)continue;const so=Cs.node;let he=0;Ke.terrain&&so.elevation&&(he=so.elevation*Ke.terrain.exaggeration());const le=(()=>{const Fn=Cs.aabb;return qt.min=[...Fn.min],qt.max=[...Fn.max],qt.min[2]+=he,qt.max[2]+=he,t.ad(qt.min,qt.min,io),t.ad(qt.max,qt.max,io),qt})(),ye=Cs.evaluatedScale;if(ye[0]<=1&&ye[1]<=1&&ye[2]<=1&&le.intersects(br)===0)continue;if(!kr&&ln){const Fn=.16666666666666666;Cs.cameraCollisionOpacity=Pt[0]>le.min[0]&&Pt[0]<le.max[0]&&Pt[1]>le.min[1]&&Pt[1]<le.max[1]&&Pt[2]*Qr<le.max[2]&&so.footprint&&t.bY(qi,so.footprint)?Math.max(Cs.cameraCollisionOpacity-Fn,0):Math.min(1,Cs.cameraCollisionOpacity+Fn)}const _e=[...io],De=1/t.d4(Bs.canonical),it=so.anchor?so.anchor[0]:0,At=so.anchor?so.anchor[1]:0;t.bo(_e,_e,[it*(ye[0]-1)+Cs.evaluatedTranslation[0]*De,At*(ye[1]-1)+Cs.evaluatedTranslation[1]*De,he+Cs.evaluatedTranslation[2]]),t.cn(ye,t.es)||t.cP(_e,_e,ye);const Rt=t.az([],_e,so.matrix),zt=t.az([],Dt.expandedFarZProjMatrix,Rt),Ir=t.az([],Dt.expandedFarZProjMatrix,_e),Or=t.aA([],[it,At,he,1],zt)[2];so.hidden=!1;let Xr=Jr;kr||(ln&&(Xr*=Cs.cameraCollisionOpacity,Xr*=ih(_e,Dt,Cs.aabb,an)),Xr*=vu(dn,Or)),Xr!==0?ko.push({nodeInfo:Cs,depth:Or,opacity:Xr,wvpForNode:zt,wvpForTile:Ir,nodeModelMatrix:Rt,tileModelMatrix:_e}):so.hidden=!0}kr||ko.sort((Cs,so)=>!ln||Cs.opacity===1&&so.opacity===1?Cs.depth<so.depth?-1:1:Cs.opacity===1?-1:so.opacity===1?1:Cs.depth>so.depth?-1:1);for(const Cs of ko){const so=Cs.nodeInfo,he=so.node;let le=t.az([],Br,Cs.tileModelMatrix);t.az(le,sr,le);const ye=t.bi([],le);t.ea(ye,ye),t.cP(ye,ye,Nf),le=t.az(le,le,he.matrix);const _e=Ke.renderPass==="light-beam",De=dt.paint.get("model-color-use-theme").constantOr("default")==="none",it=fo&t.ex.HasMapboxMeshFeatures,At=it?0:so.evaluatedRMEA[0][2];for(let Rt=0;Rt<he.meshes.length;++Rt){const zt=he.meshes[Rt],Ir=Rt===he.lightMeshIndex;let Or=Cs.wvpForNode;if(Ir){if(!_e&&!Ke.terrain&&Ke.shadowRenderer){Ke.currentLayer<Ke.firstLightBeamLayer&&(Ke.firstLightBeamLayer=Ke.currentLayer);continue}Or=Cs.wvpForTile}else if(_e)continue;const Xr={defines:[]},Fn=[];if(!kr&&It&&(It.useNormalOffset=!!zt.normalBuffer),od(Xr.defines,Fn,zt,Ke,De?null:dt.lut),it||Xr.defines.push("DIFFUSE_SHADED"),rs&&Xr.defines.push("SHADOWS_SINGLE_CASCADE"),Mn&&(kr?Mn.numRenderedVerticesInShadowPass+=zt.vertexArray.length:Mn.numRenderedVerticesInTransparentPass+=zt.vertexArray.length),kr){sf(zt,Cs.nodeModelMatrix,Ke,dt);continue}let Vi=null;if(Vt){const oo=Pc(Cs.nodeModelMatrix,Ke.transform);if(Vi=new Float32Array(oo),Dt.projection.name!=="globe"){const ys=zt.aabb.min,Xi=zt.aabb.max,[mi,zs]=Vt.getOpacityForBounds(oo,ys[0],ys[1],Xi[0],Xi[1]);Xr.overrideFog=mi>=_r||zs>=_r}}const wi=zt.material;let Ri;wi.occlusionTexture&&wi.occlusionTexture.offsetScale&&(Ri=wi.occlusionTexture.offsetScale,Xr.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const js=Ke.getOrCreateProgram("model",Xr);!kr&&It&&It.setupShadowsFromMatrix(Cs.tileModelMatrix,js,It.useNormalOffset),Ke.uploadCommonUniforms(Tt,js,null,Vi);const os=wi.pbrMetallicRoughness;os.metallicFactor=.9,os.roughnessFactor=.5;const ns=ho(new Float32Array(Or),new Float32Array(le),new Float32Array(ye),new Float32Array(he.matrix),Ke,Cs.opacity,os.baseColorFactor,wi.emissiveFactor,os.metallicFactor,os.roughnessFactor,wi,At,dt,[0,0,0],Ri);!Ir&&(so.hasTranslucentParts||Cs.opacity<1)&&js.draw(Ke,Tt.gl.TRIANGLES,yn,Ii.disabled,Li.disabled,Ai.backCCW,ns,dt.id,zt.vertexBuffer,zt.indexBuffer,zt.segments,dt.paint,Ke.transform.zoom,void 0,Fn),js.draw(Ke,Tt.gl.TRIANGLES,Ir?vr:yn,Ii.disabled,Ir||Cs.opacity<1||so.hasTranslucentParts?Li.alphaBlended:Li.unblended,Ai.backCCW,ns,dt.id,zt.vertexBuffer,zt.indexBuffer,zt.segments,dt.paint,Ke.transform.zoom,void 0,Fn)}}}}()}(C,c,A,E),void te();if(ge.type!=="model")return;const ve=ge.getModels(),Me=[],Ce=C.transform.getFreeCameraOptions().position,Pe=t.c1([],[Ce.x,Ce.y,Ce.z],C.transform.worldSize);t.eq(Pe,Pe);const Qe=[],je=[];let qe=0;for(const Ke of ve){const lt=A.paint.get("model-rotation").constantOr(null),dt=A.paint.get("model-scale").constantOr(null),vt=A.paint.get("model-translation").constantOr(null);Ke.computeModelMatrix(C,lt,dt,vt,!0,!0,!1);const Tt=t.bx([]),Dt=t.e9(Ke.position.lat,C.transform.zoom),Vt=t.bn([],[1,1,1/Dt]);t.bo(Tt,Tt,Pe),Me.push({zScaleMatrix:Vt,negCameraPosMatrix:Tt});for(const It of Ke.nodes)Dd(C.transform,It,Ke.matrix,C.transform.expandedFarZProjMatrix,qe,Qe,je);qe++}if(Qe.sort((Ke,lt)=>lt.depth-Ke.depth),C.renderPass!=="shadow"){if(M===1)for(const Ke of je)Gc(Ke,C,A,Me[Ke.modelIndex],Ii.disabled,C.colorModeForRenderPass());else{for(const Ke of je)Gc(Ke,C,A,Me[Ke.modelIndex],Ii.disabled,Li.disabled);for(const Ke of je)Gc(Ke,C,A,Me[Ke.modelIndex],C.stencilModeFor3D(),C.colorModeForRenderPass());C.resetStencilClippingMasks()}for(const Ke of Qe)Gc(Ke,C,A,Me[Ke.modelIndex],Ii.disabled,C.colorModeForRenderPass());te()}else{for(const Ke of je)sf(Ke.mesh,Ke.nodeModelMatrix,C,A);for(const Ke of Qe)sf(Ke.mesh,Ke.nodeModelMatrix,C,A);te()}}},nc={line:function(C,c,A){if(C.hasElevatedBuckets=!1,C.hasNonElevatedBuckets=!1,C._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||C._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(c){const E=c.getVisibleCoordinates();for(const M of E){const P=c.getTile(M).getBucket(C);if(P&&(P.elevationType!=="none"?C.hasElevatedBuckets=!0:C.hasNonElevatedBuckets=!0,C.hasElevatedBuckets&&C.hasNonElevatedBuckets))break}}}else C.hasNonElevatedBuckets=!0},model:function(C,c,A){const E=c.getSource();if(!E.loaded())return;if(E.type==="vector"||E.type==="geojson")return void(A.modelManager&&A.modelManager.upload(A,E.type==="vector"?C.scope:""));if(E.type==="batched-model"||E.type!=="model")return;const M=E.getModels();for(const P of M)P.upload(A.context)},raster:function(C,c,A){const E=c.getSource();if(!(E instanceof ks&&E.loaded()))return;const M=C.sourceLayer||E.rasterLayerIds&&E.rasterLayerIds[0];if(!M)return;const P=C.paint.get("raster-array-band")||E.getInitialBand(M);if(P==null)return;const j=c.getIds().map(K=>c.getTileByID(K));for(const K of j)K.updateNeeded(C.id,P)&&E.prepareTile(K,M,C.id,P)},"raster-particle":function(C,c,A){const E=c.getSource();if(!(E instanceof ks&&E.loaded()))return;const M=C.sourceLayer||E.rasterLayerIds&&E.rasterLayerIds[0];if(!M)return;const P=C.paint.get("raster-particle-array-band")||E.getInitialBand(M);if(P==null)return;const j=c.getIds().map(K=>c.getTileByID(K));for(const K of j)K.updateNeeded(C.id,P)&&E.prepareTile(K,M,C.id,P)}},sh={fill:Xn},zu={fill:function(C,c,A,E){if(!A.layout||A.layout.get("fill-elevation-reference")==="none")return;const M=C.context.gl,P=new Sn(M.LEQUAL,Sn.ReadOnly,C.depthRangeFor3D),j=new Ii({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),K=C.transform.getFreeCameraOptions().position,te=C.getOrCreateProgram("elevatedStructuresDepthReconstruct");for(const ge of E){const ve=c.getTile(ge),Me=ve.getBucket(A);if(!Me)continue;const Ce=Me.elevatedStructures;if(!Ce||Ce.depthSegments.segments[0].primitiveLength===0)continue;const Pe=gh(ge.toUnwrapped(),K),Qe=C.translatePosMatrix(ge.projMatrix,ve,A.paint.get("fill-translate"),A.paint.get("fill-translate-anchor")),je=jr(Qe,Pe,0,1,0);te.draw(C,M.TRIANGLES,P,j,Li.disabled,Ai.disabled,je,A.id,Ce.vertexBuffer,Ce.indexBuffer,Ce.depthSegments,A.paint,C.transform.zoom)}}};class af{constructor(c,A,E,M,P,j){this.context=new hl(c,A),this.transform=E,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=P,this._timeStamp=t.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const K=["fill","line","symbol","circle","heatmap","fill-extrusion","building","raster","raster-particle","hillshade","model","background","sky"];for(const ge of K)this._debugParams.enabledLayers[ge]=!0;P.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),P.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),P.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),P.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),P.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),P.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const ge of K)P.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],ge);this.occlusionParams=new wh(P),this.setup(),this.numSublayers=na.maxUnderzooming+na.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new t.eE,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new ec(this),this._wireframeDebugCache=new xh,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const te=new t.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new t.T(this.context,te,c.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=M,this.worldview=j}updateTerrain(c,A){const E=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(E||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ap(this,c));const M=this._terrain;this.transform.elevation=E?M:null,M.update(c,this.transform,A),this.transform.elevation&&!M.enabled&&(this.transform.elevation=null)}_updateFog(c){const A=c.fog;if(!A||this.transform.projection.name==="globe"||A.getOpacity(this.transform.pitch)<1||A.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[E,M]=A.getFovAdjustedRange(this.transform._fov);if(E>M)return void(this.transform.fogCullDistSq=null);const P=E+.78*(M-E);this.transform.fogCullDistSq=P*P}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(c){c&&!this._terrain&&(this._terrain=new Ap(this,this.style)),this._forceTerrainMode=c}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(c,A){if(this.width=c*t.q.devicePixelRatio,this.height=A*t.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style.order)this.style._mergedLayers[E].resize()}setup(){const c=this.context,A=new t.ba;A.emplaceBack(0,0),A.emplaceBack(t.aj,0),A.emplaceBack(0,t.aj),A.emplaceBack(t.aj,t.aj),this.tileExtentBuffer=c.createVertexBuffer(A,t.bc.members),this.tileExtentSegments=t.bd.simpleSegment(0,0,4,2);const E=new t.ba;E.emplaceBack(0,0),E.emplaceBack(t.aj,0),E.emplaceBack(0,t.aj),E.emplaceBack(t.aj,t.aj),this.debugBuffer=c.createVertexBuffer(E,t.bc.members),this.debugSegments=t.bd.simpleSegment(0,0,4,5);const M=new t.ba;M.emplaceBack(-1,-1),M.emplaceBack(1,-1),M.emplaceBack(-1,1),M.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(M,t.bc.members),this.viewportSegments=t.bd.simpleSegment(0,0,4,2);const P=new t.aZ;P.emplaceBack(0,0,0,0),P.emplaceBack(t.aj,0,t.aj,0),P.emplaceBack(0,t.aj,0,t.aj),P.emplaceBack(t.aj,t.aj,t.aj,t.aj),this.mercatorBoundsBuffer=c.createVertexBuffer(P,t.bf.members),this.mercatorBoundsSegments=t.bd.simpleSegment(0,0,4,2);const j=new t.a_;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(j);const K=new t.bb;for(const ge of[0,1,3,2,0])K.emplaceBack(ge);this.debugIndexBuffer=c.createIndexBuffer(K),this.emptyTexture=new t.T(c,new t.r({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA8),this.identityMat=t.bz();const te=this.context.gl;this.stencilClearMode=new Ii({func:te.ALWAYS,mask:0},0,255,te.ZERO,te.ZERO,te.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,c.TRIANGLES,Sn.disabled,this.stencilClearMode,Li.disabled,Ai.disabled,dp(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,A,E){if(!A||this.currentStencilSource===A.id||!c.isTileClipped()||!E||E.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let K=!1;for(const te of E)if(this._tileClippingMaskIDs[te.key]===void 0){K=!0;break}if(!K)return}this.currentStencilSource=A.id;const M=this.context,P=M.gl;this.nextStencilID+E.length>256&&this.clearStencil(),M.setColorMode(Li.disabled),M.setDepthMode(Sn.disabled);const j=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const K of E){const te=A.getTile(K),ge=this._tileClippingMaskIDs[K.key]=this.nextStencilID++,{tileBoundsBuffer:ve,tileBoundsIndexBuffer:Me,tileBoundsSegments:Ce}=this.getTileBoundsBuffers(te);j.draw(this,P.TRIANGLES,Sn.disabled,new Ii({func:P.ALWAYS,mask:0},ge,255,P.KEEP,P.KEEP,P.REPLACE),Li.disabled,Ai.disabled,dp(K.projMatrix),"$clipping",ve,Me,Ce)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,A=this.context.gl;return new Ii({func:A.NOTEQUAL,mask:255},c,255,A.KEEP,A.KEEP,A.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const A=this.context.gl;return new Ii({func:A.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,A.KEEP,A.KEEP,A.REPLACE)}stencilConfigForOverlap(c){const A=this.context.gl,E=c.sort((j,K)=>K.overscaledZ-j.overscaledZ),M=E[E.length-1].overscaledZ,P=E[0].overscaledZ-M+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();const j={};for(let K=0;K<P;K++)j[K+M]=new Ii({func:A.GEQUAL,mask:255},K+this.nextStencilID,255,A.KEEP,A.KEEP,A.REPLACE);return this.nextStencilID+=P,[j,E]}return[{[M]:Ii.disabled},E]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new Li([c.CONSTANT_COLOR,c.ONE,c.CONSTANT_COLOR,c.ONE],new t.am(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Li.unblended:Li.alphaBlended}colorModeForDrapableLayerRenderPass(c){const A=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Li([A.ONE,A.ONE_MINUS_SRC_ALPHA,A.CONSTANT_ALPHA,A.ONE_MINUS_SRC_ALPHA],new t.am(0,0,0,c===void 0?0:c),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(c,A,E,M=!1){if(this.depthOcclusion)return new Sn(this.context.gl.GREATER,Sn.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!M)return Sn.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new Sn(E||this.context.gl.LEQUAL,A,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const c=this.context.gl,A=Math.ceil(this.width),E=Math.ceil(this.height),M=this.context.bindFramebuffer.get(),P=c.getParameter(c.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===A&&this.depthFBO.height===E||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),A!==0&&E!==0&&(this.depthFBO=new zl(this.context,A,E,!1,"texture"),this.depthTexture=new t.T(this.context,{width:A,height:E,data:null},c.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(M),c.bindTexture(c.TEXTURE_2D,P),this.depthFBO&&(c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindFramebuffer(c.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),c.blitFramebuffer(0,0,A,E,0,0,A,E,c.DEPTH_BUFFER_BIT,c.NEAREST),c.bindFramebuffer(c.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((c,A)=>c+A/this._fpsHistory.length,0))}render(c,A){const E=t.q.now();this._dt=E-this._timeStamp,this._timeStamp=E,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=c.map.repaint,this.style=c,this.options=A;const M=this.style._mergedLayers,P=!(!this.terrain||!this.terrain.enabled),j=()=>this.style._getOrder(P).filter(vr=>{const qt=M[vr];return!(qt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[qt.type]});let K=j(),te=!1,ge=!1,ve=null;for(const vr of K){const qt=M[vr];qt.type==="circle"?te=!0:qt.type==="building"?ve=qt:qt.type==="symbol"&&(qt.hasInitialOcclusionOpacityProperties?ge=!0:te=!0)}let Me=K.map(vr=>M[vr]);const Ce=this.style._mergedSourceCaches;this.imageManager=c.imageManager,this.modelManager=c.modelManager,this.symbolFadeChange=c.placement.symbolFadeChange(t.q.now()),this.imageManager.beginFrame();let Pe=0,Qe=!1;for(const vr in Ce){const qt=Ce[vr];qt.used&&(qt.prepare(this.context),qt.getSource().usedInConflation&&++Pe)}let je=!1;for(const vr of Me)vr.isHidden(this.transform.zoom)||(vr.type==="clip"&&(je=!0),this.prepareLayer(vr));const qe={},Ke={},lt={},dt={},vt={};for(const vr in Ce){const qt=Ce[vr];qe[vr]=qt.getVisibleCoordinates(),Ke[vr]=qe[vr].slice().reverse(),lt[vr]=qt.getVisibleCoordinates(!0).reverse(),dt[vr]=qt.getShadowCasterCoordinates(),vt[vr]=qt.sortCoordinatesByDistance(qe[vr])}const Tt=vr=>{const qt=this.style.getLayerSourceCache(vr);return qt&&qt.used?qt.getSource():null};if(Pe||je||this._clippingActiveLastFrame){const vr=[],qt=[];let kr=0;for(const br of Me)this.isSourceForClippingOrConflation(br,Tt(br))&&(vr.push(br),qt.push(kr)),kr++;if(vr&&(je||vr.length>1)||this._clippingActiveLastFrame){je=!1;const br=[];for(let an=0;an<vr.length;an++){const ln=vr[an],dn=qt[an],Mn=this.style.getLayerSourceCache(ln);if(!Mn||!Mn.used||!Mn.getSource().usedInConflation&&ln.type!=="clip"&&ln.type!=="building")continue;let di=t.eF,Ci=t.bW.None;const ti=[];let xi=!0;if(ln.type==="building")di=t.eH;else if(ln.type==="clip"){di=dn;for(const vi of ln.layout.get("clip-layer-types"))Ci|=vi==="model"?t.bW.Model:vi==="symbol"?t.bW.Symbol:t.bW.FillExtrusion;for(const vi of ln.layout.get("clip-layer-scope"))ti.push(vi);ln.isHidden(this.transform.zoom)?xi=!1:je=!0}xi&&br.push({layer:ln.fqid,cache:Mn,order:di,clipMask:Ci,clipScope:ti})}this.replacementSource.setSources(br),Qe=!0}}this._clippingActiveLastFrame=je,Qe||this.replacementSource.clear(),this.conflationActive=Qe,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let vr=0;vr<Me.length;vr++){const qt=Me[vr],kr=qt.cutoffRange();if(this.longestCutoffRange=Math.max(kr,this.longestCutoffRange),kr>0){const br=Tt(qt);br&&(this.minCutoffZoom=Math.max(br.minzoom,this.minCutoffZoom)),qt.minzoom&&(this.minCutoffZoom=Math.max(qt.minzoom,this.minCutoffZoom))}qt.is3D(P)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=vr),this._lastOcclusionLayer=vr)}const Dt=this.style&&this.style.fog;Dt?(this._fogVisible=Dt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Dt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(lt),this.opaquePassCutoff=0,K=j(),Me=K.map(vr=>M[vr]));const Vt=this._shadowRenderer;if(Vt){Vt.updateShadowParameters(this.transform,this.style.directionalLight);for(const vr in Ce)for(const qt of qe[vr]){let kr={min:0,max:0};this.terrain&&(kr=this.terrain.getMinMaxForTile(qt)||kr),Vt.addShadowReceiver(qt.toUnwrapped(),kr.min,kr.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new t.eG(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Ar(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const It=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Mt=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(It&&!this._snow&&(this._snow=new DA(this)),!It&&this._snow&&(this._snow.destroy(),delete this._snow),Mt&&!this._rain&&(this._rain=new jd(this)),!Mt&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),ve){this.buildingTileBorderManager||(this.buildingTileBorderManager=new qp);const vr=this.style.getLayerSourceCache(ve);this.buildingTileBorderManager.updateBorders(vr,ve)}if(!He.has(this.context.gl))return;this.renderPass="offscreen";for(const vr of Me){const qt=c.getLayerSourceCache(vr);if(!vr.hasOffscreenPass()||vr.isHidden(this.transform.zoom))continue;const kr=qt?Ke[qt.id]:void 0;(vr.type==="custom"||vr.type==="raster"||vr.type==="raster-particle"||vr.isSky()||kr&&kr.length)&&this.renderLayer(this,qt,vr,kr)}this.depthRangeFor3D=[0,1-(Me.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,dt)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Pt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),dr=(()=>{if(A.showOverdrawInspector)return t.am.black;const vr=this.style.fog;if(vr&&this.transform.projection.supportsFog){const qt=this.style.getLut(vr.scope);if(!Pt){const kr=vr.properties.get("color-use-theme")==="none",br=vr.properties.get("color").toNonPremultipliedRenderColor(kr?null:qt).toArray01();return new t.am(...br)}if(Pt){const kr=vr.properties.get("space-color-use-theme")==="none",br=vr.properties.get("space-color").toNonPremultipliedRenderColor(kr?null:qt).toArray01();return new t.am(...br)}}return t.am.transparent})();if(this.context.clear({color:dr,depth:1}),this.clearStencil(),this._showOverdrawInspector=A.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Pt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=K.length-1;this.currentLayer>=0;this.currentLayer--){const vr=Me[this.currentLayer],qt=c.getLayerSourceCache(vr);if(vr.isSky())continue;const kr=qt?(vr.is3D(P)?vt:Ke)[qt.id]:void 0;this._renderTileClippingMasks(vr,qt,kr),this.renderLayer(this,qt,vr,kr)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Pt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||t.ah(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){const vr=Me[this.currentLayer],qt=c.getLayerSourceCache(vr);vr.isSky()&&this.renderLayer(this,qt,vr,qt?Ke[qt.id]:void 0)}function sr(vr,qt){let kr;return qt&&(kr=(vr.type==="symbol"?lt:vr.is3D(P)?vt:Ke)[qt.id]),kr}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<K.length;){const vr=Me[this.currentLayer];if(vr.type==="raster"||vr.type==="raster-particle"){const qt=c.getLayerSourceCache(vr);this.renderLayer(this,qt,vr,sr(vr,qt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Qr=0;Vt&&(Qr=Vt.getShadowCastingLayerCount());let Br=!1,Jr=-1;for(let vr=0;vr<K.length;++vr){const qt=Me[vr];qt.isHidden(this.transform.zoom)||qt.is3D(P)&&(Jr=vr)}ge&&Jr===-1&&(te=!0);let yn=!1;for(;this.currentLayer<K.length;){const vr=Me[this.currentLayer],qt=c.getLayerSourceCache(vr);if(vr.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(vr)){if(vr.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!yn&&vr.is3D(P)&&!P){const kr=this.currentLayer,br=an=>{for(this.currentLayer=0;this.currentLayer<Me.length;this.currentLayer++){const ln=Me[this.currentLayer];if(sh[ln.type]){const dn=this.style.getLayerSourceCache(ln);sh[ln.type](this,dn,ln,sr(ln,dn),an)}}};br("initialize"),br("reset"),this.currentLayer=kr,yn=!0}if(te&&!Br&&this.terrain&&!this.transform.isOrthographic&&(Br=!0,this.blitDepth()),ge&&Jr!==-1&&this.currentLayer===Jr+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(vr,qt,qt?qe[qt.id]:void 0),this.renderLayer(this,qt,vr,sr(vr,qt)),!this.terrain&&Vt&&Qr>0&&vr.hasShadowPass()&&--Qr==0){{this.clearStencil(),this.resetStencilClippingMasks();const kr=this.currentLayer;for(this.currentLayer=0;this.currentLayer<Me.length;this.currentLayer++){const br=Me[this.currentLayer];if(zu[br.type]){const an=this.style.getLayerSourceCache(br);zu[br.type](this,an,br,sr(br,an))}}this.currentLayer=kr}if(Vt.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer){const kr=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=kr;this.currentLayer++){const br=Me[this.currentLayer];if(!br.hasLightBeamPass())continue;const an=c.getLayerSourceCache(br);this.renderLayer(this,an,br,an?Ke[an.id]:void 0)}this.currentLayer=kr,this.renderPass="translucent"}}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const kr=this.currentLayer;this.depthOcclusion=!0;for(const br of this.layersWithOcclusionOpacity){this.currentLayer=br;const an=Me[this.currentLayer],ln=c.getLayerSourceCache(an),dn=ln?Ke[ln.id]:void 0;this.terrain||this._renderTileClippingMasks(an,ln,ln?qe[ln.id]:void 0),this.renderLayer(this,ln,an,dn)}this.depthOcclusion=!1,this.currentLayer=kr,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let vr=null;Me.forEach(qt=>{const kr=c.getLayerSourceCache(qt);kr&&!qt.isHidden(this.transform.zoom)&&kr.getVisibleCoordinates().length&&(!vr||vr.getSource().maxzoom<kr.getSource().maxzoom)&&(vr=kr)}),vr&&this.options.showTileBoundaries&&Du(this,vr,vr.getVisibleCoordinates(),t.am.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Du(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new t.am(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(vr){const qt=vr.transform.padding;vh(vr,vr.transform.height-(qt.top||0),3,Kp),vh(vr,qt.bottom||0,3,Df),Rf(vr,qt.left||0,3,Vc),Rf(vr,vr.transform.width-(qt.right||0),3,Od);const kr=vr.transform.centerPoint;(function(br,an,ln,dn){nf(br,an-1,ln-10,2,20,dn),nf(br,an-10,ln-1,20,2,dn)})(vr,kr.x,vr.transform.height-kr.y,_p)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),Qe||(this.conflationActive=!1)}prepareLayer(c){this.gpuTimingStart(c);const{unsupportedLayers:A}=this.transform.projection,E=!A||!A.includes(c.type);if(nc[c.type]&&(E||this.terrain&&c.type==="custom")){const M=this.style.getLayerSourceCache(c);nc[c.type](c,M,this)}this.gpuTimingEnd()}renderLayer(c,A,E,M){E.isHidden(this.transform.zoom)||(E.type==="background"||E.type==="sky"||E.type==="custom"||E.type==="model"||E.type==="raster"||E.type==="raster-particle"||M&&M.length)&&(this.id=E.id,this.gpuTimingStart(E),c.transform.projection.unsupportedLayers&&c.transform.projection.unsupportedLayers.includes(E.type)&&(!c.terrain||E.type!=="custom")||E.type==="clip"||zd[E.type](c,A,E,M,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const A=this.context.extTimerQuery,E=this.context.gl;let M=this.gpuTimers[c.id];M||(M=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:E.createQuery()}),M.calls++,E.beginQuery(A.TIME_ELAPSED_EXT,M.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,A=this.context.gl,E=A.createQuery();this.deferredRenderGpuTimeQueries.push(E),A.beginQuery(c.TIME_ELAPSED_EXT,E)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const A={};for(const E in c){const M=c[E],P=this.context.extTimerQuery,j=P.getQueryParameter(M.query,this.context.gl.QUERY_RESULT)/1e6;P.deleteQueryEXT(M.query),A[E]=j}return A}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const A=this.context.gl;let E=0;for(const M of c)E+=A.getQueryParameter(M,A.QUERY_RESULT)/1e6,A.deleteQuery(M);return E}translatePosMatrix(c,A,E,M,P){if(!E[0]&&!E[1])return c;const j=P?M==="map"?this.transform.angle:0:M==="viewport"?-this.transform.angle:0;if(j){const ge=Math.sin(j),ve=Math.cos(j);E=[E[0]*ve-E[1]*ge,E[0]*ge+E[1]*ve]}const K=[P?E[0]:t.aw(A,E[0],this.transform.zoom),P?E[1]:t.aw(A,E[1],this.transform.zoom),0],te=new Float32Array(16);return t.bo(te,c,K),te}saveTileTexture(c){if(c.context!==this.context)return;const A=c.size[0],E=this._tileTextures[A];E?E.push(c):this._tileTextures[A]=[c]}getTileTexture(c){const A=this._tileTextures[c];return A&&A.length>0?A.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(c,A,E){const M=E===void 0?this.terrain&&this.terrain.renderingToTexture:E,P=[];return this.style&&this.style.enable3dLights()&&(c==="globeRaster"||c==="terrainRaster"?(P.push("LIGHTING_3D_MODE"),P.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):M||P.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||P.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(P.push("TERRAIN"),this.linearFloatFilteringSupported()&&P.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&P.push("GLOBE"),!this._fogVisible||M||A!==void 0&&!A||P.push("FOG","FOG_DITHERING"),M&&P.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&P.push("OVERDRAW_INSPECTOR"),P}getOrCreateProgram(c,A){this.cache=this.cache||{};const E=A&&A.defines||[],M=A&&A.config,P=this.currentGlobalDefines(c,A&&A.overrideFog,A&&A.overrideRtt).concat(E),j=Md.cacheKey(Nh[c],c,P,M);return this.cache[j]||(this.cache[j]=new Md(this.context,c,Nh[c],M,Qc[c],P)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(c,A){if(this.style.enable3dLights()){const E=this.style.directionalLight,M=this.style.ambientLight;if(E&&M){const P=((j,K,te)=>{const ge=j.properties.get("direction"),ve=j.properties.get("color-use-theme")==="none",Me=j.properties.get("color").toNonPremultipliedRenderColor(ve?null:te.getLut(j.scope)).toArray01(),Ce=j.properties.get("intensity"),Pe=K.properties.get("color-use-theme")==="none",Qe=K.properties.get("color").toNonPremultipliedRenderColor(Pe?null:te.getLut(K.scope)).toArray01(),je=K.properties.get("intensity"),qe=[ge.x,ge.y,ge.z],Ke=t.dI(Qe,je),lt=t.dI(Me,Ce);return{u_lighting_ambient_color:Ke,u_lighting_directional_dir:qe,u_lighting_directional_color:lt,u_ground_radiance:mp(qe,lt,Ke)}})(E,M,this.style);A.setLightsUniformValues(c,P)}}}uploadCommonUniforms(c,A,E,M,P){if(this.uploadCommonLightUniforms(c,A),this.terrain&&this.terrain.renderingToTexture)return;const j=this.style.fog;if(j){const K=j.getOpacity(this.transform.pitch),te=((ge,ve,Me,Ce,Pe,Qe,je,qe,Ke,lt,dt,vt)=>{const Tt=ge.transform,Dt=ve.properties.get("color-use-theme")==="none",Vt=ve.properties.get("color").toNonPremultipliedRenderColor(Dt?null:ge.style.getLut(ve.scope)).toArray01();Vt[3]=Ce;const It=ge.frameCounter/1e3%1,[Mt,Pt]=ve.properties.get("vertical-range");return{u_fog_matrix:Me?Tt.calculateFogTileMatrix(Me):vt||ge.identityMat,u_fog_range:ve.getFovAdjustedRange(Tt._fov),u_fog_color:Vt,u_fog_horizon_blend:ve.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Mt,Pt),Pt],u_fog_temporal_offset:It,u_frustum_tl:Pe,u_frustum_tr:Qe,u_frustum_br:je,u_frustum_bl:qe,u_globe_pos:Ke,u_globe_radius:lt,u_viewport:dt,u_globe_transition:t.ah(Tt.zoom),u_is_globe:+(Tt.projection.name==="globe")}})(this,j,E,K,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.q.devicePixelRatio,this.transform.height*t.q.devicePixelRatio],M);A.setFogUniformValues(c,te)}P&&A.setCutoffUniformValues(c,P.uniformValues)}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,A=c.createTexture();return c.bindTexture(c.TEXTURE_2D,A),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),A}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,A=this._backgroundTiles={},E=this.transform.coveringTiles({tileSize:512});for(const M of E)A[M.key]=c[M.key]||new Jl(M,512,this.transform.tileZoom,this,void 0,this.worldview);return A}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(c,A){return!(!c.is3D(!(!this.terrain||!this.terrain.enabled))||c.type!=="clip"&&c.type!=="building"&&(c.minzoom&&c.minzoom>this.transform.zoom||(this.style._clipLayerPresent||c.sourceLayer!=="building"&&c.sourceLayer!=="procedural_buildings")&&(!A||A.type!=="batched-model")))}isTileAffectedByFog(c){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let A=this._cachedTileFogOpacities[c.key];return A||(this._cachedTileFogOpacities[c.key]=A=this.style.fog.getOpacityForTile(c)),A[0]>=_r||A[1]>=_r}setupDepthForOcclusion(c,A,E){const M=this.context,P=M.gl,j=!!E;var K;E||(E={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),M.activeTexture.set(P.TEXTURE3),c&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE),E.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],E.u_depth_range_unpack=[2/((K=this.depthRangeFor3D)[1]-K[0]),-1-2*K[0]/(K[1]-K[0])],E.u_occluder_half_size=.5*this.occlusionParams.occluderSize,E.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE),M.activeTexture.set(P.TEXTURE0),j||A.setTerrainUniformValues(M,E)}}function lf(C,c){let A=!1,E=null;const M=()=>{E=null,A&&(C(),E=setTimeout(M,c),A=!1)};return()=>(A=!0,E||M(),E)}class cf{constructor(c){this._hashName=c&&encodeURIComponent(c),t.aV(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=lf(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const A=bp(c);if(this._hashName){const E=this._hashName;let M=!1;const P=location.hash.slice(1).split("&").map(j=>{const K=j.split("=")[0];return K===E?(M=!0,`${K}=${A}`):j}).filter(j=>j);return M||P.push(`${E}=${A}`),`#${P.join("&")}`}return`#${A}`}_getCurrentHash(){const c=location.hash.replace("#","");if(this._hashName){let A;return c.split("&").map(E=>E.split("=")).forEach(E=>{E[0]===this._hashName&&(A=E)}),(A&&A[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const A=this._getCurrentHash();if(A.length>=3&&!A.some(E=>isNaN(Number(E)))){const E=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(A[3]||0):c.getBearing();return c.jumpTo({center:[+A[2],+A[1]],zoom:+A[0],bearing:E,pitch:+(A[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function bp(C,c){const A=C.getCenter(),E=Math.round(100*C.getZoom())/100,M=Math.ceil((E*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,M),j=Math.round(A.lng*P)/P,K=Math.round(A.lat*P)/P,te=C.getBearing(),ge=C.getPitch();let ve=c?`/${j}/${K}/${E}`:`${E}/${K}/${j}`;return(te||ge)&&(ve+="/"+Math.round(10*te)/10),ge&&(ve+=`/${Math.round(ge)}`),ve}const Hd={linearity:.3,easing:t.eI(0,0,.3,1)},Qh=t.h({deceleration:2500,maxSpeed:1400},Hd),Yp=t.h({deceleration:20,maxSpeed:1400},Hd),cu=t.h({deceleration:1e3,maxSpeed:360},Hd),Qd=t.h({deceleration:1e3,maxSpeed:90},Hd);class RA{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.q.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,A=t.q.now();for(;c.length>0&&A-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const A={zoom:0,bearing:0,pitch:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:P}of this._inertiaBuffer)A.zoom+=P.zoomDelta||0,A.bearing+=P.bearingDelta||0,A.pitch+=P.pitchDelta||0,P.panDelta&&A.pan._add(P.panDelta),P.around&&(A.around=P.around),P.pinchAround&&(A.pinchAround=P.pinchAround);const E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(A.pan.mag()){const P=Ch(A.pan.mag(),E,t.h({},Qh,c||{}));M.offset=A.pan.mult(P.amount/A.pan.mag()),M.center=this._map.transform.center,ad(M,P)}if(A.zoom){const P=Ch(A.zoom,E,Yp);M.zoom=this._map.transform.zoom+P.amount,ad(M,P)}if(A.bearing){const P=Ch(A.bearing,E,cu);M.bearing=this._map.transform.bearing+t.ay(P.amount,-179,179),ad(M,P)}if(A.pitch){const P=Ch(A.pitch,E,Qd);M.pitch=this._map.transform.pitch+P.amount,ad(M,P)}if(M.zoom||M.bearing){const P=A.pinchAround===void 0?A.around:A.pinchAround;M.around=P?this._map.unproject(P):this._map.getCenter()}return this.clear(),M.noMoveStart=!0,M}}function ad(C,c){(!C.duration||C.duration<c.duration)&&(C.duration=c.duration,C.easing=c.easing)}function Ch(C,c,A){const{maxSpeed:E,linearity:M,deceleration:P}=A,j=t.ay(C*M/(c/1e3),-E,E),K=Math.abs(j)/(P*M);return{easing:A.easing,duration:1e3*K,amount:j*(K/2)}}class Lo extends t.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,A,E,M={}){const P=ee(A.getCanvasContainer(),E),j=A.unproject(P);super(c,t.h({point:P,lngLat:j,originalEvent:E},M)),this._defaultPrevented=!1,this.target=A}}class uf extends t.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,A,E){const M=c==="touchend"?E.changedTouches:E.touches,P=ne(A.getCanvasContainer(),M),j=P.map(te=>A.unproject(te)),K=P.reduce((te,ge,ve,Me)=>te.add(ge.div(Me.length)),new t.P(0,0));super(c,{points:P,point:K,lngLats:j,lngLat:A.unproject(K),originalEvent:E}),this._defaultPrevented=!1}}class xp extends t.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,A){super("wheel",{originalEvent:A}),this._defaultPrevented=!1}}class Xp{constructor(c,A){this._map=c,this._clickTolerance=A.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new xp(this._map,c))}mousedown(c,A){return this._mousedownPos=A,this._firePreventable(new Lo(c.type,this._map,c))}mouseup(c){this._map.fire(new Lo(c.type,this._map,c))}preclick(c){const A=t.h({},c);A.type="preclick",this._map.fire(new Lo(A.type,this._map,A))}click(c,A){this._mousedownPos&&this._mousedownPos.dist(A)>=this._clickTolerance||(this.preclick(c),this._map.fire(new Lo(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new Lo(c.type,this._map,c))}mouseover(c){this._map.fire(new Lo(c.type,this._map,c))}mouseout(c){this._map.fire(new Lo(c.type,this._map,c))}touchstart(c){return this._firePreventable(new uf(c.type,this._map,c))}touchmove(c){this._map.fire(new uf(c.type,this._map,c))}touchend(c){this._map.fire(new uf(c.type,this._map,c))}touchcancel(c){this._map.fire(new uf(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hf{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new Lo(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Lo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new Lo(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xm{constructor(c,A){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=A.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,A){this.isEnabled()&&c.shiftKey&&c.button===0&&(O(),this._startPos=this._lastPos=A,this._active=!0)}mousemoveWindow(c,A){if(!this._active)return;const E=A,M=this._startPos,P=this._lastPos;if(!M||!P||P.equals(E)||!this._box&&E.dist(M)<this._clickTolerance)return;this._lastPos=E,this._box||(this._box=x("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const j=Math.min(M.x,E.x),K=Math.max(M.x,E.x),te=Math.min(M.y,E.y),ge=Math.max(M.y,E.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${j}px,${te}px)`,this._box.style.width=K-j+"px",this._box.style.height=ge-te+"px")})}mouseupWindow(c,A){if(!this._active)return;const E=this._startPos,M=A;if(E&&c.button===0){if(this.reset(),Q(),E.x!==M.x||E.y!==M.y)return this._map.fire(new t.A("boxzoomend",{originalEvent:c})),{cameraAnimation:P=>P.fitScreenCoordinates(E,M,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),V(),delete this._startPos,delete this._lastPos}_fireEvent(c,A){return this._map.fire(new t.A(c,{originalEvent:A}))}}function Vd(C,c){const A={};for(let E=0;E<C.length;E++)A[C[E].identifier]=c[E];return A}class ld{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,A,E){(this.centroid||E.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),E.length===this.numTouches&&(this.centroid=function(M){const P=new t.P(0,0);for(const j of M)P._add(j);return P.div(M.length)}(A),this.touches=Vd(E,A)))}touchmove(c,A,E){if(this.aborted||!this.centroid)return;const M=Vd(E,A);for(const P in this.touches){const j=M[P];(!j||j.dist(this.touches[P])>30)&&(this.aborted=!0)}}touchend(c,A,E){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),E.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class ff{constructor(c){this.singleTap=new ld(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,A,E){this.singleTap.touchstart(c,A,E)}touchmove(c,A,E){this.singleTap.touchmove(c,A,E)}touchend(c,A,E){const M=this.singleTap.touchend(c,A,E);if(M){const P=c.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(M)<30;if(P&&j||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class wp{constructor(){this._zoomIn=new ff({numTouches:1,numTaps:2}),this._zoomOut=new ff({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,A,E){this._zoomIn.touchstart(c,A,E),this._zoomOut.touchstart(c,A,E)}touchmove(c,A,E){this._zoomIn.touchmove(c,A,E),this._zoomOut.touchmove(c,A,E)}touchend(c,A,E){const M=this._zoomIn.touchend(c,A,E),P=this._zoomOut.touchend(c,A,E);return M?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()+1,around:j.unproject(M)},{originalEvent:c})}):P?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()-1,around:j.unproject(P)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Zp={0:1,2:2},Sp={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class bu{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,A){return!1}_move(c,A){return{}}mousedown(c,A){if(this._lastPoint)return;const E=Ae(c);this._correctButton(c,E)&&(this._lastPoint=A,this._eventButton=E)}mousemoveWindow(c,A){const E=this._lastPoint;if(E){if(c.preventDefault(),this._eventButton!=null&&function(M,P){const j=Zp[P];return M.buttons===void 0||(M.buttons&j)!==j}(c,this._eventButton))this.reset();else if(this._moved||!(A.dist(E)<this._clickTolerance))return this._moved=!0,this._lastPoint=A,this._move(E,A)}}mouseupWindow(c){this._lastPoint&&Ae(c)===this._eventButton&&(this._moved&&Q(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class NA extends bu{mousedown(c,A){super.mousedown(c,A),this._lastPoint&&(this._active=!0)}_correctButton(c,A){return A===0&&!c.ctrlKey}_move(c,A){return{around:A,panDelta:A.sub(c)}}}class cd extends bu{constructor(c){super(c),this._pitchRotateKey=c.pitchRotateKey?Sp[c.pitchRotateKey]:void 0}_correctButton(c,A){return this._pitchRotateKey?A===0&&c[this._pitchRotateKey]:A===0&&c.ctrlKey||A===2}_move(c,A){const E=.8*(A.x-c.x);if(E)return this._active=!0,{bearingDelta:E}}contextmenu(c){this._pitchRotateKey||c.preventDefault()}}class Cp extends bu{constructor(c){super(c),this._pitchRotateKey=c.pitchRotateKey?Sp[c.pitchRotateKey]:void 0}_correctButton(c,A){return this._pitchRotateKey?A===0&&c[this._pitchRotateKey]:A===0&&c.ctrlKey||A===2}_move(c,A){const E=-.5*(A.y-c.y);if(E)return this._active=!0,{pitchDelta:E}}contextmenu(c){this._pitchRotateKey||c.preventDefault()}}class jA{constructor(c,A){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=A.clickTolerance||1,this.reset(),t.aV(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}touchstart(c,A,E){return this._calculateTransform(c,A,E)}touchmove(c,A,E){if(this._active&&!(E.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(E.length===1&&!t.eJ())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,A,E)}}touchend(c,A,E){this._calculateTransform(c,A,E),this._active&&E.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,A,E){E.length>0&&(this._active=!0);const M=Vd(E,A),P=new t.P(0,0),j=new t.P(0,0);let K=0;for(const ge in M){const ve=M[ge],Me=this._touches[ge];Me&&(P._add(ve),j._add(ve.sub(Me)),K++,M[ge]=ve)}if(this._touches=M,K<this._minTouches||!j.mag())return;const te=j.div(K);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:P.div(K),panDelta:te}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=x("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Jp{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,A,E){return{}}touchstart(c,A,E){this._firstTwoTouches||E.length<2||(this._firstTwoTouches=[E[0].identifier,E[1].identifier],this._start([A[0],A[1]]))}touchmove(c,A,E){const M=this._firstTwoTouches;if(!M)return;c.preventDefault();const[P,j]=M,K=eA(E,A,P),te=eA(E,A,j);if(!K||!te)return;const ge=this._aroundCenter?null:K.add(te).div(2);return this._move([K,te],ge,c)}touchend(c,A,E){if(!this._firstTwoTouches)return;const[M,P]=this._firstTwoTouches,j=eA(E,A,M),K=eA(E,A,P);j&&K||(this._active&&Q(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function eA(C,c,A){for(let E=0;E<C.length;E++)if(C[E].identifier===A)return c[E]}function Eh(C,c){return Math.log(C/c)/Math.LN2}class tA extends Jp{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,A){const E=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Eh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Eh(this._distance,E),pinchAround:A}}}function rA(C,c){return 180*C.angleWith(c)/Math.PI}class UA extends Jp{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,A){const E=this._vector;if(this._vector=c[0].sub(c[1]),E&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:rA(this._vector,E),pinchAround:A}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const A=25/(Math.PI*this._minDiameter)*360,E=this._startVector;if(!E)return!1;const M=rA(c,E);return Math.abs(M)<A}}function Bh(C){return Math.abs(C.y)>Math.abs(C.x)}class ud extends Jp{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,Bh(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,A,E){const M=this._lastPoints;if(!M)return;const P=c[0].sub(M[0]),j=c[1].sub(M[1]);return this._map._cooperativeGestures&&!t.eJ()&&E.touches.length<3||(this._valid=this.gestureBeginsVertically(P,j,E.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(P.y+j.y)/2*-.5})}gestureBeginsVertically(c,A,E){if(this._valid!==void 0)return this._valid;const M=c.mag()>=2,P=A.mag()>=2;if(!M&&!P)return;if(!M||!P)return this._firstMove==null&&(this._firstMove=E),E-this._firstMove<100&&void 0;const j=c.y>0==A.y>0;return Bh(c)&&Bh(A)&&j}}const ls={panStep:100,bearingStep:15,pitchStep:10};class Vh{constructor(){const c=ls;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let A=0,E=0,M=0,P=0,j=0;switch(c.keyCode){case 61:case 107:case 171:case 187:A=1;break;case 189:case 109:case 173:A=-1;break;case 37:c.shiftKey?E=-1:(c.preventDefault(),P=-1);break;case 39:c.shiftKey?E=1:(c.preventDefault(),P=1);break;case 38:c.shiftKey?M=1:(c.preventDefault(),j=-1);break;case 40:c.shiftKey?M=-1:(c.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(E=0,M=0),{cameraAnimation:K=>{const te=K.getZoom();K.easeTo({duration:300,easeId:"keyboardHandler",easing:jf,zoom:A?Math.round(te)+A*(c.shiftKey?2:1):te,bearing:K.getBearing()+E*this._bearingStep,pitch:K.getPitch()+M*this._pitchStep,offset:[-P*this._panStep,-j*this._panStep],center:K.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function jf(C){return C*(2-C)}const xu=4.000244140625,hd=1/450;class Gd{constructor(c,A){this._map=c,this._el=c.getCanvasContainer(),this._handler=A,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=hd,t.aV(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||t.eJ()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let A=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const E=t.q.now(),M=E-(this._lastWheelEventTime||0);this._lastWheelEventTime=E,A!==0&&A%xu==0?this._type="wheel":A!==0&&Math.abs(A)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=A,this._timeout=window.setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(M*A)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,A+=this._lastValue)),c.shiftKey&&A&&(A/=4),this._type&&(this._lastWheelEvent=c,this._delta-=A,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const A=ee(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:A,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const A=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const ge=this._type==="wheel"&&Math.abs(this._delta)>xu?this._wheelZoomRate:this._defaultZoomRate;let ve=2/(1+Math.exp(-Math.abs(this._delta*ge)));this._delta<0&&ve!==0&&(ve=1/ve);const Me=A(),Ce=Math.pow(2,Me),Pe=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):Ce;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(Pe*ve))),this._type==="wheel"&&(this._startZoom=Me,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const E=typeof this._targetZoom=="number"?this._targetZoom:A(),M=this._startZoom,P=this._easing;let j,K=!1;if(this._type==="wheel"&&M&&P){const ge=Math.min((t.q.now()-this._lastWheelEventTime)/200,1),ve=P(ge);j=t.ai(M,E,ve),ge<1?this._frameId||(this._frameId=!0):K=!0}else j=E,K=!0;this._active=!0,K&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let te=j-A();return te*this._lastDelta<0&&(te=0),{noInertia:!0,needsRenderFrame:!K,zoomDelta:te,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let A=t.eK;if(this._prevEase){const E=this._prevEase,M=(t.q.now()-E.start)/E.duration,P=E.easing(M+.01)-E.easing(M),j=.27/Math.sqrt(P*P+1e-4)*.01,K=Math.sqrt(.0729-j*j);A=t.eI(j,K,.25,1)}return this._prevEase={start:t.q.now(),duration:c,easing:A},A}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=x("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class wo{constructor(c,A){this._clickZoom=c,this._tapZoom=A}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Lc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,A){return c.preventDefault(),{cameraAnimation:E=>{E.easeTo({duration:300,zoom:E.getZoom()+(c.shiftKey?-1:1),around:E.unproject(A)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ig{constructor(){this._tap=new ff({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,A,E){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?E.length>0&&(this._swipePoint=A[0],this._swipeTouch=E[0].identifier):this._tap.touchstart(c,A,E))}touchmove(c,A,E){if(this._tapTime){if(this._swipePoint){if(E[0].identifier!==this._swipeTouch)return;const M=A[0],P=M.y-this._swipePoint.y;return this._swipePoint=M,c.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(c,A,E)}touchend(c,A,E){this._tapTime?this._swipePoint&&E.length===0&&this.reset():this._tap.touchend(c,A,E)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zA{constructor(c,A,E){this._el=c,this._mousePan=A,this._touchPan=E}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class HA{constructor(c,A,E){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=A,this._mousePitch=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Uf{constructor(c,A,E,M){this._el=c,this._touchZoom=A,this._touchRotate=E,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Wd=C=>C.zoom||C.drag||C.pitch||C.rotate;class QA extends t.A{}class fd{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,A){const E=t.at([],A,c);this.radius=t.ae(E[2]<0?t.eM([],E,this.constants):[E[0],E[1],0])}projectRay(c){t.eM(c,c,this.constants),t.au(c,c),t.eN(c,c,this.constants);const A=t.c1([],c,this.radius);if(A[2]>0){const E=t.c1([],[0,0,1],t.bG(A,[0,0,1])),M=t.c1([],t.au([],[A[0],A[1],0]),this.radius),P=t.d5([],A,t.c1([],t.at([],t.d5([],M,E),A),2));A[0]=P[0],A[1]=P[1]}return A}}function Th(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Ih{constructor(c,A){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new RA(c),this._bearingSnap=A.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new fd,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(A),t.aV(["handleEvent","handleWindowEvent"],this);const E=this._el;this._listeners=[[E,"touchstart",{passive:!0}],[E,"touchmove",{passive:!1}],[E,"touchend",void 0],[E,"touchcancel",void 0],[E,"mousedown",void 0],[E,"mousemove",void 0],[E,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[E,"mouseover",void 0],[E,"mouseout",void 0],[E,"dblclick",void 0],[E,"click",void 0],[E,"keydown",{capture:!1}],[E,"keyup",void 0],[E,"wheel",{passive:!1}],[E,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,P,j]of this._listeners){const K=M===document?this.handleWindowEvent:this.handleEvent;M.addEventListener(P,K,j)}}destroy(){for(const[c,A,E]of this._listeners){const M=c===document?this.handleWindowEvent:this.handleEvent;c.removeEventListener(A,M,E)}}_addDefaultHandlers(c){const A=this._map,E=A.getCanvasContainer();this._add("mapEvent",new Xp(A,c));const M=A.boxZoom=new xm(A,c);this._add("boxZoom",M);const P=new wp,j=new Lc;A.doubleClickZoom=new wo(j,P),this._add("tapZoom",P),this._add("clickZoom",j);const K=new ig;this._add("tapDragZoom",K);const te=A.touchPitch=new ud(A);this._add("touchPitch",te);const ge=new cd(c),ve=new Cp(c);A.dragRotate=new HA(c,ge,ve),this._add("mouseRotate",ge,["mousePitch"]),this._add("mousePitch",ve,["mouseRotate"]);const Me=new NA(c),Ce=new jA(A,c);A.dragPan=new zA(E,Me,Ce),this._add("mousePan",Me),this._add("touchPan",Ce,["touchZoom","touchRotate"]);const Pe=new UA,Qe=new tA;A.touchZoomRotate=new Uf(E,Qe,Pe,K),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new hf(A));const je=A.scrollZoom=new Gd(A,this);this._add("scrollZoom",je,["mousePan"]);const qe=A.keyboard=new Vh;this._add("keyboard",qe);for(const Ke of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[Ke]&&A[Ke].enable(c[Ke])}_add(c,A,E){this._handlers.push({handlerName:c,handler:A,allowed:E}),this._handlersById[c]=A}stop(c){if(!this._updatingCamera){for(const{handler:A}of this._handlers)A.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Wd(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,A,E){for(const M in c)if(M!==E&&(!A||A.indexOf(M)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const A=[];for(const E of c)this._el.contains(E.target)&&A.push(E);return A}handleEvent(c,A){this._updatingCamera=!0;const E=c.type==="renderFrame",M=E?void 0:c,P={needsRenderFrame:!1},j={},K={},te=c.touches?this._getMapTouches(c.touches):void 0,ge=te?ne(this._el,te):E?void 0:ee(this._el,c);for(const{handlerName:Ce,handler:Pe,allowed:Qe}of this._handlers){if(!Pe.isEnabled())continue;let je;this._blockedByActive(K,Qe,Ce)?Pe.reset():Pe[A||c.type]&&(je=Pe[A||c.type](c,ge,te),this.mergeHandlerResult(P,j,je,Ce,M),je&&je.needsRenderFrame&&this._triggerRenderFrame()),(je||Pe.isActive())&&(K[Ce]=Pe)}const ve={};for(const Ce in this._previousActiveHandlers)K[Ce]||(ve[Ce]=M);this._previousActiveHandlers=K,(Object.keys(ve).length||Th(P))&&(this._changes.push([P,j,ve]),this._triggerRenderFrame()),(Object.keys(K).length||Th(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Me}=P;Me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Me(this._map))}mergeHandlerResult(c,A,E,M,P){if(!E)return;t.h(c,E);const j={handlerName:M,originalEvent:E.originalEvent||P};E.zoomDelta!==void 0&&(A.zoom=j),E.panDelta!==void 0&&(A.drag=j),E.pitchDelta!==void 0&&(A.pitch=j),E.bearingDelta!==void 0&&(A.rotate=j)}_applyChanges(){const c={},A={},E={};for(const[M,P,j]of this._changes)M.panDelta&&(c.panDelta=(c.panDelta||new t.P(0,0))._add(M.panDelta)),M.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+M.pitchDelta),M.around!==void 0&&(c.around=M.around),M.aroundCoord!==void 0&&(c.aroundCoord=M.aroundCoord),M.pinchAround!==void 0&&(c.pinchAround=M.pinchAround),M.noInertia&&(c.noInertia=M.noInertia),t.h(A,P),t.h(E,j);this._updateMapTransform(c,A,E),this._changes=[]}_updateMapTransform(c,A,E){const M=this._map,P=M.transform,j=lt=>[lt.x,lt.y,lt.z];if((lt=>{const dt=this._eventsInProgress.drag;return dt&&!this._handlersById[dt.handlerName].isActive()})()&&!Th(c)){const lt=P.zoom;P.cameraElevationReference="sea",this._originalZoom!=null&&P._orthographicProjectionAtLowPitch&&P.projection.name!=="globe"&&P.pitch===0?(P.cameraElevationReference="ground",P.zoom=this._originalZoom):(P.recenterOnTerrain(),P.cameraElevationReference="ground"),lt!==P.zoom&&this._map._update(!0)}if(P._isCameraConstrained&&M._stop(!0),!Th(c))return void this._fireEvents(A,E,!0);let{panDelta:K,zoomDelta:te,bearingDelta:ge,pitchDelta:ve,around:Me,aroundCoord:Ce,pinchAround:Pe}=c;P._isCameraConstrained&&(te>0&&(te=0),P._isCameraConstrained=!1),Pe!==void 0&&(Me=Pe),(te||(lt=>A[lt]&&!this._eventsInProgress[lt])("drag"))&&Me&&(this._dragOrigin=j(P.pointCoordinate3D(Me)),this._originalZoom=P.zoom,this._trackingEllipsoid.setup(P._camera.position,this._dragOrigin)),P.cameraElevationReference="sea",M._stop(!0),Me=Me||M.transform.centerPoint,ge&&(P.bearing+=ge),ve&&(P.pitch+=ve),P._updateCameraState();const Qe=[0,0,0];if(K)if(P.projection.name==="mercator"){const lt=this._trackingEllipsoid.projectRay(P.screenPointToMercatorRay(Me).dir),dt=this._trackingEllipsoid.projectRay(P.screenPointToMercatorRay(Me.sub(K)).dir);Qe[0]=dt[0]-lt[0],Qe[1]=dt[1]-lt[1]}else{const lt=P.pointCoordinate(Me);if(P.projection.name==="globe"){K=K.rotate(-P.angle);const dt=P._pixelsPerMercatorPixel/P.worldSize;Qe[0]=-K.x*t.eL(t.aY(lt.y))*dt,Qe[1]=-K.y*t.eL(P.center.lat)*dt}else{const dt=P.pointCoordinate(Me.sub(K));lt&&dt&&(Qe[0]=dt.x-lt.x,Qe[1]=dt.y-lt.y)}}const je=P.zoom,qe=[0,0,0];if(te){const lt=j(Ce||P.pointCoordinate3D(Me)),dt={dir:t.au([],t.at([],lt,P._camera.position))};if(dt.dir[2]<0){const vt=P.zoomDeltaToMovement(lt,te);t.c1(qe,dt.dir,vt)}}const Ke=t.d5(Qe,Qe,qe);P._translateCameraConstrained(Ke),te&&Math.abs(P.zoom-je)>1e-4&&P.recenterOnTerrain(),P.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(A,E,!0)}_fireEvents(c,A,E){const M=Wd(this._eventsInProgress),P=Wd(c),j={};for(const ve in c){const{originalEvent:Me}=c[ve];this._eventsInProgress[ve]||(j[`${ve}start`]=Me),this._eventsInProgress[ve]=c[ve]}!M&&P&&this._fireEvent("movestart",P.originalEvent);for(const ve in j)this._fireEvent(ve,j[ve]);P&&this._fireEvent("move",P.originalEvent);for(const ve in c){const{originalEvent:Me}=c[ve];this._fireEvent(ve,Me)}const K={};let te;for(const ve in this._eventsInProgress){const{handlerName:Me,originalEvent:Ce}=this._eventsInProgress[ve];this._handlersById[Me].isActive()||(delete this._eventsInProgress[ve],te=A[Me]||Ce,K[`${ve}end`]=te)}for(const ve in K)this._fireEvent(ve,K[ve]);const ge=Wd(this._eventsInProgress);if(E&&(M||P)&&!ge){this._updatingCamera=!0;const ve=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Me=Ce=>Ce!==0&&-this._bearingSnap<Ce&&Ce<this._bearingSnap;ve?(Me(ve.bearing||this._map.getBearing())&&(ve.bearing=0),this._map.easeTo(ve,{originalEvent:te})):(this._map.fire(new t.A("moveend",{originalEvent:te})),Me(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,A){this._map.fire(new t.A(c,A?{originalEvent:A}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new QA("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Io="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Mh extends t.E{constructor(c,A){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=A.bearingSnap,this._respectPrefersReducedMotion=A.respectPrefersReducedMotion!==!1,t.aV(["_renderFrameCallback"],this)}getCenter(){return new t.ci(this.transform.center.lng,this.transform.center.lat)}setCenter(c,A){return this.jumpTo({center:c},A)}panBy(c,A,E){return c=t.P.convert(c).mult(-1),this.panTo(this.transform.center,t.h({offset:c},A),E)}panTo(c,A,E){return this.easeTo(t.h({center:c},A),E)}getZoom(){return this.transform.zoom}setZoom(c,A){return this.jumpTo({zoom:c},A),this}zoomTo(c,A,E){return this.easeTo(t.h({zoom:c},A),E)}zoomIn(c,A){return this.zoomTo(this.getZoom()+1,c,A),this}zoomOut(c,A){return this.zoomTo(this.getZoom()-1,c,A),this}getBearing(){return this.transform.bearing}setBearing(c,A){return this.jumpTo({bearing:c},A),this}getPadding(){return this.transform.padding}setPadding(c,A){return this.jumpTo({padding:c},A),this}rotateTo(c,A,E){return this.easeTo(t.h({bearing:c},A),E)}resetNorth(c,A){return this.rotateTo(0,t.h({duration:1e3},c),A),this}resetNorthPitch(c,A){return this.easeTo(t.h({bearing:0,pitch:0,duration:1e3},c),A),this}snapToNorth(c,A){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,A):this}getPitch(){return this.transform.pitch}setPitch(c,A){return this.jumpTo({pitch:c},A),this}cameraForBounds(c,A){c=t.aG.convert(c);const E=A&&A.bearing||0,M=A&&A.pitch||0,P=c.getNorthWest(),j=c.getSouthEast();return this._cameraForBounds(this.transform,P,j,E,M,A)}_extendPadding(c){const A={top:0,right:0,bottom:0,left:0};return c==null?t.h({},A,this.transform.padding):typeof c=="number"?{top:c,bottom:c,right:c,left:c}:t.h({},A,c)}_extendCameraOptions(c){return(c=t.h({offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=this._extendPadding(c.padding),c}_minimumAABBFrustumDistance(c,A){const E=A.max[0]-A.min[0],M=A.max[1]-A.min[1];return E/M>c.aspect?E/(2*Math.tan(.5*c.fovX)*c.aspect):M/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,A,E,M,P,j){const K=c.clone(),te=this._extendCameraOptions(j);K.bearing=M,K.pitch=P;const ge=t.ci.convert(A),ve=t.ci.convert(E),Me=.5*(ge.lat+ve.lat),Ce=.5*(ge.lng+ve.lng),Pe=t.eO(Me,Ce),Qe=t.au([],Pe),je=t.au([],t.bF([],Qe,[0,1,0])),qe=t.bF([],je,Qe),Ke=[je[0],je[1],je[2],0,qe[0],qe[1],qe[2],0,Qe[0],Qe[1],Qe[2],0,0,0,0,1],lt=[Pe,t.eO(ge.lat,ge.lng),t.eO(ve.lat,ge.lng),t.eO(ve.lat,ve.lng),t.eO(ge.lat,ve.lng),t.eO(Me,ge.lng),t.eO(Me,ve.lng),t.eO(ge.lat,Ce),t.eO(ve.lat,Ce)];let dt=t.d6.fromPoints(lt.map(br=>[t.bG(je,br),t.bG(qe,br),t.bG(Qe,br)]));const vt=t.ad([],dt.center,Ke);t.eP(vt)===0&&t.eQ(vt,0,0,1),t.au(vt,vt),t.c1(vt,vt,t.aB),K.center=t.eR(vt);const Tt=K.getWorldToCameraMatrix(),Dt=t.bi(new Float64Array(16),Tt);dt=t.d6.applyTransform(dt,t.az([],Tt,Ke));const Vt=this._extendAABB(dt,K,te,M);if(!Vt)return void t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");dt=Vt,t.ad(vt,vt,Tt);const It=.5*(dt.max[2]-dt.min[2]),Mt=this._minimumAABBFrustumDistance(K,dt),Pt=t.c1([],[0,0,1],It),dr=t.d5(Pt,vt,Pt),sr=Mt+(K.pitch===0?0:t.bD(vt,dr)),Qr=K.globeCenterInViewSpace,Br=t.at([],vt,[Qr[0],Qr[1],Qr[2]]);t.au(Br,Br),t.c1(Br,Br,sr);const Jr=t.d5([],vt,Br);t.ad(Jr,Jr,Dt);const yn=t.eB/t.aB,vr=t.ae(Jr),qt=t.cb(Math.max(vr*yn-t.eB,Number.EPSILON),0),kr=Math.min(K.zoomFromMercatorZAdjusted(qt),te.maxZoom);return kr>.5*(t.cX+t.cI)?(K.setProjection({name:"mercator"}),K.zoom=kr,this._cameraForBounds(K,A,E,M,P,j)):{center:K.center,zoom:kr,bearing:M,pitch:P}}_extendAABB(c,A,E,M){const P=.5*((E.padding.left||0)+(E.padding.right||0)),j=.5*((E.padding.top||0)+(E.padding.bottom||0)),K=j,te=P,ge=P,ve=j,Me=A.width-(te+ge),Ce=A.height-(K+ve),Pe=t.at([],c.max,c.min),Qe=Math.min(Me/Pe[0],Ce/Pe[1]),je=Math.min(A.scaleZoom(A.scale*Qe),E.maxZoom);if(isNaN(je))return null;const qe=A.scale/A.zoomScale(je),Ke=new t.d6([c.min[0]-te*qe,c.min[1]-ve*qe,c.min[2]],[c.max[0]+ge*qe,c.max[1]+K*qe,c.max[2]]),lt=(typeof E.offset.x=="number"&&typeof E.offset.y=="number"?new t.P(E.offset.x,E.offset.y):t.P.convert(E.offset)).rotate(-t.al(M));return Ke.center[0]-=lt.x*qe,Ke.center[1]+=lt.y*qe,Ke}queryTerrainElevation(c,A){const E=this.transform.elevation;return E?(A=t.h({},{exaggerated:!0},A),E.getAtPoint(t.ac.fromLngLat(c),null,A.exaggerated)):null}_cameraForBounds(c,A,E,M,P,j){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,A,E,M,P,j);const K=c.clone(),te=this._extendCameraOptions(j);K.bearing=M,K.pitch=P;const ge=t.ci.convert(A),ve=t.ci.convert(E),Me=new t.ci(ge.lng,ve.lat),Ce=new t.ci(ve.lng,ge.lat),Pe=K.project(ge),Qe=K.project(ve),je=this.queryTerrainElevation(ge),qe=this.queryTerrainElevation(ve),Ke=this.queryTerrainElevation(Me),lt=this.queryTerrainElevation(Ce),dt=[[Pe.x,Pe.y,Math.min(je||0,qe||0,Ke||0,lt||0)],[Qe.x,Qe.y,Math.max(je||0,qe||0,Ke||0,lt||0)]];let vt=t.d6.fromPoints(dt);const Tt=K.getWorldToCameraMatrix(),Dt=t.bi(new Float64Array(16),Tt);vt=t.d6.applyTransform(vt,Tt);const Vt=this._extendAABB(vt,K,te,M);if(!Vt)return void t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");vt=Vt;const It=.5*t.at([],vt.max,vt.min)[2],Mt=this._minimumAABBFrustumDistance(K,vt),Pt=[0,0,1,0];t.aA(Pt,Pt,Tt),t.eS(Pt,Pt);const dr=t.c1([],Pt,Mt+It),sr=t.d5([],vt.center,dr);t.ad(vt.center,vt.center,Dt),t.ad(sr,sr,Dt);const Qr=K.unproject(new t.P(vt.center[0],vt.center[1])),Br=t.eT(K.projection,Qr),Jr=Math.pow(2,Br),yn=Math.min(K._zoomFromMercatorZ(sr[2]*K.pixelsPerMeter*Jr/K.worldSize),te.maxZoom);return K.mercatorFromTransition&&yn<.5*(t.cX+t.cI)?(K.setProjection({name:"globe"}),K.zoom=yn,this._cameraForBounds(K,A,E,M,P,j)):{center:Qr,zoom:yn,bearing:M,pitch:P}}fitBounds(c,A,E){const M=this.cameraForBounds(c,A);return this._fitInternal(M,A,E)}fitScreenCoordinates(c,A,E,M,P){const j=t.P.convert(c),K=t.P.convert(A),te=new t.P(Math.min(j.x,K.x),Math.min(j.y,K.y)),ge=new t.P(Math.max(j.x,K.x),Math.max(j.y,K.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(j,K))return this;const ve=this.transform.pointLocation3D(te),Me=this.transform.pointLocation3D(ge),Ce=this.transform.pointLocation3D(new t.P(te.x,ge.y)),Pe=this.transform.pointLocation3D(new t.P(ge.x,te.y)),Qe=[Math.min(ve.lng,Me.lng,Ce.lng,Pe.lng),Math.min(ve.lat,Me.lat,Ce.lat,Pe.lat)],je=[Math.max(ve.lng,Me.lng,Ce.lng,Pe.lng),Math.max(ve.lat,Me.lat,Ce.lat,Pe.lat)],qe=M&&M.pitch?M.pitch:this.getPitch(),Ke=this._cameraForBounds(this.transform,Qe,je,E,qe,M);return this._fitInternal(Ke,M,P)}_fitInternal(c,A,E){return c?(A=t.h(c,A)).linear?this.easeTo(A,E):this.flyTo(A,E):this}jumpTo(c,A){this.stop();const E=c.preloadOnly?this.transform.clone():this.transform;let M=!1,P=!1,j=!1;"zoom"in c&&E.zoom!==+c.zoom&&(M=!0,E.zoom=+c.zoom),c.center!==void 0&&(E.center=t.ci.convert(c.center)),"bearing"in c&&E.bearing!==+c.bearing&&(P=!0,E.bearing=+c.bearing),"pitch"in c&&E.pitch!==+c.pitch&&(j=!0,E.pitch=+c.pitch);const K=typeof c.padding=="number"?this._extendPadding(c.padding):c.padding;if(c.padding!=null&&!E.isPaddingEqual(K))if(c.retainPadding===!1){const te=E.clone();te.padding=K,E.setLocationAtPoint(E.center,te.centerPoint)}else E.padding=K;return c.preloadOnly?(this._preloadTiles(E),this):(this.fire(new t.A("movestart",A)).fire(new t.A("move",A)),M&&this.fire(new t.A("zoomstart",A)).fire(new t.A("zoom",A)).fire(new t.A("zoomend",A)),P&&this.fire(new t.A("rotatestart",A)).fire(new t.A("rotate",A)).fire(new t.A("rotateend",A)),j&&this.fire(new t.A("pitchstart",A)).fire(new t.A("pitch",A)).fire(new t.A("pitchend",A)),this.fire(new t.A("moveend",A)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.w(Io),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,A){const E=this.transform;if(!E.projection.supportsFreeCamera)return t.w(Io),this;this.stop();const M=E.zoom,P=E.pitch,j=E.bearing;E.setFreeCameraOptions(c);const K=M!==E.zoom,te=P!==E.pitch,ge=j!==E.bearing;return this.fire(new t.A("movestart",A)).fire(new t.A("move",A)),K&&this.fire(new t.A("zoomstart",A)).fire(new t.A("zoom",A)).fire(new t.A("zoomend",A)),ge&&this.fire(new t.A("rotatestart",A)).fire(new t.A("rotate",A)).fire(new t.A("rotateend",A)),te&&this.fire(new t.A("pitchstart",A)).fire(new t.A("pitch",A)).fire(new t.A("pitchend",A)),this.fire(new t.A("moveend",A)),this}easeTo(c,A){this._stop(!1,c.easeId),((c=t.h({offset:[0,0],duration:500,easing:t.eK},c)).animate===!1||this._prefersReducedMotion(c))&&(c.duration=0);const E=this.transform,M=this.getZoom(),P=this.getBearing(),j=this.getPitch(),K=this.getPadding(),te="zoom"in c?+c.zoom:M,ge="bearing"in c?this._normalizeBearing(c.bearing,P):P,ve="pitch"in c?+c.pitch:j,Me=this._extendPadding(c.padding),Ce=t.P.convert(c.offset);let Pe,Qe,je;if(E.projection.name==="globe"){const Pt=t.ac.fromLngLat(E.center),dr=Ce.rotate(-E.angle);Pt.x+=dr.x/E.worldSize,Pt.y+=dr.y/E.worldSize;const sr=Pt.toLngLat(),Qr=t.ci.convert(c.center||sr);this._normalizeCenter(Qr),Pe=E.centerPoint.add(dr),Qe=new t.P(Pt.x,Pt.y).mult(E.worldSize),je=new t.P(t.aD(Qr.lng),t.aH(Qr.lat)).mult(E.worldSize).sub(Qe)}else{Pe=E.centerPoint.add(Ce);const Pt=E.pointLocation(Pe),dr=t.ci.convert(c.center||Pt);this._normalizeCenter(dr),Qe=E.project(Pt),je=E.project(dr).sub(Qe)}const qe=E.zoomScale(te-M);let Ke,lt;c.around&&(Ke=t.ci.convert(c.around),lt=E.locationPoint(Ke));const dt=this._zooming||te!==M,vt=this._rotating||P!==ge,Tt=this._pitching||ve!==j,Dt=!E.isPaddingEqual(Me),Vt=c.retainPadding===!1?E.clone():E,It=Pt=>dr=>{if(dt&&(Pt.zoom=t.ai(M,te,dr)),vt&&(Pt.bearing=t.ai(P,ge,dr)),Tt&&(Pt.pitch=t.ai(j,ve,dr)),Dt&&(Vt.interpolatePadding(K,Me,dr),Pe=Vt.centerPoint.add(Ce)),Ke)Pt.setLocationAtPoint(Ke,lt);else{const sr=Pt.zoomScale(Pt.zoom-M),Qr=te>M?Math.min(2,qe):Math.max(.5,qe),Br=Math.pow(Qr,1-dr),Jr=Pt.unproject(Qe.add(je.mult(dr*Br)).mult(sr));Pt.setLocationAtPoint(Pt.renderWorldCopies?Jr.wrap():Jr,Pe)}return c.preloadOnly||this._fireMoveEvents(A),Pt};if(c.preloadOnly){const Pt=this._emulate(It,c.duration,E);return this._preloadTiles(Pt),this}const Mt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=dt,this._rotating=vt,this._pitching=Tt,this._padding=Dt,this._easeId=c.easeId,this._prepareEase(A,c.noMoveStart,Mt),this._ease(It(E),Pt=>{E.cameraElevationReference==="sea"&&E.recenterOnTerrain(),this._afterEase(A,Pt)},c),this}_prepareEase(c,A,E={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),A||E.moving||this.fire(new t.A("movestart",c)),this._zooming&&!E.zooming&&this.fire(new t.A("zoomstart",c)),this._rotating&&!E.rotating&&this.fire(new t.A("rotatestart",c)),this._pitching&&!E.pitching&&this.fire(new t.A("pitchstart",c))}_fireMoveEvents(c){this.fire(new t.A("move",c)),this._zooming&&this.fire(new t.A("zoom",c)),this._rotating&&this.fire(new t.A("rotate",c)),this._pitching&&this.fire(new t.A("pitch",c))}_afterEase(c,A){if(this._easeId&&A&&this._easeId===A)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const E=this._zooming,M=this._rotating,P=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,E&&this.fire(new t.A("zoomend",c)),M&&this.fire(new t.A("rotateend",c)),P&&this.fire(new t.A("pitchend",c)),this.fire(new t.A("moveend",c))}flyTo(c,A){if(this._prefersReducedMotion(c)){const br=t.aF(c,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(br,A)}this.stop(),c=t.h({offset:[0,0],speed:1.2,curve:1.42,easing:t.eK},c);const E=this.transform,M=this.getZoom(),P=this.getBearing(),j=this.getPitch(),K=this.getPadding(),te="zoom"in c?t.ay(+c.zoom,E.minZoom,E.maxZoom):M,ge="bearing"in c?this._normalizeBearing(c.bearing,P):P,ve="pitch"in c?+c.pitch:j,Me=this._extendPadding(c.padding),Ce=E.zoomScale(te-M),Pe=t.P.convert(c.offset);let Qe=E.centerPoint.add(Pe);const je=E.pointLocation(Qe),qe=t.ci.convert(c.center||je);this._normalizeCenter(qe);const Ke=E.project(je),lt=E.project(qe).sub(Ke);let dt=c.curve;const vt=Math.max(E.width,E.height),Tt=vt/Ce,Dt=lt.mag();if("minZoom"in c){const br=t.ay(Math.min(c.minZoom,M,te),E.minZoom,E.maxZoom),an=vt/E.zoomScale(br-M);dt=Math.sqrt(an/Dt*2)}const Vt=dt*dt;function It(br){const an=(Tt*Tt-vt*vt+(br?-1:1)*Vt*Vt*Dt*Dt)/(2*(br?Tt:vt)*Vt*Dt);return Math.log(Math.sqrt(an*an+1)-an)}function Mt(br){return(Math.exp(br)-Math.exp(-br))/2}function Pt(br){return(Math.exp(br)+Math.exp(-br))/2}const dr=It(0);let sr=function(br){return Pt(dr)/Pt(dr+dt*br)},Qr=function(br){return vt*((Pt(dr)*(Mt(an=dr+dt*br)/Pt(an))-Mt(dr))/Vt)/Dt;var an},Br=(It(1)-dr)/dt;if(Math.abs(Dt)<1e-6||!isFinite(Br)){if(Math.abs(vt-Tt)<1e-6)return this.easeTo(c,A);const br=Tt<vt?-1:1;Br=Math.abs(Math.log(Tt/vt))/dt,Qr=function(){return 0},sr=function(an){return Math.exp(br*dt*an)}}c.duration="duration"in c?+c.duration:1e3*Br/("screenSpeed"in c?+c.screenSpeed/dt:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const Jr=P!==ge,yn=ve!==j,vr=!E.isPaddingEqual(Me),qt=c.retainPadding===!1?E.clone():E,kr=br=>an=>{const ln=an*Br,dn=1/sr(ln);br.zoom=an===1?te:M+br.scaleZoom(dn),Jr&&(br.bearing=t.ai(P,ge,an)),yn&&(br.pitch=t.ai(j,ve,an)),vr&&(qt.interpolatePadding(K,Me,an),Qe=qt.centerPoint.add(Pe));const Mn=an===1?qe:br.unproject(Ke.add(lt.mult(Qr(ln))).mult(dn));return br.setLocationAtPoint(br.renderWorldCopies?Mn.wrap():Mn,Qe),br._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(A),br};if(c.preloadOnly){const br=this._emulate(kr,c.duration,E);return this._preloadTiles(br),this}return this._zooming=!0,this._rotating=Jr,this._pitching=yn,this._padding=vr,this._prepareEase(A,!1),this._ease(kr(E),()=>this._afterEase(A),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(c){}_cancelRenderFrame(c){}_stop(c,A){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const E=this._onEaseEnd;this._onEaseEnd=void 0,E.call(this,A)}if(!c){const E=this.handlers;E&&E.stop(!1)}return this}_ease(c,A,E){E.animate===!1||E.duration===0?(c(1),A()):(this._easeStart=t.q.now(),this._easeOptions=E,this._onEaseFrame=c,this._onEaseEnd=A,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((t.q.now()-this._easeStart)/this._easeOptions.duration,1),A=this._onEaseFrame;A&&A(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,A){c=t.bQ(c,-180,180);const E=Math.abs(c-A);return Math.abs(c-360-A)<E&&(c-=360),Math.abs(c+360-A)<E&&(c+=360),c}_normalizeCenter(c){const A=this.transform;if(A.maxBounds||A.projection.name!=="globe"&&!A.renderWorldCopies)return;const E=c.lng-A.center.lng;c.lng+=E>180?-360:E<-180?360:0}_prefersReducedMotion(c){return this._respectPrefersReducedMotion&&t.q.prefersReducedMotion&&!(c&&c.essential)}_emulate(c,A,E){const M=Math.ceil(15*A/1e3),P=[],j=c(E.clone());for(let K=0;K<=M;K++){const te=j(K/M);P.push(te.clone())}return P}_preloadTiles(c,A){}}class Ep{constructor(c={}){this.options=c,t.aV(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const A=this.options&&this.options.compact,E=c._getUIString("AttributionControl.ToggleAttribution");this._map=c,this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",E);const M=x("span","mapboxgl-ctrl-icon",this._compactButton);return M.setAttribute("aria-hidden","true"),M.setAttribute("title",E),this._innerContainer=x("div","mapboxgl-ctrl-attrib-inner",this._container),A&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),A===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const A=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.e.ACCESS_TOKEN}];if(c){const E=A.reduce((M,P,j)=>(P.value&&(M+=`${P.key}=${P.value}${j<A.length-1?"&":""}`),M),"?");c.href=`${t.e.FEEDBACK_URL}/${E}#${bp(this._map,!0)}`,c.rel="noopener nofollow"}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const A=this._map.style._mergedSourceCaches;for(const M in A){const P=A[M];if(P.used){const j=P.getSource();j.attribution&&c.indexOf(j.attribution)<0&&c.push(j.attribution)}}c.sort((M,P)=>M.length-P.length),c=c.filter((M,P)=>{for(let j=P+1;j<c.length;j++)if(c[j].indexOf(M)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const E=c.join(" | ");E!==this._attribHTML&&(this._attribHTML=E,c.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class zf{constructor(){t.aV(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=x("div","mapboxgl-ctrl");const A=x("a","mapboxgl-ctrl-logo");return A.target="_blank",A.rel="noopener nofollow",A.href="https://www.mapbox.com/",A.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),A.setAttribute("rel","noopener nofollow"),this._container.appendChild(A),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const A in c){const E=c[A].getSource();if(E.hasOwnProperty("mapbox_logo")&&!E.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const A=c[0];this._map.getCanvasContainer().offsetWidth<250?A.classList.add("mapboxgl-compact"):A.classList.remove("mapboxgl-compact")}}}class wm{constructor(){t.aV(["_onIndoorUpdate"],this)}onAdd(c){return this._map=c,this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._map.indoor.on("indoorupdate",A=>this._onIndoorUpdate({selectedFloorId:A.selectedFloorId,floors:A.floors})),this._container}_createButton(c,A){const E=x("button",c,this._container);return E.type="button",E.addEventListener("click",A),E}_setButtonTitle(c,A){this._map&&(c.setAttribute("aria-label",A),c.innerHTML=`<strong>${A}</strong>`,c.firstElementChild&&c.firstElementChild.setAttribute("title",A))}onRemove(){this._container&&this._container.remove(),this._map&&this._map.indoor&&(this._map.indoor.off("indoorupdate",this._onIndoorUpdate),this._map=null)}getDefaultPosition(){return"right"}_onIndoorUpdate(c){if(!c||!c.floors)return void(this._container.style.display="none");const A=this._model;this._model=c,this._container.style.display="inline-block";const E=c.floors.sort((M,P)=>M.levelOrder-P.levelOrder);A?(Array.from(this._container.children).forEach(M=>M.remove()),this.addCurrentFloors(E)):this.addCurrentFloors(E)}addCurrentFloors(c){for(const A of c){const E=this._createButton("mapboxgl-ctrl-level-button",()=>{this._map._selectIndoorFloor(A.id),Array.from(this._container.children).forEach(M=>{M.classList.remove("mapboxgl-ctrl-level-button-selected")}),E.classList.add("mapboxgl-ctrl-level-button-selected")});this._setButtonTitle(E,A.shortName),this._model&&A.id===this._model.selectedFloorId&&(this._map._selectIndoorFloor(A.id),E.classList.add("mapboxgl-ctrl-level-button-selected")),this._container.append(E)}}}class sg{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const A=++this._id;return this._queue.push({callback:c,id:A,cancelled:!1}),A}remove(c){const A=this._currentlyRunning,E=A?this._queue.concat(A):this._queue;for(const M of E)if(M.id===c)return void(M.cancelled=!0)}run(c=0){const A=this._currentlyRunning=this._queue;this._queue=[];for(const E of A)if(!E.cancelled&&(E.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Hf{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const A=t.dx((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-A)+this._end*A}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,A,E){this._start=this.getValue(A),this._end=c,this._startTime=A,this._endTime=A+E}}const og={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use â + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class Sm extends t.A{constructor(c,A,E,M){const{point:P,lngLat:j,originalEvent:K,target:te}=c;super(c.type,{point:P,lngLat:j,originalEvent:K,target:te}),this.preventDefault=()=>{c.preventDefault()},this.id=A,this.interaction=E,this.feature=M}}class nA{constructor(c){this.map=c,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(c,A){if(this.typeById.has(c))throw new Error(`Interaction id "${c}" already exists.`);const E=A.filter;let M=A.type;E&&this.filters.set(c,t.b3(E)),M==="mouseover"&&(M="mouseenter"),M==="mouseout"&&(M="mouseleave");const P=this.interactionsByType.get(M)||new Map;M==="mouseenter"||M==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(c,A)):P.size===0&&this.map.on(M,this.handleType),P.size===0&&this.interactionsByType.set(M,P),P.set(c,A),this.typeById.set(c,M)}get(c){const A=this.typeById.get(c);if(!A)return;const E=this.interactionsByType.get(A);return E?E.get(c):void 0}remove(c){const A=this.typeById.get(c);if(!A)return;this.typeById.delete(c),this.filters.delete(c);const E=this.interactionsByType.get(A);E&&(E.delete(c),A==="mouseenter"||A==="mouseleave"?(this.delegatedInteractions.delete(c),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):E.size===0&&this.map.off(A,this.handleType))}queryTargets(c,A){const E=[];for(const[M,P]of A)P.target&&E.push({targetId:M,target:P.target,filter:this.filters.get(M)});return this.map.style.queryRenderedTargets(c,E,this.map.transform)}handleMove(c){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const A=this.queryTargets(c.point,Array.from(this.delegatedInteractions).reverse());A.length&&(c.type="mouseenter",this.handleType(c,A));const E=new Map;for(const[M,{feature:P}]of this.prevHoveredFeatures)this.hoveredFeatures.has(M)||E.set(P.id,P);E.size&&(c.type="mouseleave",this.handleType(c,Array.from(E.values())))}handleOut(c){const A=Array.from(this.hoveredFeatures.values()).map(({feature:E})=>E);A.length&&(c.type="mouseleave",this.handleType(c,A)),this.hoveredFeatures.clear()}handleType(c,A){const E=c.type==="mouseenter";if(E&&!this.interactionsByType.has(c.type))return void t.w("mouseenter interaction required for mouseleave to work.");const M=Array.from(this.interactionsByType.get(c.type)).reverse(),P=!!A;A=A||this.queryTargets(c.point,M);let j=!1;const K=new Set;for(const te of A){for(const[ge,ve]of M){if(!ve.target)continue;const Me=te.variants?te.variants[ge]:null;if(Me){for(const Ce of Me){if(il(Ce,te,K,ge))continue;const Pe=new t.dr(te,Ce),Qe=ba(Ce,te,ge);P&&(Pe.state=this.map.getFeatureState(Pe));const je=E?this.prevHoveredFeatures.get(Qe):null,qe=new Sm(c,ge,ve,Pe),Ke=je?je.stop:ve.handler(qe);if(E&&this.hoveredFeatures.set(Qe,{feature:te,stop:Ke}),Ke!==!1){j=!0;break}}if(j)break}}if(j)break}if(!j)for(const[te,ge]of M){const{handler:ve,target:Me}=ge;if(!Me&&ve(new Sm(c,te,ge,null))!==!1)break}}}function iA(C,c){if(Array.isArray(C)&&Array.isArray(c)){const A=new Set(C),E=new Set(c);return A.size===E.size&&C.every(M=>E.has(M))}return t.bv(C,c)}const Bp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},Tp={showCompass:!0,showZoom:!0,visualizePitch:!1};class df{constructor(c,A,E=!1){this._clickTolerance=10,this.element=A,this.mouseRotate=new cd({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,E&&(this.mousePitch=new Cp({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),t.aV(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),A.addEventListener("mousedown",this.mousedown),A.addEventListener("touchstart",this.touchstart,{passive:!1}),A.addEventListener("touchmove",this.touchmove),A.addEventListener("touchend",this.touchend),A.addEventListener("touchcancel",this.reset)}down(c,A){this.mouseRotate.mousedown(c,A),this.mousePitch&&this.mousePitch.mousedown(c,A),O()}move(c,A){const E=this.map,M=this.mouseRotate.mousemoveWindow(c,A),P=M&&M.bearingDelta;if(P&&E.setBearing(E.getBearing()+P),this.mousePitch){const j=this.mousePitch.mousemoveWindow(c,A),K=j&&j.pitchDelta;K&&E.setPitch(E.getPitch()+K)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){V(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(t.h({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),ee(this.element,c)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,ee(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ne(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=ne(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Hu(C,c,A){if(C=new t.ci(C.lng,C.lat),c){const E=new t.ci(C.lng-360,C.lat),M=new t.ci(C.lng+360,C.lat),P=360*Math.ceil(Math.abs(C.lng-A.center.lng)/360),j=A.locationPoint3D(C).distSqr(c),K=c.x<0||c.y<0||c.x>A.width||c.y>A.height;A.locationPoint3D(E).distSqr(c)<j&&(K||Math.abs(E.lng-A.center.lng)<P)?C=E:A.locationPoint3D(M).distSqr(c)<j&&(K||Math.abs(M.lng-A.center.lng)<P)&&(C=M)}for(;Math.abs(C.lng-A.center.lng)>180;){const E=A.locationPoint3D(C);if(E.x>=0&&E.y>=0&&E.x<=A.width&&E.y<=A.height)break;C.lng>A.center.lng?C.lng-=360:C.lng+=360}return C}const oh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},kc={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Qu extends t.E{constructor(c,A){super(),(c instanceof HTMLElement||A)&&(c=t.h({element:c},A)),t.aV(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:E="center",color:M="#3FB1CE",scale:P=1,draggable:j=!1,clickTolerance:K=0,rotation:te=kc.rotation,rotationAlignment:ge=kc.rotationAlignment,pitchAlignment:ve=kc.pitchAlignment,occludedOpacity:Me=kc.occludedOpacity,altitude:Ce=kc.altitude}=c||{};this._anchor=E,this._color=M,this._scale=P,this._draggable=j,this._clickTolerance=K,this._rotation=te,this._rotationAlignment=ge,this._pitchAlignment=ve,this._occludedOpacity=Me,this._altitude=Ce,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),c&&c.element?(this._element=c.element,this._offset=t.P.convert(c&&c.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=t.P.convert(c&&c.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",je=>{je.preventDefault()}),this._element.addEventListener("mousedown",je=>{je.preventDefault()});const Pe=this._element.classList;for(const je in oh)Pe.remove(`mapboxgl-marker-anchor-${je}`);Pe.add(`mapboxgl-marker-anchor-${this._anchor}`);const Qe=c&&c.className?c.className.trim().split(/\s+/):[];Pe.add(...Qe),this._popup=null}_createDefaultMarker(){const c=x("div"),A=v("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},c);if(this._altitude===0){const E=v("radialGradient",{id:"shadowGradient"},v("defs",{},A));v("stop",{offset:"10%","stop-opacity":.4},E),v("stop",{offset:"100%","stop-opacity":.05},E),v("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},A)}return v("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},A),v("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},A),v("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},A),c}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=t.ci.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(c){return c===this._altitude||(this._defaultMarker&&(this._altitude===0&&c!==0||this._altitude!==0&&c===0)&&(this._element=this._createDefaultMarker()),this._altitude=c||kc.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const M=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,c._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const A=c.code,E=c.charCode||c.keyCode;A!=="Space"&&A!=="Enter"&&E!==32&&E!==13||this.togglePopup()}_onMapClick(c){const A=c.originalEvent.target,E=this._element;this._popup&&(A===E||E.contains(A))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,A=this._pos;if(!c||!A)return!1;const E=c.unproject(A,this._altitude),M=c.getFreeCameraOptions();if(!M.position)return!1;const P=M.position.toLngLat();return P.distanceTo(E)<.9*P.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const A=this._pos;if(!A||A.x<0||A.x>c.transform.width||A.y<0||A.y>c.transform.height)return void this._clearFadeTimer();const E=c.unproject(A,this._altitude);let M;c._showingGlobe()&&t.eW(c.transform,this._lngLat)?M=0:(M=1-c._queryFogOpacity(E),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(M*=this._occludedOpacity)),this._element.style.opacity=`${M}`,this._element.style.pointerEvents=M>0?"auto":"none",this._popup&&this._popup._setOpacity(M),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const A=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${oh[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${A.x}px,${A.y}px)
        `}_calculateXYTransform(){const c=this._pos,A=this._map,E=this.getPitchAlignment();if(!A||!c||E!=="map")return"";if(!A._showingGlobe()){const te=A.getPitch();return te?`rotateX(${te}deg)`:""}const M=t.cU(t.eX(A.transform,this._lngLat)),P=c.sub(t.eY(A.transform)),j=Math.abs(P.x)+Math.abs(P.y);if(j===0)return"";const K=M/j;return`rotateX(${-P.y*K}deg) rotateY(${P.x*K}deg)`}_calculateZTransform(){const c=this._pos,A=this._map;if(!A||!c)return"";let E=0;const M=this.getRotationAlignment();if(M==="map")if(A._showingGlobe()){const P=A.project(new t.ci(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),j=A.project(new t.ci(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(P);E=t.cU(Math.atan2(j.y,j.x))-90}else E=-A.getBearing();else if(M==="horizon"){const P=t.af(4,6,A.getZoom()),j=t.eY(A.transform);j.y+=P*A.transform.height;const K=c.sub(j),te=t.cU(Math.atan2(K.y,K.x));E=(te>90?te-270:te+90)*(1-P)}return E+=this._rotation,E?`rotateZ(${E}deg)`:""}_update(c){cancelAnimationFrame(this._updateFrameId);const A=this._map;A&&(A.transform.renderWorldCopies&&(this._lngLat=Hu(this._lngLat,this._pos,A.transform)),this._pos=A.project(this._lngLat,this._altitude),c===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),A._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(A._showingGlobe()||A.getTerrain()||A.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=t.P.convert(c),this._update(),this}addClassName(c){return this._element.classList.add(c),this}removeClassName(c){return this._element.classList.remove(c),this}toggleClassName(c){return this._element.classList.toggle(c)}_onMove(c){const A=this._map;if(!A)return;const E=this._pointerdownPos,M=this._positionDelta;if(E&&M){if(!this._isDragging){const P=this._clickTolerance||A._clickTolerance;if(c.point.dist(E)<P)return;this._isDragging=!0}this._pos=c.point.sub(M),this._lngLat=A.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.A("dragstart"))),this.fire(new t.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new t.A("dragend")),this._state="inactive"}_addDragHandler(c){const A=this._map,E=this._pos;A&&E&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(E),this._pointerdownPos=c.point,this._state="pending",A.on("mousemove",this._onMove),A.on("touchmove",this._onMove),A.once("mouseup",this._onUp),A.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const A=this._map;return A&&(c?(A.on("mousedown",this._addDragHandler),A.on("touchstart",this._addDragHandler)):(A.off("mousedown",this._addDragHandler),A.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||kc.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||kc.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||kc.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||kc.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const sA={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Cm={maxWidth:100,unit:"metric"},VA={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ag={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},$d=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oc(C=new t.P(0,0),c="bottom"){if(typeof C=="number"){const A=Math.round(Math.sqrt(.5*Math.pow(C,2)));switch(c){case"top":return new t.P(0,C);case"top-left":return new t.P(A,A);case"top-right":return new t.P(-A,A);case"bottom":return new t.P(0,-C);case"bottom-left":return new t.P(A,-A);case"bottom-right":return new t.P(-A,-A);case"left":return new t.P(C,0);case"right":return new t.P(-C,0)}return new t.P(0,0)}return C instanceof t.P||Array.isArray(C)?t.P.convert(C):t.P.convert(C[c]||[0,0])}return{version:h,supported:b.supported,setRTLTextPlugin:t.f0,getRTLTextPluginStatus:t.e$,Map:class extends Mh{constructor(C){p.mark(f.create);const c=C;if((C=t.h({},Bp,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(C.antialias&&t.eU(window)&&(C.antialias=!1,t.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Al(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies,null,null),C),this._repaint=!!C.repaint,this._interactive=C.interactive,this._minTileCacheSize=C.minTileCacheSize,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=C.crossSourceCollisions,this._collectResourceTiming=C.collectResourceTiming,this._language=this._parseLanguage(C.language),this._worldview=C.worldview,this._renderTaskQueue=new sg,this._domRenderTaskQueue=new sg,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.a$(),this._locale=t.h({},og,C.locale),this._clickTolerance=C.clickTolerance,this._cooperativeGestures=C.cooperativeGestures,this._performanceMetricsCollection=C.performanceMetricsCollection,this._tessellationStep=C.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=C.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Hf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=C.scaleFactor,this._requestManager=new Z(C.transformRequest,C.accessToken,C.testMode),this._silenceAuthErrors=!!C.testMode,this._contextCreateOptions=C.contextCreateOptions?Object.assign({},C.contextCreateOptions):{},typeof C.container=="string"){const A=document.getElementById(C.container);if(!A)throw new Error(`Container '${C.container.toString()}' not found.`);this._container=A}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(this._container.childNodes.length>0&&t.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),C.maxBounds&&this.setMaxBounds(C.maxBounds),this._spriteFormat=C.spriteFormat,t.aV(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new bm),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Ih(this,C),this._localFontFamily=C.localFontFamily,this._localIdeographFontFamily=C.localIdeographFontFamily,(C.style||!C.testMode)&&this.setStyle(C.style||t.e.DEFAULT_STYLE,{config:C.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),C.projection&&this.setProjection(C.projection),this.indoor=new Pr(this),C.hash&&(this._hash=new cf(typeof C.hash=="string"&&C.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){c.center==null&&c.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch});const A=C.bounds;A&&(this.resize(),this.fitBounds(A,t.h({},C.fitBoundsOptions,{duration:0})))}this.resize(),C.attributionControl&&this.addControl(new Ep({customAttribution:C.customAttribution})),this._logoControl=new zf,this.addControl(this._logoControl,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",A=>{this._update(A.dataType==="style"),this.fire(new t.A(`${A.dataType}data`,A))}),this.on("dataloading",A=>{this.fire(new t.A(`${A.dataType}dataloading`,A))}),this._interactions=new nA(this)}_getMapId(){return this._mapId}addControl(C,c){if(c===void 0&&(c=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new t.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const A=C.onAdd(this);this._controls.push(C);const E=this._controlPositions[c];return c.indexOf("bottom")!==-1?E.insertBefore(A,E.firstChild):E.appendChild(A),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new t.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(C);return c>-1&&this._controls.splice(c,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(C){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new t.A("movestart",C)).fire(new t.A("move",C)),this.fire(new t.A("resize",C)),c&&this.fire(new t.A("moveend",C)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(C){return this.transform.setMaxBounds(t.aG.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C?this.setZoom(C):this.fire(new t.A("zoomstart")).fire(new t.A("zoom")).fire(new t.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C?this.setZoom(C):this.fire(new t.A("zoomstart")).fire(new t.A("zoom")).fire(new t.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C?this.setPitch(C):this.fire(new t.A("pitchstart")).fire(new t.A("pitch")).fire(new t.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C?this.setPitch(C):this.fire(new t.A("pitchstart")).fire(new t.A("pitch")).fire(new t.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(C){return this._scaleFactor=C,this.painter.scaleFactor=C,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(c=>c.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(C){return C==="auto"?navigator.language:Array.isArray(C)?C.length===0?void 0:C.map(c=>c==="auto"?navigator.language:c):C}setLanguage(C){const c=this._parseLanguage(C);if(!this.style||c===this._language)return this;this._language=c,this.style.reloadSources();for(const A of this._controls)A._setLanguage&&A._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(C){return this.style&&C!==this._worldview?(this._worldview=C,this._styleDirty=!0,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(C){return this._lazyInitEmptyStyle(),C?typeof C=="string"&&(C={name:C}):C=null,this._useExplicitProjection=!!C,this._prioritizeAndUpdateProjection(C,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const C=this.transform,c=C.projection.name;let A;c==="globe"&&C.zoom>=t.cI?(C.setMercatorFromTransition(),A=!0):c==="mercator"&&C.zoom<t.cI&&(C.setProjection({name:"globe"}),A=!0),A&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate(),this._update(!0))}_prioritizeAndUpdateProjection(C,c){return this._updateProjection(C||c||{name:"mercator"})}_updateProjection(C){let c;return c=C.name==="globe"&&this.transform.zoom>=t.cI?this.transform.setMercatorFromTransition():this.transform.setProjection(C),this.style.applyProjectionUpdate(),c&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(C,c){return this.transform.locationPoint3D(t.ci.convert(C),c)}unproject(C,c){return this.transform.pointLocation3D(t.P.convert(C),c)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(C,c,A){const E=M=>{let P=[];if(Array.isArray(c)){const j=c.filter(K=>this.getLayer(K));P=j.length?this.queryRenderedFeatures(M,{layers:j}):[]}else P=this.queryRenderedFeatures(M,{target:c});return P};if(C==="mouseenter"||C==="mouseover"){let M=!1;return{listener:A,targets:c,delegates:{mousemove:j=>{const K=E(j.point);K.length?M||(M=!0,A.call(this,new Lo(C,this,j.originalEvent,{features:K}))):M=!1},mouseout:()=>{M=!1}}}}if(C==="mouseleave"||C==="mouseout"){let M=!1;return{listener:A,targets:c,delegates:{mousemove:K=>{E(K.point).length?M=!0:M&&(M=!1,A.call(this,new Lo(C,this,K.originalEvent)))},mouseout:K=>{M&&(M=!1,A.call(this,new Lo(C,this,K.originalEvent)))}}}}{const M=P=>{const j=E(P.point);j.length&&(P.features=j,A.call(this,P),delete P.features)};return{listener:A,targets:c,delegates:{[C]:M}}}}on(C,c,A){if(typeof c=="function"||A===void 0)return super.on(C,c);if(typeof c=="string"&&(c=[c]),!this._areTargetsValid(c))return this;const E=this._createDelegatedListener(C,c,A);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(E);for(const M in E.delegates)this.on(M,E.delegates[M]);return this}once(C,c,A){if(typeof c=="function"||A===void 0)return super.once(C,c);if(typeof c=="string"&&(c=[c]),!this._areTargetsValid(c))return this;const E=this._createDelegatedListener(C,c,A);for(const M in E.delegates)this.once(M,E.delegates[M]);return this}off(C,c,A){if(typeof c=="function"||A===void 0)return super.off(C,c);if(typeof c=="string"&&(c=[c]),!this._areTargetsValid(c))return this;const E=this._delegatedListeners?this._delegatedListeners[C]:void 0;return E&&(M=>{for(let P=0;P<M.length;P++){const j=M[P];if(j.listener===A&&iA(j.targets,c)){for(const K in j.delegates)this.off(K,j.delegates[K]);return M.splice(P,1),this}}})(E),this}queryRenderedFeatures(C,c){if(!this.style)return[];if(C===void 0||C instanceof t.P||Array.isArray(C)||c!==void 0||(c=C,C=void 0),C=C||[[0,0],[this.transform.width,this.transform.height]],!c){const P=this.style.queryRenderedFeatures(C,void 0,this.transform),j=this.style.queryRenderedFeatureset(C,void 0,this.transform);return P.concat(j)}let A=!0;if(c.target&&(A=this._isTargetValid(c.target),A&&!c.layers))return this.style.queryRenderedFeatureset(C,c,this.transform);let E=!0;if(c.layers&&Array.isArray(c.layers)){for(const P of c.layers)if(!this._isValidId(P)){E=!1;break}if(E&&!c.target)return this.style.queryRenderedFeatures(C,c,this.transform)}let M=[];return E&&(M=M.concat(this.style.queryRenderedFeatures(C,c,this.transform))),A&&(M=M.concat(this.style.queryRenderedFeatureset(C,c,this.transform))),M}querySourceFeatures(C,c){return!C||typeof C=="string"&&!this._isValidId(C)?[]:this.style.querySourceFeatures(C,c)}isPointOnSurface(C){const{name:c}=this.transform.projection;return c!=="globe"&&c!=="mercator"&&t.w(`${c} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(t.P.convert(C))}addInteraction(C,c){return this._interactions.add(C,c),this}removeInteraction(C){return this._interactions.remove(C),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(C){return this._cooperativeGestures=C,this}setStyle(C,c){return c=t.h({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c),this.style&&C&&c.diff!==!1&&c.localFontFamily===this._localFontFamily&&c.localIdeographFontFamily===this._localIdeographFontFamily&&!c.config?(this.style._diffStyle(C,(A,E)=>{if(A){const M=typeof A=="string"?A:A instanceof Error?A.message:A.error;t.w(`Unable to perform style diff: ${M}. Rebuilding the style from scratch.`),this._updateStyle(C,c)}else E&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(C,c))}_getUIString(C){const c=this._locale[C];if(c==null)throw new Error(`Missing UI string '${C}'`);return c}_updateStyle(C,c){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),C){const A=t.h({},c);c&&c.config&&(A.initialConfig=c.config,delete A.config),this.style=new xo(this,A).load(C),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new xo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.w("There is no style added to the map."),!1)}_isValidId(C){return C==null?(this.fire(new t.z(new Error("IDs can't be empty."))),!1):!t.dk(C)||(this.fire(new t.z(new Error(`IDs can't contain special symbols: "${C}".`))),!1)}_isTargetValid(C){return"featuresetId"in C?this._isValidId("importId"in C?C.importId:C.featuresetId):"layerId"in C&&this._isValidId(C.layerId)}_areTargetsValid(C){if(Array.isArray(C)){for(const c of C)if(!this._isValidId(c))return!1;return!0}return this._isTargetValid(C)}addSource(C,c){return this._isValidId(C)?(this._lazyInitEmptyStyle(),this.style.addSource(C,c),this._update(!0)):this}isSourceLoaded(C){return!!this._isValidId(C)&&!!this.style&&this.style._isSourceCacheLoaded(C)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(C,c,A){this._lazyInitEmptyStyle(),this.style.addSourceType(C,c,A)}removeSource(C){return this._isValidId(C)?(this.style.removeSource(C),this._updateTerrain(),this._update(!0)):this}getSource(C){return this._isValidId(C)?this.style.getOwnSource(C):null}addImage(C,c,{pixelRatio:A=1,sdf:E=!1,stretchX:M,stretchY:P,content:j}={}){this._lazyInitEmptyStyle();const K=t.I.from(C);if(c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap){const{width:te,height:ge,data:ve}=t.q.getImageData(c);this.style.addImage(K,{data:new t.r({width:te,height:ge},ve),pixelRatio:A,stretchX:M,stretchY:P,content:j,sdf:E,version:0,usvg:!1})}else if(c.width===void 0||c.height===void 0)this.fire(new t.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:te,height:ge}=c,ve=c;this.style.addImage(K,{data:new t.r({width:te,height:ge},new Uint8Array(ve.data)),pixelRatio:A,stretchX:M,stretchY:P,content:j,sdf:E,usvg:!1,version:0,userImage:ve}),ve.onAdd&&ve.onAdd(this,C)}}updateImage(C,c){this._lazyInitEmptyStyle();const A=t.I.from(C),E=this.style.getImage(A);if(!E)return void this.fire(new t.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const M=c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap?t.q.getImageData(c):c,{width:P,height:j,data:K}=M;if(P===void 0||j===void 0)return void this.fire(new t.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(P!==(E.usvg?E.icon.usvg_tree.width:E.data.width)||j!==(E.usvg?E.icon.usvg_tree.height:E.data.height))return void this.fire(new t.z(new Error(`The width and height of the updated image (${P}, ${j})
                must be that same as the previous version of the image
                (${E.data.width}, ${E.data.height})`)));const te=!(c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap);let ge=!1;E.usvg?(E.data=new t.r({width:P,height:j},new Uint8Array(K)),E.usvg=!1,E.icon=void 0,ge=!0):E.data.replace(K,te),this.style.updateImage(A,E,ge)}hasImage(C){return C?!!this.style&&!!this.style.getImage(t.I.from(C)):(this.fire(new t.z(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(t.I.from(C))}loadImage(C,c){t.o(this._requestManager.transformRequest(C,t.R.Image),(A,E)=>{c(A,E instanceof HTMLImageElement?t.q.getImageData(E):E)})}listImages(){return this.style.listImages().map(C=>C.name)}addModel(C,c){this._lazyInitEmptyStyle(),this.style.addModel(C,c)}hasModel(C){return C?this.style.hasModel(C):(this.fire(new t.z(new Error("Missing required model id"))),!1)}removeModel(C){this.style.removeModel(C)}listModels(){return this.style.listModels()}addLayer(C,c){return this._isValidId(C.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(C,c),this._update(!0)):this}getSlot(C){const c=this.getLayer(C);return c&&c.slot||null}setSlot(C,c){return this.style.setSlot(C,c),this.style.mergeLayers(),this._update(!0)}addImport(C,c){return this.style.addImport(C,c).catch(A=>this.fire(new t.z(new Error("Failed to add import",A)))),this}updateImport(C,c){return typeof c!="string"&&c.id!==C?(this.removeImport(C),this.addImport(c)):(this.style.updateImport(C,c),this._update(!0))}removeImport(C){return this.style.removeImport(C),this}moveImport(C,c){return this.style.moveImport(C,c),this._update(!0)}moveLayer(C,c){return this._isValidId(C)?(this.style.moveLayer(C,c),this._update(!0)):this}removeLayer(C){return this._isValidId(C)?(this.style.removeLayer(C),this._update(!0)):this}getLayer(C){if(!this._isValidId(C))return null;const c=this.style.getOwnLayer(C);return c?c.type==="custom"?c.implementation:c.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(C,c,A){return this._isValidId(C)?(this.style.setLayerZoomRange(C,c,A),this._update(!0)):this}setFilter(C,c,A={}){return this._isValidId(C)?(this.style.setFilter(C,c,A),this._update(!0)):this}getFilter(C){return this._isValidId(C)?this.style.getFilter(C):null}setPaintProperty(C,c,A,E={}){return this._isValidId(C)?(this.style.setPaintProperty(C,c,A,E),this._update(!0)):this}getPaintProperty(C,c){return this._isValidId(C)?this.style.getPaintProperty(C,c):null}setLayoutProperty(C,c,A,E={}){return this._isValidId(C)?(this.style.setLayoutProperty(C,c,A,E),this._update(!0)):this}getLayoutProperty(C,c){return this._isValidId(C)?this.style.getLayoutProperty(C,c):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(C){return this.style.setGlyphsUrl(C),this._update(!0)}getSchema(C){return this.style.getSchema(C)}setSchema(C,c){return this.style.setSchema(C,c),this._update(!0)}getConfig(C){return this.style.getConfig(C)}setConfig(C,c){return this.style.setConfig(C,c),this._update(!0)}getConfigProperty(C,c){return this.style.getConfigProperty(C,c)}setConfigProperty(C,c,A){return this.style.setConfigProperty(C,c,A),this._update(!0)}getFeaturesetDescriptors(C){return this.style.getFeaturesetDescriptors(C)}setLights(C){if(this._lazyInitEmptyStyle(),C&&C.length===1&&C[0].type==="flat"){const c=C[0];c.properties?this.style.setFlatLight(c.properties,c.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(C),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const C=this.style.getLights()||[];return C.length===0&&C.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),C}setLight(C,c={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:C}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(C){return this._lazyInitEmptyStyle(),!C&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(C),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(C){return this._lazyInitEmptyStyle(),this.style.setFog(C),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(C){return this._lazyInitEmptyStyle(),this.style.setSnow(C),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(C){return this._lazyInitEmptyStyle(),this.style.setRain(C),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(C){return this._lazyInitEmptyStyle(),this.style.setColorTheme(C),this._update(!0)}setImportColorTheme(C,c){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(C,c),this._update(!0)}setCamera(C){return this.style.setCamera(C),this._triggerCameraUpdate(C)}_triggerCameraUpdate(C){return this._update(this.transform.setOrthographicProjectionAtLowPitch(C["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(C){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.ci.convert(C),this.transform):0}setFeatureState(C,c){return C.source&&!this._isValidId(C.source)?this:(this.style.setFeatureState(C,c),this._update())}removeFeatureState(C,c){return C.source&&!this._isValidId(C.source)?this:(this.style.removeFeatureState(C,c),this._update())}getFeatureState(C){return C.source&&!this._isValidId(C.source)?null:this.style.getFeatureState(C)}_selectIndoorFloor(C){this.indoor.selectFloor(C)}_addIndoorControl(){this._indoorControl||(this._indoorControl=new wm),this.addControl(this._indoorControl,"right")}_removeIndoorControl(){this._indoorControl&&this.removeControl(this._indoorControl)}_updateContainerDimensions(){if(!this._container)return;const C=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let A,E,M,P=this._container;for(;P&&(!E||!M);){const j=window.getComputedStyle(P).transform;j&&j!=="none"&&(A=j.match(/matrix.*\((.+)\)/)[1].split(", "),A[0]&&A[0]!=="0"&&A[0]!=="1"&&(E=A[0]),A[3]&&A[3]!=="0"&&A[3]!=="1"&&(M=A[3])),P=P.parentElement}this._containerWidth=E?Math.abs(C/E):C,this._containerHeight=M?Math.abs(c/M):c}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const C=this._container;C.classList.add("mapboxgl-map"),(this._missingCSSCanary=x("div","mapboxgl-canary",C)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=x("div","mapboxgl-canvas-container",C);this._canvas=x("canvas","mapboxgl-canvas",c),this._interactive&&(c.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const A=this._controlContainer=x("div","mapboxgl-control-container",C),E=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(M=>{E[M]=x("div",`mapboxgl-ctrl-${M}`,A)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(C,c){const A=t.q.devicePixelRatio||1;this._canvas.width=A*Math.ceil(C),this._canvas.height=A*Math.ceil(c),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${c}px`}_addMarker(C){this._markers.push(C)}_removeMarker(C){const c=this._markers.indexOf(C);c!==-1&&this._markers.splice(c,1)}_addPopup(C){this._popups.push(C)}_removePopup(C){const c=this._popups.indexOf(C);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const C=t.h({},b.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._canvas.getContext("webgl2",C);c?(Ge(c,!0),this.painter=new af(c,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp,this._worldview),this.on("data",A=>{A.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),t.l.testSupport(c)):this.fire(new t.z(new Error("Failed to initialize WebGL")))}_contextLost(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.A("webglcontextlost",{originalEvent:C}))}_contextRestored(C){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.clearLayers(),this.style.imageManager.destroyAtlasTextures(),this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new t.A("webglcontextrestored",{originalEvent:C}))}_onMapScroll(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_requestDomTask(C){!this.loaded()||this.loaded()&&!this.isMoving()?C():this._domRenderTaskQueue.add(C)}_render(C){let c;this.fire(new t.A("renderstart")),++this._frameId;const A=this.painter.context.extTimerQuery,E=t.q.now(),M=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(c=M.createQuery(),M.beginQuery(A.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(C),this._domRenderTaskQueue.run(C),this._removed)return;this._updateProjectionTransition();const P=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const ge=this.transform.zoom,ve=this.transform.pitch,Me=t.q.now(),Ce=new t.aa(ge,{now:Me,fadeDuration:P,pitch:ve,transition:this.style.transition,worldview:this._worldview});this.style.update(Ce)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let j=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),j=this._updateAverageElevation(E),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):j=this._updateAverageElevation(E);const K=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,P,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),K&&(this._placementDirty=K.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:P,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,p.mark(f.load),this.fire(new t.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const ge=t.q.now()-E;M.endQuery(A.TIME_ELAPSED_EXT),setTimeout(()=>{const ve=M.getQueryParameter(c,M.QUERY_RESULT)/1e6;M.deleteQuery(c),this.fire(new t.A("gpu-timing-frame",{cpuTime:ge,gpuTime:ve}))},50)}if(this.listens("gpu-timing-layer")){const ge=this.painter.collectGpuTimers();setTimeout(()=>{const ve=this.painter.queryGpuTimers(ge);this.fire(new t.A("gpu-timing-layer",{layerTimes:ve}))},50)}if(this.listens("gpu-timing-deferred-render")){const ge=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const ve=this.painter.queryGpuTimeDeferredRender(ge);this.fire(new t.A("gpu-timing-deferred-render",{gpuTime:ve}))},50)}const te=this._sourcesDirty||this._styleDirty||this._placementDirty||j;if(te||this._repaint)this.triggerRepaint();else{const ge=this.idle();if(ge&&(j=this._updateAverageElevation(E,!0)),j)this.triggerRepaint();else if(this._triggerFrame(!1),ge&&(this.fire(new t.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const ve=this._calculateSpeedIndex();this.fire(new t.A("speedindexcompleted",{speedIndex:ve})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||te||(this._fullyLoaded=!0,p.mark(f.fullLoad),this._performanceMetricsCollection&&re(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(C){for(const c of this._markers)C&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!C||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(C,c=!1){const A=M=>(this.transform.averageElevation=M,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&A(0);const E=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(E||(c||C-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(C)){const M=this.transform.averageElevation;let P=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(P)?P=0:this._averageElevationLastSampledAt=C;const j=Math.abs(M-P);if(j>1){if(this._isInitialLoad||E)return this._averageElevation.jumpTo(P),A(P);this._averageElevation.easeTo(P,C,300)}else if(j>1e-4)return this._averageElevation.jumpTo(P),A(P)}return!!this._averageElevation.isEasing(C)&&A(this._averageElevation.getValue(C))}_authenticate(){Be(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,C=>{if(C&&(C.message===G||C.status===401)){const c=this.painter.context.gl;Ge(c,!1),this._logoControl instanceof zf&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Te(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&pe(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const C=this._isDragging();this.painter.updateTerrain(this.style,C)}_calculateSpeedIndex(){const C=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const A=this.painter.context.gl,E=A.createFramebuffer();function M(P){A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,P,0);const j=new Uint8Array(A.drawingBufferWidth*A.drawingBufferHeight*4);return A.readPixels(0,0,A.drawingBufferWidth,A.drawingBufferHeight,A.RGBA,A.UNSIGNED_BYTE,j),j}return A.bindFramebuffer(A.FRAMEBUFFER,E),this._canvasPixelComparison(M(C),c.canvasCopies.map(M),c.timeStamps)}_canvasPixelComparison(C,c,A){let E=A[1]-A[0];const M=C.length/4;for(let P=0;P<c.length;P++){const j=c[P];let K=0;for(let te=0;te<j.length;te+=4)j[te]===C[te]&&j[te+1]===C[te+1]&&j[te+2]===C[te+2]&&j[te+3]===C[te+3]&&(K+=1);E+=(A[P+2]-A[P+1])*(1-K/M)}return E}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const C=this.painter.context.gl.getExtension("WEBGL_lose_context");C&&C.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),He.delete(this.painter.context.gl),ie.remove(),xe.remove(),this._removed=!0,this.fire(new t.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(C){this._renderNextFrame=this._renderNextFrame||C,this.style&&!this._frame&&(this._frame=t.q.frame(c=>{const A=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,A&&this._render(c)}))}_preloadTiles(C){const c=this.style?this.style.getSourceCaches():[];return t.bt(c,(A,E)=>A._preloadTiles(C,E),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(C){this._trackResize&&this.resize({originalEvent:C})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(C){this._showParseStatus!==C&&(this._showParseStatus=C,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(C){this._showTerrainWireframe!==C&&(this._showTerrainWireframe=C,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(C){this._showLayers2DWireframe!==C&&(this._showLayers2DWireframe=C,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(C){this._showLayers3DWireframe!==C&&(this._showLayers3DWireframe=C,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(C){this._speedIndexTiming!==C&&(this._speedIndexTiming=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,this._tp.refreshUI(),C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(C){this._showTileAABBs!==C&&(this._showTileAABBs=C,this._tp.refreshUI(),C&&this._update())}_setCacheLimits(C,c){t.eV(C,c)}get version(){return h}},NavigationControl:class{constructor(C={}){this.options=t.h({},Tp,C),this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(t.aV(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),x("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),x("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.aV(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const A=this._map;A&&(this.options.visualizePitch?A.resetNorthPitch({},{originalEvent:c}):A.resetNorth({},{originalEvent:c}))}),this._compassIcon=x("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const C=this._map;if(!C)return;const c=C.getZoom(),A=c===C.getMaxZoom(),E=c===C.getMinZoom();this._zoomInButton.disabled=A,this._zoomOutButton.disabled=E,this._zoomInButton.setAttribute("aria-disabled",A.toString()),this._zoomOutButton.setAttribute("aria-disabled",E.toString())}_rotateCompassArrow(){const C=this._map;if(!C)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(C.transform.pitch*(Math.PI/180)),.5)}) rotateX(${C.transform.pitch}deg) rotateZ(${C.transform.angle*(180/Math.PI)}deg)`:`rotate(${C.transform.angle*(180/Math.PI)}deg)`;C._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),C.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&C.on("pitch",this._rotateCompassArrow),C.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new df(C,this._compass,this.options.visualizePitch)),this._container}onRemove(){const C=this._map;C&&(this._container.remove(),this.options.showZoom&&C.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&C.off("pitch",this._rotateCompassArrow),C.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(C,c){const A=x("button",C,this._container);return A.type="button",A.addEventListener("click",c),A}_setButtonTitle(C,c){if(!this._map)return;const A=this._map._getUIString(`NavigationControl.${c}`);C.setAttribute("aria-label",A),C.firstElementChild&&C.firstElementChild.setAttribute("title",A)}},GeolocateControl:class extends t.E{constructor(C={}){super();const c=navigator.geolocation;this.options=t.h({geolocation:c},sA,C),t.aV(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=lf(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(C){return this._map=C,this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(C){const c=(A=!!this.options.geolocation)=>{this._supportsGeolocation=A,C(A)};this._supportsGeolocation!==void 0?C(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(A=>c(A.state!=="denied")).catch(()=>c()):c()}_isOutOfMapMaxBounds(C){const c=this._map.getMaxBounds(),A=C.coords;return!!c&&(A.longitude<c.getWest()||A.longitude>c.getEast()||A.latitude<c.getSouth()||A.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new t.A("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new t.A("geolocate",C)),this._finish()}}_updateCamera(C){const c=new t.ci(C.coords.longitude,C.coords.latitude),A=C.coords.accuracy,E=this._map.getBearing(),M=t.h({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(A),M,{geolocateSource:!0})}_updateMarker(C){if(C){const c=new t.ci(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const C=this._map.transform,c=t.cb(1,C._center.lat)*C.worldSize,A=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${A}px`,this._circleElement.style.height=`${A}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new t.A("error",C)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(C){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=x("button","mapboxgl-ctrl-geolocate",this._container),x("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",C===!1){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x("div","mapboxgl-user-location"),this._dotElement.appendChild(x("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(x("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Qu({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=x("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.A("trackuserlocationend")))})}}_onDeviceOrientation(C){this._userLocationDotMarker&&(C.webkitCompassHeading?this._heading=C.webkitCompassHeading:C.absolute===!0&&(this._heading=-1*C.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(C={maximumAge:6e5,timeout:0},this._noTimeout=!0):(C=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,C),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const C=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&C()}).catch(console.error):C()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ep,ScaleControl:class{constructor(C={}){this.options=t.h({},Cm,C),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),t.aV(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const C=this.options.maxWidth||100,c=this._map,A=c._containerHeight/2,E=c._containerWidth/2-C/2,M=c.unproject([E,A]),P=c.unproject([E+C,A]),j=M.distanceTo(P);if(this.options.unit==="imperial"){const K=3.2808*j;K>5280?this._setScale(C,K/5280,"mile"):this._setScale(C,K,"foot")}else this.options.unit==="nautical"?this._setScale(C,j/1852,"nautical-mile"):j>=1e3?this._setScale(C,j/1e3,"kilometer"):this._setScale(C,j,"meter")}_setScale(C,c,A){this._map._requestDomTask(()=>{const E=function(P){const j=Math.pow(10,`${Math.floor(P)}`.length-1);let K=P/j;return K=K>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:function(te){const ge=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*ge)/ge}(K),j*K}(c),M=E/c;this._container.innerHTML=this._isNumberFormatSupported&&A!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:A}).format(E):`${E}&nbsp;${VA[A]}`,this._container.style.width=C*M+"px"})}onAdd(C){return this._map=C,this._language=C.getLanguage(),this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(C){this._language=C,this._update()}setUnit(C){this.options.unit=C,this._update()}},FullscreenControl:class{constructor(C={}){this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:t.w("Full screen control 'container' must be a DOM element.")),t.aV(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=x("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const C=this._fullscreenButton=x("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x("span","mapboxgl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",C)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},IndoorControl:wm,Popup:class extends t.E{constructor(C){super(),this.options=t.h(Object.create(ag),C),this._altitude=this.options.altitude,t.aV(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(C&&C.className?C.className.trim().split(/\s+/):[])}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&C.on("preclick",this._onClose),this.options.closeOnMove&&C.on("move",this._onClose),C.on("remove",this.remove),this._update(),C._addPopup(this),this._focusFirstElement(),this._trackPointer?(C.on("mousemove",this._onMouseEvent),C.on("mouseup",this._onMouseEvent),C._canvasContainer.classList.add("mapboxgl-track-pointer")):C.on("move",this._update),this.fire(new t.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const C=this._map;return C&&(C.off("move",this._update),C.off("move",this._onClose),C.off("preclick",this._onClose),C.off("click",this._onClose),C.off("remove",this.remove),C.off("mousemove",this._onMouseEvent),C.off("mouseup",this._onMouseEvent),C.off("drag",this._onMouseEvent),C._canvasContainer&&C._canvasContainer.classList.remove("mapboxgl-track-pointer"),C._removePopup(this),this._map=void 0),this.fire(new t.A("close")),this}getLngLat(){return this._lngLat}setLngLat(C){this._lngLat=t.ci.convert(C),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(C){return this._altitude=C,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const C=this._map;return C&&(C.off("move",this._update),C.on("mousemove",this._onMouseEvent),C.on("drag",this._onMouseEvent),C._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const c=document.createDocumentFragment(),A=document.createElement("body");let E;for(A.innerHTML=C;E=A.firstChild,E;)c.appendChild(E);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=x("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(C),this.options.closeButton){const A=this._closeButton=x("button","mapboxgl-popup-close-button",c);A.type="button",A.setAttribute("aria-label","Close popup"),A.innerHTML='<span aria-hidden="true">&#215;</span>',A.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(C){return this._classList.add(C),this._updateClassList(),this}removeClassName(C){return this._classList.delete(C),this._updateClassList(),this}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){let c;return this._classList.delete(C)?c=!1:(this._classList.add(C),c=!0),this._updateClassList(),c}_onMouseEvent(C){this._update(C.point)}_getAnchor(C){if(this.options.anchor)return this.options.anchor;const c=this._map,A=this._container,E=this._pos;if(!c||!A||!E)return"bottom";const M=A.offsetWidth,P=A.offsetHeight,j=E.x<M/2,K=E.x>c.transform.width-M/2;if(E.y+C<P)return j?"top-left":K?"top-right":"top";if(E.y>c.transform.height-P){if(j)return"bottom-left";if(K)return"bottom-right"}return j?"left":K?"right":"bottom"}_updateClassList(){const C=this._container;if(!C)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),C.className=c.join(" ")}_update(C){const c=this._map,A=this._content;if(!c||!this._lngLat&&!this._trackPointer||!A)return;let E=this._container;if(E||(E=this._container=x("div","mapboxgl-popup",c.getContainer()),this._tip=x("div","mapboxgl-popup-tip",E),E.appendChild(A)),this.options.maxWidth&&E.style.maxWidth!==this.options.maxWidth&&(E.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Hu(this._lngLat,this._pos,c.transform)),!this._trackPointer||C){const M=this._pos=this._trackPointer&&C instanceof t.P?C:c.project(this._lngLat,this._altitude),P=Oc(this.options.offset),j=this._anchor=this._getAnchor(P.y),K=Oc(this.options.offset,j),te=M.add(K).round();c._requestDomTask(()=>{this._container&&j&&(this._container.style.transform=`${oh[j]} translate(${te.x}px,${te.y}px)`)})}if(!this._marker&&c._showingGlobe()){const M=t.eW(c.transform,this._lngLat)?0:1;this._setOpacity(M)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector($d);C&&C.focus()}_onClose(){this.remove()}_setOpacity(C){this._container&&(this._container.style.opacity=`${C}`),this._content&&(this._content.style.pointerEvents=C?"auto":"none")}},Marker:Qu,Style:xo,LngLat:t.ci,LngLatBounds:t.aG,Point:t.P,MercatorCoordinate:t.ac,FreeCameraOptions:al,Evented:t.E,config:t.e,prewarm:t.e_,clearPrewarmedResources:t.eZ,get accessToken(){return t.e.ACCESS_TOKEN},set accessToken(C){t.e.ACCESS_TOKEN=C},get baseApiUrl(){return t.e.API_URL},set baseApiUrl(C){t.e.API_URL=C},get workerCount(){return t.f7.workerCount},set workerCount(C){t.f7.workerCount=C},get maxParallelImageRequests(){return t.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){t.e.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage(C){t.f6(C)},get workerUrl(){return t.f5.workerUrl},set workerUrl(C){t.f5.workerUrl=C},get workerClass(){return t.f5.workerClass},set workerClass(C){t.f5.workerClass=C},get workerParams(){return t.f5.workerParams},set workerParams(C){t.f5.workerParams=C},get dracoUrl(){return t.f4()},set dracoUrl(C){t.f3(C)},get meshoptUrl(){return t.f2()},set meshoptUrl(C){t.f1(C)},setNow:t.q.setNow,restoreNow:t.q.restoreNow}});var l=o;return l})}(lw)),lw.exports}var fee=hee();const dee=s0(fee),pee=()=>{};var dF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=function(n){const r=[];let e=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?r[e++]=o:o<2048?(r[e++]=o>>6|192,r[e++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),r[e++]=o>>18|240,r[e++]=o>>12&63|128,r[e++]=o>>6&63|128,r[e++]=o&63|128):(r[e++]=o>>12|224,r[e++]=o>>6&63|128,r[e++]=o&63|128)}return r},Aee=function(n){const r=[];let e=0,i=0;for(;e<n.length;){const o=n[e++];if(o<128)r[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[e++];r[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[e++],l=n[e++],t=n[e++],h=((o&7)<<18|(a&63)<<12|(l&63)<<6|t&63)-65536;r[i++]=String.fromCharCode(55296+(h>>10)),r[i++]=String.fromCharCode(56320+(h&1023))}else{const a=n[e++],l=n[e++];r[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|l&63)}}return r.join("")},GD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,r){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],l=o+1<n.length,t=l?n[o+1]:0,h=o+2<n.length,f=h?n[o+2]:0,p=a>>2,_=(a&3)<<4|t>>4;let g=(t&15)<<2|f>>6,m=f&63;h||(m=64,l||(g=64)),i.push(e[p],e[_],e[g],e[m])}return i.join("")},encodeString(n,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(n):this.encodeByteArray(VD(n),r)},decodeString(n,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(n):Aee(this.decodeStringToByteArray(n,r))},decodeStringToByteArray(n,r){this.init_();const e=r?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=e[n.charAt(o++)],t=o<n.length?e[n.charAt(o)]:0;++o;const f=o<n.length?e[n.charAt(o)]:64;++o;const _=o<n.length?e[n.charAt(o)]:64;if(++o,a==null||t==null||f==null||_==null)throw new mee;const g=a<<2|t>>4;if(i.push(g),f!==64){const m=t<<4&240|f>>2;if(i.push(m),_!==64){const b=f<<6&192|_;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gee=function(n){const r=VD(n);return GD.encodeByteArray(r,!0)},WD=function(n){return gee(n).replace(/\./g,"")},$D=function(n){try{return GD.decodeString(n,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};function zw(n,r){if(!(r instanceof Object))return r;switch(r.constructor){case Date:const e=r;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return r}for(const e in r)!r.hasOwnProperty(e)||!yee(e)||(n[e]=zw(n[e],r[e]));return n}function yee(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ee=()=>KD().__FIREBASE_DEFAULTS__,vee=()=>{if(typeof process>"u"||typeof dF>"u")return;const n=dF.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bee=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const r=n&&$D(n[1]);return r&&JSON.parse(r)},xee=()=>{try{return pee()||_ee()||vee()||bee()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_B=()=>{var n;return(n=xee())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((r,e)=>{this.resolve=r,this.reject=e})}wrapCallback(r){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof r=="function"&&(this.promise.catch(()=>{}),r.length===1?r(e):r(e,i))}}}function See(){return typeof window<"u"||qD()}function qD(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Cee(){try{return typeof indexedDB=="object"}catch{return!1}}function Eee(){return new Promise((n,r)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var a;r(((a=o.error)==null?void 0:a.message)||"")}}catch(e){r(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bee="FirebaseError";class Vy extends Error{constructor(r,e,i){super(e),this.code=r,this.customData=i,this.name=Bee,Object.setPrototypeOf(this,Vy.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M5.prototype.create)}}class M5{constructor(r,e,i){this.service=r,this.serviceName=e,this.errors=i}create(r,...e){const i=e[0]||{},o=`${this.service}/${r}`,a=this.errors[r],l=a?Tee(a,i):"Error",t=`${this.serviceName}: ${l} (${o}).`;return new Vy(o,t,i)}}function Tee(n,r){return n.replace(Iee,(e,i)=>{const o=r[i];return o!=null?String(o):`<${i}?>`})}const Iee=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(n,r){return Object.prototype.hasOwnProperty.call(n,r)}function CC(n,r){if(n===r)return!0;const e=Object.keys(n),i=Object.keys(r);for(const o of e){if(!i.includes(o))return!1;const a=n[o],l=r[o];if(AF(a)&&AF(l)){if(!CC(a,l))return!1}else if(a!==l)return!1}for(const o of i)if(!e.includes(o))return!1;return!0}function AF(n){return n!==null&&typeof n=="object"}function Mee(n,r){const e=new Fee(n,r);return e.subscribe.bind(e)}class Fee{constructor(r,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{r(this)}).catch(i=>{this.error(i)})}next(r){this.forEachObserver(e=>{e.next(r)})}error(r){this.forEachObserver(e=>{e.error(r)}),this.close(r)}complete(){this.forEachObserver(r=>{r.complete()}),this.close()}subscribe(r,e,i){let o;if(r===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Pee(r,["next","error","complete"])?o=r:o={next:r,error:e,complete:i},o.next===void 0&&(o.next=$4),o.error===void 0&&(o.error=$4),o.complete===void 0&&(o.complete=$4);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(r){this.observers===void 0||this.observers[r]===void 0||(delete this.observers[r],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(r){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,r)}sendOne(r,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[r]!==void 0)try{e(this.observers[r])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(r){this.finalized||(this.finalized=!0,r!==void 0&&(this.finalError=r),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pee(n,r){if(typeof n!="object"||n===null)return!1;for(const e of r)if(e in n&&typeof n[e]=="function")return!0;return!1}function $4(){}class nb{constructor(r,e,i){this.name=r,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(r){return this.instantiationMode=r,this}setMultipleInstances(r){return this.multipleInstances=r,this}setServiceProps(r){return this.serviceProps=r,this}setInstanceCreatedCallback(r){return this.onInstanceCreated=r,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lee{constructor(r,e){this.name=r,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(r){const e=this.normalizeInstanceIdentifier(r);if(!this.instancesDeferred.has(e)){const i=new wee;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(r){const e=this.normalizeInstanceIdentifier(r==null?void 0:r.identifier),i=(r==null?void 0:r.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(r){if(r.name!==this.name)throw Error(`Mismatching Component ${r.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=r,!!this.shouldAutoInitialize()){if(Oee(r))try{this.getOrInitializeService({instanceIdentifier:Q0})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(r=Q0){this.instancesDeferred.delete(r),this.instancesOptions.delete(r),this.instances.delete(r)}async delete(){const r=Array.from(this.instances.values());await Promise.all([...r.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...r.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(r=Q0){return this.instances.has(r)}getOptions(r=Q0){return this.instancesOptions.get(r)||{}}initialize(r={}){const{options:e={}}=r,i=this.normalizeInstanceIdentifier(r.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[a,l]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(a);i===t&&l.resolve(o)}return o}onInit(r,e){const i=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(i)??new Set;o.add(r),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&r(a,i),()=>{o.delete(r)}}invokeOnInitCallbacks(r,e){const i=this.onInitCallbacks.get(e);if(i)for(const o of i)try{o(r,e)}catch{}}getOrInitializeService({instanceIdentifier:r,options:e={}}){let i=this.instances.get(r);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kee(r),options:e}),this.instances.set(r,i),this.instancesOptions.set(r,e),this.invokeOnInitCallbacks(i,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,i)}catch{}return i||null}normalizeInstanceIdentifier(r=Q0){return this.component?this.component.multipleInstances?r:Q0:r}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kee(n){return n===Q0?void 0:n}function Oee(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(r){this.name=r,this.providers=new Map}addComponent(r){const e=this.getProvider(r.name);if(e.isComponentSet())throw new Error(`Component ${r.name} has already been registered with ${this.name}`);e.setComponent(r)}addOrOverwriteComponent(r){this.getProvider(r.name).isComponentSet()&&this.providers.delete(r.name),this.addComponent(r)}getProvider(r){if(this.providers.has(r))return this.providers.get(r);const e=new Lee(r,this);return this.providers.set(r,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=[];var uc;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(uc||(uc={}));const XD={debug:uc.DEBUG,verbose:uc.VERBOSE,info:uc.INFO,warn:uc.WARN,error:uc.ERROR,silent:uc.SILENT},Dee=uc.INFO,Ree={[uc.DEBUG]:"log",[uc.VERBOSE]:"log",[uc.INFO]:"info",[uc.WARN]:"warn",[uc.ERROR]:"error"},Nee=(n,r,...e)=>{if(r<n.logLevel)return;const i=new Date().toISOString(),o=Ree[r];if(o)console[o](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${r})`)};class ZD{constructor(r){this.name=r,this._logLevel=Dee,this._logHandler=Nee,this._userLogHandler=null,vB.push(this)}get logLevel(){return this._logLevel}set logLevel(r){if(!(r in uc))throw new TypeError(`Invalid value "${r}" assigned to \`logLevel\``);this._logLevel=r}setLogLevel(r){this._logLevel=typeof r=="string"?XD[r]:r}get logHandler(){return this._logHandler}set logHandler(r){if(typeof r!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=r}get userLogHandler(){return this._userLogHandler}set userLogHandler(r){this._userLogHandler=r}debug(...r){this._userLogHandler&&this._userLogHandler(this,uc.DEBUG,...r),this._logHandler(this,uc.DEBUG,...r)}log(...r){this._userLogHandler&&this._userLogHandler(this,uc.VERBOSE,...r),this._logHandler(this,uc.VERBOSE,...r)}info(...r){this._userLogHandler&&this._userLogHandler(this,uc.INFO,...r),this._logHandler(this,uc.INFO,...r)}warn(...r){this._userLogHandler&&this._userLogHandler(this,uc.WARN,...r),this._logHandler(this,uc.WARN,...r)}error(...r){this._userLogHandler&&this._userLogHandler(this,uc.ERROR,...r),this._logHandler(this,uc.ERROR,...r)}}function jee(n){vB.forEach(r=>{r.setLogLevel(n)})}function Uee(n,r){for(const e of vB){let i=null;r&&r.level&&(i=XD[r.level]),n===null?e.userLogHandler=null:e.userLogHandler=(o,a,...l)=>{const t=l.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");a>=(i??o.logLevel)&&n({level:uc[a].toLowerCase(),message:t,args:l,type:o.name})}}}const zee=(n,r)=>r.some(e=>n instanceof e);let mF,gF;function Hee(){return mF||(mF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qee(){return gF||(gF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JD=new WeakMap,EC=new WeakMap,eR=new WeakMap,K4=new WeakMap,bB=new WeakMap;function Vee(n){const r=new Promise((e,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{e(Wg(n.result)),o()},l=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",l)});return r.then(e=>{e instanceof IDBCursor&&JD.set(e,n)}).catch(()=>{}),bB.set(r,n),r}function Gee(n){if(EC.has(n))return;const r=new Promise((e,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{e(),o()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});EC.set(n,r)}let BC={get(n,r,e){if(n instanceof IDBTransaction){if(r==="done")return EC.get(n);if(r==="objectStoreNames")return n.objectStoreNames||eR.get(n);if(r==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Wg(n[r])},set(n,r,e){return n[r]=e,!0},has(n,r){return n instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in n}};function Wee(n){BC=n(BC)}function $ee(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(r,...e){const i=n.call(q4(this),r,...e);return eR.set(i,r.sort?r.sort():[r]),Wg(i)}:Qee().includes(n)?function(...r){return n.apply(q4(this),r),Wg(JD.get(this))}:function(...r){return Wg(n.apply(q4(this),r))}}function Kee(n){return typeof n=="function"?$ee(n):(n instanceof IDBTransaction&&Gee(n),zee(n,Hee())?new Proxy(n,BC):n)}function Wg(n){if(n instanceof IDBRequest)return Vee(n);if(K4.has(n))return K4.get(n);const r=Kee(n);return r!==n&&(K4.set(n,r),bB.set(r,n)),r}const q4=n=>bB.get(n);function qee(n,r,{blocked:e,upgrade:i,blocking:o,terminated:a}={}){const l=indexedDB.open(n,r),t=Wg(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Wg(l.result),h.oldVersion,h.newVersion,Wg(l.transaction),h)}),e&&l.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),t.then(h=>{a&&h.addEventListener("close",()=>a()),o&&h.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),t}const Yee=["get","getKey","getAll","getAllKeys","count"],Xee=["put","add","delete","clear"],Y4=new Map;function yF(n,r){if(!(n instanceof IDBDatabase&&!(r in n)&&typeof r=="string"))return;if(Y4.get(r))return Y4.get(r);const e=r.replace(/FromIndex$/,""),i=r!==e,o=Xee.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Yee.includes(e)))return;const a=async function(l,...t){const h=this.transaction(l,o?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(t.shift())),(await Promise.all([f[e](...t),o&&h.done]))[0]};return Y4.set(r,a),a}Wee(n=>({...n,get:(r,e,i)=>yF(r,e)||n.get(r,e,i),has:(r,e)=>!!yF(r,e)||n.has(r,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{constructor(r){this.container=r}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Jee(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function Jee(n){const r=n.getComponent();return(r==null?void 0:r.type)==="VERSION"}const Hw="@firebase/app",TC="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=new ZD("@firebase/app"),ete="@firebase/app-compat",tte="@firebase/analytics-compat",rte="@firebase/analytics",nte="@firebase/app-check-compat",ite="@firebase/app-check",ste="@firebase/auth",ote="@firebase/auth-compat",ate="@firebase/database",lte="@firebase/data-connect",cte="@firebase/database-compat",ute="@firebase/functions",hte="@firebase/functions-compat",fte="@firebase/installations",dte="@firebase/installations-compat",pte="@firebase/messaging",Ate="@firebase/messaging-compat",mte="@firebase/performance",gte="@firebase/performance-compat",yte="@firebase/remote-config",_te="@firebase/remote-config-compat",vte="@firebase/storage",bte="@firebase/storage-compat",xte="@firebase/firestore",wte="@firebase/ai",Ste="@firebase/firestore-compat",Cte="firebase",Ete="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="[DEFAULT]",Bte={[Hw]:"fire-core",[ete]:"fire-core-compat",[rte]:"fire-analytics",[tte]:"fire-analytics-compat",[ite]:"fire-app-check",[nte]:"fire-app-check-compat",[ste]:"fire-auth",[ote]:"fire-auth-compat",[ate]:"fire-rtdb",[lte]:"fire-data-connect",[cte]:"fire-rtdb-compat",[ute]:"fire-fn",[hte]:"fire-fn-compat",[fte]:"fire-iid",[dte]:"fire-iid-compat",[pte]:"fire-fcm",[Ate]:"fire-fcm-compat",[mte]:"fire-perf",[gte]:"fire-perf-compat",[yte]:"fire-rc",[_te]:"fire-rc-compat",[vte]:"fire-gcs",[bte]:"fire-gcs-compat",[xte]:"fire-fst",[Ste]:"fire-fst-compat",[wte]:"fire-vertex","fire-js":"fire-js",[Cte]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map,Py=new Map,Ly=new Map;function ib(n,r){try{n.container.addComponent(r)}catch(e){eg.debug(`Component ${r.name} failed to register with FirebaseApp ${n.name}`,e)}}function tR(n,r){n.container.addOrOverwriteComponent(r)}function sb(n){const r=n.name;if(Ly.has(r))return eg.debug(`There were multiple attempts to register component ${r}.`),!1;Ly.set(r,n);for(const e of i0.values())ib(e,n);for(const e of Py.values())ib(e,n);return!0}function rR(n,r){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(r)}function Tte(n,r,e=n0){rR(n,r).clearInstance(e)}function xB(n){return n.options!==void 0}function nR(n){return xB(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function Ite(n){return n==null?!1:n.settings!==void 0}function Mte(){Ly.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fte={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ip=new M5("app","Firebase",Fte);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iR=class{constructor(r,e,i){this._isDeleted=!1,this._options={...r},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new nb("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(r){this.checkDestroyed(),this._automaticDataCollectionEnabled=r}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(r){this._isDeleted=r}checkDestroyed(){if(this.isDeleted)throw ip.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(n,r){const e=$D(n.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${r} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${r} is invalid: expiration claim could not be parsed`);return}const o=JSON.parse(e).exp*1e3,a=new Date().getTime();o-a<=0&&console.error(`FirebaseServerApp ${r} is invalid: the token has expired.`)}class Pte extends iR{constructor(r,e,i,o){const a=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!0,l={name:i,automaticDataCollectionEnabled:a};if(r.apiKey!==void 0)super(r,l,o);else{const t=r;super(t.options,l,o)}this._serverConfig={automaticDataCollectionEnabled:a,...e},this._serverConfig.authIdToken&&_F(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&_F(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,f1(Hw,TC,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(r){this.isDeleted||(this._refCount++,r!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(r,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){SB(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ip.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=Ete;function wB(n,r={}){let e=n;typeof r!="object"&&(r={name:r});const i={name:n0,automaticDataCollectionEnabled:!0,...r},o=i.name;if(typeof o!="string"||!o)throw ip.create("bad-app-name",{appName:String(o)});if(e||(e=_B()),!e)throw ip.create("no-options");const a=i0.get(o);if(a){if(CC(e,a.options)&&CC(i,a.config))return a;throw ip.create("duplicate-app",{appName:o})}const l=new YD(o);for(const h of Ly.values())l.addComponent(h);const t=new iR(e,i,l);return i0.set(o,t),t}function Lte(n,r={}){if(See()&&!qD())throw ip.create("invalid-server-app-environment");let e,i=r||{};if(n&&(xB(n)?e=n.options:nR(n)?i=n:e=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),e||(e=_B()),!e)throw ip.create("no-options");const o={...i,...e};o.releaseOnDeref!==void 0&&delete o.releaseOnDeref;const a=p=>[...p].reduce((_,g)=>Math.imul(31,_)+g.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ip.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(o)),t=Py.get(l);if(t)return t.incRefCount(i.releaseOnDeref),t;const h=new YD(l);for(const p of Ly.values())h.addComponent(p);const f=new Pte(e,i,l,h);return Py.set(l,f),f}function kte(n=n0){const r=i0.get(n);if(!r&&n===n0&&_B())return wB();if(!r)throw ip.create("no-app",{appName:n});return r}function Ote(){return Array.from(i0.values())}async function SB(n){let r=!1;const e=n.name;i0.has(e)?(r=!0,i0.delete(e)):Py.has(e)&&n.decRefCount()<=0&&(Py.delete(e),r=!0),r&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function f1(n,r,e){let i=Bte[n]??n;e&&(i+=`-${e}`);const o=i.match(/\s|\//),a=r.match(/\s|\//);if(o||a){const l=[`Unable to register library "${i}" with version "${r}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${r}" contains illegal characters (whitespace or "/")`),eg.warn(l.join(" "));return}sb(new nb(`${i}-version`,()=>({library:i,version:r}),"VERSION"))}function oR(n,r){if(n!==null&&typeof n!="function")throw ip.create("invalid-log-argument");Uee(n,r)}function aR(n){jee(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dte="firebase-heartbeat-database",Rte=1,ob="firebase-heartbeat-store";let X4=null;function lR(){return X4||(X4=qee(Dte,Rte,{upgrade:(n,r)=>{switch(r){case 0:try{n.createObjectStore(ob)}catch(e){console.warn(e)}}}}).catch(n=>{throw ip.create("idb-open",{originalErrorMessage:n.message})})),X4}async function Nte(n){try{const e=(await lR()).transaction(ob),i=await e.objectStore(ob).get(cR(n));return await e.done,i}catch(r){if(r instanceof Vy)eg.warn(r.message);else{const e=ip.create("idb-get",{originalErrorMessage:r==null?void 0:r.message});eg.warn(e.message)}}}async function vF(n,r){try{const i=(await lR()).transaction(ob,"readwrite");await i.objectStore(ob).put(r,cR(n)),await i.done}catch(e){if(e instanceof Vy)eg.warn(e.message);else{const i=ip.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});eg.warn(i.message)}}}function cR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jte=1024,Ute=30;class zte{constructor(r){this.container=r,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Qte(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var r,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=bF();if(((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>Ute){const l=Vte(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){eg.warn(i)}}async getHeartbeatsHeader(){var r;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=bF(),{heartbeatsToSend:i,unsentEntries:o}=Hte(this._heartbeatsCache.heartbeats),a=WD(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return eg.warn(e),""}}}function bF(){return new Date().toISOString().substring(0,10)}function Hte(n,r=jte){const e=[];let i=n.slice();for(const o of n){const a=e.find(l=>l.agent===o.agent);if(a){if(a.dates.push(o.date),xF(e)>r){a.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),xF(e)>r){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class Qte{constructor(r){this.app=r,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cee()?Eee().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Nte(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(r){if(await this._canUseIndexedDBPromise){const i=await this.read();return vF(this.app,{lastSentHeartbeatDate:r.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:r.heartbeats})}else return}async add(r){if(await this._canUseIndexedDBPromise){const i=await this.read();return vF(this.app,{lastSentHeartbeatDate:r.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...r.heartbeats]})}else return}}function xF(n){return WD(JSON.stringify({version:2,heartbeats:n})).length}function Vte(n){if(n.length===0)return-1;let r=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,r=i);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gte(n){sb(new nb("platform-logger",r=>new Zee(r),"PRIVATE")),sb(new nb("heartbeat",r=>new zte(r),"PRIVATE")),f1(Hw,TC,n),f1(Hw,TC,"esm2020"),f1("fire-js","")}Gte("");const Wte=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Vy,SDK_VERSION:sR,_DEFAULT_ENTRY_NAME:n0,_addComponent:ib,_addOrOverwriteComponent:tR,_apps:i0,_clearComponents:Mte,_components:Ly,_getProvider:rR,_isFirebaseApp:xB,_isFirebaseServerApp:Ite,_isFirebaseServerAppSettings:nR,_registerComponent:sb,_removeServiceInstance:Tte,_serverApps:Py,deleteApp:SB,getApp:kte,getApps:Ote,initializeApp:wB,initializeServerApp:Lte,onLog:oR,registerVersion:f1,setLogLevel:aR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $te{constructor(r,e){this._delegate=r,this.firebase=e,ib(r,new nb("app-compat",()=>this,"PUBLIC")),this.container=r.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(r){this._delegate.automaticDataCollectionEnabled=r}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(r=>{this._delegate.checkDestroyed(),r()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),SB(this._delegate)))}_getService(r,e=n0){var o;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(r);return!i.isInitialized()&&((o=i.getComponent())==null?void 0:o.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(r,e=n0){this._delegate.container.getProvider(r).clearInstance(e)}_addComponent(r){ib(this._delegate,r)}_addOrOverwriteComponent(r){tR(this._delegate,r)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kte={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},wF=new M5("app-compat","Firebase",Kte);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qte(n){const r={},e={__esModule:!0,initializeApp:a,app:o,registerVersion:f1,setLogLevel:aR,onLog:oR,apps:null,SDK_VERSION:sR,INTERNAL:{registerComponent:t,removeApp:i,useAsService:h,modularAPIs:Wte}};e.default=e,Object.defineProperty(e,"apps",{get:l});function i(f){delete r[f]}function o(f){if(f=f||n0,!pF(r,f))throw wF.create("no-app",{appName:f});return r[f]}o.App=n;function a(f,p={}){const _=wB(f,p);if(pF(r,_.name))return r[_.name];const g=new n(_,e);return r[_.name]=g,g}function l(){return Object.keys(r).map(f=>r[f])}function t(f){const p=f.name,_=p.replace("-compat","");if(sb(f)&&f.type==="PUBLIC"){const g=(m=o())=>{if(typeof m[_]!="function")throw wF.create("invalid-app-argument",{appName:p});return m[_]()};f.serviceProps!==void 0&&zw(g,f.serviceProps),e[_]=g,n.prototype[_]=function(...m){return this._getService.bind(this,p).apply(this,f.multipleInstances?m:[])}}return f.type==="PUBLIC"?e[_]:null}function h(f,p){return p==="serverAuth"?null:p}return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){const n=qte($te);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:uR,extendNamespace:r,createSubscribe:Mee,ErrorFactory:M5,deepExtend:zw};function r(e){zw(n,e)}return n}const Yte=uR();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new ZD("@firebase/app-compat"),Xte="@firebase/app-compat",Zte="0.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jte(n){f1(Xte,Zte,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=KD();if(n.firebase!==void 0){SF.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const r=n.firebase.SDK_VERSION;r&&r.indexOf("LITE")>=0&&SF.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ere=Yte;Jte();var tre="firebase",rre="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ere.registerVersion(tre,rre,"app-compat");window.require=void 0;window.$=window.jQuery=F9;window._=k9;window.Axios=Mu;window.feather=ZF;window.moment=_s;window.Fancybox=_c;mb.plugin(t$);mb.plugin(r$);mb.plugin(e$);window.Alpine=mb;document.addEventListener("DOMContentLoaded",()=>{mb.start(),ZF.replace()});window.FormGroup=s$;window.Table=o$;window.$onUploadFile=a$;window.$validatorOption=l$;window.toastr=h$;window.html2pdf=yK;window.Chart=zm;window.printJS=IJ;window.anime=Au;window.ExcelJS=oee;window.saveAs=cee.saveAs;window.mapboxgl=dee;export{Nl as _,So as c,s0 as g};
